"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[54916],{433499:(e,t,o)=>{o.d(t,{useEmoji:()=>s});var i=o(296540),n=o(153078),r=o(898848);const s=({inputValue:e,inputRef:t,onChangeInput:o,emojiOpts:s})=>{(0,i.useLayoutEffect)((()=>{t.current&&window.Emoji&&e!==window.Emoji.val(t.current)&&(window.Emoji.val(t.current,window.Emoji.emojiToHTML((0,r.clean)(e))),(0,n.setEndOfContentEditable)(t.current))}),[e]),(0,i.useEffect)((()=>{let e=null;return window.stManager.add([window.jsc("web/emoji.js")],(function(){t?.current?e=window.Emoji.init(t.current,s):console.error("Не удалось инициализировать эмодзи из-за отсутствия ref")})),()=>{e&&window.Emoji&&window.Emoji.destroy(e)}}),[]);return{handleInput:e=>{e.preventDefault();const t=e.target;t instanceof HTMLElement&&window.Emoji&&o(window.Emoji.val(t))}}}},515360:(e,t,o)=>{o.d(t,{formatCommentText:()=>d});var i=o(839348),n=o(148636),r=o(898848),s=o(573859);const d=(e,t=!1)=>{let o=(0,r.clean)(e);return o=(0,n.replaceHyperLinks)(o,n.linksReplacer),o=(0,i.replaceMentions)(o),t&&(o=(0,s.emojiToHTML)(o,!0)),o}},317835:(e,t,o)=>{o.d(t,{formatFileSize:()=>c});var i=o(866467),n=o(8520);const r=1024,s=Math.pow(r,2),d=Math.pow(r,3),a=Math.pow(r,4);function c(e){let t=0,o="";return e>a?(t=Math.round(e/a*1e3)/1e3,o=(0,i.getLang)("global_tb")):e>d?(t=Math.round(e/d*100)/100,o=(0,i.getLang)("global_gb")):e>s?(t=Math.round(e/s*10)/10,o=(0,i.getLang)("global_mb")):(t=Math.round(e/r),o=(0,i.getLang)("global_kb")),`${(0,n.formatNumber)(t)} ${o}`}},881390:(e,t,o)=>{o.d(t,{getValidateLengthMessage:()=>i});const i=({value:e,maxLength:t,getExceededLengthLabel:o,getRemainingLengthLabel:i})=>{const n=e.length||0,r=n>t-100,s=n>t,d=Math.abs(n-t),a=t-n;return s?o(d):r?i(a):null}},153078:(e,t,o)=>{o.d(t,{setEndOfContentEditable:()=>n});var i=o(298077);const n=e=>{const t=window.getSelection();t?(t.selectAllChildren(e),t.collapseToEnd()):(0,i.logError)(new Error("setEndOfContentEditable: 'selection' must not be null or undefined"))}},461641:(e,t,o)=>{o.d(t,{replaceTimeTags:()=>s});var i=o(971517),n=o(841315);const r=/(?:(\d+):)?([0-5]?\d):([0-5]?\d)(?![:\d])/g,s=({getDescriptionTimeTagWrap:e,text:t,video:o})=>{if(!o||(0,i.isVideoExternal)(o)||!o.owner_id||!o.id||Boolean(o.interactive_info))return t;const s=(0,n.getVideoUrl)(o),d=o.duration??0;return t.replaceAll(r,((t,o,i,n)=>{const r=Number(o??0),a=Number(i??0),c=Number(n??0),l=c+60*a+60*r*60;if(l>=0&&l<d){return e(t,l,`${s}?t=${`${r}h${a}m${c}s`}`)}return t}))}},197053:(e,t,o)=>{o.d(t,{normalizeAttachments:()=>d,parseCommentProps:()=>a});var i=o(866467),n=o(538522),r=o(540462);function s(e=[],t=[]){return e.length&&t.length?e.map((e=>{const o=(e=>"custom"in e&&"original_type"in e&&"custom"===e.type)(e)?e.original_type:e.type;return"unsupported"===o?e:t.includes(o)?{type:"custom",original_type:"unsupported",custom:{isUnsupported:!0}}:e})):e}const d=e=>{if(e)return e.reduce(((e,t)=>{const{type:o}=t;let s;switch(o){case"photo":s=(e=>{const t=e.photo;if(!t)return;const o=(0,n.joinRawId)({ownerId:t.owner_id,itemId:t.id}),i=`/photo${o}?list=${t.web_view_token??(0,n.joinRawId)({ownerId:t.owner_id,itemId:t.album_id})}&from=comments`;if(!t.sizes)return;return{type:"photo",photo:{...t,photo_id:o,photo_url:i}}})(t);break;case"video":s=(e=>{const t=e.video;if(!t)return;if(!t.owner_id)return;if(!t.id)return;const o=(0,n.joinRawId)({ownerId:t.owner_id,itemId:t.id}),s=t.access_key||(0,n.joinRawId)({ownerId:t.owner_id,itemId:t.album_id}),d=`/${"short_video"===t.type?"clip":"video"}${o}?list=${s}&from=access_hash`;let a;return(0,r.partConfigEnabled)("interactive_video_redesign_badge_mvk")&&"interactive"===t.type&&(a=(0,i.getLang)("video_interactive_label")),{type:"video",video:{...t,video_id:o,video_url:d,label:a}}})(t);break;case"doc":s=(e=>{const t=e.doc;if(t)return{type:"doc",doc:{...t,doc_id:(0,n.joinRawId)({ownerId:t.owner_id,itemId:t.id})}}})(t);break;case"sticker":s=(e=>{const t=e.sticker;if(t)return{type:"sticker",sticker:t}})(t);break;default:s={type:"custom",original_type:o,custom:t[o]}}return s&&e.push(s),e}),[])},a=(e,t)=>{const{attachments:o,...i}=e,n=t?.length;return{...i,attachments:n?s(d(o),t):d(o)}}},17333:(e,t,o)=>{o.d(t,{StrikeForbidObjectForm:()=>I});var i,n=o(474848),r=o(296540),s=o(866467),d=o(454919),a=o(454154),c=o(524378),l=o(44544),m=o(387960),h=o(753457),u=o(945206),v=o(944048),p=o(469004),_=o(246429),g=o(540462),w=o(717433),S=o(683234),k=o(538522);!function(e){e[e.Video=1]="Video",e[e.Photo=2]="Photo",e[e.Wall=3]="Wall",e[e.Market=4]="Market",e[e.Doc=5]="Doc",e[e.CommentPhoto=6]="CommentPhoto",e[e.CommentVideo=7]="CommentVideo",e[e.CommentWall=8]="CommentWall",e[e.CommentMarket=9]="CommentMarket",e[e.CommentTopic=10]="CommentTopic",e[e.Story=11]="Story",e[e.VideoShort=12]="VideoShort",e[e.VideoLive=13]="VideoLive"}(i||(i={}));const b="strike_system.php",f="https://vk.com/helpdesk?act=show&id=";class I extends r.Component{submit(){if(""!==this.state.comment||10!==this.state.selectedReason)if(""!==this.state.link_to_ticket||!(0,g.partConfigEnabled)("strike_system_delete_with_reason_support")||(0,g.partConfigEnabled)("strike_system_delete_with_reason"))if(0!=this.state.selectedReason){if(this.setState({isLoading:!0}),!this.state.for_copyright_holders_empty){const e={act:"object_delete",owner_id:this.props.objectOwnerId,object_id:this.props.objectId,object_type:this.props.objectType,reason_id:this.state.selectedReason,claim_id:10===this.state.selectedReason?this.state.claimId:0,link_to_ticket:this.state.link_to_ticket,dmca_comment:this.state.comment,only_withdrawal:10===this.state.selectedReason&&0!==this.state.claimId&&this.state.only_withdrawal_checked?1:0,strike:this.state.strike_community_checked?1:0};switch(this.props.objectType){case 7:const e=document.getElementById("post"+this.props.objectOwnerId+"video_"+this.props.objectId+"mv");e&&e.setAttribute("data-action","delete");break;case 10:const t=document.getElementById("post"+this.props.objectOwnerId+"_"+this.props.objectId);window.cur.topicMyDeleted[this.props.objectOwnerId+"_"+this.props.objectId]=1,t&&t.classList.add("bp_loading")}window.ajax.post(b,e,{onDone:(e,t,i)=>{if(e){switch(this.props.objectType){case 12:case 13:case 1:if((0,g.partConfigEnabled)("video_playlist_page_redesign")){const e={videoId:this.props.objectId,ownerId:this.props.objectOwnerId};window.dispatchEvent(new CustomEvent("video_deleted",{detail:e}))}const e=document.getElementById("mv_info");if(!e)break;(0,g.partConfigEnabled)("video_remove_restore_video_act")&&Promise.all([o.e(73538),o.e("langs/web/video_restore_button")]).then(o.bind(o,69727)).then((({initVideoRestoreButton:e})=>{const{objectId:t,objectOwnerId:o}=this.props,i=(0,k.joinRawId)({itemId:t,ownerId:o}),n=document.getElementById(`video-restore-button-widget-${i}-videoviewer`),r=window.Videoview;e(n,{videoId:t,ownerId:o,onClick:()=>{const e=document.getElementById("mv_warning");e&&(e.innerHTML="",(0,S.showProgress)(e,"","pr_medium"))},onRestore:()=>r?.onRestoreVideo(t,o,"videoviewer"),isVideoModal:!0})})),e.classList.contains("mv_info_invisible")||e.classList.add("mv_info_invisible");const i=document.getElementById("mv_warning");null!=i&&(i.innerHTML=t,i.style.display="block");const n=document.getElementById("mv_publish");null!=n&&(n.style.display="none");break;case 2:if(window.Photoview&&window.cur){const e=window.cur,o=window.Photoview,i=e.pvListId,n=e.pvIndex,r=e.pvData[i][n];o.toggleTopInfoPanel((0,s.getLang)("photo_deleted"),t),r.deleted=[e.pvTagInfoText.innerHTML,e.pvTagInfoButtons.innerHTML],o.toggleDeletedState(!0),o.updatePhotoDimensions()}break;case 3:if(window.Wall){const e=window.Wall,o=this.props.objectOwnerId+"_"+this.props.objectId;e.postShowDeletedMessage(o,t)}break;case 4:window.WkView?.hide?.(),(0,w.dispatchItemDeleteEvent)(),(0,_.showDoneBox)((0,s.getLang)("market_item_deleted"));break;case 6:const r=window.Photoview,d=document.getElementById("post"+this.props.objectOwnerId+"photo_"+this.props.objectId);r.commDone(d,t,!0,"");break;case 8:if(window.Wall){const e=window.Wall,o=this.props.objectOwnerId+"_"+this.props.objectId;e.postShowDeletedMessage(o,t)}break;case 7:if(!(0,g.partConfigEnabled)("video_modal_tree_comments")){window.Videoview.commActionDone(this.props.objectOwnerId+"_"+this.props.objectId,"mv",t,!0,"")}break;case 9:const a=window.Market,c=document.getElementById("post"+this.props.objectOwnerId+"market_"+this.props.objectId);a.commDone({node:c,text:t,del:!0,script:""});break;case 10:const l=document.getElementById("post"+this.props.objectOwnerId+"_"+this.props.objectId);if(l){l.classList.remove("bp_loading"),l.classList.add("bp_deleted");const e=l.querySelector(".bp_deleted_text");e&&(e.innerHTML=t)}break;case 11:const m=this.props.story;m?.removeStoryWithReason()}""!==i&&(0,_.showDoneBox)(i),(0,_.showDoneBox)(this.state.successText),this.props.onSubmit&&this.props.onSubmit(),this.props.onClose()}else switch(t){case"error_not_owner_for_ticket":this.setState({not_owner_for_ticket:!0});break;case"error_incorrect_link":this.setState({error_incorrect_link:!0});break;case"error_null_reason":(0,_.showDoneBox)((0,s.getLang)("reports_strike_system_error_null_reason"))}},onFail:()=>((0,_.showDoneBox)((0,s.getLang)("global_error")),!1),showProgress:()=>this.setState({isLoading:!0}),hideProgress:()=>this.setState({isLoading:!1})})}}else(0,_.showDoneBox)("error");else this.setState({link_to_ticket_empty:!0});else this.setState({for_copyright_holders_empty:!0})}close(){this.props.onClose()}changeReason(e){p.ls.set("strike_del_reason",e),this.setState({selectedReason:e})}getDmcaTitle(){const e={act:"get_dmca_title",claim_id:this.state.claimId};window.ajax.post(b,e,{onDone:e=>{this.setState({comment:e})},onFail:()=>((0,_.showDoneBox)((0,s.getLang)("global_error")),!1),showProgress:()=>this.setState({isLoading:!0}),hideProgress:()=>this.setState({isLoading:!1})})}componentDidMount(){0!==this.state.claimId&&(this.getDmcaTitle(),this.setState({link_to_ticket:f+this.state.claimId}));window.ajax.post(b,{act:"get_reasons"},{onDone:e=>{this.setState({reasons:e.reasons});const t=p.ls.get("strike_del_reason"),o=p.ls.get("strike_system_only_withdrawal");this.setState({only_withdrawal_checked:o}),0===this.state.claimId&&window.nav?.objLoc?.claim&&(this.setState({claimId:window.nav.objLoc.claim,link_to_ticket:f+window.nav.objLoc.claim}),this.getDmcaTitle()),0!==this.state.claimId&&-1!==this.state.reasons.findIndex((e=>10===e.key))?this.setState({selectedReason:10}):this.setState({selectedReason:t})},onFail:()=>((0,_.showDoneBox)("error"),!1),showProgress:()=>this.setState({isLoading:!0}),hideProgress:()=>this.setState({isLoading:!1})})}render(){const e=this.state.reasons,t=0!==this.state.claimId&&10===this.state.selectedReason&&1===this.props.objectType,o=10===this.state.selectedReason,i=(0,g.partConfigEnabled)("strike_system_delete_with_reason_support");return(0,n.jsx)(d.ModalBoxFast,{header:(0,s.getLang)("reports_strike_system_delete_with_reason"),onClose:this.props.onClose,closeAriaLabel:"Закрыть",actions:[(0,n.jsx)(a.Button,{size:"m",mode:"secondary",onClick:this.close,loading:this.state.isLoading,children:(0,s.getLang)("reports_strike_system_button_cancel")},"0"),(0,n.jsx)(a.Button,{size:"m",mode:"primary",onClick:this.submit,loading:this.state.isLoading,children:(0,s.getLang)("reports_strike_system_button_delete")},"1")],children:(0,n.jsxs)(c.FormLayout,{children:[(0,n.jsx)(l.FormItem,{top:(0,s.getLang)("reports_strike_system_label_select_reason"),children:e.map((e=>(0,n.jsx)(m.Radio,{checked:this.state.selectedReason===e.key,name:"reason",value:e.key,onChange:()=>{this.changeReason(e.key)},children:e.label},e.key)))}),i&&(0,n.jsx)(l.FormItem,{top:(0,s.getLang)("reports_strike_system_for_support_agent_label"),id:"for_support_agent",status:this.state.link_to_ticket_empty||this.state.not_owner_for_ticket||this.state.error_incorrect_link?"error":"default",bottom:this.state.link_to_ticket_empty?(0,s.getLang)("reports_strike_system_for_support_agent_error"):this.state.not_owner_for_ticket?(0,s.getLang)("reports_strike_system_for_support_agent_not_owner_error"):this.state.error_incorrect_link?(0,s.getLang)("reports_strike_system_error_incorrect_link"):"",children:(0,n.jsx)(h.Input,{id:"link_to_ticket",type:"text",placeholder:"https://vk.com/helpdesk?act=show&id=XXXXXXX",value:this.state.link_to_ticket,onChange:e=>{this.setState({link_to_ticket:e.target.value}),this.state.link_to_ticket_empty&&this.setState({link_to_ticket_empty:!1}),this.state.not_owner_for_ticket&&this.setState({not_owner_for_ticket:!1})}})}),o&&(0,n.jsx)(l.FormItem,{top:(0,s.getLang)("reports_strike_system_strike_textarea_label"),id:"for_copyright_holders",status:this.state.for_copyright_holders_empty?"error":"default",bottom:this.state.for_copyright_holders_empty?(0,s.getLang)("reports_strike_system_strike_textarea_error"):"",children:(0,n.jsx)(u.Textarea,{id:"txt_for_copyright_holders",value:this.state.comment,onChange:e=>{this.setState({comment:e.target.value}),this.state.for_copyright_holders_empty&&this.setState({for_copyright_holders_empty:!1})}})}),(0,n.jsxs)(l.FormItem,{bottom:(0,s.getLang)("reports_strike_system_strike_checkbox_desc"),children:[t&&(0,n.jsx)(v.Checkbox,{name:"only_withdrawal",defaultChecked:this.state.only_withdrawal_checked,onChange:e=>{this.setState({only_withdrawal_checked:e.target.checked}),p.ls.set("strike_system_only_withdrawal",e.target.checked)},children:"Только изьятие"}),(0,n.jsx)(v.Checkbox,{name:"strike_community",defaultChecked:this.state.strike_community_checked,onChange:e=>{this.setState({strike_community_checked:e.target.checked}),p.ls.set("strike_system_strike_community",e.target.checked)},children:(0,s.getLang)("reports_strike_system_strike_checkbox")})]})]})})}constructor(e){super(e),this.props=e;const t=p.ls.get("strike_system_strike_community");this.state={successText:"Успешно",reasons:[],selectedReason:0,claimId:this.props.claimId?this.props.claimId:0,comment:"",isLoading:!1,for_copyright_holders_empty:!1,link_to_ticket:"",link_to_ticket_empty:!1,error_incorrect_link:!1,not_owner_for_ticket:!1,only_withdrawal_checked:!1,strike_community_checked:null!==t&&t},this.submit=this.submit.bind(this),this.close=this.close.bind(this),this.changeReason=this.changeReason.bind(this),this.getDmcaTitle=this.getDmcaTitle.bind(this)}}},130151:(e,t,o)=>{o.d(t,{VideoModalClaimedBlock:()=>h});var i=o(474848),n=o(866467),r=o(303800),s=o(194528),d=o(172656),a=o(557992),c=o(753457),l=o(373080),m=o(279734);const h=({claimedBlock:e,moderationInfo:t})=>(0,i.jsxs)(r.Div,{children:[(0,i.jsx)(s.Spacing,{size:8}),(0,i.jsxs)(d.Group,{children:[(0,i.jsx)(a.Header,{size:"medium",children:(0,n.getLang)("video_modal_claimed_block_header")}),(0,i.jsxs)(r.Div,{mode:"horizontal",children:[e&&(0,i.jsx)(c.Paragraph,{Component:"p",weight:"3",children:(0,i.jsx)(l.InnerHTML,{children:e})}),t?.claim_id&&!t?.moderator_id&&(0,i.jsxs)(c.Paragraph,{Component:"p",weight:"3",children:["Жалоба"," ",(0,i.jsxs)(m.Link,{href:`/claims?act=viewclaim&cid=${t.claim_id}`,target:"_blank",children:["#",t.claim_id]})]}),t&&(0,i.jsxs)(i.Fragment,{children:[t.originalVideoId&&(0,i.jsxs)(c.Paragraph,{Component:"p",weight:"3",children:["Заблокировано по md5 на основе видео"," ",(0,i.jsxs)(m.Link,{href:`/video${t.originalVideoId}`,target:"_blank",children:["/video",t.originalVideoId]})]}),t.hasClaimRestriction&&(0,i.jsx)(c.Paragraph,{Component:"p",weight:"3",children:(0,n.getLang)("video_is_licensed_cannot_claim")}),t.moderator_id&&(0,i.jsxs)(c.Paragraph,{Component:"p",weight:"3",children:[(0,n.getLang)("video_not_licensed_short")," ",(0,i.jsx)(m.Link,{href:`id${t.moderator_id}`,children:t.moderator_name})," ",t.claim_date]})]})]})]})]})},683803:(e,t,o)=>{o.d(t,{VideoModalClaimedBlock:()=>i.VideoModalClaimedBlock});var i=o(130151)},240234:(e,t,o)=>{o.d(t,{VideoModalInfo:()=>g});var i=o(474848),n=o(293721),r=o(296540),s=o(865708),d=o(552292),a=o(194528),c=o(970466),l=o(657093),m=o(635108),h=o(372177),u=o(527072),v=o(683803),p=o(406805),_=o(540462);const g=({canSubscribeToAuthor:e,canAddToGroups:t,canDeleteVideo:o,canReport:g,canEditVideo:w,canAddToFavorite:S,canViewStatistic:k,canDownloadVideo:b,isShortVideo:f,isActiveLive:I,isExternal:C,videoType:y,claimedBlock:x,moderationVideoInfo:E,unauthLikesBox:A,statisticLink:M,...V})=>{const L=(0,r.useRef)(null),j=(0,n.useEvent)(c.videoModalService.setIsLikedEvent),O=(0,n.useEvent)(c.videoModalService.setNumberOfLikesEvent),T=(0,n.useStore)(c.videoModalService.$title),F=(0,n.useEvent)(c.videoModalService.setTitleEvent),D=(0,n.useStore)(c.videoModalService.$description),R=(0,n.useEvent)(c.videoModalService.setDescriptionEvent),P=(0,n.useEvent)(c.videoModalSubscribeService.setCanSubscribeEvent),B=(0,n.useEvent)(c.videoModalSubscribeService.setIsSubscriptionHiddenEvent),H=(0,n.useEvent)(c.videoModalService.setCanAddToGroupsEvent),N=(0,n.useEvent)(c.videoModalService.setCanReportEvent),$=(0,n.useEvent)(c.videoModalService.setCanEditVideoEvent),U=(0,n.useEvent)(c.videoModalService.setCanDeleteVideoEvent),G=(0,n.useEvent)(c.videoModalFaveService.setCanAddToFavorite),W=(0,n.useEvent)(c.videoModalService.setCanViewStatisticEvent),z=(0,n.useEvent)(c.videoModalService.setCanDownloadVideo),q=(0,n.useEvent)(c.videoModalFaveService.setIsFavoriteEvent),K=(0,n.useEvent)(c.videoModalService.setIsShortVideoEvent),Y=(0,n.useEvent)(c.videoModalService.setIsActiveLiveEvent),X=(0,n.useEvent)(c.videoModalService.setIsExternalEvent),J=(0,n.useEvent)(c.videoModalService.setVideoTypeEvent),Q=(0,n.useEvent)(c.videoModalAlbumsService.resetVideosAlbumsEvent),Z=(0,n.useEvent)(c.videoModalSubscribeService.setIsSubscribeEvent);return(0,r.useEffect)((()=>(P(e),H(t),N(g),$(w),U(o),G(S),W(k),z(b),Y(I),K(f),X(C),J(y),(0,_.partConfigEnabled)("video_fix_actions")||(0,p.initPlayerEventListeners)(),()=>{Q(window.vk.id),(0,_.partConfigEnabled)("video_fix_actions")||(0,p.removePlayerEventListeners)()})),[]),(0,r.useEffect)((()=>{j(V.isLiked)}),[V.isLiked]),(0,r.useEffect)((()=>{O(V.likes)}),[V.likes]),(0,r.useEffect)((()=>{F(V.title)}),[V.title]),(0,r.useEffect)((()=>{R(V.description)}),[V.description]),(0,r.useEffect)((()=>{q(V.isFavorite)}),[V.isFavorite]),(0,r.useEffect)((()=>{B(V.isSubscriptionHidden)}),[V.isSubscriptionHidden]),(0,r.useEffect)((()=>{Z(V.isSubscribeToAuthor)}),[V.isSubscribeToAuthor]),(0,i.jsx)(s.AppRootProvider,{portalRoot:L,children:(0,i.jsxs)("div",{ref:L,children:[(x||V.moderActions?.moderationInfo&&Object.values(V.moderActions.moderationInfo).some(Boolean))&&(0,i.jsx)(v.VideoModalClaimedBlock,{claimedBlock:x,moderationInfo:V.moderActions?.moderationInfo}),(0,i.jsx)(d.HeaderLayout,{aside:(E||V.withUMA)&&(0,i.jsx)(u.VideoModalInfoHeaderAside,{moderationVideoInfo:E,withUMA:V.withUMA,videoId:V.id,ownerId:V.mainOwnerId}),children:(0,i.jsx)(l.VideoModalInfoTitle,{...V,title:T||""})}),(0,i.jsx)(m.VideoModalInfoActions,{video:V,unauthLikesBox:A,statisticLink:M}),(0,i.jsx)(h.VideoModalInfoDescriptionWrapper,{video:V,description:D}),(0,i.jsx)(a.Spacing,{size:16})]})})}},991625:(e,t,o)=>{o.d(t,{Actions:()=>V});var i=o(474848),n=o(356337),r=o(128303),s=o(48269),d=o(303913),a=o(694430),c=o(377803),l=o(723723),m=o(246336),h=o(866467),u=o(451549),v=o(711615),p=o(802984),_=o(878095),g=o(970466),w=o(293721),S=o(856289),k=o(812695),b=o(296540),f=o(947204),I=o(406805),C=o(712188),y=o(314309),x=o(317216);const E=["options","moderationInfo"],A=([e,t])=>!E.includes(e)&&Boolean(t),M=e=>e?{icon:(0,i.jsx)(n.Icon28LikeCircleFillRed,{width:24,height:24}),foregroundColor:{light:c.default.colorAccentRed.normal.value,dark:c.default.colorAccentRed.normal.value},backgroundColor:{light:c.default.colorBackgroundNegativeTint.normal.value,dark:c.default.colorBackgroundNegativeTint.normal.value}}:{icon:(0,i.jsx)(r.Icon24LikeOutline,{className:(0,l.getColorClass)("color_icon_secondary")}),foregroundColor:{light:c.default.colorTextSecondary.normal.value,dark:c.default.colorTextSecondary.normal.value},backgroundColor:void 0},V=(0,b.memo)((({video:e,unauthLikesBox:t,statisticLink:o})=>{const n=(0,w.useStore)(g.videoModalService.$isLiked),r=(0,w.useStore)(g.videoModalService.$numberOfLikes),E=r?(0,S.getFormattedBigLikesToShortCase)(r):"",{onToggleLike:V}=(0,f.useMenuItemsHandlers)({videoId:e.id,ownerId:e.mainOwnerId,trackCode:e.trackCode}),L=(0,u.isVKUserAnonymous)(),j=(0,b.useMemo)((()=>!L&&e?.moderActions&&Object.entries(e.moderActions).some(A)),[L,e?.moderActions]),O=(0,w.useStore)(g.videoModalAlbumsService.$videoAdded);return(0,i.jsxs)(m.PostFooter,{children:[e.canLike&&(0,i.jsx)(m.PostFooter.Action,{...M(n),onClick:()=>{L&&t?v.UnauthActionBox.show(t):V()},"data-testid":"video_modal_like_button",children:E}),e.canShare&&(0,i.jsx)(m.PostFooter.Action,{mode:"secondary",icon:(0,i.jsx)(s.Icon24ShareOutline,{className:(0,l.getColorClass)("color_icon_secondary")}),onClick:()=>{(0,k.shareVideoExtended)(e.mainOwnerId,e.id),e.trackCode&&y.searchStatsCollector.logEvent({track_code:e.trackCode,type:x.EventItemType.VIDEO,action:x.SearchClickActionMap.SHARE_OUT})},foregroundColor:{light:c.default.colorTextSecondary.normal.value,dark:c.default.colorTextSecondary.normal.value},"data-testid":"video_modal_share_button",children:(0,h.getLang)("video_share")}),e.canAddToPlaylist&&(0,i.jsx)(_.PlaylistPopoverWrapper,{video:e,ownerId:window.vk.id,...I.fixVideoPlayerScrollPopover,children:(0,i.jsx)(m.PostFooter.Action,{mode:"secondary",icon:O?(0,i.jsx)(d.Icon24Done,{className:(0,l.getColorClass)("color_icon_secondary")}):(0,i.jsx)(a.Icon24Add,{className:(0,l.getColorClass)("color_icon_secondary")}),foregroundColor:{light:c.default.colorTextSecondary.normal.value,dark:c.default.colorTextSecondary.normal.value},"data-testid":"video_modal_add_to_my_playlist",children:O?(0,h.getLang)("video_card_added_button_label"):(0,h.getLang)("video_card_add_button_label")})}),!L&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.MoreActionsMenu,{videoId:e?.id,ownerId:e.mainOwnerId,ordInfo:e.ordInfo,duration:e.duration,statisticLink:o,isFromMessage:e.isFromMessage,isScheduled:e.isScheduled,trackCode:e.trackCode}),j&&(0,i.jsx)(C.ModerActionsMenu,{actions:e.moderActions,ownerId:e.mainOwnerId,videoId:e.id})]})]})}))},318817:(e,t,o)=>{o.d(t,{ModerActionsMenu:()=>_});var i=o(474848),n=o(507852),r=o(753457),s=o(246336),d=o(723723),a=o(377803),c=o(376155),l=o(293721),m=o(970466),h=o(406805),u=o(296540),v=o(553608),p=o(154265);const _=({actions:e,videoId:t,ownerId:o})=>{const _=(0,l.useEvent)(m.videoModalModerService.changeSoundRestriction),g=(0,l.useEvent)(m.videoModalModerService.changeEmbedRestriction),w=(0,l.useEvent)(m.videoModalModerService.changeAd),S=(0,l.useEvent)(m.videoModalModerService.changeAdCopy),k=(0,l.useEvent)(m.videoModalModerService.changeAccessByIP),b=(0,l.useEvent)(m.videoModalModerService.changeClaim),f=(0,l.useEvent)(m.videoModalModerService.changeLicense),I=(0,l.useEvent)(m.videoModalModerService.changePin),C=(0,l.useStore)(m.videoModalModerService.$isPinned),{restore:y,claim:x,options:E,copy:A,deduplication:M,clickhouse:V,moderLog:L,canMark:j,replace:O,license:T,original:F,ads:D,restrictions:R,canBlockGeo:P,mute:B,edit:H,forbidden:N,deleteWithReason:$}=e;return(0,u.useEffect)((()=>{B&&_(B.isRestricted),R&&g(R.isEmbedRestricted),D&&(w(D.hasNoAds),S(D.hasNoCopyAds)),O&&k(O.accessByIp),x&&b(x.isClaimed),T&&f(T.isClaimedUploaded),I(Boolean(v.vkLocalStorage.getItem("video_moder_actions_pinned")))}),[]),(0,i.jsx)(n.DropdownActionSheet,{maxHeight:600,shown:C||void 0,width:243,...h.fixVideoPlayerScrollPopover,content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.ForbiddenBlock,{ownerId:o,videoId:t,forbidden:N}),(0,i.jsx)(p.EditBlock,{ownerId:o,videoId:t,edit:H}),(N||H)&&(0,i.jsx)(n.DropdownActionSheet.Separator,{}),(0,i.jsx)(p.MuteBlock,{mute:B}),(0,i.jsx)(p.RestrictionBlock,{restrictions:R}),(0,i.jsx)(p.AdsBlock,{ads:D}),(D||R)&&(0,i.jsx)(n.DropdownActionSheet.Separator,{}),(0,i.jsx)(p.ReplaceBlock,{replace:O,ownerId:o,videoId:t}),j&&(0,i.jsx)(p.MarkBlock,{ownerId:o,videoId:t}),(0,i.jsx)(p.ModerLogBlock,{moderLog:L}),(j||L)&&(0,i.jsx)(n.DropdownActionSheet.Separator,{}),(0,i.jsx)(p.ClickhouseBlock,{clickhouse:V}),(0,i.jsx)(p.RestoreBlock,{restore:y}),(0,i.jsx)(p.ClaimBlock,{claim:x,hasLegalOwner:E?.hasLegalOwner}),(0,i.jsx)(p.CopyBlock,{copy:A}),(0,i.jsx)(p.DeduplicationBlock,{deduplication:M}),(0,i.jsx)(p.LicensedBlock,{license:T,hasLegalOwner:E?.hasLegalOwner}),(0,i.jsx)(p.OriginalBlock,{original:F,videoId:t,ownerId:o}),(0,i.jsx)(p.DeleteWithReason,{videoId:t,ownerId:o,deleteWithReason:$,claimId:x?.id}),P&&(0,i.jsx)(p.GeoBlock,{ownerId:o,videoId:t}),(y||x||M||T||F||P)&&(0,i.jsx)(n.DropdownActionSheet.Separator,{}),(0,i.jsx)(n.DropdownActionSheet.Item,{keepOpen:!0,after:(0,i.jsx)(r.Switch,{checked:C,onChange:e=>{C?v.vkLocalStorage.clear("video_moder_actions_pinned"):v.vkLocalStorage.setItem("video_moder_actions_pinned",1),I(e.target.checked)}}),children:C?"Unpin":"Pin"})]}),children:(0,i.jsx)(s.PostFooter.Action,{mode:"secondary",icon:(0,i.jsx)(c.Icon24GearOutline,{className:(0,d.getColorClass)("color_icon_secondary")}),foregroundColor:{light:a.default.colorTextSecondary.normal.value,dark:a.default.colorTextSecondary.normal.value}})})}},593342:(e,t,o)=>{o.d(t,{AdsBlock:()=>d});var i=o(474848),n=o(507852),r=o(293721),s=o(970466);const d=({ads:e})=>{const t=(0,r.useEvent)(s.videoModalModerService.changeAd),o=(0,r.useEvent)(s.videoModalModerService.changeAdCopy),d=(0,r.useStore)(s.videoModalModerService.$hasNoAd),a=(0,r.useStore)(s.videoModalModerService.$hasNoAdCopy);return e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"partner_ads_settings",e.adsSettingsHash),children:"Рекламные параметры"}),d?(0,i.jsx)(n.DropdownActionSheet.Item,{children:"Реклама убрана"}):(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"remove_ad",e.removeAdHash,{copies:0},(()=>t(!1))),children:"Убрать рекламу"}),e.canRemoveAdFromCopy&&(a?(0,i.jsx)(n.DropdownActionSheet.Item,{children:"Реклама убрана с копий"}):(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"remove_ad",e.removeAdHash,{copies:1},(()=>o(!0))),children:"Убрать рекламу с копий"}))]}):null}},393056:(e,t,o)=>{o.d(t,{ClaimBlock:()=>a});var i=o(474848),n=o(507852),r=o(270959),s=o(293721),d=o(970466);const a=({claim:e,hasLegalOwner:t})=>{const{$isClaimed:o,changeClaim:a}=(0,s.useUnit)(d.videoModalModerService);return e?(0,i.jsxs)(i.Fragment,{children:[o&&(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.claimed(e.id,"unclaim",e.statusVideo,null,(()=>a(!1))),children:"Вернуть"}),!o&&t&&(e.isPartner?(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>(0,r.showFastBox)("Ошибка","Изъять это видео нельзя, так как владелец видео является партнером."),children:"Изъять (нельзя)"}):(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.claimed(e.id,"claim",e.statusVideo,null,(()=>a(!0))),children:"Изъять"}))]}):null}},156728:(e,t,o)=>{o.d(t,{ClickhouseBlock:()=>r});var i=o(474848),n=o(507852);const r=({clickhouse:e})=>e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.DropdownActionSheet.Item,{href:e.logsUrl,target:"_blank",children:"Видео логи в clickhouse"}),e.flushPlaybackLinksHash&&(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"flush_playback_links_cache",e.flushPlaybackLinksHash),children:"Очистить кэш ссылок"}),e.refreshYoutubeDataHash&&(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"refresh_youtube_data",e.refreshYoutubeDataHash),children:"Обновить данные из YT"}),(0,i.jsx)(n.DropdownActionSheet.Separator,{})]}):null},947333:(e,t,o)=>{o.d(t,{CopyBlock:()=>r});var i=o(474848),n=o(507852);const r=({copy:e})=>e?(0,i.jsx)(n.DropdownActionSheet.Item,{href:e.sourceUrl,target:"_blank",children:"Оригинал (копия)"}):null},385417:(e,t,o)=>{o.d(t,{DeduplicationBlock:()=>r});var i=o(474848),n=o(507852);const r=({deduplication:e})=>e?(0,i.jsx)(n.DropdownActionSheet.Item,{href:e.url,target:"_blank",children:"Оригинал (дедупликация)"}):null},271662:(e,t,o)=>{o.d(t,{DeleteWithReason:()=>s});var i=o(474848),n=o(507852),r=o(32305);const s=({deleteWithReason:e,videoId:t,ownerId:o,claimId:s=0})=>e?(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>(0,r.handleDeleteVideoWithReason)({ownerId:o,videoId:t,claimId:s,deleteWithReason:e}),children:"Удалить с причиной"}):null},388152:(e,t,o)=>{o.d(t,{EditBlock:()=>r});var i=o(474848),n=o(507852);const r=({edit:e,videoId:t,ownerId:o})=>e?(0,i.jsxs)(i.Fragment,{children:[e.isGroupOwner&&(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"make_from_owner",e.groupOwnerHash),children:"Сделать от группы"}),e.isVideoInPlaylists&&(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"hide_from_owner_albums",e.hideFromOwnerHash),children:"Скрыть из альбомов автора"}),(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.Videoview.deleteVideo(t,o,e.deleteHash,!1,"videoviewer"),children:"Удалить"})]}):null},940625:(e,t,o)=>{o.d(t,{ForbiddenBlock:()=>d});var i=o(474848),n=o(32305),r=o(866467),s=o(507852);const d=({ownerId:e,videoId:t,forbidden:o})=>o?(0,i.jsx)(s.DropdownActionSheet.Item,{onClick:()=>(0,n.handleForbidVideo)(e,t,o.objectTypeId),children:(0,r.getLang)("video_add_to_forbidden_registry")}):null},418765:(e,t,o)=>{o.d(t,{GeoBlock:()=>d});var i=o(474848),n=o(32305),r=o(866467),s=o(507852);const d=({ownerId:e,videoId:t})=>(0,i.jsx)(s.DropdownActionSheet.Item,{onClick:()=>(0,n.handleGeoBlockContent)(e,t),children:(0,r.getLang)("reports_gb")})},694861:(e,t,o)=>{o.d(t,{LicensedBlock:()=>a});var i=o(474848),n=o(507852),r=o(866467),s=o(293721),d=o(970466);const a=({hasLegalOwner:e,license:t})=>{const{$isLicensed:o,changeLicense:a}=(0,s.useUnit)(d.videoModalModerService);return t?(0,i.jsxs)(i.Fragment,{children:[o&&(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.licensed(null,t.hash,(()=>a(!1))),children:(0,r.getLang)("video_add_to_public")}),!o&&e&&(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.licensed(null,t.hash,(()=>a(!0))),children:(0,r.getLang)("video_delete_from_public")})]}):null}},248025:(e,t,o)=>{o.d(t,{MarkBlock:()=>s});var i=o(474848),n=o(32305),r=o(507852);const s=({ownerId:e,videoId:t})=>(0,i.jsx)(r.DropdownActionSheet.Item,{onClick:()=>(0,n.handleBlurContent)(e,t),children:"Разметка категорий"})},439587:(e,t,o)=>{o.d(t,{ModerLogBlock:()=>r});var i=o(474848),n=o(507852);const r=({moderLog:e})=>e?(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"moder_log",e.hash),children:"Лог модерации"}):null},439305:(e,t,o)=>{o.d(t,{MuteBlock:()=>d});var i=o(474848),n=o(507852),r=o(293721),s=o(970466);const d=({mute:e})=>{const t=(0,r.useStore)(s.videoModalModerService.$isSoundRestricted),o=(0,r.useEvent)(s.videoModalModerService.changeSoundRestriction);return e?(0,i.jsxs)(i.Fragment,{children:[e.isMatched&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.DropdownActionSheet.Item,{href:e.matchedVideoUrl,target:"_blank",children:"Аудио матчинг"}),(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"add_audio_to_ignore",e.matchedHash),children:"Добавить аудио в игнор-лист"})]}),t?(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"restriction_audio",e.restrictedHash,null,(()=>o(!1))),children:"Разрешить у видео звук"}):(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"restriction_audio",e.restrictedHash,{enable:1},(()=>o(!0))),children:"Запретить у видео звук"}),(0,i.jsx)(n.DropdownActionSheet.Separator,{})]}):null}},780679:(e,t,o)=>{o.d(t,{OriginalBlock:()=>r});var i=o(474848),n=o(507852);const r=({original:e,videoId:t,ownerId:o})=>e?e.isShow?(0,i.jsx)(n.DropdownActionSheet.Item,{href:e.url,target:"_blank",children:"Показать оригинал"}):(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.restoreOriginal(o,t,e.hash),children:"Вернуть оригинал"}):null},307476:(e,t,o)=>{o.d(t,{ReplaceBlock:()=>d});var i=o(474848),n=o(507852),r=o(293721),s=o(970466);const d=({replace:e,videoId:t,ownerId:o})=>{const d=(0,r.useStore)(s.videoModalModerService.$hasAccessByIP),a=(0,r.useStore)(s.videoModalService.$isShortVideo),c=(0,r.useEvent)(s.videoModalModerService.changeAccessByIP);return e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.replaceLegal(o,t,e.replaceHash),children:"Заменить на другое видео"}),!a&&(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"request_video_status",e.migrateHash),children:"Мигрировать (обновить) видео"}),d?(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"restrict_access_by_ip",e.accessByIpHash,{enable:0},(()=>c(!1))),children:"Снять ограничения доступа по IP"}):(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"restrict_access_by_ip",e.accessByIpHash,{enable:1},(()=>c(!0))),children:"Доступ по IP для VKGROUP"}),(0,i.jsx)(n.DropdownActionSheet.Separator,{})]}):null}},339286:(e,t,o)=>{o.d(t,{RestoreBlock:()=>r});var i=o(474848),n=o(507852);const r=({restore:e})=>e?(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"restore_deleted",e.hash),children:"Восстановить"}):null},420778:(e,t,o)=>{o.d(t,{RestrictionBlock:()=>d});var i=o(474848),n=o(507852),r=o(293721),s=o(970466);const d=({restrictions:e})=>{const t=(0,r.useStore)(s.videoModalModerService.$isEmbedRestricted),o=(0,r.useEvent)(s.videoModalModerService.changeEmbedRestriction);return e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"region_mask",e.regionMaskHash),children:"Ограничение гео"}),t?(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"restrict_embed",e.restrictEmbedHash,{restrict:0},(()=>o(!1))),children:"Разрешить эмбед"}):(0,i.jsx)(n.DropdownActionSheet.Item,{onClick:()=>window.VideoModerActions.action(null,"restrict_embed",e.restrictEmbedHash,{restrict:1},(()=>o(!0))),children:"Запретить эмбед"})]}):null}},154265:(e,t,o)=>{o.d(t,{AdsBlock:()=>d.AdsBlock,ClaimBlock:()=>l.ClaimBlock,ClickhouseBlock:()=>c.ClickhouseBlock,CopyBlock:()=>p.CopyBlock,DeduplicationBlock:()=>_.DeduplicationBlock,DeleteWithReason:()=>S.DeleteWithReason,EditBlock:()=>i.EditBlock,ForbiddenBlock:()=>n.ForbiddenBlock,GeoBlock:()=>w.GeoBlock,LicensedBlock:()=>m.LicensedBlock,MarkBlock:()=>h.MarkBlock,ModerLogBlock:()=>u.ModerLogBlock,MuteBlock:()=>r.MuteBlock,OriginalBlock:()=>g.OriginalBlock,ReplaceBlock:()=>a.ReplaceBlock,RestoreBlock:()=>v.RestoreBlock,RestrictionBlock:()=>s.RestrictionBlock});var i=o(388152),n=o(940625),r=o(439305),s=o(420778),d=o(593342),a=o(307476),c=o(156728),l=o(393056),m=o(694861),h=o(248025),u=o(439587),v=o(339286),p=o(947333),_=o(385417),g=o(780679),w=o(418765),S=o(271662)},712188:(e,t,o)=>{o.d(t,{ModerActionsMenu:()=>i.ModerActionsMenu});var i=o(318817)},329281:(e,t,o)=>{o.d(t,{MoreActionsMenu:()=>f});var i=o(474848),n=o(296540),r=o(426222),s=o(225853),d=o(578392),a=o(507852),c=o(753457),l=o(246336),m=o(723723),h=o(377803),u=o(866467),v=o(947204),p=o(406805),_=o(541628),g=o(540462),w=o(314799),S=o(632731),k=o(984745),b=o(609152);const f=({ownerId:e,videoId:t,ordInfo:o,duration:f,statisticLink:I,isFromMessage:C,isScheduled:y,trackCode:x})=>{const E=(0,g.partConfigEnabled)("video_bookmarks_renaming_to_watch_later"),A=(0,w.useHelpHint)(S.AvailableHelpHints.ACCOUNT_HINT_VIDEO_WATCH_LATER_ACTION),{isWatchLaterTooltipViewed:M,handleWatchLaterTooltipClose:V}=(0,b.useWatchLaterTooltipViewed)(),L=(0,n.useCallback)((()=>E&&A&&!M?(0,i.jsx)(d.TextTooltip,{header:A.title,text:A.description,onClose:()=>{(0,k.ensureAccountHelpHintsService)().hideHelpHint({hintId:S.AvailableHelpHints.ACCOUNT_HINT_VIDEO_WATCH_LATER_ACTION,isOptimistic:!0}),V()},placement:"top-start",maxWidth:262,children:(0,i.jsx)(r.Icon20ClockOutline,{})}):(0,i.jsx)(r.Icon20ClockOutline,{})),[E,A,M]),{menuItems:j,onShownChanged:O}=(0,v.useMoreMenuActions)({statisticLink:I,ownerId:e,videoId:t,isFromMessage:C,watchLaterItem:L(),isScheduled:y,trackCode:x,duration:f});return(0,i.jsx)(a.DropdownActionSheet,{onShownChanged:O,trigger:"hover",...p.fixVideoPlayerScrollPopover,content:(0,i.jsxs)(c.OnboardingTooltipContainer,{children:[j?.map((({testId:e,...t},o)=>(0,i.jsx)(a.DropdownActionSheet.Item,{"data-testid":e,...t},o))),(0,i.jsx)(_.OrdTokenActionsMenu,{ordInfo:o})]}),children:(0,i.jsx)(l.PostFooter.Action,{mode:"secondary",icon:(0,i.jsx)(s.Icon28MoreHorizontal,{className:(0,m.getColorClass)("color_icon_secondary"),width:24,height:24}),foregroundColor:{light:h.default.colorTextSecondary.normal.value,dark:h.default.colorTextSecondary.normal.value},"data-testid":"video_modal_more_button",children:(0,u.getLang)("video_more_button_in_video_modal")})})}},541628:(e,t,o)=>{o.d(t,{OrdTokenActionsMenu:()=>c});var i=o(474848),n=o(343339),r=o(485749),s=o(507852),d=o(866467),a=o(939477);const c=({ordInfo:e})=>e?.ordUrl&&0!==e.ordUrl.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.DropdownActionSheet.Item,{target:"_blank",href:e.ordUrl,before:(0,i.jsx)(n.Icon20InfoCircleOutline,{}),children:(0,d.getLang)("video_clip_ord_advertiser_info")}),(0,i.jsx)(s.DropdownActionSheet.Item,{onClick:()=>(0,a.handleCopyToClipboardErId)(e.erId),before:(0,i.jsx)(r.Icon20CopyOutline,{}),children:`ERID: ${e.erId}`})]}):null},802984:(e,t,o)=>{o.d(t,{MoreActionsMenu:()=>i.MoreActionsMenu});var i=o(329281)},924268:(e,t,o)=>{o.d(t,{Actions:()=>i.Actions});var i=o(991625)},106489:(e,t,o)=>{o.d(t,{Owner:()=>y});var i=o(474848),n=o(296540),r=o(866467),s=o(303913),d=o(540462),a=o(293721),c=o(970466),l=o(412888),m=o(285056),h=o(279734),u=o(194528),v=o(454154),p=o(260546),_=o(751268),g=o(8520),w=o(947204),S=o(541521),k=o(79464),b=o(443660),f=o(468073),I=o(314309),C=o(317216);const y=({owner:e,secondaryOwner:t,videoId:o,featuredArtists:y,otherArtists:x,mainOwnerId:E,statisticLink:A,trackCode:M})=>{const V=(0,d.partConfigEnabled)("video_menu_hide_author"),L=(0,a.useStore)(c.videoModalService.$canViewStatistic),j=t||e,{onSubscribeVideoAuthor:O,onViewVideoStatisticClick:T,onHideAuthorClick:F}=(0,w.useMenuItemsHandlers)({videoId:o,ownerId:E,ownerName:j.name,trackCode:M}),D=(0,a.useStore)(c.videoModalSubscribeService.$canSubscribe),R=(0,a.useStore)(c.videoModalSubscribeService.$isSubscribe),P=(0,a.useStore)(c.videoModalSubscribeService.$isSubscriptionHidden),B=(0,d.partConfigEnabled)("video_modal_statistic_button")&&f.Ranges.isGroupId(e.id)||(0,d.partConfigEnabled)("video_modal_statistic_button_user")&&f.Ranges.isUserId(e.id),H=B&&L||D,N=()=>{M&&I.searchStatsCollector.logEvent({track_code:M,type:C.EventItemType.VIDEO,action:C.SearchClickActionMap.OPEN_OWNER_OUT}),window.Videoview.preventHiddingOnBackLocation()},$=()=>{if(B&&L){const e={mode:"primary",children:(0,r.getLang)("video_statistics"),"data-testid":"video_modal_statistic_lk"};return A?(e.href=A,e.target="_blank"):e.onClick=T,e}return D?R?{mode:"secondary",before:(0,i.jsx)(s.Icon24Done,{}),onClick:O,children:(0,r.getLang)("video_view_subscribed_msg")}:{mode:"primary",onClick:O,children:(0,r.getLang)("video_view_subscribe_to_author")}:{}},U=(0,i.jsxs)(l.TextClamp,{TypographyComponent:m.Headline,weight:"3",lines:1,children:[(0,i.jsx)(h.Link,{href:j.href||void 0,className:(0,g.classNames)(!y.length&&b.default.ownerName),Component:j.href?"a":void 0,onClick:N,children:(0,g.decodeHTMLEntities)(j.name)}),x.map((({id:e,name:t,href:o})=>(0,i.jsxs)(n.Fragment,{children:[", ",(0,i.jsx)(h.Link,{href:o,onClick:N,children:t})]},e))),y.length>0&&(0,r.getLang)("video_feature_relation_text"),y.map((({id:e,name:t,href:o},r)=>(0,i.jsxs)(n.Fragment,{children:[!!r&&", ",(0,i.jsx)(h.Link,{href:o,className:b.default.featured,onClick:N,children:t})]},e)))]});return(0,i.jsx)(p.SimpleCell,{hasActive:!1,hasHover:!1,before:(0,i.jsx)(_.RichAvatar,{size:48,src:j.photo_50,href:j.href||void 0,target:"_blank",nft:j.is_nft,onClick:N}),after:H&&(!V||B&&L||!R?(0,i.jsx)(v.Button,{className:b.default.subscriptionButton,"data-testid":D?"video_modal_subscribe_button":"",size:"m",...$()},"videoModalOwnerButton"):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Spacing,{mode:"vertical",size:12}),(0,i.jsx)(k.SubscribeActions,{isSubscriptionHidden:P,onHideAuthorClick:F,onSubscribeVideoAuthor:O},"videoModalOwnerActions")]})),subtitle:j.formattedSubscribersText,children:j.verified||j.ownerVerifiedByServices?(0,i.jsx)(S.VerifiedBadgeWidget,{ownerId:j.id,verificationType:j.ownerVerifiedByServices?"esia":"default",children:U}):U})}},922100:(e,t,o)=>{o.d(t,{Owner:()=>i.Owner});var i=o(106489)},771713:(e,t,o)=>{o.d(t,{VideoModalInfoActions:()=>d});var i=o(474848),n=o(924268),r=o(922100),s=o(372199);const d=({video:e,unauthLikesBox:t,statisticLink:o})=>(0,i.jsxs)("div",{className:s.default.container,children:[(0,i.jsx)(r.Owner,{owner:e.owner,secondaryOwner:e.secondaryOwner,featuredArtists:e.featuredArtists,otherArtists:e.otherArtists,mainOwnerId:e.mainOwnerId,statisticLink:o,videoId:e.id,trackCode:e.trackCode}),(0,i.jsx)(n.Actions,{video:e,unauthLikesBox:t,statisticLink:o})]})},635108:(e,t,o)=>{o.d(t,{VideoModalInfoActions:()=>i.VideoModalInfoActions});var i=o(771713)},234669:(e,t,o)=>{o.d(t,{VideoModalInfoDescription:()=>v});var i=o(474848),n=o(303800),r=o(194528),s=o(211114),d=o(753457),a=o(412888),c=o(279734),l=o(296540),m=o(866467),h=o(364330),u=o(580859);const v=({video:e,description:t})=>{const o=(0,l.useRef)(null),{onMoreButtonClick:v,onDescriptionClick:p,descriptionWrapper:_,isOverflowed:g,isExpanded:w}=(0,h.useDescriptionExpanded)({video:e,description:t,wrapperClassName:u.default.textWrapper,descRef:o}),S=g&&!w;return(0,i.jsxs)(n.Div,{mode:"horizontal",spacing:0,children:[(0,i.jsx)(r.Spacing,{size:12}),(0,i.jsx)(s.Card,{mode:"tint",children:(0,i.jsx)(d.Tappable,{onClick:p,hasActive:S,hasHover:S,children:(0,i.jsxs)(n.Div,{children:[(0,i.jsx)(a.TextClamp,{TypographyComponent:d.Footnote,weight:"3",lines:w?0:3,getRootRef:o,children:_}),g&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Spacing,{size:8}),(0,i.jsx)(c.Link,{onClick:v,"data-testid":"video_modal_show_description_button",children:w?(0,m.getLang)("video_collapse_extended_description"):(0,m.getLang)("video_show_full_video_description")})]})]})})})]})}},616664:(e,t,o)=>{o.d(t,{VideoModalInfoDescriptionWrapper:()=>r});var i=o(474848),n=o(234669);const r=({video:e,description:t})=>t?(0,i.jsx)(n.VideoModalInfoDescription,{video:e,description:t}):null},364330:(e,t,o)=>{o.d(t,{useDescriptionExpanded:()=>i.useDescriptionExpanded});var i=o(244806)},244806:(e,t,o)=>{o.d(t,{useDescriptionExpanded:()=>c});var i=o(474848),n=o(296540),r=o(8520),s=o(373080),d=o(898848),a=o(839930);const c=({video:e,description:t,wrapperClassName:o,descRef:c})=>{const[l,m]=(0,n.useState)(!1),[h,u]=(0,n.useState)(!0),v={...e,owner_id:e.owner.id},p=(0,a.getTextWithTimeTags)(v,(0,d.clean)(t)),_=(0,n.useMemo)((()=>(0,i.jsx)(s.InnerHTML,{className:o,children:(0,r.decodeHTMLEntities)(p)})),[p]);return(0,n.useEffect)((()=>{if(c.current){const{scrollWidth:e,scrollHeight:t,offsetWidth:o,offsetHeight:i}=c.current;u(e>o||t>i)}}),[p]),{onMoreButtonClick:e=>{e.stopPropagation(),m((e=>!e))},onDescriptionClick:()=>{h&&!l&&m(!0)},descriptionWrapper:_,isOverflowed:h,isExpanded:l}}},839930:(e,t,o)=>{o.d(t,{getTextWithTimeTags:()=>r});var i=o(461641);const n=(e,t,o)=>`<a href="${o}" onclick="Videoview.timeTagClick(${t}, 'description', event);">${e}</a>`,r=(e,t)=>(0,i.replaceTimeTags)({video:e,getDescriptionTimeTagWrap:n,text:t})},372177:(e,t,o)=>{o.d(t,{VideoModalInfoDescriptionWrapper:()=>i.VideoModalInfoDescriptionWrapper});var i=o(616664)},803169:(e,t,o)=>{o.d(t,{VideoModalInfoHeaderAside:()=>a});var i=o(474848),n=o(303800),r=o(815138),s=o(408609),d=o(19199);const a=({moderationVideoInfo:e,withUMA:t,ownerId:o,videoId:a})=>{const c=[];return t&&c.push((0,i.jsx)(n.Div,{mode:"horizontal",spacing:4,children:(0,i.jsx)(d.VideoModalInfoHeaderUMA,{videoId:a,ownerId:o})},"VideoModalInfoHeaderUMA")),e&&c.push((0,i.jsx)(s.VideoModalModerationInfo,{moderationVideoInfo:e},"VideoModalModerationInfo")),(0,i.jsx)(r.Join,{separator:(0,i.jsx)(i.Fragment,{}),children:c})}},19199:(e,t,o)=>{o.d(t,{VideoModalInfoHeaderUMA:()=>d});var i=o(474848),n=o(753457),r=o(723723),s=o(32305);const d=({videoId:e,ownerId:t})=>(0,i.jsx)(n.Tappable,{className:(0,r.getColorClass)("color_icon_medium"),onClick:()=>{(0,s.handleShowUMA)(t,e)},title:"UMA",children:"/UMA/"})},408609:(e,t,o)=>{o.d(t,{VideoModalModerationInfo:()=>v});var i=o(474848),n=o(629775),r=o(485749),s=o(580539),d=o(578392),a=o(303800),c=o(373080),l=o(454154),m=o(8520),h=o(432465),u=o(866467);const v=({moderationVideoInfo:e})=>{const[t]=e;return(0,i.jsx)(d.TextTooltip,{enableInteractive:!0,placement:"left",text:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Div,{mode:"vertical",children:(0,i.jsx)(c.InnerHTML,{children:t.join("<br />")})}),(0,i.jsx)(l.Button,{before:(0,i.jsx)(r.Icon20CopyOutline,{}),onClick:()=>{(0,m.copyTextToClipboard)(t.join("\r\n")),(0,h.showSnackbar)({text:(0,u.getLang)("video_moderation_snackbar_copied"),before:{content:(0,i.jsx)(n.Icon20CheckAlt,{})}})},children:(0,u.getLang)("video_moderation_info_copy")})]}),children:(0,i.jsx)(s.Icon24InfoCircleOutline,{})})}},527072:(e,t,o)=>{o.d(t,{VideoModalInfoHeaderAside:()=>i.VideoModalInfoHeaderAside});var i=o(803169);o(408609)},669013:(e,t,o)=>{o.d(t,{VideoModalInfoTitle:()=>k});var i=o(474848),n=o(296540),r=o(15181),s=o(999284),d=o(8520),a=o(815138),c=o(578392),l=o(279734),m=o(303800),h=o(557992),u=o(412888),v=o(753457),p=o(723723),_=o(724244),g=o(866467),w=o(356387),S=o(541521);const k=({title:e,subTitle:t,isExplicit:o,views:k,date:b,formattedViewsText:f,releaseDate:I,genre:C,formattedDateText:y,trendsPosition:x,trendsLink:E,isArchivalContent:A,archivalPublishDate:M,secondaryOwner:V,owner:L,ordInfo:j,isFromMessage:O,isScheduled:T,publishDate:F})=>{const D=(0,n.useRef)(null),R=t?.length?(0,i.jsxs)(a.Join,{separator:" ",children:[(0,d.decodeHTMLEntities)(e),(0,i.jsxs)("span",{className:w.default.subTitle,children:[(0,d.decodeHTMLEntities)(t),o&&(0,i.jsx)(c.TextTooltip,{placement:"top",text:(0,g.getLang)("video_modal_explicit_tooltip"),appearance:"inversion",children:(0,i.jsx)(r.Icon24Explicit,{className:w.default.explicitTitle})})]})]}):(0,d.decodeHTMLEntities)(e),P=(0,i.jsxs)(l.Link,{href:L.href||void 0,Component:L.href?"a":"span",children:[(0,g.getLang)("global_by"),(0,d.decodeHTMLEntities)(L.ownerFullNameGenitive)]});return(0,i.jsxs)(m.Div,{mode:"vertical",getRootRef:D,children:[(0,i.jsx)(h.Header,{size:"large",multiline:!0,children:(0,i.jsx)(u.TextClamp,{lines:2,"data-testid":"video_modal_title",children:R})}),T&&(0,i.jsx)(m.Div,{mode:"horizontal",spacing:0,paddingTop:4,children:(0,i.jsxs)(v.Subhead,{className:(0,p.getColorClass)("color_text_subhead"),children:[(0,g.getLang)("video_postponed_publication"),": ",F]})}),!O&&!T&&(0,i.jsx)(m.Div,{mode:"horizontal",spacing:0,paddingTop:4,children:(0,i.jsxs)("div",{className:w.default.container,children:[(0,i.jsx)(c.TextTooltip,{placement:"top",text:(0,i.jsxs)(i.Fragment,{children:[k,(0,i.jsx)(_.InterpunctSeparator,{}),I||b]}),appearance:"inversion",children:(0,i.jsx)("div",{"data-testid":"video_modal_additional_info",children:(0,i.jsxs)(v.Subhead,{className:w.default.info,children:[f,(0,i.jsx)(_.InterpunctSeparator,{}),I||y,C&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.InterpunctSeparator,{}),(0,d.decodeHTMLEntities)(C)]})]})})}),V&&L&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.InterpunctSeparator,{}),L.verified||L.ownerVerifiedByServices?(0,i.jsx)(S.VerifiedBadgeWidget,{ownerId:L.id,verificationType:L.verified?"default":"esia",children:P}):P]}),A&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.InterpunctSeparator,{}),(0,i.jsx)(c.TextTooltip,{placement:"top",textAlign:"center",maxWidth:240,text:M?`${(0,g.getLang)("video_modal_archival_content_date")} ${M}`:(0,g.getLang)("video_layer_archival_content_hint"),appearance:"inversion",children:(0,i.jsxs)("div",{className:w.default.wrapper,children:[(0,i.jsx)(s.Icon16ArchiveOutline,{className:w.default.icon}),(0,i.jsx)(v.Subhead,{className:w.default.archive,children:(0,g.getLang)("video_layer_archival_content")})]})})]}),x>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.InterpunctSeparator,{}),(0,i.jsx)(l.Link,{href:E,onClick:()=>{E===window.location.pathname&&window.Videoview.hide()},children:(0,i.jsx)(v.Subhead,{children:(0,g.getLang)("video_N_position_in_trends_tab",x)})})]}),j?.hasOrdLabel&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(_.InterpunctSeparator,{}),(0,i.jsx)(c.TextTooltip,{maxWidth:175,placement:"top",text:(0,g.getLang)("video_layer_ord_hint"),appearance:"inversion",children:(0,i.jsx)("div",{children:(0,i.jsx)(v.Subhead,{children:(0,g.getLang)("video_ord_title")})})})]})]})})]})}},657093:(e,t,o)=>{o.d(t,{VideoModalInfoTitle:()=>i.VideoModalInfoTitle});var i=o(669013)},401276:(e,t,o)=>{o.d(t,{VideoModalInfo:()=>i.VideoModalInfo,initVideoModalInfo:()=>n.initVideoModalInfo});var i=o(240234),n=o(685496)},685496:(e,t,o)=>{o.d(t,{initVideoModalInfo:()=>a});var i=o(474848),n=o(319756),r=o(205338),s=o(342018),d=o(240234);const a=(e,t)=>{if(!e)return null;const o=(0,r.createRoot)(e);o.render((0,i.jsx)(n.DIRootWebProvider,{children:(0,i.jsx)(d.VideoModalInfo,{...t})}));const a=()=>{o.unmount()};return(0,s.pushNavDestroy)(a),a}},471496:(e,t,o)=>{o.d(t,{CommentItemWrapper:()=>d});var i=o(474848),n=o(456921),r=o(934562),s=o(710113);const d=(0,n.observer)((({id:e})=>{const t=(0,r.useCommentsViewModel)(),o=t.getComment(e);return o?(0,i.jsx)(s.CommentItem,{comment:o,videoOwnerId:t.videoOwnerId,isHighlightedTemporarily:t.lastAddedItemId===e}):null}))},178805:(e,t,o)=>{o.d(t,{CommentItemWrapper:()=>i.CommentItemWrapper});var i=o(471496)},495387:(e,t,o)=>{o.d(t,{Comments:()=>d,CommentsWidget:()=>a});var i=o(474848),n=o(132028),r=o(934562),s=o(214253);const d=()=>(0,i.jsx)(s.VideoComments,{}),a=(0,n.createWidget)(r.CommentsViewModelProvider,d)},267594:(e,t,o)=>{o.d(t,{CommentsList:()=>c});var i=o(474848),n=o(456921),r=o(187460),s=o(564508),d=o(934562),a=o(178805);const c=(0,n.observer)((function(){const e=(0,d.useCommentsViewModel)();return e.ids.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.CommentLayout,{children:e.ids.map((e=>(0,i.jsx)(a.CommentItemWrapper,{id:e},e)))}),!e.isCommentsLoadedFully&&(0,i.jsx)(s.DynamicPagination,{isLoading:e.isCommentsLoading,fetchData:e.fetchMore,nextFrom:e.ids.length})]}):null}))},520290:(e,t,o)=>{o.d(t,{CommentsList:()=>i.CommentsList});var i=o(267594)},646358:(e,t,o)=>{o.d(t,{CommentActionMenu:()=>_});var i=o(474848),n=o(456921),r=o(808369),s=o(850767),d=o(48269),a=o(39856),c=o(79479),l=o(8520),m=o(149333),h=o(507852),u=o(271036),v=o(406805),p=o(597459);const _=(0,n.observer)((function({userRole:e}){const t=(0,p.useCommentItemModel)(),o=(0,m.useLangs)(),n="owner"===e;return(0,i.jsx)(h.DropdownActionSheet,{trigger:"hover",content:(0,i.jsxs)(i.Fragment,{children:[t.commentEdit.canEdit&&(0,i.jsx)(h.DropdownActionSheet.Item,{before:(0,i.jsx)(r.Icon24PenOutline,{}),onClick:t.commentEdit.setIsEditing,children:o.getLang("video_comment_edit")}),t.commentDelete.canDelete&&(0,i.jsx)(h.DropdownActionSheet.Item,{before:(0,i.jsx)(s.Icon24DeleteOutline,{}),onClick:t.commentDelete.delete,children:o.getLang("video_comment_delete")}),t.commentDelete.canDelete&&(0,i.jsx)(h.DropdownActionSheet.Item,{before:(0,i.jsx)(s.Icon24DeleteOutline,{}),onClick:t.commentDelete.deleteWithReason,children:o.getLang("video_comments_action_delete_with_reason")}),(0,i.jsx)(h.DropdownActionSheet.Item,{before:(0,i.jsx)(d.Icon24ShareOutline,{}),children:o.getLang("video_comment_share")}),!n&&(0,i.jsx)(h.DropdownActionSheet.Item,{before:(0,i.jsx)(a.Icon24ReportOutline,{}),onClick:t.reportComment,children:o.getLang("video_comment_complain")})]}),...v.fixVideoPlayerScrollPopover,children:(0,i.jsx)(u.IconButton,{"aria-label":o.getLang("video_context_menu_aria_label"),hoverMode:"opacity",activeMode:"opacity",noPadding:!0,onMouseEnter:l.noop,onMouseOut:l.noop,children:(0,i.jsx)(c.Icon16MoreHorizontal,{})})})}))},858074:(e,t,o)=>{o.d(t,{CommentActionMenu:()=>i.CommentActionMenu});var i=o(646358)},636554:(e,t,o)=>{o.d(t,{CommentsSorting:()=>p});var i=o(474848),n=o(629775),r=o(106962),s=o(296540),d=o(753457),a=o(815138),c=o(724244),l=o(507852),m=o(279734),h=o(149333),u=o(8520),v=o(567537);const p=({commentsCounter:e,activeSortingType:t,onChange:o})=>{const p=(0,h.useLangs)(),_=(0,s.useMemo)((()=>v.SORTING_TYPES.find((({id:e})=>e===t))?.label()||""),[t]);return(0,i.jsx)(d.Caption,{level:"1",weight:"3",children:(0,i.jsxs)(a.Join,{separator:(0,i.jsx)(c.InterpunctSeparator,{}),children:[p.numeric(e,p.getLang("video_comments_summary",!0)),(0,i.jsx)(l.DropdownActionSheet,{trigger:"click",content:v.SORTING_TYPES.map((({id:e,label:r})=>(0,i.jsx)(l.DropdownActionSheet.Item,{after:e===t?(0,i.jsx)(n.Icon20CheckAlt,{}):null,onClick:()=>o(e),children:r()},e))),children:(0,i.jsxs)(m.Link,{noUnderline:!0,onClick:u.noop,children:[_,(0,i.jsx)(r.Icon12Dropdown,{})]})})]})})}},476752:(e,t,o)=>{o.d(t,{CommentsSorting:()=>i.CommentsSorting});var i=o(636554)},989788:(e,t,o)=>{o.d(t,{VideoComments:()=>h});var i=o(474848),n=o(456921),r=o(296540),s=o(303800),d=o(476752),a=o(567537),c=o(934562),l=o(520290),m=o(710113);const h=(0,n.observer)((function(){const e=(0,c.useCommentsViewModel)(),[t,o]=(0,r.useState)(a.SORTING_TYPES[0].id);return e.isLoading?(0,i.jsx)("div",{children:"Скелетоны"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Div,{paddingBottom:8,children:(0,i.jsx)(d.CommentsSorting,{commentsCounter:a.VIDEO_COMMENTS_MOCK.commentsCounter,activeSortingType:t,onChange:o})}),!e.isAnonymousUser&&(0,i.jsx)(m.CommentInput,{onCreateComment:e.addComment,videoOwnerId:e.videoOwnerId,videoId:e.videoId}),(0,i.jsx)(l.CommentsList,{})]})}))},214253:(e,t,o)=>{o.d(t,{VideoComments:()=>i.VideoComments});var i=o(989788)},567537:(e,t,o)=>{o.d(t,{SORTING_TYPES:()=>n,VIDEO_COMMENTS_MOCK:()=>r});var i=o(866467);const n=[{id:"interesting",label:()=>(0,i.getLang)("me_comments_order_interesting")},{id:"old",label:()=>(0,i.getLang)("me_comments_order_old")},{id:"new",label:()=>(0,i.getLang)("me_comments_order_new")}],r={firstComment:{id:1,from_id:426179910,date:1668080005,text:'Просто комментарий с некоторым количеством лайков. У автора бейдж на аватаре. В ответах есть ответ от автора. Набор пунктов меню в "ещё" как в своём комментарии (owner)',likes:{can_like:1,count:12,user_likes:0}},secondComment:{id:1,from_id:426179910,date:1668080005,text:'Комментарий который лайкнул пользователь. Комментарий выбран (проп isSelected = true). Набор пунктов меню в "ещё" как для админа в чужом комментарии (admin)',likes:{can_like:1,count:3,user_likes:1}},firstReply:{id:1,from_id:426179910,date:1668080005,text:"Ответ к комментарию. Набор пунктов меню в ещё как для чужого комментария (reader)",likes:{can_like:1,count:0,user_likes:0}},attachmentsMock:[{type:"photo",photo:{id:457243242,sizes:[{height:1080,type:"z",width:721,url:"https://sun9-38.userapi.com/c240331/u161728042/d49/-3/x_79c41cbd73.jpg"}],text:"",photo_id:"161728042_457243242"}},{type:"doc",doc:{id:650621733,title:"Структура работы и требования к оформлению.docx",size:23238,ext:"docx",date:1667908713,url:""}}],commentOwner:{kind:"user",id:4343325452235,first_name:"Иван",first_name_dat:"Ивану",last_name:"Иванов",href:"https://vk.com/blablabla2423",photo_100:"https://sun9-29.userapi.com/QKvtU1KHcIAp0rdWET20HofmhQOH92_cjrb27Q/9oox86E1F_w.jpg"},commentOwnerWithLongName:{kind:"user",id:426179910,first_name:"Александр Владимирович",first_name_dat:"Александру Владимировичу",last_name:"Безграничноудлиненковский",href:"https://vk.com/egormorozovv",photo_100:"https://sun9-29.userapi.com/QKvtU1KHcIAp0rdWET20HofmhQOH92_cjrb27Q/9oox86E1F_w.jpg"},commentsCounter:78,fileSize:2434534,commentWithAttachmentId:123,dateTime:1717155633730,progress:75,firstAvatarUrl:"https://sun9-60.userapi.com/c855032/v855032963/15d4f9/XOQY9NSlP5A.jpg?ava=1",secondAvatarUrl:"https://sun9-44.userapi.com/c858128/v858128761/67fe1/nAnraWnpHK8.jpg?ava=1",attachedFileName:"Структура работы и требования к оформлению.docx",commentId:242,repliesNumber:120,fewRepliesNumber:8,loadMoreRepliesNumber:110}},816939:(e,t,o)=>{o.d(t,{Comments:()=>i.Comments,CommentsWidget:()=>i.CommentsWidget,initComments:()=>n.initComments,unmountComments:()=>n.unmountComments});var i=o(495387),n=o(96389)},96389:(e,t,o)=>{o.d(t,{initComments:()=>l,unmountComments:()=>c});var i=o(474848),n=o(440961),r=o(342018),s=o(495387),d=o(319756),a=o(865708);const c=e=>{e&&n.unmountComponentAtNode(e)},l=(e,t)=>{e&&(n.render((0,i.jsx)(d.DIRootWebProvider,{children:(0,i.jsx)(a.AppRootProvider,{children:(0,i.jsx)(s.CommentsWidget,{...t})})}),e),(0,r.pushNavDestroy)((()=>{c(e)})))}},71510:(e,t,o)=>{o.d(t,{CommentsViewModel:()=>c});var i=o(331635),n=o(327813),r=o(132028),s=o(951652),d=o(903653),a=o(607417);class c{async[r.init](){this._isLoading=!0;try{await this.commentsList.fetch({videoId:this.videoId,ownerId:this.videoOwnerId,count:this._chunkSize,fields:c.getExtendedFields()})}catch(e){(0,n.runInAction)((()=>{this.error=e}))}finally{(0,n.runInAction)((()=>{this._isLoading=!1}))}}get ids(){return this.commentsList.ids}get lastAddedItemId(){return this._lastAddedItemId}get videoOwnerId(){return this.props.current.ownerId}get videoId(){return this.props.current.videoId}get isAnonymousUser(){return 0===this.authService.userId}get isLoading(){return this._isLoading}get isCommentsLoading(){return this.commentsList.isLoading}get isCommentsLoadedFully(){return this.commentsList.isLoadedFully}getComment(e){return this.commentsProvider.getComment(e)}static getExtendedFields(){return["photo_100"]}constructor(e,t,o,i){this.props=e,this.commentsListProvider=t,this.commentsProvider=o,this.authService=i,this.error=null,this.addComment=e=>{this.authService.userId&&(this.commentsList.addComment(e),this._lastAddedItemId=e)},this.fetchMore=async()=>{this.error=null;try{return this.commentsList.fetchMore()}catch(e){(0,n.runInAction)((()=>{this.error=e}))}},this._chunkSize=20,this._isLoading=!1,this._lastAddedItemId=null,this.commentsList=this.commentsListProvider.createList(),(0,n.makeAutoObservable)(this)}}c=(0,i.__decorate)([r.scope.transient(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===r.Props?Object:r.Props,void 0===d.VideoCommentsListProvider?Object:d.VideoCommentsListProvider,void 0===a.VideoCommentsProvider?Object:a.VideoCommentsProvider,void 0===s.AuthService?Object:s.AuthService])],c)},934562:(e,t,o)=>{o.d(t,{CommentsViewModelProvider:()=>r,useCommentsViewModel:()=>s});var i=o(132028),n=o(71510);const{Provider:r,useModel:s}=(0,i.createProvider)(n.CommentsViewModel)},492931:(e,t,o)=>{o.d(t,{mapUserOrGroupToCommentOwner:()=>s});var i=o(468073),n=o(222062),r=o(172479);const s=e=>{if(e)return{kind:i.Ranges.isGroupId(e.id)?"group":"user",is_nft:(0,n.checkOwnerIsNFT)(e),href:(0,r.getOwnerUrl)(e,"/video/@"),...e}}},809334:(e,t,o)=>{o.d(t,{CommentInput:()=>f});var i=o(474848),n=o(296540),r=o(456921),s=o(132028),d=o(8520),a=o(394062),c=o(461571),l=o(666112),m=o(550304),h=o(578392),u=o(753457),v=o(48158),p=o(149333),_=o(567537),g=o(317835),w=o(856289),S=o(884516),k=o(433499);const b=(0,r.observer)((function(){const e=(0,S.useCommentInputModel)(),t=(0,p.useLangs)(),o=(0,n.useRef)(null),r=async()=>{if(e.isSendingNotAllowed)return;await e.createComment()&&o.current&&(o.current.innerHTML="")},{handleInput:s}=(0,k.useEmoji)({inputValue:e.content,inputRef:o,onChangeInput:e.handleChange,emojiOpts:{onSend:r,onUGCStickerSend:d.noop,emojiLoadMore:d.noop,ref:"video_comment",global:!1,pickerBottomMargin:12,onStickerSend:d.noop}});return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(m.CommentInput,{getRef:o,before:(0,i.jsx)(m.CommentInput.Avatar,{href:"#",src:e?.user?.data?.photo_100}),inlineAfter:[(0,i.jsx)(m.CommentInput.IconButton,{children:(0,i.jsx)(a.Icon20Attach,{})},"attach"),(0,i.jsx)(h.TextTooltip,{text:t.getLang("video_comment_photo_attach_tooltip"),children:(0,i.jsx)(m.CommentInput.IconButton,{children:(0,i.jsx)(c.Icon20CameraOutline,{})})},"camera"),(0,i.jsx)(m.CommentInput.IconButton,{children:(0,i.jsx)(l.Icon20SmileOutline,{})},"smile")],bottom:(0,i.jsxs)(i.Fragment,{children:[e.contentLengthNotification&&(0,i.jsx)(u.Text,{children:e.contentLengthNotification}),(0,i.jsx)(v.CommentAttachments,{commentId:_.VIDEO_COMMENTS_MOCK.commentId,gap:"xl",formatSize:g.formatFileSize,formatDateTime:w.getFormattedUpdatedTime,deleteAriaLabel:t.getLang("me_attachment_dont_attach"),onDeletePhotoClick:d.noop,onDeleteDocClick:d.noop,onDeleteVideoClick:d.noop,attachments:_.VIDEO_COMMENTS_MOCK.attachmentsMock})]}),uploadingAttachments:(0,i.jsx)(m.CommentInput.UploadingAttachmentProgress,{index:1,name:_.VIDEO_COMMENTS_MOCK.attachedFileName,progress:_.VIDEO_COMMENTS_MOCK.progress}),placeholder:t.getLang("video_comment_input_placeholder"),sendDisabled:e.isSendingNotAllowed,onInput:s,onSendClick:r})})})),f=(0,s.createWidget)(S.CommentInputProvider,b)},171445:(e,t,o)=>{o.d(t,{CommentInput:()=>i.CommentInput});var i=o(809334)},259304:(e,t,o)=>{o.d(t,{CommentInputModel:()=>_});var i=o(331635),n=o(327813),r=o(8520),s=o(132028),d=o(951652),a=o(712600),c=o(670252),l=o(343825),m=o(349773),h=o(639147),u=o(881390),v=o(856289);const p=["photo_100"];class _{[s.init](e){this._videoOwnerId=e.videoOwnerId,this._videoId=e.videoId,this._onCreateComment=e.onCreateComment,this.authService.userId&&this.usersFetchProvider.fetch({fields:p,userIds:[this.authService.userId]})}get user(){if(this.authService.userId)return this.videoUsersStore?.getById(this.authService.userId)}get contentLengthNotification(){return(0,u.getValidateLengthMessage)({value:this._content.trim(),maxLength:this.MAX_COMMENT_LENGTH,getExceededLengthLabel:e=>this.langs.numeric(e,this.langs.getLang("video_comment_recommended_exceeded",!0)),getRemainingLengthLabel:e=>this.langs.numeric(e,this.langs.getLang("video_comment_recommended_remained",!0))})}get isPending(){return this._isPending}get isSendingNotAllowed(){return this._isPending||0===this._content.trim().length||this._content.trim().length>this.MAX_COMMENT_LENGTH}get content(){return this._content}static getExtendedFields(){return["photo_100"]}constructor(e,t,o,i,s,d){this.authService=e,this.videoCommentCreationService=t,this.usersStoreFactory=o,this.usersFetchProvider=i,this.langs=s,this.snackbar=d,this.handleChange=e=>{this._content=e},this.createComment=async()=>{this._isPending=!0;try{const e=await this.videoCommentCreationService.createComment({videoId:this._videoId,ownerId:this._videoOwnerId,message:this.content.trim(),fields:_.getExtendedFields()});return e&&(this._content="",this._onCreateComment(e,this.content)),!0}catch(e){console.error(e),(0,n.runInAction)((()=>{this.snackbar.show({type:"error",text:this.langs.getLang("video_comment_publishing_fail_message"),duration:v.SNACKBAR_TIMEOUT})}))}finally{(0,n.runInAction)((()=>{this._isPending=!1}))}},this._content="",this._isPending=!1,this.MAX_COMMENT_LENGTH=1e4,this.videoUsersStore=void 0,this._onCreateComment=r.noop,this.videoUsersStore=o.ensureByFields(p),(0,n.makeAutoObservable)(this)}}_=(0,i.__decorate)([s.scope.transient(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===d.AuthService?Object:d.AuthService,void 0===l.VideoCommentCreationService?Object:l.VideoCommentCreationService,void 0===m.VideoUsersStoreFactory?Object:m.VideoUsersStoreFactory,void 0===h.VideoUsersFetchService?Object:h.VideoUsersFetchService,void 0===a.Langs?Object:a.Langs,void 0===c.Snackbar?Object:c.Snackbar])],_)},884516:(e,t,o)=>{o.d(t,{CommentInputProvider:()=>r,useCommentInputModel:()=>s});var i=o(132028),n=o(259304);const{Provider:r,useModel:s}=(0,i.createProvider)(n.CommentInputModel)},821842:(e,t,o)=>{o.d(t,{CommentItem:()=>b});var i=o(474848),n=o(456921),r=o(296540),s=o(132028),d=o(48158),a=o(187460),c=o(360020),l=o(8520),m=o(149333),h=o(856289),u=o(317835),v=o(858074),p=o(567537),_=o(597459),g=o(66265),w=o(613413);const S=e=>e?.length?(0,i.jsx)(d.CommentAttachments,{attachments:e,commentId:p.VIDEO_COMMENTS_MOCK.commentWithAttachmentId,formatSize:u.formatFileSize,formatDateTime:h.getFormattedUpdatedTime}):(0,i.jsx)(r.Fragment,{}),k=(0,n.observer)((function(){const e=(0,m.useLangs)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.MainComment,{}),(0,i.jsxs)(a.CommentLayout,{children:[(0,i.jsx)(a.CommentLayout.Action,{src:p.VIDEO_COMMENTS_MOCK.secondAvatarUrl,expandable:!0,children:e.numeric(p.VIDEO_COMMENTS_MOCK.repliesNumber,e.getLang("video_replies_amount",!0))}),(0,i.jsx)(c.Comment,{replyActionLabel:e.getLang("me_message_action_reply"),onReplyClick:l.noop,onMoreClick:l.noop,onLikeClick:l.noop,likeAriaLabel:e.getLang("global_comment_like_aria_label"),dislikeAriaLabel:e.getLang("global_comment_dislike_aria_label"),actions:(0,i.jsx)(v.CommentActionMenu,{userRole:"reader"}),formatDateTime:w.formatDateTime,authorizedByUser:!0,expandActionLabel:e.getLang("me_fc_expand_panel"),owner:p.VIDEO_COMMENTS_MOCK.commentOwner,comment:p.VIDEO_COMMENTS_MOCK.firstReply,renderAttachments:S}),(0,i.jsxs)(a.CommentLayout.Action,{children:[e.getLang("me_comments_load_more")," (",p.VIDEO_COMMENTS_MOCK.loadMoreRepliesNumber,")"]})]})]})})),b=(0,s.createWidget)(_.CommentItemProvider,k)},613413:(e,t,o)=>{o.d(t,{formatDateTime:()=>n});var i=o(856289);const n=e=>(0,i.getFormattedUpdatedTime)(e,!0)},627314:(e,t,o)=>{o.d(t,{CommentEdit:()=>h});var i=o(474848),n=o(456921),r=o(296540),s=o(360020),d=o(753457),a=o(550304),c=o(149333),l=o(492931),m=o(597459);const h=(0,n.observer)((function(){const e=(0,m.useCommentItemModel)(),t=(0,c.useLangs)();return(0,r.useEffect)((()=>{e.commentEdit.setDefaultText()}),[]),(0,i.jsx)(s.Comment.Edit,{owner:(0,l.mapUserOrGroupToCommentOwner)(e.owner),afterOwnerName:t.getLang("video_comment_edit_label"),sendActionLabel:t.getLang("global_save"),cancelActionLabel:t.getLang("global_cancel"),deleteActionLabel:t.getLang("global_delete"),onSendClick:e.commentEdit.save,sendDisabled:e.commentEdit.isSendDisabled,onDeleteClick:e.commentDelete.delete,onCancelClick:e.commentEdit.cancelEdit,bottom:e.commentEdit.lengthWarning&&(0,i.jsx)(d.Text,{children:e.commentEdit.lengthWarning}),field:(0,i.jsx)(a.CommentInput.ContentEditable,{getRef:e.commentEdit.inputRef,onInput:e.commentEdit.changeInput})})}))},988067:(e,t,o)=>{o.d(t,{CommentEdit:()=>i.CommentEdit});var i=o(627314)},30118:(e,t,o)=>{o.d(t,{MainComment:()=>S});var i=o(474848),n=o(456921),r=o(327813),s=o(296540),d=o(8520),a=o(149333),c=o(424714),l=o(360020),m=o(865757),h=o(197053),u=o(515360),v=o(597459),p=o(492931),_=o(858074),g=o(988067),w=o(613413);const S=(0,n.observer)((function(){const e=(0,v.useCommentItemModel)(),t=(0,a.useLangs)();return e.commentEdit.isEditing?(0,i.jsx)(g.CommentEdit,{}):e.commentDelete.isDeleted?(0,i.jsx)(c.CommentDeleted,{onRestoreClick:e.commentDelete.restore,restoreActionLabel:t.getLang("video_restorecomm"),children:t.getLang("video_comm_deleted")}):(0,i.jsx)(l.Comment,{comment:(0,h.parseCommentProps)((0,r.toJS)(e.comment)),replyActionLabel:t.getLang("me_message_action_reply"),onReplyClick:d.noop,onMoreClick:d.noop,onLikeClick:e.toggleLike,likeAriaLabel:t.getLang("global_comment_like_aria_label"),dislikeAriaLabel:t.getLang("global_comment_dislike_aria_label"),formatText:u.formatCommentText,actions:(0,i.jsx)(_.CommentActionMenu,{userRole:"owner"}),formatDateTime:w.formatDateTime,owner:(0,p.mapUserOrGroupToCommentOwner)(e.owner),parentOwner:(0,p.mapUserOrGroupToCommentOwner)(e.parentOwner),renderAttachments:()=>(0,i.jsx)(s.Fragment,{}),selected:e.isHighlighted,authorizedByUser:e.isCurrentUserCommentOwner,expandActionLabel:t.getLang("me_fc_expand_panel"),avatarBadge:e.isCommentOwnerVideoOwner?(0,i.jsx)(m.Icon16StarCircleFillBlue,{}):void 0})}))},754044:(e,t,o)=>{o.d(t,{MainComment:()=>i.MainComment});var i=o(30118)},66265:(e,t,o)=>{o.d(t,{MainComment:()=>i.MainComment});o(988067);var i=o(754044)},697904:(e,t,o)=>{o.d(t,{showDeleteWithReasonForm:()=>i.showDeleteWithReasonForm});var i=o(55398)},55398:(e,t,o)=>{o.d(t,{showDeleteWithReasonForm:()=>s});var i=o(474848),n=o(211413),r=o(17333);const s=(e,t,o)=>{(0,n.showMessageBoxModal)((n=>(0,i.jsx)(r.StrikeForbidObjectForm,{...n,objectOwnerId:e,objectId:t,objectType:7,onSubmit:o})))}},177852:(e,t,o)=>{o.d(t,{CommentItem:()=>i.CommentItem});var i=o(821842)},331500:(e,t,o)=>{o.d(t,{CommentDeleteModel:()=>d});var i=o(327813),n=o(98710),r=o(697904),s=o(856289);class d{get canDelete(){return Boolean(this.commentData.can_delete)}get isDeleted(){return this.props.current.comment.isDeleted}get commentData(){return this.props.current.comment.data}get commentRawId(){return this.props.current.comment.rawId}get videoOwnerId(){return this.props.current.videoOwnerId}constructor(e,t,o,d,a){this.props=e,this.commentEdit=t,this.commentsDeletingService=o,this.langs=d,this.snackbar=a,this.delete=async()=>{this.abortController?.abort(),this.abortController=new AbortController;const e={commentId:this.commentRawId,ownerId:this.videoOwnerId};this.commentEdit.cancelEdit();try{await this.commentsDeletingService.delete(e,{signal:this.abortController.signal}),(0,i.runInAction)((()=>{this.abortController=null}))}catch(e){(0,i.runInAction)((()=>{(0,n.isAbortError)(e)||this.snackbar.show({type:"error",text:this.langs.getLang("video_comment_delete_fail_message"),duration:s.SNACKBAR_TIMEOUT})}))}},this.restore=async()=>{this.abortController?.abort(),this.abortController=new AbortController;const e={commentId:this.commentRawId,ownerId:this.videoOwnerId};try{await this.commentsDeletingService.restore(e,{signal:this.abortController.signal}),(0,i.runInAction)((()=>{this.abortController=null}))}catch(e){(0,i.runInAction)((()=>{(0,n.isAbortError)(e)||this.snackbar.show({type:"error",text:this.langs.getLang("video_comment_restore_fail_message")})}))}},this.deleteWithReason=()=>{(0,r.showDeleteWithReasonForm)(this.videoOwnerId,this.commentData.id,this.delete)},this.abortController=null,(0,i.makeAutoObservable)(this)}}},976389:(e,t,o)=>{o.d(t,{CommentEditModel:()=>c});var i=o(327813),n=o(296540),r=o(132028),s=o(153078),d=o(881390),a=o(856289);class c{[r.destroy](){clearTimeout(this._timer)}get inputRef(){return this._inputRef}get canEdit(){return Boolean(this.commentData.can_edit)}get inputValue(){return this._inputValue}get isEditing(){return this._isEditing}get isCommentSaved(){return this._isCommentSaved}get isSendDisabled(){return this.isLoading||this.isEmptyValue||this.isNoChanges||this.isLimitExceeded}get lengthWarning(){return(0,d.getValidateLengthMessage)({value:this._inputValue,maxLength:this.MAX_INPUT_LENGTH,getExceededLengthLabel:e=>this.langs.numeric(e,this.langs.getLang("video_comment_recommended_exceeded",!0)),getRemainingLengthLabel:e=>this.langs.numeric(e,this.langs.getLang("video_comment_recommended_remained",!0))})}resetSavingAfter(e){this._timer=setTimeout((0,i.action)((()=>{this._isCommentSaved=!1})),e)}setDefaultText(){this._inputRef?.current&&(this._inputRef.current.innerText=this.commentData.text,(0,s.setEndOfContentEditable)(this._inputRef.current))}get isEmptyValue(){return 0===this._inputValue.trim().length}get isNoChanges(){return this._inputValue===this.commentData.text}get isLimitExceeded(){return this._inputValue.length>this.MAX_INPUT_LENGTH}get commentData(){return this.props.current.comment.data}constructor(e,t,o){this.props=e,this.langs=t,this.snackbar=o,this.setIsEditing=()=>{this._isEditing=!0,this.setInputValue(this.commentData.text)},this.save=async()=>{const e={ownerId:this.props.current.videoOwnerId,message:this._inputValue};try{this.isLoading=!0,await this.props.current.comment.edit(e),(0,i.runInAction)((()=>{this._isCommentSaved=!0,this._isEditing=!1,this.resetSavingAfter(2e3)}))}catch(e){(0,i.runInAction)((()=>{this.snackbar.show({type:"error",text:this.langs.getLang("video_comment_edit_fail_message"),duration:a.SNACKBAR_TIMEOUT})}))}finally{(0,i.runInAction)((()=>{this.isLoading=!1}))}},this.cancelEdit=()=>{this._isEditing=!1,this.setInputValue(this.commentData.text)},this.setInputValue=e=>{this._inputValue=e},this.changeInput=({target:e})=>{e instanceof HTMLElement&&null!==e.innerText&&this.setInputValue(e.innerText)},this._inputRef=(0,n.createRef)(),this._isCommentSaved=!1,this.isLoading=!1,this._inputValue="",this._timer=void 0,this.MAX_INPUT_LENGTH=1e4,this._isEditing=!1,(0,i.makeAutoObservable)(this)}}},802131:(e,t,o)=>{o.d(t,{CommentItemViewModel:()=>p});var i=o(331635),n=o(327813),r=o(132028),s=o(473905),d=o(172539),a=o(951652),c=o(712600),l=o(670252),m=o(976389),h=o(331500),u=o(371635),v=o(65759);class p{[r.init](e){e.isHighlightedTemporarily&&(this._isHighlighted=!0,this.resetSelectionAfter(2e3))}[r.destroy](){clearTimeout(this._timer)}resetSelectionAfter(e){this._timer=setTimeout((0,n.action)((()=>{this._isHighlighted=!1})),e)}get comment(){return this.props.current.comment.data}get owner(){return this.props.current.comment.owner?.data}get isHighlighted(){return this._isHighlighted}get parentOwner(){return this.props.current.comment.parentOwner?.data}get videoOwnerId(){return this.props.current.videoOwnerId}get isCurrentUserCommentOwner(){return this.currentUserId===this.owner?.id}get isCommentOwnerVideoOwner(){return this.videoOwnerId===this.owner?.id}get currentUserId(){return this.authService.userId??0}constructor(e,t,o,i,r,s){this.props=e,this.authService=t,this.commentsDeletingService=o,this.commentsReportService=i,this.langs=r,this.snackbar=s,this.toggleLike=()=>{this.props.current.comment.likes.toggleLike({ownerId:this.videoOwnerId,optimistic:!0})},this.reportComment=()=>{(0,v.showReportForm)("video_comment",this.videoOwnerId,this.comment.id,this.commentReport.report)},this._isHighlighted=!1,this._timer=void 0,this.commentEdit=new m.CommentEditModel(this.props,this.langs,this.snackbar),this.commentDelete=new h.CommentDeleteModel(this.props,this.commentEdit,this.commentsDeletingService,this.langs,this.snackbar),this.commentReport=new u.CommentReportModel(this.props,this.commentsReportService),(0,n.makeAutoObservable)(this)}}p=(0,i.__decorate)([r.scope.transient(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===r.Props?Object:r.Props,void 0===a.AuthService?Object:a.AuthService,void 0===s.VideoCommentsDeletingService?Object:s.VideoCommentsDeletingService,void 0===d.VideoCommentsReportService?Object:d.VideoCommentsReportService,void 0===c.Langs?Object:c.Langs,void 0===l.Snackbar?Object:l.Snackbar])],p)},371635:(e,t,o)=>{o.d(t,{CommentReportModel:()=>n});var i=o(327813);class n{constructor(e,t){this.props=e,this.commentsReportProvider=t,this.report=async e=>{const t={commentId:this.props.current.comment.rawId,ownerId:this.props.current.videoOwnerId,reason:e};try{await this.commentsReportProvider.report(t)}catch(e){throw e}},(0,i.makeAutoObservable)(this)}}},597459:(e,t,o)=>{o.d(t,{CommentItemProvider:()=>r,useCommentItemModel:()=>s});var i=o(132028),n=o(802131);const{Provider:r,useModel:s}=(0,i.createProvider)(n.CommentItemViewModel)},710113:(e,t,o)=>{o.d(t,{CommentInput:()=>i.CommentInput,CommentItem:()=>n.CommentItem});var i=o(171445),n=o(177852)},80451:(e,t,o)=>{o.d(t,{Episodes:()=>k});var i=o(474848),n=o(296540),r=o(293721),s=o(8520),d=o(865708),a=o(753457),c=o(303800),l=o(557992),m=o(454154),h=o(723723),u=o(299494),v=o(771690),p=o(353557),_=o(866467),g=o(32305),w=o(770919),S=o(710005);const k=({timeCodes:e})=>{const t=(0,n.useRef)([]),{$activeEpisode:o,$scrollHeight:k}=(0,r.useUnit)(w.videoModalEpisodeService);return(0,n.useEffect)((()=>{null!==o&&t?.current?.[o]?.scrollIntoView({behavior:"smooth",block:"center"})}),[o]),(0,i.jsx)(d.AppRootProvider,{children:(0,i.jsx)(a.AppearanceProvider,{value:"dark",children:(0,i.jsxs)("div",{className:S.default.container,children:[(0,i.jsx)(c.Div,{mode:"horizontal",spacing:0,children:(0,i.jsx)(l.Header,{mode:"primary",aside:(0,i.jsx)(m.Button,{mode:"link",onClick:g.handleCloseEpisodeList,children:(0,i.jsx)(a.Subhead,{className:(0,h.getColorClass)("color_text_subhead"),weight:"3",children:(0,_.getLang)("video_close_time_code_list")})}),children:(0,_.getLang)("video_n_time_codes",e.length,!0)})}),(0,i.jsx)(u.ModalScrollView,{height:k?k-52:"100%",autoHideScrollbar:!0,children:(0,i.jsx)(c.Div,{mode:"vertical",spacing:0,paddingBottom:4,paddingTop:0,children:e.map((({time:e,text:n},r)=>{const{imgSrc:d,imgWidth:a,imgHeight:c,imgOffsetX:l,imgOffsetY:m}=window.Videoview.getThumbFromTime(e,128);return(0,i.jsx)(v.VideoEpisodeCard,{getRootRef:e=>t.current[r]=e,timeCode:(0,p.formatTime)(e),text:(0,s.decodeHTMLEntities)(n),thumbSrc:d,onShareClick:()=>(0,g.handleShare)(e),onClick:t=>(0,g.handleShowTimeTag)(t,e,r),previewWidth:a,previewHeight:c,previewOffsetX:l,previewOffsetY:m,active:r===o,shareAriaLabel:(0,_.getLang)("video_share"),activeEffectDelay:2e3},e)}))})})]})})})}},667571:(e,t,o)=>{o.d(t,{Episodes:()=>n.Episodes,initVideoModalEpisodes:()=>i.initVideoModalEpisodes,unmountVideoModalEpisodes:()=>i.unmountVideoModalEpisodes});var i=o(488429),n=o(80451)},488429:(e,t,o)=>{o.d(t,{initVideoModalEpisodes:()=>a,unmountVideoModalEpisodes:()=>d});var i=o(474848),n=o(80451),r=o(440961),s=o(342018);const d=e=>{e&&r.unmountComponentAtNode(e)},a=(e,t)=>{e&&(r.render((0,i.jsx)(n.Episodes,{...t}),e),(0,s.pushNavDestroy)((()=>{d(e)})))}},381885:(e,t,o)=>{o.d(t,{PlayerSidebar:()=>d});var i=o(474848),n=o(865708),r=o(947204),s=o(374911);const d=({videoId:e,playlistId:t})=>{const o=(0,r.usePlayerStoreType)();return(0,i.jsx)(n.AppRootProvider,{children:o===r.PlaylistStoreType&&(0,i.jsx)(s.PlaylistVideosList,{videoId:e,playlistId:t})})}},125290:(e,t,o)=>{o.d(t,{PlaylistVideo:()=>m});var i=o(474848),n=o(618068),r=o(841315),s=o(369370),d=o(296761),a=o(970466),c=o(406805);const l=e=>e.stopPropagation(),m=({video:e,onVideoOpen:t,isHighlighted:o})=>{const m=(0,d.useOwner)(e,a.entitiesGroupsService,a.entitiesUsersService),h=(0,s.mapVideoFullToVideoCardItem)({...e,date:void 0},m);h.owner.badge=void 0;const u={video:h,videoContainerWidth:128,onAuthorClick:l,isHighlighted:o,direction:"horizontal",size:"s",noRounded:!0};return e.content_restricted||(u.video.href=(0,r.getVideoUrl)(e),u.onVideoOpen=t,u.onThumbClick=c.handleOnlyCtrlClickOnLink,u.onTitleClick=c.handleOnlyCtrlClickOnLink),(0,i.jsx)(n.VideoCard,{...u})}},97775:(e,t,o)=>{o.d(t,{PlaylistVideosList:()=>k});var i=o(474848),n=o(293721),r=o(296540),s=o(756179),d=o(538522),a=o(361121),c=o(601379),l=o(753457),m=o(172656),h=o(557992),u=o(194528),v=o(744440),p=o(866467),_=o(770919),g=o(432081),w=o(125290),S=o(607385);const k=({videoId:e,playlistId:t})=>{const[o,k]=(0,r.useState)(e),b=(0,n.useStore)(_.videoModalContextService.$playlistData),f=(0,n.useStore)(_.videoModalContextService.$videosIds),I=(0,s.useEntitiesStoreMap)(_.videoModalContextService.$videoEntities,f??[]),C=(0,n.useEvent)(_.videoModalContextService.processPlaylistEvent),y=e=>o=>{const i=(0,d.joinRawId)({itemId:e.id,ownerId:e.owner_id});(0,g.showVideo)(i,"",{playlistId:t,autoplay:1,addParams:{force_no_repeat:1,track_code:e.track_code}},o),k(i)};return(0,r.useEffect)((()=>{if(t){const{itemId:e,ownerId:o}=(0,a.splitRawId)(t);C({ownerId:o,playlistId:e})}}),[t]),b?(0,i.jsx)(l.AppearanceProvider,{value:"dark",children:(0,i.jsxs)(m.Group,{className:S.default.root,noTopRounded:!0,noBottomRounded:!0,children:[(0,i.jsx)(h.Header,{subtitle:b.count&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Spacing,{size:4}),(0,p.getLang)("video_count_in_playlist",b.count)]}),children:b.title}),(0,i.jsx)(u.Spacing,{size:2}),(0,i.jsx)(m.Group.ExpandedContent,{className:S.default.list,children:(0,i.jsx)(v.CustomScrollView,{autoHideScrollbar:!0,children:I.map((e=>{if(!(0,c.isVideoVideoFullWithIds)(e))return null;const t=(0,d.joinRawId)({itemId:e.id,ownerId:e.owner_id});return(0,i.jsx)(w.PlaylistVideo,{video:e,isHighlighted:t===o,onVideoOpen:y(e)},t)}))})})]})}):null}},374911:(e,t,o)=>{o.d(t,{PlaylistVideosList:()=>i.PlaylistVideosList});var i=o(97775)},67952:(e,t,o)=>{o.d(t,{PlayerSidebar:()=>i.PlayerSidebar,initVideoModalPlayerSidebar:()=>n.initVideoModalPlayerSidebar,unmountVideoModalPlayerSidebar:()=>n.unmountVideoModalPlayerSidebar});var i=o(381885),n=o(679383)},679383:(e,t,o)=>{o.d(t,{initVideoModalPlayerSidebar:()=>a,unmountVideoModalPlayerSidebar:()=>d});var i=o(474848),n=o(381885),r=o(440961),s=o(342018);const d=e=>{e&&r.unmountComponentAtNode(e)},a=(e,t)=>{e&&(r.render((0,i.jsx)(n.PlayerSidebar,{...t}),e),(0,s.pushNavDestroy)((()=>{d(e)})))}},878095:(e,t,o)=>{o.d(t,{PlaylistPopoverWrapper:()=>_});var i=o(474848),n=o(348904),r=o(423151),s=o(970466),d=o(293721),a=o(296540),c=o(826619),l=o(856289),m=o(540462),h=o(296761),u=o(317216),v=o(314309),p=o(231450);const _=({video:e,children:t,ownerId:o,onShownChange:_,...g})=>{const[w,S]=(0,a.useState)(!1),{$needsRefetch:k,setNeedsRefetch:b,$addedToMy:f,$videoAlbumsLoading:I,fetchPlaylistsEvent:C,fetchMorePlaylistsEvent:y,setUpstreamPlaylists:x,setOwnerIdEvent:E,setVideoId:A,setVideoOwnerIdEvent:M,setAddedToMyEvent:V,togglePlaylistAddedEvent:L,createPlaylistEvent:j,resetVideosAlbumsEvent:O,setAddedEvent:T}=(0,d.useUnit)(s.videoModalAlbumsService),F=(0,h.usePlaylists)(s.videoModalAlbumsService.$playlistEntityStore),D=e=>{_?.(e),S(e)};return(0,a.useEffect)((()=>{E(o),A(e.id),V(e.addedToMy),M(e.mainOwnerId),k||x(e.playlists)}),[]),(0,a.useEffect)((()=>{w&&k&&(C(),b(!1))}),[w,k]),(0,a.useEffect)((()=>{if((0,m.partConfigEnabled)("video_playlist_redesign_popup"))return;const e=e=>{window.VideoShowcase?(O(o),b(!0),T(!0)):j(e.detail)};return window.addEventListener(c.PlaylistFormEvents.CREATE,e),()=>{window.removeEventListener(c.PlaylistFormEvents.CREATE,e)}}),[]),(0,i.jsx)(n.PlaylistPopover,{playlists:F,addedToMy:f??!1,videoId:e.id,videoOwnerId:e.mainOwnerId,onToggleVideoAdded:(t,o)=>{(0,p.getFromType)("search")&&v.searchStatsCollector.logEvent({track_code:e.trackCode,action:t?u.SearchClickActionMap.REMOVE_FROM_ME_OUT:u.SearchClickActionMap.ADD_TO_ME_OUT,type:u.EventItemType.VIDEO}),L({album_id:o,isAdded:t})},onCreateNewPlaylist:t=>{D(!1),(0,m.partConfigEnabled)("video_playlist_redesign_popup")?(0,r.showPlaylistModal)({ownerId:o,onCreate:j,hasOnCreateSnackbar:!1}):(0,c.createPlaylistPopup)({event:t,ownerId:o,videoId:e.id,videoOwnerId:e.mainOwnerId,requestOrigin:c.CreatePlaylistRequestOrigin.VIDEO_PLAYLISTS_MODAL}).catch()},fetchMorePlaylistEvent:y,playlistsLoading:I??!1,onShownChange:D,width:l.PLAYLIST_POPOVER_WIDTH,maxWidth:l.PLAYLIST_POPOVER_WIDTH,...g,children:t})}},968754:(e,t,o)=>{o.d(t,{VideoModalRecommendationsClient:()=>v});var i=o(474848),n=o(296540),r=o(293721),s=o(970466),d=o(8520),a=o(969075),c=o(865708),l=o(557992),m=o(412888),h=o(968596),u=o(866467);const v=({ownerId:e,videoId:t,trackCode:o})=>{const v=(0,n.useRef)(null),p=(0,r.useEvent)(s.videoModalRecommendationsService.getRecommendationsEvent),_=(0,r.useEvent)(s.videoModalRecommendationsService.abortRequestEvent);return(0,n.useEffect)((()=>(p({ownerId:e,videoId:t,trackCode:o}),()=>{_()})),[e,t]),(0,i.jsx)(c.AppRootProvider,{children:(0,i.jsxs)("div",{className:(0,d.classNames)("js-video-modal-recommendations",a.default.recommendationsContainer),ref:v,children:[(0,i.jsx)(l.Header,{children:(0,i.jsx)(m.TextClamp,{lines:0,children:(0,u.getLang)("video_modal_recommendations")})}),(0,i.jsx)(h.RecommendationsVideos,{})]})})}},724554:(e,t,o)=>{o.d(t,{hydrateVideoModalRecommendations:()=>c,unmountVideoModalRecommendations:()=>a});var i=o(338329),n=o(256252),r=o(342018),s=o(440961),d=o(968754);const a=e=>{e&&s.unmountComponentAtNode(e)},c=()=>{(0,i.tq)().setStartupHandler("VideoModalRecommendations/init",(e=>{(0,n.hydrateComponent)({descriptor:e,component:d.VideoModalRecommendationsClient});const{target:t}=e.payload;(0,r.pushNavDestroy)((()=>{a(t)}))}))}},143640:(e,t,o)=>{o.d(t,{RecommendationsVideo:()=>p});var i=o(474848),n=o(293721),r=o(296540),s=o(618068),d=o(841315),a=o(369370),c=o(296761),l=o(950885),m=o(970466),h=o(406805),u=o(920081);const v=e=>e.stopPropagation(),p=(0,r.memo)((({video:e})=>{const t=(0,c.useOwner)(e,m.entitiesGroupsService,m.entitiesUsersService),o=(0,d.getVideoUrl)(e),r={...(0,a.mapVideoFullToVideoCardItem)(e,t),href:o},p=(0,n.useEvent)(m.videoModalRecommendationsService.toggleFaveEvent),{menuItems:_,onMenuPopoverShownChanged:g}=(0,c.useVideoMenuItems)({video:e,handlers:{onToggleFave:()=>p({id:e.id,ownerId:e.owner_id,ref:e.track_code})}}),w=e.content_restricted?{video:r}:{onVideoOpen:t=>(0,l.openVideoExtended)(t,e),onThumbClick:h.handleOnlyCtrlClickOnLink,onTitleClick:h.handleOnlyCtrlClickOnLink,video:{...r,href:o}},{onShownChange:S,restoreFocus:k}=h.fixVideoPlayerScrollPopover;return(0,i.jsx)(s.VideoCard,{...w,direction:"horizontal",noAvatar:!0,size:"s",videoContainerWidth:u.VIDEO_RECOMMENDATIONS_VIDEO_CARD_WIDTH,menuItems:_,onAuthorClick:v,onMenuPopoverShownChanged:g,onMenuPopoverShownChange:S,restoreMenuPopoverFocus:k})}))},664552:(e,t,o)=>{o.d(t,{RecommendationsVideos:()=>a});var i=o(474848),n=o(293721),r=o(970466),s=o(916396),d=o(305909);const a=()=>null===(0,n.useStore)(r.videoModalRecommendationsService.$videosIds)?(0,i.jsx)(d.RecommendationsVideosInitial,{}):(0,i.jsx)(s.RecommendationsVideosList,{})},305909:(e,t,o)=>{o.d(t,{RecommendationsVideosInitial:()=>a});var i=o(474848),n=o(293721),r=o(138007),s=o(970466),d=o(920081);const a=()=>(0,n.useStore)(s.videoModalRecommendationsService.$videosLoading)?(0,i.jsx)(r.HorizontalMiniVideoCardListSkeleton,{count:5,cardWidth:d.VIDEO_RECOMMENDATIONS_VIDEO_CARD_WIDTH}):null},916396:(e,t,o)=>{o.d(t,{RecommendationsVideosList:()=>u});var i=o(474848),n=o(296540),r=o(756179),s=o(601379),d=o(538522),a=o(564508),c=o(970466),l=o(293721),m=o(143640),h=o(406805);const u=()=>{const e=(0,l.useStore)(c.videoModalRecommendationsService.$videosIds),t=(0,l.useStore)(c.videoModalRecommendationsService.$videosFullyLoaded),o=(0,l.useStore)(c.videoModalRecommendationsService.$videosLoading),u=(0,l.useEvent)(c.videoModalRecommendationsService.fetchMoreRecommendationsVideosEvent),v=(0,r.useEntitiesStoreMap)(c.videoModalRecommendationsService.$recommendationsEntities,e??[]);return(0,i.jsxs)(i.Fragment,{children:[v.map((e=>(0,s.isVideoVideoFullWithIds)(e)&&(0,n.createElement)(m.RecommendationsVideo,{...h.fixVideoPlayerScrollPopover,key:(0,d.joinRawId)({itemId:e.id,ownerId:e.owner_id}),video:e}))),!t&&(0,i.jsx)(a.DynamicPagination,{isLoading:Boolean(o),fetchData:u,nextFrom:v.length})]})}},920081:(e,t,o)=>{o.d(t,{VIDEO_RECOMMENDATIONS_VIDEO_CARD_WIDTH:()=>i});const i=128},968596:(e,t,o)=>{o.d(t,{RecommendationsVideos:()=>i.RecommendationsVideos});var i=o(664552)},201771:(e,t,o)=>{o.d(t,{unmountVideoModalRecommendations:()=>i.unmountVideoModalRecommendations});var i=o(724554)},565852:(e,t,o)=>{o.d(t,{handleAddToCommunity:()=>i});const i=async(e,t)=>{window.Videoview||await window.stManager.add([window.jsc("web/videoview.js")]),window.Videoview._onAddToCommunity(e,t)}},54138:(e,t,o)=>{o.d(t,{handleCloseEpisodeList:()=>i});const i=()=>{window.Videoview.closeTimeCodesList()}},939477:(e,t,o)=>{o.d(t,{handleCopyToClipboardErId:()=>a});var i=o(474848),n=o(866467),r=o(432465),s=o(8520),d=o(629775);const a=e=>{e&&0!==e.length&&((0,s.copyTextToClipboard)(e),(0,r.showSnackbar)({text:(0,n.getLang)("video_moderation_snackbar_copied"),before:{content:(0,i.jsx)(d.Icon20CheckAlt,{})}}))}},5022:(e,t,o)=>{o.d(t,{handleCopyToClipboardVideoLink:()=>m});var i=o(474848),n=o(8520),r=o(105330),s=o(432465),d=o(866467),a=o(538522),c=o(76449),l=o(373080);const m=(e,t)=>{(0,n.copyTextToClipboard)(`https://${(0,r.getHostName)()}/video${(0,a.joinRawId)({ownerId:e,itemId:t})}`),(0,s.showSnackbar)({text:(0,i.jsx)(l.InnerHTML,{className:"VideoNotification__title",children:(0,d.getLang)("video_copied_to_clipboard")}),before:{content:(0,i.jsx)(c.Icon24CheckCircleOutline,{})}})}},849149:(e,t,o)=>{o.d(t,{handleDeleteVideo:()=>i});const i=async()=>{window.Videoview||await window.stManager.add([window.jsc("web/videoview.js")]),window.Videoview._onDelete()}},8668:(e,t,o)=>{o.d(t,{handleEditVideo:()=>i});const i=async(e,t)=>{window.Videoview||await window.stManager.add([window.jsc("web/videoview.js")]),window.Videoview._onEdit(e,t)}},475234:(e,t,o)=>{o.d(t,{handleExportVideo:()=>i});const i=async e=>{window.Videoview||await window.stManager.add([window.jsc("web/videoview.js")]),window.Videoview._onExport(e)}},294739:(e,t,o)=>{o.d(t,{handleExternalPlayerAddVideo:()=>i});const i=async e=>{window.Videoview||await window.stManager.add([window.jsc("web/videoview.js")]);const t=window.Videoview.getPlayerObject();t?.onExternalAdded(e)}},519160:(e,t,o)=>{o.d(t,{handleShare:()=>i});const i=e=>{window.Videoview?.sendVideo(!1,e)}},607239:(e,t,o)=>{o.d(t,{handleShowTimeTag:()=>n});var i=o(770919);const n=(e,t,o)=>{i.videoModalEpisodeService.changeActiveEpisode(o),window.Videoview.timeTagClick(t,"list",e)}},476281:(e,t,o)=>{o.d(t,{handleShowUMA:()=>i});const i=async(e,t)=>{window.Video||await window.stManager.add([window.jsc("web/video.js")]),window.Video.onVideoUMA(void 0,void 0,e,t)}},59695:(e,t,o)=>{o.d(t,{handleSubscribeVideoAuthor:()=>n});var i=o(970466);const n=e=>{i.videoModalSubscribeService.toggleSubscribeEvent({authorId:e})}},782359:(e,t,o)=>{o.d(t,{handleToggleFavorite:()=>n});var i=o(770919);const n=async e=>{window.Videoview||await window.stManager.add([window.jsc("web/videoview.js")]);const t=window.Videoview.getPlayerObject();if(t?.onBookmarked)return void t.onBookmarked(e);const o=window.Videoview.getMvData();if(!o)return;const{oid:n,vid:r,track_code:s,itemAccessHash:d}=o;i.videoModalFaveService.toggleFaveEvent({ownerId:n,id:r,ref:s,source:e,accessKey:d})}},485115:(e,t,o)=>{o.d(t,{handleToggleHideAuthor:()=>r});var i=o(29593),n=o(970466);const r=({owner_id:e,owner_name:t,is_subscription_hidden:o,video_id:r,track_code:s})=>{n.videoModalHideAuthorService&&(n.videoModalHideAuthorService.toggleHideAuthorEvent({id:e,name:t}),"boolean"==typeof o&&(0,i.logHideAuthorClick)(o,{video_id:r??0,video_owner_id:e},s))}},769264:(e,t,o)=>{o.d(t,{handleToggleLike:()=>i});const i=async()=>{window.Videoview||await window.stManager.add([window.jsc("web/videoview.js")]),window.Videoview.like(null,!1)}},633201:(e,t,o)=>{o.d(t,{handleViewVideoStatistic:()=>i});const i=async()=>{window.Videoview||await window.stManager.add([window.jsc("web/videoview.js")]),window.Videoview._onViewStats()}},32305:(e,t,o)=>{o.d(t,{handleAddToCommunity:()=>i.handleAddToCommunity,handleBlurContent:()=>u.handleBlurContent,handleCloseEpisodeList:()=>w.handleCloseEpisodeList,handleCopyToClipboardVideoLink:()=>d.handleCopyToClipboardVideoLink,handleDeleteVideo:()=>n.handleDeleteVideo,handleDeleteVideoWithReason:()=>u.handleDeleteVideoWithReason,handleEditVideo:()=>r.handleEditVideo,handleExportVideo:()=>s.handleExportVideo,handleExternalPlayerAddVideo:()=>h.handleExternalPlayerAddVideo,handleForbidVideo:()=>u.handleForbidVideo,handleGeoBlockContent:()=>u.handleGeoBlockContent,handleShare:()=>p.handleShare,handleShowTimeTag:()=>_.handleShowTimeTag,handleShowUMA:()=>v.handleShowUMA,handleSubscribeVideoAuthor:()=>l.handleSubscribeVideoAuthor,handleToggleFavorite:()=>a.handleToggleFavorite,handleToggleHideAuthor:()=>g.handleToggleHideAuthor,handleToggleLike:()=>c.handleToggleLike,handleViewVideoStatistic:()=>m.handleViewVideoStatistic});var i=o(565852),n=o(849149),r=o(8668),s=o(475234),d=o(5022),a=o(782359),c=o(769264),l=o(59695),m=o(633201),h=o(294739),u=o(159908),v=o(476281),p=o(519160),_=o(607239),g=o(485115),w=o(54138)},68640:(e,t,o)=>{o.d(t,{handleBlurContent:()=>i});const i=async(e,t)=>{window.scblf||await window.stManager.add([window.jsc("internal/ShowContentBlockForms.js")]),window.scblf&&window.scblf("video",e,t)}},758356:(e,t,o)=>{o.d(t,{handleDeleteVideoWithReason:()=>i});const i=async({ownerId:e,videoId:t,deleteWithReason:o,claimId:i=0})=>{if(window.ssfof||await window.stManager.add([window.jsc("internal/ShowStrikeForbidObjectForm.js")]),o&&window.ssfof){const{forbiddenObjectTypeId:n,dmcaTitle:r}=o;window.ssfof(e,t,n,i,r)}}},476547:(e,t,o)=>{o.d(t,{handleForbidVideo:()=>i});const i=async(e,t,o)=>{window.sfof||await window.stManager.add([window.jsc("internal/ShowForbidObjectForm.js")]),window.sfof&&window.sfof(e,t,o)}},384133:(e,t,o)=>{o.d(t,{handleGeoBlockContent:()=>i});const i=async(e,t)=>{window.scgbf||await window.stManager.add([window.jsc("internal/ShowContentBlockForms.js")]),window.scgbf&&window.scgbf("video",e,t)}},159908:(e,t,o)=>{o.d(t,{handleBlurContent:()=>n.handleBlurContent,handleDeleteVideoWithReason:()=>s.handleDeleteVideoWithReason,handleForbidVideo:()=>i.handleForbidVideo,handleGeoBlockContent:()=>r.handleGeoBlockContent});var i=o(476547),n=o(68640),r=o(384133),s=o(758356)},947204:(e,t,o)=>{o.d(t,{PlaylistStoreType:()=>n.PlaylistStoreType,useMenuItemsHandlers:()=>i.useMenuItemsHandlers,useMoreMenuActions:()=>r.useMoreMenuActions,usePlayerStoreType:()=>n.usePlayerStoreType});var i=o(636161),n=o(195585),r=o(414094)},636161:(e,t,o)=>{o.d(t,{useMenuItemsHandlers:()=>h});var i=o(970466),n=o(293721),r=o(8520),s=o(32305),d=o(950885),a=o(636826),c=o(373594),l=o(314309),m=o(317216);const h=({ownerId:e,ownerName:t,videoId:o,trackCode:h})=>{const u=(0,n.useStore)(i.videoModalService.$isShortVideo),v=(0,n.useStore)(i.videoModalService.$isActiveLive),p=(0,n.useStore)(i.videoModalService.$title),_=(0,n.useStore)(i.videoModalService.$isLiked),g=(0,n.useStore)(i.videoModalSubscribeService.$isSubscribe),w=(0,n.useStore)(i.videoModalFaveService.$isFavorite),S=(0,n.useStore)(i.videoModalSubscribeService.$isSubscriptionHidden),k=void 0!==o;return{onAddToGroupClick:()=>{k&&(0,s.handleAddToCommunity)(e,o)},onDeleteVideoClick:()=>{k&&((0,s.handleDeleteVideo)(),w&&(0,s.handleToggleFavorite)(c.FAVORITE_SOURCES.VIDEO_PLAYER_MODAL))},onEditVideoClick:()=>{k&&(0,s.handleEditVideo)(u,v)},onExportVideoClick:()=>{k&&(0,s.handleExportVideo)(u)},onCopyToClipboardVideoLink:()=>{k&&(h&&l.searchStatsCollector.logEvent({track_code:h,type:m.EventItemType.VIDEO,action:m.SearchClickActionMap.COPY_LINK_OUT}),(0,s.handleCopyToClipboardVideoLink)(e,o))},onToggleFavorite:()=>{o&&(h&&l.searchStatsCollector.logEvent({track_code:h,type:m.EventItemType.VIDEO,action:w?m.SearchClickActionMap.UNFAVE_OUT:m.SearchClickActionMap.FAVE_OUT}),(0,s.handleToggleFavorite)(c.FAVORITE_SOURCES.VIDEO_PLAYER_MODAL))},onSubscribeVideoAuthor:()=>{h&&l.searchStatsCollector.logEvent({track_code:h,type:m.EventItemType.VIDEO,action:g?m.SearchClickActionMap.UNSUBSCRIBE_OUT:m.SearchClickActionMap.SUBSCRIBE_OUT}),(0,s.handleSubscribeVideoAuthor)(e)},onSendReport:t=>{k&&(0,d.sendReportExtended)(t,{id:o,owner_id:e},{withoutCardFeedback:!0})},onToggleLike:()=>{k&&(h&&l.searchStatsCollector.logEvent({track_code:h,type:m.EventItemType.VIDEO,action:_?m.SearchClickActionMap.UNLIKE_OUT:m.SearchClickActionMap.LIKE_OUT}),(0,s.handleToggleLike)())},onDownloadVideoClick:()=>{if(!k||!p)return;!h||u||v||l.searchStatsCollector.logEvent({track_code:h,type:m.EventItemType.VIDEO,action:m.SearchClickActionMap.DOWNLOAD_OUT});const t=u?"clip":v?"postlive":"video";(0,a.downloadVideo)({oid:String(e),vid:String(o),title:p,type:t})},onViewVideoStatisticClick:s.handleViewVideoStatistic,onHideAuthorClick:()=>{(0,s.handleToggleHideAuthor)({owner_id:e,owner_name:t?(0,r.decodeHTMLEntities)(t):"",is_subscription_hidden:S,video_id:o,track_code:h})},onCreateClipClick:async t=>{o&&await(0,d.createClipFromVideo)(t,{id:o,owner_id:e})}}}},414094:(e,t,o)=>{o.d(t,{useMoreMenuActions:()=>b});var i=o(474848),n=o(293721),r=o(296540),s=o(770919),d=o(866467),a=o(814487),c=o(829713),l=o(59907),m=o(3110),h=o(289150),u=o(549318),v=o(485749),p=o(490639),_=o(405816),g=o(540462),w=o(636161),S=o(468073),k=o(856289);const b=({ownerId:e,videoId:t,duration:o,isFromMessage:b,watchLaterItem:f,isScheduled:I,statisticLink:C,trackCode:y})=>{const{onAddToGroupClick:x,onDeleteVideoClick:E,onEditVideoClick:A,onExportVideoClick:M,onCopyToClipboardVideoLink:V,onToggleFavorite:L,onSendReport:j,onViewVideoStatisticClick:O,onDownloadVideoClick:T,onCreateClipClick:F}=(0,w.useMenuItemsHandlers)({ownerId:e,videoId:t,trackCode:y}),D=(0,n.useStore)(s.videoModalService.$canViewStatistic),R=(0,n.useStore)(s.videoModalService.$canEditVideo),P=(0,n.useStore)(s.videoModalFaveService.$canAddToFavorite),B=(0,n.useStore)(s.videoModalFaveService.$isFavorite),H=(0,n.useStore)(s.videoModalService.$canReport),N=(0,n.useStore)(s.videoModalService.$canAddToGroups),$=(0,n.useStore)(s.videoModalService.$canDeleteVideo),U=(0,n.useStore)(s.videoModalService.$canDownloadVideo),G=(0,n.useStore)(s.videoModalService.$isExternal),W=(0,n.useStore)(s.videoModalService.$videoType),[z,q]=(0,r.useState)(!1),K=(0,g.partConfigEnabled)("video_modal_statistic_button"),Y=(0,g.partConfigEnabled)("video_bookmarks_renaming_to_watch_later");return{menuItems:(0,r.useMemo)((()=>{const t=[];if(D&&(!K||S.Ranges.isUserId(e))){const e={children:(0,d.getLang)("video_statistics"),before:(0,i.jsx)(a.Icon20StatisticsOutline,{})};C?.length?(e.target="_blank",e.href=C,e.testId="video_modal_statistic_lk"):(e.onClick=O,e.testId="video_modal_statistic_modal"),t.push(e)}return R&&t.push({onClick:A,before:(0,i.jsx)(c.Icon20WriteOutline,{}),children:(0,d.getLang)("video_edit"),testId:"video_modal_edit_button"}),(0,g.partConfigEnabled)("video_to_clip")&&R&&W&&(0,k.canCreateClipFromVideo)({duration:o,type:W},!!G)&&t.push({onClick:F,before:(0,i.jsx)(l.Icon20LogoClipsOutline,{}),children:(0,d.getLang)("video_create_clip")}),P&&!b&&(Y?t.push({onClick:L,before:f,testId:"video_modal_bookmarks_button",children:B?(0,d.getLang)("video_remove_from_watch_later"):(0,d.getLang)("video_catalog_showcase_section_my_watch_later_title")}):t.push({onClick:L,before:(0,i.jsx)(m.Icon20BookmarkOutline,{}),children:B?(0,d.getLang)("global_remove_from_bookmarks"):(0,d.getLang)("global_add_to_bookmarks"),testId:"video_modal_bookmarks_button"})),U&&!b&&t.push({onClick:T,before:(0,i.jsx)(h.Icon20DownloadOutline,{}),children:(0,d.getLang)("video_download_video_from_modal"),testId:"video_modal_download_button"}),N&&!b&&t.push({onClick:x,before:(0,i.jsx)(u.Icon20Add,{}),testId:"video_modal_add_to_community_button",children:(0,d.getLang)("video_add_to_group")}),I||b||(t.push({onClick:V,before:(0,i.jsx)(v.Icon20CopyOutline,{}),testId:"video_modal_copy_link_button",children:(0,d.getLang)("video_copy_video_link")}),t.push({onClick:M,before:(0,i.jsx)(h.Icon20DownloadOutline,{}),testId:"video_modal_export_button",children:(0,d.getLang)("video_export_action")})),$&&t.push({onClick:E,before:(0,i.jsx)(p.Icon20DeleteOutline,{}),children:(0,d.getLang)("video_delete_button"),testId:"video_modal_delete_button"}),H&&t.push({onClick:j,before:(0,i.jsx)(_.Icon20ReportOutline,{}),testId:"video_modal_report_button",children:(0,d.getLang)("global_report_spam")}),t}),[z]),onShownChanged:e=>{q(e)}}}},195585:(e,t,o)=>{o.d(t,{PlaylistStoreType:()=>c,usePlayerStoreType:()=>l});var i=o(127609),n=o(296540);const r=/pl_(-?\d+_-?\d+)/,s=/pl_cat_trends/,d=/pl_cat_my_communities/,a=/pl_cat_my_history/,c="playlist",l=()=>{const[e,t]=(0,n.useState)(null);return(0,n.useEffect)((()=>{const e=e=>{return t((o=e).match(r)?c:o.match(s)?"showcase":o.match(d)?"my_communities":o.match(a)?"my_history":null);var o};e(window.nav.strLoc),(0,i.subscribeNavLocationChange)((t=>{e(t)}))}),[]),e}},770919:(e,t,o)=>{o.r(t),o.d(t,{Comments:()=>a.Comments,CommentsWidget:()=>a.CommentsWidget,Episodes:()=>d.Episodes,PlayerSidebar:()=>n.PlayerSidebar,VideoModalInfo:()=>i.VideoModalInfo,entitiesGroupsService:()=>s.entitiesGroupsService,entitiesUsersService:()=>s.entitiesUsersService,initComments:()=>a.initComments,initVideoModalEpisodes:()=>d.initVideoModalEpisodes,initVideoModalInfo:()=>i.initVideoModalInfo,initVideoModalPlayerSidebar:()=>n.initVideoModalPlayerSidebar,unmountComments:()=>a.unmountComments,unmountVideoModalEpisodes:()=>d.unmountVideoModalEpisodes,unmountVideoModalPlayerSidebar:()=>n.unmountVideoModalPlayerSidebar,unmountVideoModalRecommendations:()=>r.unmountVideoModalRecommendations,videoModalAlbumsService:()=>s.videoModalAlbumsService,videoModalContextService:()=>s.videoModalContextService,videoModalEpisodeService:()=>s.videoModalEpisodeService,videoModalFaveService:()=>s.videoModalFaveService,videoModalHideAuthorService:()=>s.videoModalHideAuthorService,videoModalModerService:()=>s.videoModalModerService,videoModalRecommendationsService:()=>s.videoModalRecommendationsService,videoModalService:()=>s.videoModalService,videoModalSubscribeService:()=>s.videoModalSubscribeService});var i=o(401276),n=o(67952),r=o(201771),s=o(970466),d=o(667571),a=o(816939)},84971:(e,t,o)=>{o.d(t,{createRecommendationsService:()=>a});var i=o(32489),n=o(87029),r=o(169572),s=o(831144),d=o(122974);const a=({domain:e,entitiesGroupsService:t,entitiesUsersService:o,onAddFave:a,onRemoveFave:c})=>{const l=(0,n.createEntitiesVideoService)({domain:e,entitiesGroupsService:t,entitiesUsersService:o}),m=(0,d.createFaveService)({domain:e,entitiesVideoService:l,onAddFave:a,onRemoveFave:c}),h=(0,r.createListsVideosRecommendationsService)({domain:e,entitiesVideoService:l}),[u,v]=(0,s.createAbortControllerField)(e),p=e.createStore(""),_=e.createEvent(),g=e.createEvent();(0,i.sample)({clock:_,fn:()=>{},target:h.resetVideosRecommendationsEvent}),(0,i.sample)({clock:_,fn:({ownerId:e})=>String(e),target:p}),(0,i.sample)({clock:_,source:u,fn:(e,{ownerId:t,videoId:o,trackCode:i})=>({controller:e,entityKey:t,query:{video_id:o,owner_id:t,track_code:i,count:10}}),target:h.fetchVideosRecommendationsFx}),(0,i.sample)({clock:g,source:p,fn:e=>({entityKey:e}),target:h.fetchMoreVideosRecommendationsEvent});const w=h.selectStores(p);return{$ownerId:p,$recommendationsEntities:l.$entitiesVideo,$videosCount:w.$count,$videosError:w.$error,$videosFullyLoaded:w.$fullyLoaded,$videosIds:w.$listIds,$videosLoading:w.$loading,abortRequestEvent:v,getRecommendationsEvent:_,fetchMoreRecommendationsVideosEvent:g,toggleFaveEvent:m.toggleFaveVideoEvent}}},651997:(e,t,o)=>{o.d(t,{createVideoModalAlbumsService:()=>h});var i=o(32489),n=o(377850),r=o(986125),s=o(178317),d=o(530040),a=o(224191),c=o(856289),l=o(32305),m=o(29593);const h=({domain:e})=>{const t=(0,r.createVideoGetAlbumsByVideoFx)({domain:e}),o=e.createEffect((e=>(0,l.handleExternalPlayerAddVideo)(e))),h=(0,r.createVideoAddToAlbumFx)({domain:e}),u=(0,r.createVideoRemoveFromAlbumFx)({domain:e}),v=e.createStore({}),p=e.createEffect((({controller:e,isAdded:t,query:o})=>{const i={controller:e,query:o};return t?u(i):h(i)})),_=e.createEvent(),g=(0,i.restore)(_,{}),w=e.createEvent(),S=e.createEvent(),k=e.createEvent(),b=e.createEvent(),f=e.createEvent(),I=(0,s.createEntitiesVideoAlbumService)({domain:e}),C=(0,d.createListsVideosAlbumsService)({domain:e,entitiesVideoAlbumService:I}),{$entitiesVideoAlbums:y}=I,{resetVideosAlbumsEvent:x}=C;y.reset(x);const E=e.createEvent(),A=(0,i.restore)(E,null),M=e.createEvent(),V=(0,i.restore)(M,null),L=e.createStore([]),j=e.createEvent(),O=(0,i.restore)(j,null),T=e.createEvent(),F=(0,i.restore)(T,!1),D=e.createEvent(),R=(0,i.restore)(D,null),P=e.createEvent(),B=e.createEvent(),H=(0,i.restore)(B,!1);(0,i.sample)({clock:[R,g],source:{$playlistEntityStore:g,$addedToMy:R},fn:({$playlistEntityStore:e,$addedToMy:t})=>t||Object.values(e).some((e=>e&&e.containsVideo)),target:H}),(0,i.sample)({clock:p,filter:({query:{album_id:e}})=>(0,m.isMyVideoAlbum)(e),fn:({isAdded:e})=>!e,target:D}),(0,i.sample)({clock:[p.done,p.fail],filter:e=>(0,m.isMyVideoAlbum)(e?.params.query.album_id)&&("error"in e||!e.result),fn:({params:{isAdded:e}})=>e,target:D});const N=(0,n.combineEvents)({events:{albumsByVideo:t.done,albums:C.fetchVideosAlbumsFx.done},reset:x});(0,i.sample)({clock:P,source:{ownerId:O},fn:({ownerId:e},t)=>Object.values(t).reduce(((t,o)=>{if((0,m.isServiceAlbumId)(o.id))return t;return t[(0,m.getFullAlbumId)({ownerId:e,albumId:o.id})]={id:o.id,title:o.title,containsVideo:o.added,isPrivate:1===o.private},t}),{}),target:_}),(0,i.sample)({clock:P,fn:e=>{const t=Object.values(e),o=t.findIndex((e=>(0,m.isMyVideoAlbum)(e.id)));return-1!==o&&t[o].added},target:D}),(0,i.sample)({clock:N,source:{videoEntities:y,ownerId:O},fn:({videoEntities:e,ownerId:t},{albumsByVideo:o})=>(0,m.mapAlbumsWithInclusionsToPlaylists)({albumsByVideo:o.result,albums:e,ownerId:t||0}),target:_});const{$listIds:$,$loading:U}=C.selectStores(O);return(0,i.sample)({clock:w,source:O,filter:e=>Boolean(e),fn:e=>({query:{owner_id:e||0,extended:1},controller:new AbortController,entityKey:e||0}),target:C.fetchVideosAlbumsFx}),(0,i.sample)({clock:S,source:O,filter:e=>Boolean(e),fn:e=>({entityKey:e,count:50}),target:C.fetchMoreVideosAlbumsEvent}),(0,i.sample)({clock:C.fetchVideosAlbumsFx.done,source:{ownerId:O,videoEntities:y,albumsByVideo:L,playlistEntityStore:g},filter:(e,{params:t})=>Boolean(t.query.offset),fn:({ownerId:e,albumsByVideo:t,playlistEntityStore:o},{result:i})=>{const n=(0,a.mapToEntity)({},i.items,(({id:t})=>(0,m.getFullAlbumId)({albumId:t,ownerId:e})));return{...o,...(0,m.mapAlbumsWithInclusionsToPlaylists)({albumsByVideo:t,albums:n,ownerId:e||0})}},target:_}),(0,i.sample)({clock:w,source:[A,V,O],filter:e=>e.every(Boolean),fn:([e,t,o])=>({query:{video_id:e||0,owner_id:t||0,target_id:o||0},controller:new AbortController}),target:t}),(0,i.sample)({clock:t.doneData,target:L}),(0,i.sample)({clock:x,fn:()=>({}),target:g}),(0,i.sample)({clock:k,source:[O,V,A],fn:([e,t,o],{album_id:i,isAdded:n,eventVideoParams:r})=>{const s=(0,m.getFullAlbumId)({albumId:i,ownerId:e});return{controller:new AbortController,fullId:s,query:{target_id:r?.viewerId??e??0,album_id:i,video_id:r?.videoId??o??0,owner_id:r?.ownerId??t??0},isAdded:n}},target:p}),(0,i.sample)({clock:b,source:[O,V,A],fn:([e,t,o],{id:i})=>{const n=(0,m.getFullAlbumId)({albumId:i,ownerId:e});return{controller:new AbortController,fullId:n,query:{target_id:e||0,album_id:i,video_id:o||0,owner_id:t||0},isAdded:!1}},target:p}),(0,i.sample)({clock:p,source:g,filter:(e,t)=>!(0,m.isMyVideoAlbum)(t.query.album_id),fn:(e,{query:t,isAdded:o})=>{const i={...e},n=(0,m.getFullAlbumId)({albumId:t.album_id,ownerId:t.target_id}),r=e[n];return r&&(i[n]={...r,containsVideo:!o}),i},target:_}),(0,i.sample)({clock:p,source:v,fn:(e,{controller:t,fullId:o})=>(e[o]?.abort(),{...e,[o]:t}),target:v}),(0,i.sample)({clock:[p.done,p.fail],source:g,filter:(e,t)=>("error"in t||!t.result)&&!(0,m.isMyVideoAlbum)(t.params.query.album_id),fn:(e,{params:{query:t,isAdded:o}})=>{const i={...e},n=(0,m.getFullAlbumId)({albumId:t.album_id,ownerId:t.owner_id}),r=e[n];return r&&(i[n]={...r,containsVideo:o}),i},target:_}),(0,i.sample)({clock:k,source:{playlists:g,ownerId:O},fn:({playlists:e,ownerId:t},{isAdded:o,album_id:i,albumTitle:n})=>{const r=(0,m.getFullAlbumId)({albumId:i,ownerId:t});(0,m.showPlaylistActionSnackbar)({ownerId:t||0,playlistId:i,playlistTitle:n||e[r]?.title,added:!o})}}),(0,i.sample)({clock:b,source:{ownerId:O,albumsByVideo:L,playlistEntityStore:g},fn:({ownerId:e,albumsByVideo:t,playlistEntityStore:o},i)=>({...(0,m.mapAlbumsWithInclusionsToPlaylists)({albumsByVideo:[...t,i.id],albums:{[(0,m.getFullAlbumId)({albumId:i.id,ownerId:e})]:i},ownerId:e||0}),...o}),target:_}),(0,i.sample)({clock:b,fn:()=>!0,target:H}),(0,i.sample)({clock:b,source:O,fn:(e,{id:t,title:o})=>{(0,m.showPlaylistActionSnackbar)({ownerId:e||0,playlistId:t,playlistTitle:o,added:!0})}}),(0,i.sample)({source:H,target:o}),(0,i.sample)({clock:f,filter:({isAdded:e})=>!Boolean(e),fn:()=>!0,target:D}),(0,i.sample)({clock:f,filter:({isAdded:e})=>!Boolean(e),fn:({isAdded:e,eventVideoParams:t})=>({isAdded:!!e,album_id:c.MY_VIDEO_ALBUM_ID,eventVideoParams:t}),target:k}),(0,i.sample)({clock:f,filter:({isAdded:e})=>Boolean(e),fn:()=>!1,target:D}),(0,i.sample)({clock:f,source:{ownerId:O,videoOwnerId:V,playlists:g,videoId:A},filter:(e,{isAdded:t})=>Boolean(t),fn:({ownerId:e,videoOwnerId:t,playlists:o,videoId:i},{eventVideoParams:n})=>{const r=Object.values(o).map((e=>e?.id)).filter((e=>e));return r.push(c.MY_VIDEO_ALBUM_ID),{query:{target_id:n?.viewerId??e??0,owner_id:n?.ownerId??t??0,video_id:n?.videoId??i??0,album_ids:r.join(",")},controller:new AbortController}},target:u}),(0,i.sample)({clock:f,source:{playlists:g},filter:(e,{isAdded:t})=>Boolean(t),fn:({playlists:e})=>{const t={...e};return Object.keys(t).forEach((e=>{const o=t[e];o&&(t[e]={...o,containsVideo:!1})})),t},target:_}),{setVideoId:E,setOwnerIdEvent:j,setVideoOwnerIdEvent:M,setAddedToMyEvent:D,setNeedsRefetch:T,setUpstreamPlaylists:P,togglePlaylistAddedEvent:k,createPlaylistEvent:b,playerAddEvent:f,fetchPlaylistsEvent:w,fetchMorePlaylistsEvent:S,resetVideosAlbumsEvent:x,$needsRefetch:F,$addedToMy:R,$playlistEntityStore:g,$videoAlbumsListIds:$,$videoAlbumsLoading:U,$videoAdded:H,setAddedEvent:B}}},355542:(e,t,o)=>{o.d(t,{createVideoModalContextService:()=>a});var i=o(87029),n=o(178317),r=o(750988),s=o(404965),d=o(44975);const a=({domain:e,entitiesGroupsService:t,entitiesUsersService:o})=>{const a=(0,i.createEntitiesVideoService)({domain:e,entitiesGroupsService:t,entitiesUsersService:o}),c=(0,n.createEntitiesVideoAlbumService)({domain:e}),l=(0,r.createListsVideosService)({domain:e,entitiesVideoService:a}),m=(0,d.createOwnerService)({domain:e,entitiesGroupsService:t,entitiesUsersService:o}),h=(0,s.createPlaylistService)({domain:e,entitiesVideoAlbumsService:c,listsVideosService:l,ownerService:m});return{$videosIds:h.$videosIds,$videoEntities:a.$entitiesVideo,$playlistData:h.$playlistData,$count:h.$videosCount,$error:h.$videosError,$loading:h.$videosLoading,$fullyLoaded:h.$videosFullyLoaded,processPlaylistEvent:h.processPlaylistEvent,resetStore:h.resetPlaylistEvent}}},687088:(e,t,o)=>{o.d(t,{createVideoModalEpisodeService:()=>n});var i=o(32489);const n=({domain:e})=>{const t=e.createEvent(),o=(0,i.restore)(t,null),n=e.createEvent();return{changeActiveEpisode:t,updateScrollHeight:n,$activeEpisode:o,$scrollHeight:(0,i.restore)(n,null)}}},397469:(e,t,o)=>{o.d(t,{createVideoModalFaveService:()=>s});var i=o(32489),n=o(188386),r=o(32305);const s=({onAddFave:e,onRemoveFave:t,domain:o})=>{const s=o.createEvent(),d=(0,i.restore)(s,null),a=o.createEvent(),c=(0,i.restore)(a,null),l=o.createEvent(),{faveAddVideoFx:m,faveRemoveVideoFx:h}=(0,n.createEntitiesFaveVideoService)({domain:o}),u=o.createStore({}),v=o.createEffect((({controller:e,currentFave:t,query:o})=>{const i={controller:e,query:o};return t?h(i):m(i)}));return(0,i.sample)({clock:l,source:d,fn:(e,{ownerId:t,id:o,ref:i,source:n,accessKey:r})=>({controller:new AbortController,currentFave:!!e,query:{owner_id:t,id:o,ref:i,source:n,access_key:r}}),target:v}),u.on(v,((e,{controller:t,query:o})=>{const i=o.id;return e[i]?.abort(),{...e,[i]:t}})),(0,i.sample)({clock:v,source:d,fn:e=>!e,target:s}),(0,i.sample)({clock:[v.done,v.fail],source:{isFavorite:d,abortController:u},filter:(e,t)=>("error"in t||!t.result)&&!t.params?.controller?.signal?.aborted,fn:({isFavorite:e})=>!e,target:s}),(0,i.sample)({clock:m.done,target:e}),(0,i.sample)({clock:h.done,fn:()=>({rollbackCallback:e=>{(0,r.handleToggleFavorite)(e)}}),target:t}),u.on([v.done,v.fail],((e,{params:t})=>{if(t?.controller?.signal?.aborted)return e;const o=t.query.id,i={...e};return delete i[o],i})),{$isFavorite:d,$canAddToFavorite:c,setIsFavoriteEvent:s,setCanAddToFavorite:a,toggleFaveEvent:l}}},895884:(e,t,o)=>{o.d(t,{createVideoModalHideAuthorService:()=>s});var i=o(32489),n=o(986125),r=o(468073);const s=({domain:e,videoModalSubscribeService:t,onAuthorHide:o})=>{const{$isSubscriptionHidden:s}=t,d=(0,n.createVideoSubscribeHideAuthor)({domain:e}),a=(0,n.createVideoSubscribeUnhideAuthor)({domain:e}),c=e.createStore({}),l=e.createEvent(),m=e.createEffect((({controller:e,currentHide:t,query:o})=>{const i={controller:e,query:o};return t?a(i):d(i)}));return(0,i.sample)({clock:l,source:s,fn:(e,{id:t,name:o})=>{const i=r.Ranges.convertOwnerIdToGroupId(t);return{controller:new AbortController,currentHide:e,fullId:i,name:o,query:{author_ids:String(t)}}},target:m}),(0,i.sample)({clock:m,source:c,fn:(e,{controller:t,fullId:o})=>(e[o]?.abort(),{...e,[o]:t}),target:c}),(0,i.sample)({clock:m,fn:({currentHide:e})=>!e,target:s}),(0,i.sample)({clock:[m.done,m.fail],filter:e=>"error"in e||!e.result,fn:({params:e})=>e.currentHide,target:s}),(0,i.sample)({clock:[m.done,m.fail],source:c,fn:(e,{params:t})=>{const{[t.fullId]:o,...i}=e;return i},target:c}),(0,i.sample)({clock:[m.done],filter:({params:e})=>!e.currentHide,fn:({params:e})=>e.name,target:o}),{toggleHideAuthorEvent:l}}},954842:(e,t,o)=>{o.d(t,{createVideoModalModerService:()=>n});var i=o(32489);const n=({domain:e})=>{const t=e.createEvent(),o=(0,i.restore)(t,!1),n=e.createEvent(),r=(0,i.restore)(n,!1),s=e.createEvent(),d=(0,i.restore)(s,!1),a=e.createEvent(),c=(0,i.restore)(a,!1),l=e.createEvent(),m=(0,i.restore)(l,!1),h=e.createEvent(),u=(0,i.restore)(h,!1),v=e.createEvent(),p=(0,i.restore)(v,!1),_=e.createEvent();return{changeSoundRestriction:t,changeEmbedRestriction:n,changeAd:s,changeAdCopy:a,changeAccessByIP:l,changeClaim:h,changeLicense:v,changePin:_,$isSoundRestricted:o,$isEmbedRestricted:r,$hasNoAd:d,$hasNoAdCopy:c,$hasAccessByIP:m,$isClaimed:u,$isLicensed:p,$isPinned:(0,i.restore)(_,!1)}}},967557:(e,t,o)=>{o.d(t,{createVideoModalService:()=>r});var i=o(32489),n=o(53313);const r=({domain:e})=>{const t=t=>{const o=e.createEvent(),n=e.createStore(t);return(0,i.sample)({clock:o,target:n}),[n,o]},[o,r]=t(!1),[s,d]=t(null),a=e.createEvent(),{likesAddFx:c,likesDeleteFx:l}=(0,n.createEntitiesLikesService)({domain:e}),m=e.createStore({}),h=e.createEffect((({controller:e,currentIsLiked:t,query:o})=>{const i={controller:e,query:o};return t?l(i):c(i)})),u=e.createEvent(),[v,p]=t(null),[_,g]=t(""),[w,S]=t(null),[k,b]=t(null),[f,I]=t(null),[C,y]=t(null),[x,E]=t(null),[A,M]=t(null),[V,L]=t(null),[j,O]=t(null),[T,F]=t(null),[D,R]=t(null);(0,i.sample)({clock:u,fn:({isLiked:e})=>e,target:r}),(0,i.sample)({clock:u,fn:({numberOfLikes:e})=>e,target:d}),(0,i.sample)({clock:a,source:o,fn:(e,{params:t})=>({controller:new AbortController,currentIsLiked:!!e,query:t}),target:h}),m.on(h,((e,{controller:t,query:o})=>{const i=o.item_id;return e[i]?.abort(),{...e,[i]:t}}));const P=(e,t)=>{const o=t??0;return Math.max(e?o-1:o+1,0)};return(0,i.sample)({clock:a,source:{isLiked:o,numberOfLikes:s},fn:({isLiked:e,numberOfLikes:t})=>({isLiked:!e,numberOfLikes:P(e,t)}),target:u}),(0,i.sample)({clock:[h.done,h.fail],source:{isLiked:o,numberOfLikes:s},filter:(e,t)=>("error"in t||!t.result)&&!t.params?.controller?.signal?.aborted,fn:({isLiked:e,numberOfLikes:t})=>({isLiked:!e,numberOfLikes:P(e,t)}),target:u}),m.on([h.done,h.fail],((e,{params:t})=>{if(t?.controller?.signal?.aborted)return e;const o=t.query.item_id,i={...e};return delete i[o],i})),{$isLiked:o,$numberOfLikes:s,$title:v,$description:_,$canAddToGroups:w,$canViewStatistic:k,$canReport:f,$canEditVideo:C,$canDeleteVideo:x,$canDownloadVideo:A,$isShortVideo:V,$isActiveLive:j,$isExternal:T,$videoType:D,setIsLikedEvent:r,setLikesEvent:u,toggleLikesEvent:a,setNumberOfLikesEvent:d,setTitleEvent:p,setDescriptionEvent:g,setCanAddToGroupsEvent:S,setCanViewStatisticEvent:b,setCanReportEvent:I,setCanEditVideoEvent:y,setCanDeleteVideoEvent:E,setCanDownloadVideo:M,setIsShortVideoEvent:L,setIsActiveLiveEvent:O,setIsExternalEvent:F,setVideoTypeEvent:R}}},496831:(e,t,o)=>{o.d(t,{createVideoModalSubscribeService:()=>d});var i=o(32489),n=o(535851),r=o(490399),s=o(468073);const d=({onAddSubscribe:e,onDeleteSubscribe:t,domain:o})=>{const d=o.createEvent(),a=(0,i.restore)(d,!1),c=o.createEvent(),l=(0,i.restore)(c,!1),m=o.createEvent(),h=(0,i.restore)(m,!1),u=o.createEvent(),{groupsJoinFx:v,groupsLeaveFx:p}=(0,n.createEntitiesGroupsSubscribeService)({domain:o}),{friendsDeleteFx:_,friendsAddFx:g}=(0,r.createEntitiesFriendsSubscribeService)({domain:o}),w=o.createStore({}),S=o.createEffect((({controller:e,currentSubscribe:t,query:o})=>{if("group_id"in o){const i={controller:e,query:o};return t?p(i):v(i)}const i={controller:e,query:o};return t?_(i):g(i)}));return(0,i.sample)({clock:u,source:a,fn:(e,{authorId:t})=>{const o={controller:new AbortController,currentSubscribe:!!e};return s.Ranges.isGroupId(t)?{...o,query:{group_id:s.Ranges.convertGroupIdToOwnerId(t)}}:{...o,query:{user_id:t}}},target:S}),w.on(S,((e,{controller:t,query:o})=>{const i="group_id"in o?o.group_id:o.user_id;return e[i]?.abort(),{...e,[i]:t}})),(0,i.sample)({clock:S,source:a,fn:e=>!e,target:d}),(0,i.sample)({clock:[S.done,S.fail],source:{isSubscribe:a,abortController:w},filter:(e,t)=>("error"in t||!t.result)&&!t.params?.controller?.signal?.aborted,fn:({isSubscribe:e})=>!e,target:d}),(0,i.sample)({clock:[v.done,g.done],target:e}),(0,i.sample)({clock:[p.done,_.done],target:t}),w.on([S.done,S.fail],((e,{params:t})=>{if(t?.controller?.signal?.aborted)return e;const o="group_id"in t.query?t.query.group_id:t.query.user_id,i={...e};return delete i[o],i})),{$isSubscribe:a,$canSubscribe:l,$isSubscriptionHidden:h,setIsSubscribeEvent:d,setCanSubscribeEvent:c,setIsSubscriptionHiddenEvent:m,toggleSubscribeEvent:u}}},970466:(e,t,o)=>{o.d(t,{entitiesGroupsService:()=>S,entitiesUsersService:()=>k,videoModalAlbumsService:()=>I,videoModalContextService:()=>x,videoModalEpisodeService:()=>A,videoModalFaveService:()=>b,videoModalHideAuthorService:()=>M,videoModalModerService:()=>E,videoModalRecommendationsService:()=>y,videoModalService:()=>f,videoModalSubscribeService:()=>C});var i=o(32489),n=o(12563),r=o(669557),s=o(869071),d=o(540462),a=o(967557),c=o(895884),l=o(651997),m=o(397469),h=o(496831),u=o(84971),v=o(355542),p=o(954842),_=o(687088),g=o(600960);const w=(0,i.createDomain)("videoModal"),S=(0,n.createEntitiesGroupsService)({domain:w}),k=(0,r.createEntitiesUsersService)({domain:w}),b=(0,m.createVideoModalFaveService)({domain:w,onAddFave:g.showFaveSnackbarFx,onRemoveFave:g.showUnfaveSnackbarFx}),f=(0,a.createVideoModalService)({domain:w}),I=(0,l.createVideoModalAlbumsService)({domain:w}),C=(0,h.createVideoModalSubscribeService)({onAddSubscribe:g.showSubscribeSnackbarFx,onDeleteSubscribe:g.showUnsubscribeSnackbarFx,domain:w}),y=(0,u.createRecommendationsService)({domain:w,entitiesGroupsService:S,entitiesUsersService:k,onAddFave:g.showFaveSnackbarFx,onRemoveFave:g.showUnfaveSnackbarFx}),x=(0,v.createVideoModalContextService)({domain:w,entitiesGroupsService:S,entitiesUsersService:k}),E=(0,p.createVideoModalModerService)({domain:w}),A=(0,_.createVideoModalEpisodeService)({domain:w}),M=(0,d.partConfigEnabled)("video_menu_hide_author")?(0,c.createVideoModalHideAuthorService)({domain:w,videoModalSubscribeService:C,onAuthorHide:g.showHideAuthorSnackbarFx}):void 0;(0,s.connectTrackTmrGroupsJoin)(S.groupsJoinFx)},600960:(e,t,o)=>{o.d(t,{showFaveSnackbarFx:()=>n.showFaveSnackbarFx,showHideAuthorSnackbarFx:()=>r.showHideAuthorSnackbarFx,showSubscribeSnackbarFx:()=>d.showSubscribeSnackbarFx,showUnfaveSnackbarFx:()=>i.showUnfaveSnackbarFx,showUnsubscribeSnackbarFx:()=>s.showUnsubscribeSnackbarFx});var i=o(590305),n=o(365056),r=o(12821),s=o(233651),d=o(73484)},365056:(e,t,o)=>{o.d(t,{showFaveSnackbarFx:()=>h});var i=o(474848),n=o(866467),r=o(432465),s=o(540462),d=o(32489),a=o(133646),c=o(489313),l=o(373080),m=o(856289);const h=(0,d.createEffect)((()=>{const e=(0,s.partConfigEnabled)("video_bookmarks_renaming_to_watch_later"),t=(0,n.langLink)(m.BOOKMARKS_URL,(0,n.getLang)("fave_video_added")),o=e?{text:(0,n.getLang)("video_added_to_watch_later"),before:{content:(0,i.jsx)(a.Icon28ClockOutline,{})},action:"my_bookmarks"!==window.cur?.section_id?{label:(0,n.getLang)("global_open_section"),onClick:()=>window.location.href=m.BOOKMARKS_URL}:void 0}:{text:(0,i.jsx)(l.InnerHTML,{children:t}),before:{content:(0,i.jsx)(c.Icon28CheckCircleOutline,{})}};(0,r.showSnackbar)(o)}))},12821:(e,t,o)=>{o.d(t,{showHideAuthorSnackbarFx:()=>a});var i=o(474848),n=o(866467),r=o(432465),s=o(32489),d=o(76449);const a=(0,s.createEffect)((e=>{(0,r.showSnackbar)({text:(0,n.getLang)("video_menu_hide_author_snackbar_message").replace("{name}",e),before:{content:(0,i.jsx)(d.Icon24CheckCircleOutline,{})}})}))},73484:(e,t,o)=>{o.d(t,{showSubscribeSnackbarFx:()=>a});var i=o(474848),n=o(866467),r=o(432465),s=o(32489),d=o(76449);const a=(0,s.createEffect)((()=>{(0,r.showSnackbar)({text:(0,n.getLang)("video_modal_subscribe_to_author_snackbar"),before:{content:(0,i.jsx)(d.Icon24CheckCircleOutline,{})}})}))},590305:(e,t,o)=>{o.d(t,{showUnfaveSnackbarFx:()=>m});var i=o(474848),n=o(866467),r=o(432465),s=o(540462),d=o(32489),a=o(133646),c=o(858583),l=o(373594);const m=(0,d.createEffect)((e=>{const t=(0,s.partConfigEnabled)("video_bookmarks_renaming_to_watch_later")?{text:(0,n.getLang)("video_deleted_from_my_watch_later"),before:{content:(0,i.jsx)(a.Icon28ClockOutline,{})},action:e.rollbackCallback?{label:(0,n.getLang)("global_cancel"),onClick:(t,o)=>{e.rollbackCallback&&e.rollbackCallback(l.FAVORITE_SOURCES.SNACKBAR),(0,r.hideSnackbar)(o)}}:void 0}:{text:(0,n.getLang)("video_deleted_from_my_bookmarks"),before:{content:(0,i.jsx)(c.Icon28UnfavoriteOutline,{})}};(0,r.showSnackbar)(t)}))},233651:(e,t,o)=>{o.d(t,{showUnsubscribeSnackbarFx:()=>a});var i=o(474848),n=o(866467),r=o(432465),s=o(32489),d=o(76449);const a=(0,s.createEffect)((()=>{(0,r.showSnackbar)({text:(0,n.getLang)("video_modal_unsubscribe_to_author_snackbar"),before:{content:(0,i.jsx)(d.Icon24CheckCircleOutline,{})}})}))},986918:(e,t,o)=>{o.d(t,{fixVideoPlayerScrollPopover:()=>i});const i={onShownChange:e=>{if(e){const e=window.Videoview?.getPlayerObject();e?.el&&(e.el.scrollTop=0)}},restoreFocus:!1}},454711:(e,t,o)=>{o.d(t,{handleOnlyCtrlClickOnLink:()=>i});const i=e=>{e.ctrlKey||e.metaKey||e.preventDefault()}},406805:(e,t,o)=>{o.d(t,{fixVideoPlayerScrollPopover:()=>i.fixVideoPlayerScrollPopover,handleOnlyCtrlClickOnLink:()=>n.handleOnlyCtrlClickOnLink,initPlayerEventListeners:()=>r.initPlayerEventListeners,removePlayerEventListeners:()=>r.removePlayerEventListeners});var i=o(986918),n=o(454711),r=o(185933)},185933:(e,t,o)=>{o.d(t,{initPlayerEventListeners:()=>d,removePlayerEventListeners:()=>a});var i=o(977780),n=o(970466);function r(e){n.videoModalFaveService.toggleFaveEvent(e.detail)}function s(e){n.videoModalAlbumsService.playerAddEvent(e.detail)}function d(){window.addEventListener(i.VideoPlayerSyncEvents.TOGGLE_FAVORITE,r),window.addEventListener(i.VideoPlayerSyncEvents.TOGGLE_ADDING_TO_MY_VIDEOS,s)}function a(){window.removeEventListener(i.VideoPlayerSyncEvents.TOGGLE_FAVORITE,r),window.removeEventListener(i.VideoPlayerSyncEvents.TOGGLE_ADDING_TO_MY_VIDEOS,s)}},608695:(e,t,o)=>{o.d(t,{SubscribeActions:()=>u});var i=o(474848),n=o(296540),r=o(510017),s=o(434250),d=o(78060),a=o(352203),c=o(106962),l=o(507852),m=o(454154),h=o(866467);const u=({isSubscriptionHidden:e,onHideAuthorClick:t,onSubscribeVideoAuthor:o})=>{const u=(0,n.useId)();return(0,i.jsx)(l.DropdownActionSheet,{placement:"bottom-end","aria-labelledby":u,content:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.DropdownActionSheet.Item,{keepOpen:!0,onClick:t,before:e?(0,i.jsx)(r.Icon20ViewOutline,{}):(0,i.jsx)(s.Icon20HideOutline,{}),children:e?(0,h.getLang)("video_menu_show_author"):(0,h.getLang)("video_menu_hide_author")}),(0,i.jsx)(l.DropdownActionSheet.Item,{onClick:o,before:(0,i.jsx)(d.Icon20MinusSquareOutline,{}),children:(0,h.getLang)("video_menu_unsubscribe")})]}),children:(0,i.jsx)(m.Button,{id:u,mode:"secondary",size:"m","data-testid":"video_modal_subscribe_actions_button",before:(0,i.jsx)(a.Icon24NotificationOutline,{}),after:(0,i.jsx)(c.Icon12Dropdown,{}),children:(0,h.getLang)("video_view_subscribed_msg")})})}},79464:(e,t,o)=>{o.d(t,{SubscribeActions:()=>i.SubscribeActions});var i=o(608695)},301406:(e,t,o)=>{o.d(t,{CircleIconSkeleton:()=>r});var i=o(474848),n=o(157643);const r=({size:e=24})=>(0,i.jsx)(n.Skeleton,{borderRadius:e/2,height:e,width:e})},523570:(e,t,o)=>{o.d(t,{CircleIconSkeleton:()=>i.CircleIconSkeleton});var i=o(301406)},671990:(e,t,o)=>{o.d(t,{HeaderSkeleton:()=>d});var i=o(474848),n=o(557992),r=o(591378),s=o(157643);const d=({count:e=2})=>(0,i.jsx)(n.Header,{children:(0,i.jsx)(r.Grid,{spacing:12,columns:e,children:new Array(e).fill(null).map(((e,t)=>(0,i.jsx)(r.Grid.Item,{children:(0,i.jsx)(s.Skeleton,{borderRadius:4,height:20,width:122})},t)))})})},474758:(e,t,o)=>{o.d(t,{HeaderSkeleton:()=>i.HeaderSkeleton});var i=o(671990)},657576:(e,t,o)=>{o.d(t,{HorizontalAuthorsScroll:()=>c});var i=o(474848),n=o(8520),r=o(753457),s=o(213338),d=o(157643),a=o(581796);const c=({count:e=24})=>(0,i.jsx)(r.HorizontalScroll,{children:(0,i.jsx)("div",{className:a.default.content,children:(0,n.createArray)(e).map((e=>(0,i.jsx)(s.HorizontalCell,{size:"m",header:(0,i.jsx)(d.Skeleton,{width:80,height:13}),children:(0,i.jsx)(d.Skeleton,{width:72,height:72,circle:!0})},e)))})})},562773:(e,t,o)=>{o.d(t,{HorizontalAuthorsScroll:()=>i.HorizontalAuthorsScroll});var i=o(657576)},900796:(e,t,o)=>{o.d(t,{HorizontalBlockVideoCardsSkeleton:()=>a});var i=o(474848),n=o(303800),r=o(591378),s=o(82908),d=o(474758);const a=({headerItemsCount:e,withAvatar:t=!1,count:o=8})=>(0,i.jsxs)(i.Fragment,{children:[void 0!==e&&(0,i.jsx)(d.HeaderSkeleton,{count:e}),(0,i.jsx)(n.Div,{children:(0,i.jsx)(r.Grid,{spacing:12,columns:o,children:new Array(o).fill(null).map(((e,o)=>(0,i.jsx)(r.Grid.Item,{children:(0,i.jsx)(s.VideoCardSkeleton,{withAvatar:t})},o)))})})]})},201480:(e,t,o)=>{o.d(t,{HorizontalBlockVideoCardsSkeleton:()=>i.HorizontalBlockVideoCardsSkeleton});var i=o(900796)},961920:(e,t,o)=>{o.d(t,{HorizontalMiniVideoCardListSkeleton:()=>r});var i=o(474848),n=o(823107);const r=({count:e=10,...t})=>(0,i.jsx)(i.Fragment,{children:new Array(e).fill(null).map(((e,o)=>(0,i.jsx)(n.HorizontalMiniVideoCardSkeleton,{...t},o)))})},469071:(e,t,o)=>{o.d(t,{HorizontalMiniVideoCardListSkeleton:()=>i.HorizontalMiniVideoCardListSkeleton});var i=o(961920)},317664:(e,t,o)=>{o.d(t,{HorizontalMiniVideoCardSkeleton:()=>d});var i=o(474848),n=o(260546),r=o(157643),s=o(303800);const d=({cardWidth:e,cardHeight:t=72,titleWidth:o=140,ownerNameWidth:d=120,additionalInfoWidth:a=140,textSkeletonsHeight:c,extraTitleRowWidth:l,textVerticalPadding:m,textHorizontalPadding:h})=>(0,i.jsxs)(n.SimpleCell,{before:(0,i.jsx)(r.Skeleton,{borderRadius:10,height:t,width:e}),subtitle:(0,i.jsx)(s.Div,{mode:h?"vertical":"horizontal",spacing:h,paddingTop:m,paddingBottom:m,children:(0,i.jsx)(r.Skeleton,{borderRadius:4,height:c??12,width:a})}),extraSubtitle:(0,i.jsx)(s.Div,{mode:h?"vertical":"horizontal",spacing:h,paddingTop:m,paddingBottom:m,children:(0,i.jsx)(r.Skeleton,{borderRadius:4,height:c??12,width:d})}),disabled:!0,children:[(0,i.jsx)(s.Div,{mode:h?"vertical":"horizontal",spacing:h,paddingTop:m,paddingBottom:m,children:(0,i.jsx)(r.Skeleton,{borderRadius:4,height:c??15,width:o})}),l&&(0,i.jsx)(s.Div,{mode:h?"vertical":"horizontal",spacing:h,paddingTop:m,paddingBottom:m,children:(0,i.jsx)(r.Skeleton,{borderRadius:4,height:c??15,width:l})})]})},823107:(e,t,o)=>{o.d(t,{HorizontalMiniVideoCardSkeleton:()=>i.HorizontalMiniVideoCardSkeleton});var i=o(317664)},994558:(e,t,o)=>{o.d(t,{ShortVideoCardGridSkeleton:()=>c});var i=o(474848),n=o(303800),r=o(591378),s=o(883075),d=o(8520),a=o(885741);const c=({count:e=30})=>{const t=(0,s.useListAdaptivityShortVideoColumns)();return(0,i.jsx)(n.Div,{children:(0,i.jsx)(r.Grid,{columns:t,rowSpacing:12,columnSpacing:12,children:(0,d.createArray)(e||1).map(((e,t)=>(0,i.jsx)(r.Grid.Item,{children:(0,i.jsx)(a.ShortVideoCardSkeleton,{})},t)))})})}},505592:(e,t,o)=>{o.d(t,{ShortVideoCardGridSkeleton:()=>i.ShortVideoCardGridSkeleton});var i=o(994558)},654256:(e,t,o)=>{o.d(t,{TabsSkeleton:()=>d});var i=o(474848),n=o(557992),r=o(591378),s=o(157643);const d=({count:e=6})=>(0,i.jsx)(n.Header,{children:(0,i.jsx)(r.Grid,{spacing:6,columns:e,children:new Array(e).fill(null).map(((e,t)=>(0,i.jsx)(r.Grid.Item,{children:(0,i.jsx)(s.Skeleton,{borderRadius:8,height:24,width:84})},t)))})})},528003:(e,t,o)=>{o.d(t,{TabsSkeleton:()=>i.TabsSkeleton});var i=o(654256)},300208:(e,t,o)=>{o.d(t,{VideoCardGridSkeleton:()=>a});var i=o(474848),n=o(591378),r=o(82908),s=o(170810),d=o(195340);const a=({count:e=16,withAvatar:t=!1,singleLineTitle:o=!1})=>{const a=(0,s.useListAdaptivityColumns)();return(0,i.jsx)(n.Grid,{className:d.default.skeleton,columns:a,rowSpacing:24,columnSpacing:12,children:new Array(e).fill(null).map(((e,s)=>(0,i.jsx)(n.Grid.Item,{children:(0,i.jsx)(r.VideoCardSkeleton,{withAvatar:t,singleLineTitle:o})},s)))})}},327210:(e,t,o)=>{o.d(t,{VideoCardGridSkeleton:()=>i.VideoCardGridSkeleton});var i=o(300208)},138007:(e,t,o)=>{o.d(t,{CircleIconSkeleton:()=>i.CircleIconSkeleton,HorizontalAuthorsScroll:()=>n.HorizontalAuthorsScroll,HorizontalBlockVideoCardsSkeleton:()=>r.HorizontalBlockVideoCardsSkeleton,HorizontalMiniVideoCardListSkeleton:()=>s.HorizontalMiniVideoCardListSkeleton,HorizontalMiniVideoCardSkeleton:()=>d.HorizontalMiniVideoCardSkeleton,ShortVideoCardGridSkeleton:()=>l.ShortVideoCardGridSkeleton,TabsSkeleton:()=>a.TabsSkeleton,VideoCardGridSkeleton:()=>c.VideoCardGridSkeleton});var i=o(523570),n=(o(474758),o(562773)),r=o(201480),s=o(469071),d=o(823107),a=o(528003),c=o(327210),l=o(505592)},82908:(e,t,o)=>{o.d(t,{VideoCardSkeleton:()=>r});var i=o(474848),n=o(346568);const r=({withAvatar:e=!1,singleLineTitle:t=!1})=>(0,i.jsxs)("div",{className:"VideoCardSkeleton__container",children:[(0,i.jsx)(n.Skeleton,{className:"VideoCardSkeleton__thumbnail",borderRadius:8}),(0,i.jsxs)("div",{className:"VideoCardSkeleton__info",children:[e&&(0,i.jsx)(n.Skeleton,{className:"VideoCardSkeleton__avatar",width:36,height:36,circle:!0}),(0,i.jsxs)("div",{className:"VideoCardSkeleton__innerWrapper",children:[(0,i.jsx)(n.Skeleton,{className:"VideoCardSkeleton__title",fontSize:14}),!t&&(0,i.jsx)(n.Skeleton,{className:"VideoCardSkeleton__title VideoCardSkeleton__title--secondLine",fontSize:14}),(0,i.jsx)(n.Skeleton,{className:"VideoCardSkeleton__author",fontSize:13}),(0,i.jsx)(n.Skeleton,{className:"VideoCardSkeleton__meta",fontSize:13})]})]})]})},541864:(e,t,o)=>{var i;o.d(t,{MARKET_BASE_URL:()=>c,MARKET_ITEM_CREATE_EVENT:()=>r,MARKET_ITEM_DELETE_EVENT:()=>n,MARKET_ITEM_UPDATE_EVENT:()=>s,MARKET_SERVICE_UPDATE_EVENT:()=>d,MarketType:()=>i,RUSSIA_ID:()=>a}),function(e){e[e.Disabled=0]="Disabled",e[e.Base=1]="Base",e[e.Pro=2]="Pro"}(i||(i={}));const n="MarketItemDelete",r="MarketItemCreate",s="MarketItemUpdate",d="MarketServiceUpdate",a=1,c="/market"},717433:(e,t,o)=>{o.d(t,{dispatchItemDeleteEvent:()=>n});var i=o(541864);const n=e=>{window.dispatchEvent(new CustomEvent(i.MARKET_ITEM_DELETE_EVENT,{detail:e}))}},369370:(e,t,o)=>{o.d(t,{mapVideoFullToVideoCardItem:()=>p});var i=o(8520),n=o(641495),r=o(172479),s=o(854950),d=o(671112),a=o(826619),c=o(222062),l=o(608802),m=o(857551);const h=e=>{const{image:t=[]}=e;let o=t.filter((e=>!e.with_padding));return o.length||(o=t),(0,i.getPhotoSize)(o,(0,s.getImageMinWidth)(240))?.url},u=e=>{const t=e.title||"",o=e.subtitle||"";return"music_video"===e.type?`${t} ${o}`:t},v=(e,t)=>{if("music_video"===e.type&&e?.main_artists){const t=e.main_artists[0];return{name:t.name||"",href:(0,r.getOwnerUrl)(t),...(0,d.getArtistPhotos)(t)}}return t?{...t,name:(0,n.getOwnerName)(t),href:(0,r.getOwnerUrl)(t,(0,d.getOwnerVideosPageBasePath)()),verified:!!t.verified&&1===t.verified,is_nft:(0,c.checkOwnerIsNFT)(t)}:{name:"",href:""}},p=(e,t)=>({title:u(e),owner:{...v(e,t),badge:(0,l.getVerifiedBadge)(t)},isPrivacyLocked:(0,m.isPrivacyLocked)(e.privacy_view),isLive:(0,d.isLiveVideo)(e),duration:e.duration,viewedDuration:e.viewed_duration,badgeText:e.platform,trailerSrc:e.trailer?.mp4_360,thumbSrc:h(e),restriction:(0,m.mapRestrictions)(e.restriction),additionalInfo:(0,a.getAdditionalInfo)(e),description:e.description,isInteractive:Boolean(e.interactive_info)})},343825:(e,t,o)=>{o.d(t,{VideoCommentCreationService:()=>m});var i=o(331635),n=o(327813),r=o(132028),s=o(882044),d=o(951652),a=o(873900),c=o(607417),l=o(800227);class m{async createComment(e){if(!this.authService.userId)return;const t={video_id:e.videoId,owner_id:e.ownerId,from_group:(0,l.convertToBooleanParam)(e.isCommentFromGroup),reply_to_comment:e.replyToCommentId};e.stickerId?t.sticker_id=e.stickerId:(t.message=e.message,t.attachments=e.attachments);const o=await this.videoApi.createComment(t),i=e.fields??[];return await this.commentsProvider.fetch({ownerId:e.ownerId,commentId:o,fields:i},{}),(0,a.getIdentityRawId)({id:o,ownerId:this.authService.userId})}constructor(e,t,o){this.videoApi=e,this.commentsProvider=t,this.authService=o,(0,n.makeAutoObservable)(this)}}m=(0,i.__decorate)([r.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===s.VideoApi?Object:s.VideoApi,void 0===c.VideoCommentsProvider?Object:c.VideoCommentsProvider,void 0===d.AuthService?Object:d.AuthService])],m)},473905:(e,t,o)=>{o.d(t,{VideoCommentsDeletingService:()=>a});var i=o(331635),n=o(327813),r=o(132028),s=o(882044),d=o(361121);class a{async delete(e,t){const{commentId:o,ownerId:i}=e,r={owner_id:i,comment_id:(0,d.splitRawId)(o).itemId};this.videoCommentsDeletedMap.set(o,!0);try{const e=await this.videoApi.deleteComment(r,t);(0,n.runInAction)((()=>{this.videoCommentsDeletedMap.set(o,Boolean(e))}))}catch(e){throw(0,n.runInAction)((()=>{this.videoCommentsDeletedMap.set(o,!1)})),e}}async restore(e,t){const{commentId:o,ownerId:i}=e,r={owner_id:i,comment_id:(0,d.splitRawId)(o).itemId};this.videoCommentsDeletedMap.set(o,!1);try{const e=await this.videoApi.restoreComment(r,t);(0,n.runInAction)((()=>{this.videoCommentsDeletedMap.set(o,!Boolean(e))}))}catch(e){throw(0,n.runInAction)((()=>{this.videoCommentsDeletedMap.set(o,!0)})),e}}isDeleted(e){return this.videoCommentsDeletedMap.get(e)}clear(e){this.videoCommentsDeletedMap.delete(e)}constructor(e){this.videoApi=e,this.videoCommentsDeletedMap=new Map,(0,n.makeAutoObservable)(this)}}a=(0,i.__decorate)([r.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===s.VideoApi?Object:s.VideoApi])],a)},311127:(e,t,o)=>{o.d(t,{VideoCommentsEditingService:()=>a});var i=o(331635),n=o(327813),r=o(132028),s=o(882044),d=o(951652);class a{async editComment(e){if(!this.authService.userId)return;const t={comment_id:e.id,owner_id:e.ownerId,message:e.message,attachments:e.attachments};await this.videoApi.editComment(t);const o=await this.videoApi.getComment({owner_id:e.ownerId,comment_id:e.id}),{items:i}=o;return i[0]}constructor(e,t){this.videoApi=e,this.authService=t,(0,n.makeAutoObservable)(this)}}a=(0,i.__decorate)([r.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===s.VideoApi?Object:s.VideoApi,void 0===d.AuthService?Object:d.AuthService])],a)},903653:(e,t,o)=>{o.d(t,{VideoCommentsListProvider:()=>a});var i=o(331635),n=o(327813),r=o(132028),s=o(607417),d=o(212800);class a{createList(){return new d.VideoCommentsList(this.commentsProvider)}getList(e){const t=this.commentsListByVideo.get(e);if(t)return t;const o=this.createList();return this.commentsListByVideo.set(e,o),o}reset(){this.commentsListByVideo.clear()}constructor(e){this.commentsProvider=e,this.commentsListByVideo=new Map,(0,n.makeAutoObservable)(this)}}a=(0,i.__decorate)([r.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===s.VideoCommentsProvider?Object:s.VideoCommentsProvider])],a)},607417:(e,t,o)=>{o.d(t,{VideoCommentsProvider:()=>p});var i=o(331635),n=o(327813),r=o(132028),s=o(882044),d=o(81213),a=o(562587),c=o(800227),l=o(129021),m=o(476205),h=o(349773),u=o(473905),v=o(311127);class p{createFromApi(e,t=[]){const o=e=>{const o=new d.VideoComment(e,this.ownerStoreFactory.ensureByFields(t),this.likesService,this.deletingService,this.editingService);return this.commentsMap.set(o.rawId,o),this.deletingService.clear(o.rawId),o};return Array.isArray(e)?e.map(o):o(e)}getComment(e){return this.commentsMap.get(e)}async fetch(e,t){const o=e.fields??[],i=function(e){return"commentId"in e}(e)?await this.videoApi.getComment(p.getApiParamsOne(e),t):await this.videoApi.getComments(p.getApiParams(e),t),{count:n,can_post:r,groups:s,profiles:d,items:a}=i;this.groupsStoreFactory.ensureByFields(m.VideoGroupsStoreFactory.filterFields(o)).createFromApi(s),this.usersStoreFactory.ensureByFields(h.VideoUsersStoreFactory.filterFields(o)).createFromApi(d);return{count:n,items:this.createFromApi(a,o),can_post:r}}static getApiParams(e){return{video_id:e.videoId,owner_id:e.ownerId,count:e.count,offset:e.offset,sort:e.sort,need_likes:(0,c.convertToBooleanParam)(!0),extended:(0,c.convertToBooleanParam)(!0),fields:e.fields?.join(",")}}static getApiParamsOne(e){return{comment_id:e.commentId,owner_id:e.ownerId,extended:(0,c.convertToBooleanParam)(!0),fields:e.fields?.join(",")}}constructor(e,t,o,i,r,s,d){this.groupsStoreFactory=e,this.usersStoreFactory=t,this.ownerStoreFactory=o,this.likesService=i,this.deletingService=r,this.editingService=s,this.videoApi=d,this.commentsMap=new Map,(0,n.makeAutoObservable)(this)}}p=(0,i.__decorate)([r.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===m.VideoGroupsStoreFactory?Object:m.VideoGroupsStoreFactory,void 0===h.VideoUsersStoreFactory?Object:h.VideoUsersStoreFactory,void 0===a.VideoOwnerStoreFactory?Object:a.VideoOwnerStoreFactory,void 0===l.VideoLikesService?Object:l.VideoLikesService,void 0===u.VideoCommentsDeletingService?Object:u.VideoCommentsDeletingService,void 0===v.VideoCommentsEditingService?Object:v.VideoCommentsEditingService,void 0===s.VideoApi?Object:s.VideoApi])],p)},172539:(e,t,o)=>{o.d(t,{VideoCommentsReportService:()=>a});var i=o(331635),n=o(327813),r=o(132028),s=o(882044),d=o(361121);class a{static isVideoReportCommentParamsReason(e){return void 0===e||"number"==typeof e&&[0,1,2,4,5,6,8,9,10,11,12,13,15,27,41,42,43,101].includes(e)}async report(e){const{commentId:t,ownerId:o,reason:i,ref:n}=e,r={owner_id:o,comment_id:(0,d.splitRawId)(t).itemId,reason:this.changeReasonType(i),ref:n};try{await this.videoApi.reportComment(r)}catch(e){throw e}}changeReasonType(e){return a.isVideoReportCommentParamsReason(e)?e:void 0}constructor(e){this.videoApi=e,(0,n.makeAutoObservable)(this)}}a=(0,i.__decorate)([r.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===s.VideoApi?Object:s.VideoApi])],a)},81213:(e,t,o)=>{o.d(t,{VideoComment:()=>s});var i=o(327813),n=o(873900),r=o(498085);class s{static createRawId(e){return(0,n.getIdentityRawId)(e)}get rawId(){const{id:e,from_id:t}=this.data;return s.createRawId({id:e,ownerId:t})}get data(){return this._data}get owner(){return this.ownerStore.getById(this._data.from_id)}get parentOwner(){return this.ownerStore.getById(this._data.reply_to_user??0)}get isDeleted(){return Boolean(this.deletingService.isDeleted(this.rawId)||this._data.deleted)}get isEditing(){return this._isEditing}async edit(e){if(this._isEditing)throw new Error("Comment is already editing");this._isEditing=!0;try{const t=await this.editingService.editComment({id:this.data.id,...e});(0,i.runInAction)((()=>{this._data.text=t?.text??"",this._data.attachments=t?.attachments}))}finally{(0,i.runInAction)((()=>{this._isEditing=!1}))}}constructor(e,t,o,n,s){this._data=e,this.ownerStore=t,this.likesService=o,this.deletingService=n,this.editingService=s,this._isEditing=!1,this.likes=new r.VideoCommentLikes(this,this.likesService),(0,i.makeAutoObservable)(this)}}},498085:(e,t,o)=>{o.d(t,{VideoCommentLikes:()=>r});var i=o(327813),n=o(98710);class r{async toggleLike(e){const{optimistic:t,ownerId:o}=e,i={type:"video_comment",itemId:this.data.id,ownerId:o};this.controller?.abort(),this.controller=new AbortController,this.hasUserLikes?this.removeLike(i,t):this.addLike(i,t)}optimisticAddLike(e){this.data.likes&&(this.data.likes.count=e??this.data.likes.count+1,this.data.likes.user_likes=1)}optimisticRemoveLike(e){this.data.likes&&(this.data.likes.count=e??Math.max(this.data.likes.count-1,0),this.data.likes.user_likes=0)}async addLike(e,t){try{t&&this.optimisticAddLike();const o=await this.likesService.add(e,{signal:this.controller?.signal});(0,i.runInAction)((()=>{this.controller=null,this.optimisticAddLike(o.likes)}))}catch(e){!(0,n.isAbortError)(e)&&t&&this.optimisticRemoveLike()}}async removeLike(e,t){try{t&&this.optimisticRemoveLike();const o=await this.likesService.remove(e,{signal:this.controller?.signal});(0,i.runInAction)((()=>{this.controller=null,this.optimisticRemoveLike(o.likes)}))}catch(e){!(0,n.isAbortError)(e)&&t&&this.optimisticAddLike()}}get hasUserLikes(){return this.data.likes?.user_likes??0}get data(){return this.comment.data}constructor(e,t){this.comment=e,this.likesService=t,this.controller=null,(0,i.makeAutoObservable)(this)}}},212800:(e,t,o)=>{o.d(t,{VideoCommentsList:()=>n});var i=o(327813);class n{get count(){return this._count}get ids(){return this._ids}get isLoading(){return this._isLoading}get isLoadedFully(){return this._isLoadedFully}get isLoaded(){return Boolean(this.prevRequestParams)}get canPost(){return this._canPost}get order(){return this._order}dispose(){this.controller?.abort()}done(e,t){const{count:o=0,offset:i=0}=e,n=t.items.map((({rawId:e})=>e));return this._isLoadedFully=t.count<=i+o,this._count=t.count,this._ids=i?[...this._ids,...n]:n,this._canPost=Boolean(t.can_post),this._order=t.orders?.current_order??e.sort??"asc",this._isLoading=!1,this.controller=null,this.prevRequestParams=e,n}async addComment(e){this._ids.unshift(e)}async fetch(e,t=new AbortController){this.reset(),this.controller=t,this._isLoading=!0;const o=await this.request(e,t);return this.done(e,o)}async fetchMore(e=new AbortController){if(!this.prevRequestParams||this._isLoading||this._isLoadedFully)return;this.controller=e,this._isLoading=!0;const{count:t=0,offset:o=0}=this.prevRequestParams??{},i=o+t,n={...this.prevRequestParams,offset:i},r=await this.request(n,e);return this.done(n,r)}request(e,t){return this.commentsProvider.fetch(e,{signal:t.signal})}reset(){this.controller?.abort(),this.resetData()}resetData(){this._count=0,this._isLoading=!1,this._isLoadedFully=!1,this._ids=[],this.prevRequestParams=null,this.controller=null}constructor(e){this.commentsProvider=e,this._ids=[],this.prevRequestParams=null,this.controller=null,this._count=0,this._canPost=!0,this._order="asc",this._isLoading=!1,this._isLoadedFully=!1,(0,i.makeAutoObservable)(this)}}},562587:(e,t,o)=>{o.d(t,{VideoOwnerStoreFactory:()=>c});var i=o(331635),n=o(327813),r=o(132028),s=o(476205),d=o(349773),a=o(23893);class c{ensureByFields(e){const t=c.getKey(e);return this.stores.get(t)??this.create(t,e)}create(e,t=[]){const o=new a.VideoOwnerStore(this.videoGroupsStoreFactory.ensureByFields(s.VideoGroupsStoreFactory.filterFields(t)),this.videoUsersStoreFactory.ensureByFields(d.VideoUsersStoreFactory.filterFields(t)));return this.stores.set(e,o),o}static getKey(e){return[...new Set(e)].sort().join(",")}constructor(e,t){this.videoGroupsStoreFactory=e,this.videoUsersStoreFactory=t,this.stores=new Map,(0,n.makeAutoObservable)(this)}}c=(0,i.__decorate)([r.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===s.VideoGroupsStoreFactory?Object:s.VideoGroupsStoreFactory,void 0===d.VideoUsersStoreFactory?Object:d.VideoUsersStoreFactory])],c)},878728:(e,t,o)=>{o.d(t,{isAbortApiError:()=>r});var i=o(782399),n=o(285953);const r=e=>(0,i.isNetworkError)(e)&&(0,n.isRequestAbortError)(e.error)},98710:(e,t,o)=>{o.d(t,{isAbortError:()=>r});var i=o(804076),n=o(878728);const r=e=>(0,i.isApiNetworkError)(e)&&(0,n.isAbortApiError)(e)},804076:(e,t,o)=>{o.d(t,{isApiNetworkError:()=>i});const i=e=>!!e&&"object"==typeof e&&"type"in e&&"network_error"===e.type},285953:(e,t,o)=>{o.d(t,{isRequestAbortError:()=>i});const i=e=>e instanceof DOMException&&(20===e.code||"AbortError"===e.name)},80963:(e,t,o)=>{o.d(t,{createFriendsAddFx:()=>l,createFriendsAddListFx:()=>g,createFriendsDeleteBulkFx:()=>h,createFriendsDeleteFx:()=>m,createFriendsDeleteListFx:()=>w,createFriendsDeleteSubscriberFx:()=>b,createFriendsEditListFx:()=>S,createFriendsGetFollowersFx:()=>f,createFriendsGetFriendsDeletionSuggestionsFx:()=>a,createFriendsGetFx:()=>s,createFriendsGetListsFx:()=>n,createFriendsGetMutualFx:()=>x,createFriendsGetOnlineFx:()=>p,createFriendsGetRecentFx:()=>y,createFriendsGetRequestsFx:()=>u,createFriendsHideSuggestion:()=>E,createFriendsPrefetchCountersFx:()=>C,createFriendsPrefetchFx:()=>d,createFriendsPrefetchListsFx:()=>r,createFriendsPrefetchOnlineFx:()=>_,createFriendsPrefetchRecommendationsFx:()=>c,createFriendsPrefetchRequestsFx:()=>v,createFriendsRequestsToSubscribersFx:()=>I,createFriendsSearchFx:()=>k});var i=o(412554);const n=e=>(0,i.createApiEffect)("friends.getLists",e),r=e=>(0,i.createPrefetchEffect)("friends.getLists",e),s=e=>(0,i.createApiEffect)("friends.get",e),d=e=>(0,i.createPrefetchEffect)("friends.get",e),a=e=>(0,i.createApiEffect)("friends.getFriendsDeletionSuggestions",e),c=e=>(0,i.createPrefetchEffect)("friends.getRecommendations",e),l=e=>(0,i.createApiEffect)("friends.add",e),m=e=>(0,i.createApiEffect)("friends.delete",e),h=e=>(0,i.createApiEffect)("friends.deleteBulk",e),u=e=>(0,i.createApiEffect)("friends.getRequests",e),v=e=>(0,i.createPrefetchEffect)("friends.getRequests",e),p=e=>(0,i.createApiEffect)("friends.getOnline",e),_=e=>(0,i.createPrefetchEffect)("friends.getOnline",e),g=e=>(0,i.createApiEffect)("friends.addList",e),w=e=>(0,i.createApiEffect)("friends.deleteList",e),S=e=>(0,i.createApiEffect)("friends.editList",e),k=e=>(0,i.createApiEffect)("friends.search",e),b=e=>(0,i.createApiEffect)("friends.deleteSubscriber",e),f=e=>(0,i.createApiEffect)("friends.getFollowers",e),I=e=>(0,i.createApiEffect)("friends.requestsToSubscribers",e),C=e=>(0,i.createPrefetchEffect)("friends.getCounters",e),y=e=>(0,i.createApiEffect)("friends.getRecent",e),x=e=>(0,i.createApiEffect)("friends.getMutual",e),E=e=>(0,i.createApiEffect)("friends.hideSuggestion",e)},829014:(e,t,o)=>{o.d(t,{createLikesAddFx:()=>n,createLikesDeleteFx:()=>r});var i=o(412554);const n=e=>(0,i.createApiEffect)("likes.add",e),r=e=>(0,i.createApiEffect)("likes.delete",e)},756179:(e,t,o)=>{o.d(t,{useEntitiesStoreMap:()=>n});var i=o(293721);const n=(e,t)=>(0,i.useStoreMap)({store:e,keys:t,fn:(e,t)=>t.reduce(((t,o)=>(e[o]&&t.push(e[o]),t)),[])})},490399:(e,t,o)=>{o.d(t,{createEntitiesFriendsSubscribeService:()=>r});var i=o(80963),n=o(738371);const r=({domain:e})=>{const t=(0,i.createFriendsAddFx)({domain:e}),o=(0,i.createFriendsDeleteFx)({domain:e}),r=e.createStore({});return(0,n.sampleEntityUpdater)({store:r,fx:t,key:e=>String(e.params.query.user_id),fn:(e,t)=>Boolean(t.result)}),(0,n.sampleEntityUpdater)({store:r,fx:o,key:e=>String(e.params.query.user_id),fn:(e,t)=>Boolean(t.result)}),{$entitiesFriendsSubscribe:r,friendsAddFx:t,friendsDeleteFx:o}}},535851:(e,t,o)=>{o.d(t,{createEntitiesGroupsSubscribeService:()=>r});var i=o(755812),n=o(738371);const r=({domain:e})=>{const t=(0,i.createGroupsJoinFx)({domain:e}),o=(0,i.createGroupsLeaveFx)({domain:e}),r=e.createStore({});return(0,n.sampleEntityUpdater)({store:r,fx:t,key:e=>String(e.params.query.group_id),fn:(e,t)=>Boolean(t.result)}),(0,n.sampleEntityUpdater)({store:r,fx:o,key:e=>String(e.params.query.group_id),fn:(e,t)=>Boolean(t.result)}),{$entitiesGroupsSubscribe:r,groupsJoinFx:t,groupsLeaveFx:o}}},53313:(e,t,o)=>{o.d(t,{createEntitiesLikesService:()=>s});var i=o(738371),n=o(829014);const r=e=>[e.type,e.item_id].join("_"),s=({domain:e})=>{const t=(0,n.createLikesAddFx)({domain:e}),o=(0,n.createLikesDeleteFx)({domain:e}),s=e.createStore({}),d=e.createEvent();return s.on(d,((e,t)=>({...e,[t.key]:t.value}))),(0,i.sampleEntityUpdater)({store:s,fx:t,key:e=>r(e.params.query),fn:(e,t)=>({isLiked:!0,numberOfLikes:t.result.likes})}),(0,i.sampleEntityUpdater)({store:s,fx:o,key:e=>r(e.params.query),fn:(e,t)=>({isLiked:!1,numberOfLikes:t.result.likes})}),{$entitiesLikes:s,likesAddFx:t,likesDeleteFx:o,setLikeEvent:d}}},169572:(e,t,o)=>{o.d(t,{createListsVideosRecommendationsService:()=>s});var i=o(538522),n=o(510015);const r=({id:e,owner_id:t})=>void 0===e||void 0===t?"":(0,i.joinRawId)({itemId:e,ownerId:t}),s=({domain:e,entitiesVideoService:t})=>{const o=e.createEffect(t.videoGetVideoDiscoverFx),i=e.createEffect(o),s=(0,n.createFactoryLists)({$entitiesItems:t.$entitiesVideo,domain:e,fetchFx:i,getItemKey:r,getList:({items:e})=>e,getListCount:({count:e})=>e,getListKey:({entityKey:e})=>e,getEntityKey:r});return{resetVideosRecommendationsEvent:s.resetEvent,fetchMoreVideosRecommendationsEvent:s.fetchMoreEvent,fetchVideosRecommendationsFx:s.fetchFx,$videosRecommendationsFullyLoaded:s.$entitiesFullyLoaded,$videosRecommendationsLoading:s.$entitiesLoading,$videosRecommendationsIds:s.$entitiesListIds,$videosRecommendationsCount:s.$entitiesCount,$videosRecommendationsError:s.$entitiesError,selectStores:s.selectStores}}},601379:(e,t,o)=>{o.d(t,{isVideoVideoFullWithIds:()=>i});const i=e=>void 0!==e.id&&void 0!==e.owner_id},454404:(e,t,o)=>{o.d(t,{LazyStickerRich:()=>a});var i=o(474848),n=o(296540),r=o(753457),s=o(8520);const d=(0,n.lazy)((()=>(0,s.asyncImportLoader)((async()=>{const{StickerRich:e}=await Promise.all([o.e(89631),o.e(33013),o.e(50756),o.e("langs/web/sticker")]).then(o.bind(o,838670));return{default:e}}))));function a(e){const{size:t}=e.baseStickerProps;return(0,i.jsx)(n.Suspense,{fallback:(0,i.jsx)("div",{style:{width:t,height:t},children:(0,i.jsx)(r.Spinner,{})}),children:(0,i.jsx)(d,{...e})})}},999284:(e,t,o)=>{o.d(t,{Icon16ArchiveOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon16ArchiveOutline","archive_outline_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="archive_outline_16"><path fill="currentColor" fill-rule="evenodd" d="M6 8.75A.75.75 0 0 1 6.75 8h2.5a.75.75 0 1 1 0 1.5h-2.5A.75.75 0 0 1 6 8.75" clip-rule="evenodd" /><path fill="currentColor" fill-rule="evenodd" d="M11.25 14.5A2.75 2.75 0 0 0 14 11.75V6.383a1.6 1.6 0 0 0 .826-.757 1.6 1.6 0 0 0 .168-.598A2 2 0 0 0 15 4.84v-.28c0-.245 0-.51-.019-.739a2.5 2.5 0 0 0-.253-.956 2.5 2.5 0 0 0-1.093-1.093 2.5 2.5 0 0 0-.956-.253 10 10 0 0 0-.739-.019H4.06c-.244 0-.509 0-.738.019-.26.02-.602.073-.956.253a2.5 2.5 0 0 0-1.092 1.092c-.18.353-.233.696-.254.955-.02.23-.02.494-.02.738v.283a2 2 0 0 0 .006.186c.01.11.037.342.168.6A1.6 1.6 0 0 0 2 6.382v5.367a2.75 2.75 0 0 0 2.75 2.75zM2.75 5h10.59c.118 0 .16-.033.16-.16V4.6c0-.56 0-.84-.109-1.054a1 1 0 0 0-.437-.437C12.74 3 12.46 3 11.9 3H4.1c-.56 0-.84 0-1.053.109a1 1 0 0 0-.437.437c-.109.213-.11.493-.11 1.053v.24c0 .12.033.161.16.161zm.75 1.5v5.25c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V6.5z" clip-rule="evenodd" /><path fill="currentColor" fill-rule="evenodd" d="M6.75 8a.75.75 0 0 0 0 1.5h2.5a.75.75 0 1 0 0-1.5z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},865757:(e,t,o)=>{o.d(t,{Icon16StarCircleFillBlue:()=>i});var i=(0,o(844990).makeIcon)("Icon16StarCircleFillBlue","star_circle_fill_blue_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="star_circle_fill_blue_16"><linearGradient id="star_circle_fill_blue_16_a" x1="-8" x2="8" y1="8" y2="24" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#70b2ff" /><stop offset="1" stop-color="#5c9ce6" /></linearGradient><path fill="url(#star_circle_fill_blue_16_a)" fill-rule="evenodd" d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16" clip-rule="evenodd" /><path fill="#fff" d="m9.624 5.76 2.151.21c.748.074.978.822.4 1.314l-1.684 1.431.625 2.333c.206.766-.431 1.23-1.07.768l-2.045-1.478-2.046 1.479c-.635.459-1.275-.003-1.07-.77l.626-2.332-1.684-1.432c-.58-.493-.352-1.239.4-1.312l2.15-.211.947-2.235c.297-.7 1.057-.7 1.353 0z" /></symbol>',16,16,!1,void 0)},394062:(e,t,o)=>{o.d(t,{Icon20Attach:()=>i});var i=(0,o(844990).makeIcon)("Icon20Attach","attach_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="attach_20"><path fill="currentColor" fill-rule="evenodd" d="M14.95 3.801a2.72 2.72 0 0 0-3.857 0L5.56 9.35a4.49 4.49 0 0 0 0 6.338 4.46 4.46 0 0 0 6.317 0l.002-.002 2.88-2.86a.75.75 0 0 1 1.057 1.064l-2.877 2.857-.002.002a5.96 5.96 0 0 1-8.439-.001 5.99 5.99 0 0 1 0-8.458l5.534-5.548a4.22 4.22 0 0 1 5.981 0 4.244 4.244 0 0 1 0 5.991l-5.534 5.548a2.486 2.486 0 0 1-3.521 0 2.497 2.497 0 0 1 0-3.525l.002-.002 3.102-3.083a.75.75 0 0 1 1.058 1.064l-3.1 3.08-.001.002a.997.997 0 0 0 0 1.405.986.986 0 0 0 1.398 0l5.534-5.548a2.744 2.744 0 0 0 0-3.873" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},666112:(e,t,o)=>{o.d(t,{Icon20SmileOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon20SmileOutline","smile_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="smile_outline_20"><path d="M10 1.5a8.5 8.5 0 1 1 0 17 8.5 8.5 0 0 1 0-17M10 3a7 7 0 1 0 0 14 7 7 0 0 0 0-14m3.067 9.056c.3.286.312.76.027 1.06a4 4 0 0 1-.855.654A4.36 4.36 0 0 1 10 14.4a4.36 4.36 0 0 1-2.239-.63 4 4 0 0 1-.854-.653.75.75 0 0 1 1.004-1.109l.197.18c.098.083.239.186.417.292.446.263.942.42 1.475.42s1.029-.157 1.475-.42c.178-.106.32-.21.417-.292l.115-.105a.75.75 0 0 1 1.06-.027M7.625 7.25a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25m4.75 0a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25" /></symbol>',20,20,!1,void 0)},814487:(e,t,o)=>{o.d(t,{Icon20StatisticsOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon20StatisticsOutline","statistics_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="statistics_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M17 3.75a.75.75 0 0 0-.75-.75h-3.5a.75.75 0 0 0 0 1.5h1.69L10.5 8.44 9.03 6.97a.75.75 0 0 0-1.06 0l-4.75 4.75a.75.75 0 1 0 1.06 1.06L8.5 8.56l1.47 1.47a.75.75 0 0 0 1.06 0l4.47-4.47v1.69a.75.75 0 0 0 1.5 0zM2 16.25a.75.75 0 0 1 .75-.75h14.5a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1-.75-.75" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},128303:(e,t,o)=>{o.d(t,{Icon24LikeOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon24LikeOutline","like_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="like_outline_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" fill-rule="nonzero" d="M15.992 4.006c-1.451.064-2.753.637-3.881 1.694l-.117.113-.122-.118C10.662 4.576 9.275 4 7.734 4 4.577 4 2 6.56 2 9.717c0 3.088 1.127 4.552 6.182 8.546l2.688 2.098a1.84 1.84 0 0 0 2.26 0l2.364-1.843.933-.74C20.965 14.144 22 12.676 22 9.718 22 6.56 19.423 4 16.266 4zm.274 1.794c2.165 0 3.934 1.757 3.934 3.917l-.005.294c-.076 2.156-1.062 3.341-5.509 6.852l-2.663 2.078a.04.04 0 0 1-.046 0l-2.364-1.843-.874-.691c-4.142-3.31-4.939-4.44-4.939-6.69C3.8 7.557 5.569 5.8 7.734 5.8c1.333 0 2.507.618 3.57 1.915a.9.9 0 0 0 1.398-.007C13.739 6.416 14.909 5.8 16.266 5.8" /></g></symbol>',24,24,!1,void 0)},352203:(e,t,o)=>{o.d(t,{Icon24NotificationOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon24NotificationOutline","notification_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="notification_outline_24"><path d="M12.004 2.1c4.015 0 6.896 3.278 6.896 7.532v1.6c0 .228.193.531.72 1.075l.27.275c1.082 1.097 1.51 1.729 1.51 2.745 0 .445-.052.791-.268 1.206-.456.878-1.423 1.367-2.869 1.367l-1.912.001c-.629 2.332-2.13 3.6-4.351 3.6-2.245 0-3.754-1.295-4.371-3.675l.019.074H5.737c-1.488 0-2.466-.502-2.902-1.41-.191-.398-.235-.72-.235-1.163 0-1.016.428-1.648 1.51-2.745l.27-.275c.527-.544.72-.847.72-1.076v-1.6C5.1 5.38 7.988 2.1 12.004 2.1m2.462 15.802H9.534C9.99 19.148 10.776 19.7 12 19.7s2.01-.552 2.466-1.798M12.004 3.9C9.036 3.9 6.9 6.327 6.9 9.632v1.6c0 .852-.39 1.463-1.228 2.328-.073.075-.142.146-.281.286-.747.758-.991 1.118-.991 1.481 0 .192.014.292.057.382.107.224.433.391 1.28.391h12.526c.82 0 1.153-.169 1.272-.397.05-.095.065-.197.065-.376 0-.363-.244-.723-.99-1.48-.14-.141-.209-.212-.282-.287-.839-.865-1.228-1.476-1.228-2.329v-1.6c0-3.307-2.13-5.731-5.096-5.731" /></symbol>',24,24,!1,void 0)},39856:(e,t,o)=>{o.d(t,{Icon24ReportOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon24ReportOutline","report_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="report_outline_24"><path fill-rule="evenodd" d="M8.863 2.1h6.274c.674-.002 1.2.211 1.683.697l4.383 4.383c.478.476.699.998.697 1.683v6.274c.002.685-.22 1.207-.697 1.683l-4.383 4.383c-.476.478-.998.699-1.683.697H8.863c-.685.002-1.207-.22-1.683-.697L2.797 16.82c-.478-.476-.699-.998-.697-1.683V8.863c-.002-.685.22-1.207.697-1.683L7.18 2.797c.484-.486 1.009-.699 1.683-.697m-.445 2.005L4.105 8.418c-.18.18-.205.242-.205.495v6.174c0 .25.025.316.205.495l4.313 4.313c.179.179.24.205.495.205h6.174c.253 0 .316-.026.495-.205l4.313-4.313c.18-.18.205-.245.205-.495V8.913c0-.254-.026-.316-.205-.495l-4.313-4.313c-.18-.18-.242-.205-.495-.205H8.913c-.254 0-.319.029-.495.205M13 16a1 1 0 1 1-2 0 1 1 0 0 1 2 0m-.1-8.1a.9.9 0 1 0-1.8 0v5.2a.9.9 0 1 0 1.8 0z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},489313:(e,t,o)=>{o.d(t,{Icon28CheckCircleOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon28CheckCircleOutline","check_circle_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="check_circle_outline_28"><g fill="none" fill-rule="nonzero"><path d="M0 0h28v28H0z" /><path fill="currentColor" d="M14 2c6.627 0 12 5.373 12 12s-5.373 12-12 12S2 20.627 2 14 7.373 2 14 2m0 2C8.477 4 4 8.477 4 14s4.477 10 10 10 10-4.477 10-10S19.523 4 14 4m4.29 6.29c.39-.39 1.03-.39 1.42 0s.39 1.03 0 1.42l-7.003 6.997a1 1 0 0 1-1.414 0l-3.5-3.5a1 1 0 0 1 1.414-1.414L12 16.586Z" /></g></symbol>',28,28,!1,void 0)},356337:(e,t,o)=>{o.d(t,{Icon28LikeCircleFillRed:()=>i});var i=(0,o(844990).makeIcon)("Icon28LikeCircleFillRed","like_circle_fill_red_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="like_circle_fill_red_28"><linearGradient id="like_circle_fill_red_28_a" x1="-14" x2="14" y1="14" y2="42" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ff5263" /><stop offset="1" stop-color="#ff3347" /></linearGradient><path fill="url(#like_circle_fill_red_28_a)" d="M0 14C0 6.268 6.268 0 14 0s14 6.268 14 14-6.268 14-14 14S0 21.732 0 14" /><path fill="#fff" d="M16.859 9c2.01 0 3.641 1.612 3.641 3.6 0 2.007-.814 3.013-4.265 5.667l-1.57 1.207c-.391.301-.939.301-1.33 0l-1.57-1.207C8.314 15.614 7.5 14.607 7.5 12.599 7.5 10.611 9.13 9 11.141 9c1.077 0 2.035.501 2.859 1.472C14.824 9.502 15.782 9 16.859 9" /></symbol>',28,28,!1,void 0)},858583:(e,t,o)=>{o.d(t,{Icon28UnfavoriteOutline:()=>i});var i=(0,o(844990).makeIcon)("Icon28UnfavoriteOutline","unfavorite_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="unfavorite_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path fill="currentColor" fill-rule="nonzero" d="M8.58 8.993 5.292 5.707a1 1 0 0 1 1.414-1.414l18 18a1 1 0 0 1-1.414 1.414l-1.619-1.619a2 2 0 0 1-2.94 2L14 21.517l-4.735 2.57a2 2 0 0 1-2.92-2.123l.98-5.296-3.906-3.71a2 2 0 0 1 1.115-3.433zm1.781 1.783-5.565.733 4.3 4.083a1 1 0 0 1 .295.907l-1.08 5.83 5.212-2.828a1 1 0 0 1 .954 0l5.212 2.829-.506-2.733zm7.764-1.954 5.34.704a2 2 0 0 1 1.116 3.434l-2.637 2.504a1 1 0 0 1-1.377-1.45l2.637-2.505-5.879-.775a1 1 0 0 1-.771-.56L14 4.822l-.77 1.614a1 1 0 1 1-1.805-.861l.77-1.614a2 2 0 0 1 3.61 0z" /></g></symbol>',28,28,!1,void 0)},443660:(e,t,o)=>{o.d(t,{default:()=>i});const i={ownerName:"Owner__ownerName--1qrzT",subscriptionButton:"Owner__subscriptionButton--oNvrW",featured:"Owner__featured--kopcT"}},372199:(e,t,o)=>{o.d(t,{default:()=>i});const i={container:"VideoModalInfoActions__container--ikKR1"}},580859:(e,t,o)=>{o.d(t,{default:()=>i});const i={textWrapper:"VideoModalInfoDescription__textWrapper--z1AR4"}},356387:(e,t,o)=>{o.d(t,{default:()=>i});const i={container:"VideoModalInfoTitle__container--1fpxM",info:"VideoModalInfoTitle__info--vl4qI",wrapper:"VideoModalInfoTitle__wrapper--cc9m0",icon:"VideoModalInfoTitle__icon--B9wpL",archive:"VideoModalInfoTitle__archive--QHckM",subTitle:"VideoModalInfoTitle__subTitle--mvZSZ",explicitTitle:"VideoModalInfoTitle__explicitTitle--5O95p"}},710005:(e,t,o)=>{o.d(t,{default:()=>i});const i={container:"Episodes__container--yyUJ1"}},607385:(e,t,o)=>{o.d(t,{default:()=>i});const i={root:"PlaylistVideosList__root--5LDnr",list:"PlaylistVideosList__list--5k30p"}},969075:(e,t,o)=>{o.d(t,{default:()=>i});const i={recommendationsContainer:"Recommendations__recommendationsContainer--jcnnG"}},581796:(e,t,o)=>{o.d(t,{default:()=>i});const i={content:"HorizontalAuthorsScroll__content--59woO"}},195340:(e,t,o)=>{o.d(t,{default:()=>i});const i={skeleton:"VideoCardGridSkeleton__skeleton--Zka1I"}}}]);try{stManager?.done("dist/web/chunks/e4bdc072.20082c79.js")}catch(e){}
"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[99909],{189414:(e,t,i)=>{i.d(t,{ContextAPI:()=>c});var r=i(437874),n=i(446051),a=i(745726),s=function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s},o=function(e,t,i){if(i||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))},l="context",u=new r.NoopContextManager,c=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return(0,n.registerGlobal)(l,e,a.DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,i){for(var r,n=[],a=3;a<arguments.length;a++)n[a-3]=arguments[a];return(r=this._getContextManager()).with.apply(r,o([e,t,i],s(n),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return(0,n.getGlobal)(l)||u},e.prototype.disable=function(){this._getContextManager().disable(),(0,n.unregisterGlobal)(l,a.DiagAPI.instance())},e}()},745726:(e,t,i)=>{i.d(t,{DiagAPI:()=>u});var r=i(731275),n=i(441994),a=i(176733),s=i(446051),o=function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s},l=function(e,t,i){if(i||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))},u=function(){function e(){function e(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=(0,s.getGlobal)("diag");if(r)return r[e].apply(r,l([],o(t),!1))}}var t=this;t.setLogger=function(e,i){var r,o,l;if(void 0===i&&(i={logLevel:a.DiagLogLevel.INFO}),e===t){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(r=u.stack)&&void 0!==r?r:u.message),!1}"number"==typeof i&&(i={logLevel:i});var c=(0,s.getGlobal)("diag"),d=(0,n.createLogLevelDiagLogger)(null!==(o=i.logLevel)&&void 0!==o?o:a.DiagLogLevel.INFO,e);if(c&&!i.suppressOverrideMessage){var p=null!==(l=(new Error).stack)&&void 0!==l?l:"<failed to generate stacktrace>";c.warn("Current logger will be overwritten from "+p),d.warn("Current logger will overwrite one already registered from "+p)}return(0,s.registerGlobal)("diag",d,t,!0)},t.disable=function(){(0,s.unregisterGlobal)("diag",t)},t.createComponentLogger=function(e){return new r.DiagComponentLogger(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}()},757164:(e,t,i)=>{i.d(t,{TraceAPI:()=>u});var r=i(446051),n=i(280168),a=i(867823),s=i(113299),o=i(745726),l="trace",u=function(){function e(){this._proxyTracerProvider=new n.ProxyTracerProvider,this.wrapSpanContext=a.wrapSpanContext,this.isSpanContextValid=a.isSpanContextValid,this.deleteSpan=s.deleteSpan,this.getSpan=s.getSpan,this.getActiveSpan=s.getActiveSpan,this.getSpanContext=s.getSpanContext,this.setSpan=s.setSpan,this.setSpanContext=s.setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=(0,r.registerGlobal)(l,this._proxyTracerProvider,o.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return(0,r.getGlobal)(l)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){(0,r.unregisterGlobal)(l,o.DiagAPI.instance()),this._proxyTracerProvider=new n.ProxyTracerProvider},e}()},241844:(e,t,i)=>{i.d(t,{context:()=>r});var r=i(189414).ContextAPI.getInstance()},437874:(e,t,i)=>{i.d(t,{NoopContextManager:()=>s});var r=i(938729),n=function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s},a=function(e,t,i){if(i||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))},s=function(){function e(){}return e.prototype.active=function(){return r.ROOT_CONTEXT},e.prototype.with=function(e,t,i){for(var r=[],s=3;s<arguments.length;s++)r[s-3]=arguments[s];return t.call.apply(t,a([i],n(r),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}()},938729:(e,t,i)=>{function r(e){return Symbol.for(e)}i.d(t,{ROOT_CONTEXT:()=>n,createContextKey:()=>r});var n=new function e(t){var i=this;i._currentContext=t?new Map(t):new Map,i.getValue=function(e){return i._currentContext.get(e)},i.setValue=function(t,r){var n=new e(i._currentContext);return n._currentContext.set(t,r),n},i.deleteValue=function(t){var r=new e(i._currentContext);return r._currentContext.delete(t),r}}},731275:(e,t,i)=>{i.d(t,{DiagComponentLogger:()=>s});var r=i(446051),n=function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s},a=function(e,t,i){if(i||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))},s=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o("verbose",this._namespace,e)},e}();function o(e,t,i){var s=(0,r.getGlobal)("diag");if(s)return i.unshift(t),s[e].apply(s,a([],n(i),!1))}},441994:(e,t,i)=>{i.d(t,{createLogLevelDiagLogger:()=>n});var r=i(176733);function n(e,t){function i(i,r){var n=t[i];return"function"==typeof n&&e>=r?n.bind(t):function(){}}return e<r.DiagLogLevel.NONE?e=r.DiagLogLevel.NONE:e>r.DiagLogLevel.ALL&&(e=r.DiagLogLevel.ALL),t=t||{},{error:i("error",r.DiagLogLevel.ERROR),warn:i("warn",r.DiagLogLevel.WARN),info:i("info",r.DiagLogLevel.INFO),debug:i("debug",r.DiagLogLevel.DEBUG),verbose:i("verbose",r.DiagLogLevel.VERBOSE)}}},176733:(e,t,i)=>{var r;i.d(t,{DiagLogLevel:()=>r}),function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(r||(r={}))},446051:(e,t,i)=>{i.d(t,{getGlobal:()=>c,registerGlobal:()=>u,unregisterGlobal:()=>d});var r=i(985408),n=i(572910),a=i(808336),s=n.VERSION.split(".")[0],o=Symbol.for("opentelemetry.js.api."+s),l=r._globalThis;function u(e,t,i,r){var a;void 0===r&&(r=!1);var s=l[o]=null!==(a=l[o])&&void 0!==a?a:{version:n.VERSION};if(!r&&s[e]){var u=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return i.error(u.stack||u.message),!1}if(s.version!==n.VERSION){u=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+e+" does not match previously registered API v"+n.VERSION);return i.error(u.stack||u.message),!1}return s[e]=t,i.debug("@opentelemetry/api: Registered a global for "+e+" v"+n.VERSION+"."),!0}function c(e){var t,i,r=null===(t=l[o])||void 0===t?void 0:t.version;if(r&&(0,a.isCompatible)(r))return null===(i=l[o])||void 0===i?void 0:i[e]}function d(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+n.VERSION+".");var i=l[o];i&&delete i[e]}},808336:(e,t,i)=>{i.d(t,{isCompatible:()=>a});var r=i(572910),n=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;var a=function(e){var t=new Set([e]),i=new Set,r=e.match(n);if(!r)return function(){return!1};var a=+r[1],s=+r[2],o=+r[3];if(null!=r[4])return function(t){return t===e};function l(e){return i.add(e),!1}function u(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(i.has(e))return!1;var r=e.match(n);if(!r)return l(e);var c=+r[1],d=+r[2],p=+r[3];return null!=r[4]||a!==c?l(e):0===a?s===d&&o<=p?u(e):l(e):s<=d?u(e):l(e)}}(r.VERSION)},985408:(e,t,i)=>{i.d(t,{_globalThis:()=>r});var r="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof i.g?i.g:{}},734318:(e,t,i)=>{i.d(t,{trace:()=>r});var r=i(757164).TraceAPI.getInstance()},231440:(e,t,i)=>{i.d(t,{NonRecordingSpan:()=>n});var r=i(797872),n=function(){function e(e){void 0===e&&(e=r.INVALID_SPAN_CONTEXT),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}()},79755:(e,t,i)=>{i.d(t,{NoopTracer:()=>l});var r=i(189414),n=i(113299),a=i(231440),s=i(867823),o=r.ContextAPI.getInstance(),l=function(){function e(){}return e.prototype.startSpan=function(e,t,i){if(void 0===i&&(i=o.active()),Boolean(null==t?void 0:t.root))return new a.NonRecordingSpan;var r,l=i&&(0,n.getSpanContext)(i);return"object"==typeof(r=l)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&(0,s.isSpanContextValid)(l)?new a.NonRecordingSpan(l):new a.NonRecordingSpan},e.prototype.startActiveSpan=function(e,t,i,r){var a,s,l;if(!(arguments.length<2)){2===arguments.length?l=t:3===arguments.length?(a=t,l=i):(a=t,s=i,l=r);var u=null!=s?s:o.active(),c=this.startSpan(e,a,u),d=(0,n.setSpan)(u,c);return o.with(d,l,void 0,c)}},e}()},280282:(e,t,i)=>{i.d(t,{NoopTracerProvider:()=>n});var r=i(79755),n=function(){function e(){}return e.prototype.getTracer=function(e,t,i){return new r.NoopTracer},e}()},819505:(e,t,i)=>{i.d(t,{ProxyTracer:()=>n});var r=new(i(79755).NoopTracer),n=function(){function e(e,t,i,r){this._provider=e,this.name=t,this.version=i,this.options=r}return e.prototype.startSpan=function(e,t,i){return this._getTracer().startSpan(e,t,i)},e.prototype.startActiveSpan=function(e,t,i,r){var n=this._getTracer();return Reflect.apply(n.startActiveSpan,n,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):r},e}()},280168:(e,t,i)=>{i.d(t,{ProxyTracerProvider:()=>a});var r=i(819505),n=new(i(280282).NoopTracerProvider),a=function(){function e(){}return e.prototype.getTracer=function(e,t,i){var n;return null!==(n=this.getDelegateTracer(e,t,i))&&void 0!==n?n:new r.ProxyTracer(this,e,t,i)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:n},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,i){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(e,t,i)},e}()},113299:(e,t,i)=>{i.d(t,{deleteSpan:()=>c,getActiveSpan:()=>l,getSpan:()=>o,getSpanContext:()=>p,setSpan:()=>u,setSpanContext:()=>d});var r=i(938729),n=i(231440),a=i(189414),s=(0,r.createContextKey)("OpenTelemetry Context Key SPAN");function o(e){return e.getValue(s)||void 0}function l(){return o(a.ContextAPI.getInstance().active())}function u(e,t){return e.setValue(s,t)}function c(e){return e.deleteValue(s)}function d(e,t){return u(e,new n.NonRecordingSpan(t))}function p(e){var t;return null===(t=o(e))||void 0===t?void 0:t.spanContext()}},797872:(e,t,i)=>{i.d(t,{INVALID_SPANID:()=>n,INVALID_SPAN_CONTEXT:()=>s,INVALID_TRACEID:()=>a});var r=i(547397),n="0000000000000000",a="00000000000000000000000000000000",s={traceId:a,spanId:n,traceFlags:r.TraceFlags.NONE}},867823:(e,t,i)=>{i.d(t,{isSpanContextValid:()=>o,wrapSpanContext:()=>l});var r=i(797872),n=i(231440),a=/^([0-9a-f]{32})$/i,s=/^[0-9a-f]{16}$/i;function o(e){return i=e.traceId,a.test(i)&&i!==r.INVALID_TRACEID&&(t=e.spanId,s.test(t)&&t!==r.INVALID_SPANID);var t,i}function l(e){return new n.NonRecordingSpan(e)}},547397:(e,t,i)=>{var r;i.d(t,{TraceFlags:()=>r}),function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(r||(r={}))},572910:(e,t,i)=>{i.d(t,{VERSION:()=>r});var r="1.9.0"},773439:(e,t,i)=>{i.d(t,{ChromecastState:()=>li,HttpConnectionType:()=>ui,Observable:()=>l.Observable,PlaybackState:()=>si,Player:()=>La,SDK_VERSION:()=>Ra,Subscription:()=>l.Subscription,Surface:()=>ci,VERSION:()=>ai,VideoFormat:()=>oi,VideoQuality:()=>l.VideoQuality});var r,n,a,s,o,l=i(819705),u=Object.create,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,p=Object.getOwnPropertyNames,h=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,m=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),g=(e,t,i)=>(i=null!=e?u(h(e)):{},((e,t,i,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of p(t))!f.call(e,n)&&n!==i&&c(e,n,{get:()=>t[n],enumerable:!(r=d(t,n))||r.enumerable});return e})(!t&&e&&e.__esModule?i:c(i,"default",{value:e,enumerable:!0}),e)),v=m(((e,t)=>{t.exports=function(e){try{return!!e()}catch{return!0}}})),b=m(((e,t)=>{var i=v();t.exports=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))})),y=m(((e,t)=>{var i=b(),r=Function.prototype,n=r.call,a=i&&r.bind.bind(n,n);t.exports=i?a:function(e){return function(){return n.apply(e,arguments)}}})),S=m(((e,t)=>{var i=y(),r=i({}.toString),n=i("".slice);t.exports=function(e){return n(r(e),8,-1)}})),$=m(((e,t)=>{var i=y(),r=v(),n=S(),a=Object,s=i("".split);t.exports=r((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"===n(e)?s(e,""):a(e)}:a})),_=m(((e,t)=>{t.exports=function(e){return null==e}})),T=m(((e,t)=>{var i=_(),r=TypeError;t.exports=function(e){if(i(e))throw new r("Can't call method on "+e);return e}})),w=m(((e,t)=>{var i=$(),r=T();t.exports=function(e){return i(r(e))}})),E=m(((e,t)=>{t.exports=function(){}})),x=m(((e,t)=>{t.exports={}})),A=m(((e,t)=>{var i=function(e){return e&&e.Math===Math&&e};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof global&&global)||i("object"==typeof e&&e)||function(){return this}()||Function("return this")()})),C=m(((e,t)=>{var i="object"==typeof document&&document.all;t.exports=typeof i>"u"&&void 0!==i?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}})),k=m(((e,t)=>{var i=A(),r=C(),n=i.WeakMap;t.exports=r(n)&&/native code/.test(String(n))})),L=m(((e,t)=>{var i=C();t.exports=function(e){return"object"==typeof e?null!==e:i(e)}})),R=m(((e,t)=>{var i=v();t.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))})),P=m(((e,t)=>{var i=A(),r=L(),n=i.document,a=r(n)&&r(n.createElement);t.exports=function(e){return a?n.createElement(e):{}}})),O=m(((e,t)=>{var i=R(),r=v(),n=P();t.exports=!i&&!r((function(){return 7!==Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))})),M=m(((e,t)=>{var i=R(),r=v();t.exports=i&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))})),I=m(((e,t)=>{var i=L(),r=String,n=TypeError;t.exports=function(e){if(i(e))return e;throw new n(r(e)+" is not an object")}})),N=m(((e,t)=>{var i=b(),r=Function.prototype.call;t.exports=i?r.bind(r):function(){return r.apply(r,arguments)}})),V=m(((e,t)=>{t.exports={}})),D=m(((e,t)=>{var i=V(),r=A(),n=C(),a=function(e){return n(e)?e:void 0};t.exports=function(e,t){return arguments.length<2?a(i[e])||a(r[e]):i[e]&&i[e][t]||r[e]&&r[e][t]}})),B=m(((e,t)=>{var i=y();t.exports=i({}.isPrototypeOf)})),U=m(((e,t)=>{var i=A().navigator,r=i&&i.userAgent;t.exports=r?String(r):""})),F=m(((e,t)=>{var i,r,n=A(),a=U(),s=n.process,o=n.Deno,l=s&&s.versions||o&&o.version,u=l&&l.v8;u&&(r=(i=u.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&a&&((!(i=a.match(/Edge\/(\d+)/))||i[1]>=74)&&((i=a.match(/Chrome\/(\d+)/))&&(r=+i[1]))),t.exports=r})),j=m(((e,t)=>{var i=F(),r=v(),n=A().String;t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol("symbol detection");return!n(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))})),H=m(((e,t)=>{var i=j();t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator})),z=m(((e,t)=>{var i=D(),r=C(),n=B(),a=H(),s=Object;t.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return r(t)&&n(t.prototype,s(e))}})),q=m(((e,t)=>{var i=String;t.exports=function(e){try{return i(e)}catch{return"Object"}}})),W=m(((e,t)=>{var i=C(),r=q(),n=TypeError;t.exports=function(e){if(i(e))return e;throw new n(r(e)+" is not a function")}})),G=m(((e,t)=>{var i=W(),r=_();t.exports=function(e,t){var n=e[t];return r(n)?void 0:i(n)}})),Q=m(((e,t)=>{var i=N(),r=C(),n=L(),a=TypeError;t.exports=function(e,t){var s,o;if("string"===t&&r(s=e.toString)&&!n(o=i(s,e))||r(s=e.valueOf)&&!n(o=i(s,e))||"string"!==t&&r(s=e.toString)&&!n(o=i(s,e)))return o;throw new a("Can't convert object to primitive value")}})),Y=m(((e,t)=>{t.exports=!0})),K=m(((e,t)=>{var i=A(),r=Object.defineProperty;t.exports=function(e,t){try{r(i,e,{value:t,configurable:!0,writable:!0})}catch{i[e]=t}return t}})),X=m(((e,t)=>{var i=Y(),r=A(),n=K(),a="__core-js_shared__",s=t.exports=r[a]||n(a,{});(s.versions||(s.versions=[])).push({version:"3.38.0",mode:i?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.0/LICENSE",source:"https://github.com/zloirock/core-js"})})),Z=m(((e,t)=>{var i=X();t.exports=function(e,t){return i[e]||(i[e]=t||{})}})),J=m(((e,t)=>{var i=T(),r=Object;t.exports=function(e){return r(i(e))}})),ee=m(((e,t)=>{var i=y(),r=J(),n=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(e,t){return n(r(e),t)}})),te=m(((e,t)=>{var i=y(),r=0,n=Math.random(),a=i(1..toString);t.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++r+n,36)}})),ie=m(((e,t)=>{var i=A(),r=Z(),n=ee(),a=te(),s=j(),o=H(),l=i.Symbol,u=r("wks"),c=o?l.for||l:l&&l.withoutSetter||a;t.exports=function(e){return n(u,e)||(u[e]=s&&n(l,e)?l[e]:c("Symbol."+e)),u[e]}})),re=m(((e,t)=>{var i=N(),r=L(),n=z(),a=G(),s=Q(),o=ie(),l=TypeError,u=o("toPrimitive");t.exports=function(e,t){if(!r(e)||n(e))return e;var o,c=a(e,u);if(c){if(void 0===t&&(t="default"),o=i(c,e,t),!r(o)||n(o))return o;throw new l("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}})),ne=m(((e,t)=>{var i=re(),r=z();t.exports=function(e){var t=i(e,"string");return r(t)?t:t+""}})),ae=m((e=>{var t=R(),i=O(),r=M(),n=I(),a=ne(),s=TypeError,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u="enumerable",c="configurable",d="writable";e.f=t?r?function(e,t,i){if(n(e),t=a(t),n(i),"function"==typeof e&&"prototype"===t&&"value"in i&&d in i&&!i[d]){var r=l(e,t);r&&r[d]&&(e[t]=i.value,i={configurable:c in i?i[c]:r[c],enumerable:u in i?i[u]:r[u],writable:!1})}return o(e,t,i)}:o:function(e,t,r){if(n(e),t=a(t),n(r),i)try{return o(e,t,r)}catch{}if("get"in r||"set"in r)throw new s("Accessors not supported");return"value"in r&&(e[t]=r.value),e}})),se=m(((e,t)=>{t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}})),oe=m(((e,t)=>{var i=R(),r=ae(),n=se();t.exports=i?function(e,t,i){return r.f(e,t,n(1,i))}:function(e,t,i){return e[t]=i,e}})),le=m(((e,t)=>{var i=Z(),r=te(),n=i("keys");t.exports=function(e){return n[e]||(n[e]=r(e))}})),ue=m(((e,t)=>{t.exports={}})),ce=m(((e,t)=>{var i,r,n,a,s,o=k(),l=A(),u=L(),c=oe(),d=ee(),p=X(),h=le(),f=ue(),m="Object already initialized",g=l.TypeError,v=l.WeakMap;o||p.state?((a=p.state||(p.state=new v)).get=a.get,a.has=a.has,a.set=a.set,i=function(e,t){if(a.has(e))throw new g(m);return t.facade=e,a.set(e,t),t},r=function(e){return a.get(e)||{}},n=function(e){return a.has(e)}):(f[s=h("state")]=!0,i=function(e,t){if(d(e,s))throw new g(m);return t.facade=e,c(e,s,t),t},r=function(e){return d(e,s)?e[s]:{}},n=function(e){return d(e,s)}),t.exports={set:i,get:r,has:n,enforce:function(e){return n(e)?r(e):i(e,{})},getterFor:function(e){return function(t){var i;if(!u(t)||(i=r(t)).type!==e)throw new g("Incompatible receiver, "+e+" required");return i}}}})),de=m(((e,t)=>{var i=b(),r=Function.prototype,n=r.apply,a=r.call;t.exports="object"==typeof Reflect&&Reflect.apply||(i?a.bind(n):function(){return a.apply(n,arguments)})})),pe=m(((e,t)=>{var i=S(),r=y();t.exports=function(e){if("Function"===i(e))return r(e)}})),he=m((e=>{var t={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!t.call({1:2},1);e.f=r?function(e){var t=i(this,e);return!!t&&t.enumerable}:t})),fe=m((e=>{var t=R(),i=N(),r=he(),n=se(),a=w(),s=ne(),o=ee(),l=O(),u=Object.getOwnPropertyDescriptor;e.f=t?u:function(e,t){if(e=a(e),t=s(t),l)try{return u(e,t)}catch{}if(o(e,t))return n(!i(r.f,e,t),e[t])}})),me=m(((e,t)=>{var i=v(),r=C(),n=/#|\.prototype\./,a=function(e,t){var n=o[s(e)];return n===u||n!==l&&(r(t)?i(t):!!t)},s=a.normalize=function(e){return String(e).replace(n,".").toLowerCase()},o=a.data={},l=a.NATIVE="N",u=a.POLYFILL="P";t.exports=a})),ge=m(((e,t)=>{var i=pe(),r=W(),n=b(),a=i(i.bind);t.exports=function(e,t){return r(e),void 0===t?e:n?a(e,t):function(){return e.apply(t,arguments)}}})),ve=m(((e,t)=>{var i=A(),r=de(),n=pe(),a=C(),s=fe().f,o=me(),l=V(),u=ge(),c=oe(),d=ee();X();var p=function(e){var t=function(i,n,a){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(i);case 2:return new e(i,n)}return new e(i,n,a)}return r(e,this,arguments)};return t.prototype=e.prototype,t};t.exports=function(e,t){var r,h,f,m,g,v,b,y,S,$=e.target,_=e.global,T=e.stat,w=e.proto,E=_?i:T?i[$]:i[$]&&i[$].prototype,x=_?l:l[$]||c(l,$,{})[$],A=x.prototype;for(m in t)h=!(r=o(_?m:$+(T?".":"#")+m,e.forced))&&E&&d(E,m),v=x[m],h&&(e.dontCallGetSet?b=(S=s(E,m))&&S.value:b=E[m]),g=h&&b?b:t[m],(r||w||typeof v!=typeof g)&&(y=e.bind&&h?u(g,i):e.wrap&&h?p(g):w&&a(g)?n(g):g,(e.sham||g&&g.sham||v&&v.sham)&&c(y,"sham",!0),c(x,m,y),w&&(d(l,f=$+"Prototype")||c(l,f,{}),c(l[f],m,g),e.real&&A&&(r||!A[m])&&c(A,m,g)))}})),be=m(((e,t)=>{var i=R(),r=ee(),n=Function.prototype,a=i&&Object.getOwnPropertyDescriptor,s=r(n,"name"),o=s&&"something"===function(){}.name,l=s&&(!i||i&&a(n,"name").configurable);t.exports={EXISTS:s,PROPER:o,CONFIGURABLE:l}})),ye=m(((e,t)=>{var i=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(e){var t=+e;return(t>0?r:i)(t)}})),Se=m(((e,t)=>{var i=ye();t.exports=function(e){var t=+e;return t!=t||0===t?0:i(t)}})),$e=m(((e,t)=>{var i=Se(),r=Math.max,n=Math.min;t.exports=function(e,t){var a=i(e);return a<0?r(a+t,0):n(a,t)}})),_e=m(((e,t)=>{var i=Se(),r=Math.min;t.exports=function(e){var t=i(e);return t>0?r(t,9007199254740991):0}})),Te=m(((e,t)=>{var i=_e();t.exports=function(e){return i(e.length)}})),we=m(((e,t)=>{var i=w(),r=$e(),n=Te(),a=function(e){return function(t,a,s){var o=i(t),l=n(o);if(0===l)return!e&&-1;var u,c=r(s,l);if(e&&a!=a){for(;l>c;)if((u=o[c++])!=u)return!0}else for(;l>c;c++)if((e||c in o)&&o[c]===a)return e||c||0;return!e&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}})),Ee=m(((e,t)=>{var i=y(),r=ee(),n=w(),a=we().indexOf,s=ue(),o=i([].push);t.exports=function(e,t){var i,l=n(e),u=0,c=[];for(i in l)!r(s,i)&&r(l,i)&&o(c,i);for(;t.length>u;)r(l,i=t[u++])&&(~a(c,i)||o(c,i));return c}})),xe=m(((e,t)=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]})),Ae=m(((e,t)=>{var i=Ee(),r=xe();t.exports=Object.keys||function(e){return i(e,r)}})),Ce=m((e=>{var t=R(),i=M(),r=ae(),n=I(),a=w(),s=Ae();e.f=t&&!i?Object.defineProperties:function(e,t){n(e);for(var i,o=a(t),l=s(t),u=l.length,c=0;u>c;)r.f(e,i=l[c++],o[i]);return e}})),ke=m(((e,t)=>{var i=D();t.exports=i("document","documentElement")})),Le=m(((e,t)=>{var i,r=I(),n=Ce(),a=xe(),s=ue(),o=ke(),l=P(),u=le(),c="prototype",d="script",p=u("IE_PROTO"),h=function(){},f=function(e){return"<"+d+">"+e+"</"+d+">"},m=function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t},g=function(){try{i=new ActiveXObject("htmlfile")}catch{}g=typeof document<"u"?document.domain&&i?m(i):function(){var e,t=l("iframe"),i="java"+d+":";return t.style.display="none",o.appendChild(t),t.src=String(i),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F}():m(i);for(var e=a.length;e--;)delete g[c][a[e]];return g()};s[p]=!0,t.exports=Object.create||function(e,t){var i;return null!==e?(h[c]=r(e),i=new h,h[c]=null,i[p]=e):i=g(),void 0===t?i:n.f(i,t)}})),Re=m(((e,t)=>{var i=v();t.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))})),Pe=m(((e,t)=>{var i=ee(),r=C(),n=J(),a=le(),s=Re(),o=a("IE_PROTO"),l=Object,u=l.prototype;t.exports=s?l.getPrototypeOf:function(e){var t=n(e);if(i(t,o))return t[o];var a=t.constructor;return r(a)&&t instanceof a?a.prototype:t instanceof l?u:null}})),Oe=m(((e,t)=>{var i=oe();t.exports=function(e,t,r,n){return n&&n.enumerable?e[t]=r:i(e,t,r),e}})),Me=m(((e,t)=>{var i,r,n,a=v(),s=C(),o=L(),l=Le(),u=Pe(),c=Oe(),d=ie(),p=Y(),h=d("iterator"),f=!1;[].keys&&("next"in(n=[].keys())?(r=u(u(n)))!==Object.prototype&&(i=r):f=!0),!o(i)||a((function(){var e={};return i[h].call(e)!==e}))?i={}:p&&(i=l(i)),s(i[h])||c(i,h,(function(){return this})),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:f}})),Ie=m(((e,t)=>{var i={};i[ie()("toStringTag")]="z",t.exports="[object z]"===String(i)})),Ne=m(((e,t)=>{var i=Ie(),r=C(),n=S(),a=ie()("toStringTag"),s=Object,o="Arguments"===n(function(){return arguments}());t.exports=i?n:function(e){var t,i,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch{}}(t=s(e),a))?i:o?n(t):"Object"===(l=n(t))&&r(t.callee)?"Arguments":l}})),Ve=m(((e,t)=>{var i=Ie(),r=Ne();t.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}})),De=m(((e,t)=>{var i=Ie(),r=ae().f,n=oe(),a=ee(),s=Ve(),o=ie()("toStringTag");t.exports=function(e,t,l,u){var c=l?e:e&&e.prototype;c&&(a(c,o)||r(c,o,{configurable:!0,value:t}),u&&!i&&n(c,"toString",s))}})),Be=m(((e,t)=>{var i=Me().IteratorPrototype,r=Le(),n=se(),a=De(),s=x(),o=function(){return this};t.exports=function(e,t,l,u){var c=t+" Iterator";return e.prototype=r(i,{next:n(+!u,l)}),a(e,c,!1,!0),s[c]=o,e}})),Ue=m(((e,t)=>{var i=y(),r=W();t.exports=function(e,t,n){try{return i(r(Object.getOwnPropertyDescriptor(e,t)[n]))}catch{}}})),Fe=m(((e,t)=>{var i=L();t.exports=function(e){return i(e)||null===e}})),je=m(((e,t)=>{var i=Fe(),r=String,n=TypeError;t.exports=function(e){if(i(e))return e;throw new n("Can't set "+r(e)+" as a prototype")}})),He=m(((e,t)=>{var i=Ue(),r=L(),n=T(),a=je();t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,s={};try{(e=i(Object.prototype,"__proto__","set"))(s,[]),t=s instanceof Array}catch{}return function(i,s){return n(i),a(s),r(i)&&(t?e(i,s):i.__proto__=s),i}}():void 0)})),ze=m(((e,t)=>{var i=ve(),r=N(),n=Y(),a=be(),s=C(),o=Be(),l=Pe(),u=He(),c=De(),d=oe(),p=Oe(),h=ie(),f=x(),m=Me(),g=a.PROPER,v=a.CONFIGURABLE,b=m.IteratorPrototype,y=m.BUGGY_SAFARI_ITERATORS,S=h("iterator"),$="keys",_="values",T="entries",w=function(){return this};t.exports=function(e,t,a,h,m,E,x){o(a,t,h);var A,C,k,L=function(e){if(e===m&&I)return I;if(!y&&e&&e in O)return O[e];switch(e){case $:case _:case T:return function(){return new a(this,e)}}return function(){return new a(this)}},R=t+" Iterator",P=!1,O=e.prototype,M=O[S]||O["@@iterator"]||m&&O[m],I=!y&&M||L(m),N="Array"===t&&O.entries||M;if(N&&((A=l(N.call(new e)))!==Object.prototype&&A.next&&(!n&&l(A)!==b&&(u?u(A,b):s(A[S])||p(A,S,w)),c(A,R,!0,!0),n&&(f[R]=w))),g&&m===_&&M&&M.name!==_&&(!n&&v?d(O,"name",_):(P=!0,I=function(){return r(M,this)})),m)if(C={values:L(_),keys:E?I:L($),entries:L(T)},x)for(k in C)(y||P||!(k in O))&&p(O,k,C[k]);else i({target:t,proto:!0,forced:y||P},C);return(!n||x)&&O[S]!==I&&p(O,S,I,{name:m}),f[t]=I,C}})),qe=m(((e,t)=>{t.exports=function(e,t){return{value:e,done:t}}})),We=m(((e,t)=>{var i=w(),r=E(),n=x(),a=ce(),s=ae().f,o=ze(),l=qe(),u=Y(),c=R(),d="Array Iterator",p=a.set,h=a.getterFor(d);t.exports=o(Array,"Array",(function(e,t){p(this,{type:d,target:i(e),index:0,kind:t})}),(function(){var e=h(this),t=e.target,i=e.index++;if(!t||i>=t.length)return e.target=void 0,l(void 0,!0);switch(e.kind){case"keys":return l(i,!1);case"values":return l(t[i],!1)}return l([i,t[i]],!1)}),"values");var f=n.Arguments=n.Array;if(r("keys"),r("values"),r("entries"),!u&&c&&"values"!==f.name)try{s(f,"name",{value:"values"})}catch{}})),Ge=m(((e,t)=>{var i=ie(),r=x(),n=i("iterator"),a=Array.prototype;t.exports=function(e){return void 0!==e&&(r.Array===e||a[n]===e)}})),Qe=m(((e,t)=>{var i=Ne(),r=G(),n=_(),a=x(),s=ie()("iterator");t.exports=function(e){if(!n(e))return r(e,s)||r(e,"@@iterator")||a[i(e)]}})),Ye=m(((e,t)=>{var i=N(),r=W(),n=I(),a=q(),s=Qe(),o=TypeError;t.exports=function(e,t){var l=arguments.length<2?s(e):t;if(r(l))return n(i(l,e));throw new o(a(e)+" is not iterable")}})),Ke=m(((e,t)=>{var i=N(),r=I(),n=G();t.exports=function(e,t,a){var s,o;r(e);try{if(!(s=n(e,"return"))){if("throw"===t)throw a;return a}s=i(s,e)}catch(e){o=!0,s=e}if("throw"===t)throw a;if(o)throw s;return r(s),a}})),Xe=m(((e,t)=>{var i=ge(),r=N(),n=I(),a=q(),s=Ge(),o=Te(),l=B(),u=Ye(),c=Qe(),d=Ke(),p=TypeError,h=function(e,t){this.stopped=e,this.result=t},f=h.prototype;t.exports=function(e,t,m){var g,v,b,y,S,$,_,T=m&&m.that,w=!(!m||!m.AS_ENTRIES),E=!(!m||!m.IS_RECORD),x=!(!m||!m.IS_ITERATOR),A=!(!m||!m.INTERRUPTED),C=i(t,T),k=function(e){return g&&d(g,"normal",e),new h(!0,e)},L=function(e){return w?(n(e),A?C(e[0],e[1],k):C(e[0],e[1])):A?C(e,k):C(e)};if(E)g=e.iterator;else if(x)g=e;else{if(!(v=c(e)))throw new p(a(e)+" is not iterable");if(s(v)){for(b=0,y=o(e);y>b;b++)if((S=L(e[b]))&&l(f,S))return S;return new h(!1)}g=u(e,v)}for($=E?e.next:g.next;!(_=r($,g)).done;){try{S=L(_.value)}catch(e){d(g,"throw",e)}if("object"==typeof S&&S&&l(f,S))return S}return new h(!1)}})),Ze=m(((e,t)=>{var i=R(),r=ae(),n=se();t.exports=function(e,t,a){i?r.f(e,t,n(0,a)):e[t]=a}})),Je=m((()=>{var e=ve(),t=Xe(),i=Ze();e({target:"Object",stat:!0},{fromEntries:function(e){var r={};return t(e,(function(e,t){i(r,e,t)}),{AS_ENTRIES:!0}),r}})})),et=m(((e,t)=>{We(),Je();var i=V();t.exports=i.Object.fromEntries})),tt=m(((e,t)=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}})),it=m((()=>{We();var e,t=tt(),i=A(),r=De(),n=x();for(e in t)r(i[e],e),n[e]=n.Array})),rt=m(((e,t)=>{var i=et();it(),t.exports=i})),nt=m(((e,t)=>{var i=rt();t.exports=i})),at=m((()=>{})),st=m(((e,t)=>{var i=A(),r=U(),n=S(),a=function(e){return r.slice(0,e.length)===e};t.exports=a("Bun/")?"BUN":a("Cloudflare-Workers")?"CLOUDFLARE":a("Deno/")?"DENO":a("Node.js/")?"NODE":i.Bun&&"string"==typeof Bun.version?"BUN":i.Deno&&"object"==typeof Deno.version?"DENO":"process"===n(i.process)?"NODE":i.window&&i.document?"BROWSER":"REST"})),ot=m(((e,t)=>{var i=st();t.exports="NODE"===i})),lt=m(((e,t)=>{var i=ae();t.exports=function(e,t,r){return i.f(e,t,r)}})),ut=m(((e,t)=>{var i=D(),r=lt(),n=ie(),a=R(),s=n("species");t.exports=function(e){var t=i(e);a&&t&&!t[s]&&r(t,s,{configurable:!0,get:function(){return this}})}})),ct=m(((e,t)=>{var i=B(),r=TypeError;t.exports=function(e,t){if(i(t,e))return e;throw new r("Incorrect invocation")}})),dt=m(((e,t)=>{var i=y(),r=C(),n=X(),a=i(Function.toString);r(n.inspectSource)||(n.inspectSource=function(e){return a(e)}),t.exports=n.inspectSource})),pt=m(((e,t)=>{var i=y(),r=v(),n=C(),a=Ne(),s=D(),o=dt(),l=function(){},u=s("Reflect","construct"),c=/^\s*(?:class|function)\b/,d=i(c.exec),p=!c.test(l),h=function(e){if(!n(e))return!1;try{return u(l,[],e),!0}catch{return!1}},f=function(e){if(!n(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(c,o(e))}catch{return!0}};f.sham=!0,t.exports=!u||r((function(){var e;return h(h.call)||!h(Object)||!h((function(){e=!0}))||e}))?f:h})),ht=m(((e,t)=>{var i=pt(),r=q(),n=TypeError;t.exports=function(e){if(i(e))return e;throw new n(r(e)+" is not a constructor")}})),ft=m(((e,t)=>{var i=I(),r=ht(),n=_(),a=ie()("species");t.exports=function(e,t){var s,o=i(e).constructor;return void 0===o||n(s=i(o)[a])?t:r(s)}})),mt=m(((e,t)=>{var i=y();t.exports=i([].slice)})),gt=m(((e,t)=>{var i=TypeError;t.exports=function(e,t){if(e<t)throw new i("Not enough arguments");return e}})),vt=m(((e,t)=>{var i=U();t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)})),bt=m(((e,t)=>{var i,r,n,a,s=A(),o=de(),l=ge(),u=C(),c=ee(),d=v(),p=ke(),h=mt(),f=P(),m=gt(),g=vt(),b=ot(),y=s.setImmediate,S=s.clearImmediate,$=s.process,_=s.Dispatch,T=s.Function,w=s.MessageChannel,E=s.String,x=0,k={},L="onreadystatechange";d((function(){i=s.location}));var R=function(e){if(c(k,e)){var t=k[e];delete k[e],t()}},O=function(e){return function(){R(e)}},M=function(e){R(e.data)},I=function(e){s.postMessage(E(e),i.protocol+"//"+i.host)};(!y||!S)&&(y=function(e){m(arguments.length,1);var t=u(e)?e:T(e),i=h(arguments,1);return k[++x]=function(){o(t,void 0,i)},r(x),x},S=function(e){delete k[e]},b?r=function(e){$.nextTick(O(e))}:_&&_.now?r=function(e){_.now(O(e))}:w&&!g?(a=(n=new w).port2,n.port1.onmessage=M,r=l(a.postMessage,a)):s.addEventListener&&u(s.postMessage)&&!s.importScripts&&i&&"file:"!==i.protocol&&!d(I)?(r=I,s.addEventListener("message",M,!1)):r=L in f("script")?function(e){p.appendChild(f("script"))[L]=function(){p.removeChild(this),R(e)}}:function(e){setTimeout(O(e),0)}),t.exports={set:y,clear:S}})),yt=m(((e,t)=>{var i=A(),r=R(),n=Object.getOwnPropertyDescriptor;t.exports=function(e){if(!r)return i[e];var t=n(i,e);return t&&t.value}})),St=m(((e,t)=>{var i=function(){this.head=null,this.tail=null};i.prototype={add:function(e){var t={item:e,next:null},i=this.tail;i?i.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},t.exports=i})),$t=m(((e,t)=>{var i=U();t.exports=/ipad|iphone|ipod/i.test(i)&&typeof Pebble<"u"})),_t=m(((e,t)=>{var i=U();t.exports=/web0s(?!.*chrome)/i.test(i)})),Tt=m(((e,t)=>{var i,r,n,a,s,o,l,u=A(),c=yt(),d=ge(),p=bt().set,h=St(),f=vt(),m=$t(),g=_t(),v=ot(),b=u.MutationObserver||u.WebKitMutationObserver,y=u.document,S=u.process,$=u.Promise,_=c("queueMicrotask");_||(o=new h,l=function(){var e,t;for(v&&(e=S.domain)&&e.exit();t=o.get();)try{t()}catch(e){throw o.head&&i(),e}e&&e.enter()},f||v||g||!b||!y?!m&&$&&$.resolve?((a=$.resolve(void 0)).constructor=$,s=d(a.then,a),i=function(){s(l)}):v?i=function(){S.nextTick(l)}:(p=d(p,u),i=function(){p(l)}):(r=!0,n=y.createTextNode(""),new b(l).observe(n,{characterData:!0}),i=function(){n.data=r=!r}),_=function(e){o.head||i(),o.add(e)}),t.exports=_})),wt=m(((e,t)=>{t.exports=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch{}}})),Et=m(((e,t)=>{t.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}})),xt=m(((e,t)=>{var i=A();t.exports=i.Promise})),At=m(((e,t)=>{var i=A(),r=xt(),n=C(),a=me(),s=dt(),o=ie(),l=st(),u=Y(),c=F(),d=r&&r.prototype,p=o("species"),h=!1,f=n(i.PromiseRejectionEvent),m=a("Promise",(function(){var e=s(r),t=e!==String(r);if(!t&&66===c||u&&(!d.catch||!d.finally))return!0;if(!c||c<51||!/native code/.test(e)){var i=new r((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};if((i.constructor={})[p]=n,!(h=i.then((function(){}))instanceof n))return!0}return!(t||"BROWSER"!==l&&"DENO"!==l||f)}));t.exports={CONSTRUCTOR:m,REJECTION_EVENT:f,SUBCLASSING:h}})),Ct=m(((e,t)=>{var i=W(),r=TypeError,n=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw new r("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)};t.exports.f=function(e){return new n(e)}})),kt=m((()=>{var e,t,i,r=ve(),n=Y(),a=ot(),s=A(),o=N(),l=Oe(),u=He(),c=De(),d=ut(),p=W(),h=C(),f=L(),m=ct(),g=ft(),v=bt().set,b=Tt(),y=wt(),S=Et(),$=St(),_=ce(),T=xt(),w=At(),E=Ct(),x="Promise",k=w.CONSTRUCTOR,R=w.REJECTION_EVENT,P=w.SUBCLASSING,O=_.getterFor(x),M=_.set,I=T&&T.prototype,V=T,D=I,B=s.TypeError,U=s.document,F=s.process,j=E.f,H=j,z=!!(U&&U.createEvent&&s.dispatchEvent),q="unhandledrejection",G=function(e){var t;return!(!f(e)||!h(t=e.then))&&t},Q=function(e,t){var i,r,n,a=t.value,s=1===t.state,l=s?e.ok:e.fail,u=e.resolve,c=e.reject,d=e.domain;try{l?(s||(2===t.rejection&&ee(t),t.rejection=1),!0===l?i=a:(d&&d.enter(),i=l(a),d&&(d.exit(),n=!0)),i===e.promise?c(new B("Promise-chain cycle")):(r=G(i))?o(r,i,u,c):u(i)):c(a)}catch(e){d&&!n&&d.exit(),c(e)}},K=function(e,t){e.notified||(e.notified=!0,b((function(){for(var i,r=e.reactions;i=r.get();)Q(i,e);e.notified=!1,t&&!e.rejection&&Z(e)})))},X=function(e,t,i){var r,n;z?((r=U.createEvent("Event")).promise=t,r.reason=i,r.initEvent(e,!1,!0),s.dispatchEvent(r)):r={promise:t,reason:i},!R&&(n=s["on"+e])?n(r):e===q&&y("Unhandled promise rejection",i)},Z=function(e){o(v,s,(function(){var t,i=e.facade,r=e.value;if(J(e)&&(t=S((function(){a?F.emit("unhandledRejection",r,i):X(q,i,r)})),e.rejection=a||J(e)?2:1,t.error))throw t.value}))},J=function(e){return 1!==e.rejection&&!e.parent},ee=function(e){o(v,s,(function(){var t=e.facade;a?F.emit("rejectionHandled",t):X("rejectionhandled",t,e.value)}))},te=function(e,t,i){return function(r){e(t,r,i)}},ie=function(e,t,i){e.done||(e.done=!0,i&&(e=i),e.value=t,e.state=2,K(e,!0))},re=function(e,t,i){if(!e.done){e.done=!0,i&&(e=i);try{if(e.facade===t)throw new B("Promise can't be resolved itself");var r=G(t);r?b((function(){var i={done:!1};try{o(r,t,te(re,i,e),te(ie,i,e))}catch(t){ie(i,t,e)}})):(e.value=t,e.state=1,K(e,!1))}catch(t){ie({done:!1},t,e)}}};if(k&&(D=(V=function(t){m(this,D),p(t),o(e,this);var i=O(this);try{t(te(re,i),te(ie,i))}catch(e){ie(i,e)}}).prototype,(e=function(e){M(this,{type:x,done:!1,notified:!1,parent:!1,reactions:new $,rejection:!1,state:0,value:void 0})}).prototype=l(D,"then",(function(e,t){var i=O(this),r=j(g(this,V));return i.parent=!0,r.ok=!h(e)||e,r.fail=h(t)&&t,r.domain=a?F.domain:void 0,0===i.state?i.reactions.add(r):b((function(){Q(r,i)})),r.promise})),t=function(){var t=new e,i=O(t);this.promise=t,this.resolve=te(re,i),this.reject=te(ie,i)},E.f=j=function(e){return e===V||undefined===e?new t(e):H(e)},!n&&h(T)&&I!==Object.prototype)){i=I.then,P||l(I,"then",(function(e,t){var r=this;return new V((function(e,t){o(i,r,e,t)})).then(e,t)}),{unsafe:!0});try{delete I.constructor}catch{}u&&u(I,D)}r({global:!0,constructor:!0,wrap:!0,forced:k},{Promise:V}),c(V,x,!1,!0),d(x)})),Lt=m(((e,t)=>{var i,r,n=ie()("iterator"),a=!1;try{i=0,(r={next:function(){return{done:!!i++}},return:function(){a=!0}})[n]=function(){return this},Array.from(r,(function(){throw 2}))}catch{}t.exports=function(e,t){try{if(!t&&!a)return!1}catch{return!1}var i=!1;try{var r={};r[n]=function(){return{next:function(){return{done:i=!0}}}},e(r)}catch{}return i}})),Rt=m(((e,t)=>{var i=xt(),r=Lt(),n=At().CONSTRUCTOR;t.exports=n||!r((function(e){i.all(e).then(void 0,(function(){}))}))})),Pt=m((()=>{var e=ve(),t=N(),i=W(),r=Ct(),n=Et(),a=Xe();e({target:"Promise",stat:!0,forced:Rt()},{all:function(e){var s=this,o=r.f(s),l=o.resolve,u=o.reject,c=n((function(){var r=i(s.resolve),n=[],o=0,c=1;a(e,(function(e){var i=o++,a=!1;c++,t(r,s,e).then((function(e){a||(a=!0,n[i]=e,--c||l(n))}),u)})),--c||l(n)}));return c.error&&u(c.value),o.promise}})})),Ot=m((()=>{var e,t=ve(),i=Y(),r=At().CONSTRUCTOR,n=xt(),a=D(),s=C(),o=Oe(),l=n&&n.prototype;t({target:"Promise",proto:!0,forced:r,real:!0},{catch:function(e){return this.then(void 0,e)}}),!i&&s(n)&&(e=a("Promise").prototype.catch,l.catch!==e&&o(l,"catch",e,{unsafe:!0}))})),Mt=m((()=>{var e=ve(),t=N(),i=W(),r=Ct(),n=Et(),a=Xe();e({target:"Promise",stat:!0,forced:Rt()},{race:function(e){var s=this,o=r.f(s),l=o.reject,u=n((function(){var r=i(s.resolve);a(e,(function(e){t(r,s,e).then(o.resolve,l)}))}));return u.error&&l(u.value),o.promise}})})),It=m((()=>{var e=ve(),t=Ct();e({target:"Promise",stat:!0,forced:At().CONSTRUCTOR},{reject:function(e){var i=t.f(this);return(0,i.reject)(e),i.promise}})})),Nt=m(((e,t)=>{var i=I(),r=L(),n=Ct();t.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var a=n.f(e);return(0,a.resolve)(t),a.promise}})),Vt=m((()=>{var e=ve(),t=D(),i=Y(),r=xt(),n=At().CONSTRUCTOR,a=Nt(),s=t("Promise"),o=i&&!n;e({target:"Promise",stat:!0,forced:i||n},{resolve:function(e){return a(o&&this===s?r:this,e)}})})),Dt=m((()=>{kt(),Pt(),Ot(),Mt(),It(),Vt()})),Bt=m((()=>{var e,t=ve(),i=Y(),r=xt(),n=v(),a=D(),s=C(),o=ft(),l=Nt(),u=Oe(),c=r&&r.prototype;t({target:"Promise",proto:!0,real:!0,forced:!!r&&n((function(){c.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=o(this,a("Promise")),i=s(e);return this.then(i?function(i){return l(t,e()).then((function(){return i}))}:e,i?function(i){return l(t,e()).then((function(){throw i}))}:e)}}),!i&&s(r)&&(e=a("Promise").prototype.finally,c.finally!==e&&u(c,"finally",e,{unsafe:!0}))})),Ut=m(((e,t)=>{var i=D();t.exports=i})),Ft=m(((e,t)=>{at(),Dt(),Bt();var i=Ut();t.exports=i("Promise","finally")})),jt=m(((e,t)=>{var i=Ft();t.exports=i})),Ht=m(((e,t)=>{var i=jt();t.exports=i})),zt=m((()=>{var e=ve(),t=J(),i=Te(),r=Se(),n=E();e({target:"Array",proto:!0},{at:function(e){var n=t(this),a=i(n),s=r(e),o=s>=0?s:a+s;return o<0||o>=a?void 0:n[o]}}),n("at")})),qt=m(((e,t)=>{zt();var i=Ut();t.exports=i("Array","at")})),Wt=m(((e,t)=>{var i=qt();t.exports=i})),Gt=m(((e,t)=>{var i=Wt();t.exports=i})),Qt=m((()=>{})),Yt=m((()=>{})),Kt=m(((e,t)=>{var i=L(),r=S(),n=ie()("match");t.exports=function(e){var t;return i(e)&&(void 0!==(t=e[n])?!!t:"RegExp"===r(e))}})),Xt=m(((e,t)=>{var i=Ne(),r=String;t.exports=function(e){if("Symbol"===i(e))throw new TypeError("Cannot convert a Symbol value to a string");return r(e)}})),Zt=m(((e,t)=>{var i=I();t.exports=function(){var e=i(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}})),Jt=m(((e,t)=>{var i=N(),r=ee(),n=B(),a=Zt(),s=RegExp.prototype;t.exports=function(e){var t=e.flags;return void 0!==t||"flags"in s||r(e,"flags")||!n(s,e)?t:i(a,e)}})),ei=m(((e,t)=>{var i=y(),r=J(),n=Math.floor,a=i("".charAt),s=i("".replace),o=i("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;t.exports=function(e,t,i,c,d,p){var h=i+e.length,f=c.length,m=u;return void 0!==d&&(d=r(d),m=l),s(p,m,(function(r,s){var l;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return o(t,0,i);case"'":return o(t,h);case"<":l=d[o(s,1,-1)];break;default:var u=+s;if(0===u)return r;if(u>f){var p=n(u/10);return 0===p?r:p<=f?void 0===c[p-1]?a(s,1):c[p-1]+a(s,1):r}l=c[u-1]}return void 0===l?"":l}))}})),ti=m((()=>{var e=ve(),t=N(),i=y(),r=T(),n=C(),a=_(),s=Kt(),o=Xt(),l=G(),u=Jt(),c=ei(),d=ie(),p=Y(),h=d("replace"),f=TypeError,m=i("".indexOf),g=i("".replace),v=i("".slice),b=Math.max;e({target:"String",proto:!0},{replaceAll:function(e,i){var d,y,S,$,_,T,w,E,x,A,C=r(this),k=0,L="";if(!a(e)){if((d=s(e))&&(y=o(r(u(e))),!~m(y,"g")))throw new f("`.replaceAll` does not allow non-global regexes");if(S=l(e,h))return t(S,e,C,i);if(p&&d)return g(o(C),e,i)}for($=o(C),_=o(e),(T=n(i))||(i=o(i)),w=_.length,E=b(1,w),x=m($,_);-1!==x;)A=T?o(i(_,x,$)):c(_,$,x,[],void 0,i),L+=v($,k,x)+A,k=x+w,x=x+E>$.length?-1:m($,_,x+E);return k<$.length&&(L+=v($,k)),L}})})),ii=m(((e,t)=>{Qt(),Yt(),ti();var i=Ut();t.exports=i("String","replaceAll")})),ri=m(((e,t)=>{var i=ii();t.exports=i})),ni=m(((e,t)=>{var i=ri();t.exports=i})),ai="2.0.117",si=((a=si||{}).STOPPED="stopped",a.READY="ready",a.PLAYING="playing",a.PAUSED="paused",a),oi=((n=oi||{}).MPEG="MPEG",n.DASH="DASH",n.DASH_SEP="DASH_SEP",n.DASH_SEP_VK="DASH_SEP",n.DASH_WEBM="DASH_WEBM",n.DASH_WEBM_AV1="DASH_WEBM_AV1",n.DASH_STREAMS="DASH_STREAMS",n.DASH_WEBM_VK="DASH_WEBM",n.DASH_ONDEMAND="DASH_ONDEMAND",n.DASH_ONDEMAND_VK="DASH_ONDEMAND",n.DASH_LIVE="DASH_LIVE",n.DASH_LIVE_CMAF="DASH_LIVE_CMAF",n.DASH_LIVE_WEBM="DASH_LIVE_WEBM",n.HLS="HLS",n.HLS_ONDEMAND="HLS_ONDEMAND",n.HLS_JS="HLS",n.HLS_LIVE="HLS_LIVE",n.HLS_LIVE_CMAF="HLS_LIVE_CMAF",n.WEB_RTC_LIVE="WEB_RTC_LIVE",n),li=(e=>(e.NOT_AVAILABLE="NOT_AVAILABLE",e.AVAILABLE="AVAILABLE",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED",e))(li||{}),ui=((s=ui||{}).HTTP1="http1",s.HTTP2="http2",s.QUIC="quic",s),ci=((o=ci||{}).NONE="none",o.INLINE="inline",o.FULLSCREEN="fullscreen",o.SECOND_SCREEN="second_screen",o.PIP="pip",o.INVISIBLE="invisible",o),di=class{connect(){cast.framework.CastContext.getInstance()?.requestSession()}disconnect(){cast.framework.CastContext.getInstance()?.getCurrentSession()?.endSession(!0)}stopMedia(){return new Promise(((e,t)=>{cast.framework.CastContext.getInstance()?.getCurrentSession()?.getMediaSession()?.stop(new chrome.cast.media.StopRequest,e,t)}))}toggleConnection(){(0,l.isNonNullable)(this.connection$.getValue())?this.disconnect():this.connect()}setVolume(e){let t=this.connection$.getValue();(0,l.isNullable)(t)||(t.remotePlayer.volumeLevel=e,t.remotePlayerController.setVolumeLevel())}setMuted(e){let t=this.connection$.getValue();(0,l.isNullable)(t)||e!==t.remotePlayer.isMuted&&t.remotePlayerController.muteOrUnmute()}destroy(){this.subscription.unsubscribe()}initListeners(){let e=new cast.framework.RemotePlayer,t=new cast.framework.RemotePlayerController(e),i=cast.framework.CastContext.getInstance();this.subscription.add((0,l.fromEvent)(i,cast.framework.CastContextEventType.SESSION_STATE_CHANGED).subscribe((e=>{switch(e.sessionState){case cast.framework.SessionState.SESSION_STARTED:case cast.framework.SessionState.SESSION_STARTING:case cast.framework.SessionState.SESSION_RESUMED:this.contentId=i.getCurrentSession()?.getMediaSession()?.media?.contentId;break;case cast.framework.SessionState.NO_SESSION:case cast.framework.SessionState.SESSION_ENDING:case cast.framework.SessionState.SESSION_ENDED:case cast.framework.SessionState.SESSION_START_FAILED:this.contentId=void 0;break;default:return(0,l.assertNever)(e.sessionState)}}))).add((0,l.merge)((0,l.fromEvent)(i,cast.framework.CastContextEventType.CAST_STATE_CHANGED).pipe((0,l.tap)((e=>{this.log({message:`[cast.framework.RemotePlayerEventType.CAST_STATE_CHANGED]: ${JSON.stringify(e)}`})})),(0,l.map)((e=>e.castState))),(0,l.observableFrom)([i.getCastState()])).pipe((0,l.filterChanged)(),(0,l.map)(pi),(0,l.tap)((e=>{this.log({message:`realCastState$: ${e}`})}))).subscribe(this.realCastState$)).add(this.realCastState$.subscribe((r=>{let n="CONNECTED"===r,a=(0,l.isNonNullable)(this.connection$.getValue());if(n&&!a){let r=i.getCurrentSession();(0,l.assertNonNullable)(r);let n=r.getCastDevice(),a=r.getMediaSession()?.media?.contentId;((0,l.isNullable)(a)||a===this.contentId)&&(this.log({message:"connection created"}),this.connection$.next({remotePlayer:e,remotePlayerController:t,session:r,castDevice:n}))}else!n&&a&&(this.log({message:"connection destroyed"}),this.connection$.next(void 0));this.castState$.next("CONNECTED"===r?(0,l.isNonNullable)(this.connection$.getValue())?"CONNECTED":"AVAILABLE":r)})))}initializeCastApi(){let e,t,i;try{e=cast.framework.CastContext.getInstance(),t=chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,i=chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}catch{return}try{e.setOptions({receiverApplicationId:this.params.receiverApplicationId??t,autoJoinPolicy:i}),this.initListeners()}catch(e){this.errorEvent$.next({id:"ChromecastInitializer",category:l.ErrorCategory.EXTERNAL_API,message:"[initializeCastApi] failed",thrown:e})}}constructor(e){this.connection$=new l.ValueSubject(void 0),this.castState$=new l.ValueSubject("NOT_AVAILABLE"),this.errorEvent$=new l.Subject,this.realCastState$=new l.ValueSubject("NOT_AVAILABLE"),this.subscription=new l.Subscription,this.params=e,this.log=this.params.dependencies.logger.createComponentLog("ChromecastInitializer");let t="chrome"in window;if(this.log({message:`[constructor] receiverApplicationId: ${this.params.receiverApplicationId}, isDisabled: ${this.params.isDisabled}, isSupported: ${t}`}),e.isDisabled||!t)return;let i=(0,l.isNonNullable)(window.chrome?.cast),r=!!window.__onGCastApiAvailable;var n;i?this.initializeCastApi():(window.__onGCastApiAvailable=e=>{delete window.__onGCastApiAvailable,e&&this.initializeCastApi()},r||(n="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",new Promise(((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=()=>e,i.onerror=()=>t,document.body.appendChild(i)}))).catch((()=>this.errorEvent$.next({id:"ChromecastLoading",category:l.ErrorCategory.NETWORK,message:"Script loading failed!"}))))}},pi=e=>{switch(e){case cast.framework.CastState.NO_DEVICES_AVAILABLE:return"NOT_AVAILABLE";case cast.framework.CastState.NOT_CONNECTED:return"AVAILABLE";case cast.framework.CastState.CONNECTING:return"CONNECTING";case cast.framework.CastState.CONNECTED:return"CONNECTED";default:return(0,l.assertNever)(e)}},hi=g(nt(),1),fi=g(Ht(),1),mi=(e,t=0,i=0)=>{switch(i){case 0:return e.replace("_offset_p",0===t?"":"_"+t.toFixed(0));case 1:{if(0===t)return e;let i=new URL(e);return i.searchParams.append("playback_shift",t.toFixed(0)),i.toString()}case 2:{let i=new URL(e);return i.searchParams.get("offset_p")||0!==t?(i.searchParams.set("offset_p",t.toFixed(0)),i.toString()):e}default:(0,l.assertNever)(i)}return e},gi=(e,t)=>{switch(t){case 0:return NaN;case 1:{let t=new URL(e);return Number(t.searchParams.get("playback_shift"))}case 2:{let t=new URL(e);return Number(t.searchParams.get("offset_p")??0)}default:(0,l.assertNever)(t)}},vi=(e,t,i=!1)=>{let r=e.getTransition();(i||!r||r.to===t)&&e.setState(t)},bi=class{setState(e){let t=this.transition,i=this.state;this.transition=void 0,this.prevState=i,this.state=e,t?t.to===e?this.transitionEnded$.next(t):this.forceChanged$.next({from:t.from,to:e,canceledTransition:t}):this.forceChanged$.next({from:i,to:e,canceledTransition:t})}startTransitionTo(e){let t=this.transition,i=this.state;i===e||(0,l.isNonNullable)(t)&&t.to===e||(this.prevState=i,this.state=e,t?(this.transition={from:t.from,to:e,canceledTransition:t},this.transitionUpdated$.next(this.transition)):(this.transition={from:i,to:e},this.transitionStarted$.next(this.transition)))}getTransition(){return this.transition}getState(){return this.state}getPrevState(){return this.prevState}constructor(e){this.transitionStarted$=new l.Subject,this.transitionEnded$=new l.Subject,this.transitionUpdated$=new l.Subject,this.forceChanged$=new l.Subject,this.stateChangeStarted$=(0,l.merge)(this.transitionStarted$,this.transitionUpdated$),this.stateChangeEnded$=(0,l.merge)(this.transitionEnded$,this.forceChanged$),this.state=e,this.prevState=void 0}},yi=class{destroy(){this.log({message:"[destroy]"}),this.subscription.unsubscribe()}subscribe(){this.subscription.add(this.loadMediaTimeoutSubscription);let e=new l.Subscription;this.subscription.add(e),this.subscription.add((0,l.merge)(this.videoState.stateChangeStarted$.pipe((0,l.map)((e=>`stateChangeStarted$ ${JSON.stringify(e)}`))),this.videoState.stateChangeEnded$.pipe((0,l.map)((e=>`stateChangeEnded$ ${JSON.stringify(e)}`)))).subscribe((e=>this.log({message:`[videoState] ${e}`}))));let t=(e,t)=>this.subscription.add(e.subscribe(t));if(this.params.output.isLive$.getValue())this.params.output.position$.next(0),this.params.output.duration$.next(0);else{let t=new l.Subject;e.add(t.pipe((0,l.debounce)(500)).subscribe((()=>{this.params.output.seekedEvent$.next()})));let i=NaN;e.add((0,l.fromEvent)(this.params.connection.remotePlayerController,cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED).subscribe((e=>{this.logRemoteEvent(e);let r=e.value;this.params.output.position$.next(r),("applying"===this.params.desiredState.seekState.getState().state||Math.abs(r-i)>5)&&t.next(r),i=r}))),e.add((0,l.fromEvent)(this.params.connection.remotePlayerController,cast.framework.RemotePlayerEventType.DURATION_CHANGED).subscribe((e=>{this.logRemoteEvent(e),this.params.output.duration$.next(e.value)})))}t((0,l.fromEvent)(this.params.connection.remotePlayerController,cast.framework.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED),(t=>{this.logRemoteEvent(t),t.value?this.handleRemoteReady():(this.handleRemoteStop(),e.unsubscribe())})),t((0,l.fromEvent)(this.params.connection.remotePlayerController,cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED),(e=>{this.logRemoteEvent(e),e.value?this.handleRemotePause():this.handleRemotePlay()})),t((0,l.fromEvent)(this.params.connection.remotePlayerController,cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED),(e=>{this.logRemoteEvent(e);let{remotePlayer:t}=this.params.connection,i=e.value,r=this.params.output.isBuffering$.getValue(),n=i===chrome.cast.media.PlayerState.BUFFERING;switch(r!==n&&this.params.output.isBuffering$.next(n),i){case chrome.cast.media.PlayerState.IDLE:!this.params.output.isLive$.getValue()&&t.duration-t.currentTime<5&&this.params.output.endedEvent$.next(),this.handleRemoteStop(),vi(this.params.desiredState.playbackState,"stopped");break;case chrome.cast.media.PlayerState.PAUSED:this.handleRemotePause();break;case chrome.cast.media.PlayerState.PLAYING:this.handleRemotePlay();break;case chrome.cast.media.PlayerState.BUFFERING:break;default:(0,l.assertNever)(i)}})),t((0,l.fromEvent)(this.params.connection.remotePlayerController,cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED),(e=>{this.logRemoteEvent(e),this.handleRemoteVolumeChange({volume:e.value})})),t((0,l.fromEvent)(this.params.connection.remotePlayerController,cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED),(e=>{this.logRemoteEvent(e),this.handleRemoteVolumeChange({muted:e.value})})),t((0,l.merge)(this.params.desiredState.playbackState.stateChangeStarted$,this.params.desiredState.seekState.stateChangeEnded$,this.videoState.stateChangeEnded$,(0,l.observableFrom)(["init"])).pipe((0,l.debounce)(0)),this.syncPlayback)}restoreSession(e){this.log({message:"restoreSession"});let{remotePlayer:t}=this.params.connection;if(e.playerState!==chrome.cast.media.PlayerState.IDLE){t.isPaused?(this.videoState.setState("paused"),vi(this.params.desiredState.playbackState,"paused")):(this.videoState.setState("playing"),vi(this.params.desiredState.playbackState,"playing"));let e=this.params.output.isLive$.getValue();this.params.output.duration$.next(e?0:t.duration),this.params.output.position$.next(e?0:t.currentTime),this.params.desiredState.seekState.setState({state:"none"})}}prepare(){let e=this.params.format;this.log({message:`[prepare] format: ${e}`});let t=this.createMediaInfo(e),i=this.createLoadRequest(t);this.loadMedia(i)}handleRemotePause(){let e=this.videoState.getState();("paused"===this.videoState.getTransition()?.to||"playing"===e)&&(this.videoState.setState("paused"),vi(this.params.desiredState.playbackState,"paused"))}handleRemotePlay(){let e=this.videoState.getState();("playing"===this.videoState.getTransition()?.to||"paused"===e)&&(this.videoState.setState("playing"),vi(this.params.desiredState.playbackState,"playing"))}handleRemoteReady(){"ready"===this.videoState.getTransition()?.to&&this.videoState.setState("ready"),"ready"===this.params.desiredState.playbackState.getTransition()?.to&&vi(this.params.desiredState.playbackState,"ready")}handleRemoteStop(){"stopped"!==this.videoState.getState()&&this.videoState.setState("stopped")}handleRemoteVolumeChange(e){let t=this.params.output.volume$.getValue(),i={volume:e.volume??t.volume,muted:e.muted??t.muted};(i.volume!==t.volume||i.muted!=i.muted)&&this.params.output.volume$.next(i)}seek(e){this.params.output.willSeekEvent$.next();let{remotePlayer:t,remotePlayerController:i}=this.params.connection;t.currentTime=e,i.seek()}stop(){let{remotePlayerController:e}=this.params.connection;e.stop()}createMediaInfo(e){let t,i,r,n=this.params.source;switch(e){case"MPEG":{let a=n[e];(0,l.assertNonNullable)(a);let s=(0,l.getHighestQuality)(Object.keys(a));(0,l.assertNonNullable)(s);let o=a[s];(0,l.assertNonNullable)(o),t=o,i="video/mp4",r=chrome.cast.media.StreamType.BUFFERED;break}case"HLS":case"HLS_ONDEMAND":{let a=n[e];(0,l.assertNonNullable)(a),t=a.url,i="application/x-mpegurl",r=chrome.cast.media.StreamType.BUFFERED;break}case"DASH_SEP":case"DASH_ONDEMAND":case"DASH_WEBM":case"DASH_WEBM_AV1":case"DASH_STREAMS":{let a=n[e];(0,l.assertNonNullable)(a),t=a.url,i="application/dash+xml",r=chrome.cast.media.StreamType.BUFFERED;break}case"DASH_LIVE_CMAF":{let a=n[e];(0,l.assertNonNullable)(a),t=a.url,i="application/dash+xml",r=chrome.cast.media.StreamType.LIVE;break}case"HLS_LIVE":case"HLS_LIVE_CMAF":{let a=n[e];(0,l.assertNonNullable)(a),t=mi(a.url),i="application/x-mpegurl",r=chrome.cast.media.StreamType.LIVE;break}case"DASH_LIVE":case"WEB_RTC_LIVE":{let e="Unsupported format for Chromecast",t=new Error(e);throw this.params.output.error$.next({id:"ChromecastProvider.createMediaInfo()",category:l.ErrorCategory.VIDEO_PIPELINE,message:e,thrown:t}),t}case"DASH":case"DASH_LIVE_WEBM":throw new Error(`${e} is no longer supported`);default:return(0,l.assertNever)(e)}let a=new chrome.cast.media.MediaInfo(this.params.meta.videoId??t,i);a.contentUrl=t,a.streamType=r,a.metadata=new chrome.cast.media.GenericMediaMetadata;let{title:s,subtitle:o}=this.params.meta;return(0,l.isNonNullable)(s)&&(a.metadata.title=s),(0,l.isNonNullable)(o)&&(a.metadata.subtitle=o),a}createLoadRequest(e){let t=new chrome.cast.media.LoadRequest(e);t.autoplay=!1;let i=this.params.desiredState.seekState.getState();return"applying"===i.state||"requested"===i.state?t.currentTime=this.params.output.isLive$.getValue()?0:i.position/1e3:t.currentTime=0,t}loadMedia(e){let t=this.params.connection.session.loadMedia(e),i=new Promise(((e,t)=>{this.loadMediaTimeoutSubscription.add((0,l.timeout)(7e3).subscribe((()=>t("timeout(7000)"))))}));(0,fi.default)(Promise.race([t,i]).then((()=>{this.log({message:`[loadMedia] completed, format: ${this.params.format}`}),"applying"===this.params.desiredState.seekState.getState().state&&this.params.output.seekedEvent$.next(),this.handleRemoteReady()}),(e=>{let t=`[prepare] loadMedia failed, format: ${this.params.format}, reason: ${e}`;this.log({message:t}),this.params.output.error$.next({id:"ChromecastProvider.loadMedia",category:l.ErrorCategory.VIDEO_PIPELINE,message:t,thrown:e})})),(()=>{this.loadMediaTimeoutSubscription.unsubscribe()}))}logRemoteEvent(e){this.log({message:`[remoteEvent] ${JSON.stringify(e)}`})}constructor(e){this.subscription=new l.Subscription,this.loadMediaTimeoutSubscription=new l.Subscription,this.videoState=new bi("stopped"),this.syncPlayback=()=>{let e=this.videoState.getState(),t=this.videoState.getTransition(),i=this.params.desiredState.playbackState.getState(),r=this.params.desiredState.playbackState.getTransition(),n=this.params.desiredState.seekState.getState();if(this.log({message:`[syncPlayback] videoState: ${e}; videoTransition: ${JSON.stringify(t)}; desiredPlaybackState: ${i}; desiredPlaybackStateTransition: ${this.params.desiredState.playbackState.getTransition()}; seekState: ${JSON.stringify(n)};`}),"stopped"!==i){if(!t){if("paused"!==r?.to&&"requested"===n.state&&"stopped"!==e)return void this.seek(n.position/1e3);switch(i){case"ready":switch(e){case"playing":case"paused":case"ready":break;case"stopped":this.videoState.startTransitionTo("ready"),this.prepare();break;default:(0,l.assertNever)(e)}break;case"playing":switch(e){case"playing":break;case"paused":case"ready":this.videoState.startTransitionTo("playing"),this.params.connection.remotePlayerController.playOrPause();break;case"stopped":this.videoState.startTransitionTo("ready"),this.prepare();break;default:(0,l.assertNever)(e)}break;case"paused":switch(e){case"playing":this.videoState.startTransitionTo("paused"),this.params.connection.remotePlayerController.playOrPause();break;case"paused":break;case"ready":this.videoState.startTransitionTo("paused"),this.videoState.setState("paused");break;case"stopped":this.videoState.startTransitionTo("ready"),this.prepare();break;default:(0,l.assertNever)(e)}break;default:(0,l.assertNever)(i)}}}else"stopped"!==e&&(this.videoState.startTransitionTo("stopped"),this.stop())},this.params=e,this.log=this.params.dependencies.logger.createComponentLog("ChromecastProvider"),this.log({message:`constructor, format: ${e.format}`}),this.params.output.isLive$.next((e=>{switch(e){case"MPEG":case"DASH":case"DASH_SEP":case"DASH_ONDEMAND":case"DASH_WEBM":case"DASH_WEBM_AV1":case"DASH_STREAMS":case"HLS":case"HLS_ONDEMAND":return!1;case"DASH_LIVE":case"DASH_LIVE_CMAF":case"HLS_LIVE":case"HLS_LIVE_CMAF":case"DASH_LIVE_WEBM":case"WEB_RTC_LIVE":return!0;default:return(0,l.assertNever)(e)}})(e.format)),this.params.output.isAudioAvailable$.next(!0),this.handleRemoteVolumeChange({volume:this.params.connection.remotePlayer.volumeLevel,muted:this.params.connection.remotePlayer.isMuted});let t=this.params.connection.session.getMediaSession();t&&this.restoreSession(t),this.subscribe()}},Si=window.WeakMap?new WeakMap:new class{get(e){return e.hasAttribute(this.attribute)}set(e,t){e.toggleAttribute(this.attribute,t)}delete(e){e.removeAttribute(this.attribute)}constructor(){this.attribute="data-pool-reused"}},$i=window.WeakMap?new WeakMap:new Map,_i=(e,{audioVideoSyncRate:t})=>{let i=e.querySelector("video"),r=!!i;i?(0,l.clearVideoElement)(i):(i=document.createElement("video"),e.appendChild(i)),Si.set(i,r);let n=new l.Subscription;return n.add(((e,t=20)=>{let i=0;return(0,l.fromEvent)(e,"ratechange").subscribe((r=>{i++,i>=t&&(e.currentTime=e.currentTime,i=0)}))})(i,t)),$i.set(i,n),i.setAttribute("crossorigin","anonymous"),i.setAttribute("playsinline","playsinline"),i.controls=!1,i.setAttribute("poster","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),i},Ti=e=>{$i.get(e)?.unsubscribe(),$i.delete(e);let t=Si.get(e);Si.delete(e),t?(0,l.clearVideoElement)(e):(e=>{try{e.pause(),e.playbackRate=0,(0,l.clearVideoElement)(e),e.remove()}catch(e){console.error(e)}})(e)},wi=(e,t,i,{equal:r=((e,t)=>e===t),changed$:n,onError:a}={})=>{let s=e.getState(),o=t(),u=(0,l.isNullable)(n),c=new l.Subscription;return n&&c.add(n.subscribe((t=>{let i=e.getState();r(t,i)&&e.setState(t)}),a)),r(o,s)||(i(s),u&&e.setState(s)),c.add(e.stateChangeStarted$.subscribe((t=>{i(t.to),u&&e.setState(t.to)}),a)),c},Ei=(e,t,i)=>wi(t,(()=>e.loop),(t=>{(0,l.isNonNullable)(t)&&(e.loop=t)}),{onError:i}),xi=(e,t,i,r)=>wi(t,(()=>({muted:e.muted,volume:e.volume})),(t=>{(0,l.isNonNullable)(t)&&(e.muted=t.muted,e.volume=t.volume)}),{equal:(e,t)=>e===t||e?.muted===t?.muted&&e?.volume===t?.volume,changed$:i,onError:r}),Ai=(e,t,i,r)=>wi(t,(()=>e.playbackRate),(t=>{(0,l.isNonNullable)(t)&&(e.playbackRate=t)}),{changed$:i,onError:r}),Ci=wi,ki=(e,t)=>{if(e.id===t)return!0;let[i,r,n]=t.split("|");return e.language===r&&e.label===n},Li=class e{connect(e,t,i){this.video=e,this.cueSettings=t.textTrackCuesSettings,this.subscribe();let r=e=>{this.error$.next({id:"TextTracksManager",category:l.ErrorCategory.WTF,message:"Generic HtmlVideoTextTrackManager error",thrown:e})};this.subscription.add(this.available$.subscribe(i.availableTextTracks$)),this.subscription.add(this.current$.subscribe(i.currentTextTrack$)),this.subscription.add(this.error$.subscribe(i.error$)),this.subscription.add(Ci(t.internalTextTracks,(()=>Object.values(this.internalTracks)),(e=>{(0,l.isNonNullable)(e)&&this.setInternal(e)}),{equal:(e,t)=>(0,l.isNonNullable)(e)&&(0,l.isNonNullable)(t)&&e.length===t.length&&e.every((({id:e},i)=>e===t[i].id)),changed$:this.available$.pipe((0,l.map)((e=>e.filter((({type:e})=>"internal"===e))))),onError:r})),this.subscription.add(Ci(t.externalTextTracks,(()=>Object.values(this.externalTracks)),(e=>{(0,l.isNonNullable)(e)&&this.setExternal(e)}),{equal:(e,t)=>(0,l.isNonNullable)(e)&&(0,l.isNonNullable)(t)&&e.length===t.length&&e.every((({id:e},i)=>e===t[i].id)),changed$:this.available$.pipe((0,l.map)((e=>e.filter((({type:e})=>"external"===e))))),onError:r})),this.subscription.add(Ci(t.currentTextTrack,(()=>{if(this.video)return;let e=this.htmlTextTracksAsArray().find((({mode:e})=>"showing"===e));return e&&this.htmlTextTrackToITextTrack(e).id}),(e=>this.select(e)),{changed$:this.current$,onError:r})),this.subscription.add(Ci(t.textTrackCuesSettings,(()=>({})),(()=>{if(this.video)for(let e of this.htmlTextTracksAsArray())this.applyCueSettings(e.cues),this.applyCueSettings(e.activeCues)})))}subscribe(){(0,l.assertNonNullable)(this.video);let{textTracks:e}=this.video;this.subscription.add((0,l.fromEvent)(e,"addtrack").subscribe((()=>{let e=this.current$.getValue();e&&this.select(e)}))),this.subscription.add((0,l.merge)((0,l.fromEvent)(e,"addtrack"),(0,l.fromEvent)(e,"removetrack"),(0,l.observableFrom)(["init"])).pipe((0,l.map)((()=>this.htmlTextTracksAsArray().map((e=>this.htmlTextTrackToITextTrack(e))))),(0,l.filterChanged)(((e,t)=>e.length===t.length&&e.every((({id:e},i)=>e===t[i].id))))).subscribe(this.available$)),this.subscription.add((0,l.merge)((0,l.fromEvent)(e,"change"),(0,l.observableFrom)(["init"])).pipe((0,l.map)((()=>this.htmlTextTracksAsArray().find((({mode:e})=>"showing"===e)))),(0,l.map)((e=>e&&this.htmlTextTrackToITextTrack(e).id)),(0,l.filterChanged)()).subscribe(this.current$));let t=e=>this.applyCueSettings(e.target?.activeCues??null);this.subscription.add((0,l.fromEvent)(e,"addtrack").subscribe((e=>{e.track?.addEventListener("cuechange",t);let i=e=>{let t=e.target?.cues??null;t&&t.length&&(this.applyCueSettings(e.target?.cues??null),e.target?.removeEventListener("cuechange",i))};e.track?.addEventListener("cuechange",i)}))),this.subscription.add((0,l.fromEvent)(e,"removetrack").subscribe((e=>{e.track?.removeEventListener("cuechange",t)})))}applyCueSettings(e){if(!e||!e.length)return;let t=this.cueSettings.getState();for(let i of Array.from(e)){let e=i;(0,l.isNonNullable)(t.align)&&(e.align=t.align),(0,l.isNonNullable)(t.position)&&(e.position=t.position),(0,l.isNonNullable)(t.size)&&(e.size=t.size),(0,l.isNonNullable)(t.line)&&(e.line=t.line)}}htmlTextTracksAsArray(t=!1){(0,l.assertNonNullable)(this.video);let i=[...this.video.textTracks];return t?i:i.filter(e.isHealthyTrack)}htmlTextTrackToITextTrack(e){let{language:t,label:i}=e,r=e.id?e.id:(e=>["__",e.language,e.label].join("|"))(e),n=this.externalTracks.has(r),a=(n?this.externalTracks.get(r)?.isAuto:this.internalTracks.get(r)?.isAuto)??r.includes("auto");return n?{id:r,type:"external",isAuto:a,language:t,label:i,url:this.externalTracks.get(r)?.url}:{id:r,type:"internal",isAuto:a,language:t,label:i,url:this.internalTracks.get(r)?.url}}static isHealthyTrack(e){return!("metadata"===e.kind||e.groupId||""===e.id&&""===e.label&&""===e.language)}setExternal(e){this.internalTracks.size>0&&Array.from(this.internalTracks).forEach((([,e])=>this.detach(e))),e.filter((({id:e})=>!this.externalTracks.has(e))).forEach((e=>this.attach(e))),Array.from(this.externalTracks).filter((([t])=>!e.find((e=>e.id===t)))).forEach((([,e])=>this.detach(e)))}setInternal(e){let t=[...this.externalTracks];e.filter((({id:e,language:i,isAuto:r})=>!this.internalTracks.has(e)&&!t.some((([,e])=>e.language===i&&e.isAuto===r)))).forEach((e=>this.attach(e))),Array.from(this.internalTracks).filter((([t])=>!e.find((e=>e.id===t)))).forEach((([,e])=>this.detach(e)))}select(e){(0,l.assertNonNullable)(this.video);for(let e of this.htmlTextTracksAsArray(!0))e.mode="showing";for(let t of this.htmlTextTracksAsArray(!0))((0,l.isNullable)(e)||!ki(t,e))&&(t.mode="disabled")}destroy(){if(this.subscription.unsubscribe(),this.video)for(let e of Array.from(this.video.getElementsByTagName("track"))){let t=e.getAttribute("id");t&&this.externalTracks.has(t)&&this.video.removeChild(e)}this.externalTracks.clear()}attach(e){(0,l.assertNonNullable)(this.video);let t=document.createElement("track");t.setAttribute("src",e.url),t.setAttribute("id",e.id),e.label&&t.setAttribute("label",e.label),e.language&&t.setAttribute("srclang",e.language),"external"===e.type?this.externalTracks.set(e.id,e):"internal"===e.type&&this.internalTracks.set(e.id,e),this.video.appendChild(t)}detach(e){(0,l.assertNonNullable)(this.video);let t=Array.prototype.find.call(this.video.getElementsByTagName("track"),(t=>t.getAttribute("id")===e.id));t&&this.video.removeChild(t),"external"===e.type?this.externalTracks.delete(e.id):"internal"===e.type&&this.internalTracks.delete(e.id)}constructor(){this.available$=new l.Subject,this.current$=new l.ValueSubject(void 0),this.error$=new l.Subject,this.subscription=new l.Subscription,this.externalTracks=new Map,this.internalTracks=new Map}},Ri=class{getTotalPausedTime(){return this.pausedTime+this.getCurrentPausedTime()}getCurrentPausedTime(){return this.pauseTimestamp>0?Date.now()-this.pauseTimestamp:0}getStreamOffset(){return this.streamOffset}getTotalOffset(){return this.getTotalPausedTime()+this.streamOffset}pause(){0===this.pauseTimestamp&&(this.pauseTimestamp=Date.now())}resume(){this.pauseTimestamp>0&&(this.pausedTime+=this.getCurrentPausedTime(),this.pauseTimestamp=0)}resetTo(e,t=!1){this.streamOffset=e,this.pauseTimestamp=0,this.pausedTime=0,t&&this.pause()}constructor(){this.pausedTime=0,this.streamOffset=0,this.pauseTimestamp=0}},Pi=e=>{let t=e;for(;!(t instanceof Document||t instanceof ShadowRoot||null===t);)t=t?.parentNode;return t??void 0},Oi=e=>{let t=Pi(e);return!(!t||!t.fullscreenElement||t.fullscreenElement!==e)},Mi=e=>{let t,i=t=>(0,l.fromEvent)(e,t).pipe((0,l.mapTo)(void 0)),r=(0,l.merge)(...["waiting","pause","canplay","play","canplaythrough","playing","seeking","seeked","ended"].map((t=>(0,l.fromEvent)(e,t)))).pipe((0,l.map)((t=>"ended"===t.type?e.readyState<2:e.readyState<3)),(0,l.filterChanged)()),n=(0,l.merge)((0,l.fromEvent)(e,"progress"),(0,l.fromEvent)(e,"timeupdate")).pipe((0,l.map)((()=>((e,t,i=3)=>{let r=0,n=0;for(let a=0;a<e.length;a++){let s=e.start(a),o=e.end(a);if(s<=t&&t<=o){if(r=s,n=o,!i)return{from:r,to:n};for(let t=a-1;t>=0;t--)e.end(t)+i>=r&&(r=e.start(t));for(let t=a+1;t<e.length;t++)e.start(t)-i<=n&&(n=e.end(t))}}return{from:r,to:n}})(e.buffered,e.currentTime)))),a=l.clientChecker.isSafari?(0,l.combine)({play:i("play").pipe((0,l.once)()),playing:i("playing")}).pipe((0,l.mapTo)(void 0)):i("playing"),s=(0,l.fromEvent)(e,"volumechange").pipe((0,l.map)((()=>({muted:e.muted,volume:e.volume})))),o=(0,l.fromEvent)(e,"ratechange").pipe((0,l.map)((()=>e.playbackRate))),u=(0,l.fromEvent)(e,"error").pipe((0,l.filter)((()=>!(!e.error&&!e.played.length))),(0,l.map)((()=>{let t=e.error;return{id:t?`MediaError#${t.code}`:"HtmlVideoError",category:l.ErrorCategory.VIDEO_PIPELINE,message:t?t.message:"Error event from HTML video element",thrown:e.error??void 0}}))),c=(0,l.fromEvent)(e,"timeupdate").pipe((0,l.map)((()=>e.currentTime))),d=new l.Subject;c.subscribe((i=>{e.loop&&(0,l.isNonNullable)(t)&&(0,l.isNonNullable)(i)&&t>=e.duration-.3&&i<=.3&&d.next(t),t=i}));let p=i("pause").pipe((0,l.filter)((()=>!e.error&&t!==e.duration))),h=(0,l.fromEvent)(e,"enterpictureinpicture"),f=(0,l.fromEvent)(e,"leavepictureinpicture"),m=new l.ValueSubject((e=>{let t=Pi(e);return!(!t||!t.pictureInPictureElement||t.pictureInPictureElement!==e)})(e));h.subscribe((()=>m.next(!0))),f.subscribe((()=>m.next(!1)));let g=new l.ValueSubject(Oi(e));return(0,l.fromEvent)(e,"fullscreenchange").pipe((0,l.map)((()=>Oi(e)))).subscribe(g),{playing$:a,pause$:p,canplay$:i("canplay"),ended$:i("ended"),looped$:d,error$:u,seeked$:i("seeked"),seeking$:i("seeking"),progress$:i("progress"),loadStart$:i("loadstart"),loadedMetadata$:i("loadedmetadata"),loadedData$:i("loadeddata"),timeUpdate$:c,durationChange$:(0,l.fromEvent)(e,"durationchange").pipe((0,l.map)((()=>e.duration))),isBuffering$:r,currentBuffer$:n,volumeState$:s,playbackRateState$:o,inPiP$:m,inFullscreen$:g}},Ii=e=>{switch(e){case"mobile":return l.VideoQuality.Q_144P;case"lowest":return l.VideoQuality.Q_240P;case"low":return l.VideoQuality.Q_360P;case"sd":case"medium":return l.VideoQuality.Q_480P;case"hd":case"high":return l.VideoQuality.Q_720P;case"fullhd":case"full":return l.VideoQuality.Q_1080P;case"quadhd":case"quad":return l.VideoQuality.Q_1440P;case"ultrahd":case"ultra":return l.VideoQuality.Q_2160P}},Ni=g(Gt(),1),Vi=!1,Di={},Bi=e=>{e(Di)},Ui=(e,t)=>{Vi&&(Di.meta=Di.meta??{},Di.meta[e]=t)},Fi=class{next(e){if(!Vi)return;Di.series=Di.series??{};let t=Di.series[this.name]??[];t.push([Date.now(),e]),Di.series[this.name]=t}constructor(e){this.name=e}},ji=new Fi("best_bitrate"),Hi=(e,t,i)=>(t-i)*Math.pow(2,-10*e)+i,zi=e=>(t,i)=>e*(Number(t.bitrate)-Number(i.bitrate)),qi=class{recordSelection(e){this.history[e.id]=(0,l.now)()}recordSwitch(e){this.last=e}clear(){this.last=void 0,this.history={}}constructor(){this.history={}}},Wi='Assertion "ABR Tracks is empty array" failed',Gi=(e,t,i,r)=>{let n=[...t].sort(zi(1)),a=[...i].sort(zi(1)),s=a.filter((t=>!(0,l.isNonNullable)(t.bitrate)||!(0,l.isNonNullable)(e.bitrate)||e.bitrate/t.bitrate>r)),o=(0,Ni.default)(a,Math.round(a.length*n.indexOf(e)/(n.length+1)))??(0,Ni.default)(a,-1);return o&&s.includes(o)?o:s.length?(0,Ni.default)(s,-1):(0,Ni.default)(a,0)},Qi=e=>"quality"in e,Yi=(e,t,i,r)=>{let n=(0,l.isNonNullable)(r?.last?.bitrate)&&(0,l.isNonNullable)(i?.bitrate)&&r.last.bitrate<i.bitrate?e.trackCooldownIncreaseQuality:e.trackCooldownDecreaseQuality,a=i&&r&&r.history[i.id]&&(0,l.now)()-r.history[i.id]<=n&&(!r.last||i.id!==r.last.id);if(i?.id&&r&&!a&&r.recordSelection(i),a&&r?.last){let e=r.last;return r?.recordSwitch(e),t({message:`\n    [last ${Qi(e)?"video":"audio"} selected] ${Qi(e)?e.quality:e.bitrate}\n    `}),e}return r?.recordSwitch(i),i},Ki=(e,{container:t,estimatedThroughput:i,tuning:r,limits:n,reserve:a=0,forwardBufferHealth:s,playbackRate:o,current:u,history:c,visible:d,droppedVideoMaxQualityLimit:p,stallsVideoMaxQualityLimit:h,stallsPredictedThroughput:f,abrLogger:m})=>{(0,l.assertNotEmptyArray)(e,Wi);let g=r.containerSizeFactor;if(r.usePixelRatio&&window.devicePixelRatio){let e=window.devicePixelRatio;if(r.pixelRatioMultiplier)g*=r.pixelRatioMultiplier*(e-1)+1;else{let t=r.pixelRatioLogBase,[i=0,n=0,a=0]=r.pixelRatioLogCoefficients,s=((e,t)=>Math.log(t)/Math.log(e))(t,i*e+n)+a;Number.isFinite(s)&&(g*=s)}}let v=r.limitByContainer&&t&&t.width>0&&t.height>0?{width:t.width*g,height:t.height*g}:void 0,b=r.considerPlaybackRate&&(0,l.isNonNullable)(o)?o:1,y=e.filter((e=>!(0,l.isInvariantQuality)(e.quality))).sort(((e,t)=>(0,l.isHigher)(e.quality,t.quality)?-1:1)),S=(0,Ni.default)(y,-1)?.quality,$=(0,Ni.default)(y,0)?.quality,_=(0,l.isNullable)(n)||(0,l.isNonNullable)(n.min)&&(0,l.isNonNullable)(n.max)&&(0,l.isLower)(n.max,n.min)||(0,l.isNonNullable)(n.min)&&$&&(0,l.isHigher)(n.min,$)||(0,l.isNonNullable)(n.max)&&S&&(0,l.isLower)(n.max,S),T=b*Hi(s??.5,r.bitrateFactorAtEmptyBuffer,r.bitrateFactorAtFullBuffer),w={},E=y.filter((e=>{let t=!0;if(v)if(e.size)t=e.size.width<=v.width&&e.size.height<=v.height;else{let i=v&&(0,l.videoSizeToQuality)(v);t=!i||(0,l.isLowerOrEqual)(e.quality,i)}if(!t)return w[e.quality]="FitsContainer",!1;let o=f||i;if((0,l.isNonNullable)(o)&&isFinite(o)&&(0,l.isNonNullable)(e.bitrate)&&!(o-a>=e.bitrate*T))return w[e.quality]="FitsThroughput",!1;if(r.lazyQualitySwitch&&(0,l.isNonNullable)(r.minBufferToSwitchUp)&&u&&!(0,l.isInvariantQuality)(u.quality)&&(s??0)<r.minBufferToSwitchUp&&(0,l.isHigher)(e.quality,u.quality))return w[e.quality]="Buffer",!1;if(p&&(0,l.isHigherOrEqual)(e.quality,p))return w[e.quality]="DroppedFramesLimit",!1;if(h&&(0,l.isHigherOrEqual)(e.quality,h))return w[e.quality]="StallsLimit",!1;let c=_||((0,l.isNullable)(n.max)||(0,l.isLowerOrEqual)(e.quality,n.max))&&((0,l.isNullable)(n.min)||(0,l.isHigherOrEqual)(e.quality,n.min)),m=!((0,l.isNonNullable)(d)&&!d)||(0,l.isLowerOrEqual)(e.quality,r.backgroundVideoQualityLimit);return!(!c||!m)||(w[e.quality]="FitsQualityLimits",!1)}))[0];E&&E.bitrate&&ji.next(E.bitrate);let x=E??(0,Ni.default)(y,-1)??e[0];return x.quality!==c?.last?.quality&&m({message:`\n    [VIDEO TRACKS ABR]\n    [available video tracks]\n\t${e.map((e=>`{ id: ${e.id}, quality: ${e.quality}, bitrate: ${e.bitrate} }`)).join("\n\t")}\n\n    [tuning]\n\t${Object.entries(r??{}).map((([e,t])=>`${e}: ${t}`)).join("\n\t")}\n\n    [limit params]\n    containerSizeLimit: ${v?.width??0} x ${v?.width??0},\n    estimatedThroughput: ${i},\n    stallsPredictedThroughput: ${f},\n    reserve: ${a},\n    playbackRate: ${o},\n    playbackRateFactor: ${b},\n    forwardBufferHealth: ${s},\n    bitrateFactor: ${T},\n    minBufferToSwitchUp: ${r.minBufferToSwitchUp},\n    droppedVideoMaxQualityLimit: ${p},\n    stallsVideoMaxQualityLimit: ${h},\n    limitsAreInvalid: ${_},\n    maxQualityLimit: ${n?.max},\n    minQualityLimit: ${n?.min},\n\n    [limited video tracks]\n    ${Object.entries(w).map((([e,t])=>`${e}: ${t}`)).join("\n\t")||"All tracks are available"}\n\n    [best video track] ${E?.quality}\n    [selected video track] ${x?.quality}\n    `}),Yi(r,m,x,c)},Xi=e=>new URL(e).hostname,Zi=e=>{if(e instanceof DOMException&&["Failed to load because no supported source was found.","The element has no supported sources."].includes(e.message))throw e;return!(e instanceof DOMException&&(20===e.code||"AbortError"===e.name))},Ji=async(e,t)=>{let i=e.muted;try{await e.play()}catch(r){if(!Zi(r))return!1;if(t&&t(),i)return console.warn(r),!1;e.muted=!0;try{await e.play()}catch(t){return Zi(t)&&(e.muted=!1,console.warn(t)),!1}}return!0};function er(){return(0,l.now)()}function tr(e){return er()-e}function ir(e){let t=e.split("/"),i=t.slice(0,t.length-1).join("/"),r=/^([a-z]+:)?\/\//i;return{resolve:(e,t,n=!1)=>{(e=>r.test(e))(e)||(e.startsWith("/")||(e="/"+e),e=i+e);let a=e.indexOf("?")>-1?"&":"?";return n&&(e+=a+"lowLat=1",a="&"),t&&(e+=a+"_rnd="+Math.floor(999999999*Math.random())),e}}}function rr(e,t,i,r){let n,a,s,o,u,c=window.XMLHttpRequest,d=!1,p=0,h=!1,f="arraybuffer",m=7e3,g=2e3,v=()=>{if(d)return;(0,l.assertNonNullable)(o);let e,t=tr(o);if(t<g)return e=g-t,void setTimeout(v,e);g*=2,g>m&&(g=m),a&&a.abort(),a=new c,y()},b=()=>{if(!d){if(--p>=0)return v(),void(r&&r());d=!0,u&&u(),i&&i()}},y=()=>{o=er(),a=new c,a.open("get",e);let i,r=0,p=0,m=()=>((0,l.assertNonNullable)(o),Math.max(o,Math.max(i||0,p||0)));if(n&&a.addEventListener("progress",(e=>{let t=er();n.updateChunk&&e.loaded>r&&(n.updateChunk(m(),e.loaded-r),r=e.loaded,i=t)})),s&&(a.timeout=s,a.addEventListener("timeout",(()=>b()))),a.addEventListener("load",(()=>{if(d)return;(0,l.assertNonNullable)(a);let e=a.status;if(e>=200&&e<300){if(a.response.byteLength&&n){let e=a.response.byteLength-r;e&&n.updateChunk&&n.updateChunk(m(),e)}"json"!==a.responseType||Object.values(a.response).length?(u&&u(),t(a.response)):b()}else b()})),a.addEventListener("error",(()=>{b()})),h){let e=()=>{(0,l.assertNonNullable)(a),a.readyState===XMLHttpRequest.HEADERS_RECEIVED&&(p=er(),a.removeEventListener("readystatechange",e))};a.addEventListener("readystatechange",e)}return a.responseType=f,a.send(),S},S={withBitrateReporting:e=>(n=e,S),withParallel:e=>(h=e,S),withJSONResponse:()=>(f="json",S),withRetryCount:e=>(p=e,S),withRetryInterval:(e,t)=>((0,l.isNonNullable)(e)&&(g=e),(0,l.isNonNullable)(t)&&(m=t),S),withTimeout:e=>(s=e,S),withFinally:e=>(u=e,S),send:y,abort:()=>{a&&(a.abort(),a=void 0),d=!0,u&&u()}};return S}var nr=class{_updateRate(e){let t=.2;this.currentRate&&(e<.1*this.currentRate?t=.8:e<.5*this.currentRate?t=.5:e<.7*this.currentRate&&(t=.3)),e=Math.max(1,Math.min(e,104857600)),this.currentRate=this.currentRate?this.currentRate*(1-t)+e*t:e}_createInterval(e,t,i){return{start:e,end:t,bytes:i}}_doMergeIntervals(e,t){e.start=Math.min(t.start,e.start),e.end=Math.max(t.end,e.end),e.bytes+=t.bytes}_mergeIntervals(e,t){return e.start<=t.end&&t.start<=e.end&&(this._doMergeIntervals(e,t),!0)}_flushIntervals(){if(!this.intervals.length)return!1;let e=this.intervals[0].start,t=this.intervals[this.intervals.length-1].end-500;if(t-e>2e3){let i=0,r=0;for(;this.intervals.length>0;){let e=this.intervals[0];if(e.end<=t)i+=e.end-e.start,r+=e.bytes,this.intervals.splice(0,1);else{if(e.start>=t)break;{let n=t-e.start,a=e.end-e.start;i+=n;let s=e.bytes*n/a;r+=s,e.start=t,e.bytes-=s}}}if(r>0&&i>0){let n=8*r/(i/1e3);return this._updateRate(n),this.logger(`rate updated, new=${Math.round(n/1024)}K; average=${Math.round(this.currentRate/1024)}K bytes/ms=${Math.round(r)}/${Math.round(i)} interval=${Math.round(t-e)}`),!0}}return!1}_joinIntervals(){let e;do{e=!1;for(let t=0;t<this.intervals.length-1;++t)this._mergeIntervals(this.intervals[t],this.intervals[t+1])&&(this.intervals.splice(t+1,1),e=!0)}while(e)}addInterval(e,t,i){return this.intervals.push(this._createInterval(e,t,i)),this._joinIntervals(),this.intervals.length>100&&(this.logger(`too many intervals (${this.intervals.length}); will merge`,{type:"warn"}),this._doMergeIntervals(this.intervals[1],this.intervals[0]),this.intervals.splice(0,1)),this._flushIntervals()}getBitRate(){return this.currentRate}constructor(e){this.intervals=[],this.currentRate=0,this.logger=e}},ar=class{limitCompleteCount(){let e;for(;(e=Object.keys(this.completeRequests)).length>this._getParallelRequestCount()+2;){let t=e[Math.floor(Math.random()*e.length)];this.logger(`Dropping completed request for url ${t}`,{type:"warn"}),delete this.completeRequests[t]}}_sendRequest(e,t){let i=er(),r=i=>{delete this.activeRequests[t],this.limitCompleteCount(),this.completeRequests[t]=e,this._sendPending(),e._error=1,e._errorMsg=i,e._errorCB?e._errorCB(i):(this.limitCompleteCount(),this.completeRequests[t]=e)};e._request=rr(t,(r=>{e._complete=1,e._responseData=r,e._downloadTime=er()-i,delete this.activeRequests[t],this._sendPending(),e._cb?e._cb(r,e._downloadTime):(this.limitCompleteCount(),this.completeRequests[t]=e)}),(()=>r("error")),(()=>{e._retry=1,e._retryCB&&e._retryCB()})),e._request.withRetryCount(this.RETRY_COUNT).withTimeout(this.TIMEOUT).withBitrateReporting(this.BITRATE_ESTIMATOR).withParallel(this._getParallelRequestCount()>1).withFinally((()=>{e._finallyCB&&e._finallyCB()})),this.activeRequests[t]=e,e._request.send(),this.lastPrefetchStart=er()}_getParallelRequestCount(){return Math.min(this.MAX_PARALLEL_REQUESTS,this.averageSegmentDuration<3e3?3:2)}_getPrefetchDelay(){return Math.max(100,Math.min(5e3,this.averageSegmentDuration/3))}_canSendPending(){let e=this._getParallelRequestCount(),t=er();if(Object.keys(this.activeRequests).length>=e)return!1;let i=this._getPrefetchDelay()-(t-this.lastPrefetchStart);return this.throttleTimeout&&clearTimeout(this.throttleTimeout),!(i>0)||(this.throttleTimeout=window.setTimeout((()=>this._sendPending()),i),!1)}_sendPending(){for(;this._canSendPending();){let e=this.pendingQueue.pop();if(!e)return;this.activeRequests[e]||this.completeRequests[e]||(this.logger(`Submitting pending request url=${e}`),this._sendRequest({},e))}}_removeFromActive(e){delete this.completeRequests[e],delete this.activeRequests[e]}abortAll(){Object.values(this.activeRequests).forEach((e=>{e&&e._request&&e._request.abort()})),this.activeRequests={},this.pendingQueue=[],this.completeRequests={}}requestData(e,t,i,r){let n={};return n.send=()=>{let a=this.activeRequests[e]||this.completeRequests[e];if(a)a._cb=t,a._errorCB=i,a._retryCB=r,a._finallyCB=n._finallyCB,a._error||a._complete?(this._removeFromActive(e),setTimeout((()=>{a._complete?(this.logger(`Requested url already prefetched, url=${e}`),t(a._responseData,a._downloadTime)):(this.logger(`Requested url already prefetched with error, url=${e}`),i(a._errorMsg)),n._finallyCB&&n._finallyCB()}),0)):this.logger(`Attached to active request, url=${e}`);else{let t=this.pendingQueue.indexOf(e);-1!==t&&this.pendingQueue.splice(t,1),this.logger(`Request not prefetched, starting new request, url=${e}${-1===t?"":"; removed pending"}`),this._sendRequest(n,e)}},n._cb=t,n._errorCB=i,n._retryCB=r,n.abort=function(){n.request&&n.request.abort()},n.withFinally=e=>(n._finallyCB=e,n),n}prefetch(e){this.activeRequests[e]||this.completeRequests[e]?this.logger(`Request already active for url=${e}`):(this.logger(`Added to pending queue; url=${e}`),this.pendingQueue.unshift(e),this._sendPending())}optimizeForSegDuration(e){this.averageSegmentDuration=e}constructor(e,t,i,r,n){this.pendingQueue=[],this.activeRequests={},this.completeRequests={},this.averageSegmentDuration=2e3,this.lastPrefetchStart=0,this.throttleTimeout=null,this.RETRY_COUNT=e,this.TIMEOUT=t,this.BITRATE_ESTIMATOR=i,this.MAX_PARALLEL_REQUESTS=r,this.logger=n}},sr=1e4,or=class{attachSource(e){this.manifestUrl=e,this.urlResolver=ir(e),this.bitrateSwitcher=this._initBitrateSwitcher(),this._initManifest()}setAutoQualityEnabled(e){this.autoQuality=e}setMaxAutoQuality(e){this.maxAutoQuality=e}switchByName(e){let t;for(let i=0;i<this.manifest.length;++i)if(t=this.manifest[i],t.name===e)return void this._switchToQuality(t)}catchUp(){this.rep&&this.rep.stop(),this.currentManifestEntry&&(this.paused=!1,this._initPlayerWith(this.currentManifestEntry),this._notifyBuffering(!0))}stop(){this.params.videoElement.pause(),this.rep&&(this.rep.stop(),this.rep=null)}pause(){this.paused=!0,this.params.videoElement.pause(),this.videoPlayStarted=!1,this._notifyBuffering(!1)}play(){this.paused=!1;let e=this.lowLatency&&this._getBufferSizeSec()>this.sourceJitter+5;this.rep&&!e?(this.bufferStates=[],this.videoPlayStarted=!1,this.shouldPlay()?this._playVideoElement():this._notifyBuffering(!0)):this.catchUp()}startPlay(e,t){this.autoQuality=t,this._initPlayerWith(e)}destroy(){this.destroyed=!0,this.rep&&(this.rep.stop(),this.rep=null),this.manifestRequest&&this.manifestRequest.abort(),this.manifestRefetchTimer&&(clearTimeout(this.manifestRefetchTimer),this.manifestRefetchTimer=void 0)}reinit(e){this.manifestUrl=e,this.urlResolver=ir(e),this.catchUp()}_handleNetworkError(){this.params.logger("Fatal network error"),this.params.playerCallback({name:"error",type:"network"})}_retryCallback(){this.params.playerCallback({name:"retry"})}_getBufferSizeSec(){let e=this.params.videoElement,t=0,i=e.buffered.length;return 0!==i&&(t=e.buffered.end(i-1)-Math.max(e.currentTime,e.buffered.start(0))),t}_notifyBuffering(e){this.destroyed||(this.params.logger(`buffering: ${e}`),this.params.playerCallback({name:"buffering",isBuffering:e}),this.buffering=e)}_initVideo(){let{videoElement:e,logger:t}=this.params;e.addEventListener("error",(()=>{e.error&&!this.destroyed&&(t(`Video element error: ${e.error?.code}`),this.params.playerCallback({name:"error",type:"media"}))})),e.addEventListener("timeupdate",(()=>{let e=this._getBufferSizeSec();!this.paused&&e<.3?this.buffering||(this.buffering=!0,window.setTimeout((()=>{!this.paused&&this.buffering&&this._notifyBuffering(!0)}),1e3*(e+.1))):this.buffering&&this.videoPlayStarted&&this._notifyBuffering(!1)})),e.addEventListener("playing",(()=>{t("playing")})),e.addEventListener("stalled",(()=>this._fixupStall())),e.addEventListener("waiting",(()=>this._fixupStall()))}_fixupStall(){let e,{logger:t,videoElement:i}=this.params,r=i.buffered.length;0!==r&&(e=i.buffered.start(r-1),i.currentTime<e&&(t("Fixup stall"),i.currentTime=e))}_selectQuality(e){let t,i,r,{videoElement:n}=this.params,a=n&&1.62*(window.devicePixelRatio||1)*n.offsetHeight||520;for(let n=0;n<this.manifest.length;++n)r=this.manifest[n],!(this.maxAutoQuality&&r.video.height>this.maxAutoQuality)&&(r.bitrate<e&&a>Math.min(r.video.height,r.video.width)?(!i||r.bitrate>i.bitrate)&&(i=r):(!t||t.bitrate>r.bitrate)&&(t=r));return i||t}shouldPlay(){if(this.paused)return!1;let e=this._getBufferSizeSec()-Math.max(1,this.sourceJitter);return e>3||(0,l.isNonNullable)(this.downloadRate)&&(this.downloadRate>1.5&&e>2||this.downloadRate>2&&e>1)}_setVideoSrc(e,t){let{logger:i,videoElement:r,playerCallback:n}=this.params;this.mediaSource=new window.MediaSource,i("setting video src"),r.src=URL.createObjectURL(this.mediaSource),this.mediaSource.addEventListener("sourceopen",(()=>{this.mediaSource&&(this.sourceBuffer=this.mediaSource.addSourceBuffer(e.codecs),this.bufferStates=[],t())})),this.videoPlayStarted=!1,r.addEventListener("canplay",(()=>{this.shouldPlay()&&(this.videoPlayStarted=!0,this._playVideoElement())}));let a=()=>{!function(e,t,i){let r=(...n)=>{i.apply(null,n),e.removeEventListener(t,r)};e.addEventListener(t,r)}(r,"progress",(()=>{r.buffered.length?(r.currentTime=r.buffered.start(0),n({name:"playing"})):a()}))};a()}_initPlayerWith(e){this.bitrate=0,this.rep=0,this.sourceBuffer=0,this.bufferStates=[],this.filesFetcher&&this.filesFetcher.abortAll(),this.filesFetcher=new ar(3,sr,this.bitrateSwitcher,this.params.config.maxParallelRequests,this.params.logger),this._setVideoSrc(e,(()=>this._switchToQuality(e)))}_representation(e){let{logger:t,videoElement:i,playerCallback:r}=this.params,n=!1,a=null,s=null,o=null,u=null,c=!1,d=()=>{let e=n&&(!c||c===this.rep);return e||t("Not running!"),e},p=(e,t,i)=>{o&&o.abort(),o=rr(this.urlResolver.resolve(e,!1),t,i,(()=>this._retryCallback())).withTimeout(sr).withBitrateReporting(this.bitrateSwitcher).withRetryCount(3).withFinally((()=>{o=null})).send()},h=(e,t,i)=>{(0,l.assertNonNullable)(this.filesFetcher),s?.abort(),s=this.filesFetcher.requestData(this.urlResolver.resolve(e,!1),t,i,(()=>this._retryCallback())).withFinally((()=>{s=null})).send()},f=e=>{let r=i.playbackRate;i.playbackRate!==e&&(t(`Playback rate switch: ${r}=>${e}`),i.playbackRate=e)},m=e=>{this.lowLatency=e,t(`lowLatency changed to ${e}`),g()},g=()=>{if(this.lowLatency||this.params.config.isLiveCatchUpMode){let e=this._getBufferSizeSec();if(this.bufferStates.length<5)return void f(1);let i=er()-1e4,r=0;for(let t=0;t<this.bufferStates.length;t++){let n=this.bufferStates[t];e=Math.min(e,n.buf),n.ts<i&&r++}this.bufferStates.splice(0,r),t(`update playback rate;  minBuffer=${e} drop=${r} jitter=${this.sourceJitter}`);let n=e-1;this.sourceJitter>=0?n-=this.sourceJitter/2:this.sourceJitter-=1,f(n>3?1.15:n>1?1.1:n>.3?1.05:1)}else f(1)},v=e=>{let i,n=()=>i&&i.start?i.start.length:0,a=e=>i.start[e]/1e3,s=e=>i.dur[e]/1e3,o=e=>i.fragIndex+e,c=(e,t)=>({chunkIdx:o(e),startTS:a(e),dur:s(e),discontinuity:t}),p=()=>{let e=0;if(i&&i.dur){let t=this.lowLatency?this.params.config.lowLatencyMinBuffer:this.params.config.minBuffer,r=this.lowLatency?this.params.config.lowLatencyMinBufferSegments:this.params.config.minBufferSegments,n=t;this.sourceJitter>1&&(n+=this.sourceJitter-1);let a=i.dur.length-1;for(;a>=0&&(n-=i.dur[a],!(n<=0));--a);e=Math.min(a,i.dur.length-1-r),e=Math.max(e,0)}return c(e,!0)},h=(e,t,i)=>{u&&u.abort(),u=rr(this.urlResolver.resolve(e,!0,this.lowLatency),t,i,(()=>this._retryCallback())).withTimeout(sr).withRetryCount(3).withFinally((()=>{u=null})).withJSONResponse().send()};return{seek:(t,s)=>{h(e,(e=>{if(!d())return;i=e;let o=!!i.lowLatency;o!==this.lowLatency&&m(o);let u=0;for(let e=0;e<i.dur.length;++e)u+=i.dur[e];u>0&&((0,l.assertNonNullable)(this.filesFetcher),this.filesFetcher.optimizeForSegDuration(u/i.dur.length)),r({name:"index",zeroTime:i.zeroTime,shiftDuration:i.shiftDuration}),this.sourceJitter=i.hasOwnProperty("jitter")?Math.min(10,Math.max(.01,i.jitter/1e3)):1,t((e=>{let t=n();if(!(t<=0)){if((0,l.isNonNullable)(e))for(let i=0;i<t;i++)if(a(i)>e)return c(i);return p()}})(s))}),(()=>this._handleNetworkError()))},nextChunk:e=>{let r=n(),a=e?e.chunkIdx+1:0,s=a-i.fragIndex;if(!(r<=0)){if(!e||s<0||s-r>10)return t(`Resync: offset=${s} bChunks=${r} chunk=`+JSON.stringify(e)),p();if(!(s>=r))return c(a-i.fragIndex,!1)}}}},b=()=>{n=!1,s&&s.abort(),o&&o.abort(),u&&u.abort(),(0,l.assertNonNullable)(this.filesFetcher),this.filesFetcher.abortAll()};return c={start:t=>{let i,r,s,o,c,f,m,{videoElement:y,logger:S}=this.params,$=v(e.jidxUrl),_=0,T=()=>{c&&(clearTimeout(c),c=void 0);let e=Math.max(500,1e3*(this._getBufferSizeSec()-this.sourceJitter-5)),t=_+e,i=er(),r=Math.min(1e4,t-i);_=i;let n=()=>{u||d()&&$.seek((()=>{d()&&(_=er(),w(),T())}))};r>0?c=window.setTimeout((()=>{this.paused?T():n()}),r):n()},w=()=>{let t;for(;t=$.nextChunk(o);)o=t,k(t);let i=$.nextChunk(s);if(i){if(s&&i.discontinuity)return S("Detected discontinuity; restarting playback"),void(this.paused?T():(b(),this._initPlayerWith(e)));C(i)}else T()},E=(e,t)=>{if(!d()||!this.sourceBuffer)return;let i,r,n,a=i=>{window.setTimeout((()=>{d()&&E(e,t)}),i)};if(this.sourceBuffer.updating)S("Source buffer is updating; delaying appendBuffer"),a(100);else{let s=er(),o=y.currentTime;!this.paused&&y.buffered.length>1&&f===o&&s-m>500&&(S("Stall suspected; trying to fix"),this._fixupStall()),f!==o&&(f=o,m=s);let l=this._getBufferSizeSec();if(l>30)S(`Buffered ${l} seconds; delaying appendBuffer`),a(2e3);else try{this.sourceBuffer.appendBuffer(e),this.videoPlayStarted?(this.bufferStates.push({ts:s,buf:l}),g(),this.bufferStates.length>200&&this.bufferStates.shift()):this.shouldPlay()&&(this.videoPlayStarted=!0,this._playVideoElement()),t&&t()}catch(e){if("QuotaExceededError"!==e.name)throw e;S("QuotaExceededError; delaying appendBuffer"),n=this.sourceBuffer.buffered.length,0!==n&&(i=this.sourceBuffer.buffered.start(0),r=o,r-i>4&&this.sourceBuffer.remove(i,r-3)),a(1e3)}}},x=()=>{r&&i&&(S([`Appending chunk, sz=${r.byteLength}:`,JSON.stringify(s)]),E(r,(function(){r=null,w()})))},A=t=>e.fragUrlTemplate.replace("%%id%%",t.chunkIdx),C=e=>{d()&&h(A(e),((t,i)=>{if(d()){if(i/=1e3,r=t,s=e,a=e.startTS,i){let t=Math.min(10,e.dur/i);this.downloadRate=this.downloadRate?.7*this.downloadRate+.3*t:t}x()}}),(()=>this._handleNetworkError()))},k=e=>{d()&&((0,l.assertNonNullable)(this.filesFetcher),this.filesFetcher.prefetch(this.urlResolver.resolve(A(e),!1)))},L=t=>{d()&&(e.cachedHeader=t,E(t,(()=>{i=!0,x()})))};n=!0,$.seek((e=>{if(d()){if(_=er(),!e)return void T();o=e,!(0,l.isNullable)(t)||e.startTS>t?C(e):(s=e,w())}}),t),e.cachedHeader?L(e.cachedHeader):p(e.headerUrl,L,(()=>this._handleNetworkError()))},stop:b,getTimestampSec:()=>a},c}_switchToQuality(e){let t,{logger:i,playerCallback:r}=this.params;e.bitrate!==this.bitrate&&(this.rep&&(t=this.rep.getTimestampSec(),(0,l.isNonNullable)(t)&&(t+=.1),this.rep.stop()),this.currentManifestEntry=e,this.rep=this._representation(e),i(`switch to quality: codecs=${e.codecs}; headerUrl=${e.headerUrl}; bitrate=${e.bitrate}`),this.bitrate=e.bitrate,(0,l.assertNonNullable)(this.bitrateSwitcher),this.bitrateSwitcher.notifySwitch(this.bitrate),this.rep.start(t),r({name:"qualitySwitch",quality:e}))}_qualityAvailable(e){return(0,l.isNonNullable)(this.manifest.find((t=>t.name===e)))}_initBitrateSwitcher(){let e,{logger:t,playerCallback:i}=this.params,r=e=>{if(!this.autoQuality)return;let i,r,n;this.currentManifestEntry&&this._qualityAvailable(this.currentManifestEntry.name)&&e<this.bitrate&&(r=this._getBufferSizeSec(),n=e/this.bitrate,r>10&&n>.8||r>15&&n>.5||r>20&&n>.3)?t(`Not switching: buffer=${Math.floor(r)}; bitrate=${this.bitrate}; newRate=${Math.floor(e)}`):(i=this._selectQuality(e),i?this._switchToQuality(i):t(`Could not find quality by bitrate ${e}`))},n=(e,t)=>{let r=er();if(this.chunkRateEstimator.addInterval(e,r,t)){let n=this.chunkRateEstimator.getBitRate();return i({name:"bandwidth",size:t,duration:r-e,speed:n}),!0}},a=()=>{let e=this.chunkRateEstimator.getBitRate();return e?.85*e:0},s=-1/0,o=!0,l=()=>{let t=a();if(t&&e&&this.autoQuality){if(o&&t>e&&tr(s)<3e4)return;r(t)}o=this.autoQuality};return{updateChunk:(e,t)=>{let i=n(e,t);return i&&l(),i},notifySwitch:t=>{let i=er();t<e&&(s=i),e=t}}}_fetchManifest(e,t,i){this.manifestRequest=rr(this.urlResolver.resolve(e,!0),t,i,(()=>this._retryCallback())).withJSONResponse().withTimeout(sr).withRetryCount(this.params.config.manifestRetryMaxCount).withRetryInterval(this.params.config.manifestRetryInterval,this.params.config.manifestRetryMaxInterval).send().withFinally((()=>{this.manifestRequest=void 0}))}_playVideoElement(){let{videoElement:e}=this.params;Ji(e,(()=>{this.soundProhibitedEvent$.next()})).then((e=>{e||(this.params.liveOffset.pause(),this.params.videoState.setState("paused"))}))}_handleManifestUpdate(e){let{logger:t,playerCallback:i,videoElement:r}=this.params;this.manifest=(e=>{let t=[];return e?.length?(e.forEach(((e,i)=>{e.video&&r.canPlayType(e.codecs).replace(/no/,"")&&window.MediaSource.isTypeSupported(e.codecs)&&(e.index=i,t.push(e))})),t.sort((function(e,t){return e.video&&t.video?t.video.height-e.video.height:t.bitrate-e.bitrate})),t):(i({name:"error",type:"empty_manifest"}),[])})(e),t(`Valid manifest entries: ${this.manifest.length}/${e.length}`),i({name:"manifest",manifest:this.manifest})}_refetchManifest(e){this.destroyed||(this.manifestRefetchTimer&&clearTimeout(this.manifestRefetchTimer),this.manifestRefetchTimer=window.setTimeout((()=>{this._fetchManifest(e,(t=>{this.destroyed||(this._handleManifestUpdate(t),this._refetchManifest(e))}),(()=>this._refetchManifest(e)))}),6e4))}_initManifest(){this._fetchManifest(this.manifestUrl,(e=>{this.destroyed||(this._handleManifestUpdate(e),this._refetchManifest(this.manifestUrl))}),(()=>this._handleNetworkError()))}constructor(e){this.paused=!1,this.autoQuality=!0,this.maxAutoQuality=void 0,this.buffering=!0,this.destroyed=!1,this.videoPlayStarted=!1,this.lowLatency=!1,this.bitrate=0,this.manifest=[],this.sourceBuffer=0,this.bufferStates=[],this.sourceJitter=-1,this.params=e,this.soundProhibitedEvent$=new l.Subject,this.chunkRateEstimator=new nr(this.params.logger),this._initVideo()}},lr=class{connect(e){this.log=e.logger.createComponentLog("DroppedFramesManager"),this.video=e.video,this.isAuto=e.isAuto,this.tracks=e.tracks,this.droppedFramesChecker=e.droppedFramesChecker,this.subscription.add(e.playing$.subscribe((()=>this.playing=!0))),this.subscription.add(e.pause$.subscribe((()=>this.playing=!1))),this.isEnabled&&this.subscribe()}destroy(){this.currentTimer&&window.clearTimeout(this.currentTimer),this.subscription.unsubscribe()}get droppedVideoMaxQualityLimit(){return this.maxQualityLimit}subscribe(){this.subscription.add((0,l.fromEvent)(this.video,"resize").subscribe(this.handleChangeVideoQuality));let e=(0,l.interval)(this.droppedFramesChecker.checkTime).pipe((0,l.filter)((()=>this.playing)),(0,l.filter)((()=>{let e=!!this.isForceCheckCounter;return e&&(this.isForceCheckCounter-=1),!e}))),t=this.forceChecker$.pipe((0,l.debounce)(this.droppedFramesChecker.checkTime)),i=(0,l.merge)(e,t);this.subscription.add(i.subscribe(this.checkDroppedFrames))}onChangeQuality(e){this.currentQuality=e;let{totalVideoFrames:t,droppedVideoFrames:i}=this.video.getVideoPlaybackQuality();this.savePrevFrameCounts(t,i),this.isForceCheckCounter=this.droppedFramesChecker.tickCountAfterQualityChange,this.forceChecker$.next()}onDroopedVideoFramesLimitTrigger(){this.isAuto.getState()&&(this.log({message:`[onDroopedVideoFramesLimit]. maxQualityLimit: ${this.maxQualityLimit}`}),this.onDroopedVideoFramesLimit$.next())}getMaxQualityLimit(e){let t=Object.entries(this.limitCounts).filter((([,e])=>e>=this.droppedFramesChecker.countLimit)).sort((([e],[t])=>(0,l.isLower)(e,t)?-1:1))?.[0]?.[0];return e??t}get isEnabled(){return this.droppedFramesChecker.enabled&&this.isDroppedFramesCheckerSupport}get isDroppedFramesCheckerSupport(){return!!this.video&&"function"==typeof this.video.getVideoPlaybackQuality}savePrevFrameCounts(e,t){this.prevTotalVideoFrames=e,this.prevDroppedVideoFrames=t}constructor(){this.onDroopedVideoFramesLimit$=new l.Subject,this.subscription=new l.Subscription,this.playing=!1,this.tracks=[],this.forceChecker$=new l.Subject,this.isForceCheckCounter=0,this.prevTotalVideoFrames=0,this.prevDroppedVideoFrames=0,this.limitCounts={},this.handleChangeVideoQuality=()=>{let e=this.tracks.find((({size:e})=>e?.height===this.video.videoHeight&&e?.width===this.video.videoWidth));e&&!(0,l.isInvariantQuality)(e.quality)&&this.onChangeQuality(e.quality)},this.checkDroppedFrames=()=>{let{totalVideoFrames:e,droppedVideoFrames:t}=this.video.getVideoPlaybackQuality(),i=e-this.prevTotalVideoFrames,r=1-(i-(t-this.prevDroppedVideoFrames))/i;!isNaN(r)&&r>0&&this.log({message:`[dropped]. current dropped percent: ${r}, limit: ${this.droppedFramesChecker.percentLimit}`}),!isNaN(r)&&r>=this.droppedFramesChecker.percentLimit&&(0,l.isHigher)(this.currentQuality,this.droppedFramesChecker.minQualityBanLimit)&&(this.limitCounts[this.currentQuality]=(this.limitCounts[this.currentQuality]??0)+1,this.maxQualityLimit=this.getMaxQualityLimit(this.currentQuality),this.currentTimer&&window.clearTimeout(this.currentTimer),this.currentTimer=window.setTimeout((()=>this.maxQualityLimit=this.getMaxQualityLimit()),this.droppedFramesChecker.qualityUpWaitingTime),this.onDroopedVideoFramesLimitTrigger()),this.savePrevFrameCounts(e,t)}}},ur=()=>!!window.documentPictureInPicture?.window||!!document.pictureInPictureElement,cr=(e,t)=>new l.Observable((i=>{if(!window.IntersectionObserver)return;let r=new IntersectionObserver(((e,t)=>{e.forEach((e=>i.next(e.isIntersecting||ur())))}),{root:null,...t});r.observe(e);let n=(0,l.fromEvent)(document,"visibilitychange").pipe((0,l.map)((e=>!document.hidden||ur()))).subscribe((e=>i.next(e)));return()=>{r.unobserve(e),n.unsubscribe}})),dr=["paused","playing","ready"],pr=["paused","playing","ready"],hr=class{destroy(){this.subscription.unsubscribe(),this.textTracksManager.destroy(),this.droppedFramesManager.destroy(),this.dash.destroy(),this.params.output.element$.next(void 0),Ti(this.video)}createLiveDashPlayer(){let e=new or({videoElement:this.video,videoState:this.videoState,liveOffset:this.liveOffset,config:{maxParallelRequests:this.params.config.maxParallelRequests,minBuffer:this.params.tuning.live.minBuffer,minBufferSegments:this.params.tuning.live.minBufferSegments,lowLatencyMinBuffer:this.params.tuning.live.lowLatencyMinBuffer,lowLatencyMinBufferSegments:this.params.tuning.live.lowLatencyMinBufferSegments,isLiveCatchUpMode:this.params.tuning.live.isLiveCatchUpMode,manifestRetryInterval:this.params.tuning.manifestRetryInterval,manifestRetryMaxInterval:this.params.tuning.manifestRetryMaxInterval,manifestRetryMaxCount:this.params.tuning.manifestRetryMaxCount},playerCallback:this._dashCb,logger:e=>{this.params.dependencies.logger.log({message:String(e),component:"LiveDashPlayer"})}});return e.pause(),e}prepare(){let e=this.representations$.getValue(),t=this.params.desiredState.videoTrack.getTransition()?.to??this.params.desiredState.videoTrack.getState(),i=this.params.desiredState.autoVideoTrackSwitching.getTransition()?.to??this.params.desiredState.autoVideoTrackSwitching.getState(),r=!i&&(0,l.isNonNullable)(t)?t:Ki(e.map((({track:e})=>e)),{container:{width:this.video.offsetWidth,height:this.video.offsetHeight},estimatedThroughput:this.params.dependencies.throughputEstimator.throughput$.getValue(),tuning:this.params.tuning.autoTrackSelection,limits:this.params.desiredState.autoVideoTrackLimits.getState(),droppedVideoMaxQualityLimit:this.droppedFramesManager.droppedVideoMaxQualityLimit,abrLogger:this.params.dependencies.abrLogger}),n=r?.id,a=this.params.desiredState.videoTrack.getTransition(),s=this.params.desiredState.videoTrack.getState()?.id,o=this.params.desiredState.autoVideoTrackSwitching.getTransition();if(r&&(a||n!==s)&&this.setVideoTrack(r),o&&this.setAutoQuality(i),a||o||n!==s){let t=e.find((({track:e})=>e.id===n))?.representation;(0,l.assertNonNullable)(t,"Representations missing"),this.dash.startPlay(t,i)}}setVideoTrack(e){let t=this.representations$.getValue().find((({track:t})=>t.id===e.id))?.representation;(0,l.assertNonNullable)(t,`No such representation ${e.id}`),this.dash.switchByName(t.name),this.params.desiredState.videoTrack.setState(e)}setAutoQuality(e){this.dash.setAutoQualityEnabled(e),this.params.desiredState.autoVideoTrackSwitching.setState(e)}seek(e){this.log({message:`[seek] position: ${e}`}),this.params.output.willSeekEvent$.next();let t=this.params.desiredState.playbackState.getState(),i=this.videoState.getState(),r="paused"===t&&"paused"===i,n=-e,a=n<=this.maxSeekBackTime$.getValue()?n:0;this.params.output.position$.next(e/1e3),this.dash.reinit(mi(this.params.source.url,a)),r&&this.dash.pause(),this.liveOffset.resetTo(a,r)}constructor(e){this.subscription=new l.Subscription,this.videoState=new bi("stopped"),this.representations$=new l.ValueSubject([]),this.textTracksManager=new Li,this.droppedFramesManager=new lr,this.maxSeekBackTime$=new l.ValueSubject(1/0),this.zeroTime$=new l.ValueSubject(void 0),this.liveOffset=new Ri,this._dashCb=e=>{switch(e.name){case"buffering":{let t=e.isBuffering;this.params.output.isBuffering$.next(t);break}case"error":this.params.output.error$.next({id:`DashLiveProviderInternal:${e.type}`,category:l.ErrorCategory.WTF,message:"LiveDashPlayer reported error"});break;case"manifest":{let t=e.manifest,i=[];for(let e of t){let t=e.name??e.index.toString(10),r=Ii(e.name)??(0,l.videoSizeToQuality)(e.video),n=e.bitrate/1e3,a={...e.video};if(!r)continue;let s={id:t,quality:r,bitrate:n,size:a};i.push({track:s,representation:e})}this.representations$.next(i),this.params.output.availableVideoTracks$.next(i.map((({track:e})=>e))),"manifest_ready"===this.videoState.getTransition()?.to&&this.videoState.setState("manifest_ready");break}case"qualitySwitch":{let t=e.quality,i=this.representations$.getValue().find((({representation:e})=>e===t))?.track;this.params.output.hostname$.next(new URL(t.headerUrl,this.params.source.url).hostname),(0,l.isNonNullable)(i)&&this.params.output.currentVideoTrack$.next(i);break}case"bandwidth":{let{size:t,duration:i}=e;this.params.dependencies.throughputEstimator.addRawSpeed(t,i);break}case"index":this.maxSeekBackTime$.next(e.shiftDuration||0),this.zeroTime$.next(e.zeroTime)}},this.syncPlayback=()=>{let e=this.videoState.getState(),t=this.videoState.getTransition(),i=this.params.desiredState.playbackState.getState(),r=this.params.desiredState.playbackState.getTransition(),n=this.params.desiredState.seekState.getState();if(this.log({message:`[syncPlayback] videoState: ${e}; videoTransition: ${JSON.stringify(t)}; desiredPlaybackState: ${i}; seekState: ${JSON.stringify(n)};`}),"stopped"===i)return void("stopped"!==e&&(this.videoState.startTransitionTo("stopped"),this.dash.destroy(),this.video.removeAttribute("src"),this.video.load(),this.videoState.setState("stopped")));if(t)return;let a=this.params.desiredState.videoTrack.getTransition(),s=this.params.desiredState.autoVideoTrackSwitching.getTransition();if(pr.includes(e)&&(a||s))this.prepare();else if("paused"!==r?.to&&"requested"===n.state&&dr.includes(e))this.seek(n.position-this.liveOffset.getTotalPausedTime());else switch(e){case"stopped":return this.videoState.startTransitionTo("manifest_ready"),void this.dash.attachSource(mi(this.params.source.url));case"manifest_ready":this.videoState.startTransitionTo("ready"),this.prepare();break;case"ready":if("paused"===i)this.videoState.setState("paused");else if("playing"===i){this.videoState.startTransitionTo("playing");let e=r?.from;e&&"ready"===e&&this.dash.catchUp(),this.dash.play()}return;case"playing":return void("paused"===i&&(this.videoState.startTransitionTo("paused"),this.liveOffset.pause(),this.dash.pause()));case"paused":if("playing"===i)if(this.videoState.startTransitionTo("playing"),this.liveOffset.getTotalPausedTime()<this.params.config.maxPausedTime&&this.liveOffset.getTotalOffset()<this.maxSeekBackTime$.getValue())this.liveOffset.resume(),this.dash.play(),this.params.output.position$.next(-this.liveOffset.getTotalOffset()/1e3);else{let e=this.liveOffset.getTotalOffset();e>=this.maxSeekBackTime$.getValue()&&(e=0,this.liveOffset.resetTo(e)),this.liveOffset.resume(),this.params.output.position$.next(-e/1e3),this.dash.reinit(mi(this.params.source.url,e))}return;default:return(0,l.assertNever)(e)}},this.params=e,this.log=this.params.dependencies.logger.createComponentLog("DashLiveProvider");let t=t=>{e.output.error$.next({id:"DashLiveProvider",category:l.ErrorCategory.WTF,message:"DashLiveProvider internal logic error",thrown:t})};(0,l.merge)(this.videoState.stateChangeStarted$.pipe((0,l.map)((e=>({transition:e,type:"start"})))),this.videoState.stateChangeEnded$.pipe((0,l.map)((e=>({transition:e,type:"end"}))))).subscribe((({transition:e,type:t})=>{this.log({message:`[videoState change] ${t}: ${JSON.stringify(e)}`})})),this.video=_i(e.container,e.tuning),this.params.output.element$.next(this.video),this.dash=this.createLiveDashPlayer(),this.subscription.add(this.dash.soundProhibitedEvent$.subscribe(this.params.output.soundProhibitedEvent$)),this.params.output.duration$.next(1/0),this.params.output.position$.next(0),this.params.output.isLive$.next(!0),this.params.output.canChangePlaybackSpeed$.next(!1),this.params.output.hostname$.next(Xi(this.params.source.url)),this.params.output.autoVideoTrackLimitingAvailable$.next(!0),this.params.output.availableVideoTracks$.next([]),this.params.output.availableAudioTracks$.next([]),this.params.output.isAudioAvailable$.next(!0),this.params.output.availableTextTracks$.next([]),this.params.desiredState.internalTextTracks.setState([]),this.textTracksManager.connect(this.video,this.params.desiredState,this.params.output);let i=Mi(this.video);this.subscription.add(this.representations$.pipe((0,l.map)((e=>e.map((({track:e})=>e)))),(0,l.filter)((e=>!!e.length)),(0,l.once)()).subscribe((e=>this.droppedFramesManager.connect({logger:this.params.dependencies.logger,video:this.video,droppedFramesChecker:this.params.tuning.droppedFramesChecker,isAuto:this.params.desiredState.autoVideoTrackSwitching,playing$:i.playing$,pause$:i.pause$,tracks:e})))),this.subscription.add(i.canplay$.subscribe((()=>{"ready"===this.videoState.getTransition()?.to&&this.videoState.setState("ready")}),t)).add(i.pause$.subscribe((()=>{this.videoState.setState("paused")}),t)).add(i.playing$.subscribe((()=>{"applying"===this.params.desiredState.seekState.getState().state&&this.params.output.seekedEvent$.next(),this.videoState.setState("playing")}),t)).add(i.error$.subscribe(this.params.output.error$)).add(this.maxSeekBackTime$.pipe((0,l.filterChanged)(),(0,l.map)((e=>-e/1e3))).subscribe(this.params.output.duration$)).add((0,l.combine)({zeroTime:this.zeroTime$.pipe((0,l.filter)(l.isNonNullable)),position:i.timeUpdate$}).subscribe((({zeroTime:e,position:t})=>this.params.output.liveTime$.next(e+1e3*t)),t)).add(Ei(this.video,this.params.desiredState.isLooped,t)).add(xi(this.video,this.params.desiredState.volume,i.volumeState$,t)).add(i.volumeState$.subscribe(this.params.output.volume$,t)).add(Ai(this.video,this.params.desiredState.playbackRate,i.playbackRateState$,t)).add(i.loadStart$.subscribe(this.params.output.firstBytesEvent$)).add(i.loadedMetadata$.subscribe(this.params.output.loadedMetadataEvent$)).add(i.playing$.subscribe(this.params.output.firstFrameEvent$)).add(i.canplay$.subscribe(this.params.output.canplay$)).add(i.inPiP$.subscribe(this.params.output.inPiP$)).add(i.inFullscreen$.subscribe(this.params.output.inFullscreen$)).add(cr(this.video).subscribe(this.params.output.elementVisible$)).add(this.params.desiredState.autoVideoTrackLimits.stateChangeStarted$.subscribe((({to:{max:e}})=>{let t=e&&(0,l.videoQualityToHeight)(e);this.dash.setMaxAutoQuality(t),this.params.output.autoVideoTrackLimits$.next({max:e})}))).add(this.videoState.stateChangeEnded$.subscribe((e=>{switch(e.to){case"stopped":this.params.output.position$.next(0),this.params.output.duration$.next(1/0),this.params.desiredState.playbackState.setState("stopped");break;case"manifest_ready":case"ready":"ready"===this.params.desiredState.playbackState.getTransition()?.to&&this.params.desiredState.playbackState.setState("ready");break;case"paused":this.params.desiredState.playbackState.setState("paused");break;case"playing":this.params.desiredState.playbackState.setState("playing");break;default:return(0,l.assertNever)(e.to)}}),t)).add((0,l.merge)(e.desiredState.playbackState.stateChangeStarted$,e.desiredState.seekState.stateChangeEnded$,e.desiredState.videoTrack.stateChangeStarted$,e.desiredState.autoVideoTrackSwitching.stateChangeStarted$,this.videoState.stateChangeEnded$,this.droppedFramesManager.onDroopedVideoFramesLimit$,(0,l.observableFrom)(["init"])).pipe((0,l.debounce)(0)).subscribe(this.syncPlayback,t))}},fr=(e,t)=>{let i=0;for(let r=0;r<e.length;r++){let n=1e3*e.start(r),a=1e3*e.end(r);n<=t&&t<=a&&(i=a)}return Math.max(i-t,0)},mr=class{addEventListener(e,t,i){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:i})}removeEventListener(e,t){if(!(e in this.listeners))return;let i=this.listeners[e];for(let e=0,r=i.length;e<r;e++)if(i[e].callback===t)return void i.splice(e,1)}dispatchEvent(e){if(!(e.type in this.listeners))return;let t=this.listeners[e.type].slice();for(let i=0,r=t.length;i<r;i++){let r=t[i];try{r.callback.call(this,e)}catch(e){Promise.resolve().then((()=>{throw e}))}r.options&&r.options.once&&this.removeEventListener(e.type,r.callback)}return!e.defaultPrevented}constructor(){Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}},gr=class extends mr{toString(){return"[object AbortSignal]"}dispatchEvent(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),super.dispatchEvent(e)}constructor(){super(),this.listeners||mr.call(this),Object.defineProperty(this,"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(this,"reason",{value:void 0,writable:!0,configurable:!0})}},vr=class{abort(e){let t;try{t=new Event("abort")}catch{typeof document<"u"?document.createEvent?(t=document.createEvent("Event"),t.initEvent("abort",!1,!1)):(t=document.createEventObject(),t.type="abort"):t={type:"abort",bubbles:!1,cancelable:!1}}let i=e;if(void 0===i)if(typeof document>"u")i=new Error("This operation was aborted"),i.name="AbortError";else try{i=new DOMException("signal is aborted without reason")}catch{i=new Error("This operation was aborted"),i.name="AbortError"}this.signal.reason=i,this.signal.dispatchEvent(t)}toString(){return"[object AbortController]"}constructor(){Object.defineProperty(this,"signal",{value:new gr,writable:!0,configurable:!0})}};function br(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}typeof Symbol<"u"&&Symbol.toStringTag&&(vr.prototype[Symbol.toStringTag]="AbortController",gr.prototype[Symbol.toStringTag]="AbortSignal");var yr,Sr=br({fetch:window.fetch,Request:window.Request,AbortController:window.AbortController}),$r=Sr?function(e){"function"==typeof e&&(e={fetch:e});let{fetch:t,Request:i=t.Request,AbortController:r,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:n=!1}=e;if(!br({fetch:t,Request:i,AbortController:r,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:n}))return{fetch:t,Request:a};let a=i;(a&&!a.prototype.hasOwnProperty("signal")||n)&&(a=function(e,t){let r;t&&t.signal&&(r=t.signal,delete t.signal);let n=new i(e,t);return r&&Object.defineProperty(n,"signal",{writable:!1,enumerable:!1,configurable:!0,value:r}),n},a.prototype=i.prototype);let s=t;return{fetch:(e,t)=>{let i=a&&a.prototype.isPrototypeOf(e)?e.signal:t?t.signal:void 0;if(i){let r;try{r=new DOMException("Aborted","AbortError")}catch{r=new Error("Aborted"),r.name="AbortError"}if(i.aborted)return Promise.reject(r);let n=new Promise(((e,t)=>{i.addEventListener("abort",(()=>t(r)),{once:!0})}));return t&&t.signal&&delete t.signal,Promise.race([n,s(e,t)])}return s(e,t)},Request:a}}({fetch:window.fetch,Request:window.Request,AbortController:window.AbortController}):void 0,_r=Sr?$r.fetch:window.fetch,Tr=(Sr?$r.Request:window.Request,Sr?vr:window.AbortController),wr=(Sr||window.AbortSignal,g(Gt(),1)),Er=()=>window.ManagedMediaSource||window.MediaSource,xr=()=>!(!window.ManagedMediaSource||!window.ManagedSourceBuffer?.prototype?.appendBuffer),Ar=document.createElement("video"),Cr='video/webm; codecs="vp09.00.10.08"',kr='video/webm; codecs="av01.0.00M.08"',Lr={mms:xr(),mse:!(!window.MediaSource||!window.SourceBuffer?.prototype?.appendBuffer),hls:!(!Ar.canPlayType?.("application/x-mpegurl")&&!Ar.canPlayType?.("vnd.apple.mpegURL")),webrtc:!!window.RTCPeerConnection,ws:!!window.WebSocket},Rr={mp4:!!Ar.canPlayType?.("video/mp4"),webm:!!Ar.canPlayType?.("video/webm"),cmaf:!0},Pr={h264:!!Er()?.isTypeSupported?.('video/mp4; codecs="avc1.42000a,mp4a.40.2"'),h265:!!Er()?.isTypeSupported?.('video/mp4; codecs="hev1.1.6.L93.B0"'),vp9:!!Er()?.isTypeSupported?.(Cr),av1:!!Er()?.isTypeSupported?.(kr),aac:!!Er()?.isTypeSupported?.('audio/mp4; codecs="mp4a.40.2"'),opus:!!Er()?.isTypeSupported?.('audio/webm; codecs="opus"')},Or=(Pr.h264||Pr.h265)&&Pr.aac;try{(async()=>{if(!window.navigator.mediaCapabilities)return;let e={type:"media-source",video:{contentType:"video/webm",width:1280,height:720,bitrate:1e6,framerate:30}},[t,i]=await Promise.all([window.navigator.mediaCapabilities.decodingInfo({...e,video:{...e.video,contentType:kr}}),window.navigator.mediaCapabilities.decodingInfo({...e,video:{...e.video,contentType:Cr}})]);yr={DASH_WEBM_AV1:t,DASH_WEBM:i}})()}catch(e){console.error(e)}var Mr=Lr.hls&&Rr.mp4,Ir=e=>{let t="DASH_WEBM",i="DASH_WEBM_AV1";switch(e){case"vp9":return[t,i];case"av1":return[i,t];case"none":return[];case"smooth":return yr?yr[i].smooth?[i,t]:yr[t].smooth?[t,i]:[i,t]:[t,i];case"power_efficient":return yr?yr[i].powerEfficient?[i,t]:yr[t].powerEfficient?[t,i]:[i,t]:[t,i];default:(0,l.assertNever)(e)}return[t,i]},Nr=({webmCodec:e,androidPreferredFormat:t,preferMultiStream:i})=>{let r=[...i?["DASH_STREAMS"]:[],...Ir(e),"DASH_SEP","DASH_ONDEMAND",...i?[]:["DASH_STREAMS"]],n=[...i?["DASH_STREAMS"]:[],"DASH_SEP","DASH_ONDEMAND",...i?[]:["DASH_STREAMS"]];if(l.clientChecker.isAndroid)switch(t){case"mpeg":return["MPEG",...r,"HLS","HLS_ONDEMAND"];case"hls":return["HLS","HLS_ONDEMAND",...r,"MPEG"];case"dash":return[...r,"HLS","HLS_ONDEMAND","MPEG"];case"dash_any_mpeg":return[...n,"MPEG",...Ir(e),"HLS","HLS_ONDEMAND"];case"dash_any_webm":return[...Ir(e),"MPEG",...n,"HLS","HLS_ONDEMAND"];case"dash_sep":return["DASH_SEP","MPEG",...Ir(e),...n,"HLS","HLS_ONDEMAND"];default:(0,l.assertNever)(t)}return[...r,"HLS","HLS_ONDEMAND","MPEG"]},Vr=({androidPreferredFormat:e,preferCMAF:t,preferWebRTC:i})=>{let r,n=t?["DASH_LIVE_CMAF","DASH_LIVE"]:["DASH_LIVE","DASH_LIVE_CMAF"],a=t?["HLS_LIVE_CMAF","HLS_LIVE"]:["HLS_LIVE","HLS_LIVE_CMAF"],s=[...n,...a],o=[...a,...n],u=l.clientChecker.isMac&&l.clientChecker.isSafari;if(l.clientChecker.isAndroid)switch(e){case"dash":case"dash_any_mpeg":case"dash_any_webm":case"dash_sep":r=s;break;case"hls":case"mpeg":r=o;break;default:(0,l.assertNever)(e)}else r=Mr&&!u?o:u?t?["DASH_LIVE_CMAF","HLS_LIVE_CMAF","HLS_LIVE","DASH_LIVE"]:["HLS_LIVE","DASH_LIVE","DASH_LIVE_CMAF","HLS_LIVE_CMAF"]:s;return i?["WEB_RTC_LIVE",...r]:[...r,"WEB_RTC_LIVE"]},Dr=e=>e?["HLS_LIVE","HLS_LIVE_CMAF","DASH_LIVE_CMAF"]:["DASH_WEBM","DASH_WEBM_AV1","DASH_SEP","DASH_ONDEMAND","HLS","HLS_ONDEMAND","MPEG"],Br=e=>{if(0===e.size)return;if(1===e.size){let t=e.values().next();return(0,wr.default)(t.value.split("."),0)}for(let t of e){let e=(0,wr.default)(t.split("."),0);if("opus"===e||"vp09"===e||"av01"===e)return e}let t=e.values().next();return(0,wr.default)(t.value.split("."),0)},Ur=(e,t,i=0)=>{for(let r=0;r<e.length;r++)if(1e3*e.start(r)-i<=t&&1e3*e.end(r)+i>t)return!0;return!1},Fr=g(Gt(),1),jr=e=>"function"==typeof e&&e?.toString().endsWith("{ [native code] }"),Hr=!jr(window.requestIdleCallback)||!jr(window.cancelIdleCallback),zr=Hr?(e,t={})=>{let i=t.timeout||1,r=performance.now();return window.setTimeout((()=>{e({get didTimeout(){return!t.timeout&&performance.now()-r-1>i},timeRemaining:()=>Math.max(0,performance.now()-r+1)})}),1)}:window.requestIdleCallback,qr=(Hr||window.cancelIdleCallback,g(Ht(),1)),Wr=!1;try{Wr=l.clientChecker.isSafari&&!!l.clientChecker.macVersion&&l.clientChecker.macVersion<=18}catch(e){console.error(e)}var Gr=class{async append(e,t){return(!t||!t.aborted)&&new Promise((i=>{let r={operation:"append",data:e,signal:t,callback:i};this.queue.push(r),this.pull()}))}async remove(e,t,i){return(!i||!i.aborted)&&new Promise((r=>{let n={operation:"remove",from:e,to:t,signal:i,callback:r};this.queue.unshift(n),this.pull()}))}async abort(e){return new Promise((t=>{let i;i=Wr&&e?{operation:"safariAbort",init:e,callback:t}:{operation:"abort",callback:t};for(let{callback:e}of this.queue)e(!1);i&&(this.queue=[i]),this.pull()}))}destroy(){this.destroyed=!0,this.buffer.removeEventListener("updateend",this.completeTask),this.queue=[],this.currentTask=null;try{this.buffer.abort()}catch(e){if(!(e instanceof DOMException&&"InvalidStateError"===e.name))throw e}}pull(){if(this.buffer.updating||this.currentTask||this.destroyed)return;let e=this.queue.shift();if(!e)return;if(e.signal?.aborted)return e.callback(!1),void this.pull();this.currentTask=e;let{operation:t}=this.currentTask;try{this.execute(this.currentTask)}catch(e){e instanceof DOMException&&"QuotaExceededError"===e.name&&"append"===t?this.bufferFull$.next(this.currentTask.data.byteLength):e instanceof DOMException&&"InvalidStateError"===e.name||this.error$.next({id:`BufferTaskQueue:${t}`,category:l.ErrorCategory.VIDEO_PIPELINE,message:"Buffer operation failed",thrown:e}),this.currentTask.callback(!1),this.currentTask=null}this.currentTask&&"abort"===this.currentTask.operation&&this.completeTask()}execute(e){let{operation:t}=e;switch(t){case"append":this.buffer.appendBuffer(e.data);break;case"remove":this.buffer.remove(e.from/1e3,e.to/1e3);break;case"abort":this.buffer.abort();break;case"safariAbort":this.buffer.abort(),this.buffer.appendBuffer(e.init);break;default:(0,l.assertNever)(t)}}constructor(e){this.bufferFull$=new l.Subject,this.error$=new l.Subject,this.queue=[],this.currentTask=null,this.destroyed=!1,this.completeTask=()=>{try{if(this.currentTask){let e=this.currentTask.signal?.aborted;this.currentTask.callback(!e),this.currentTask=null}this.queue.length&&this.pull()}catch(e){this.error$.next({id:"BufferTaskQueueUnknown",category:l.ErrorCategory.VIDEO_PIPELINE,message:"Buffer appending or removal failed",thrown:e})}},this.buffer=e,this.buffer.addEventListener("updateend",this.completeTask)}},Qr=e=>{let t=0;for(let i=0;i<e.length;i++)t+=e.end(i)-e.start(i);return 1e3*t},Yr=class{get id(){return this.type}get size(){return this.size32}parseChildrenBoxes(){return[]}scanForBoxes(e){return this.boxParser.parse(e)}readString(e,t="ascii"){let i=new TextDecoder(t).decode(new DataView(this.source.buffer,this.source.byteOffset+this.cursor,e));return this.cursor+=e,i}readUint8(){let e=this.source.getUint8(this.cursor);return this.cursor+=1,e}readUint16(){let e=this.source.getUint16(this.cursor);return this.cursor+=2,e}readUint32(){let e=this.source.getUint32(this.cursor);return this.cursor+=4,e}readUint64(){let e=this.source.getBigInt64(this.cursor);return this.cursor+=8,e}constructor(e,t){this.cursor=0,this.source=e,this.boxParser=t,this.children=[];let i=this.readUint32();this.type=this.readString(4),this.size32=i<=e.buffer.byteLength-e.byteOffset?i:NaN;let r=this.size32?this.size32-8:void 0,n=e.byteOffset+this.cursor;this.size64=0,this.usertype=0,this.content=new DataView(e.buffer,n,r),this.children=this.parseChildrenBoxes()}},Kr=class extends Yr{},Xr=class extends Yr{constructor(e,t){super(e,t);let i=this.readUint32();this.version=i>>>24,this.flags=16777215&i}},Zr=class extends Xr{get earliestPresentationTime(){return this.earliestPresentationTime32}get firstOffset(){return this.firstOffset32}constructor(e,t){super(e,t),this.segments=[],this.referenceId=this.readUint32(),this.timescale=this.readUint32(),this.earliestPresentationTime32=this.readUint32(),this.firstOffset32=this.readUint32(),this.earliestPresentationTime64=0,this.firstOffset64=0,this.referenceCount=65535&this.readUint32();for(let e=0;e<this.referenceCount;e++){let e=this.readUint32(),t=e>>>31,i=e<<1>>>1,r=this.readUint32();e=this.readUint32();let n=e>>>28,a=e<<3>>>3;this.segments.push({referenceType:t,referencedSize:i,subsegmentDuration:r,SAPType:n,SAPDeltaTime:a})}}},Jr={ftyp:class extends Yr{constructor(e,t){super(e,t),this.compatibleBrands=[],this.majorBrand=this.readString(4),this.minorVersion=this.readUint32();let i=this.size-this.cursor;for(;i;){let e=this.readString(4);this.compatibleBrands.push(e),i-=4}}},moov:class extends Yr{parseChildrenBoxes(){return this.scanForBoxes(this.content)}},mvhd:class extends Xr{constructor(e,t){super(e,t),this.creationTime=this.readUint32(),this.modificationTime=this.readUint32(),this.timescale=this.readUint32(),this.duration=this.readUint32(),this.rate=this.readUint32(),this.volume=this.readUint16()}},moof:class extends Yr{parseChildrenBoxes(){return this.scanForBoxes(this.content)}},mdat:class extends Yr{constructor(e,t){super(e,t),this.data=this.content}},sidx:Zr,trak:class extends Yr{parseChildrenBoxes(){return this.scanForBoxes(this.content)}},mdia:class extends Yr{parseChildrenBoxes(){return this.scanForBoxes(this.content)}},mfhd:class extends Xr{constructor(e,t){super(e,t),this.sequenceNumber=this.readUint32()}},tkhd:class extends Xr{constructor(e,t){super(e,t),this.creationTime=this.readUint32(),this.modificationTime=this.readUint32(),this.trackId=this.readUint32(),this.cursor+=4,this.duration=this.readUint32(),this.cursor+=8,this.layer=this.readUint16(),this.alternateGroup=this.readUint16(),this.cursor+=2,this.cursor+=2,this.matrix=[[this.readUint32(),this.readUint32(),this.readUint32()],[this.readUint32(),this.readUint32(),this.readUint32()],[this.readUint32(),this.readUint32(),this.readUint32()]],this.width=this.readUint32(),this.height=this.readUint32()}},traf:class extends Yr{parseChildrenBoxes(){return this.scanForBoxes(this.content)}},tfhd:class extends Xr{constructor(e,t){super(e,t),this.trackId=this.readUint32(),1&this.flags&&(this.baseDataOffset=this.readUint64()),2&this.flags&&(this.sampleDescriptionIndex=this.readUint32()),8&this.flags&&(this.defaultSampleDuration=this.readUint32()),16&this.flags&&(this.defaultSampleSize=this.readUint32()),32&this.flags&&(this.defaultSampleFlags=this.readUint32())}},tfdt:class extends Xr{get baseMediaDecodeTime(){return 1===this.version?this.baseMediaDecodeTime64:this.baseMediaDecodeTime32}constructor(e,t){super(e,t),this.baseMediaDecodeTime32=0,this.baseMediaDecodeTime64=BigInt(0),1===this.version?this.baseMediaDecodeTime64=this.readUint64():this.baseMediaDecodeTime32=this.readUint32()}},trun:class extends Xr{constructor(e,t){super(e,t),this.sampleDuration=[],this.sampleSize=[],this.sampleFlags=[],this.sampleCompositionTimeOffset=[],this.optionalFields=0,this.sampleCount=this.readUint32(),1&this.flags&&(this.dataOffset=this.readUint32()),4&this.flags&&(this.firstSampleFlags=this.readUint32());for(let e=0;e<this.sampleCount;e++)256&this.flags&&this.sampleDuration.push(this.readUint32()),512&this.flags&&this.sampleSize.push(this.readUint32()),1024&this.flags&&this.sampleFlags.push(this.readUint32()),2048&this.flags&&this.sampleCompositionTimeOffset.push(this.readUint32())}},minf:class extends Yr{parseChildrenBoxes(){return this.scanForBoxes(this.content)}},sv3d:class extends Yr{parseChildrenBoxes(){return this.scanForBoxes(this.content)}},st3d:class extends Xr{constructor(e,t){switch(super(e,t),this.readUint8()){case 0:this.stereoMode=0;break;case 1:this.stereoMode=1;break;case 2:this.stereoMode=2;break;case 3:this.stereoMode=3;break;case 4:this.stereoMode=4}this.cursor+=1}},prhd:class extends Xr{constructor(e,t){super(e,t),this.poseYawDegrees=this.readUint32(),this.posePitchDegrees=this.readUint32(),this.poseRollDegrees=this.readUint32()}},proj:class extends Yr{parseChildrenBoxes(){return this.scanForBoxes(this.content)}},equi:class extends Xr{constructor(e,t){super(e,t),this.projectionBoundsTop=this.readUint32(),this.projectionBoundsBottom=this.readUint32(),this.projectionBoundsLeft=this.readUint32(),this.projectionBoundsRight=this.readUint32()}},uuid:class extends Yr{},unknown:Kr},en=class e{parse(e){let t=[],i=this.options.offset;for(;i<e.byteLength;)try{let r=new TextDecoder("ascii").decode(new DataView(e.buffer,e.byteOffset+i+4,4)),n=this.createBox(r,new DataView(e.buffer,e.byteOffset+i));if(!n.size)break;t.push(n),i+=n.size}catch{break}return t}createBox(t,i){let r=Jr[t];return r?new r(i,new e):new Kr(i,new e)}constructor(e={}){this.options={offset:0,...e}}},tn=class{indexBoxLevel(e){e.forEach((e=>{var t,i;(t=this.index)[i=e.type]??(t[i]=[]),this.index[e.type].push(e),e.children.length>0&&this.indexBoxLevel(e.children)}))}find(e){return this.index[e]&&this.index[e][0]?this.index[e][0]:null}findAll(e){return this.index[e]||[]}constructor(e){this.index={},this.indexBoxLevel(e)}},rn=new TextDecoder("ascii"),nn={validateData:e=>"ftyp"===rn.decode(new DataView(e.buffer,e.byteOffset+4,4)),parseInit:e=>{let t={is3dVideo:!1,stereoMode:0,projectionType:1,projectionData:{pose:{yaw:0,pitch:0,roll:0},bounds:{top:0,bottom:0,left:0,right:0}}},i=(new en).parse(e),r=new tn(i);if(r.find("sv3d")){t.is3dVideo=!0;let e=r.find("st3d");e&&(t.stereoMode=e.stereoMode);let i=r.find("prhd");i&&(t.projectionData.pose.yaw=i.poseYawDegrees,t.projectionData.pose.pitch=i.posePitchDegrees,t.projectionData.pose.roll=i.poseRollDegrees);let n=r.find("equi");n&&(t.projectionData.bounds.top=n.projectionBoundsTop,t.projectionData.bounds.right=n.projectionBoundsRight,t.projectionData.bounds.bottom=n.projectionBoundsBottom,t.projectionData.bounds.left=n.projectionBoundsLeft)}return t},getIndexRange:()=>{},parseSegments:e=>{let t=new Zr(e,new en),i=t.earliestPresentationTime/t.timescale*1e3,r=e.byteOffset+e.byteLength+t.firstOffset;return t.segments.map((e=>{if(0!==e.referenceType)throw new Error("Unsupported multilevel sidx");let n=e.subsegmentDuration/t.timescale*1e3,a={status:"none",time:{from:i,to:i+n},byte:{from:r,to:r+e.referencedSize-1}};return i+=n,r+=e.referencedSize,a}))},parseFeedableSegmentChunk:(e,t)=>{let i=(new en).parse(e),r=new tn(i),n=r.findAll("moof"),a=t?r.findAll("uuid"):r.findAll("mdat");if(!a.length||!n.length)return null;let s=n[0],o=a[a.length-1],l=s.source.byteOffset,u=o.source.byteOffset-s.source.byteOffset+o.size;return new DataView(e.buffer,l,u)},getChunkEndTime:(e,t)=>{let i=(new en).parse(e),r=new tn(i).findAll("traf"),n=r[r.length-1].children.find((e=>"tfhd"===e.type)),a=r[r.length-1].children.find((e=>"tfdt"===e.type)),s=r[r.length-1].children.find((e=>"trun"===e.type)),o=0;return o=s.sampleDuration.length?s.sampleDuration.reduce(((e,t)=>e+t),0):n.defaultSampleDuration*s.sampleCount,(Number(a.baseMediaDecodeTime)+o)/t*1e3},getTimescaleFromIndex:e=>{let t=(new en).parse(e);return new tn(t).find("sidx")?.timescale}},an={440786851:{type:"master"},17030:{type:"uint"},17143:{type:"uint"},17138:{type:"uint"},17139:{type:"uint"},17026:{type:"string"},17031:{type:"uint"},17029:{type:"uint"},236:{type:"binary"},408125543:{type:"master"},290298740:{type:"master"},19899:{type:"master"},21419:{type:"binary"},21420:{type:"uint"},357149030:{type:"master"},2807729:{type:"uint"},17545:{type:"float"},374648427:{type:"master"},174:{type:"master"},224:{type:"master"},30320:{type:"master"},30321:{type:"uint"},30322:{type:"master"},272869232:{type:"master"},524531317:{type:"master"},231:{type:"uint"},22612:{type:"master"},22743:{type:"uint"},167:{type:"uint"},171:{type:"uint"},163:{type:"binary"},160:{type:"master"},175:{type:"binary"},423732329:{type:"master"},307544935:{type:"master"},475249515:{type:"master"},187:{type:"master"},179:{type:"uint"},183:{type:"master"},247:{type:"uint"},241:{type:"uint"},240:{type:"uint"},178:{type:"uint"},21368:{type:"uint"},234:{type:"uint"},219:{type:"master"},150:{type:"uint"}},sn=e=>{let t=e.getUint8(0),i=0;128&t?i=1:64&t?i=2:32&t?i=3:16&t&&(i=4);let r=on(e,i),n=r in an,a=n?an[r].type:"binary",s=e.getUint8(i),o=0;128&s?o=1:64&s?o=2:32&s?o=3:16&s?o=4:8&s?o=5:4&s?o=6:2&s?o=7:1&s&&(o=8);let l,u=new DataView(e.buffer,e.byteOffset+i+1,o-1),c=(s&255>>o)*2**(8*(o-1))+on(u),d=i+o;return l=d+c>e.byteLength?new DataView(e.buffer,e.byteOffset+d):new DataView(e.buffer,e.byteOffset+d,c),{tag:n?r:"0x"+r.toString(16).toUpperCase(),type:a,tagHeaderSize:d,tagSize:d+c,value:l,valueSize:c}},on=(e,t=e.byteLength)=>{switch(t){case 1:return e.getUint8(0);case 2:return e.getUint16(0);case 3:return 65536*e.getUint8(0)+e.getUint16(1);case 4:return e.getUint32(0);case 5:return e.getUint8(0)*2**32+e.getUint32(1);case 6:return e.getUint16(0)*2**32+e.getUint32(2);case 7:{let t=281474976710656*e.getUint8(0)+4294967296*e.getUint16(1)+e.getUint32(3);if(Number.isSafeInteger(t))return t}case 8:throw new ReferenceError("Int64 is not supported")}return 0},ln=(e,t)=>{switch(t){case"int":return e.getInt8(0);case"uint":return on(e);case"float":return 4===e.byteLength?e.getFloat32(0):e.getFloat64(0);case"string":return new TextDecoder("ascii").decode(e);case"utf8":return new TextDecoder("utf-8").decode(e);case"date":return new Date(Date.UTC(2001,0)+e.getInt8(0)).getTime();case"master":case"binary":return e;default:(0,l.assertNever)(t)}},un=(e,t)=>{let i=0;for(;i<e.byteLength;){let r=new DataView(e.buffer,e.byteOffset+i),n=sn(r);if(!t(n))return;"master"===n.type&&un(n.value,t),i=n.value.byteOffset-e.byteOffset+n.valueSize}},cn=[357149030,290298740,374648427,174,224,30320,30321,30322,272869232,524531317,475249515,423732329,307544935],dn=[231,22612,22743,167,171,163,160,175],pn={validateData:e=>{if(440786851!==e.getUint32(0))return!1;let t,i,r,n=sn(e);return un(n.value,(({tag:e,type:n,value:a})=>(17143===e?t=ln(a,n):17026===e?i=ln(a,n):17029===e&&(r=ln(a,n)),!0))),(void 0===t||t<=1)&&void 0!==i&&"webm"===i&&(void 0===r||r<=2)},parseInit:e=>{let t,i,r,n,a,s,o=!1,u=!1,c=!1,d=!1;return un(e,(({tag:e,type:l,value:p,valueSize:h})=>{if(21419===e){let e=ln(p,l);s=on(e)}else 21420!==e&&(s=void 0);return 408125543===e?(t=p.byteOffset,i=p.byteOffset+h):357149030===e?o=!0:290298740===e?u=!0:2807729===e?r=ln(p,l):17545===e?n=ln(p,l):21420===e&&475249515===s?a=ln(p,l):374648427===e?un(p,(({tag:e,type:t,value:i})=>30321!==e||(d=1===ln(i,t),!1))):o&&u&&cn.includes(e)&&(c=!0),!c})),(0,l.assertNonNullable)(t,"Failed to parse webm Segment start"),(0,l.assertNonNullable)(i,"Failed to parse webm Segment end"),(0,l.assertNonNullable)(n,"Failed to parse webm Segment duration"),r=r??1e6,{segmentStart:Math.round(t/1e9*r*1e3),segmentEnd:Math.round(i/1e9*r*1e3),timeScale:r,segmentDuration:Math.round(n/1e9*r*1e3),cuesSeekPosition:a,is3dVideo:d,stereoMode:0,projectionType:1,projectionData:{pose:{yaw:0,pitch:0,roll:0},bounds:{top:0,bottom:0,left:0,right:0}}}},getIndexRange:e=>{if((0,l.isNullable)(e.cuesSeekPosition))return;let t=e.segmentStart+e.cuesSeekPosition;return{from:t,to:t+1048576}},parseSegments:(e,t)=>{let i,r=!1,n=!1,a=e=>(0,l.isNonNullable)(e.time)&&(0,l.isNonNullable)(e.position),s=[];return un(e,(({tag:e,type:t,value:o})=>{switch(e){case 475249515:r=!0;break;case 187:i&&a(i)&&s.push(i),i={};break;case 179:i&&(i.time=ln(o,t));break;case 183:break;case 241:i&&(i.position=ln(o,t));break;default:r&&cn.includes(e)&&(n=!0)}return!(r&&n)})),i&&a(i)&&s.push(i),s.map(((e,i)=>{let{time:r,position:n}=e,a=s[i+1];return{status:"none",time:{from:r,to:a?a.time:t.segmentDuration},byte:{from:t.segmentStart+n,to:a?t.segmentStart+a.position-1:t.segmentEnd-1}}}))},parseFeedableSegmentChunk:e=>{let t=0,i=!1;try{un(e,(r=>524531317===r.tag?r.tagSize<=e.byteLength?(t=r.tagSize,!1):(t+=r.tagHeaderSize,!0):!!dn.includes(r.tag)&&(t+r.tagSize<=e.byteLength&&(t+=r.tagSize,i||(i=[163,160,175].includes(r.tag))),!0)))}catch{}return t>0&&t<=e.byteLength&&i?new DataView(e.buffer,e.byteOffset,t):null}},hn=e=>{let t=/^(.+)\/([^;]+)(?:;.*)?$/.exec(e);if(t){let[,e,i]=t;if("audio"===e||"video"===e)switch(i){case"webm":return pn;case"mp4":return nn}}throw new ReferenceError(`Unsupported mime type ${e}`)},fn=g(ni(),1),mn=g(Gt(),1),gn=e=>{let t=e.split("."),[i,...r]=t;if(!i)return!1;switch(i){case"av01":{let[e,t,i]=r;return!!(i&&parseInt(i,10)>8)}case"vp09":{let[e,t,i]=r;return!!(e&&parseInt(e,10)>=2&&i&&parseInt(i,10)>8)}case"avc1":{let e=r[0];if(!e||6!==e.length)return!1;let[t,i]=e.toUpperCase();return["6E","7A","F4"].includes(t+i)}}return!1},vn=e=>{if(e.includes("/")){let t=e.split("/");return parseInt(t[0])/parseInt(t[1])}return parseFloat(e)},bn=e=>{try{let t=function(){let e="(?<extlang>(?:[a-z]{3}(?:-[a-z]{3}){0,2}))",t="x(?:-[a-z0-9]{1,8})+",i=`^(?:(?<langtag>\n    (?<language>(?:[a-z]{2,3}(?:-${e})?|[a-z]{4}|[a-z]{5,8}))\n    (-(?<script>[a-z]{4}))?\n    (-(?<region>(?:[a-z]{2}|[0-9]{3})))?\n    (?<variants>(?:-(?:[a-z0-9]{5,8}|[0-9][a-z0-9]{3}))*)\n    (?<extensions>(?:-[0-9a-wy-z](?:-[a-z0-9]{2,8})+)*)\n    (?:-(?<privateuse>(?:${t})))?\n  )|(?<privateuse2>${t}))$`.replace(/[\s\t\n]/g,"");return new RegExp(i,"i")}(),i=e.match(t),{groups:r}=i??{};if(r){let e={};if(r.extensions){let t=r.extensions.toLowerCase().match(/(?:[0-9a-wy-z](?:-[a-z0-9]{2,8})+)/g);Array.from(t||[]).forEach((t=>{e[t[0]]=t.slice(2)}))}let t=r.variants?.split(/-/).filter((e=>""!==e)),i={extlang:r.extlang,langtag:r.langtag,language:r.language,privateuse:r.privateuse||r.privateuse2,region:r.region,script:r.script,extensions:e,variants:t};return Object.keys(i).forEach((e=>{let t=i[e];(typeof t>"u"||""===t)&&delete i[e]})),i}return null}catch{return null}};var yn=e=>{if(!e.startsWith("P"))return;let t=(e,t)=>{let i=e?parseFloat(e.replace(",",".")):NaN;return(isNaN(i)?0:i)*t},i=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/.exec(e),r="-"===i?.[1]?-1:1;return 24*t(i?.[5],r)*60*60*1e3+60*t(i?.[6],r)*60*1e3+60*t(i?.[7],r)*1e3+1e3*t(i?.[8],r)},Sn=(e,t)=>{let i=e;i=(0,fn.default)(i,"$$","$");let r={RepresentationID:t.representationId,Number:t.segmentNumber,Bandwidth:t.bandwidth,Time:t.segmentTime};for(let[e,t]of Object.entries(r)){let r=new RegExp(`\\$${e}(?:%0(\\d+)d)?\\$`,"g");i=(0,fn.default)(i,r,((e,i)=>(0,l.isNullable)(t)?e:(0,l.isNullable)(i)?t:t.padStart(parseInt(i,10),"0")))}return i},$n=g(Gt(),1),_n=({id:e,width:t,height:i,bitrate:r,fps:n,quality:a})=>{let s=(a?Ii(a):void 0)??(0,l.videoSizeToQuality)({width:t,height:i});return s&&{id:e,quality:s,bitrate:r,size:{width:t,height:i},fps:n}},Tn=({id:e,bitrate:t})=>({id:e,bitrate:t}),wn=({language:e,label:t},{id:i,url:r,isAuto:n})=>({id:i,url:r,isAuto:n,type:"internal",language:e,label:t}),En=({id:e,language:t,label:i,codecs:r,isDefault:n})=>({id:e,language:t,label:i,codec:(0,$n.default)(r.split("."),0),isDefault:n}),xn=({id:e,language:t,label:i,hdr:r,codecs:n})=>({id:e,language:t,hdr:r,label:i,codec:(0,$n.default)(n.split("."),0)}),An=e=>"url"in e,Cn=e=>"template"===e.type,kn=e=>e instanceof DOMException&&("AbortError"===e.name||20===e.code),Ln=class{switchTo(e,t=!1){return this.tuning.useNewSwitchTo?this.switchToNew(e,t):this.switchToOld(e,t)}switchToNew(e,t=!1){e===this.downloadingRepresentationId||e===this.switchingToRepresentationId||(this.switchAbortController.abort(),this.switchAbortController=new Tr,(0,l.abortable)(this.switchAbortController.signal,async function*(e,t=!1){this.switchingToRepresentationId=e;let i=this.representations.get(e);(0,l.assertNonNullable)(i,`No such representation ${e}`);let r=this.segments.get(e),n=this.initData.get(e);if((0,l.isNullable)(n)||(0,l.isNullable)(r)?yield this.loadInit(i,"high",!1):n instanceof Promise&&(yield n),r=this.segments.get(e),(0,l.assertNonNullable)(r,"No segments for starting representation"),n=this.initData.get(e),n instanceof ArrayBuffer&&this.sourceBuffer){if(this.abort(),yield this.sourceBufferTaskQueue.append(n,this.downloadAbortController.signal),t)this.switchingToRepresentationId=void 0,this.downloadingRepresentationId=e,yield this.dropBuffer();else{let t=this.getCurrentPosition();(0,l.isNonNullable)(t)&&!this.isLive&&(this.bufferLimit=this.forwardBufferTarget,yield this.pruneBuffer(t,1/0,!0)),this.downloadingRepresentationId=e,this.switchingToRepresentationId=void 0}this.maintain()}}.bind(this))(e,t))}abort(){for(let e of this.activeSegments)this.abortSegment(e.segment);this.activeSegments.clear(),this.downloadAbortController.abort(),this.downloadAbortController=new Tr,this.abortBuffer()}maintain(e=this.getCurrentPosition()){if((0,l.isNullable)(e)||(0,l.isNullable)(this.downloadingRepresentationId)||(0,l.isNullable)(this.playingRepresentationId)||(0,l.isNullable)(this.sourceBuffer)||(0,l.isNonNullable)(this.switchingToRepresentationId)||this.isSeekingLive)return;let t=this.representations.get(this.downloadingRepresentationId),i=this.segments.get(this.downloadingRepresentationId);if((0,l.assertNonNullable)(t,`No such representation ${this.downloadingRepresentationId}`),!i)return;let r=i.find((t=>e>=t.time.from&&e<t.time.to));this.currentSegmentLength$.next((r?.time.to??0)-(r?.time.from??0));let n=e;if(this.playingRepresentationId!==this.downloadingRepresentationId){let t=fr(this.sourceBuffer.buffered,e),i=r?r.time.to+100:-1/0;r&&r.time.to-e<this.tuning.dash.maxSegmentDurationLeftToSelectNextSegment&&t>=r.time.to-e+100&&(n=i)}if(isFinite(this.bufferLimit)&&Qr(this.sourceBuffer.buffered)>=this.bufferLimit){let t=fr(this.sourceBuffer.buffered,e),i=Math.min(this.forwardBufferTarget,this.bufferLimit)*this.tuning.dash.minSafeBufferThreshold;return void this.pruneBuffer(e,1/0,t<i)}let a=[];if(!this.activeSegments.size&&(a=this.selectForwardBufferSegments(i,t.segmentReference.type,n),a.length)){let e="auto";if(this.tuning.dash.useFetchPriorityHints&&r)if(a.includes(r))e="high";else{let t=(0,Fr.default)(a,0);t&&t.time.from-r.time.to>=this.forwardBufferTarget/2&&(e="low")}this.loadSegments(a,t,e)}(!this.preloadOnly&&!this.allInitsLoaded&&r&&"fed"===r.status&&!a.length&&fr(this.sourceBuffer.buffered,e)>3e3||this.isActiveLowLatency())&&this.loadNextInit();let s=(0,Fr.default)(i,-1);s&&"fed"===s.status&&(this.fullyBuffered$.next(!0),this.isLive||this.onLastSegment$.next(r===s))}get lastDataObtainedTimestamp(){return this.lastDataObtainedTimestampMs}searchGaps(e,t){this.gaps=[];let i=0,r=this.isLive?this.liveInitialAdditionalOffset:0;for(let n of e)Math.trunc(n.time.from-i)>0&&this.gaps.push({representation:t.id,from:i,to:n.time.from+r}),i=n.time.to;(0,l.isNonNullable)(t.duration)&&t.duration-i>0&&this.gaps.push({representation:t.id,from:i,to:t.duration})}getActualLiveStartingSegments(e){let t=e.segments,i=this.isActiveLowLatency()?this.tuning.dashCmafLive.lowLatency.maxTargetOffset:this.tuning.dashCmafLive.maxActiveLiveOffset,r=[],n=0,a=t.length-1;do{r.unshift(t[a]),n+=t[a].time.to-t[a].time.from,a--}while(n<i&&a>=0);return this.liveInitialAdditionalOffset=n-i,this.isActiveLowLatency()?[r[0]]:r}getLiveSegmentsToLoadState(e){let t=e?.streams[this.kind].flatMap((e=>e.representations)).find((e=>e.id===this.downloadingRepresentationId));if(!t)return;let i=this.segments.get(t.id);return i?.length?{from:i[0].time.from,to:i[i.length-1].time.to}:void 0}updateLive(e){let t=e?.streams[this.kind].flatMap((e=>e.representations))??[];for(let e of t){if(!e||!Cn(e.segmentReference))return;let t=e.segmentReference.segments.map((e=>({...e,status:"none",size:void 0}))),i=this.segments.get(e.id)??[],r=(0,Fr.default)(i,-1)?.time.to??0,n=t?.findIndex((e=>Math.floor(r)>=Math.floor(e.time.from)&&Math.floor(r)<=Math.floor(e.time.to)));if(-1===n){this.liveUpdateSegmentIndex=0;let t=this.getActualLiveStartingSegments(e.segmentReference);this.segments.set(e.id,t)}else{let r=t.slice(n+1);this.segments.set(e.id,[...i,...r])}}}proceedLowLatencyLive(){let e=this.downloadingRepresentationId;(0,l.assertNonNullable)(e);let t=this.segments.get(e);if(t?.length){let e=t[t.length-1];this.updateLowLatencyLiveIfNeeded(e)}}startAccumulateBuffer(){this.bufferAccumulation.enabled=!0}resetAccumulateBufferAfterStall(){(0,l.assertNonNullable)(this.playingRepresentationId);let e=this.representations.get(this.playingRepresentationId)?.duration;(0,l.assertNonNullable)(e);let{shortVideoDuration:t,shortVideoBufferStallSize:i,longVideoBufferStallSize:r}=this.tuning.dash.accumulationBufferStallSize;this.bufferAccumulation={enabled:!1,targetBufferSizeMs:e<=t?i:r,accumulatedBufferSizeMs:0,accumulated:[]}}updateLowLatencyLiveIfNeeded(e){for(let t of this.representations.values()){let i=t.segmentReference;if(!Cn(i))return;let r=this.segments.get(t.id)??[],n=r.find((t=>Math.floor(t.time.from)===Math.floor(e.time.from)));if(n&&!isFinite(n.time.to)&&(n.time.to=e.time.to),!r.find((t=>Math.floor(t.time.from)===Math.floor(e.time.to)))&&this.isActiveLowLatency()){let t=Math.round(e.time.to*i.timescale/1e3).toString(10),n=Sn(i.segmentTemplateUrl,{segmentTime:t});r.push({status:"none",time:{from:e.time.to,to:1/0},url:n})}}}findSegmentStartTime(e){let t=this.switchingToRepresentationId??this.downloadingRepresentationId??this.playingRepresentationId;if(!t)return;let i=this.segments.get(t);return i?i.find((t=>t.time.from<=e&&t.time.to>=e))?.time.from??void 0:void 0}setTarget(e){this.forwardBufferTarget=e}setPreloadOnly(e){this.preloadOnly=e}destroy(){if(this.initData.clear(),this.segments.clear(),this.parsedInitData.clear(),this.representations.clear(),this.sourceBufferTaskQueue?.destroy(),this.gapDetectionIdleCallback&&window.cancelIdleCallback&&window.cancelIdleCallback(this.gapDetectionIdleCallback),this.initLoadIdleCallback&&window.cancelIdleCallback&&window.cancelIdleCallback(this.initLoadIdleCallback),this.subscription.unsubscribe(),this.sourceBuffer){"open"===this.mediaSource.readyState&&this.abortBuffer();try{this.mediaSource.removeSourceBuffer(this.sourceBuffer)}catch(e){if(!(e instanceof DOMException&&"NotFoundError"===e.name))throw e}}this.sourceBuffer=null,this.downloadAbortController.abort(),this.switchAbortController.abort(),this.destroyAbortController.abort(),window.clearTimeout(this.loadByteRangeSegmentsTimeoutId)}selectForwardBufferSegments(e,t,i){return this.isLive?this.selectForwardBufferSegmentsLive(e,i):this.selectForwardBufferSegmentsRecord(e,t,i)}selectForwardBufferSegmentsLive(e,t){let i=e.findIndex((e=>t>=e.time.from&&t<e.time.to));return this.playingRepresentationId!==this.downloadingRepresentationId&&(this.liveUpdateSegmentIndex=i),this.liveUpdateSegmentIndex<e.length?e.slice(this.liveUpdateSegmentIndex++):[]}selectForwardBufferSegmentsRecord(e,t,i){let r=e.findIndex((({status:e,time:{from:t,to:r}},n)=>{let a=t>i||t<=i&&r>=i||0===n&&0===i,s=Math.min(this.forwardBufferTarget,this.bufferLimit),o=this.preloadOnly&&t<=i+s||r<=i+s;return("none"===e||"partially_ejected"===e&&a&&o&&this.sourceBuffer&&!(Ur(this.sourceBuffer.buffered,t)&&Ur(this.sourceBuffer.buffered,r)))&&a&&o}));if(-1===r)return[];if("byteRange"!==t)return e.slice(r,r+1);let n=e,a=0,s=0,o=[],l=this.preloadOnly?0:this.tuning.dash.segmentRequestSize,u=this.preloadOnly?this.forwardBufferTarget:0;for(let e=r;e<n.length&&(a<=l||s<=u);e++){let t=n[e];if(a+=t.byte.to+1-t.byte.from,s+=t.time.to+1-t.time.from,"none"!==t.status&&"partially_ejected"!==t.status)break;o.push(t)}return o}async loadSegments(e,t,i="auto"){Cn(t.segmentReference)?await this.loadTemplateSegment(e[0],t,i):await this.loadByteRangeSegments(e,t,i)}async loadTemplateSegment(e,t,i="auto"){e.status="downloading";let r={segment:e,loadedBytes:0,feedingBytes:0,fedBytes:0,representationId:t.id};this.activeSegments.add(r);let{range:n,url:a,signal:s,onProgress:o,onProgressTasks:u}=this.prepareTemplateFetchSegmentParams(e,t);this.failedDownloads&&s&&(await(0,l.abortable)(s,async function*(){let e=(0,l.getExponentialDelay)(this.failedDownloads,this.tuning.downloadBackoff);yield new Promise((t=>setTimeout(t,e)))}.bind(this))(),s.aborted&&this.abortActiveSegments([e]));try{let e=await this.fetcher.fetch(a,{range:n,signal:s,onProgress:o,priority:i,isLowLatency:this.isActiveLowLatency()});if(this.lastDataObtainedTimestampMs=(0,l.now)(),!e)return;let c=new DataView(e);if(!isFinite(r.segment.time.to)){let e=t.segmentReference.timescale,i=hn(t.mime);r.segment.time.to=i.getChunkEndTime(c,e)}o&&r.feedingBytes&&u?await Promise.all(u):await this.sourceBufferTaskQueue.append(c,s),r.segment.status="downloaded",this.onSegmentFullyAppended(r,t.id),this.failedDownloads=0}catch(t){this.abortActiveSegments([e]),kn(t)||(this.failedDownloads++,this.updateRepresentationsBaseUrlIfNeeded())}}updateRepresentationsBaseUrlIfNeeded(){if(!this.tuning.dash.enableBaseUrlSupport||!this.baseUrls.length||this.failedDownloads<=this.tuning.dash.maxSegmentRetryCount)return;this.baseUrlsIndex=(this.baseUrlsIndex+1)%this.baseUrls.length;let e=this.baseUrls[this.baseUrlsIndex];for(let t of this.representations.values())Cn(t.segmentReference)?t.segmentReference.baseUrl=e:t.segmentReference.url=e}async loadByteRangeSegments(e,t,i="auto"){if(!e.length)return;for(let i of e)i.status="downloading",this.activeSegments.add({segment:i,loadedBytes:0,feedingBytes:0,fedBytes:0,representationId:t.id});let{range:r,url:n,signal:a,onProgress:s}=this.prepareByteRangeFetchSegmentParams(e,t);this.failedDownloads&&a&&(await(0,l.abortable)(a,async function*(){let e=(0,l.getExponentialDelay)(this.failedDownloads,this.tuning.downloadBackoff);yield new Promise((t=>{this.loadByteRangeSegmentsTimeoutId=window.setTimeout(t,e),(0,l.fromEvent)(window,"online").pipe((0,l.once)()).subscribe((()=>{t(),window.clearTimeout(this.loadByteRangeSegmentsTimeoutId)}))}))}.bind(this))(),a.aborted&&this.abortActiveSegments(e));try{await this.fetcher.fetch(n,{range:r,onProgress:s,signal:a,priority:i}),this.lastDataObtainedTimestampMs=(0,l.now)(),this.failedDownloads=0}catch(t){this.abortActiveSegments(e),kn(t)||(this.failedDownloads++,this.updateRepresentationsBaseUrlIfNeeded())}}prepareByteRangeFetchSegmentParams(e,t){if(Cn(t.segmentReference))throw new Error("Representation is not byte range type");let i=t.segmentReference.url,r={from:(0,Fr.default)(e,0).byte.from,to:(0,Fr.default)(e,-1).byte.to},{signal:n}=this.downloadAbortController;return{url:i,range:r,signal:n,onProgress:(e,i)=>{if(!n.aborted)try{this.lastDataObtainedTimestampMs=(0,l.now)(),this.onSomeByteRangesDataLoaded({dataView:e,loaded:i,signal:n,onSegmentAppendFailed:()=>this.abort(),globalFrom:r?r.from:0,representationId:t.id})}catch(e){this.error$.next({id:"SegmentFeeding",category:l.ErrorCategory.VIDEO_PIPELINE,message:"Error when feeding segments",thrown:e})}}}}prepareTemplateFetchSegmentParams(e,t){if(!Cn(t.segmentReference))throw new Error("Representation is not template type");let i=new URL(e.url,t.segmentReference.baseUrl);this.isActiveLowLatency()&&i.searchParams.set("low-latency","yes");let r=i.toString(),{signal:n}=this.downloadAbortController,a=[],s=this.isActiveLowLatency()||this.tuning.dash.enableSubSegmentBufferFeeding&&this.liveUpdateSegmentIndex<3?(e,i)=>{if(!n.aborted)try{this.lastDataObtainedTimestampMs=(0,l.now)();let r=this.onSomeTemplateDataLoaded({dataView:e,loaded:i,signal:n,onSegmentAppendFailed:()=>this.abort(),representationId:t.id});a.push(r)}catch(e){this.error$.next({id:"SegmentFeeding",category:l.ErrorCategory.VIDEO_PIPELINE,message:"Error when feeding segments",thrown:e})}}:void 0;return{url:r,signal:n,onProgress:s,onProgressTasks:a}}abortActiveSegments(e){for(let t of this.activeSegments)e.includes(t.segment)&&this.abortSegment(t.segment)}async onSomeTemplateDataLoaded({dataView:e,representationId:t,loaded:i,onSegmentAppendFailed:r,signal:n}){if(!this.activeSegments.size)return;let a=this.representations.get(t);if(a)for(let s of this.activeSegments){let{segment:o}=s;if(s.representationId===t){if(n.aborted){r();continue}if(s.loadedBytes=i,s.loadedBytes>s.feedingBytes){let t=new DataView(e.buffer,e.byteOffset+s.feedingBytes,s.loadedBytes-s.feedingBytes),i=hn(a.mime).parseFeedableSegmentChunk(t,this.isLive);i?.byteLength&&(o.status="partially_fed",s.feedingBytes+=i.byteLength,await this.sourceBufferTaskQueue.append(i),s.fedBytes+=i.byteLength)}}}}async onSomeByteRangesDataLoaded({dataView:e,representationId:t,globalFrom:i,loaded:r,signal:n,onSegmentAppendFailed:a}){if(!this.activeSegments.size)return;let s=this.representations.get(t);if(s)for(let o of this.activeSegments){let{segment:u}=o;if(o.representationId!==t)continue;if(n.aborted){a();continue}let c=u.byte.from-i,d=u.byte.to-i,p=d-c+1,h=d<=r;if(!(c<r))continue;let f=hn(s.mime),m=this.tuning.dash.enableSubSegmentBufferFeeding&&("getChunkEndTime"in f||0===this.bufferAccumulation.targetBufferSizeMs);if("downloading"===u.status&&h){u.status="downloaded";let i=new DataView(e.buffer,e.byteOffset+c,p),r=this.getCurrentPosition();(0,l.isNonNullable)(r)&&(this.bufferAccumulation.accumulatedBufferSizeMs=u.time.to-r,this.bufferAccumulation.accumulated.push({dataView:i,segmentProgress:o}),this.activeSegments.delete(o));let s=async({dataView:e,segmentProgress:i})=>{await this.sourceBufferTaskQueue.append(e,n)&&!n.aborted?this.onSegmentFullyAppended(i,t):a()};this.bufferAccumulation.enabled&&this.bufferAccumulation.accumulatedBufferSizeMs>this.bufferAccumulation.targetBufferSizeMs?(this.bufferAccumulation.accumulated.forEach(s),this.resetAccumulateBufferAfterStall()):(!this.bufferAccumulation.enabled||!this.bufferAccumulation.targetBufferSizeMs||(0,l.isNullable)(r))&&(s({dataView:i,segmentProgress:o}),this.resetAccumulateBufferAfterStall())}else if(m&&("downloading"===u.status||"partially_fed"===u.status)&&(o.loadedBytes=Math.min(p,r-c),o.loadedBytes>o.feedingBytes)){let i=new DataView(e.buffer,e.byteOffset+c+o.feedingBytes,o.loadedBytes-o.feedingBytes),r=o.loadedBytes===p?i:f.parseFeedableSegmentChunk(i);r?.byteLength&&(u.status="partially_fed",o.feedingBytes+=r.byteLength,await this.sourceBufferTaskQueue.append(r,n)&&!n.aborted?(o.fedBytes+=r.byteLength,o.fedBytes===p&&this.onSegmentFullyAppended(o,t)):a())}}}onSegmentFullyAppended(e,t){this.tuning.useSafariEndlessRequestBugfix&&!this.isLive&&((0,l.assertNonNullable)(this.sourceBuffer),Ur(this.sourceBuffer.buffered,e.segment.time.from,100)&&Ur(this.sourceBuffer.buffered,e.segment.time.to,100)||this.error$.next({id:"SafariEmptyAppendBuffer",category:l.ErrorCategory.VIDEO_PIPELINE,message:"Safari stuck on empty result of adding segment to source buffer"})),this.playingRepresentationId=t,this.playingRepresentation$.next(this.playingRepresentationId),this.playingRepresentationInit$.next(this.parsedInitData.get(this.playingRepresentationId)),e.segment.status="fed",An(e.segment)&&(e.segment.size=e.fedBytes);for(let i of this.representations.values())if(i.id!==t)for(let t of this.segments.get(i.id)??[])"fed"===t.status&&Math.round(t.time.from)===Math.round(e.segment.time.from)&&Math.round(t.time.to)===Math.round(e.segment.time.to)&&(t.status="none");(0,l.assertNonNullable)(this.sourceBuffer),this.updateLowLatencyLiveIfNeeded(e.segment),this.activeSegments.delete(e),this.detectGapsWhenIdle(t,[e.segment])}abortSegment(e){"partially_fed"===e.status?e.status="partially_ejected":"partially_ejected"!==e.status&&(e.status="none");for(let t of this.activeSegments.values())if(t.segment===e){this.activeSegments.delete(t);break}}loadNextInit(){if(this.allInitsLoaded||this.initLoadIdleCallback)return;let e=null,t=!1;for(let[i,r]of this.initData.entries()){t||(t=r instanceof Promise),null===r&&(e=i)}if(!e)return void(this.allInitsLoaded=!0);if(t)return;let i=this.representations.get(e);i&&(this.initLoadIdleCallback=zr((()=>(0,qr.default)(this.loadInit(i,"low",!1),(()=>this.initLoadIdleCallback=null)))))}async loadInit(e,t="auto",i=!1){let r=this.tuning.dash.useFetchPriorityHints?t:"auto",n=(!i&&this.failedDownloads>0?(0,l.abortable)(this.destroyAbortController.signal,async function*(){let e=(0,l.getExponentialDelay)(this.failedDownloads,this.tuning.downloadBackoff);yield new Promise((t=>setTimeout(t,e)))}.bind(this))():Promise.resolve()).then((()=>this.fetcher.fetchRepresentation(e.segmentReference,hn(e.mime),r))).then((async t=>{if(!t)return;let{init:i,dataView:r,segments:n}=t,a=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength);this.initData.set(e.id,a);let s=n;this.isLive&&Cn(e.segmentReference)&&(s=this.getActualLiveStartingSegments(e.segmentReference)),(!this.isLive||!this.segments.has(e.id))&&this.segments.set(e.id,s),i&&this.parsedInitData.set(e.id,i)})).then((()=>this.failedDownloads=0),(t=>{this.initData.set(e.id,null),i&&this.error$.next({id:"LoadInits",category:l.ErrorCategory.WTF,message:"loadInit threw",thrown:t})}));return this.initData.set(e.id,n),n}async dropBuffer(){for(let e of this.segments.values())for(let t of e)t.status="none";await this.pruneBuffer(0,1/0,!0)}async pruneBuffer(e,t,i=!1){if(!this.sourceBuffer||!this.playingRepresentationId||(0,l.isNullable)(e)||this.sourceBuffer.updating)return!1;let r=[],n=0,a=e=>{if(n>=t)return r;r.push({...e.time}),r=(e=>{e.sort(((e,t)=>e.from-t.from));let t=[e[0]];for(let i=1;i<e.length;i++){let{from:r,to:n}=e[i],a=t[t.length-1];a.to>=r?a.to=Math.max(a.to,n):t.push(e[i])}return t})(r);let i=An(e)?e.size??0:e.byte.to-e.byte.from;n+=i};for(let t of this.segments.values())for(let i of t){let t=i.time.to<=e-this.tuning.dash.bufferPruningSafeZone,r=i.time.from>=e+Math.min(this.forwardBufferTarget,this.bufferLimit);(t||r)&&"fed"===i.status&&a(i)}for(let e=0;e<this.sourceBuffer.buffered.length;e++){let t=1e3*this.sourceBuffer.buffered.start(e),i=1e3*this.sourceBuffer.buffered.end(e),r=0;for(let e of this.segments.values())for(let n of e)["none","partially_ejected"].includes(n.status)&&Math.round(n.time.from)<=Math.round(t)&&Math.round(n.time.to)>=Math.round(i)&&r++;if(r===this.segments.size){a({time:{from:t,to:i},url:"",status:"none"})}}if(r.length&&i){let t=Math.min(this.forwardBufferTarget,this.bufferLimit)*this.tuning.dash.minSafeBufferThreshold;for(let i of this.segments.values())for(let r of i)r.time.from>=e+t&&"fed"===r.status&&a(r)}return!!r.length&&(await Promise.all(r.map((e=>this.sourceBufferTaskQueue.remove(e.from,e.to))))).reduce(((e,t)=>e||t),!1)}abortBuffer(){if(!this.sourceBuffer||"open"!==this.mediaSource.readyState)return;let e=this.playingRepresentationId&&this.initData.get(this.playingRepresentationId),t=e instanceof ArrayBuffer?e:void 0;this.sourceBufferTaskQueue.abort(t)}getDebugBufferState(){if(this.sourceBuffer&&this.sourceBuffer.buffered.length)return{from:this.sourceBuffer.buffered.start(0),to:this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length-1)}}getForwardBufferDuration(){let e=this.getCurrentPosition();return this.sourceBuffer&&this.sourceBuffer.buffered.length&&!(0,l.isNullable)(e)?fr(this.sourceBuffer.buffered,e):0}detectGaps(e,t){if(this.sourceBuffer)for(let i of t){let t={representation:e,from:i.time.from,to:i.time.to};for(let e=0;e<this.sourceBuffer.buffered.length;e++){let r=1e3*this.sourceBuffer.buffered.start(e),n=1e3*this.sourceBuffer.buffered.end(e);if(!(n<=i.time.from||r>=i.time.to)){if(r<=i.time.from&&n>=i.time.to){t=void 0;break}n>i.time.from&&n<i.time.to&&(t.from=n),r<i.time.to&&r>i.time.from&&(t.to=r)}}t&&t.to-t.from>1&&!this.gaps.some((e=>t&&e.from===t.from&&e.to===t.to))&&this.gaps.push(t)}}detectGapsWhenIdle(e,t){if(!this.gapDetectionIdleCallback){(0,l.assertNonNullable)(this.sourceBuffer);for(let e=0;e<this.sourceBuffer.buffered.length;e++)this.gaps=this.gaps.filter((t=>this.sourceBuffer&&(Math.round(t.from)<Math.round(1e3*this.sourceBuffer.buffered.start(e))||Math.round(t.to)>Math.round(1e3*this.sourceBuffer.buffered.end(e)))));this.gapDetectionIdleCallback=zr((()=>{try{this.detectGaps(e,t)}catch(e){this.error$.next({id:"GapDetection",category:l.ErrorCategory.WTF,message:"detectGaps threw",thrown:e})}finally{this.gapDetectionIdleCallback=null}}))}}checkEjectedSegments(){if((0,l.isNullable)(this.sourceBuffer)||(0,l.isNullable)(this.playingRepresentationId))return;let e=[];for(let t=0;t<this.sourceBuffer.buffered.length;t++){let i=Math.floor(1e3*this.sourceBuffer.buffered.start(t)),r=Math.ceil(1e3*this.sourceBuffer.buffered.end(t));e.push({from:i,to:r})}let t=100;for(let i of this.segments.values())for(let r of i){let{status:i}=r;if("fed"!==i&&"partially_ejected"!==i)continue;let n=Math.floor(r.time.from),a=Math.ceil(r.time.to),s=e.some((e=>e.from-t<=n&&e.to+t>=a)),o=e.filter((e=>n>=e.from&&n<e.to-t||a>e.from+t&&a<=e.to));s||(1===o.length||this.gaps.some((e=>e.from===r.time.from||e.to===r.time.to))?r.status="partially_ejected":r.status="none")}}constructor(e,t,i,{fetcher:r,tuning:n,getCurrentPosition:a,isActiveLowLatency:s,compatibilityMode:o=!1,manifest:u}){this.currentSegmentLength$=new l.ValueSubject(0),this.onLastSegment$=new l.ValueSubject(!1),this.fullyBuffered$=new l.ValueSubject(!1),this.playingRepresentation$=new l.ValueSubject(void 0),this.playingRepresentationInit$=new l.ValueSubject(void 0),this.error$=new l.Subject,this.gaps=[],this.subscription=new l.Subscription,this.allInitsLoaded=!1,this.activeSegments=new Set,this.downloadAbortController=new Tr,this.switchAbortController=new Tr,this.destroyAbortController=new Tr,this.bufferLimit=1/0,this.failedDownloads=0,this.baseUrls=[],this.baseUrlsIndex=0,this.isLive=!1,this.liveUpdateSegmentIndex=0,this.liveInitialAdditionalOffset=0,this.isSeekingLive=!1,this.index=0,this.lastDataObtainedTimestampMs=0,this.loadByteRangeSegmentsTimeoutId=0,this.startWith=(0,l.abortable)(this.destroyAbortController.signal,async function*(e){let t=this.representations.get(e);(0,l.assertNonNullable)(t,`Cannot find representation ${e}`),this.playingRepresentationId=e,this.downloadingRepresentationId=e,this.resetAccumulateBufferAfterStall(),this.startAccumulateBuffer(),this.sourceBuffer=this.mediaSource.addSourceBuffer(`${t.mime}; codecs="${t.codecs}"`),this.sourceBufferTaskQueue=new Gr(this.sourceBuffer),this.subscription.add((0,l.fromEvent)(this.sourceBuffer,"updateend").subscribe((()=>{this.checkEjectedSegments(),this.maintain()}),(e=>{let t,i=this.mediaSource.readyState;"open"!==i&&(t={id:`SegmentEjection_source_${i}`,category:l.ErrorCategory.VIDEO_PIPELINE,message:"Error when trying to clear segments ejected by browser",thrown:e}),t??(t={id:"SegmentEjection",category:l.ErrorCategory.VIDEO_PIPELINE,message:"Error when trying to clear segments ejected by browser",thrown:e}),this.error$.next(t)}))),this.subscription.add((0,l.fromEvent)(this.sourceBuffer,"error").subscribe((()=>this.error$.next({id:"SourceBuffer",category:l.ErrorCategory.VIDEO_PIPELINE,message:"SourceBuffer Error event fired"})))),this.subscription.add(this.sourceBufferTaskQueue.bufferFull$.subscribe((e=>{let t=this.getCurrentPosition();if(!this.sourceBuffer||!t)return;let i=Math.min(this.bufferLimit,.8*Qr(this.sourceBuffer.buffered));this.bufferLimit=i;let r=fr(this.sourceBuffer.buffered,t),n=Math.min(this.forwardBufferTarget,this.bufferLimit)*this.tuning.dash.minSafeBufferThreshold;this.pruneBuffer(t,2*e,r<n)}))),this.subscription.add(this.sourceBufferTaskQueue.error$.subscribe((e=>this.error$.next(e)))),yield this.loadInit(t,"high",!0);let i=this.initData.get(t.id),r=this.segments.get(t.id),n=this.parsedInitData.get(t.id);(0,l.assertNonNullable)(i,"No init buffer for starting representation"),(0,l.assertNonNullable)(r,"No segments for starting representation"),i instanceof ArrayBuffer&&(this.searchGaps(r,t),yield this.sourceBufferTaskQueue.append(i,this.destroyAbortController.signal),this.playingRepresentation$.next(this.playingRepresentationId),this.playingRepresentationInit$.next(n))}.bind(this)),this.switchToOld=(0,l.abortable)(this.destroyAbortController.signal,async function*(e,t=!1){if(e===this.downloadingRepresentationId||e===this.switchingToRepresentationId)return;this.switchingToRepresentationId=e;let i=this.representations.get(e);(0,l.assertNonNullable)(i,`No such representation ${e}`);let r=this.segments.get(e),n=this.initData.get(e);if((0,l.isNullable)(n)||(0,l.isNullable)(r)?yield this.loadInit(i,"high",!1):n instanceof Promise&&(yield n),r=this.segments.get(e),(0,l.assertNonNullable)(r,"No segments for starting representation"),n=this.initData.get(e),n&&n instanceof ArrayBuffer&&this.sourceBuffer)if(this.abort(),yield this.sourceBufferTaskQueue.append(n,this.downloadAbortController.signal),t)this.switchingToRepresentationId=void 0,this.downloadingRepresentationId=e,yield this.dropBuffer(),this.maintain();else{let t=this.getCurrentPosition();(0,l.isNonNullable)(t)&&(this.isLive||(this.bufferLimit=1/0,await this.pruneBuffer(t,1/0,!0)),this.maintain(t)),this.switchingToRepresentationId=void 0,this.downloadingRepresentationId=e}}.bind(this)),this.seekLive=(0,l.abortable)(this.destroyAbortController.signal,async function*(e){let t=e?.flatMap((e=>e.representations))??[];if(this.isSeekingLive=!0,!this.downloadingRepresentationId||!t)return;for(let e of this.representations.keys()){let i=t.find((t=>t.id===e));i&&this.representations.set(e,i);let r=this.representations.get(e);if(!r||!Cn(r.segmentReference))return;let n=this.getActualLiveStartingSegments(r.segmentReference);this.segments.set(r.id,n)}let i=this.switchingToRepresentationId??this.downloadingRepresentationId,r=this.representations.get(i);(0,l.assertNonNullable)(r);let n=this.segments.get(i);(0,l.assertNonNullable)(n,"No segments for starting representation");let a=this.initData.get(i);if((0,l.assertNonNullable)(a,"No init buffer for starting representation"),!(a instanceof ArrayBuffer))return;let s=this.getDebugBufferState();this.liveUpdateSegmentIndex=0,this.abort(),s&&(yield this.sourceBufferTaskQueue.remove(1e3*s.from,1e3*s.to,this.destroyAbortController.signal)),this.searchGaps(n,r),yield this.sourceBufferTaskQueue.append(a,this.destroyAbortController.signal),this.isSeekingLive=!1}.bind(this)),this.fetcher=r,this.tuning=n,this.compatibilityMode=o,this.forwardBufferTarget=n.dash.forwardBufferTargetAuto,this.getCurrentPosition=a,this.isActiveLowLatency=s,this.isLive=!!u?.dynamic,this.baseUrls=u?.baseUrls??[],this.initData=new Map(i.map((e=>[e.id,null]))),this.segments=new Map,this.parsedInitData=new Map,this.representations=new Map(i.map((e=>[e.id,e]))),this.kind=e,this.mediaSource=t,this.sourceBuffer=null}},Rn=e=>{let t=new URL(e);return t.searchParams.set("quic","1"),t.toString()},Pn=class{onHeadersReceived(e){let{type:t,reused:i}=(e=>{let t=e.get("X-Delivery-Type"),i=e.get("X-Reused");return{type:null===t?"http1":t??void 0,reused:null===i?void 0:{1:!0,0:!1}[i]??void 0}})(e);this.lastConnectionType$.next(t),this.lastConnectionReused$.next(i)}async fetchRepresentation(e,t,i="auto"){let{type:r}=e;switch(r){case"byteRange":return await this.fetchByteRangeRepresentation(e,t,i)??null;case"template":return await this.fetchTemplateRepresentation(e,i)??null;default:(0,l.assertNever)(r)}}destroy(){this.abortAllController.abort(),this.subscription.unsubscribe(),this.tracer.end()}constructor({throughputEstimator:e,requestQuic:t,tracer:i,compatibilityMode:r=!1,useEnableSubtitlesParam:n=!1}){this.lastConnectionType$=new l.ValueSubject(void 0),this.lastConnectionReused$=new l.ValueSubject(void 0),this.lastRequestFirstBytes$=new l.ValueSubject(void 0),this.abortAllController=new Tr,this.subscription=new l.Subscription,this.fetchManifest=(0,l.abortable)(this.abortAllController.signal,async function*(e){let t=this.tracer.createComponentTracer("FetchManifest"),i=e;this.requestQuic&&(i=Rn(i)),!this.compatibilityMode&&this.useEnableSubtitlesParam&&(i=(e=>{let t=new URL(e);return t.searchParams.set("enable-subtitles","yes"),t.toString()})(i));let r=yield _r(i,{signal:this.abortAllController.signal}).catch(On);return r?(t.log("success",(0,l.flattenObject)({url:i,message:"Request successfully executed"})),t.end(),this.onHeadersReceived(r.headers),r.text()):(t.error("error",(0,l.flattenObject)({url:i,message:"No data in request manifest"})),t.end(),null)}.bind(this)),this.fetch=(0,l.abortable)(this.abortAllController.signal,async function*(e,{rangeMethod:t=(this.compatibilityMode?0:1),range:i,onProgress:r,priority:n="auto",signal:a,measureThroughput:s=!0,isLowLatency:o=!1}={}){let u=e,c=new Headers,d=this.tracer.createComponentTracer("Fetch");if(i)switch(t){case 0:c.append("Range",`bytes=${i.from}-${i.to}`);break;case 1:{let e=new URL(u,location.href);e.searchParams.append("bytes",`${i.from}-${i.to}`),u=e.toString();break}default:(0,l.assertNever)(t)}this.requestQuic&&(u=Rn(u));let p,h=this.abortAllController.signal;if(a){let e=new Tr;if(p=(0,l.merge)((0,l.fromEvent)(this.abortAllController.signal,"abort"),(0,l.fromEvent)(a,"abort")).subscribe((()=>{try{e.abort()}catch(e){On(e)}})),this.abortAllController.signal.aborted||a.aborted)try{e.abort()}catch(e){On(e)}h=e.signal}let f=(0,l.now)();d.log("startRequest",(0,l.flattenObject)({url:u,priority:n,rangeMethod:t,range:i,isLowLatency:o,requestStartedAt:f}));let m=yield _r(u,{priority:n,headers:c,signal:h}).catch(On),g=(0,l.now)();if(!m)return d.error("error",{message:"No response in request"}),d.end(),p?.unsubscribe(),null;if(this.throughputEstimator?.addRawRtt(g-f),!m.ok||!m.body){p?.unsubscribe();let e=`Fetch error ${m.status}: ${m.statusText}`;return d.error("error",{message:e}),d.end(),Promise.reject(new Error(`Fetch error ${m.status}: ${m.statusText}`))}if(this.onHeadersReceived(m.headers),!r&&!s){p?.unsubscribe();let e=(0,l.now)(),t={requestStartedAt:f,requestEndedAt:e,duration:e-f};return d.log("endRequest",(0,l.flattenObject)(t)),d.end(),m.arrayBuffer()}let[v,b]=m.body.tee(),y=v.getReader();s&&this.throughputEstimator?.trackStream(b,o);let S=0,$=new Uint8Array(0),_=!1,T=e=>{p?.unsubscribe(),_=!0,On(e)},w=(0,l.abortable)(h,async function*({done:e,value:t}){if(0===S&&this.lastRequestFirstBytes$.next((0,l.now)()-f),h.aborted)p?.unsubscribe();else if(!e&&t){let e=new Uint8Array($.length+t.length);e.set($),e.set(t,$.length),$=e,S+=t.byteLength,r?.(new DataView($.buffer),S),yield y?.read().then(w,T)}}.bind(this));yield y?.read().then(w,T),p?.unsubscribe();let E=(0,l.now)(),x={failed:_,requestStartedAt:f,requestEndedAt:E,duration:E-f};return _?(d.error("endRequest",(0,l.flattenObject)(x)),d.end(),null):(d.log("endRequest",(0,l.flattenObject)(x)),d.end(),$.buffer)}.bind(this)),this.fetchByteRangeRepresentation=(0,l.abortable)(this.abortAllController.signal,async function*(e,t,i){if("byteRange"!==e.type)return null;let r,n,{from:a,to:s}=e.initRange,o=a,l=s,u=!1;e.indexRange&&(r=e.indexRange.from,n=e.indexRange.to,u=s+1===r,u&&(o=Math.min(r,a),l=Math.max(n,s))),o=Math.min(o,0);let c=yield this.fetch(e.url,{range:{from:o,to:l},priority:i,measureThroughput:!1});if(!c)return null;let d=new DataView(c,a-o,s-o+1);if(!t.validateData(d))throw new Error("Invalid media file");let p,h=t.parseInit(d),f=e.indexRange??t.getIndexRange(h);if(!f)throw new ReferenceError("No way to load representation index");if(u)p=new DataView(c,f.from-o,f.to-f.from+1);else{let t=yield this.fetch(e.url,{range:f,priority:i,measureThroughput:!1});if(!t)return null;p=new DataView(t)}let m=t.parseSegments(p,h,f);return{init:h,dataView:new DataView(c),segments:m}}.bind(this)),this.fetchTemplateRepresentation=(0,l.abortable)(this.abortAllController.signal,async function*(e,t){if("template"!==e.type)return null;let i=new URL(e.initUrl,e.baseUrl).toString(),r=yield this.fetch(i,{priority:t,measureThroughput:!1});return r?{init:null,segments:e.segments.map((e=>({...e,status:"none",size:void 0}))),dataView:new DataView(r)}:null}.bind(this)),this.throughputEstimator=e,this.requestQuic=t,this.compatibilityMode=r,this.tracer=i.createComponentTracer("Fetcher"),this.useEnableSubtitlesParam=n}},On=e=>{if(!kn(e))throw e},Mn=(e,t,i)=>i*t+(1-i)*e,In=(e,t)=>e.reduce(((e,t)=>e+t),0)/t,Nn=class{next(e){let t=0,i=0;for(let e=0;e<this.pastMeasures.length;e++)void 0!==this.pastMeasures[e]&&(t+=(this.pastMeasures[e]-this.smoothed)**2,i++);this.takenMeasures=i,t/=i;let r=Math.sqrt(t),n=this.smoothed+this.params.deviationFactor*r,a=this.smoothed-this.params.deviationFactor*r;this.pastMeasures[this.measuresCursor]=e,this.measuresCursor=(this.measuresCursor+1)%this.pastMeasures.length,this.rawSeries$.next(e),this.updateSmoothedValue(e),this.smoothed$.next(this.smoothed),this.smoothedSeries$.next(this.smoothed),!(this.smoothed>n||this.smoothed<a)&&((0,l.isNullable)(this.prevReported)||Math.abs(this.smoothed-this.prevReported)/this.prevReported>=this.params.changeThreshold)&&(this.prevReported=this.smoothed,this.debounced$.next(this.smoothed),this.reportedSeries$.next(this.smoothed))}constructor(e){this.prevReported=void 0,this.pastMeasures=[],this.takenMeasures=0,this.measuresCursor=0,this.params=e,this.pastMeasures=Array(e.deviationDepth),this.smoothed=this.prevReported=e.initial,this.smoothed$=new l.ValueSubject(e.initial),this.debounced$=new l.ValueSubject(e.initial);let t=e.label??"value"+Math.random().toString(16).substring(2,6);this.rawSeries$=new Fi(`raw_${t}`),this.smoothedSeries$=new Fi(`smoothed_${t}`),this.reportedSeries$=new Fi(`reported_${t}`),this.rawSeries$.next(e.initial),this.smoothedSeries$.next(e.initial),this.reportedSeries$.next(e.initial)}},Vn=class extends Nn{updateSmoothedValue(e){this.slow=Mn(this.slow,e,this.params.emaAlphaSlow),this.fast=Mn(this.fast,e,this.params.emaAlphaFast);let t=this.params.fastDirection>0?Math.max:Math.min;this.smoothed=t(this.slow,this.fast)}constructor(e){super(e),this.slow=this.fast=e.initial}},Dn=class extends Nn{updateSmoothedValue(e){let t=In(this.pastMeasures,this.takenMeasures);this.emaSmoothed=Mn(this.emaSmoothed,e,this.params.emaAlpha);let i=((e,t,i,r)=>{let n=0,a=i,s=In(e,t),o=t<r?t:r;for(let t=0;t<o;t++)e[a]>s?n++:n--,a=(e.length+a-1)%e.length;return Math.abs(n)===o})(this.pastMeasures,this.takenMeasures,this.measuresCursor-1,this.params.basisTrendChangeCount);this.smoothed=i?this.emaSmoothed:t}constructor(e){super(e),this.emaSmoothed=e.initial}},Bn=class extends Nn{next(e){this.currentTopExtremumValue<=e?(this.currentTopExtremumValue=e,this.furtherValues=[]):this.furtherValues.length===this.extremumInterval?(super.next(this.currentTopExtremumValue),this.currentTopExtremumValue=e,this.furtherValues=[]):this.furtherValues.push(e)}updateSmoothedValue(e){this.smoothed=this.smoothed?Mn(this.smoothed,e,this.params.emaAlpha):e}constructor(e){super(e),this.furtherValues=[],this.currentTopExtremumValue=0,this.extremumInterval=e.extremumInterval}},Un=class{static getSmoothedValue(e,t,i){return"TwoEma"===i.type?new Vn({initial:e,emaAlphaSlow:i.emaAlphaSlow,emaAlphaFast:i.emaAlphaFast,changeThreshold:i.changeThreshold,fastDirection:t,deviationDepth:i.deviationDepth,deviationFactor:i.deviationFactor,label:"throughput"}):new Dn({initial:e,emaAlpha:i.emaAlpha,basisTrendChangeCount:i.basisTrendChangeCount,changeThreshold:i.changeThreshold,deviationDepth:i.deviationDepth,deviationFactor:i.deviationFactor,label:"throughput"})}static getLiveEstimatedDelaySmoothedValue(e,t){return new Bn({initial:e,label:"liveEdgeDelay",...t})}},Fn=(e,t)=>{e&&e.playbackRate!==t&&(e.playbackRate=t)},jn=class e{updateLive(e){this.processStreams(e?.streams.text)}seekLive(e){this.processStreams(e)}maintain(e=this.getCurrentPosition()){if(!(0,l.isNullable)(e))for(let t of this.representations)for(let i of t){let t=i.segmentReference,r=t.segments.length,n=t.segments[0].time.from,a=t.segments[r-1].time.to;if(e<n||e>a)continue;let s=t.segments.find((t=>t.time.from<=e&&t.time.to>=e));!s||this.currentSegment?.time.from===s.time.from&&this.currentSegment.time.to===s.time.to||(this.currentSegment=s,this.currentRepresentation$.next({...i,label:"Live Text",language:"ru",isAuto:!0,url:new URL(s.url,t.baseUrl).toString()}))}}destroy(){this.currentRepresentation$.next(null),this.currentSegment=null,this.representations=[]}processStreams(t){for(let i of t??[]){let t=e.filterRepresentations(i.representations);if(t){this.representations[this.representationsCursor]=t,this.representationsCursor=(this.representationsCursor+1)%this.maxRepresentations;break}}}static isSupported(t){return!!t?.some((t=>e.filterRepresentations(t.representations)))}static filterRepresentations(e){return e?.filter((e=>"text"===e.kind&&"segmentReference"in e&&Cn(e.segmentReference)))}constructor(e,t){this.currentRepresentation$=new l.ValueSubject(null),this.maxRepresentations=4,this.representationsCursor=0,this.representations=[],this.currentSegment=null,this.getCurrentPosition=t.getCurrentPosition,this.processStreams(e)}},Hn=["timeupdate","progress","play","seeked","stalled","waiting"],zn=["timeupdate","progress","loadeddata","playing","seeked"],qn=class{async seekLive(e){(0,l.assertNonNullable)(this.element);let t=this.normolizeLiveOffset(e);this.isActiveLowLatency$.next(this.isLowLatency$.getValue()&&0===t),this.liveLastSeekOffset=t,this.manifestUrlString=mi(this.manifestUrlString,t,2),this.manifest=await this.updateManifest(),this.manifest&&(this.isJumpGapAfterSeekLive=!0,await(this.videoBufferManager?.seekLive(this.manifest.streams.video)),await(this.audioBufferManager?.seekLive(this.manifest.streams.audio)),this.liveTextManager?.seekLive(this.manifest.streams.text))}initBuffer(){(0,l.assertNonNullable)(this.element),this.state$.setState("running"),this.subscription.add((0,l.merge)(...Hn.map((e=>(0,l.fromEvent)(this.element,e))),(0,l.fromEvent)(window,"online")).subscribe((()=>this.tick()),(e=>{this.error$.next({id:"DashVKPlayer",category:l.ErrorCategory.WTF,message:"Internal logic error",thrown:e})}))),this.subscription.add((0,l.fromEvent)(this.element,"progress").subscribe((()=>{this.element&&2===this.element.readyState&&!this.element.seeking&&(this.element.currentTime=this.element.currentTime)}))),this.subscription.add((0,l.fromEvent)(this.element,"waiting").subscribe((()=>{this.element&&2===this.element.readyState&&!this.element.seeking&&Ur(this.element.buffered,1e3*this.element.currentTime)&&(this.element.currentTime=this.element.currentTime);this.videoBufferManager?.startAccumulateBuffer(),this.audioBufferManager?.startAccumulateBuffer(),this.stallWatchdogSubscription?.unsubscribe(),this.stallWatchdogSubscription=(0,l.interval)(50).subscribe((()=>{if(!this.element)return;let e=this.currentStallDuration$.getValue();e+=50,this.currentStallDuration$.next(e);let t={timeInWaiting:e},i=(0,l.now)(),r=this.videoBufferManager?.lastDataObtainedTimestamp??0;this.videoLastDataObtainedTimestamp$.next(r);let n=this.audioBufferManager?.lastDataObtainedTimestamp??0,a=this.videoBufferManager?.getForwardBufferDuration()??0,s=this.audioBufferManager?.getForwardBufferDuration()??0,o=a<100&&i-r>this.tuning.dash.crashOnStallTWithoutDataTimeout,u=this.audioBufferManager&&s<100&&i-n>this.tuning.dash.crashOnStallTWithoutDataTimeout;if((o||u)&&e>this.tuning.dash.crashOnStallTWithoutDataTimeout||e>=this.tuning.dash.crashOnStallTimeout)throw new Error(`Stall timeout exceeded: ${e} ms`);if(this.isLive$.getValue()&&e%5e3==0)this.seekLive(this.liveLastSeekOffset),t.liveLastSeekOffset=this.liveLastSeekOffset;else{let e=1e3*this.element.currentTime;this.videoBufferManager?.maintain(e),this.audioBufferManager?.maintain(e),t.position=e}this.tracer.log("stallIntervalCallback",(0,l.flattenObject)(t))}),(e=>{this.error$.next({id:"StallWatchdogCallback",category:l.ErrorCategory.NETWORK,message:"Can't restore DASH after stall.",thrown:e})})),this.subscription.add(this.stallWatchdogSubscription)}))),this.tick()}async switchRepresentation(e,t,i=!1){return{video:this.videoBufferManager,audio:this.audioBufferManager,text:null}[e]?.switchTo(t,i)}seek(e,t){let i;(0,l.assertNonNullable)(this.element),(0,l.assertNonNullable)(this.videoBufferManager),i=t||1e3*this.element.duration<=this.tuning.dashSeekInSegmentDurationThreshold||Math.abs(1e3*this.element.currentTime-e)<=this.tuning.dashSeekInSegmentAlwaysSeekDelta?e:Math.max(this.videoBufferManager.findSegmentStartTime(e)??e,this.audioBufferManager?.findSegmentStartTime(e)??e),Ur(this.element.buffered,i)||(this.videoBufferManager.abort(),this.audioBufferManager?.abort()),this.videoBufferManager.startAccumulateBuffer(),this.videoBufferManager.maintain(i),this.audioBufferManager?.startAccumulateBuffer(),this.audioBufferManager?.maintain(i),this.element.currentTime=i/1e3,this.tracer.log("seek",(0,l.flattenObject)({requestedPosition:e,forcePrecise:t,position:i}))}stop(){this.tracer.log("stop"),this.element?.querySelectorAll("source").forEach((e=>e.remove())),this.element=null,this.source=null,this.manifest=null,this.currentVideoRepresentation$.next(void 0),this.videoBufferManager?.destroy(),this.videoBufferManager=null,this.audioBufferManager?.destroy(),this.audioBufferManager=null,this.bufferManagers=[],this.state$.setState("none")}setBufferTarget(e){for(let t of this.bufferManagers)t.setTarget(e)}getStreams(){return this.manifest?.streams}setPreloadOnly(e){for(let t of this.bufferManagers)t.setPreloadOnly(e)}destroy(){this.subscription.unsubscribe(),this.representationSubscription.unsubscribe(),this.destroyController.abort(),this.fetcher.destroy(),this.stop(),"open"===this.source?.readyState&&Array.from(this.source.sourceBuffers).every((e=>!e.updating))&&this.source.endOfStream(),this.source=null,this.tracer.end()}initTracerSubscription(){let e=(0,l.getTraceSubscriptionMethod)(this.tracer.error.bind(this.tracer));this.error$.subscribe(e("error"))}normolizeLiveOffset(e){return 1e3*Math.trunc(e/1e3)}async updateLive(){this.isUpdatingLive=!0,this.manifest=await this.updateManifest(),this.manifest&&(this.bufferManagers?.forEach((e=>e.updateLive(this.manifest))),this.liveTextManager?.updateLive(this.manifest)),this.isUpdatingLive=!1}jumpGap(){if(!this.element||!this.videoBufferManager)return;let e=this.videoBufferManager.getDebugBufferState();if(!e)return;let t={isJumpGapAfterSeekLive:this.isJumpGapAfterSeekLive,isActiveLowLatency:this.isActiveLowLatency$.getValue(),initialCurrentTime:this.element.currentTime};this.isJumpGapAfterSeekLive&&!this.isActiveLowLatency$.getValue()&&this.element.currentTime>e.to&&(this.isJumpGapAfterSeekLive=!1,this.element.currentTime=0);let i=1e3*this.element.currentTime,r=[],n=1===this.element.readyState?this.tuning.endGapTolerance:0;for(let e of this.bufferManagers)for(let t of e.gaps)e.playingRepresentation$.getValue()===t.representation&&t.from-n<=i&&t.to+n>i&&(1e3*this.element.duration-t.to<this.tuning.endGapTolerance?r.push(1/0):r.push(t.to));if(r.length){let e=Math.max(...r)+10;this.gapWatchdogSubscription.unsubscribe(),this.gapWatchdogActive=!1,e===1/0?this.forceEnded$.next():(this.element.currentTime=e/1e3,t={...t,gapEnds:r,jumpTo:e,resultCurrentTime:this.element.currentTime},this.tracer.log("jumpGap",(0,l.flattenObject)(t)))}}constructor(e){this.element=null,this.manifestUrlString="",this.source=null,this.manifest=null,this.subscription=new l.Subscription,this.representationSubscription=new l.Subscription,this.state$=new bi("none"),this.currentVideoRepresentation$=new l.ValueSubject(void 0),this.currentVideoRepresentationInit$=new l.ValueSubject(void 0),this.currentAudioRepresentation$=new l.ValueSubject(void 0),this.currentVideoSegmentLength$=new l.ValueSubject(0),this.currentAudioSegmentLength$=new l.ValueSubject(0),this.error$=new l.Subject,this.lastConnectionType$=new l.ValueSubject(void 0),this.lastConnectionReused$=new l.ValueSubject(void 0),this.lastRequestFirstBytes$=new l.ValueSubject(void 0),this.currentLiveTextRepresentation$=new l.ValueSubject(null),this.isLive$=new l.ValueSubject(!1),this.liveDuration$=new l.ValueSubject(0),this.liveAvailabilityStartTime$=new l.ValueSubject(void 0),this.bufferLength$=new l.ValueSubject(0),this.liveLoadBufferLength$=new l.ValueSubject(0),this.livePositionFromPlayer$=new l.ValueSubject(0),this.isLowLatency$=new l.ValueSubject(!1),this.isActiveLowLatency$=new l.ValueSubject(!1),this.currentStallDuration$=new l.ValueSubject(0),this.videoLastDataObtainedTimestamp$=new l.ValueSubject(0),this.isUpdatingLive=!1,this.isJumpGapAfterSeekLive=!1,this.liveLastSeekOffset=0,this.forceEnded$=new l.Subject,this.gapWatchdogActive=!1,this.destroyController=new Tr,this.initManifest=(0,l.abortable)(this.destroyController.signal,async function*(e,t,i){this.tracer.log("initManifest"),this.element=e,this.manifestUrlString=mi(t,i,2),this.state$.startTransitionTo("manifest_ready"),this.manifest=yield this.updateManifest(),this.manifest?.streams.video.length?this.state$.setState("manifest_ready"):this.error$.next({id:"NoRepresentations",category:l.ErrorCategory.PARSER,message:"No playable video representations"})}.bind(this)),this.updateManifest=(0,l.abortable)(this.destroyController.signal,async function*(){this.tracer.log("updateManifestStart",{manifestUrl:this.manifestUrlString});let e=yield this.fetcher.fetchManifest(this.manifestUrlString).catch((e=>{!this.manifest&&!this.bufferLength$.getValue()&&this.error$.next({id:"LoadManifest",category:l.ErrorCategory.NETWORK,message:"Failed to load manifest",thrown:e})}));if(!e)return null;let t=null;try{t=((e,t)=>{let i,r={video:[],audio:[],text:[]},n=(new DOMParser).parseFromString(e,"application/xml").children[0],a=n.getElementsByTagName("Period")[0],s=Array.from(n.querySelectorAll("MPD > BaseURL").values()).map((e=>e.textContent?.trim()??"")),o=(0,mn.default)(s,0)??"",u=a.children,c="dynamic"===n.getAttribute("type"),d=n.getAttribute("availabilityStartTime"),p=d?new Date(d).getTime():void 0,h=n.getAttribute("mediaPresentationDuration"),f=a.getAttribute("duration"),m=n.getElementsByTagName("vk:Attrs")[0]?.getElementsByTagName("vk:XPlaybackDuration")[0].textContent;if(h)i=yn(h);else if(f){let e=yn(f);(0,l.isNonNullable)(e)&&(i=e)}else m&&(i=parseInt(m,10));let g=0,v=n.getAttribute("profiles")?.split(",")??[];for(let e of u){let n=e.getAttribute("id")??"id"+(g++).toString(10),a=e.getAttribute("mimeType")??"",s=e.getAttribute("codecs")??"",u=e.getAttribute("contentType")??a?.split("/")[0],c=e.getAttribute("profiles")?.split(",")??[],d=bn(e.getAttribute("lang")??"")??{},p=e.querySelector("Label")?.textContent?.trim()??void 0,h=e.querySelectorAll("Representation"),f=e.querySelector("SegmentTemplate"),m=e.querySelector("Role")?.getAttribute("value")??void 0,T=u,w={id:n,language:d.language,isDefault:"main"===m,label:p,codecs:s,hdr:"video"===T&&gn(s),mime:a,representations:[]};for(let r of h){var b,y,S,$,_;let n,p=r.getAttribute("lang")??void 0,h=r.getAttribute("label")??void 0,m=r.querySelector("BaseURL")?.textContent?.trim()??"",E=new URL(m||o,t).toString(),x=r.getAttribute("mimeType")??a,A=r.getAttribute("codecs")??s??"";if("text"===u){let e=r.getAttribute("id")||"",t=d.privateuse?.includes("x-auto")||e.includes("_auto"),a=r.querySelector("SegmentTemplate");if(a){let s={representationId:r.getAttribute("id")??void 0,bandwidth:r.getAttribute("bandwidth")??void 0},o=parseInt(r.getAttribute("bandwidth")??"",10)/1e3,l=parseInt(a.getAttribute("startNumber")??"",10)??1,u=parseInt(a.getAttribute("timescale")??"",10),c=a.querySelectorAll("SegmentTimeline S")??[],d=a.getAttribute("media");if(!d)continue;let p=[],h=0,f="",m=0,g=l,v=0;for(let e of c){let t=parseInt(e.getAttribute("d")??"",10),i=parseInt(e.getAttribute("r")??"",10)||0,r=parseInt(e.getAttribute("t")??"",10);v=Number.isFinite(r)?r:v;let n=t/u*1e3,a=v/u*1e3;for(let e=0;e<i+1;e++){let i=Sn(d,{...s,segmentNumber:g.toString(10),segmentTime:(v+e*t).toString(10)}),r=(a??0)+e*n,o=r+n;g++,p.push({time:{from:r,to:o},url:i})}v+=(i+1)*t,h+=(i+1)*n}m=v/u*1e3,f=Sn(d,{...s,segmentNumber:g.toString(10),segmentTime:v.toString(10)}),n={id:e,kind:"text",segmentReference:{type:"template",baseUrl:E,segmentTemplateUrl:d,initUrl:"",totalSegmentsDurationMs:h,segments:p,nextSegmentBeyondManifest:{time:{from:m,to:1/0},url:f},timescale:u},profiles:[],duration:i,bitrate:o,mime:"",codecs:"",width:0,height:0,isAuto:t}}else n={id:e,isAuto:t,kind:"text",url:E}}else{let t,a=r.getAttribute("contentType")??x?.split("/")[0]??u,s=e.getAttribute("profiles")?.split(",")??[],o=parseInt(r.getAttribute("width")??"",10),d=parseInt(r.getAttribute("height")??"",10),p=parseInt(r.getAttribute("bandwidth")??"",10)/1e3,h=r.getAttribute("frameRate")??"",m=r.getAttribute("quality")??void 0,b=h?vn(h):void 0,y=`${r.getAttribute("id")??"id"+(g++).toString(10)}@${"video"===a?`${d}p`:"audio"===a?`${p}Kbps`:A}`,S=[...v,...c,...s],$=r.querySelector("SegmentBase"),_=r.querySelector("SegmentTemplate")??f;if($){let e=r.querySelector("SegmentBase Initialization")?.getAttribute("range")??"",[i,n]=e.split("-").map((e=>parseInt(e,10))),a={from:i,to:n},s=r.querySelector("SegmentBase")?.getAttribute("indexRange"),[o,l]=s?s.split("-").map((e=>parseInt(e,10))):[];t={type:"byteRange",url:E,initRange:a,indexRange:s?{from:o,to:l}:void 0}}else{if(!_)throw new ReferenceError("Unknown MPD segment referencing type");{let e={representationId:r.getAttribute("id")??void 0,bandwidth:r.getAttribute("bandwidth")??void 0},n=parseInt(_.getAttribute("timescale")??"",10),a=_.getAttribute("initialization")??"",s=_.getAttribute("media"),o=parseInt(_.getAttribute("startNumber")??"",10)??1,u=Sn(a,e);if(!s)throw new ReferenceError("No media attribute in SegmentTemplate");let c=_.querySelectorAll("SegmentTimeline S")??[],d=[],p=0,h="",f=0;if(c.length){let t=o,i=0;for(let r of c){let a=parseInt(r.getAttribute("d")??"",10),o=parseInt(r.getAttribute("r")??"",10)||0,l=parseInt(r.getAttribute("t")??"",10);i=Number.isFinite(l)?l:i;let u=a/n*1e3,c=i/n*1e3;for(let r=0;r<o+1;r++){let n=Sn(s,{...e,segmentNumber:t.toString(10),segmentTime:(i+r*a).toString(10)}),o=(c??0)+r*u,l=o+u;t++,d.push({time:{from:o,to:l},url:n})}i+=(o+1)*a,p+=(o+1)*u}f=i/n*1e3,h=Sn(s,{...e,segmentNumber:t.toString(10),segmentTime:i.toString(10)})}else if((0,l.isNonNullable)(i)){let t=parseInt(_.getAttribute("duration")??"",10)/n*1e3,r=Math.ceil(i/t),a=0;for(let i=1;i<r;i++){let r=Sn(s,{...e,segmentNumber:i.toString(10),segmentTime:a.toString(10)});d.push({time:{from:a,to:a+t},url:r}),a+=t}f=a,h=Sn(s,{...e,segmentNumber:r.toString(10),segmentTime:a.toString(10)})}t={type:"template",baseUrl:E,segmentTemplateUrl:s,initUrl:u,totalSegmentsDurationMs:p,segments:d,nextSegmentBeyondManifest:{time:{from:f,to:1/0},url:h},timescale:n}}}if(!a||!x)continue;let w={video:"video",audio:"audio",text:"text"}[a];if(!w)continue;T||(T=w),n={id:y,kind:w,segmentReference:t,profiles:S,duration:i,bitrate:p,mime:x,codecs:A,width:o,height:d,fps:b,quality:m}}(b=w).language||(b.language=p),(y=w).label||(y.label=h),(S=w).mime||(S.mime=x),($=w).codecs||($.codecs=A),(_=w).hdr||(_.hdr="video"===T&&gn(A)),w.representations.push(n)}T&&r[T].push(w)}return{dynamic:c,liveAvailabilityStartTime:p,duration:i,streams:r,baseUrls:s}})(e??"",this.manifestUrlString)}catch(t){let i=(e=>{if(!e)return{id:"EmptyResponse",category:l.ErrorCategory.PARSER,message:"Empty response"};if(e.length<=2&&e.match(/^\d+$/))return{id:`UVError#${e}`,category:l.ErrorCategory.NETWORK,message:`UV Error ${e}`};let t=e.trimStart().substring(0,100).toLowerCase();return t.startsWith("<!doctype")||t.startsWith("<html>")||t.startsWith("<body>")||t.startsWith("<head>")?{id:"UnexpectedHTML",category:l.ErrorCategory.NETWORK,message:"Received unexpected HTML, possibly a ISP block"}:t.startsWith("<?xml")?(new DOMParser).parseFromString(e,"text/xml").querySelector("parsererror")?{id:"InvalidXML",category:l.ErrorCategory.PARSER,message:"XML parsing error"}:{id:"XMLParserLogicError",category:l.ErrorCategory.PARSER,message:"Response is valid XML, but parser failed"}:void 0})(e)??{id:"ManifestParsing",category:l.ErrorCategory.PARSER,message:"Failed to parse MPD manifest",thrown:t};this.error$.next(i)}if(!t)return null;let i=(e,t,i)=>!!(this.element?.canPlayType?.(t)&&Er()?.isTypeSupported?.(`${t}; codecs="${i}"`)||"text"===e);t.dynamic&&this.isLive$.getValue()!==t.dynamic&&(this.isLive$.next(t.dynamic),this.liveDuration$.getValue()!==t.duration&&this.liveDuration$.next(-1*(t.duration??0)/1e3),this.liveAvailabilityStartTime$.getValue()!==t.liveAvailabilityStartTime&&this.liveAvailabilityStartTime$.next(t.liveAvailabilityStartTime));let r={text:t.streams.text,video:[],audio:[]};for(let e of["video","audio"]){let n=t.streams[e].filter((({mime:t,codecs:r})=>i(e,t,r))),a=new Set(n.map((({codecs:e})=>e))),s=Br(a);if(s&&(r[e]=n.filter((({codecs:e})=>e.startsWith(s)))),"video"===e){let e=this.tuning.preferHDR,t=r.video.some((e=>e.hdr)),i=r.video.some((e=>!e.hdr));l.clientChecker.isHDR&&e&&t?r.video=r.video.filter((e=>e.hdr)):i&&(r.video=r.video.filter((e=>!e.hdr)))}}let n={...t,streams:r};return this.tracer.log("updateManifestEnd",(0,l.flattenObject)(n)),n}.bind(this)),this.initRepresentations=(0,l.abortable)(this.destroyController.signal,async function*(e,t,i){this.tracer.log("initRepresentationsStart",(0,l.flattenObject)({initialVideo:e,initialAudio:t,sourceHls:i})),(0,l.assertNonNullable)(this.manifest),(0,l.assertNonNullable)(this.element),this.representationSubscription.unsubscribe(),this.state$.startTransitionTo("representations_ready");let r=e=>{this.representationSubscription.add((0,l.fromEvent)(e,"error").pipe((0,l.filter)((e=>!!this.element?.played.length))).subscribe((e=>{this.error$.next({id:"VideoSource",category:l.ErrorCategory.VIDEO_PIPELINE,message:"Unexpected video source error",thrown:e})})))};this.source=this.tuning.useManagedMediaSource&&window.ManagedMediaSource?new ManagedMediaSource:new MediaSource;let n=document.createElement("source");if(r(n),n.src=URL.createObjectURL(this.source),this.element.appendChild(n),this.tuning.useManagedMediaSource&&xr())if(i){let e=document.createElement("source");r(e),e.type="application/x-mpegurl",e.src=i.url,this.element.appendChild(e)}else this.element.disableRemotePlayback=!0;this.isActiveLowLatency$.next(this.isLive$.getValue()&&this.isLowLatency$.getValue());let a={fetcher:this.fetcher,tuning:this.tuning,getCurrentPosition:()=>this.element?1e3*this.element.currentTime:void 0,isActiveLowLatency:()=>this.isActiveLowLatency$.getValue(),manifest:this.manifest},s=this.manifest.streams.video.reduce(((e,t)=>[...e,...t.representations]),[]);if(this.videoBufferManager=new Ln("video",this.source,s,a),this.bufferManagers=[this.videoBufferManager],(0,l.isNonNullable)(t)){let e=this.manifest.streams.audio.reduce(((e,t)=>[...e,...t.representations]),[]);this.audioBufferManager=new Ln("audio",this.source,e,a),this.bufferManagers.push(this.audioBufferManager)}jn.isSupported(this.manifest.streams.text)&&!this.isLowLatency$.getValue()&&(this.liveTextManager=new jn(this.manifest.streams.text,a)),this.representationSubscription.add(this.fetcher.lastConnectionType$.subscribe(this.lastConnectionType$)),this.representationSubscription.add(this.fetcher.lastConnectionReused$.subscribe(this.lastConnectionReused$)),this.representationSubscription.add(this.fetcher.lastRequestFirstBytes$.subscribe(this.lastRequestFirstBytes$)),this.representationSubscription.add((0,l.interval)(1e3).subscribe((e=>{if(this.element?.paused){let e=gi(this.manifestUrlString,2);this.manifestUrlString=mi(this.manifestUrlString,e+1e3,2)}})));let o=()=>{this.stallWatchdogSubscription?.unsubscribe(),this.currentStallDuration$.next(0)};if(this.representationSubscription.add((0,l.merge)(...zn.map((e=>(0,l.fromEvent)(this.element,e)))).pipe((0,l.map)((e=>this.element?fr(this.element.buffered,1e3*this.element.currentTime):0)),(0,l.filterChanged)(),(0,l.tap)((e=>{e>this.tuning.dash.bufferEmptinessTolerance&&o()}))).subscribe(this.bufferLength$)),this.representationSubscription.add((0,l.merge)((0,l.fromEvent)(this.element,"ended"),this.forceEnded$).subscribe((()=>{o()}))),this.isLive$.getValue()){this.representationSubscription.add(this.isActiveLowLatency$.pipe((0,l.filterChanged)()).subscribe((e=>Fn(this.element,1)))),this.representationSubscription.add((0,l.combine)({bufferLength:this.bufferLength$,isActiveLowLatency:this.isActiveLowLatency$}).pipe((0,l.filter)((({bufferLength:e,isActiveLowLatency:t})=>t&&!!e))).subscribe((({bufferLength:e})=>this.liveEstimatedDelay.next(e)))),this.representationSubscription.add((0,l.combine)({liveEstimatedDelay:this.liveEstimatedDelay.smoothed$,isActiveLowLatency:this.isActiveLowLatency$}).subscribe((({liveEstimatedDelay:e,isActiveLowLatency:t})=>{if(!t)return;let i=this.tuning.dashCmafLive.lowLatency.maxTargetOffset,r=this.tuning.dashCmafLive.lowLatency.maxTargetOffsetDeviation,n=this.tuning.dashCmafLive.lowLatency.playbackCatchupSpeedup,a=e-i,s=1;Math.abs(a)>r&&(s=1+Math.sign(a)*n),Fn(this.element,s)}))),this.representationSubscription.add(this.bufferLength$.subscribe((e=>{let t=0;if(e){let e=1e3*(this.element?.currentTime??0);t=Math.min(...this.bufferManagers.map((t=>t.getLiveSegmentsToLoadState(this.manifest)?.to??e)))-e}this.liveLoadBufferLength$.getValue()!==t&&this.liveLoadBufferLength$.next(t)})));let e=0;this.representationSubscription.add((0,l.combine)({liveLoadBufferLength:this.liveLoadBufferLength$,bufferLength:this.bufferLength$}).pipe((0,l.throttle)(1e3)).subscribe((async({liveLoadBufferLength:t,bufferLength:i})=>{if((0,l.assertNonNullable)(this.element),this.isUpdatingLive)return;let r=this.element.playbackRate,n=gi(this.manifestUrlString,2),a=1e3*Math.abs(this.livePositionFromPlayer$.getValue()),s=Math.min(a,this.tuning.dashCmafLive.normalizedTargetMinBufferSize*r),o=this.tuning.dashCmafLive.normalizedActualBufferOffset*r,u=this.tuning.dashCmafLive.normalizedLiveMinBufferSize*r,c=isFinite(t)?t:i,d=this.isActiveLowLatency$.getValue(),p=a<=this.tuning.live.activeLiveDelay&&0===n;this.isActiveLowLatency$.next(d&&p);let h="none";if(d?h="active_low_latency":this.isLowLatency$.getValue()&&p?(this.isActiveLowLatency$.next(!0),this.bufferManagers.forEach((e=>e.proceedLowLatencyLive())),h="active_low_latency"):0!==n&&c<s?h="live_forward_buffering":c<s+u&&(h="live_with_target_offset"),isFinite(t)&&(e=t>e?t:e),"live_forward_buffering"===h||"live_with_target_offset"===h){let i,a=e-(s+o),l=this.normolizeLiveOffset(Math.trunc(n+a/r)),u=Math.abs(l-n);i=!t||u<=this.tuning.dashCmafLive.offsetCalculationError?n:l>0&&u>this.tuning.dashCmafLive.offsetCalculationError?l:0,this.manifestUrlString=mi(this.manifestUrlString,i,2)}"none"!==h&&"active_low_latency"!==h&&(e=0,this.updateLive())})))}let u=(0,l.merge)(...this.bufferManagers.map((e=>e.fullyBuffered$))).pipe((0,l.map)((()=>this.bufferManagers.every((e=>e.fullyBuffered$.getValue()))))),c=(0,l.merge)(...this.bufferManagers.map((e=>e.onLastSegment$))).pipe((0,l.map)((()=>this.bufferManagers.some((e=>e.onLastSegment$.getValue())))));this.representationSubscription.add((0,l.merge)(this.forceEnded$,(0,l.combine)({allBuffersFull:u,someBufferEnded:c}).pipe((0,l.filter)((({allBuffersFull:e,someBufferEnded:t})=>e&&t)))).subscribe((()=>{if(this.source&&"open"===this.source.readyState&&Array.from(this.source.sourceBuffers).every((e=>!e.updating)))try{this.source?.endOfStream()}catch(e){this.error$.next({id:"EndOfStream",category:l.ErrorCategory.VIDEO_PIPELINE,message:"Failed to end MediaSource stream",thrown:e})}}))),this.representationSubscription.add((0,l.merge)(...this.bufferManagers.map((e=>e.error$))).subscribe(this.error$)),this.representationSubscription.add(this.videoBufferManager.playingRepresentation$.subscribe(this.currentVideoRepresentation$)),this.representationSubscription.add(this.videoBufferManager.playingRepresentationInit$.subscribe(this.currentVideoRepresentationInit$)),this.representationSubscription.add(this.videoBufferManager.currentSegmentLength$.subscribe(this.currentVideoSegmentLength$)),this.audioBufferManager&&(this.representationSubscription.add(this.audioBufferManager.playingRepresentation$.subscribe(this.currentAudioRepresentation$)),this.representationSubscription.add(this.audioBufferManager.currentSegmentLength$.subscribe(this.currentAudioSegmentLength$))),this.liveTextManager&&this.representationSubscription.add(this.liveTextManager.currentRepresentation$.subscribe(this.currentLiveTextRepresentation$)),"open"!==this.source.readyState&&(yield new Promise((e=>this.source?.addEventListener("sourceopen",e))));let d=[this.manifest.duration??0,...[...this.manifest.streams.audio,...this.manifest.streams.video].flatMap((e=>e.representations)).flatMap((e=>{let t=[];return e.duration&&t.push(e.duration),Cn(e.segmentReference)&&e.segmentReference.totalSegmentsDurationMs&&t.push(e.segmentReference.totalSegmentsDurationMs),t}))];this.source.duration=Math.max(...d)/1e3,this.audioBufferManager&&(0,l.isNonNullable)(t)?yield Promise.all([this.videoBufferManager.startWith(e),this.audioBufferManager.startWith(t)]):yield this.videoBufferManager.startWith(e),this.state$.setState("representations_ready"),this.tracer.log("initRepresentationsEnd")}.bind(this)),this.tick=()=>{if(!this.element||!this.videoBufferManager)return;let e=1e3*this.element.currentTime;this.videoBufferManager.maintain(e),this.audioBufferManager?.maintain(e),this.liveTextManager?.maintain(e),(this.videoBufferManager.gaps.length||this.audioBufferManager?.gaps.length)&&!this.gapWatchdogActive&&(this.gapWatchdogActive=!0,this.gapWatchdogSubscription=(0,l.interval)(this.tuning.gapWatchdogInterval).subscribe((()=>this.jumpGap()),(e=>{this.error$.next({id:"GapWatchdog",category:l.ErrorCategory.WTF,message:"Error handling gaps",thrown:e})})),this.subscription.add(this.gapWatchdogSubscription))},this.throughputEstimator=e.throughputEstimator,this.tuning=e.tuning,this.tracer=e.tracer.createComponentTracer(this.constructor.name),this.fetcher=new Pn({throughputEstimator:this.throughputEstimator,requestQuic:this.tuning.requestQuick,compatibilityMode:e.compatibilityMode,tracer:this.tracer,useEnableSubtitlesParam:e.tuning.useEnableSubtitlesParam}),this.liveEstimatedDelay=Un.getLiveEstimatedDelaySmoothedValue(this.tuning.dashCmafLive.lowLatency.maxTargetOffset,{...e.tuning.dashCmafLive.lowLatency.delayEstimator}),this.initTracerSubscription()}},Wn=class{constructor(e,t){this.fov=e,this.orientation=t}},Gn=class{turnCamera(e=0,t=0,i=0){this.pointCameraTo(this.camera.orientation.x+e,this.camera.orientation.y+t,this.camera.orientation.z+i)}pointCameraTo(e=0,t=0,i=0){t=this.limitCameraRotationY(t);let r=e-this.camera.orientation.x,n=t-this.camera.orientation.y,a=i-this.camera.orientation.z;this.camera.orientation.x=e,this.camera.orientation.y=t,this.camera.orientation.z=i,this.lastCameraTurn={x:r,y:n,z:a},this.lastCameraTurnTS=Date.now()}setRotationSpeed(e,t,i){this.rotationSpeed.x=e??this.rotationSpeed.x,this.rotationSpeed.y=t??this.rotationSpeed.y,this.rotationSpeed.z=i??this.rotationSpeed.z}startRotation(){this.rotating=!0}stopRotation(e=!1){e?(this.setRotationSpeed(0,0,0),this.fadeStartSpeed=null):this.startFading(this.rotationSpeed.x,this.rotationSpeed.y,this.rotationSpeed.z),this.rotating=!1}onCameraRelease(){if(this.lastCameraTurn&&this.lastCameraTurnTS){let e=Date.now()-this.lastCameraTurnTS;if(e<this.options.speedFadeThreshold){let t=(1-e/this.options.speedFadeThreshold)*this.options.rotationSpeedCorrection;this.startFading(this.lastCameraTurn.x*t,this.lastCameraTurn.y*t,this.lastCameraTurn.z*t)}}}startFading(e,t,i){this.setRotationSpeed(e,t,i),this.fadeStartSpeed={...this.rotationSpeed},this.fading=!0}stopFading(){this.fadeStartSpeed=null,this.fading=!0,this.fadeTime=0}limitCameraRotationY(e){return Math.max(-this.options.maxYawAngle,Math.min(e,this.options.maxYawAngle))}tick(e){if(!this.lastTickTS)return this.lastTickTS=e,void(this.lastCameraTurnTS=Date.now());let t=e-this.lastTickTS,i=t/1e3;if(this.rotating)this.turnCamera(this.rotationSpeed.x*this.options.rotationSpeedCorrection*i,this.rotationSpeed.y*this.options.rotationSpeedCorrection*i,this.rotationSpeed.z*this.options.rotationSpeedCorrection*i);else if(this.fading&&this.fadeStartSpeed){let e=-this.fadeCorrection*(this.fadeTime/1e3)**2+1;this.setRotationSpeed(this.fadeStartSpeed.x*e,this.fadeStartSpeed.y*e,this.fadeStartSpeed.z*e),e>0?this.turnCamera(this.rotationSpeed.x*this.options.rotationSpeedCorrection*i,this.rotationSpeed.y*this.options.rotationSpeedCorrection*i,this.rotationSpeed.z*this.options.rotationSpeedCorrection*i):(this.stopRotation(!0),this.stopFading()),this.fadeTime=Math.min(this.fadeTime+t,this.options.speedFadeTime)}this.lastTickTS=e}constructor(e,t){this.rotating=!1,this.fading=!1,this.lastTickTS=0,this.lastCameraTurnTS=0,this.fadeStartSpeed=null,this.fadeTime=0,this.camera=e,this.options=t,this.rotationSpeed={x:0,y:0,z:0},this.fadeCorrection=1/(this.options.speedFadeTime/1e3)**2}},Qn=class{play(){this.active||(this.videoInitialized?this.doPlay():this.sourceVideoElement.readyState>=2?(this.videoInitialized=!0,this.doPlay()):this.sourceVideoElement.addEventListener("loadeddata",this.videoElementDataLoadedFn))}stop(){this.active=!1}startCameraManualRotation(e,t){this.cameraRotationManager.setRotationSpeed(e*this.params.rotationSpeed,t*this.params.rotationSpeed,0),this.cameraRotationManager.startRotation()}stopCameraManualRotation(e=!1){this.cameraRotationManager.stopRotation(e)}turnCamera(e,t){this.cameraRotationManager.turnCamera(e,t)}pointCameraTo(e,t){this.cameraRotationManager.pointCameraTo(e,t)}pixelToDegree(e){return{x:this.params.degreeToPixelCorrection*this.params.fov.x*-e.x/this.viewportWidth,y:this.params.degreeToPixelCorrection*this.params.fov.y*e.y/this.viewportHeight}}getCameraRotation(){return this.camera.orientation}holdCamera(){this.cameraRotationManager.stopRotation(!0)}releaseCamera(){this.cameraRotationManager.onCameraRelease()}destroy(){this.sourceVideoElement.removeEventListener("loadeddata",this.videoElementDataLoadedFn),this.stop(),this.canvas.remove()}setViewportSize(e,t){this.viewportWidth=e,this.viewportHeight=t,this.canvas.width=this.viewportWidth,this.canvas.height=this.viewportHeight,this.gl.viewport(0,0,this.canvas.width,this.canvas.height)}onDataLoadedHandler(){this.videoInitialized=!0,this.doPlay()}doPlay(){this.updateFrameSize(),this.vertexBuffer=this.createVertexBuffer(),this.active=!0,this.sourceVideoElement.removeEventListener("loadeddata",this.videoElementDataLoadedFn),requestAnimationFrame(this.renderFn)}render(e){this.cameraRotationManager.tick(e),this.updateTexture(),this.updateTextureMappingBuffer();let t=this.gl.getAttribLocation(this.program,"a_vertex"),i=this.gl.getAttribLocation(this.program,"a_texel"),r=this.gl.getUniformLocation(this.program,"u_texture"),n=this.gl.getUniformLocation(this.program,"u_focus");this.gl.enableVertexAttribArray(t),this.gl.enableVertexAttribArray(i),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.textureMappingBuffer),this.gl.vertexAttribPointer(i,2,this.gl.FLOAT,!1,0,0),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.videoTexture),this.gl.uniform1i(r,0),this.gl.uniform2f(n,-this.camera.orientation.x,-this.camera.orientation.y),this.gl.drawArrays(this.gl.TRIANGLE_FAN,0,4),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.disableVertexAttribArray(t),this.gl.disableVertexAttribArray(i),this.active&&requestAnimationFrame(this.renderFn)}createShader(e,t){let i=this.gl.createShader(t);if(!i)throw this.destroy(),new Error(`Could not create shader (${t})`);if(this.gl.shaderSource(i,e),this.gl.compileShader(i),!this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS))throw this.destroy(),new Error("An error occurred while compiling the shader: "+this.gl.getShaderInfoLog(i));return i}createProgram(){let e=this.gl.createProgram();if(!e)throw this.destroy(),new Error("Could not create shader program");let t=this.createShader("attribute vec2 a_vertex;\nattribute vec2 a_texel;\n\nvarying vec2 v_texel;\n\nvoid main(void) {\n    // direct vertex drawing\n    gl_Position = vec4(a_vertex, 0.0, 1.0);\n    // save texel vector to pass to fragment shader\n    v_texel = a_texel;\n}\n",this.gl.VERTEX_SHADER),i=this.createShader("#ifdef GL_ES\n    precision highp float;\n    precision highp int;\n#else\n    precision highp float;\n#endif\n\n#define PI 3.14159265358979323846264\n\nvarying vec2 v_texel; // [0..1, 0..1]\n\nuniform sampler2D u_texture;\nuniform vec2 u_focus; // current central point [-180..180, -90..90] (degrees)\n\nvoid main(void) {\n    // center point of output projection\n    float lambda0 = u_focus.x / 360.0;\n    float phi0 = u_focus.y / 180.0;\n\n    float lambda = PI * 2.0 * (v_texel.x - 0.5 - lambda0); // [-pi..+pi] (rad)\n    float phi = PI * (v_texel.y - 0.5 - phi0); // [-pi/2..+pi/2] (rad)\n\n    float p = sqrt(lambda * lambda + phi * phi); // rou\n    float c = atan(p);\n    float cos_c = cos(c);\n    float sin_c = sin(c);\n\n    // geo coordinates of projection\n    float x = lambda0 + atan(\n        lambda * sin_c,\n        p * cos(phi0) * cos_c - phi * sin(phi0) * sin_c\n    );\n    float y = asin(cos_c * sin(phi0) + (phi * sin_c * cos(phi0)) / p);\n\n    // reprojected texture coordinates\n    vec2 tc = vec2(\n        mod(x / (PI * 2.0) - 0.5, 1.0), // [0..1]\n        mod(y / PI - 0.5, 1.0) // [0..1]\n    );\n\n    // sample using new coordinates\n    gl_FragColor = texture2D(u_texture, tc);\n}\n",this.gl.FRAGMENT_SHADER);if(this.gl.attachShader(e,t),this.gl.attachShader(e,i),this.gl.linkProgram(e),!this.gl.getProgramParameter(e,this.gl.LINK_STATUS))throw this.destroy(),new Error("Could not link shader program.");return e}createTexture(){let e=this.gl.createTexture();if(!e)throw this.destroy(),new Error("Could not create texture");return this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.bindTexture(this.gl.TEXTURE_2D,null),e}updateTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,this.videoTexture),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!0),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.sourceVideoElement),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}createVertexBuffer(){let e=this.gl.createBuffer();if(!e)throw this.destroy(),new Error("Could not create vertex buffer");let t=1,i=1,r=this.frameHeight/(this.frameWidth/this.viewportWidth);return r>this.viewportHeight?t=this.viewportHeight/r:i=r/this.viewportHeight,this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([-t,-i,t,-i,t,i,-t,i]),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e}createTextureMappingBuffer(){let e=this.gl.createBuffer();if(!e)throw this.destroy(),new Error("Could not create texture mapping buffer");return e}calculateTexturePosition(){let e=.5-this.camera.orientation.x/360,t=.5-this.camera.orientation.y/180,i=this.camera.fov.x/360/2,r=this.camera.fov.y/180/2;return[e-i,t-r,e+i,t-r,e+i,t+r,e-i,t+r]}updateTextureMappingBuffer(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.textureMappingBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([...this.calculateTexturePosition()]),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)}updateFrameSize(){this.frameWidth=this.sourceVideoElement.videoWidth,this.frameHeight=this.sourceVideoElement.videoHeight}createCanvas(){let e=document.createElement("canvas");return e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.width="100%",e.style.height="100%",e}constructor(e,t,i){this.videoInitialized=!1,this.active=!1,this.container=e,this.sourceVideoElement=t,this.params=i,this.canvas=this.createCanvas();let r=this.canvas.getContext("webgl");if(!r)throw new Error("Could not initialize WebGL context");this.gl=r,this.container.appendChild(this.canvas),this.camera=new Wn(this.params.fov,this.params.orientation),this.cameraRotationManager=new Gn(this.camera,{rotationSpeed:this.params.rotationSpeed,maxYawAngle:this.params.maxYawAngle,rotationSpeedCorrection:this.params.rotationSpeedCorrection,degreeToPixelCorrection:this.params.degreeToPixelCorrection,speedFadeTime:this.params.speedFadeTime,speedFadeThreshold:this.params.speedFadeThreshold}),this.updateFrameSize(),this.vertexBuffer=this.createVertexBuffer(),this.textureMappingBuffer=this.createTextureMappingBuffer(),this.updateTextureMappingBuffer(),this.program=this.createProgram(),this.videoTexture=this.createTexture(),this.gl.useProgram(this.program),this.videoElementDataLoadedFn=this.onDataLoadedHandler.bind(this),this.renderFn=this.render.bind(this)}},Yn=class{connect(e){this.currentStallDuration$=e.currentStallDuration$,this.videoLastDataObtainedTimestamp$=e.videoLastDataObtainedTimestamp$,this.throughput$=e.throughput$,this.rtt$=e.rtt$,this.qualityLimitsOnStall=e.qualityLimitsOnStall,this.subscription.add(e.isSeeked$.subscribe(this.isSeeked$)),this.subscription.add(e.isBuffering$.subscribe(this.isBuffering$)),this.subscription.add((0,l.combine)({isBuffering:this.isBuffering$,isSeeked:this.isSeeked$}).pipe((0,l.filter)((({isBuffering:e,isSeeked:t})=>e&&!t))).subscribe((()=>{this.currentStallsCount++}))),this.subscription.add((0,l.combine)({currentStallDuration:this.currentStallDuration$,isSeeked:this.isSeeked$}).subscribe((({currentStallDuration:e,isSeeked:t})=>{if((0,l.isNullable)(this.lastUniqueVideoTrackSelected))return;let{stallDurationBeforeQualityDecrease:i,stallDurationNoDataBeforeQualityDecrease:r,stallCountBeforeQualityDecrease:n,resetQualityRestrictionTimeout:a}=this.qualityLimitsOnStall,s=this.rtt$.getValue(),o=this.throughput$.getValue(),u=this.videoLastDataObtainedTimestamp$.getValue(),c=(0,l.now)(),d=n&&this.currentStallsCount>=n,p=i&&!t&&c-this.lastUniqueVideoTrackSelectedTimestamp>=i+s&&e>=i,h=r&&c-this.lastUniqueVideoTrackSelectedTimestamp>=r+s&&c-u>=r+s&&e>=r;(d||p||h)&&(window.clearTimeout(this.qualityRestrictionTimer),this.maxQualityLimit=this.lastUniqueVideoTrackSelected.quality,(0,l.isNonNullable)(this.lastUniqueVideoTrackSelected.bitrate)&&o>this.lastUniqueVideoTrackSelected.bitrate&&(this.predictedThroughputWithoutData=this.lastUniqueVideoTrackSelected.bitrate)),e||(window.clearTimeout(this.qualityRestrictionTimer),this.qualityRestrictionTimer=window.setTimeout((()=>{this.maxQualityLimit=void 0,this.predictedThroughputWithoutData=0}),a))})))}get videoMaxQualityLimit(){return this.maxQualityLimit}get predictedThroughput(){return this.predictedThroughputWithoutData}set lastVideoTrackSelected(e){this.lastUniqueVideoTrackSelected?.id!==e.id&&(this.lastUniqueVideoTrackSelected=e,this.lastUniqueVideoTrackSelectedTimestamp=(0,l.now)(),this.currentStallsCount=0)}destroy(){window.clearTimeout(this.qualityRestrictionTimer),this.subscription.unsubscribe()}constructor(){this.isSeeked$=new l.ValueSubject(!1),this.isBuffering$=new l.ValueSubject(!1),this.currentStallsCount=0,this.maxQualityLimit=void 0,this.lastUniqueVideoTrackSelectedTimestamp=0,this.predictedThroughputWithoutData=0,this.subscription=new l.Subscription}},Kn=class{getProviderSubscriptionInfo(){let{output:e,desiredState:t}=this.params,i=Mi(this.video),r=this.constructor.name,n=t=>{e.error$.next({id:r,category:l.ErrorCategory.WTF,message:`${r} internal logic error`,thrown:t})};return{output:e,desiredState:t,observableVideo:i,genericErrorListener:n,connect:(e,t)=>this.subscription.add(e.subscribe(t,n))}}subscribe(){let{output:e,desiredState:t,observableVideo:i,genericErrorListener:r,connect:n}=this.getProviderSubscriptionInfo();this.subscription.add(this.params.output.availableVideoTracks$.pipe((0,l.filter)((e=>!!e.length)),(0,l.once)()).subscribe((e=>{this.droppedFramesManager.connect({logger:this.params.dependencies.logger,video:this.video,droppedFramesChecker:this.params.tuning.droppedFramesChecker,isAuto:this.params.desiredState.autoVideoTrackSwitching,playing$:i.playing$,pause$:i.pause$,tracks:e})})));let a=this.params.desiredState.seekState.stateChangeEnded$.pipe((0,l.map)((e=>"none"!==e.to.state)),(0,l.filterChanged)());this.stallsManager.connect({isSeeked$:a,currentStallDuration$:this.player.currentStallDuration$.pipe((0,l.filterChanged)()),videoLastDataObtainedTimestamp$:this.player.videoLastDataObtainedTimestamp$,throughput$:this.params.dependencies.throughputEstimator.throughput$,rtt$:this.params.dependencies.throughputEstimator.rtt$,qualityLimitsOnStall:this.params.tuning.dash.qualityLimitsOnStall,isBuffering$:i.isBuffering$}),n(i.ended$,e.endedEvent$),n(i.looped$,e.loopedEvent$),n(i.error$,e.error$),n(i.isBuffering$,e.isBuffering$),n(i.currentBuffer$,e.currentBuffer$),n(i.playing$,e.firstFrameEvent$),n(i.canplay$,e.canplay$),n(i.inPiP$,e.inPiP$),n(i.inFullscreen$,e.inFullscreen$),n(i.loadedMetadata$,e.loadedMetadataEvent$),n(this.player.error$,e.error$),n(this.player.lastConnectionType$,e.httpConnectionType$),n(this.player.lastConnectionReused$,e.httpConnectionReused$),n(this.player.isLive$,e.isLive$),n(this.player.lastRequestFirstBytes$.pipe((0,l.filter)(l.isNonNullable),(0,l.once)()),e.firstBytesEvent$),n(this.videoState.stateChangeEnded$.pipe((0,l.map)((e=>e.to))),this.params.output.playbackState$),this.subscription.add(i.seeked$.subscribe(e.seekedEvent$,r)),this.subscription.add(Ei(this.video,t.isLooped,r)),this.subscription.add(xi(this.video,t.volume,i.volumeState$,r)),this.subscription.add(i.volumeState$.subscribe(this.params.output.volume$,r)),this.subscription.add(Ai(this.video,t.playbackRate,i.playbackRateState$,r)),n((0,l.observeElementSize)(this.video),this.elementSize$),n(cr(this.video,{threshold:this.params.tuning.autoTrackSelection.activeVideoAreaThreshold}),e.elementVisible$),this.subscription.add(i.playing$.subscribe((()=>{this.videoState.setState("playing"),vi(t.playbackState,"playing"),this.scene3D&&this.scene3D.play()}),r)).add(i.pause$.subscribe((()=>{this.videoState.setState("paused"),vi(t.playbackState,"paused")}),r)).add(i.canplay$.subscribe((()=>{"playing"===this.videoState.getState()&&this.playIfAllowed()}),r)),this.subscription.add(this.player.state$.stateChangeEnded$.subscribe((({to:e})=>{if("manifest_ready"===e){this.videoTracksMap=new Map,this.audioTracksMap=new Map,this.textTracksMap=new Map;let e=this.player.getStreams();if((0,l.assertNonNullable)(e,"Manifest not loaded or empty"),!this.params.tuning.isAudioDisabled){let t=[];for(let i of e.audio){t.push(En(i));let e=[];for(let t of i.representations){let r=Tn(t);e.push(r),this.audioTracksMap.set(r,{stream:i,representation:t})}this.audioStreamsMap.set(i,e)}this.params.output.availableAudioStreams$.next(t)}let t=[];for(let i of e.video){t.push(xn(i));let e=[];for(let t of i.representations){let r=_n(t);r&&(e.push(r),this.videoTracksMap.set(r,{stream:i,representation:t}))}this.videoStreamsMap.set(i,e)}if(this.params.output.availableVideoStreams$.next(t),this.textTracksManager)for(let t of e.text)for(let e of t.representations){let i=wn(t,e);this.textTracksMap.set(i,{stream:t,representation:e})}this.params.output.availableVideoTracks$.next(Array.from(this.videoTracksMap.keys())),this.params.output.availableAudioTracks$.next(Array.from(this.audioTracksMap.keys())),this.params.output.isAudioAvailable$.next(!!this.audioTracksMap.size),this.audioTracksMap.size&&this.textTracksMap.size&&this.params.desiredState.internalTextTracks.startTransitionTo(Array.from(this.textTracksMap.keys()))}else"representations_ready"===e&&(this.videoState.setState("ready"),this.player.initBuffer())}),r));let s=t=>e.error$.next({id:"RepresentationSwitch",category:l.ErrorCategory.WTF,message:"Switching representations threw",thrown:t});this.subscription.add((0,l.merge)(this.player.currentStallDuration$,this.player.state$.stateChangeEnded$,t.videoTrack.stateChangeStarted$,t.autoVideoTrackSwitching.transitionStarted$,this.params.dependencies.throughputEstimator.rttAdjustedThroughput$,t.autoVideoTrackLimits.stateChangeStarted$,t.videoStream.stateChangeStarted$,t.audioStream.stateChangeStarted$,this.elementSize$,this.params.output.elementVisible$,this.droppedFramesManager.onDroopedVideoFramesLimit$,(0,l.fromEvent)(this.video,"progress")).subscribe((()=>{let e=this.player.state$.getState(),i=this.player.state$.getTransition();if(!["manifest_ready","running"].includes(e)||i)return;t.autoVideoTrackSwitching.getTransition()&&t.autoVideoTrackSwitching.setState(t.autoVideoTrackSwitching.getState());let r=this.selectVideoAudioRepresentations();if(!r)return;let[n,a]=r,o=[...this.videoTracksMap.keys()].find((e=>this.videoTracksMap.get(e)?.representation.id===n.id));(0,l.isNonNullable)(o)&&(this.stallsManager.lastVideoTrackSelected=o);let u=this.params.desiredState.autoVideoTrackLimits.getTransition();if(u&&this.params.output.autoVideoTrackLimits$.next(u.to),"manifest_ready"===e)this.player.initRepresentations(n.id,a?.id,this.params.sourceHls);else if(this.player.switchRepresentation("video",n.id).catch(s),a){let e=!!t.audioStream.getTransition();this.player.switchRepresentation("audio",a.id,e).catch(s)}}),r)),this.subscription.add(t.cameraOrientation.stateChangeEnded$.subscribe((({to:e})=>{this.scene3D&&e&&this.scene3D.pointCameraTo(e.x,e.y)}))),this.subscription.add(this.elementSize$.subscribe((e=>{this.scene3D&&e&&this.scene3D.setViewportSize(e.width,e.height)}))),this.subscription.add(this.player.currentVideoRepresentation$.pipe((0,l.filterChanged)()).subscribe((t=>{let i=[...this.videoTracksMap.entries()].find((([,{representation:e}])=>e.id===t));if(!i)return e.currentVideoTrack$.next(void 0),void e.currentVideoStream$.next(void 0);let[r,{stream:n}]=i,a=this.params.desiredState.videoStream.getTransition();a&&a.to&&a.to.id===n.id&&this.params.desiredState.videoStream.setState(a.to),e.currentVideoTrack$.next(r),e.currentVideoStream$.next(xn(n))}),r)),this.subscription.add(this.player.currentAudioRepresentation$.pipe((0,l.filterChanged)()).subscribe((t=>{let i=[...this.audioTracksMap.entries()].find((([,{representation:e}])=>e.id===t));if(!i)return void e.currentAudioStream$.next(void 0);let[r,{stream:n}]=i,a=this.params.desiredState.audioStream.getTransition();a&&a.to&&a.to.id===n.id&&this.params.desiredState.audioStream.setState(a.to),e.currentAudioStream$.next(En(n))}),r)),this.subscription.add(this.player.currentVideoRepresentationInit$.subscribe((t=>{if(t?.is3dVideo&&this.params.tuning.spherical?.enabled)try{this.init3DScene(t),e.is3DVideo$.next(!0)}catch(t){e.warning$.next({id:"DashProvider",message:`DashProvider could not initialize 3D-scene: ${t}`})}else this.destroy3DScene(),this.params.tuning.spherical?.enabled&&e.is3DVideo$.next(!1)}),r)),this.subscription.add(this.player.currentVideoSegmentLength$.subscribe(e.currentVideoSegmentLength$,r)),this.subscription.add(this.player.currentAudioSegmentLength$.subscribe(e.currentAudioSegmentLength$,r)),this.textTracksManager?.connect(this.video,t,e);let o=t.playbackState.stateChangeStarted$.pipe((0,l.map)((({to:e})=>"ready"===e)),(0,l.filterChanged)());this.subscription.add((0,l.merge)(o,t.autoVideoTrackSwitching.stateChangeStarted$,this.player.state$.stateChangeEnded$).subscribe((()=>{let e=t.autoVideoTrackSwitching.getState(),i="ready"===t.playbackState.getState()?this.params.tuning.dash.forwardBufferTargetPreload:e?this.params.tuning.dash.forwardBufferTargetAuto:this.params.tuning.dash.forwardBufferTargetManual;this.player.setBufferTarget(i)}))),this.subscription.add((0,l.merge)(o,this.player.state$.stateChangeEnded$).subscribe((()=>this.player.setPreloadOnly("ready"===t.playbackState.getState()))));let u=(0,l.merge)(t.playbackState.stateChangeStarted$,t.videoTrack.stateChangeStarted$,t.seekState.stateChangeEnded$,this.videoState.stateChangeEnded$,(0,l.observableFrom)(["init"])).pipe((0,l.debounce)(0));this.subscription.add(u.subscribe(this.syncPlayback,r))}selectVideoAudioRepresentations(){let{desiredState:e,output:t}=this.params,i=e.autoVideoTrackSwitching.getState(),r=e.videoTrack.getState()?.id,n=[...this.videoTracksMap.keys()].find((({id:e})=>e===r)),a=t.currentVideoTrack$.getValue(),s=e.videoStream.getState()??(n&&this.videoTracksMap.get(n)?.stream)??1===this.videoStreamsMap.size?this.videoStreamsMap.keys().next().value:void 0;if(!s)return;let o=[...this.videoStreamsMap.keys()].find((({id:e})=>e===s.id)),u=o&&this.videoStreamsMap.get(o);if(!u)return;let c=fr(this.video.buffered,1e3*this.video.currentTime),d=i?this.params.tuning.dash.forwardBufferTargetAuto:this.params.tuning.dash.forwardBufferTargetManual,p=Math.min(c/Math.min(d,(1e3*this.video.duration||1/0)-1e3*this.video.currentTime),1),h=e.audioStream.getState()??(1===this.audioStreamsMap.size?this.audioStreamsMap.keys().next().value:void 0),f=[...this.audioStreamsMap.keys()].find((({id:e})=>e===h?.id))??this.audioStreamsMap.keys().next().value,m=0;if(f){if(n&&!i){let e=Gi(n,u,this.audioStreamsMap.get(f)??[],this.params.tuning.autoTrackSelection.minVideoAudioRatio);m=Math.max(m,e?.bitrate??-1/0)}if(a){let e=Gi(a,u,this.audioStreamsMap.get(f)??[],this.params.tuning.autoTrackSelection.minVideoAudioRatio);m=Math.max(m,e?.bitrate??-1/0)}}let g=Ki(u,{container:this.elementSize$.getValue(),estimatedThroughput:this.params.dependencies.throughputEstimator.rttAdjustedThroughput$.getValue(),tuning:this.params.tuning.autoTrackSelection,limits:this.params.desiredState.autoVideoTrackLimits.getState(),reserve:m,forwardBufferHealth:p,current:a,visible:this.params.output.elementVisible$.getValue(),history:this.videoTrackSwitchHistory,playbackRate:this.video.playbackRate,droppedVideoMaxQualityLimit:this.droppedFramesManager.droppedVideoMaxQualityLimit,stallsVideoMaxQualityLimit:this.stallsManager.videoMaxQualityLimit,stallsPredictedThroughput:this.stallsManager.predictedThroughput,abrLogger:this.params.dependencies.abrLogger}),v=i?g??n:n??g,b=f&&((e,t,i,{estimatedThroughput:r,tuning:n,playbackRate:a,forwardBufferHealth:s,history:o,abrLogger:u,stallsPredictedThroughput:c})=>{(0,l.assertNotEmptyArray)(i,Wi);let d=n.considerPlaybackRate&&(0,l.isNonNullable)(a)?a:1,p=[...i].sort(zi(-1)),h=e.bitrate;(0,l.assertNonNullable)(h);let f,m=d*Hi(s??.5,n.bitrateAudioFactorAtEmptyBuffer,n.bitrateAudioFactorAtFullBuffer),g=Gi(e,t,i,n.minVideoAudioRatio),v=c||r;return(0,l.isNonNullable)(v)&&isFinite(v)&&(f=p.find((e=>!(!(0,l.isNonNullable)(e.bitrate)||!(0,l.isNonNullable)(g?.bitrate))&&v-h>=e.bitrate*m&&e.bitrate>=g.bitrate))),f||(f=g),f?.bitrate!==o?.last?.bitrate&&u({message:`\n    [AUDIO TRACKS ABR]\n    [available audio tracks]\n\t${i.map((e=>`{ id: ${e.id}, bitrate: ${e.bitrate} }`)).join("\n\t")}\n\n    [tuning]\n\t${Object.entries(n??{}).map((([e,t])=>`${e}: ${t}`)).join("\n\t")}\n\n    [limit params]\n    estimatedThroughput: ${r},\n    stallsPredictedThroughput: ${c},\n    reserve: ${h},\n    playbackRate: ${a},\n    playbackRateFactor: ${d},\n    forwardBufferHealth: ${s},\n    bitrateFactor: ${m},\n    minBufferToSwitchUp: ${n.minBufferToSwitchUp},\n\n    [selected audio track] ${f?.id}\n    `}),f&&Yi(n,u,f,o)})(v,u,this.audioStreamsMap.get(f)??[],{estimatedThroughput:this.params.dependencies.throughputEstimator.rttAdjustedThroughput$.getValue(),stallsPredictedThroughput:this.stallsManager.predictedThroughput,tuning:this.params.tuning.autoTrackSelection,forwardBufferHealth:p,history:this.audioTrackSwitchHistory,playbackRate:this.video.playbackRate,abrLogger:this.params.dependencies.abrLogger}),y=this.videoTracksMap.get(v)?.representation,S=b&&this.audioTracksMap.get(b)?.representation;return y&&S?[y,S]:y&&!S&&0===this.audioTracksMap.size?[y,void 0]:void 0}prepare(e=0){this.player.initManifest(this.video,this.params.source.url,e)}playIfAllowed(){Ji(this.video,(()=>{this.params.output.soundProhibitedEvent$.next()})).then((e=>{e||(this.liveOffset?.pause(),this.videoState.setState("paused"),vi(this.params.desiredState.playbackState,"paused",!0))}),(e=>this.params.output.error$.next({id:"ForcePlay",message:"play() failed even with workarounds",category:l.ErrorCategory.DOM,thrown:e})))}destroy(){this.subscription.unsubscribe(),this.droppedFramesManager.destroy(),this.stallsManager.destroy(),this.destroy3DScene(),this.textTracksManager?.destroy(),this.player.destroy(),this.params.output.element$.next(void 0),Ti(this.video),this.tracer.end()}constructor(e){this.subscription=new l.Subscription,this.videoState=new bi("stopped"),this.elementSize$=new l.ValueSubject(void 0),this.textTracksManager=new Li,this.droppedFramesManager=new lr,this.stallsManager=new Yn,this.videoTracksMap=new Map,this.audioTracksMap=new Map,this.textTracksMap=new Map,this.videoStreamsMap=new Map,this.audioStreamsMap=new Map,this.videoTrackSwitchHistory=new qi,this.audioTrackSwitchHistory=new qi,this.syncPlayback=()=>{let e=this.videoState.getState(),t=this.params.desiredState.playbackState.getState(),i=this.params.desiredState.playbackState.getTransition(),r=this.params.desiredState.seekState.getState();if(!this.videoState.getTransition()){if("requested"===r.state&&"paused"!==i?.to&&"stopped"!==e&&"stopped"!==t){let e=this.liveOffset?.getTotalPausedTime()??0;this.seek(r.position-e,r.forcePrecise)}if("stopped"===t)return void("stopped"!==e&&(this.videoState.startTransitionTo("stopped"),this.player.stop(),this.video.removeAttribute("src"),this.video.load(),this.params.output.position$.next(0),this.params.output.duration$.next(1/0),this.params.output.currentBuffer$.next(void 0),this.params.output.hostname$.next(void 0),this.videoState.setState("stopped"),vi(this.params.desiredState.playbackState,"stopped",!0)));switch(e){case"stopped":return this.videoState.startTransitionTo("ready"),void this.prepare();case"ready":return void("paused"===t?(this.videoState.setState("paused"),vi(this.params.desiredState.playbackState,"paused")):"playing"===t?(this.videoState.startTransitionTo("playing"),this.playIfAllowed()):"ready"===i?.to&&vi(this.params.desiredState.playbackState,"ready"));case"playing":return void("paused"===t?(this.videoState.startTransitionTo("paused"),this.liveOffset?.pause(),this.video.paused?this.videoState.setState("paused"):this.video.pause()):"playing"===i?.to&&vi(this.params.desiredState.playbackState,"playing"));case"paused":return void("playing"===t?(this.videoState.startTransitionTo("playing"),this.liveOffset?this.liveOffset.getTotalOffset()/1e3<Math.abs(this.params.output.duration$.getValue())?(this.liveOffset.resume(),this.playIfAllowed(),this.params.output.position$.next(-this.liveOffset.getTotalOffset()/1e3)):this.seek(0,!1):this.playIfAllowed()):"paused"===i?.to&&vi(this.params.desiredState.playbackState,"paused"));default:return(0,l.assertNever)(e)}}},this.init3DScene=e=>{if(this.scene3D)return;this.scene3D=new Qn(this.params.container,this.video,{fov:this.params.tuning.spherical.fov,orientation:this.params.tuning.spherical.orientation||{x:e.projectionData?.pose.yaw||0,y:e.projectionData?.pose.pitch||0,z:e.projectionData?.pose.roll||0},rotationSpeed:this.params.tuning.spherical.rotationSpeed,maxYawAngle:this.params.tuning.spherical.maxYawAngle,rotationSpeedCorrection:this.params.tuning.spherical.rotationSpeedCorrection,degreeToPixelCorrection:this.params.tuning.spherical.degreeToPixelCorrection,speedFadeTime:this.params.tuning.spherical.speedFadeTime,speedFadeThreshold:this.params.tuning.spherical.speedFadeThreshold});let t=this.elementSize$.getValue();t&&this.scene3D.setViewportSize(t.width,t.height)},this.destroy3DScene=()=>{this.scene3D&&(this.scene3D.destroy(),this.scene3D=void 0)},this.params=e,this.video=_i(e.container,e.tuning),this.tracer=e.dependencies.tracer.createComponentTracer(this.constructor.name),this.params.output.element$.next(this.video),this.params.output.availableVideoTracks$.next([]),this.params.output.availableAudioTracks$.next([]),this.params.output.isAudioAvailable$.next(!0),this.params.output.hostname$.next(Xi(this.params.source.url)),this.params.output.isLive$.next(!1),this.params.output.autoVideoTrackLimitingAvailable$.next(!0),this.params.output.availableTextTracks$.next([]),this.params.desiredState.internalTextTracks.setState([]),this.player=new qn({throughputEstimator:this.params.dependencies.throughputEstimator,tuning:this.params.tuning,compatibilityMode:this.params.source.compatibilityMode,tracer:this.tracer}),this.subscribe()}},Xn=class extends Kn{subscribe(){super.subscribe();let{output:e,observableVideo:t,connect:i}=this.getProviderSubscriptionInfo();i(t.timeUpdate$,e.position$),i(t.durationChange$,e.duration$)}seek(e,t){this.params.output.willSeekEvent$.next(),this.player.seek(e,t)}},Zn=class extends Kn{subscribe(){super.subscribe();let{output:e,observableVideo:t,desiredState:i,connect:r}=this.getProviderSubscriptionInfo();this.params.output.position$.next(0),this.params.output.isLive$.next(!0),r(t.timeUpdate$,e.liveBufferTime$),r(this.player.liveDuration$,e.duration$),this.subscription.add(i.isLowLatency.stateChangeEnded$.pipe((0,l.map)((e=>e.to))).subscribe(this.player.isLowLatency$)).add(this.params.output.position$.subscribe(this.player.livePositionFromPlayer$)).add((0,l.combine)({interval:(0,l.interval)(1e3),playbackRate:t.playbackRateState$}).subscribe((({playbackRate:t})=>{if("playing"===this.videoState.getState()){let i=e.position$.getValue()+(t-1);i<=0&&e.position$.next(i),this.liveOffset?.resetTo(1e3*-i)}}))).add((0,l.combine)({liveBufferTime:e.liveBufferTime$,liveAvailabilityStartTime:this.player.liveAvailabilityStartTime$}).pipe((0,l.map)((({liveBufferTime:e,liveAvailabilityStartTime:t})=>e&&t?e+t:void 0))).subscribe(e.liveTime$)).add(this.player.currentLiveTextRepresentation$.subscribe((e=>{if(e){let t=(({language:e,label:t,id:i,url:r,isAuto:n})=>({id:i,url:r,isAuto:n,type:"internal",language:e,label:t}))(e);this.params.output.availableTextTracks$.next([t])}})))}seek(e){this.params.output.willSeekEvent$.next();let t=this.params.desiredState.playbackState.getState(),i=this.videoState.getState(),r="paused"===t&&"paused"===i,n=-e,a=Math.trunc(n/1e3<=Math.abs(this.params.output.duration$.getValue())?n:0);this.player.seekLive(a).then((()=>{this.params.output.position$.next(e/1e3),this.liveOffset?.resetTo(a,r)}))}constructor(e){super(e),this.liveOffset=new Ri,this.textTracksManager=null}},Jn=g(Ht(),1),ea={},ta=(e,t)=>new l.Observable((i=>{let r=(e,t)=>i.next(t);return e.on(t,r),()=>e.off(t,r)})),ia=class{destroy(){this.subscription.unsubscribe(),this.trackLevels.clear(),this.textTracksManager.destroy(),this.hls?.detachMedia(),this.hls?.destroy(),this.params.output.element$.next(void 0),Ti(this.video)}loadHlsJs(){let e=!1,t=t=>{e||this.params.output.error$.next({id:"timeout"===t?"HlsJsTimeout":"HlsJsLoadError",category:l.ErrorCategory.NETWORK,message:"Failed to load Hls.js",thrown:t}),e=!0},r=window.setTimeout((()=>t("timeout")),this.params.tuning.dynamicImportTimeout);(0,Jn.default)(Promise.all([i.e(45458),i.e("langs/web/45458")]).then(i.bind(i,164945)).then((t=>{e||(ea.Hls=t.default,ea.Events=t.default.Events,this.init())}),t),(()=>{window.clearTimeout(r),e=!0}))}init(){(0,l.assertNonNullable)(ea.Hls,"hls.js not loaded"),this.hls=new ea.Hls({fragLoadingMaxRetry:5,levelLoadingMaxRetry:2,manifestLoadingMaxRetry:2,fragLoadingMaxRetryTimeout:16e3,manifestLoadingMaxRetryTimeout:2e3,levelLoadingMaxRetryTimeout:2e3}),this.subscribe(),this.videoState.setState("stopped")}subscribe(){(0,l.assertNonNullable)(ea.Events,"hls.js not loaded");let{desiredState:e,output:t}=this.params,i=e=>{t.error$.next({id:"HlsJsProvider",category:l.ErrorCategory.WTF,message:"HlsJsProvider internal logic error",thrown:e})},r=Mi(this.video),n=(e,t)=>this.subscription.add(e.subscribe(t,i));n(r.timeUpdate$,t.position$),n(r.durationChange$,t.duration$),n(r.ended$,t.endedEvent$),n(r.looped$,t.loopedEvent$),n(r.error$,t.error$),n(r.isBuffering$,t.isBuffering$),n(r.currentBuffer$,t.currentBuffer$),n(r.loadStart$,t.firstBytesEvent$),n(r.loadedMetadata$,t.loadedMetadataEvent$),n(r.playing$,t.firstFrameEvent$),n(r.canplay$,t.canplay$),n(r.seeked$,t.seekedEvent$),n(r.inPiP$,t.inPiP$),n(r.inFullscreen$,t.inFullscreen$),this.subscription.add(Ei(this.video,e.isLooped,i)),this.subscription.add(xi(this.video,e.volume,r.volumeState$,i)),this.subscription.add(r.volumeState$.subscribe(this.params.output.volume$)),this.subscription.add(Ai(this.video,e.playbackRate,r.playbackRateState$,i)),n(cr(this.video),t.elementVisible$),n(this.videoState.stateChangeEnded$.pipe((0,l.map)((e=>e.to))),this.params.output.playbackState$),this.subscription.add(ta(this.hls,ea.Events.ERROR).subscribe((e=>{e.fatal&&t.error$.next({id:["HlsJsFatal",e.type,e.details].join("_"),category:l.ErrorCategory.WTF,message:`HlsJs fatal ${e.type} ${e.details}, ${e.err?.message} ${e.reason}`,thrown:e.error})}))),this.subscription.add(r.playing$.subscribe((()=>{this.videoState.setState("playing"),vi(e.playbackState,"playing")}),i)).add(r.pause$.subscribe((()=>{this.videoState.setState("paused"),vi(e.playbackState,"paused")}),i)).add(r.canplay$.subscribe((()=>{"ready"===this.videoState.getTransition()?.to&&this.videoState.setState("ready"),"playing"===this.videoState.getState()&&this.playIfAllowed()}),i)),n(ta(this.hls,ea.Events.MANIFEST_PARSED).pipe((0,l.map)((({levels:e})=>e.reduce(((e,t)=>{let i=t.name||t.height.toString(10),{width:r,height:n}=t,a=Ii(t.attrs.QUALITY??"")??(0,l.videoSizeToQuality)({width:r,height:n});if(!a)return e;let s=t.attrs["FRAME-RATE"]?parseFloat(t.attrs["FRAME-RATE"]):void 0,o={id:i.toString(),quality:a,bitrate:t.bitrate/1e3,size:{width:r,height:n},fps:s};return this.trackLevels.set(i,{track:o,level:t}),e.push(o),e}),[])))),t.availableVideoTracks$),n(ta(this.hls,ea.Events.MANIFEST_PARSED),(t=>{if(t.subtitleTracks.length>0){let i=[];for(let e of t.subtitleTracks){let t=e.name,r=e.attrs.URI||"",n=e.lang;i.push({id:t,url:r,language:n,type:"internal"})}e.internalTextTracks.startTransitionTo(i)}})),n(ta(this.hls,ea.Events.LEVEL_LOADING).pipe((0,l.map)((({url:e})=>Xi(e)))),t.hostname$),n(ta(this.hls,ea.Events.FRAG_CHANGED),(e=>{let{video:i,audio:r}=e.frag.elementaryStreams;t.currentVideoSegmentLength$.next(1e3*((i?.endPTS??0)-(i?.startPTS??0))),t.currentAudioSegmentLength$.next(1e3*((r?.endPTS??0)-(r?.startPTS??0)))})),this.subscription.add(Ci(e.autoVideoTrackSwitching,(()=>this.hls.autoLevelEnabled),(e=>{this.hls.nextLevel=e?-1:this.hls.currentLevel,this.hls.loadLevel=e?-1:this.hls.loadLevel}),{onError:i}));let a=e=>Array.from(this.trackLevels.values()).find((({level:t})=>t===e))?.track,s=ta(this.hls,ea.Events.LEVEL_SWITCHED).pipe((0,l.map)((({level:e})=>a(this.hls.levels[e]))));s.pipe((0,l.filter)(l.isNonNullable)).subscribe(t.currentVideoTrack$,i),this.subscription.add(Ci(e.videoTrack,(()=>a(this.hls.levels[this.hls.currentLevel])),(e=>{if((0,l.isNullable)(e))return;let t=this.trackLevels.get(e.id)?.level;if(!t)return;let i=this.hls.levels.indexOf(t),r=this.hls.currentLevel,n=this.hls.levels[r];!n||t.bitrate>n.bitrate?this.hls.nextLevel=i:(this.hls.loadLevel=i,this.hls.loadLevel=i)}),{changed$:s,onError:i})),n(r.progress$,(()=>{this.params.dependencies.throughputEstimator.addRawThroughput(this.hls.bandwidthEstimate/1e3)})),this.textTracksManager.connect(this.video,e,t);let o=(0,l.merge)(e.playbackState.stateChangeStarted$,e.videoTrack.stateChangeStarted$,e.seekState.stateChangeEnded$,this.videoState.stateChangeEnded$,(0,l.observableFrom)(["init"])).pipe((0,l.debounce)(0));this.subscription.add(o.subscribe(this.syncPlayback,i))}prepare(){this.videoState.startTransitionTo("ready"),this.hls.attachMedia(this.video),this.hls.loadSource(this.params.source.url)}async playIfAllowed(){this.videoState.startTransitionTo("playing"),await Ji(this.video,(()=>{this.params.output.soundProhibitedEvent$.next()})).catch((e=>this.params.output.error$.next({id:"ForcePlay",message:"play() failed even with workarounds",category:l.ErrorCategory.DOM,thrown:e})))||(this.videoState.setState("paused"),vi(this.params.desiredState.playbackState,"paused",!0))}pause(){this.videoState.startTransitionTo("paused"),this.video.paused?this.videoState.setState("paused"):this.video.pause()}seek(e){this.params.output.willSeekEvent$.next(),this.video.currentTime=e/1e3}stop(){this.params.output.position$.next(0),this.params.output.duration$.next(1/0),this.params.output.currentBuffer$.next(void 0),this.params.output.hostname$.next(void 0),this.hls.stopLoad(),this.hls.detachMedia(),this.video.removeAttribute("src"),this.video.load(),this.videoState.setState("stopped"),vi(this.params.desiredState.playbackState,"stopped",!0)}constructor(e){this.subscription=new l.Subscription,this.videoState=new bi("initializing"),this.textTracksManager=new Li,this.trackLevels=new Map,this.syncPlayback=()=>{let e=this.videoState.getState(),t=this.params.desiredState.playbackState.getState(),i=this.params.desiredState.playbackState.getTransition(),r=this.params.desiredState.seekState.getState();if("initializing"!==e)switch("paused"!==i?.to&&"requested"===r.state&&this.seek(r.position),t){case"stopped":switch(e){case"stopped":break;case"ready":case"playing":case"paused":this.stop();break;default:(0,l.assertNever)(e)}break;case"ready":switch(e){case"stopped":this.prepare();break;case"ready":case"playing":case"paused":break;default:(0,l.assertNever)(e)}break;case"playing":switch(e){case"playing":break;case"stopped":this.prepare();break;case"ready":case"paused":this.playIfAllowed();break;default:(0,l.assertNever)(e)}break;case"paused":switch(e){case"paused":break;case"stopped":this.prepare();break;case"ready":this.videoState.setState("paused"),vi(this.params.desiredState.playbackState,"paused");break;case"playing":this.pause();break;default:(0,l.assertNever)(e)}break;default:(0,l.assertNever)(t)}},this.video=_i(e.container,e.tuning),this.params=e,this.params.output.element$.next(this.video),this.params.output.isLive$.next(!1),this.params.output.availableVideoTracks$.next([]),this.params.output.availableAudioTracks$.next([]),this.params.output.isAudioAvailable$.next(!0),this.params.output.hostname$.next(Xi(this.params.source.url)),this.loadHlsJs()}},ra="X-Playback-Duration",na=async e=>{let t=await _r(e),i=await t.text(),r=/#EXT-X-VK-PLAYBACK-DURATION:(\d+)/m.exec(i)?.[1];return r?parseInt(r,10):t.headers.has(ra)?parseInt(t.headers.get(ra),10):void 0},aa=g(nt(),1),sa=e=>{let t=null;if(e.QUALITY&&(t=Ii(e.QUALITY)),!t&&e.RESOLUTION){let[i,r]=e.RESOLUTION.split("x").map((e=>parseInt(e,10)));t=(0,l.videoSizeToQuality)({width:i,height:r})}return t??null},oa=0,la=async(e,t=e,i)=>{let r=await(await _r(e)).text();oa+=1;try{let{qualityManifests:e,textTracks:i}=((e,t)=>{let i=e.split("\n"),r=[],n=[];for(let e=0;e<i.length;e++){let a=i[e],s=a.match(/^#EXT-X-STREAM-INF:(.+)/),o=a.match(/^#EXT-X-MEDIA:TYPE=SUBTITLES,(.+)/);if(s||o){if(s){let n,a=(0,aa.default)(s[1].split(",").map((e=>e.split("=")))),o=a.QUALITY??`stream-${a.BANDWIDTH}`,l=sa(a);a.BANDWIDTH&&(n=parseInt(a.BANDWIDTH,10)/1e3||void 0),!n&&a["AVERAGE-BANDWIDTH"]&&(n=parseInt(a["AVERAGE-BANDWIDTH"],10)/1e3||void 0);let u,c=a["FRAME-RATE"]?parseFloat(a["FRAME-RATE"]):void 0;if(a.RESOLUTION){let[e,t]=a.RESOLUTION.split("x").map((e=>parseInt(e,10)));e&&t&&(u={width:e,height:t})}let d=new URL(i[++e],t).toString();l&&r.push({id:o,quality:l,url:d,bandwidth:n,size:u,fps:c})}if(o){let e=(0,aa.default)(o[1].split(",").map((e=>e.split("="))).map((([e,t])=>[e,t.replace(/^"|"$/g,"")]))),t=e.URI?.replace(/playlist$/,"subtitles.vtt"),i=e.LANGUAGE,r=e.NAME;t&&i&&n.push({type:"internal",id:i,label:r,language:i,url:t,isAuto:!1})}}}if(!r.length)throw new Error("Empty manifest");return{qualityManifests:r,textTracks:n}})(r,t);return{qualityManifests:e,textTracks:i}}catch{if(oa<=i.manifestRetryMaxCount)return await(e=>new Promise((t=>{setTimeout((()=>{t()}),e)})))((0,l.getExponentialDelay)(oa-1,{start:i.manifestRetryInterval,max:i.manifestRetryMaxInterval})),la(e,t,i)}return{qualityManifests:[],textTracks:[]}},ua=la,ca=class{selectManifest(){let{autoVideoTrackSwitching:e,videoTrack:t}=this.params.desiredState,i=e.getState(),r=t.getTransition(),n=r?.to?.id??t.getState()?.id??"master",a=this.manifests$.getValue();if(!a.length)return;let s=i?"master":n;return i&&!r&&t.startTransitionTo(this.masterManifest),a.find((e=>e.id===s))}subscribe(){let{output:e,desiredState:t}=this.params,i=t=>{e.error$.next({id:"HlsLiveProvider",category:l.ErrorCategory.WTF,message:"HlsLiveProvider internal logic error",thrown:t})},r=Mi(this.video),n=(e,t)=>this.subscription.add(e.subscribe(t,i));n(r.ended$,e.endedEvent$),n(r.error$,e.error$),n(r.isBuffering$,e.isBuffering$),n(r.currentBuffer$,e.currentBuffer$),n(r.loadedMetadata$,e.firstBytesEvent$),n(r.loadedMetadata$,e.loadedMetadataEvent$),n(r.playing$,e.firstFrameEvent$),n(r.canplay$,e.canplay$),n(r.inPiP$,e.inPiP$),n(r.inFullscreen$,e.inFullscreen$),this.subscription.add(t.isLooped.stateChangeStarted$.subscribe((()=>t.isLooped.setState(!1)),i)),this.subscription.add(xi(this.video,t.volume,r.volumeState$,i)),this.subscription.add(r.volumeState$.subscribe(this.params.output.volume$,i)),this.subscription.add(Ai(this.video,t.playbackRate,r.playbackRateState$,i)),n(cr(this.video),e.elementVisible$),this.textTracksManager.connect(this.video,t,e),this.subscription.add(r.playing$.subscribe((()=>{this.videoState.setState("playing"),vi(t.playbackState,"playing")}),i)).add(r.pause$.subscribe((()=>{this.videoState.setState("paused"),vi(t.playbackState,"paused")}),i)).add(r.canplay$.subscribe((()=>{"ready"===this.videoState.getTransition()?.to&&this.videoState.setState("ready"),"playing"===this.videoState.getState()&&this.playIfAllowed()}),i)),this.subscription.add(this.maxSeekBackTime$.pipe((0,l.filterChanged)(),(0,l.map)((e=>-e/1e3))).subscribe(this.params.output.duration$,i)),this.subscription.add(r.loadedMetadata$.subscribe((()=>{let e=this.params.desiredState.seekState.getState(),t=this.videoState.getTransition(),i=this.params.desiredState.videoTrack.getTransition(),r=this.params.desiredState.autoVideoTrackSwitching.getTransition();if(i&&(0,l.isNonNullable)(i.to)){let e=i.to.id;this.params.desiredState.videoTrack.setState(i.to);let t=this.manifests$.getValue().find((t=>t.id===e));t&&(this.params.output.currentVideoTrack$.next(t),this.params.output.hostname$.next(Xi(t.url)))}r&&this.params.desiredState.autoVideoTrackSwitching.setState(r.to),t&&"changing_manifest"===t.from&&this.videoState.setState(t.to),e&&"requested"===e.state&&this.seek(e.position)}),i)),this.subscription.add(r.loadedData$.subscribe((()=>{let e=this.video?.getStartDate?.()?.getTime();this.manifestStartTime$.next(e||void 0)}),i)),this.subscription.add((0,l.combine)({startTime:this.manifestStartTime$.pipe((0,l.filter)(l.isNonNullable)),currentTime:r.timeUpdate$}).subscribe((({startTime:e,currentTime:t})=>this.params.output.liveTime$.next(e+1e3*t)),i)),this.subscription.add(this.manifests$.pipe((0,l.map)((e=>e.map((({id:e,quality:t,size:i,bandwidth:r,fps:n})=>({id:e,quality:t,size:i,fps:n,bitrate:r})))))).subscribe(this.params.output.availableVideoTracks$,i));let a=(0,l.merge)(t.playbackState.stateChangeStarted$,t.seekState.stateChangeEnded$,t.videoTrack.stateChangeStarted$,t.autoVideoTrackSwitching.stateChangeStarted$,t.autoVideoTrackLimits.stateChangeStarted$,this.videoState.stateChangeEnded$,this.manifests$,(0,l.observableFrom)(["init"])).pipe((0,l.debounce)(0));this.subscription.add(a.subscribe(this.syncPlayback,i))}destroy(){this.subscription.unsubscribe(),this.textTracksManager.destroy(),this.params.output.element$.next(void 0),Ti(this.video)}prepare(){let e=this.selectManifest();if((0,l.isNullable)(e))return;let t=this.params.desiredState.autoVideoTrackLimits.getTransition(),i=this.params.desiredState.autoVideoTrackLimits.getState(),r=new URL(e.url);if((t||i)&&e.id===this.masterManifest.id){let{max:e,min:n}=t?.to??i??{};for(let[t,i]of[[e,"mq"],[n,"lq"]]){let e=String(parseFloat(t||""));i&&t&&r.searchParams.set(i,e)}}let n="HLS_LIVE_CMAF"===this.params.format?2:0,a=mi(r.toString(),this.liveOffset.getTotalOffset(),n);this.video.setAttribute("src",a),this.video.load(),na(a).then((e=>{if((0,l.isNullable)(e)){let e=this.params.source.maxSeekBackTime??this.maxSeekBackTime$.getValue();if((0,l.isNullable)(e)||!isFinite(e))try{_r(a).then((e=>e.text())).then((e=>{let t=/#EXT-X-STREAM-INF[^\n]+\n(.+)/m.exec(e)?.[1];if(t){let e=new URL(t,a).toString();na(e).then((e=>{(0,l.isNullable)(e)||this.maxSeekBackTime$.next(e)}))}}))}catch{}}else this.maxSeekBackTime$.next(e)}))}playIfAllowed(){Ji(this.video,(()=>{this.params.output.soundProhibitedEvent$.next()})).then((e=>{e||(this.videoState.setState("paused"),this.liveOffset.pause(),vi(this.params.desiredState.playbackState,"paused",!0))}),(e=>this.params.output.error$.next({id:"ForcePlay",message:"play() failed even with workarounds",category:l.ErrorCategory.DOM,thrown:e})))}seek(e){this.params.output.willSeekEvent$.next();let t=-e,i=t<this.maxSeekBackTime$.getValue()?t:0;this.liveOffset.resetTo(i),this.params.output.position$.next(-i/1e3),this.params.output.seekedEvent$.next()}constructor(e){this.subscription=new l.Subscription,this.videoState=new bi("stopped"),this.textTracksManager=new Li,this.manifests$=new l.ValueSubject([]),this.liveOffset=new Ri,this.manifestStartTime$=new l.ValueSubject(void 0),this.syncPlayback=()=>{if(!this.manifests$.getValue().length)return;let e=this.videoState.getState(),t=this.params.desiredState.playbackState.getState(),i=this.params.desiredState.playbackState.getTransition(),r=this.params.desiredState.videoTrack.getTransition(),n=this.params.desiredState.autoVideoTrackSwitching.getTransition(),a=this.params.desiredState.autoVideoTrackLimits.getTransition();if("stopped"===t)return void("stopped"!==e&&(this.videoState.startTransitionTo("stopped"),this.video.removeAttribute("src"),this.video.load(),this.params.output.position$.next(0),this.params.output.duration$.next(1/0),this.params.output.currentBuffer$.next(void 0),this.params.output.hostname$.next(void 0),this.videoState.setState("stopped"),vi(this.params.desiredState.playbackState,"stopped",!0)));if(this.videoState.getTransition())return;let s=this.params.desiredState.seekState.getState();if("stopped"===e)return this.videoState.startTransitionTo("ready"),void this.prepare();if(r||n||a){let e=this.videoState.getState();return this.videoState.setState("changing_manifest"),this.videoState.startTransitionTo(e),this.prepare(),a&&this.params.output.autoVideoTrackLimits$.next(a.to),void("none"===s.state&&this.params.desiredState.seekState.setState({state:"requested",position:-this.liveOffset.getTotalOffset(),forcePrecise:!0}))}if("paused"!==i?.to&&"requested"===s.state)return this.videoState.startTransitionTo("ready"),this.seek(s.position-this.liveOffset.getTotalPausedTime()),void this.prepare();switch(e){case"ready":return void("ready"===t?vi(this.params.desiredState.playbackState,"ready"):"paused"===t?(this.videoState.setState("paused"),this.liveOffset.pause(),vi(this.params.desiredState.playbackState,"paused")):"playing"===t&&(this.videoState.startTransitionTo("playing"),this.playIfAllowed()));case"playing":return void("paused"===t?(this.videoState.startTransitionTo("paused"),this.liveOffset.pause(),this.video.paused?this.videoState.setState("paused"):this.video.pause()):"playing"===i?.to&&vi(this.params.desiredState.playbackState,"playing"));case"paused":if("playing"===t)if(this.videoState.startTransitionTo("playing"),this.liveOffset.getTotalPausedTime()<this.params.config.maxPausedTime&&this.liveOffset.getTotalOffset()<this.maxSeekBackTime$.getValue())this.liveOffset.resume(),this.playIfAllowed(),this.params.output.position$.next(-this.liveOffset.getTotalOffset()/1e3);else{let e=this.liveOffset.getTotalOffset();e>=this.maxSeekBackTime$.getValue()&&(e=0,this.liveOffset.resetTo(e)),this.liveOffset.resume(),this.params.output.position$.next(-e/1e3),this.prepare()}else"paused"===i?.to&&(vi(this.params.desiredState.playbackState,"paused"),this.liveOffset.pause());return;case"changing_manifest":break;default:return(0,l.assertNever)(e)}},this.params=e,this.video=_i(e.container,e.tuning),this.params.output.element$.next(this.video),this.masterManifest={id:"master",quality:l.VideoQuality.INVARIANT,url:this.params.source.url},ua(mi(this.params.source.url),this.params.source.url,{manifestRetryInterval:this.params.tuning.manifestRetryInterval,manifestRetryMaxInterval:this.params.tuning.manifestRetryMaxInterval,manifestRetryMaxCount:this.params.tuning.manifestRetryMaxCount}).then((({qualityManifests:e})=>{0===e.length&&this.params.output.error$.next({id:"HlsLiveProviderInternal:empty_manifest",category:l.ErrorCategory.WTF,message:"HlsLiveProvider: there are no qualities in manifest"}),this.manifests$.next([this.masterManifest,...e])}),(e=>this.params.output.error$.next({id:"ExtractHlsQualities",category:l.ErrorCategory.NETWORK,message:"Error fetching manifest and extracting qualities",thrown:e}))),this.params.output.isLive$.next(!0),this.params.output.canChangePlaybackSpeed$.next(!1),this.params.output.availableVideoTracks$.next([]),this.params.output.availableAudioTracks$.next([]),this.params.output.isAudioAvailable$.next(!0),this.params.output.hostname$.next(Xi(this.params.source.url)),this.params.output.availableTextTracks$.next([]),this.params.desiredState.internalTextTracks.setState([]),this.maxSeekBackTime$=new l.ValueSubject(e.source.maxSeekBackTime??1/0),this.subscribe()}},da=class{selectManifest(){let{autoVideoTrackSwitching:e,videoTrack:t}=this.params.desiredState,i=e.getState(),r=t.getTransition(),n=r?.to?.id??t.getState()?.id??"master",a=this.manifests$.getValue();if(!a.length)return;let s=i?"master":n;return i&&!r&&t.startTransitionTo(this.masterManifest),a.find((e=>e.id===s))}subscribe(){let{output:e,desiredState:t}=this.params,i=t=>{e.error$.next({id:"HlsProvider",category:l.ErrorCategory.WTF,message:"HlsProvider internal logic error",thrown:t})},r=Mi(this.video),n=(e,t)=>this.subscription.add(e.subscribe(t));if(n(r.timeUpdate$,e.position$),n(r.durationChange$,e.duration$),n(r.ended$,e.endedEvent$),n(r.looped$,e.loopedEvent$),n(r.error$,e.error$),n(r.isBuffering$,e.isBuffering$),n(r.currentBuffer$,e.currentBuffer$),n(r.loadedMetadata$,e.firstBytesEvent$),n(r.loadedMetadata$,e.loadedMetadataEvent$),n(r.playing$,e.firstFrameEvent$),n(r.canplay$,e.canplay$),n(r.seeked$,e.seekedEvent$),n(r.inPiP$,e.inPiP$),n(r.inFullscreen$,e.inFullscreen$),n(this.videoState.stateChangeEnded$.pipe((0,l.map)((e=>e.to))),this.params.output.playbackState$),this.subscription.add(Ei(this.video,t.isLooped,i)),this.subscription.add(xi(this.video,t.volume,r.volumeState$,i)),this.subscription.add(r.volumeState$.subscribe(this.params.output.volume$,i)),this.subscription.add(Ai(this.video,t.playbackRate,r.playbackRateState$,i)),this.textTracksManager.connect(this.video,t,e),this.subscription.add(r.playing$.subscribe((()=>{this.videoState.setState("playing"),vi(t.playbackState,"playing")}),i)).add(r.pause$.subscribe((()=>{this.videoState.setState("paused"),vi(t.playbackState,"paused")}),i)).add(r.canplay$.subscribe((()=>{"ready"===this.videoState.getTransition()?.to&&this.videoState.setState("ready"),"playing"===this.videoState.getState()&&this.playIfAllowed()}),i).add(r.loadedMetadata$.subscribe((()=>{let e=this.params.desiredState.seekState.getState(),t=this.videoState.getTransition(),i=this.params.desiredState.videoTrack.getTransition(),r=this.params.desiredState.autoVideoTrackSwitching.getTransition();if(i&&(0,l.isNonNullable)(i.to)){let e=i.to.id;this.params.desiredState.videoTrack.setState(i.to);let t=this.manifests$.getValue().find((t=>t.id===e));t&&(this.params.output.currentVideoTrack$.next(t),this.params.output.hostname$.next(Xi(t.url)))}let n=this.params.desiredState.playbackRate.getState(),a=this.params.output.element$.getValue()?.playbackRate;if(n!==a){let e=this.params.output.element$.getValue();e&&(this.params.desiredState.playbackRate.setState(n),e.playbackRate=n)}r&&this.params.desiredState.autoVideoTrackSwitching.setState(r.to),t&&"changing_manifest"===t.from&&this.videoState.setState(t.to),"requested"===e.state&&this.seek(e.position)}),i))),this.subscription.add(this.manifests$.pipe((0,l.map)((e=>e.map((({id:e,quality:t,size:i,bandwidth:r,fps:n})=>({id:e,quality:t,size:i,fps:n,bitrate:r})))))).subscribe(this.params.output.availableVideoTracks$,i)),!l.clientChecker.isIOS||!this.params.tuning.useNativeHLSTextTracks){let{textTracks:e}=this.video;this.subscription.add((0,l.merge)((0,l.fromEvent)(e,"addtrack"),(0,l.fromEvent)(e,"removetrack"),(0,l.fromEvent)(e,"change"),(0,l.observableFrom)(["init"])).subscribe((()=>{for(let t=0;t<e.length;t++)e[t].mode="hidden"}),i))}let a=(0,l.merge)(t.playbackState.stateChangeStarted$,t.seekState.stateChangeEnded$,t.videoTrack.stateChangeStarted$,t.autoVideoTrackSwitching.stateChangeStarted$,t.autoVideoTrackLimits.stateChangeStarted$,this.videoState.stateChangeEnded$,this.manifests$,(0,l.observableFrom)(["init"])).pipe((0,l.debounce)(0));this.subscription.add(a.subscribe(this.syncPlayback,i))}destroy(){this.subscription.unsubscribe(),this.textTracksManager.destroy(),this.params.output.element$.next(void 0),Ti(this.video)}prepare(){let e=this.selectManifest();if((0,l.isNullable)(e))return;let t=this.params.desiredState.autoVideoTrackLimits.getTransition(),i=this.params.desiredState.autoVideoTrackLimits.getState(),r=new URL(e.url);if((t||i)&&e.id===this.masterManifest.id){let{max:e,min:n}=t?.to??i??{};for(let[t,i]of[[e,"mq"],[n,"lq"]]){let e=String(parseFloat(t||""));i&&t&&r.searchParams.set(i,e)}}this.video.setAttribute("src",r.toString()),this.video.load()}playIfAllowed(){Ji(this.video,(()=>{this.params.output.soundProhibitedEvent$.next()})).then((e=>{e||(this.videoState.setState("paused"),vi(this.params.desiredState.playbackState,"paused",!0))}),(e=>this.params.output.error$.next({id:"ForcePlay",message:"play() failed even with workarounds",category:l.ErrorCategory.DOM,thrown:e})))}seek(e){this.params.output.willSeekEvent$.next(),this.video.currentTime=e/1e3}constructor(e){this.subscription=new l.Subscription,this.videoState=new bi("stopped"),this.textTracksManager=new Li,this.manifests$=new l.ValueSubject([]),this.syncPlayback=()=>{if(!this.manifests$.getValue().length)return;let e=this.videoState.getState(),t=this.params.desiredState.playbackState.getState(),i=this.params.desiredState.playbackState.getTransition(),r=this.params.desiredState.videoTrack.getTransition(),n=this.params.desiredState.autoVideoTrackSwitching.getTransition(),a=this.params.desiredState.autoVideoTrackLimits.getTransition();if("stopped"===t)return void("stopped"!==e&&(this.videoState.startTransitionTo("stopped"),this.video.removeAttribute("src"),this.video.load(),this.params.output.position$.next(0),this.params.output.duration$.next(1/0),this.params.output.currentBuffer$.next(void 0),this.params.output.hostname$.next(void 0),this.videoState.setState("stopped"),vi(this.params.desiredState.playbackState,"stopped",!0)));if(this.videoState.getTransition())return;let s=this.params.desiredState.seekState.getState();if("stopped"===e)return this.videoState.startTransitionTo("ready"),void this.prepare();if(r||n||a){let e=this.videoState.getState();this.videoState.setState("changing_manifest"),this.videoState.startTransitionTo(e);let{currentTime:t}=this.video;return this.prepare(),a&&this.params.output.autoVideoTrackLimits$.next(a.to),void("none"===s.state&&this.params.desiredState.seekState.setState({state:"requested",position:1e3*t,forcePrecise:!0}))}switch("paused"!==i?.to&&"requested"===s.state&&this.seek(s.position),e){case"ready":return void("ready"===t?vi(this.params.desiredState.playbackState,"ready"):"paused"===t?(this.videoState.setState("paused"),vi(this.params.desiredState.playbackState,"paused")):"playing"===t&&(this.videoState.startTransitionTo("playing"),this.playIfAllowed()));case"playing":return void("paused"===t?(this.videoState.startTransitionTo("paused"),this.video.paused?this.videoState.setState("paused"):this.video.pause()):"playing"===i?.to&&vi(this.params.desiredState.playbackState,"playing"));case"paused":return void("playing"===t?(this.videoState.startTransitionTo("playing"),this.playIfAllowed()):"paused"===i?.to&&vi(this.params.desiredState.playbackState,"paused"));case"changing_manifest":break;default:return(0,l.assertNever)(e)}},this.params=e,this.video=_i(e.container,e.tuning),this.params.output.element$.next(this.video),this.masterManifest={id:"master",quality:l.VideoQuality.INVARIANT,url:this.params.source.url},this.params.output.isLive$.next(!1),this.params.output.availableVideoTracks$.next([]),this.params.output.availableAudioTracks$.next([]),this.params.output.isAudioAvailable$.next(!0),this.params.output.hostname$.next(Xi(this.params.source.url)),this.params.output.autoVideoTrackLimitingAvailable$.next(!0),ua(mi(this.params.source.url),this.params.source.url,{manifestRetryInterval:this.params.tuning.manifestRetryInterval,manifestRetryMaxInterval:this.params.tuning.manifestRetryMaxInterval,manifestRetryMaxCount:this.params.tuning.manifestRetryMaxCount}).then((({qualityManifests:e,textTracks:t})=>{this.manifests$.next([this.masterManifest,...e]),this.params.tuning.useNativeHLSTextTracks||this.params.desiredState.internalTextTracks.startTransitionTo(t)}),(e=>this.params.output.error$.next({id:"ExtractHlsQualities",category:l.ErrorCategory.NETWORK,message:"Error fetching manifest and extracting qualities",thrown:e}))),this.subscribe()}},pa=class{subscribe(){let{output:e,desiredState:t}=this.params,i=t=>{e.error$.next({id:"MpegProvider",category:l.ErrorCategory.WTF,message:"MpegProvider internal logic error",thrown:t})},r=Mi(this.video),n=(e,t)=>this.subscription.add(e.subscribe(t,i));n(r.timeUpdate$,e.position$),n(r.durationChange$,e.duration$),n(r.ended$,e.endedEvent$),n(r.looped$,e.loopedEvent$),n(r.error$,e.error$),n(r.isBuffering$,e.isBuffering$),n(r.currentBuffer$,e.currentBuffer$),n(r.loadedMetadata$,e.firstBytesEvent$),n(r.loadedMetadata$,e.loadedMetadataEvent$),n(r.playing$,e.firstFrameEvent$),n(r.canplay$,e.canplay$),n(r.seeked$,e.seekedEvent$),n(r.inPiP$,e.inPiP$),n(r.inFullscreen$,e.inFullscreen$),n(this.videoState.stateChangeEnded$.pipe((0,l.map)((e=>e.to))),this.params.output.playbackState$),this.subscription.add(Ei(this.video,t.isLooped,i)),this.subscription.add(xi(this.video,t.volume,r.volumeState$,i)),this.subscription.add(r.volumeState$.subscribe(this.params.output.volume$,i)),this.subscription.add(Ai(this.video,t.playbackRate,r.playbackRateState$,i)),n(cr(this.video),e.elementVisible$),this.subscription.add(r.playing$.subscribe((()=>{this.videoState.setState("playing"),vi(t.playbackState,"playing")}),i)).add(r.pause$.subscribe((()=>{this.videoState.setState("paused"),vi(t.playbackState,"paused")}),i)).add(r.canplay$.subscribe((()=>{"ready"===this.videoState.getTransition()?.to&&this.videoState.setState("ready");let e=this.params.desiredState.videoTrack.getTransition();if(e&&(0,l.isNonNullable)(e.to)){this.params.desiredState.videoTrack.setState(e.to),this.params.output.currentVideoTrack$.next(this.trackUrls[e.to.id].track);let t=this.params.desiredState.playbackRate.getState(),i=this.params.output.element$.getValue()?.playbackRate;if(t!==i){let e=this.params.output.element$.getValue();e&&(this.params.desiredState.playbackRate.setState(t),e.playbackRate=t)}}"playing"===this.videoState.getState()&&this.playIfAllowed()}),i)),this.textTracksManager.connect(this.video,t,e);let a=(0,l.merge)(t.playbackState.stateChangeStarted$,t.videoTrack.stateChangeStarted$,t.seekState.stateChangeEnded$,t.autoVideoTrackLimits.stateChangeStarted$,this.videoState.stateChangeEnded$,(0,l.observableFrom)(["init"])).pipe((0,l.debounce)(0));this.subscription.add(a.subscribe(this.syncPlayback,i))}destroy(){this.subscription.unsubscribe(),this.textTracksManager.destroy(),this.trackUrls={},this.params.output.element$.next(void 0),Ti(this.video)}prepare(){let e=this.params.desiredState.videoTrack.getState()?.id;(0,l.assertNonNullable)(e,"MpegProvider: track is not selected");let{url:t}=this.trackUrls[e];(0,l.assertNonNullable)(t,`MpegProvider: No url for ${e}`),this.params.tuning.requestQuick&&(t=Rn(t)),this.video.setAttribute("src",t),this.video.load(),this.params.output.hostname$.next(Xi(t))}playIfAllowed(){Ji(this.video,(()=>{this.params.output.soundProhibitedEvent$.next()})).then((e=>{e||(this.videoState.setState("paused"),vi(this.params.desiredState.playbackState,"paused",!0))}),(e=>this.params.output.error$.next({id:"ForcePlay",message:"play() failed even with workarounds",category:l.ErrorCategory.DOM,thrown:e})))}seek(e){this.params.output.willSeekEvent$.next(),this.video.currentTime=e/1e3}handleQualityLimitTransition(e){let t,i=e;if(e&&this.params.output.currentVideoTrack$.getValue()?.quality!==e){let r=Object.values(this.trackUrls).find((t=>!(0,l.isInvariantQuality)(t.track.quality)&&(0,l.isLowerOrEqual)(t.track.quality,e)))?.track,n=this.params.desiredState.videoTrack.getState()?.id,a=this.trackUrls[n??"0"]?.track;if(r&&a&&(0,l.isHigherOrEqual)(a.quality,r.quality)&&(t=r),!t){let i=Object.values(this.trackUrls).filter((t=>!(0,l.isInvariantQuality)(t.track.quality)&&(0,l.isHigher)(t.track.quality,e))),r=i.length;r&&(t=i[r-1].track)}t&&(i=t.quality)}else if(!e){let e=Object.values(this.trackUrls).map((e=>e.track));t=Ki(e,{container:{width:this.video.offsetWidth,height:this.video.offsetHeight},estimatedThroughput:this.params.dependencies.throughputEstimator.throughput$.getValue(),tuning:this.params.tuning.autoTrackSelection,forwardBufferHealth:0,abrLogger:this.params.dependencies.abrLogger})}t&&(this.params.output.currentVideoTrack$.next(t),this.params.desiredState.videoTrack.startTransitionTo(t)),this.params.output.autoVideoTrackLimits$.next({max:i})}constructor(e){this.subscription=new l.Subscription,this.videoState=new bi("stopped"),this.trackUrls={},this.textTracksManager=new Li,this.syncPlayback=()=>{let e=this.videoState.getState(),t=this.params.desiredState.playbackState.getState(),i=this.params.desiredState.playbackState.getTransition();if("stopped"===t)return void("stopped"!==e&&(this.videoState.startTransitionTo("stopped"),this.video.removeAttribute("src"),this.video.load(),this.params.output.position$.next(0),this.params.output.duration$.next(1/0),this.params.output.currentBuffer$.next(void 0),this.params.output.hostname$.next(void 0),this.videoState.setState("stopped"),vi(this.params.desiredState.playbackState,"stopped",!0)));if(this.videoState.getTransition())return;let r=this.params.desiredState.autoVideoTrackLimits.getTransition(),n=this.params.desiredState.videoTrack.getTransition(),a=this.params.desiredState.seekState.getState();if(!r||"ready"===e||n){if("stopped"===e)return this.videoState.startTransitionTo("ready"),void this.prepare();if(n){let{currentTime:e}=this.video;return this.prepare(),"none"===a.state&&this.params.desiredState.seekState.setState({state:"requested",position:1e3*e,forcePrecise:!0}),void(n.to&&this.params.desiredState.autoVideoTrackLimits.getState()?.max!==this.trackUrls[n.to.id]?.track?.quality&&this.params.output.autoVideoTrackLimits$.next({max:void 0}))}switch("paused"!==i?.to&&"requested"===a.state&&this.seek(a.position),e){case"ready":return void("ready"===t?vi(this.params.desiredState.playbackState,"ready"):"paused"===t?(this.videoState.setState("paused"),vi(this.params.desiredState.playbackState,"paused")):"playing"===t&&(this.videoState.startTransitionTo("playing"),this.playIfAllowed()));case"playing":return void("paused"===t?(this.videoState.startTransitionTo("paused"),this.video.paused?this.videoState.setState("paused"):this.video.pause()):"playing"===i?.to&&vi(this.params.desiredState.playbackState,"playing"));case"paused":return void("playing"===t?(this.videoState.startTransitionTo("playing"),this.playIfAllowed()):"paused"===i?.to&&vi(this.params.desiredState.playbackState,"paused"));default:return(0,l.assertNever)(e)}}else this.handleQualityLimitTransition(r.to.max)},this.params=e,this.video=_i(e.container,e.tuning),this.params.output.element$.next(this.video),Object.entries(this.params.source).reverse().forEach((([e,t],i)=>{let r=i.toString(10);this.trackUrls[r]={track:{quality:e,id:r},url:t}})),this.params.output.isLive$.next(!1),this.params.output.availableVideoTracks$.next(Object.values(this.trackUrls).map((({track:e})=>e))),this.params.output.availableAudioTracks$.next([]),this.params.output.isAudioAvailable$.next(!0),this.params.desiredState.autoVideoTrackSwitching.setState(!1),this.params.output.autoVideoTrackLimitingAvailable$.next(!0),this.subscribe()}},ha=["stun:videostun.mycdn.me:80"],fa=()=>null,ma=class{onStart(e){try{this.externalStartCallback=e}catch(e){this.handleSystemError(e)}}onStop(e){try{this.externalStopCallback=e}catch(e){this.handleSystemError(e)}}onError(e){try{this.externalErrorCallback=e}catch(e){this.handleSystemError(e)}}connect(){this.connectWS()}disconnect(){try{this.externalStopCallback(),this.closeConnections()}catch(e){this.handleSystemError(e)}}connectWS(){this.ws||(this.ws=new WebSocket(this.serverUrl),this.ws.onopen=this.onSocketOpen.bind(this),this.ws.onmessage=this.onSocketMessage.bind(this),this.ws.onclose=this.onSocketClose.bind(this),this.ws.onerror=this.onSocketError.bind(this))}onSocketOpen(){this.handleLogin()}onSocketClose(e){try{if(!this.ws)return;this.ws=null,e.code>1e3?(this.retryCount++,this.retryCount>this.options.maxRetryNumber?this.handleNetworkError():this.scheduleRetry()):this.externalStopCallback()}catch(e){this.handleRTCError(e)}}onSocketError(e){try{this.externalErrorCallback(new Error(e.toString()))}catch(e){this.handleRTCError(e)}}onSocketMessage(e){try{let t=this.parseMessage(e.data);switch(t.type){case"JOIN":case"CALL_JOIN":this.handleJoinMessage(t);break;case"UPDATE":this.handleUpdateMessage(t);break;case"STATUS":this.handleStatusMessage(t)}}catch(e){this.handleRTCError(e)}}handleJoinMessage(e){switch(e.inviteType){case"ANSWER":this.handleAnswer(e.sdp);break;case"CANDIDATE":this.handleCandidate(e.candidate)}}handleStatusMessage(e){if("UNPUBLISHED"===e.status)this.handleUnpublished()}async handleUpdateMessage(e){try{let t=await this.createOffer();this.peerConnection&&await this.peerConnection.setLocalDescription(t),this.handleAnswer(e.sdp)}catch(e){this.handleRTCError(e)}}async handleLogin(){try{let e={iceServers:[{urls:ha}]};this.peerConnection=new RTCPeerConnection(e),this.peerConnection.ontrack=this.onPeerConnectionStream.bind(this),this.peerConnection.onicecandidate=this.onPeerConnectionIceCandidate.bind(this),this.peerConnection.oniceconnectionstatechange=this.onPeerConnectionIceConnectionStateChange.bind(this);let t=await this.createOffer();await this.peerConnection.setLocalDescription(t),this.send({type:this.signalingType,inviteType:"OFFER",streamKey:this.streamKey,sdp:t.sdp,callSupport:!1})}catch(e){this.handleRTCError(e)}}async handleAnswer(e){try{this.peerConnection&&await this.peerConnection.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:e}))}catch(e){this.handleRTCError(e)}}async handleCandidate(e){if(e)try{this.peerConnection&&await this.peerConnection.addIceCandidate(e)}catch(e){this.handleRTCError(e)}}handleUnpublished(){try{this.closeConnections(),this.externalStopCallback()}catch(e){this.handleRTCError(e)}}handleSystemError(e){this.options.errorChanel&&this.options.errorChanel.next({id:"webrtc-provider-error",category:l.ErrorCategory.WTF,message:e.message})}async onPeerConnectionStream(e){let t=e.streams[0];this.stream&&this.stream.id===t.id||(this.stream=t,this.externalStartCallback(this.stream))}onPeerConnectionIceCandidate(e){e.candidate&&this.send({type:this.signalingType,inviteType:"CANDIDATE",candidate:e.candidate})}onPeerConnectionIceConnectionStateChange(){if(this.peerConnection){let e=this.peerConnection.iceConnectionState;["failed","closed"].indexOf(e)>-1&&(this.retryCount++,this.retryCount>this.options.maxRetryNumber?this.handleNetworkError():(this.closeConnections(),this.scheduleRetry()))}}async createOffer(){if(!this.peerConnection)throw new Error("Can not create offer - no peer connection instance ");let e=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0,voiceActivityDetection:!1}),t=e.sdp||"";if(!/^a=rtpmap:\d+ H264\/\d+$/m.test(t))throw new Error("No h264 codec support error");return e}handleRTCError(e){try{this.externalErrorCallback(e||new Error("RTC connection error"))}catch(e){this.handleSystemError(e)}}handleNetworkError(){try{this.externalErrorCallback(new Error("Network error"))}catch(e){this.handleSystemError(e)}}send(e){this.ws&&this.ws.send(JSON.stringify(e))}parseMessage(e){try{return JSON.parse(e)}catch{throw new Error("Can not parse socket message")}}closeConnections(){let e=this.ws;e&&(this.ws=null,e.close(1e3)),this.removePeerConnection()}removePeerConnection(){let e=this.peerConnection;e&&(this.peerConnection=null,e.close(),e.ontrack=null,e.onicecandidate=null,e.oniceconnectionstatechange=null,e=null)}scheduleRetry(){this.retryTimeout=setTimeout(this.connectWS.bind(this),1e3)}normalizeOptions(e={}){let t={stunServerList:ha,maxRetryNumber:3,errorChanel:null};return e.stunServerList&&(t.stunServerList=e.stunServerList),e.maxRetryNumber&&e.maxRetryNumber>0&&(t.maxRetryNumber=e.maxRetryNumber),t}constructor(e,t){this.ws=null,this.peerConnection=null,this.serverUrl="",this.streamKey="",this.stream=null,this.signalingType="JOIN",this.retryCount=0,this.externalStartCallback=fa,this.externalStopCallback=fa,this.externalErrorCallback=fa,this.options=this.normalizeOptions(t);let i=e.split("/");this.serverUrl=i.slice(0,i.length-1).join("/"),this.streamKey=i[i.length-1]}},ga=class{destroy(){this.subscription.unsubscribe(),this.liveStreamClient.disconnect(),this.params.output.element$.next(void 0),Ti(this.video)}subscribe(){let{output:e,desiredState:t}=this.params,i=t=>{e.error$.next({id:"WebRTCLiveProvider",category:l.ErrorCategory.WTF,message:"WebRTCLiveProvider internal logic error",thrown:t})};(0,l.merge)(this.videoState.stateChangeStarted$.pipe((0,l.map)((e=>({transition:e,type:"start"})))),this.videoState.stateChangeEnded$.pipe((0,l.map)((e=>({transition:e,type:"end"}))))).subscribe((({transition:e,type:t})=>{this.log({message:`[videoState change] ${t}: ${JSON.stringify(e)}`})}));let r=Mi(this.video),n=(e,t)=>this.subscription.add(e.subscribe(t,i));n(r.timeUpdate$,e.liveTime$),n(r.ended$,e.endedEvent$),n(r.looped$,e.loopedEvent$),n(r.error$,e.error$),n(r.isBuffering$,e.isBuffering$),n(r.currentBuffer$,e.currentBuffer$),n(cr(this.video),this.params.output.elementVisible$),this.subscription.add(r.durationChange$.subscribe((t=>{e.duration$.next(t===1/0?0:t)}))).add(r.canplay$.subscribe((()=>{"ready"===this.videoState.getTransition()?.to&&this.videoState.setState("ready")}),i)).add(r.pause$.subscribe((()=>{this.videoState.setState("paused")}),i)).add(r.playing$.subscribe((()=>{this.videoState.setState("playing")}),i)).add(r.error$.subscribe(e.error$)).add(this.maxSeekBackTime$.subscribe(this.params.output.duration$)).add(xi(this.video,t.volume,r.volumeState$,i)).add(r.volumeState$.subscribe(e.volume$,i)).add(this.videoState.stateChangeEnded$.subscribe((i=>{switch(i.to){case"stopped":e.position$.next(0),e.duration$.next(0),t.playbackState.setState("stopped");break;case"ready":break;case"paused":t.playbackState.setState("paused");break;case"playing":t.playbackState.setState("playing");break;default:return(0,l.assertNever)(i.to)}}),i)).add((0,l.merge)(t.playbackState.stateChangeStarted$,this.videoState.stateChangeEnded$,(0,l.observableFrom)(["init"])).pipe((0,l.debounce)(0)).subscribe(this.syncPlayback.bind(this),i)),this.subscription.add(t.isLooped.stateChangeStarted$.subscribe((()=>t.isLooped.setState(!1)),i)),this.subscription.add(t.autoVideoTrackSwitching.stateChangeStarted$.subscribe((()=>t.autoVideoTrackSwitching.setState(!1)),i))}onLiveStreamStart(e){this.params.output.element$.next(this.video),this.params.output.duration$.next(0),this.params.output.position$.next(0),this.params.output.isLive$.next(!0),this.params.output.canChangePlaybackSpeed$.next(!1),this.params.output.hostname$.next(Xi(this.params.source.url)),this.params.output.autoVideoTrackLimitingAvailable$.next(!1),this.params.output.availableVideoTracks$.next([]),this.params.output.availableAudioTracks$.next([]),this.params.output.isAudioAvailable$.next(!0),this.params.output.currentVideoTrack$.next({id:"webrtc",quality:l.VideoQuality.INVARIANT}),this.video.srcObject=e,vi(this.params.desiredState.playbackState,"playing")}onLiveStreamStop(){this.videoState.startTransitionTo("stopped"),this.syncPlayback(),this.params.output.position$.next(0),this.params.output.duration$.next(0),this.params.output.currentBuffer$.next(void 0),this.params.output.hostname$.next(void 0),this.params.output.endedEvent$.next()}onLiveStreamError(e){this.onLiveStreamStop(),this.params.output.error$.next({id:"WebRTC stream runtime error",category:l.ErrorCategory.EXTERNAL_API,message:e.message,thrown:e})}playIfAllowed(){Ji(this.video,(()=>{this.params.output.soundProhibitedEvent$.next()})).then((e=>{e||(this.videoState.setState("paused"),vi(this.params.desiredState.playbackState,"paused",!0))}),(e=>this.params.output.error$.next({id:"ForcePlay",message:"play() failed even with workarounds",category:l.ErrorCategory.DOM,thrown:e})))}prepare(){this.liveStreamClient.connect()}constructor(e){this.videoState=new bi("stopped"),this.maxSeekBackTime$=new l.ValueSubject(0),this.syncPlayback=()=>{let e=this.videoState.getState(),t=this.params.desiredState.playbackState.getState(),i=this.params.desiredState.playbackState.getTransition();if("stopped"===t)return void("stopped"!==e&&(this.videoState.startTransitionTo("stopped"),this.video.pause(),this.video.srcObject=null,this.params.output.position$.next(0),this.params.output.duration$.next(0),this.params.output.currentBuffer$.next(void 0),this.params.output.hostname$.next(void 0),this.videoState.setState("stopped"),vi(this.params.desiredState.playbackState,"stopped",!0)));if(this.videoState.getTransition())return;let r=this.params.desiredState.videoTrack.getTransition();if("stopped"===e)return this.videoState.startTransitionTo("ready"),void this.prepare();if(r)this.prepare();else switch(e){case"ready":return void("paused"===t?(this.videoState.setState("paused"),vi(this.params.desiredState.playbackState,"paused")):"playing"===t&&(this.videoState.startTransitionTo("playing"),this.playIfAllowed()));case"playing":return void("paused"===t?(this.videoState.startTransitionTo("paused"),this.video.paused?this.videoState.setState("paused"):this.video.pause()):"playing"===i?.to&&vi(this.params.desiredState.playbackState,"playing"));case"paused":return void("playing"===t?(this.videoState.startTransitionTo("playing"),this.playIfAllowed()):"paused"===i?.to&&vi(this.params.desiredState.playbackState,"paused"));default:return(0,l.assertNever)(e)}},this.subscription=new l.Subscription,this.params=e,this.log=this.params.dependencies.logger.createComponentLog("WebRTCLiveProvider"),this.video=_i(e.container,e.tuning),this.liveStreamClient=new ma(this.params.source.url,{maxRetryNumber:this.params.tuning.webrtc.connectionRetryMaxNumber,errorChanel:this.params.output.error$}),this.liveStreamClient.onStart(this.onLiveStreamStart.bind(this)),this.liveStreamClient.onStop(this.onLiveStreamStop.bind(this)),this.liveStreamClient.onError(this.onLiveStreamError.bind(this)),this.params.output.availableTextTracks$.next([]),this.params.desiredState.internalTextTracks.setState([]),this.subscribe()}},va=class{next(){this.current=this.iterator.next()}getValue(){if(this.current.done)throw new Error("Iterable is completed");return this.current.value}isCompleted(){return!!this.current.done}constructor(e){this.iterator=e[Symbol.iterator](),this.next()}};var ba=(r=class e{subscribe(e){l.clientChecker.isSafari&&"MPEG"!==e||this.subscriptions.add((0,l.combine)({video:this.providerOutput.element$,playbackState:this.providerOutput.playbackState$,volume:this.providerOutput.volume$}).pipe((0,l.filter)((({playbackState:e,video:t,volume:{muted:i,volume:r}})=>"playing"===e&&!!t&&!i&&!!r)),(0,l.once)()).subscribe((({video:e})=>{this.initAudioContextOnce(e).then((e=>{e||this.destroy()})).catch((e=>{this.handleError(e),this.destroy()}))})))}static isSupported(){return"AudioContext"in window&&"GainNode"in window&&"MediaElementAudioSourceNode"in window}async initAudioContextOnce(e){let{volumeMultiplier:t}=this,i=new(window.AudioContext||window.webkitAudioContext);this.audioContext=i;let r=i.createGain();if(this.gainNode=r,r.gain.value=t,r.connect(i.destination),"suspended"===i.state&&(await i.resume(),this.destroyController.signal.aborted))return!1;let n=i.createMediaElementSource(e);return this.mediaElementSource=n,n.connect(r),!0}cleanup(){this.mediaElementSource&&(this.mediaElementSource.disconnect(),this.mediaElementSource=null),this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),this.audioContext&&("closed"!==this.audioContext.state&&this.audioContext.close(),this.audioContext=null)}destroy(){this.destroyController.abort(),this.subscriptions.unsubscribe(),this.cleanup()}handleError(t){this.volumeMultiplierError$.next({id:e.errorId,category:l.ErrorCategory.VIDEO_PIPELINE,message:t?.message??`${e.errorId} exception`,thrown:t})}constructor(e,t,i,r){this.providerOutput=e,this.provider$=t,this.volumeMultiplierError$=i,this.volumeMultiplier=r,this.destroyController=new Tr,this.subscriptions=new l.Subscription,this.audioContext=null,this.gainNode=null,this.mediaElementSource=null,this.subscriptions.add(this.provider$.pipe((0,l.filter)((e=>!!e.type)),(0,l.once)()).subscribe((({type:e})=>this.subscribe(e))))}},r.errorId="VolumeMultiplierManager",r),ya={chunkDuration:5e3,maxParallelRequests:5},Sa=class{init(){this.subscription.add(this.initProviderErrorHandling()),this.subscription.add(this.params.dependencies.chromecastInitializer.connection$.subscribe((()=>{this.reinitProvider()})))}destroy(){this.destroyProvider(),this.current$.next({type:void 0}),this.subscription.unsubscribe(),this.volumeMultiplierManager?.destroy(),this.volumeMultiplierManager=null,this.tracer.end()}initProvider(){let e,t=this.chooseDestination(),i=this.chooseFormat(t);if((0,l.isNullable)(i))this.handleNoFormatsError(t);else{try{e=this.createProvider(t,i)}catch(e){this.providerError$.next({id:"ProviderNotConstructed",category:l.ErrorCategory.WTF,message:"Failed to create provider",thrown:e})}e?this.current$.next({type:i,provider:e,destination:t}):this.current$.next({type:void 0})}}reinitProvider(){this.tracer.log("reinitProvider"),this.destroyProvider(),this.initProvider()}switchToNextProvider(e){this.tracer.log("switchToNextProvider",{destination:e}),this.destroyProvider(),this.failoverIndex=void 0,this.skipFormat(e),this.initProvider()}destroyProvider(){let e=this.current$.getValue().provider;if(!e)return;this.log({message:"destroyProvider"}),this.tracer.log("destroyProvider");let t=1e3*this.providerOutput.position$.getValue(),i=this.params.desiredState.seekState.getState(),r="none"!==i.state;if(this.params.desiredState.seekState.setState({state:"requested",position:r?i.position:t,forcePrecise:!!r&&i.forcePrecise}),e.scene3D){let t=e.scene3D.getCameraRotation();this.params.desiredState.cameraOrientation.setState({x:t.x,y:t.y})}e.destroy();let n=this.providerOutput.isBuffering$;n.getValue()||n.next(!0)}createProvider(e,t){switch(this.log({message:`createProvider: ${e}:${t}`}),this.tracer.log("createProvider",{destination:e,format:t}),e){case"SCREEN":return this.createScreenProvider(t);case"CHROMECAST":return this.createChromecastProvider(t);default:return(0,l.assertNever)(e)}}createScreenProvider(e){let{sources:t,container:i,desiredState:r}=this.params,n=this.providerOutput,a={container:i,source:null,desiredState:r,output:n,dependencies:this.params.dependencies,tuning:this.params.tuning};switch(e){case"DASH_SEP":case"DASH_WEBM":case"DASH_WEBM_AV1":case"DASH_ONDEMAND":case"DASH_STREAMS":{let i=this.applyFailoverHost(t[e]),r=this.applyFailoverHost(t.HLS_ONDEMAND||t.HLS);return(0,l.assertNonNullable)(i),new Xn({...a,source:i,sourceHls:r})}case"DASH_LIVE_CMAF":{let i=this.applyFailoverHost(t[e]);return(0,l.assertNonNullable)(i),new Zn({...a,source:i})}case"HLS":case"HLS_ONDEMAND":{let i=this.applyFailoverHost(t[e]);return(0,l.assertNonNullable)(i),Mr||!this.params.tuning.useHlsJs?new da({...a,source:i}):new ia({...a,source:i})}case"HLS_LIVE":case"HLS_LIVE_CMAF":{let i=this.applyFailoverHost(t[e]);return(0,l.assertNonNullable)(i),new ca({...a,source:i,config:{maxPausedTime:this.params.tuning.live.maxPausedTime},format:e})}case"MPEG":{let i=this.applyFailoverHost(t[e]);return(0,l.assertNonNullable)(i),new pa({...a,source:i})}case"DASH_LIVE":{let i=this.applyFailoverHost(t[e]);return(0,l.assertNonNullable)(i),new hr({...a,source:i,config:{...ya,maxPausedTime:this.params.tuning.live.maxPausedTime}})}case"WEB_RTC_LIVE":{let a=this.applyFailoverHost(t[e]);return(0,l.assertNonNullable)(a),new ga({container:i,source:a,desiredState:r,output:n,dependencies:this.params.dependencies,tuning:this.params.tuning})}case"DASH":case"DASH_LIVE_WEBM":throw new Error(`${e} is no longer supported`);default:return(0,l.assertNever)(e)}}createChromecastProvider(e){let{sources:t,container:i,desiredState:r,meta:n}=this.params,a=this.providerOutput,s=this.params.dependencies.chromecastInitializer.connection$.getValue();return(0,l.assertNonNullable)(s),new yi({connection:s,meta:n,container:i,source:t,format:e,desiredState:r,output:a,dependencies:this.params.dependencies,tuning:this.params.tuning})}chooseDestination(){return this.params.dependencies.chromecastInitializer.connection$.getValue()?"CHROMECAST":"SCREEN"}chooseFormat(e){switch(e){case"SCREEN":return this.screenFormatsIterator.isCompleted()?void 0:this.screenFormatsIterator.getValue();case"CHROMECAST":return this.chromecastFormatsIterator.isCompleted()?void 0:this.chromecastFormatsIterator.getValue();default:return(0,l.assertNever)(e)}}skipFormat(e){switch(e){case"SCREEN":return this.screenFormatsIterator.next();case"CHROMECAST":return this.chromecastFormatsIterator.next();default:return(0,l.assertNever)(e)}}handleNoFormatsError(e){switch(e){case"SCREEN":return this.noAvailableProvidersError$.next(this.params.tuning.forceFormat),void this.current$.next({type:void 0});case"CHROMECAST":return void this.params.dependencies.chromecastInitializer.disconnect();default:return(0,l.assertNever)(e)}}applyFailoverHost(e){if(void 0===this.failoverIndex)return e;let t=this.params.failoverHosts[this.failoverIndex];if(!t)return e;let i=e=>{let i=new URL(e);return i.host=t,i.toString()};if(void 0===e)return e;if("type"in e){if("raw"===e.type)return e;if("url"===e.type)return{...e,url:i(e.url)}}return(0,hi.default)(Object.entries(e).map((([e,t])=>[e,i(t)])))}initProviderErrorHandling(){let e=new l.Subscription,t=!1,i=0;return e.add((0,l.merge)(this.providerOutput.error$.pipe((0,l.filter)((e=>!this.params.tuning.ignoreAudioRendererError||!e.message||!/AUDIO_RENDERER_ERROR/gi.test(e.message)))),(r={desiredPlaybackState$:this.params.desiredState.playbackState,maxTransitionInterval:this.params.tuning.maxPlaybackTransitionInterval,position$:this.providerOutput.position$,providerChanged$:this.current$},new l.Observable((e=>{let t=new l.Subscription,i=r.desiredPlaybackState$.stateChangeStarted$.pipe((0,l.map)((({from:e,to:t})=>`${e}-${t}`))),n=r.desiredPlaybackState$.stateChangeEnded$,a=r.providerChanged$.pipe((0,l.map)((({type:e})=>void 0!==e))),s=new l.Subject,o=0,u="unknown";return t.add(i.subscribe((e=>{o&&window.clearTimeout(o),u=e,o=window.setTimeout((()=>s.next(e)),r.maxTransitionInterval)}))),t.add(n.subscribe((()=>{window.clearTimeout(o),u="unknown",o=0}))),t.add(a.subscribe((e=>{o&&(window.clearTimeout(o),o=0,e&&(o=window.setTimeout((()=>s.next(u)),r.maxTransitionInterval)))}))),t.add(s.subscribe(e)),()=>{window.clearTimeout(o),t.unsubscribe()}}))).pipe((0,l.map)((e=>({id:`ProviderHangup:${e}`,category:l.ErrorCategory.WTF,message:`A ${e} transition failed to complete within reasonable time`}))))).subscribe(this.providerError$)),e.add(this.current$.subscribe((()=>{t=!1;let i=this.params.desiredState.playbackState.transitionEnded$.pipe((0,l.filter)((({to:e})=>"playing"===e)),(0,l.once)()).subscribe((()=>t=!0));e.add(i)}))),e.add(this.providerError$.subscribe((e=>{let r=this.current$.getValue().destination,n={error:e,currentDestination:r};if("CHROMECAST"===r)this.destroyProvider(),this.params.dependencies.chromecastInitializer.stopMedia().then((()=>this.switchToNextProvider("SCREEN")),(()=>this.params.dependencies.chromecastInitializer.disconnect()));else{let a=e.category===l.ErrorCategory.NETWORK,s=e.category===l.ErrorCategory.FATAL,o=this.params.failoverHosts.length>0&&(void 0===this.failoverIndex||this.failoverIndex<this.params.failoverHosts.length-1),u=i<this.params.tuning.providerErrorLimit&&!s,c=o&&!s&&(a&&t||!u);n={...n,isNetworkError:a,isFatalError:s,haveFailoverHost:o,tryFailover:c,canReinitProvider:u},u?(i++,this.reinitProvider()):c?(this.failoverIndex=void 0===this.failoverIndex?0:this.failoverIndex+1,this.reinitProvider()):this.switchToNextProvider(r??"SCREEN")}this.tracer.error("providerError",(0,l.flattenObject)(n))}))),e;var r}constructor(e){this.current$=new l.ValueSubject({type:void 0}),this.providerError$=new l.Subject,this.noAvailableProvidersError$=new l.Subject,this.volumeMultiplierError$=new l.Subject,this.providerOutput={position$:new l.ValueSubject(0),duration$:new l.ValueSubject(1/0),volume$:new l.ValueSubject({muted:!1,volume:1}),availableVideoStreams$:new l.ValueSubject([]),currentVideoStream$:new l.ValueSubject(void 0),availableVideoTracks$:new l.ValueSubject([]),currentVideoTrack$:new l.ValueSubject(void 0),availableAudioStreams$:new l.ValueSubject([]),currentAudioStream$:new l.ValueSubject(void 0),availableAudioTracks$:new l.ValueSubject([]),currentVideoSegmentLength$:new l.ValueSubject(0),currentAudioSegmentLength$:new l.ValueSubject(0),isAudioAvailable$:new l.ValueSubject(!0),autoVideoTrackLimitingAvailable$:new l.ValueSubject(!1),autoVideoTrackLimits$:new l.ValueSubject(void 0),currentBuffer$:new l.ValueSubject(void 0),isBuffering$:new l.ValueSubject(!0),error$:new l.Subject,warning$:new l.Subject,willSeekEvent$:new l.Subject,soundProhibitedEvent$:new l.Subject,seekedEvent$:new l.Subject,loopedEvent$:new l.Subject,endedEvent$:new l.Subject,firstBytesEvent$:new l.Subject,loadedMetadataEvent$:new l.Subject,firstFrameEvent$:new l.Subject,canplay$:new l.Subject,isLive$:new l.ValueSubject(void 0),isLowLatency$:new l.ValueSubject(!1),canChangePlaybackSpeed$:new l.ValueSubject(!0),liveTime$:new l.ValueSubject(void 0),liveBufferTime$:new l.ValueSubject(void 0),availableTextTracks$:new l.ValueSubject([]),currentTextTrack$:new l.ValueSubject(void 0),hostname$:new l.ValueSubject(void 0),httpConnectionType$:new l.ValueSubject(void 0),httpConnectionReused$:new l.ValueSubject(void 0),inPiP$:new l.ValueSubject(!1),inFullscreen$:new l.ValueSubject(!1),element$:new l.ValueSubject(void 0),elementVisible$:new l.ValueSubject(!0),availableSources$:new l.ValueSubject(void 0),is3DVideo$:new l.ValueSubject(!1),playbackState$:new l.ValueSubject("")},this.subscription=new l.Subscription,this.volumeMultiplierManager=null,this.params=e,this.log=this.params.dependencies.logger.createComponentLog("ProviderContainer"),this.tracer=e.dependencies.tracer.createComponentTracer(this.constructor.name);let t=((e,{useHlsJs:t,useManagedMediaSource:i,useOldMSEDetection:r})=>{let n=Lr.mse&&(!r||!!window.MediaStreamTrack)||Lr.mms&&i;return e.filter((e=>{switch(e){case"DASH_SEP":case"DASH_LIVE":case"DASH_ONDEMAND":return n&&Rr.mp4&&Or;case"DASH_WEBM":return n&&Rr.webm&&Pr.vp9&&Pr.opus;case"DASH_WEBM_AV1":return n&&Rr.webm&&Pr.av1&&Pr.opus;case"DASH_STREAMS":return n&&(Rr.mp4&&Or||Rr.webm&&(Pr.vp9||Pr.av1)&&(Pr.opus||Pr.aac));case"DASH_LIVE_CMAF":return n&&Rr.mp4&&Or&&Rr.cmaf;case"HLS":case"HLS_ONDEMAND":return Mr||t&&n&&Rr.mp4&&Or;case"HLS_LIVE":case"HLS_LIVE_CMAF":return Mr;case"MPEG":return Rr.mp4;case"DASH":case"DASH_LIVE_WEBM":return!1;case"WEB_RTC_LIVE":return Lr.webrtc&&Lr.ws&&Pr.h264&&(Rr.mp4||Rr.webm);default:return(0,l.assertNever)(e)}}))})([...Vr(this.params.tuning),...Nr(this.params.tuning)],this.params.tuning).filter((t=>(0,l.isNonNullable)(e.sources[t]))),{forceFormat:i,formatsToAvoid:r}=this.params.tuning,n=[];n=i?[i]:r.length?[...t.filter((e=>!r.includes(e))),...t.filter((e=>r.includes(e)))]:t,this.log({message:`Selected formats: ${n.join(" > ")}`}),this.tracer.log("Selected formats",(0,l.flattenObject)(n)),this.screenFormatsIterator=new va(n);let a=[...Dr(!0),...Dr(!1)];this.chromecastFormatsIterator=new va(a.filter((t=>(0,l.isNonNullable)(e.sources[t])))),this.providerOutput.availableSources$.next(e.sources);let{volumeMultiplier:s=1,tuning:{useVolumeMultiplier:o}}=this.params;o&&1!==s&&ba.isSupported()&&(this.volumeMultiplierManager=new ba(this.providerOutput,this.current$,this.volumeMultiplierError$,s))}},$a="one_video_throughput",_a="one_video_rtt",Ta=window.navigator.connection,wa=()=>{let e=Ta?.downlink;if((0,l.isNonNullable)(e)&&10!==e)return 1e3*e},Ea=()=>{let e=Ta?.rtt;if((0,l.isNonNullable)(e)&&3e3!==e)return e},xa=(e,t,i)=>{let r=8*i;return r/(r/e+t)},Aa=class e{destroy(){this.concurrentDownloads.clear(),this.subscription.unsubscribe()}trackXHR(e){let t=0,i=(0,l.now)(),r=new l.Subscription;switch(this.subscription.add(r),this.concurrentDownloads.add(e),e.readyState){case 4:break;case 3:case 2:r.add((0,l.fromEvent)(e,"progress").pipe((0,l.once)()).subscribe((e=>{t=e.loaded,i=(0,l.now)()})));break;case 1:case 0:r.add((0,l.fromEvent)(e,"loadstart").subscribe((()=>{t=0,i=(0,l.now)()})))}r.add((0,l.fromEvent)(e,"loadend").subscribe((n=>{if(200===e.status){let e=n.loaded,r=(0,l.now)(),a=e-t,s=r-i;this.addRawSpeed(a,s,1)}this.concurrentDownloads.delete(e),r.unsubscribe()})))}trackStream(e,t=!1){let i=e.getReader();if(!i)return void e.cancel("Could not get reader");let r=0,n=(0,l.now)(),a=0,s=(0,l.now)(),o=t=>{this.concurrentDownloads.delete(e),i.releaseLock(),e.cancel(`Throughput Estimator error: ${t}`).catch((()=>{}))},u=async({done:c,value:d})=>{if(c)!t&&this.addRawSpeed(r,(0,l.now)()-n,1),this.concurrentDownloads.delete(e);else if(d){if(t){let e=(0,l.now)();if(e-s>this.tuningConfig.lowLatency.continuesByteSequenceInterval||e-n>this.tuningConfig.lowLatency.maxLastEvaluationTimeout){let e=s-n;e&&this.addRawSpeed(a,e,1,t),a=d.byteLength,n=(0,l.now)()}else a+=d.byteLength;s=(0,l.now)()}else r+=d.byteLength,a+=d.byteLength,a>=this.tuningConfig.streamMinSampleSize&&(0,l.now)()-s>=this.tuningConfig.streamMinSampleTime&&(this.addRawSpeed(a,(0,l.now)()-s,this.concurrentDownloads.size),a=0,s=(0,l.now)());await(i?.read().then(u,o))}};this.concurrentDownloads.add(e),i?.read().then(u,o)}addRawSpeed(t,i,r=1,n=!1){if(e.sanityCheck(t,i,n)){let e=8*t/i;this.throughput.next(e*r)}}addRawThroughput(e){this.throughput.next(e)}addRawRtt(e){this.rtt.next(e)}static sanityCheck(e,t,i=!1){let r=8*e/t;return!(!r||!isFinite(r)||r>1e6||r<30||i&&e<1e4||!i&&e<10240||!i&&t<=20)}static load(e){let t=l.safeStorage.get(e);if((0,l.isNonNullable)(t))return parseInt(t,10)??void 0}constructor(t){this.subscription=new l.Subscription,this.concurrentDownloads=new Set,this.tuningConfig=t;let i=e.load($a)||(t.useBrowserEstimation?wa():void 0)||5e3,r=e.load(_a)??(t.useBrowserEstimation?Ea():void 0)??0;if(this.throughput$=new l.ValueSubject(i),this.rtt$=new l.ValueSubject(r),this.rttAdjustedThroughput$=new l.ValueSubject(xa(i,r,t.rttPenaltyRequestSize)),this.throughput=Un.getSmoothedValue(i,-1,t),this.rtt=Un.getSmoothedValue(r,1,t),t.useBrowserEstimation){let e=()=>{let e=wa();e&&this.throughput.next(e);let t=Ea();(0,l.isNonNullable)(t)&&this.rtt.next(t)};Ta&&"onchange"in Ta&&this.subscription.add((0,l.fromEvent)(Ta,"change").subscribe(e)),e()}this.subscription.add(this.throughput.smoothed$.subscribe((e=>{l.safeStorage.set($a,e.toFixed(0))}))),this.subscription.add(this.rtt.smoothed$.subscribe((e=>{l.safeStorage.set(_a,e.toFixed(0))}))),this.subscription.add(this.throughput.debounced$.subscribe(this.throughput$)),this.subscription.add(this.rtt.debounced$.subscribe(this.rtt$)),this.subscription.add((0,l.combine)({throughput:this.throughput.smoothed$,rtt:this.rtt.smoothed$}).pipe((0,l.map)((({throughput:e,rtt:i})=>xa(e,i,t.rttPenaltyRequestSize))),(0,l.filter)((e=>{let i=this.rttAdjustedThroughput$.getValue()||0;return Math.abs(e-i)/i>=t.changeThreshold}))).subscribe(this.rttAdjustedThroughput$))}},Ca={configName:["core"],throughputEstimator:{type:"EmaAndMa",emaAlphaSlow:.2,emaAlphaFast:.7,emaAlpha:.45,basisTrendChangeCount:10,changeThreshold:.05,useBrowserEstimation:!0,rttPenaltyRequestSize:1048576,streamMinSampleSize:10240,streamMinSampleTime:300,deviationDepth:20,deviationFactor:.5,lowLatency:{continuesByteSequenceInterval:50,maxLastEvaluationTimeout:300}},autoTrackSelection:{bitrateFactorAtEmptyBuffer:1.8,bitrateAudioFactorAtEmptyBuffer:10,bitrateFactorAtFullBuffer:1.2,bitrateAudioFactorAtFullBuffer:7,minVideoAudioRatio:5,minAvailableThroughputAudioRatio:5,usePixelRatio:!0,pixelRatioMultiplier:void 0,pixelRatioLogBase:3,pixelRatioLogCoefficients:[1,0,1],limitByContainer:!0,containerSizeFactor:1.3,lazyQualitySwitch:!0,minBufferToSwitchUp:.4,considerPlaybackRate:!1,trackCooldownIncreaseQuality:3e3,trackCooldownDecreaseQuality:3e3,backgroundVideoQualityLimit:l.VideoQuality.Q_4320P,activeVideoAreaThreshold:.1},droppedFramesChecker:{enabled:!1,percentLimit:.1,checkTime:1e3,countLimit:3,tickCountAfterQualityChange:5,qualityUpWaitingTime:5e3,minQualityBanLimit:l.VideoQuality.Q_480P},dash:{forwardBufferTarget:6e4,forwardBufferTargetAuto:6e4,forwardBufferTargetManual:3e5,forwardBufferTargetPreload:5e3,maxSegmentDurationLeftToSelectNextSegment:3e3,minSafeBufferThreshold:.5,bufferPruningSafeZone:1e3,segmentRequestSize:1048576,representationSwitchForwardBufferGap:3e3,crashOnStallTimeout:25e3,crashOnStallTWithoutDataTimeout:5e3,enableSubSegmentBufferFeeding:!0,bufferEmptinessTolerance:100,useFetchPriorityHints:!0,accumulationBufferStallSize:{shortVideoDuration:12e4,shortVideoBufferStallSize:0,longVideoBufferStallSize:0},qualityLimitsOnStall:{stallDurationBeforeQualityDecrease:0,stallDurationNoDataBeforeQualityDecrease:0,stallCountBeforeQualityDecrease:0,resetQualityRestrictionTimeout:1e4},enableBaseUrlSupport:!0,maxSegmentRetryCount:5},dashCmafLive:{maxActiveLiveOffset:1e4,normalizedTargetMinBufferSize:6e4,normalizedLiveMinBufferSize:5e3,normalizedActualBufferOffset:1e4,offsetCalculationError:3e3,lowLatency:{maxTargetOffset:3e3,maxTargetOffsetDeviation:250,playbackCatchupSpeedup:.05,isActiveOnDefault:!1,delayEstimator:{emaAlpha:.45,changeThreshold:.05,deviationDepth:20,deviationFactor:.5,extremumInterval:5}}},live:{minBuffer:3e3,minBufferSegments:3,lowLatencyMinBuffer:1e3,lowLatencyMinBufferSegments:1,isLiveCatchUpMode:!1,lowLatencyActiveLiveDelay:3e3,activeLiveDelay:5e3,maxPausedTime:5e3},downloadBackoff:{bufferThreshold:100,start:100,factor:2,max:3e3,random:.1},enableWakeLock:!0,enableTelemetryAtStart:!1,forceFormat:void 0,formatsToAvoid:[],disableChromecast:!1,chromecastReceiverId:void 0,useWebmBigRequest:!1,webmCodec:"vp9",androidPreferredFormat:"mpeg",preferCMAF:!1,preferWebRTC:!1,preferMultiStream:!1,preferHDR:!1,bigRequestMinInitSize:51200,bigRequestMinDataSize:1048576,stripRangeHeader:!0,flushShortLoopedBuffers:!0,insufficientBufferRuleMargin:1e4,dashSeekInSegmentDurationThreshold:18e4,dashSeekInSegmentAlwaysSeekDelta:1e4,endGapTolerance:300,stallIgnoreThreshold:33,gapWatchdogInterval:50,requestQuick:!1,useHlsJs:!0,useNativeHLSTextTracks:!1,useManagedMediaSource:!1,useNewSwitchTo:!1,useSafariEndlessRequestBugfix:!1,isAudioDisabled:!1,autoplayOnlyInActiveTab:!0,dynamicImportTimeout:5e3,maxPlaybackTransitionInterval:2e4,providerErrorLimit:3,manifestRetryInterval:300,manifestRetryMaxInterval:1e4,manifestRetryMaxCount:10,audioVideoSyncRate:20,webrtc:{connectionRetryMaxNumber:3},spherical:{enabled:!1,fov:{x:135,y:76},rotationSpeed:45,maxYawAngle:175,rotationSpeedCorrection:10,degreeToPixelCorrection:5,speedFadeTime:2e3,speedFadeThreshold:50},useVolumeMultiplier:!1,ignoreAudioRendererError:!1,useEnableSubtitlesParam:!1,useOldMSEDetection:!1},ka=({seekState:e,position$:t})=>(0,l.merge)(e.stateChangeEnded$.pipe((0,l.map)((({to:e})=>"none"===e.state?void 0:(e.position??NaN)/1e3)),(0,l.filter)(l.isNonNullable)),t.pipe((0,l.filter)((()=>"none"===e.getState().state)))),La=class{initVideo(e){this.config=e;let{container:t,...i}=e;return this.tracer.log("initVideo",(0,l.flattenObject)(i)),this.domContainer=(e=>{let t="string"==typeof e.container?document.getElementById(e.container):e.container;return(0,l.assertNonNullable)(t,`Wrong container or containerId {${e.container}}`),t})(e),this.chromecastInitializer.contentId=e.meta?.videoId,this.providerContainer=new Sa({sources:e.sources,meta:e.meta??{},failoverHosts:e.failoverHosts??[],container:this.domContainer,desiredState:this.desiredState,dependencies:{throughputEstimator:this.throughputEstimator,chromecastInitializer:this.chromecastInitializer,tracer:this.tracer,logger:this.logger,abrLogger:this.abrLogger},tuning:this.tuning,volumeMultiplier:e.volumeMultiplier}),this.initProviderContainerSubscription(this.providerContainer),this.initStartingVideoTrack(this.providerContainer),this.initTracerSubscription(),this.providerContainer.init(),this.setLiveLowLatency(this.tuning.dashCmafLive.lowLatency.isActiveOnDefault),this.setMuted(this.tuning.isAudioDisabled),this.initDebugTelemetry(),this.initWakeLock(),this}destroy(){this.tracer.log("destroy"),window.clearTimeout(this.hasLiveOffsetByPausedTimer),this.events.willDestruct$.next(),this.stop(),this.providerContainer?.destroy(),this.throughputEstimator.destroy(),this.chromecastInitializer.destroy(),this.subscription.unsubscribe(),this.tracer.end()}prepare(){let e=this.desiredState.playbackState;return this.tracer.log("prepare",{currentPlayBackState:e.getState()}),"stopped"===e.getState()&&e.startTransitionTo("ready"),this}play(){let e=()=>{let e=this.desiredState.playbackState;this.tracer.log("play",{currentPlayBackState:e.getState()}),"playing"!==e.getState()&&e.startTransitionTo("playing")};return document.hidden&&this.tuning.autoplayOnlyInActiveTab&&!ur()?(this.tracer.log("request play from hidden tab"),(0,l.fromEvent)(document,"visibilitychange").pipe((0,l.once)()).subscribe(e)):e(),this}pause(){let e=this.desiredState.playbackState;return this.tracer.log("pause",{currentPlayBackState:e.getState()}),"paused"!==e.getState()&&e.startTransitionTo("paused"),this}stop(){let e=this.desiredState.playbackState;return this.tracer.log("stop",{currentPlayBackState:e.getState()}),"stopped"!==e.getState()&&e.startTransitionTo("stopped"),this}seekTime(e,t=!0){let i=this.info.duration$.getValue(),r=this.info.isLive$.getValue(),n=e;return e>=i&&!r&&(n=i-.1),this.tracer.log("seekTime",{duration:i,isLive:r,time:e,calculatedTime:n,forcePrecise:t}),this.events.willSeek$.next({from:this.getExactTime(),to:n}),this.desiredState.seekState.setState({state:"requested",position:1e3*n,forcePrecise:t}),this}seekPercent(e){let t=this.info.duration$.getValue();return this.tracer.log("seekPercent",{percent:e,duration:t}),isFinite(t)&&this.seekTime(Math.abs(t)*e,!1),this}setVolume(e){let t=this.tuning.isAudioDisabled||this.desiredState.volume.getState().muted;return this.tracer.log("setVolume",{volume:e,isAudioDisabled:this.tuning.isAudioDisabled,isDesiredStateMuted:this.desiredState.volume.getState().muted,chromecastState:this.chromecastInitializer.castState$.getValue(),muted:t}),"CONNECTED"===this.chromecastInitializer.castState$.getValue()?this.chromecastInitializer.setVolume(e):this.desiredState.volume.startTransitionTo({volume:e,muted:t}),this}setMuted(e){let t=this.tuning.isAudioDisabled||e;return this.tracer.log("setMuted",{isMuted:e,isAudioDisabled:this.tuning.isAudioDisabled,desiredStateVolume:this.desiredState.volume.getState().volume,chromecastState:this.chromecastInitializer.castState$.getValue(),muted:t}),"CONNECTED"===this.chromecastInitializer.castState$.getValue()?this.chromecastInitializer.setMuted(t):this.desiredState.volume.startTransitionTo({volume:this.desiredState.volume.getState().volume,muted:t}),this}setVideoStream(e){return this.desiredState.videoStream.startTransitionTo(e),this}setAudioStream(e){return this.desiredState.audioStream.startTransitionTo(e),this}setQuality(e){(0,l.assertNonNullable)(this.providerContainer);let t=this.providerContainer.providerOutput.availableVideoTracks$.getValue();return this.tracer.log("setQuality",{isDelayed:0===t.length,quality:e}),void 0===this.desiredState.videoTrack.getState()&&void 0===this.desiredState.videoTrack.getPrevState()&&0===t.length?this.wasSetStartedQuality?this.providerContainer.providerOutput.availableVideoTracks$.pipe((0,l.filter)((e=>e.length>0)),(0,l.once)()).subscribe((t=>{this.setVideoTrackIdByQuality(t,e)})):this.explicitInitialQuality=e:t.length>0&&this.setVideoTrackIdByQuality(t,e),this}setAutoQuality(e){return this.tracer.log("setAutoQuality",{enable:e}),this.desiredState.autoVideoTrackSwitching.startTransitionTo(e),this}setAutoQualityLimits(e){return this.tracer.log("setAutoQualityLimits",(0,l.flattenObject)(e)),this.desiredState.autoVideoTrackLimits.startTransitionTo(e),this}setPlaybackRate(e){(0,l.assertNonNullable)(this.providerContainer);let t=this.providerContainer?.providerOutput.element$.getValue();return this.tracer.log("setPlaybackRate",{playbackRate:e,isVideoElementAvailable:!!t}),t&&(this.desiredState.playbackRate.setState(e),t.playbackRate=e),this}setExternalTextTracks(e){return e.length&&this.tracer.log("setExternalTextTracks",(0,l.flattenObject)(e)),this.desiredState.externalTextTracks.startTransitionTo(e.map((e=>({type:"external",...e})))),this}selectTextTrack(e){return((e,t,i,r)=>{void 0!==e&&void 0===t.getState()&&void 0===t.getPrevState()&&0===i?.getValue().length?i.pipe((0,l.filter)((e=>e.length>0)),(0,l.once)()).subscribe((i=>{i.find(r)&&t.startTransitionTo(e)})):(void 0===e||i?.getValue().find(r))&&t.startTransitionTo(e)})(e,this.desiredState.currentTextTrack,this.providerContainer?.providerOutput.availableTextTracks$,(t=>t.id===e)),this.tracer.log("selectTextTrack",{textTrackId:e}),this}setTextTrackCueSettings(e){return this.tracer.log("setTextTrackCueSettings",{...e}),this.desiredState.textTrackCuesSettings.startTransitionTo(e),this}setLiveLowLatency(e){let t=this.info.isLive$.getValue(),i=this.desiredState.isLowLatency.getState();return t&&i!==e?(this.tracer.log("live switch to low latency "+e),this.desiredState.isLowLatency.setState(e),this.seekTime(0)):this}setLooped(e){return this.tracer.log("setLooped",{isLooped:e}),this.desiredState.isLooped.startTransitionTo(e),this}toggleChromecast(){this.tracer.log("toggleChromecast"),this.chromecastInitializer.toggleConnection()}startCameraManualRotation(e,t){let i=this.getScene3D();return this.tracer.log("startCameraManualRotation",{isScene3DAvailable:!!i,mx:e,my:t}),i&&i.startCameraManualRotation(e,t),this}stopCameraManualRotation(e=!1){let t=this.getScene3D();return this.tracer.log("stopCameraManualRotation",{isScene3DAvailable:!!t,immediate:e}),t&&t.stopCameraManualRotation(e),this}moveCameraFocusPX(e,t){let i=this.getScene3D();if(this.tracer.log("moveCameraFocusPX",{isScene3DAvailable:!!i,dxpx:e,dypx:t}),i){let r=i.getCameraRotation(),n=i.pixelToDegree({x:e,y:t});this.desiredState.cameraOrientation.setState({x:r.x+n.x,y:r.y+n.y})}return this}holdCamera(){let e=this.getScene3D();return e&&e.holdCamera(),this}releaseCamera(){let e=this.getScene3D();return e&&e.releaseCamera(),this}getExactTime(){if(!this.providerContainer)return 0;let e=this.providerContainer.providerOutput.element$.getValue();if((0,l.isNullable)(e))return this.info.position$.getValue();let t=this.desiredState.seekState.getState(),i="none"===t.state?void 0:t.position;return(0,l.isNonNullable)(i)?i/1e3:e.currentTime}getAllLogs(){return this.logger.getAllLogs()}getScene3D(){let e=this.providerContainer?.current$.getValue();if(e?.provider?.scene3D)return e.provider.scene3D}setIntrinsicVideoSize(...e){let t={width:e.reduce(((e,{width:t})=>e||t||0),0),height:e.reduce(((e,{height:t})=>e||t||0),0)};t.width&&t.height&&this.info.intrinsicVideoSize$.next({width:t.width,height:t.height})}initDesiredStateSubscriptions(){this.subscription.add((0,l.merge)(this.desiredState.playbackState.stateChangeStarted$,this.desiredState.playbackState.forceChanged$).pipe((0,l.map)((e=>e.to))).subscribe(this.info.playbackState$)).add(this.desiredState.isLooped.stateChangeEnded$.pipe((0,l.map)((e=>e.to))).subscribe(this.info.isLooped$)).add(this.desiredState.playbackRate.stateChangeEnded$.pipe((0,l.map)((e=>e.to))).subscribe(this.info.currentPlaybackRate$)).add(this.desiredState.autoVideoTrackSwitching.stateChangeEnded$.pipe((0,l.map)((e=>e.to))).subscribe(this.info.isAutoQualityEnabled$)).add(this.desiredState.autoVideoTrackLimits.stateChangeEnded$.pipe((0,l.map)((e=>e.to))).subscribe(this.info.autoQualityLimits$)),this.subscription.add(this.desiredState.playbackState.stateChangeStarted$.pipe((0,l.filter)((({from:e})=>"stopped"===e)),(0,l.once)()).subscribe((()=>{this.initedAt=(0,l.now)(),this.events.inited$.next()}))).add(this.desiredState.playbackState.stateChangeEnded$.subscribe((e=>{switch(e.to){case"ready":this.events.ready$.next();break;case"playing":this.isPlaybackStarted||this.events.started$.next(),this.isPlaybackStarted=!0,this.events.playing$.next();break;case"paused":this.events.paused$.next();break;case"stopped":this.events.stopped$.next()}}))).add(this.desiredState.playbackState.stateChangeStarted$.subscribe((e=>{switch(e.to){case"paused":this.events.willPause$.next();break;case"playing":this.isPlaybackStarted?this.events.willResume$.next():this.events.willStart$.next();break;case"stopped":this.events.willStop$.next()}})))}initProviderContainerSubscription(e){this.subscription.add(e.providerOutput.willSeekEvent$.subscribe((()=>{let e=this.desiredState.seekState.getState();this.tracer.log("willSeekEvent",(0,l.flattenObject)(e)),"requested"===e.state?this.desiredState.seekState.setState({...e,state:"applying"}):this.events.managedError$.next({id:`WillSeekIn${e.state}`,category:l.ErrorCategory.WTF,message:"Received unexpeceted willSeek$"})}))).add(e.providerOutput.soundProhibitedEvent$.pipe((0,l.once)()).subscribe(this.events.autoplaySoundProhibited$)).add(e.providerOutput.seekedEvent$.subscribe((()=>{let e=this.desiredState.seekState.getState();this.tracer.log("seekedEvent",(0,l.flattenObject)(e)),"applying"===e.state&&(this.desiredState.seekState.setState({state:"none"}),this.events.seeked$.next())}))).add(e.current$.pipe((0,l.map)((e=>e.type))).subscribe(this.info.currentFormat$)).add(e.current$.pipe((0,l.map)((e=>e.destination)),(0,l.filterChanged)()).subscribe((()=>this.isPlaybackStarted=!1))).add(e.providerOutput.availableVideoStreams$.subscribe(this.info.availableVideoStreams$)).add(e.providerOutput.availableVideoTracks$.pipe((0,l.map)((e=>e.map((({quality:e})=>e)).sort(((e,t)=>(0,l.isInvariantQuality)(e)?1:(0,l.isInvariantQuality)(t)?-1:(0,l.isHigher)(t,e)?1:-1))))).subscribe(this.info.availableQualities$)).add(e.providerOutput.availableVideoTracks$.subscribe((e=>{let t={};for(let i of e)i.fps&&(t[i.quality]=i.fps);this.info.availableQualitiesFps$.next(t)}))).add(e.providerOutput.availableAudioStreams$.subscribe(this.info.availableAudioStreams$)).add(e.providerOutput.currentVideoStream$.subscribe(this.info.currentVideoStream$)).add(e.providerOutput.currentAudioStream$.subscribe(this.info.currentAudioStream$)).add(e.providerOutput.availableAudioTracks$.subscribe(this.info.availableAudioTracks$)).add(e.providerOutput.isAudioAvailable$.pipe((0,l.filterChanged)()).subscribe(this.info.isAudioAvailable$)).add(e.providerOutput.currentVideoTrack$.subscribe((e=>{this.info.currentQuality$.next(e?.quality),this.info.videoBitrate$.next(e?.bitrate)}))).add(e.providerOutput.currentVideoSegmentLength$.pipe((0,l.filterChanged)(((e,t)=>Math.round(e)===Math.round(t)))).subscribe(this.info.currentVideoSegmentLength$)).add(e.providerOutput.currentAudioSegmentLength$.pipe((0,l.filterChanged)(((e,t)=>Math.round(e)===Math.round(t)))).subscribe(this.info.currentAudioSegmentLength$)).add(e.providerOutput.hostname$.pipe((0,l.filterChanged)()).subscribe(this.info.hostname$)).add(e.providerOutput.httpConnectionType$.pipe((0,l.filterChanged)()).subscribe(this.info.httpConnectionType$)).add(e.providerOutput.httpConnectionReused$.pipe((0,l.filterChanged)()).subscribe(this.info.httpConnectionReused$)).add(e.providerOutput.currentTextTrack$.subscribe(this.info.currentTextTrack$)).add(e.providerOutput.availableTextTracks$.subscribe(this.info.availableTextTracks$)).add(e.providerOutput.autoVideoTrackLimitingAvailable$.subscribe(this.info.autoQualityLimitingAvailable$)).add(e.providerOutput.autoVideoTrackLimits$.subscribe((e=>{this.desiredState.autoVideoTrackLimits.setState(e??{})}))).add(e.providerOutput.currentBuffer$.pipe((0,l.map)((e=>e?{start:e.from,end:e.to}:{start:0,end:0}))).subscribe(this.info.currentBuffer$)).add(e.providerOutput.duration$.subscribe(this.info.duration$)).add(e.providerOutput.isBuffering$.subscribe(this.info.isBuffering$)).add(e.providerOutput.isLive$.subscribe(this.info.isLive$)).add(e.providerOutput.canChangePlaybackSpeed$.subscribe(this.info.canChangePlaybackSpeed$)).add(e.providerOutput.liveTime$.subscribe(this.info.liveTime$)).add(e.providerOutput.liveBufferTime$.subscribe(this.info.liveBufferTime$)).add((0,l.combine)({hasLiveOffsetByPaused:(0,l.merge)(this.desiredState.playbackState.stateChangeStarted$,this.desiredState.playbackState.forceChanged$).pipe((0,l.map)((e=>e.to)),(0,l.filterChanged)(),(0,l.map)((e=>"paused"===e))),isLowLatency:e.providerOutput.isLowLatency$}).subscribe((({hasLiveOffsetByPaused:e,isLowLatency:t})=>{window.clearTimeout(this.hasLiveOffsetByPausedTimer),e?this.hasLiveOffsetByPausedTimer=window.setTimeout((()=>{this.hasLiveOffsetByPaused.next(!0)}),this.getActiveLiveDelay(t)):this.hasLiveOffsetByPaused.next(!1)}))).add((0,l.combine)({atLiveEdge:(0,l.combine)({isLive:e.providerOutput.isLive$,isLowLatency:e.providerOutput.isLowLatency$,position:ka({seekState:this.desiredState.seekState,position$:e.providerOutput.position$})}).pipe((0,l.map)((({isLive:e,position:t,isLowLatency:i})=>{let r=this.getActiveLiveDelay(i);return e&&Math.abs(t)<r/1e3})),(0,l.filterChanged)(),(0,l.tap)((e=>e&&this.setPlaybackRate(1)))),hasPausedTimeoutCase:this.hasLiveOffsetByPaused}).pipe((0,l.map)((({atLiveEdge:e,hasPausedTimeoutCase:t})=>e&&!t))).subscribe(this.info.atLiveEdge$)).add((0,l.combine)({isLive:e.providerOutput.isLive$,position:e.providerOutput.position$,duration:e.providerOutput.duration$}).pipe((0,l.map)((({isLive:e,position:t,duration:i})=>e&&1e3*(Math.abs(i)-Math.abs(t))<this.tuning.live.activeLiveDelay)),(0,l.filterChanged)(),(0,l.tap)((e=>e&&this.setPlaybackRate(1)))).subscribe(this.info.atLiveDurationEdge$)).add(e.providerOutput.volume$.pipe((0,l.map)((e=>e.muted)),(0,l.filterChanged)()).subscribe(this.info.muted$)).add(e.providerOutput.volume$.pipe((0,l.map)((e=>e.volume)),(0,l.filterChanged)()).subscribe(this.info.volume$)).add(ka({seekState:this.desiredState.seekState,position$:e.providerOutput.position$}).subscribe(this.info.position$)).add((0,l.merge)(e.providerOutput.endedEvent$.pipe((0,l.mapTo)(!0)),e.providerOutput.seekedEvent$.pipe((0,l.mapTo)(!1))).pipe((0,l.filterChanged)()).subscribe(this.info.isEnded$)).add(e.providerOutput.endedEvent$.subscribe(this.events.ended$)).add(e.providerOutput.loopedEvent$.subscribe(this.events.looped$)).add(e.providerError$.subscribe(this.events.managedError$)).add(e.volumeMultiplierError$.subscribe(this.events.managedError$)).add(e.noAvailableProvidersError$.pipe((0,l.map)((e=>({id:e?`No${e}`:"NoProviders",category:l.ErrorCategory.VIDEO_PIPELINE,message:e?`${e} was forced but failed or not available`:"No suitable providers or all providers failed"})))).subscribe(this.events.fatalError$)).add(e.providerOutput.element$.subscribe(this.experimental.element$)).add(e.providerOutput.firstBytesEvent$.pipe((0,l.once)(),(0,l.map)((e=>e??(0,l.now)()-this.initedAt))).subscribe(this.events.firstBytes$)).add(e.providerOutput.loadedMetadataEvent$.subscribe(this.events.loadedMetadata$)).add(e.providerOutput.firstFrameEvent$.pipe((0,l.once)(),(0,l.map)((()=>(0,l.now)()-this.initedAt))).subscribe(this.events.firstFrame$)).add(e.providerOutput.canplay$.pipe((0,l.once)(),(0,l.map)((()=>(0,l.now)()-this.initedAt))).subscribe(this.events.canplay$)).add(this.throughputEstimator.throughput$.subscribe(this.info.throughputEstimation$)).add(this.throughputEstimator.rtt$.subscribe(this.info.rttEstimation$)).add(e.providerOutput.availableSources$.subscribe(this.info.availableSources$));let t=new l.ValueSubject(!1);this.subscription.add(e.providerOutput.seekedEvent$.subscribe((()=>t.next(!1)))).add(e.providerOutput.willSeekEvent$.subscribe((()=>t.next(!0))));let i=new l.ValueSubject(!0);this.subscription.add(e.current$.subscribe((()=>i.next(!0)))).add(this.desiredState.playbackState.stateChangeEnded$.pipe((0,l.filter)((({to:e})=>"playing"===e)),(0,l.once)()).subscribe((()=>i.next(!1))));let r=0,n=(0,l.merge)(e.providerOutput.isBuffering$,t,i).pipe((0,l.map)((()=>{let r=e.providerOutput.isBuffering$.getValue(),n=t.getValue()||i.getValue();return r&&!n})),(0,l.filterChanged)());this.subscription.add(n.subscribe((e=>{e?r=window.setTimeout((()=>this.info.isStalled$.next(!0)),this.tuning.stallIgnoreThreshold):(window.clearTimeout(r),this.info.isStalled$.next(!1))}))),this.subscription.add((0,l.merge)(e.providerOutput.canplay$,e.providerOutput.firstFrameEvent$,e.providerOutput.firstBytesEvent$).subscribe((()=>{let t=e.providerOutput.element$.getValue();this.setIntrinsicVideoSize({width:t?.videoWidth,height:t?.videoHeight})}))).add(e.providerOutput.currentVideoTrack$.subscribe((t=>{let i=e.providerOutput.element$.getValue();this.setIntrinsicVideoSize({width:t?.size?.width,height:t?.size?.height},{width:i?.videoWidth,height:i?.videoHeight})}))).add(e.providerOutput.is3DVideo$.subscribe(this.info.is3DVideo$)),this.subscription.add((0,l.merge)(e.providerOutput.inPiP$,e.providerOutput.inFullscreen$,e.providerOutput.element$,e.providerOutput.elementVisible$,this.chromecastInitializer.castState$).subscribe((()=>{let t,i=e.providerOutput.inPiP$.getValue(),r=e.providerOutput.inFullscreen$.getValue(),n=e.providerOutput.element$.getValue(),a=e.providerOutput.elementVisible$.getValue();t="CONNECTED"===this.chromecastInitializer.castState$.getValue()?"second_screen":n?a?i?"pip":r?"fullscreen":"inline":"invisible":"none",this.info.surface$.getValue()!==t&&this.info.surface$.next(t)})))}initChromecastSubscription(){this.subscription.add(this.chromecastInitializer.castState$.subscribe(this.info.chromecastState$)),this.subscription.add(this.chromecastInitializer.connection$.pipe((0,l.map)((e=>e?.castDevice.friendlyName))).subscribe(this.info.chromecastDeviceName$)),this.subscription.add(this.chromecastInitializer.errorEvent$.subscribe(this.events.managedError$))}initStartingVideoTrack(e){let t=new l.Subscription;this.subscription.add(t),this.subscription.add(e.current$.pipe((0,l.filterChanged)(((e,t)=>e.provider===t.provider))).subscribe((()=>{t.unsubscribe(),t.add(e.providerOutput.availableVideoTracks$.pipe((0,l.filter)((e=>e.length>0)),(0,l.once)()).subscribe((e=>{this.setStartingVideoTrack(e)})))})))}setStartingVideoTrack(e){let t;this.wasSetStartedQuality=!0;let i=this.explicitInitialQuality??this.desiredState.videoTrack.getState()?.quality;i&&(t=e.find((({quality:e})=>e===i)),t||this.setAutoQuality(!0)),t||(t=Ki(e,{container:this.domContainer.getBoundingClientRect(),estimatedThroughput:this.throughputEstimator.throughput$.getValue(),tuning:this.tuning.autoTrackSelection,limits:this.desiredState.autoVideoTrackLimits.getState(),playbackRate:this.info.currentPlaybackRate$.getValue(),forwardBufferHealth:0,abrLogger:this.abrLogger})),this.desiredState.videoTrack.startTransitionTo(t),this.info.currentQuality$.next(t.quality),this.info.videoBitrate$.next(t.bitrate)}initLogs(){this.subscription.add((0,l.merge)(this.desiredState.videoTrack.stateChangeStarted$.pipe((0,l.map)((e=>({transition:e,entity:"quality",type:"start"})))),this.desiredState.videoTrack.stateChangeEnded$.pipe((0,l.map)((e=>({transition:e,entity:"quality",type:"end"})))),this.desiredState.autoVideoTrackSwitching.stateChangeStarted$.pipe((0,l.map)((e=>({transition:e,entity:"autoQualityEnabled",type:"start"})))),this.desiredState.autoVideoTrackSwitching.stateChangeEnded$.pipe((0,l.map)((e=>({transition:e,entity:"autoQualityEnabled",type:"end"})))),this.desiredState.seekState.stateChangeStarted$.pipe((0,l.map)((e=>({transition:e,entity:"seekState",type:"start"})))),this.desiredState.seekState.stateChangeEnded$.pipe((0,l.map)((e=>({transition:e,entity:"seekState",type:"end"})))),this.desiredState.playbackState.stateChangeStarted$.pipe((0,l.map)((e=>({transition:e,entity:"playbackState",type:"start"})))),this.desiredState.playbackState.stateChangeEnded$.pipe((0,l.map)((e=>({transition:e,entity:"playbackState",type:"end"}))))).pipe((0,l.map)((e=>({component:"desiredState",message:`[${e.entity} change] ${e.type}: ${JSON.stringify(e.transition)}`})))).subscribe(this.logger.log)),this.subscription.add(this.logger.log$.subscribe(this.events.log$))}initDebugTelemetry(){let e=this.providerContainer?.providerOutput;(0,l.assertNonNullable)(this.providerContainer),(0,l.assertNonNullable)(e),Di={},this.experimental.enableDebugTelemetry$.next(this.tuning.enableTelemetryAtStart),[this.experimental.enableDebugTelemetry$.subscribe((e=>{Vi=e})),this.providerContainer.current$.subscribe((({type:e})=>Ui("provider",e))),e.duration$.subscribe((e=>Ui("duration",e))),e.availableVideoTracks$.pipe((0,l.filter)((e=>!!e.length)),(0,l.once)()).subscribe((e=>Ui("tracks",e))),this.events.fatalError$.subscribe(new Fi("fatalError")),this.events.managedError$.subscribe(new Fi("managedError")),e.position$.subscribe(new Fi("position")),e.currentVideoTrack$.pipe((0,l.map)((e=>e?.quality))).subscribe(new Fi("quality")),this.info.currentBuffer$.subscribe(new Fi("buffer")),e.isBuffering$.subscribe(new Fi("isBuffering"))].forEach((e=>this.subscription.add(e))),Ui("codecs",Object.keys(Pr).filter((e=>Pr[e])))}initTracerSubscription(){let e=(0,l.getTraceSubscriptionMethod)(this.tracer.log.bind(this.tracer)),t=(0,l.getTraceSubscriptionMethod)(this.tracer.error.bind(this.tracer));this.subscription.add(this.info.playbackState$.subscribe(e("playbackState"))).add(this.info.isLooped$.subscribe(e("isLooped"))).add(this.info.currentPlaybackRate$.pipe((0,l.filterChanged)()).subscribe(e("currentPlaybackRate"))).add(this.info.isAutoQualityEnabled$.subscribe(e("isAutoQualityEnabled"))).add(this.info.autoQualityLimits$.subscribe(e("autoQualityLimits"))).add(this.info.currentFormat$.subscribe(e("currentFormat"))).add(this.info.availableQualities$.subscribe(e("availableQualities"))).add(this.info.availableQualitiesFps$.subscribe(e("availableQualitiesFps"))).add(this.info.availableAudioTracks$.subscribe(e("availableAudioTracks"))).add(this.info.isAudioAvailable$.subscribe(e("isAudioAvailable"))).add((0,l.combine)({currentQuality:this.info.currentQuality$,videoBitrate:this.info.videoBitrate$}).pipe((0,l.filter)((({currentQuality:e,videoBitrate:t})=>!!e&&!!t)),(0,l.filterChanged)(((e,t)=>e.currentQuality===t.currentQuality))).subscribe(e("currentVideoTrack"))).add(this.info.currentVideoSegmentLength$.pipe((0,l.filter)((e=>e>0)),(0,l.filterChanged)()).subscribe(e("currentVideoSegmentLength"))).add(this.info.currentAudioSegmentLength$.pipe((0,l.filter)((e=>e>0)),(0,l.filterChanged)()).subscribe(e("currentAudioSegmentLength"))).add(this.info.hostname$.subscribe(e("hostname"))).add(this.info.currentTextTrack$.subscribe(e("currentTextTrack"))).add(this.info.availableTextTracks$.subscribe(e("availableTextTracks"))).add(this.info.autoQualityLimitingAvailable$.subscribe(e("autoQualityLimitingAvailable"))).add((0,l.combine)({currentBuffer:this.info.currentBuffer$.pipe((0,l.filter)((e=>e.end>0)),(0,l.filterChanged)(((e,t)=>e.end===t.end&&e.start===t.start))),position:this.info.position$.pipe((0,l.filterChanged)())}).pipe((0,l.throttle)(1e3)).subscribe(e("currentBufferAndPosition"))).add(this.info.duration$.pipe((0,l.filterChanged)()).subscribe(e("duration"))).add(this.info.isBuffering$.subscribe(e("isBuffering"))).add(this.info.isLive$.pipe((0,l.filterChanged)()).subscribe(e("isLive"))).add(this.info.canChangePlaybackSpeed$.pipe((0,l.filterChanged)()).subscribe(e("canChangePlaybackSpeed"))).add((0,l.combine)({liveTime:this.info.liveTime$,liveBufferTime:this.info.liveBufferTime$,position:this.info.position$}).pipe((0,l.filter)((({liveTime:e,liveBufferTime:t})=>!!e&&!!t)),(0,l.throttle)(1e3)).subscribe(e("liveBufferAndPosition"))).add(this.info.atLiveEdge$.pipe((0,l.filterChanged)(),(0,l.filter)((e=>!0===e))).subscribe(e("atLiveEdge"))).add(this.info.atLiveDurationEdge$.pipe((0,l.filterChanged)(),(0,l.filter)((e=>!0===e))).subscribe(e("atLiveDurationEdge"))).add(this.info.muted$.pipe((0,l.filterChanged)()).subscribe(e("muted"))).add(this.info.volume$.pipe((0,l.filterChanged)()).subscribe(e("volume"))).add(this.info.isEnded$.pipe((0,l.filterChanged)(),(0,l.filter)((e=>!0===e))).subscribe(e("isEnded"))).add(this.info.availableSources$.subscribe(e("availableSources"))).add((0,l.combine)({throughputEstimation:this.info.throughputEstimation$,rtt:this.info.rttEstimation$}).pipe((0,l.filter)((({throughputEstimation:e,rtt:t})=>!!e&&!!t)),(0,l.throttle)(3e3)).subscribe(e("throughputEstimation"))).add(this.info.isStalled$.subscribe(e("isStalled"))).add(this.info.is3DVideo$.pipe((0,l.filterChanged)(),(0,l.filter)((e=>!0===e))).subscribe(e("is3DVideo"))).add(this.info.surface$.subscribe(e("surface"))).add(this.events.ended$.subscribe(e("ended"))).add(this.events.looped$.subscribe(e("looped"))).add(this.events.managedError$.subscribe(t("managedError"))).add(this.events.fatalError$.subscribe(t("fatalError"))).add(this.events.firstBytes$.subscribe(e("firstBytes"))).add(this.events.firstFrame$.subscribe(e("firstFrame"))).add(this.events.canplay$.subscribe(e("canplay")))}initWakeLock(){if(!window.navigator.wakeLock||!this.tuning.enableWakeLock)return;let e,t=()=>{e?.release(),e=void 0},i=async()=>{t(),e=await window.navigator.wakeLock.request("screen").catch((e=>{e instanceof DOMException&&"NotAllowedError"===e.name||this.events.managedError$.next({id:"WakeLock",category:l.ErrorCategory.DOM,message:String(e)})}))};this.subscription.add((0,l.merge)((0,l.fromEvent)(document,"visibilitychange"),(0,l.fromEvent)(document,"fullscreenchange"),this.desiredState.playbackState.stateChangeEnded$).subscribe((()=>{let r="visible"===document.visibilityState,n="playing"===this.desiredState.playbackState.getState();r&&n?!!e&&!e?.released||i():t()}))).add(this.events.willDestruct$.subscribe(t))}setVideoTrackIdByQuality(e,t){let i=e.find((e=>e.quality===t));this.tracer.log("setVideoTrackIdByQuality",(0,l.flattenObject)({quality:t,availableTracks:(0,l.flattenObject)(e),track:(0,l.flattenObject)(i),isAutoQuality:!i})),i?this.desiredState.videoTrack.startTransitionTo(i):this.setAutoQuality(!0)}getActiveLiveDelay(e=!1){return e?this.tuning.live.lowLatencyActiveLiveDelay:this.tuning.live.activeLiveDelay}constructor(e={configName:[]},t=l.Tracer.createRootTracer(!1)){if(this.subscription=new l.Subscription,this.logger=new l.Logger,this.abrLogger=this.logger.createComponentLog("ABR"),this.isPlaybackStarted=!1,this.hasLiveOffsetByPaused=new l.ValueSubject(!1),this.hasLiveOffsetByPausedTimer=0,this.wasSetStartedQuality=!1,this.desiredState={playbackState:new bi("stopped"),seekState:new bi({state:"none"}),volume:new bi({volume:1,muted:!1}),videoTrack:new bi(void 0),videoStream:new bi(void 0),audioStream:new bi(void 0),autoVideoTrackSwitching:new bi(!0),autoVideoTrackLimits:new bi({}),isLooped:new bi(!1),isLowLatency:new bi(!1),playbackRate:new bi(1),externalTextTracks:new bi([]),internalTextTracks:new bi([]),currentTextTrack:new bi(void 0),textTrackCuesSettings:new bi({}),cameraOrientation:new bi({x:0,y:0})},this.info={playbackState$:new l.ValueSubject("stopped"),position$:new l.ValueSubject(0),duration$:new l.ValueSubject(1/0),muted$:new l.ValueSubject(!1),volume$:new l.ValueSubject(1),availableVideoStreams$:new l.ValueSubject([]),currentVideoStream$:new l.ValueSubject(void 0),availableQualities$:new l.ValueSubject([]),availableQualitiesFps$:new l.ValueSubject({}),currentQuality$:new l.ValueSubject(void 0),isAutoQualityEnabled$:new l.ValueSubject(!0),autoQualityLimitingAvailable$:new l.ValueSubject(!1),autoQualityLimits$:new l.ValueSubject({}),availableAudioStreams$:new l.ValueSubject([]),currentAudioStream$:new l.ValueSubject(void 0),availableAudioTracks$:new l.ValueSubject([]),isAudioAvailable$:new l.ValueSubject(!0),currentPlaybackRate$:new l.ValueSubject(1),currentBuffer$:new l.ValueSubject({start:0,end:0}),isBuffering$:new l.ValueSubject(!0),isStalled$:new l.ValueSubject(!1),isEnded$:new l.ValueSubject(!1),isLooped$:new l.ValueSubject(!1),isLive$:new l.ValueSubject(void 0),canChangePlaybackSpeed$:new l.ValueSubject(void 0),atLiveEdge$:new l.ValueSubject(void 0),atLiveDurationEdge$:new l.ValueSubject(void 0),liveTime$:new l.ValueSubject(void 0),liveBufferTime$:new l.ValueSubject(void 0),currentFormat$:new l.ValueSubject(void 0),availableTextTracks$:new l.ValueSubject([]),currentTextTrack$:new l.ValueSubject(void 0),throughputEstimation$:new l.ValueSubject(void 0),rttEstimation$:new l.ValueSubject(void 0),videoBitrate$:new l.ValueSubject(void 0),hostname$:new l.ValueSubject(void 0),httpConnectionType$:new l.ValueSubject(void 0),httpConnectionReused$:new l.ValueSubject(void 0),surface$:new l.ValueSubject("none"),chromecastState$:new l.ValueSubject("NOT_AVAILABLE"),chromecastDeviceName$:new l.ValueSubject(void 0),intrinsicVideoSize$:new l.ValueSubject(void 0),availableSources$:new l.ValueSubject(void 0),is3DVideo$:new l.ValueSubject(!1),currentVideoSegmentLength$:new l.ValueSubject(0),currentAudioSegmentLength$:new l.ValueSubject(0)},this.events={inited$:new l.Subject,ready$:new l.Subject,started$:new l.Subject,playing$:new l.Subject,paused$:new l.Subject,stopped$:new l.Subject,willStart$:new l.Subject,willResume$:new l.Subject,willPause$:new l.Subject,willStop$:new l.Subject,willDestruct$:new l.Subject,watchCoverageRecord$:new l.Subject,watchCoverageLive$:new l.Subject,managedError$:new l.Subject,fatalError$:new l.Subject,ended$:new l.Subject,looped$:new l.Subject,seeked$:new l.Subject,willSeek$:new l.Subject,autoplaySoundProhibited$:new l.Subject,firstBytes$:new l.Subject,loadedMetadata$:new l.Subject,firstFrame$:new l.Subject,canplay$:new l.Subject,log$:new l.Subject},this.experimental={element$:new l.ValueSubject(void 0),tuningConfigName$:new l.ValueSubject([]),enableDebugTelemetry$:new l.ValueSubject(!1),dumpTelemetry:Bi},this.initLogs(),this.tuning=(i=e,{...(0,l.fillWithDefault)(i,Ca),configName:[...i.configName??[],...Ca.configName]}),this.tracer=t,this.experimental.tuningConfigName$.next(this.tuning.configName),this.chromecastInitializer=new di({receiverApplicationId:e.chromecastReceiverId,isDisabled:e.disableChromecast,dependencies:{logger:this.logger}}),this.throughputEstimator=new Aa(this.tuning.throughputEstimator),this.initChromecastSubscription(),this.initDesiredStateSubscriptions(),Proxy&&Reflect)return new Proxy(this,{get:(e,t,i)=>{let r=Reflect.get(e,t,i);return"function"!=typeof r?r:(...i)=>{try{return r.apply(e,i)}catch(e){let r=i.map((e=>JSON.stringify(e,((e,t)=>{let i=typeof t;return["number","string","boolean"].includes(i)?t:null===t?null:`<${i}>`})))),n=`Player.${String(t)}`,a=`Exception calling ${n} (${r.join(", ")})`;throw this.events.fatalError$.next({id:n,category:l.ErrorCategory.WTF,message:a,thrown:e}),e}}}});var i}},Ra=`@vkontakte/videoplayer-core@${ai}`},819705:(e,t,i)=>{i.d(t,{ErrorCategory:()=>D$,InterfaceLanguage:()=>Z$,Logger:()=>ot,Observable:()=>at,Subject:()=>st,Subscription:()=>tt,Tracer:()=>_S,VERSION:()=>et,ValueSubject:()=>h$,VideoQuality:()=>WS,abortable:()=>kS,addScript:()=>AS,assertNever:()=>it,assertNonNullable:()=>TS,assertNotEmptyArray:()=>xS,checkNever:()=>rt,clearVideoElement:()=>u$,clientChecker:()=>RS,cloneDeepWith:()=>s$,combine:()=>f$,createURL:()=>d$,debounce:()=>$$,debounceFn:()=>n$,detectEmbed:()=>qS,fillWithDefault:()=>r$,filter:()=>x$,filterChanged:()=>C$,flattenObject:()=>l$,fromEvent:()=>y$,getExponentialDelay:()=>PS,getHighestQuality:()=>ZS,getTraceSubscriptionMethod:()=>p$,interval:()=>v$,isHigher:()=>QS,isHigherOrEqual:()=>YS,isInvariantQuality:()=>i$,isLower:()=>KS,isLowerOrEqual:()=>XS,isMobile:()=>LS,isNonNullable:()=>wS,isNullable:()=>ES,isValidURL:()=>c$,loadVKLangPack:()=>Y$,map:()=>R$,mapTo:()=>O$,merge:()=>m$,noop:()=>nt,now:()=>CS,observableFrom:()=>b$,observeElementSize:()=>o$,once:()=>M$,safeStorage:()=>OS,tap:()=>I$,throttle:()=>w$,throttleFn:()=>a$,timeout:()=>g$,videoQualityToHeight:()=>t$,videoSizeToQuality:()=>e$});var r=i(734318),n=i(241844),a=Object.create,s=Object.defineProperty,o=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),p=d(((e,t)=>{t.exports=function(e){try{return!!e()}catch{return!0}}})),h=d(((e,t)=>{var i=p();t.exports=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))})),f=d(((e,t)=>{var i=h(),r=Function.prototype,n=r.call,a=i&&r.bind.bind(n,n);t.exports=i?a:function(e){return function(){return n.apply(e,arguments)}}})),m=d(((e,t)=>{var i=f(),r=i({}.toString),n=i("".slice);t.exports=function(e){return n(r(e),8,-1)}})),g=d(((e,t)=>{var i=f(),r=p(),n=m(),a=Object,s=i("".split);t.exports=r((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"===n(e)?s(e,""):a(e)}:a})),v=d(((e,t)=>{t.exports=function(e){return null==e}})),b=d(((e,t)=>{var i=v(),r=TypeError;t.exports=function(e){if(i(e))throw new r("Can't call method on "+e);return e}})),y=d(((e,t)=>{var i=g(),r=b();t.exports=function(e){return i(r(e))}})),S=d(((e,t)=>{t.exports=function(){}})),$=d(((e,t)=>{t.exports={}})),_=d(((e,t)=>{var i=function(e){return e&&e.Math===Math&&e};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof global&&global)||i("object"==typeof e&&e)||function(){return this}()||Function("return this")()})),T=d(((e,t)=>{var i="object"==typeof document&&document.all;t.exports=typeof i>"u"&&void 0!==i?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}})),w=d(((e,t)=>{var i=_(),r=T(),n=i.WeakMap;t.exports=r(n)&&/native code/.test(String(n))})),E=d(((e,t)=>{var i=T();t.exports=function(e){return"object"==typeof e?null!==e:i(e)}})),x=d(((e,t)=>{var i=p();t.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))})),A=d(((e,t)=>{var i=_(),r=E(),n=i.document,a=r(n)&&r(n.createElement);t.exports=function(e){return a?n.createElement(e):{}}})),C=d(((e,t)=>{var i=x(),r=p(),n=A();t.exports=!i&&!r((function(){return 7!==Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))})),k=d(((e,t)=>{var i=x(),r=p();t.exports=i&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))})),L=d(((e,t)=>{var i=E(),r=String,n=TypeError;t.exports=function(e){if(i(e))return e;throw new n(r(e)+" is not an object")}})),R=d(((e,t)=>{var i=h(),r=Function.prototype.call;t.exports=i?r.bind(r):function(){return r.apply(r,arguments)}})),P=d(((e,t)=>{t.exports={}})),O=d(((e,t)=>{var i=P(),r=_(),n=T(),a=function(e){return n(e)?e:void 0};t.exports=function(e,t){return arguments.length<2?a(i[e])||a(r[e]):i[e]&&i[e][t]||r[e]&&r[e][t]}})),M=d(((e,t)=>{var i=f();t.exports=i({}.isPrototypeOf)})),I=d(((e,t)=>{var i=_().navigator,r=i&&i.userAgent;t.exports=r?String(r):""})),N=d(((e,t)=>{var i,r,n=_(),a=I(),s=n.process,o=n.Deno,l=s&&s.versions||o&&o.version,u=l&&l.v8;u&&(r=(i=u.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&a&&((!(i=a.match(/Edge\/(\d+)/))||i[1]>=74)&&((i=a.match(/Chrome\/(\d+)/))&&(r=+i[1]))),t.exports=r})),V=d(((e,t)=>{var i=N(),r=p(),n=_().String;t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol("symbol detection");return!n(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))})),D=d(((e,t)=>{var i=V();t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator})),B=d(((e,t)=>{var i=O(),r=T(),n=M(),a=D(),s=Object;t.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return r(t)&&n(t.prototype,s(e))}})),U=d(((e,t)=>{var i=String;t.exports=function(e){try{return i(e)}catch{return"Object"}}})),F=d(((e,t)=>{var i=T(),r=U(),n=TypeError;t.exports=function(e){if(i(e))return e;throw new n(r(e)+" is not a function")}})),j=d(((e,t)=>{var i=F(),r=v();t.exports=function(e,t){var n=e[t];return r(n)?void 0:i(n)}})),H=d(((e,t)=>{var i=R(),r=T(),n=E(),a=TypeError;t.exports=function(e,t){var s,o;if("string"===t&&r(s=e.toString)&&!n(o=i(s,e))||r(s=e.valueOf)&&!n(o=i(s,e))||"string"!==t&&r(s=e.toString)&&!n(o=i(s,e)))return o;throw new a("Can't convert object to primitive value")}})),z=d(((e,t)=>{t.exports=!0})),q=d(((e,t)=>{var i=_(),r=Object.defineProperty;t.exports=function(e,t){try{r(i,e,{value:t,configurable:!0,writable:!0})}catch{i[e]=t}return t}})),W=d(((e,t)=>{var i=z(),r=_(),n=q(),a="__core-js_shared__",s=t.exports=r[a]||n(a,{});(s.versions||(s.versions=[])).push({version:"3.38.0",mode:i?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.0/LICENSE",source:"https://github.com/zloirock/core-js"})})),G=d(((e,t)=>{var i=W();t.exports=function(e,t){return i[e]||(i[e]=t||{})}})),Q=d(((e,t)=>{var i=b(),r=Object;t.exports=function(e){return r(i(e))}})),Y=d(((e,t)=>{var i=f(),r=Q(),n=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(e,t){return n(r(e),t)}})),K=d(((e,t)=>{var i=f(),r=0,n=Math.random(),a=i(1..toString);t.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++r+n,36)}})),X=d(((e,t)=>{var i=_(),r=G(),n=Y(),a=K(),s=V(),o=D(),l=i.Symbol,u=r("wks"),c=o?l.for||l:l&&l.withoutSetter||a;t.exports=function(e){return n(u,e)||(u[e]=s&&n(l,e)?l[e]:c("Symbol."+e)),u[e]}})),Z=d(((e,t)=>{var i=R(),r=E(),n=B(),a=j(),s=H(),o=X(),l=TypeError,u=o("toPrimitive");t.exports=function(e,t){if(!r(e)||n(e))return e;var o,c=a(e,u);if(c){if(void 0===t&&(t="default"),o=i(c,e,t),!r(o)||n(o))return o;throw new l("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}})),J=d(((e,t)=>{var i=Z(),r=B();t.exports=function(e){var t=i(e,"string");return r(t)?t:t+""}})),ee=d((e=>{var t=x(),i=C(),r=k(),n=L(),a=J(),s=TypeError,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u="enumerable",c="configurable",d="writable";e.f=t?r?function(e,t,i){if(n(e),t=a(t),n(i),"function"==typeof e&&"prototype"===t&&"value"in i&&d in i&&!i[d]){var r=l(e,t);r&&r[d]&&(e[t]=i.value,i={configurable:c in i?i[c]:r[c],enumerable:u in i?i[u]:r[u],writable:!1})}return o(e,t,i)}:o:function(e,t,r){if(n(e),t=a(t),n(r),i)try{return o(e,t,r)}catch{}if("get"in r||"set"in r)throw new s("Accessors not supported");return"value"in r&&(e[t]=r.value),e}})),te=d(((e,t)=>{t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}})),ie=d(((e,t)=>{var i=x(),r=ee(),n=te();t.exports=i?function(e,t,i){return r.f(e,t,n(1,i))}:function(e,t,i){return e[t]=i,e}})),re=d(((e,t)=>{var i=G(),r=K(),n=i("keys");t.exports=function(e){return n[e]||(n[e]=r(e))}})),ne=d(((e,t)=>{t.exports={}})),ae=d(((e,t)=>{var i,r,n,a,s,o=w(),l=_(),u=E(),c=ie(),d=Y(),p=W(),h=re(),f=ne(),m="Object already initialized",g=l.TypeError,v=l.WeakMap;o||p.state?((a=p.state||(p.state=new v)).get=a.get,a.has=a.has,a.set=a.set,i=function(e,t){if(a.has(e))throw new g(m);return t.facade=e,a.set(e,t),t},r=function(e){return a.get(e)||{}},n=function(e){return a.has(e)}):(f[s=h("state")]=!0,i=function(e,t){if(d(e,s))throw new g(m);return t.facade=e,c(e,s,t),t},r=function(e){return d(e,s)?e[s]:{}},n=function(e){return d(e,s)}),t.exports={set:i,get:r,has:n,enforce:function(e){return n(e)?r(e):i(e,{})},getterFor:function(e){return function(t){var i;if(!u(t)||(i=r(t)).type!==e)throw new g("Incompatible receiver, "+e+" required");return i}}}})),se=d(((e,t)=>{var i=h(),r=Function.prototype,n=r.apply,a=r.call;t.exports="object"==typeof Reflect&&Reflect.apply||(i?a.bind(n):function(){return a.apply(n,arguments)})})),oe=d(((e,t)=>{var i=m(),r=f();t.exports=function(e){if("Function"===i(e))return r(e)}})),le=d((e=>{var t={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!t.call({1:2},1);e.f=r?function(e){var t=i(this,e);return!!t&&t.enumerable}:t})),ue=d((e=>{var t=x(),i=R(),r=le(),n=te(),a=y(),s=J(),o=Y(),l=C(),u=Object.getOwnPropertyDescriptor;e.f=t?u:function(e,t){if(e=a(e),t=s(t),l)try{return u(e,t)}catch{}if(o(e,t))return n(!i(r.f,e,t),e[t])}})),ce=d(((e,t)=>{var i=p(),r=T(),n=/#|\.prototype\./,a=function(e,t){var n=o[s(e)];return n===u||n!==l&&(r(t)?i(t):!!t)},s=a.normalize=function(e){return String(e).replace(n,".").toLowerCase()},o=a.data={},l=a.NATIVE="N",u=a.POLYFILL="P";t.exports=a})),de=d(((e,t)=>{var i=oe(),r=F(),n=h(),a=i(i.bind);t.exports=function(e,t){return r(e),void 0===t?e:n?a(e,t):function(){return e.apply(t,arguments)}}})),pe=d(((e,t)=>{var i=_(),r=se(),n=oe(),a=T(),s=ue().f,o=ce(),l=P(),u=de(),c=ie(),d=Y();W();var p=function(e){var t=function(i,n,a){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(i);case 2:return new e(i,n)}return new e(i,n,a)}return r(e,this,arguments)};return t.prototype=e.prototype,t};t.exports=function(e,t){var r,h,f,m,g,v,b,y,S,$=e.target,_=e.global,T=e.stat,w=e.proto,E=_?i:T?i[$]:i[$]&&i[$].prototype,x=_?l:l[$]||c(l,$,{})[$],A=x.prototype;for(m in t)h=!(r=o(_?m:$+(T?".":"#")+m,e.forced))&&E&&d(E,m),v=x[m],h&&(e.dontCallGetSet?b=(S=s(E,m))&&S.value:b=E[m]),g=h&&b?b:t[m],(r||w||typeof v!=typeof g)&&(y=e.bind&&h?u(g,i):e.wrap&&h?p(g):w&&a(g)?n(g):g,(e.sham||g&&g.sham||v&&v.sham)&&c(y,"sham",!0),c(x,m,y),w&&(d(l,f=$+"Prototype")||c(l,f,{}),c(l[f],m,g),e.real&&A&&(r||!A[m])&&c(A,m,g)))}})),he=d(((e,t)=>{var i=x(),r=Y(),n=Function.prototype,a=i&&Object.getOwnPropertyDescriptor,s=r(n,"name"),o=s&&"something"===function(){}.name,l=s&&(!i||i&&a(n,"name").configurable);t.exports={EXISTS:s,PROPER:o,CONFIGURABLE:l}})),fe=d(((e,t)=>{var i=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(e){var t=+e;return(t>0?r:i)(t)}})),me=d(((e,t)=>{var i=fe();t.exports=function(e){var t=+e;return t!=t||0===t?0:i(t)}})),ge=d(((e,t)=>{var i=me(),r=Math.max,n=Math.min;t.exports=function(e,t){var a=i(e);return a<0?r(a+t,0):n(a,t)}})),ve=d(((e,t)=>{var i=me(),r=Math.min;t.exports=function(e){var t=i(e);return t>0?r(t,9007199254740991):0}})),be=d(((e,t)=>{var i=ve();t.exports=function(e){return i(e.length)}})),ye=d(((e,t)=>{var i=y(),r=ge(),n=be(),a=function(e){return function(t,a,s){var o=i(t),l=n(o);if(0===l)return!e&&-1;var u,c=r(s,l);if(e&&a!=a){for(;l>c;)if((u=o[c++])!=u)return!0}else for(;l>c;c++)if((e||c in o)&&o[c]===a)return e||c||0;return!e&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}})),Se=d(((e,t)=>{var i=f(),r=Y(),n=y(),a=ye().indexOf,s=ne(),o=i([].push);t.exports=function(e,t){var i,l=n(e),u=0,c=[];for(i in l)!r(s,i)&&r(l,i)&&o(c,i);for(;t.length>u;)r(l,i=t[u++])&&(~a(c,i)||o(c,i));return c}})),$e=d(((e,t)=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]})),_e=d(((e,t)=>{var i=Se(),r=$e();t.exports=Object.keys||function(e){return i(e,r)}})),Te=d((e=>{var t=x(),i=k(),r=ee(),n=L(),a=y(),s=_e();e.f=t&&!i?Object.defineProperties:function(e,t){n(e);for(var i,o=a(t),l=s(t),u=l.length,c=0;u>c;)r.f(e,i=l[c++],o[i]);return e}})),we=d(((e,t)=>{var i=O();t.exports=i("document","documentElement")})),Ee=d(((e,t)=>{var i,r=L(),n=Te(),a=$e(),s=ne(),o=we(),l=A(),u=re(),c="prototype",d="script",p=u("IE_PROTO"),h=function(){},f=function(e){return"<"+d+">"+e+"</"+d+">"},m=function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t},g=function(){try{i=new ActiveXObject("htmlfile")}catch{}g=typeof document<"u"?document.domain&&i?m(i):function(){var e,t=l("iframe"),i="java"+d+":";return t.style.display="none",o.appendChild(t),t.src=String(i),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F}():m(i);for(var e=a.length;e--;)delete g[c][a[e]];return g()};s[p]=!0,t.exports=Object.create||function(e,t){var i;return null!==e?(h[c]=r(e),i=new h,h[c]=null,i[p]=e):i=g(),void 0===t?i:n.f(i,t)}})),xe=d(((e,t)=>{var i=p();t.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))})),Ae=d(((e,t)=>{var i=Y(),r=T(),n=Q(),a=re(),s=xe(),o=a("IE_PROTO"),l=Object,u=l.prototype;t.exports=s?l.getPrototypeOf:function(e){var t=n(e);if(i(t,o))return t[o];var a=t.constructor;return r(a)&&t instanceof a?a.prototype:t instanceof l?u:null}})),Ce=d(((e,t)=>{var i=ie();t.exports=function(e,t,r,n){return n&&n.enumerable?e[t]=r:i(e,t,r),e}})),ke=d(((e,t)=>{var i,r,n,a=p(),s=T(),o=E(),l=Ee(),u=Ae(),c=Ce(),d=X(),h=z(),f=d("iterator"),m=!1;[].keys&&("next"in(n=[].keys())?(r=u(u(n)))!==Object.prototype&&(i=r):m=!0),!o(i)||a((function(){var e={};return i[f].call(e)!==e}))?i={}:h&&(i=l(i)),s(i[f])||c(i,f,(function(){return this})),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:m}})),Le=d(((e,t)=>{var i={};i[X()("toStringTag")]="z",t.exports="[object z]"===String(i)})),Re=d(((e,t)=>{var i=Le(),r=T(),n=m(),a=X()("toStringTag"),s=Object,o="Arguments"===n(function(){return arguments}());t.exports=i?n:function(e){var t,i,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch{}}(t=s(e),a))?i:o?n(t):"Object"===(l=n(t))&&r(t.callee)?"Arguments":l}})),Pe=d(((e,t)=>{var i=Le(),r=Re();t.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}})),Oe=d(((e,t)=>{var i=Le(),r=ee().f,n=ie(),a=Y(),s=Pe(),o=X()("toStringTag");t.exports=function(e,t,l,u){var c=l?e:e&&e.prototype;c&&(a(c,o)||r(c,o,{configurable:!0,value:t}),u&&!i&&n(c,"toString",s))}})),Me=d(((e,t)=>{var i=ke().IteratorPrototype,r=Ee(),n=te(),a=Oe(),s=$(),o=function(){return this};t.exports=function(e,t,l,u){var c=t+" Iterator";return e.prototype=r(i,{next:n(+!u,l)}),a(e,c,!1,!0),s[c]=o,e}})),Ie=d(((e,t)=>{var i=f(),r=F();t.exports=function(e,t,n){try{return i(r(Object.getOwnPropertyDescriptor(e,t)[n]))}catch{}}})),Ne=d(((e,t)=>{var i=E();t.exports=function(e){return i(e)||null===e}})),Ve=d(((e,t)=>{var i=Ne(),r=String,n=TypeError;t.exports=function(e){if(i(e))return e;throw new n("Can't set "+r(e)+" as a prototype")}})),De=d(((e,t)=>{var i=Ie(),r=E(),n=b(),a=Ve();t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,s={};try{(e=i(Object.prototype,"__proto__","set"))(s,[]),t=s instanceof Array}catch{}return function(i,s){return n(i),a(s),r(i)&&(t?e(i,s):i.__proto__=s),i}}():void 0)})),Be=d(((e,t)=>{var i=pe(),r=R(),n=z(),a=he(),s=T(),o=Me(),l=Ae(),u=De(),c=Oe(),d=ie(),p=Ce(),h=X(),f=$(),m=ke(),g=a.PROPER,v=a.CONFIGURABLE,b=m.IteratorPrototype,y=m.BUGGY_SAFARI_ITERATORS,S=h("iterator"),_="keys",w="values",E="entries",x=function(){return this};t.exports=function(e,t,a,h,m,$,T){o(a,t,h);var A,C,k,L=function(e){if(e===m&&I)return I;if(!y&&e&&e in O)return O[e];switch(e){case _:case w:case E:return function(){return new a(this,e)}}return function(){return new a(this)}},R=t+" Iterator",P=!1,O=e.prototype,M=O[S]||O["@@iterator"]||m&&O[m],I=!y&&M||L(m),N="Array"===t&&O.entries||M;if(N&&((A=l(N.call(new e)))!==Object.prototype&&A.next&&(!n&&l(A)!==b&&(u?u(A,b):s(A[S])||p(A,S,x)),c(A,R,!0,!0),n&&(f[R]=x))),g&&m===w&&M&&M.name!==w&&(!n&&v?d(O,"name",w):(P=!0,I=function(){return r(M,this)})),m)if(C={values:L(w),keys:$?I:L(_),entries:L(E)},T)for(k in C)(y||P||!(k in O))&&p(O,k,C[k]);else i({target:t,proto:!0,forced:y||P},C);return(!n||T)&&O[S]!==I&&p(O,S,I,{name:m}),f[t]=I,C}})),Ue=d(((e,t)=>{t.exports=function(e,t){return{value:e,done:t}}})),Fe=d(((e,t)=>{var i=y(),r=S(),n=$(),a=ae(),s=ee().f,o=Be(),l=Ue(),u=z(),c=x(),d="Array Iterator",p=a.set,h=a.getterFor(d);t.exports=o(Array,"Array",(function(e,t){p(this,{type:d,target:i(e),index:0,kind:t})}),(function(){var e=h(this),t=e.target,i=e.index++;if(!t||i>=t.length)return e.target=void 0,l(void 0,!0);switch(e.kind){case"keys":return l(i,!1);case"values":return l(t[i],!1)}return l([i,t[i]],!1)}),"values");var f=n.Arguments=n.Array;if(r("keys"),r("values"),r("entries"),!u&&c&&"values"!==f.name)try{s(f,"name",{value:"values"})}catch{}})),je=d(((e,t)=>{var i=X(),r=$(),n=i("iterator"),a=Array.prototype;t.exports=function(e){return void 0!==e&&(r.Array===e||a[n]===e)}})),He=d(((e,t)=>{var i=Re(),r=j(),n=v(),a=$(),s=X()("iterator");t.exports=function(e){if(!n(e))return r(e,s)||r(e,"@@iterator")||a[i(e)]}})),ze=d(((e,t)=>{var i=R(),r=F(),n=L(),a=U(),s=He(),o=TypeError;t.exports=function(e,t){var l=arguments.length<2?s(e):t;if(r(l))return n(i(l,e));throw new o(a(e)+" is not iterable")}})),qe=d(((e,t)=>{var i=R(),r=L(),n=j();t.exports=function(e,t,a){var s,o;r(e);try{if(!(s=n(e,"return"))){if("throw"===t)throw a;return a}s=i(s,e)}catch(e){o=!0,s=e}if("throw"===t)throw a;if(o)throw s;return r(s),a}})),We=d(((e,t)=>{var i=de(),r=R(),n=L(),a=U(),s=je(),o=be(),l=M(),u=ze(),c=He(),d=qe(),p=TypeError,h=function(e,t){this.stopped=e,this.result=t},f=h.prototype;t.exports=function(e,t,m){var g,v,b,y,S,$,_,T=m&&m.that,w=!(!m||!m.AS_ENTRIES),E=!(!m||!m.IS_RECORD),x=!(!m||!m.IS_ITERATOR),A=!(!m||!m.INTERRUPTED),C=i(t,T),k=function(e){return g&&d(g,"normal",e),new h(!0,e)},L=function(e){return w?(n(e),A?C(e[0],e[1],k):C(e[0],e[1])):A?C(e,k):C(e)};if(E)g=e.iterator;else if(x)g=e;else{if(!(v=c(e)))throw new p(a(e)+" is not iterable");if(s(v)){for(b=0,y=o(e);y>b;b++)if((S=L(e[b]))&&l(f,S))return S;return new h(!1)}g=u(e,v)}for($=E?e.next:g.next;!(_=r($,g)).done;){try{S=L(_.value)}catch(e){d(g,"throw",e)}if("object"==typeof S&&S&&l(f,S))return S}return new h(!1)}})),Ge=d(((e,t)=>{var i=x(),r=ee(),n=te();t.exports=function(e,t,a){i?r.f(e,t,n(0,a)):e[t]=a}})),Qe=d((()=>{var e=pe(),t=We(),i=Ge();e({target:"Object",stat:!0},{fromEntries:function(e){var r={};return t(e,(function(e,t){i(r,e,t)}),{AS_ENTRIES:!0}),r}})})),Ye=d(((e,t)=>{Fe(),Qe();var i=P();t.exports=i.Object.fromEntries})),Ke=d(((e,t)=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}})),Xe=d((()=>{Fe();var e,t=Ke(),i=_(),r=Oe(),n=$();for(e in t)r(i[e],e),n[e]=n.Array})),Ze=d(((e,t)=>{var i=Ye();Xe(),t.exports=i})),Je=d(((e,t)=>{var i=Ze();t.exports=i})),et="1.0.49",tt=class{unsubscribe(){let e=this.subscriptions;this.subscriptions=[],e.forEach((e=>"function"==typeof e?e():e.unsubscribe()))}add(e){return this.subscriptions.push(e),this}constructor(){this.subscriptions=[]}},it=e=>{throw new Error(`${e} is value of unexpected type`)},rt=e=>{},nt=()=>{},at=class{subscribe(e,t){let i;i=t?"function"==typeof t?{next:t,error:nt}:{next:e=>t.next(e),error:e=>t.error?.(e)}:{next:nt,error:nt};let r,n="function"==typeof e?{next:t=>{try{e(t)}catch(e){i.next(e)}},error:e=>i.next(e)}:{next:t=>e.next(t),error:t=>e.error?e.error(t):i.next(t)};try{r=this._subscribe(n)}catch(e){n.error?.(e)}return(new tt).add((()=>{switch(n.next=nt,n.error=nt,typeof r){case"function":return void r();case"object":return void r.unsubscribe();case"undefined":return;default:return it(r)}}))}pipe(...e){return e.reduce(((e,t)=>t(e)),this)}_subscribe(e){}constructor(e){e&&(this._subscribe=e)}},st=class extends at{next(e){this.subscribers.forEach((t=>t.next(e)))}error(e){this.subscribers.forEach((t=>t.error?.(e)))}_subscribe(e){let t=this.keyCounter++;return this.subscribers.set(t,e),(new tt).add((()=>this.subscribers.delete(t)))}constructor(){super(),this.keyCounter=0,this.subscribers=new Map}},ot=class{createCustomLog(e){return(...t)=>{let i;try{i=e(...t)}catch{i={message:"error in `createCustomLog`",component:"Logger"}}this.log(i)}}createComponentLog(e){return this.createCustomLog((t=>({component:e,...t})))}constructor(){this.log$=new st,this.logs=[],this.log=e=>{let t={...e,timestamp:Date.now()};this.logs.push(t),this.log$.next(t)},this.getAllLogs=()=>this.logs}},lt="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},ut="1.8.0",ct=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;var dt=function(e){var t=new Set([e]),i=new Set,r=e.match(ct);if(!r)return function(){return!1};var n=+r[1],a=+r[2],s=+r[3];if(null!=r[4])return function(t){return t===e};function o(e){return i.add(e),!1}function l(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(i.has(e))return!1;var r=e.match(ct);if(!r)return o(e);var u=+r[1],c=+r[2],d=+r[3];return null!=r[4]||n!==u?o(e):0===n?a===c&&s<=d?l(e):o(e):a<=c?l(e):o(e)}}(ut),pt=ut.split(".")[0],ht=Symbol.for("opentelemetry.js.api."+pt),ft=lt;function mt(e,t,i,r){var n;void 0===r&&(r=!1);var a=ft[ht]=null!==(n=ft[ht])&&void 0!==n?n:{version:ut};if(!r&&a[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return i.error(s.stack||s.message),!1}if(a.version!==ut){s=new Error("@opentelemetry/api: Registration of version v"+a.version+" for "+e+" does not match previously registered API v"+ut);return i.error(s.stack||s.message),!1}return a[e]=t,i.debug("@opentelemetry/api: Registered a global for "+e+" v"+ut+"."),!0}function gt(e){var t,i,r=null===(t=ft[ht])||void 0===t?void 0:t.version;if(r&&dt(r))return null===(i=ft[ht])||void 0===i?void 0:i[e]}function vt(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+ut+".");var i=ft[ht];i&&delete i[e]}var bt,yt,St=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return $t("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return $t("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return $t("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return $t("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return $t("verbose",this._namespace,e)},e}();function $t(e,t,i){var r=gt("diag");if(r)return i.unshift(t),r[e].apply(r,function(e,t,i){if(i||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s}(i),!1))}(yt=bt||(bt={}))[yt.NONE=0]="NONE",yt[yt.ERROR=30]="ERROR",yt[yt.WARN=50]="WARN",yt[yt.INFO=60]="INFO",yt[yt.DEBUG=70]="DEBUG",yt[yt.VERBOSE=80]="VERBOSE",yt[yt.ALL=9999]="ALL";var _t=function(){function e(){function e(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=gt("diag");if(r)return r[e].apply(r,function(e,t,i){if(i||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s}(t),!1))}}var t=this;t.setLogger=function(e,i){var r,n,a;if(void 0===i&&(i={logLevel:bt.INFO}),e===t){var s=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(r=s.stack)&&void 0!==r?r:s.message),!1}"number"==typeof i&&(i={logLevel:i});var o=gt("diag"),l=function(e,t){function i(i,r){var n=t[i];return"function"==typeof n&&e>=r?n.bind(t):function(){}}return e<bt.NONE?e=bt.NONE:e>bt.ALL&&(e=bt.ALL),t=t||{},{error:i("error",bt.ERROR),warn:i("warn",bt.WARN),info:i("info",bt.INFO),debug:i("debug",bt.DEBUG),verbose:i("verbose",bt.VERBOSE)}}(null!==(n=i.logLevel)&&void 0!==n?n:bt.INFO,e);if(o&&!i.suppressOverrideMessage){var u=null!==(a=(new Error).stack)&&void 0!==a?a:"<failed to generate stacktrace>";o.warn("Current logger will be overwritten from "+u),l.warn("Current logger will overwrite one already registered from "+u)}return mt("diag",l,t,!0)},t.disable=function(){vt("diag",t)},t.createComponentLogger=function(e){return new St(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),Tt=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){var t=function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s}(e,2);return[t[0],t[1]]}))},e.prototype.setEntry=function(t,i){var r=new e(this._entries);return r._entries.set(t,i),r},e.prototype.removeEntry=function(t){var i=new e(this._entries);return i._entries.delete(t),i},e.prototype.removeEntries=function(){for(var t,i,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=new e(this._entries);try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),o=s.next();!o.done;o=s.next()){var l=o.value;a._entries.delete(l)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}return a},e.prototype.clear=function(){return new e},e}(),wt=Symbol("BaggageEntryMetadata"),Et=_t.instance();function xt(e){return void 0===e&&(e={}),new Tt(new Map(Object.entries(e)))}function At(e){return"string"!=typeof e&&(Et.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:wt,toString:function(){return e}}}function Ct(e){return Symbol.for(e)}var kt,Lt=function e(t){var i=this;i._currentContext=t?new Map(t):new Map,i.getValue=function(e){return i._currentContext.get(e)},i.setValue=function(t,r){var n=new e(i._currentContext);return n._currentContext.set(t,r),n},i.deleteValue=function(t){var r=new e(i._currentContext);return r._currentContext.delete(t),r}},Rt=new Lt,Pt=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],Ot=function(){function e(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(console){var r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}for(var t=0;t<Pt.length;t++)this[Pt[t].n]=e(Pt[t].c)},Mt=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),It=function(){function e(){}return e.prototype.createHistogram=function(e,t){return Wt},e.prototype.createCounter=function(e,t){return qt},e.prototype.createUpDownCounter=function(e,t){return Gt},e.prototype.createObservableGauge=function(e,t){return Yt},e.prototype.createObservableCounter=function(e,t){return Qt},e.prototype.createObservableUpDownCounter=function(e,t){return Kt},e.prototype.addBatchObservableCallback=function(e,t){},e.prototype.removeBatchObservableCallback=function(e){},e}(),Nt=function(){},Vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mt(t,e),t.prototype.add=function(e,t){},t}(Nt),Dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mt(t,e),t.prototype.add=function(e,t){},t}(Nt),Bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mt(t,e),t.prototype.record=function(e,t){},t}(Nt),Ut=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.removeCallback=function(e){},e}(),Ft=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mt(t,e),t}(Ut),jt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mt(t,e),t}(Ut),Ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mt(t,e),t}(Ut),zt=new It,qt=new Vt,Wt=new Bt,Gt=new Dt,Qt=new Ft,Yt=new jt,Kt=new Ht;!function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(kt||(kt={}));var Xt,Zt={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},Jt={set:function(e,t,i){null!=e&&(e[t]=i)}},ei=function(){function e(){}return e.prototype.active=function(){return Rt},e.prototype.with=function(e,t,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];return t.call.apply(t,function(e,t,i){if(i||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}([i],function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s}(r),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),ti="context",ii=new ei,ri=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return mt(ti,e,_t.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,i){for(var r,n=[],a=3;a<arguments.length;a++)n[a-3]=arguments[a];return(r=this._getContextManager()).with.apply(r,function(e,t,i){if(i||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}([e,t,i],function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s}(n),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return gt(ti)||ii},e.prototype.disable=function(){this._getContextManager().disable(),vt(ti,_t.instance())},e}();!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(Xt||(Xt={}));var ni="0000000000000000",ai="00000000000000000000000000000000",si={traceId:ai,spanId:ni,traceFlags:Xt.NONE},oi=function(){function e(e){void 0===e&&(e=si),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),li=Ct("OpenTelemetry Context Key SPAN");function ui(e){return e.getValue(li)||void 0}function ci(){return ui(ri.getInstance().active())}function di(e,t){return e.setValue(li,t)}function pi(e){return e.deleteValue(li)}function hi(e,t){return di(e,new oi(t))}function fi(e){var t;return null===(t=ui(e))||void 0===t?void 0:t.spanContext()}var mi=/^([0-9a-f]{32})$/i,gi=/^[0-9a-f]{16}$/i;function vi(e){return mi.test(e)&&e!==ai}function bi(e){return gi.test(e)&&e!==ni}function yi(e){return vi(e.traceId)&&bi(e.spanId)}function Si(e){return new oi(e)}var $i=ri.getInstance(),_i=function(){function e(){}return e.prototype.startSpan=function(e,t,i){if(void 0===i&&(i=$i.active()),!!t?.root)return new oi;var r=i&&fi(i);return function(e){return"object"==typeof e&&"string"==typeof e.spanId&&"string"==typeof e.traceId&&"number"==typeof e.traceFlags}(r)&&yi(r)?new oi(r):new oi},e.prototype.startActiveSpan=function(e,t,i,r){var n,a,s;if(!(arguments.length<2)){2===arguments.length?s=t:3===arguments.length?(n=t,s=i):(n=t,a=i,s=r);var o=a??$i.active(),l=this.startSpan(e,n,o),u=di(o,l);return $i.with(u,s,void 0,l)}},e}();var Ti,wi,Ei,xi=new _i,Ai=function(){function e(e,t,i,r){this._provider=e,this.name=t,this.version=i,this.options=r}return e.prototype.startSpan=function(e,t,i){return this._getTracer().startSpan(e,t,i)},e.prototype.startActiveSpan=function(e,t,i,r){var n=this._getTracer();return Reflect.apply(n.startActiveSpan,n,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):xi},e}(),Ci=function(){function e(){}return e.prototype.getTracer=function(e,t,i){return new _i},e}(),ki=new Ci,Li=function(){function e(){}return e.prototype.getTracer=function(e,t,i){var r;return null!==(r=this.getDelegateTracer(e,t,i))&&void 0!==r?r:new Ai(this,e,t,i)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:ki},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,i){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(e,t,i)},e}();!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(Ti||(Ti={})),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(wi||(wi={})),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(Ei||(Ei={}));var Ri="[_0-9a-z-*/]",Pi=new RegExp("^(?:"+("[a-z]"+Ri+"{0,255}")+"|"+("[a-z0-9]"+Ri+"{0,240}@[a-z]"+Ri+"{0,13}")+")$"),Oi=/^[ -~]{0,255}[!-~]$/,Mi=/,|=/;var Ii=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var i=this._clone();return i._internalState.has(e)&&i._internalState.delete(e),i._internalState.set(e,t),i},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,i){return t.push(i+"="+e.get(i)),t}),[]).join(",")},e.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var i=t.trim(),r=i.indexOf("=");if(-1!==r){var n=i.slice(0,r),a=i.slice(r+1,t.length);(function(e){return Pi.test(e)})(n)&&function(e){return Oi.test(e)&&!Mi.test(e)}(a)&&e.set(n,a)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();var Ni=ri.getInstance(),Vi=_t.instance(),Di=function(){function e(){}return e.prototype.getMeter=function(e,t,i){return zt},e}(),Bi=new Di,Ui="metrics",Fi=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(e){return mt(Ui,e,_t.instance())},e.prototype.getMeterProvider=function(){return gt(Ui)||Bi},e.prototype.getMeter=function(e,t,i){return this.getMeterProvider().getMeter(e,t,i)},e.prototype.disable=function(){vt(Ui,_t.instance())},e}(),ji=Fi.getInstance(),Hi=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),zi=Ct("OpenTelemetry Baggage Key");function qi(e){return e.getValue(zi)||void 0}function Wi(){return qi(ri.getInstance().active())}function Gi(e,t){return e.setValue(zi,t)}function Qi(e){return e.deleteValue(zi)}var Yi="propagation",Ki=new Hi,Xi=function(){function e(){this.createBaggage=xt,this.getBaggage=qi,this.getActiveBaggage=Wi,this.setBaggage=Gi,this.deleteBaggage=Qi}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return mt(Yi,e,_t.instance())},e.prototype.inject=function(e,t,i){return void 0===i&&(i=Jt),this._getGlobalPropagator().inject(e,t,i)},e.prototype.extract=function(e,t,i){return void 0===i&&(i=Zt),this._getGlobalPropagator().extract(e,t,i)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){vt(Yi,_t.instance())},e.prototype._getGlobalPropagator=function(){return gt(Yi)||Ki},e}(),Zi=Xi.getInstance(),Ji="trace",er=function(){function e(){this._proxyTracerProvider=new Li,this.wrapSpanContext=Si,this.isSpanContextValid=yi,this.deleteSpan=pi,this.getSpan=ui,this.getActiveSpan=ci,this.getSpanContext=fi,this.setSpan=di,this.setSpanContext=hi}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=mt(Ji,this._proxyTracerProvider,_t.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return gt(Ji)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){vt(Ji,_t.instance()),this._proxyTracerProvider=new Li},e}(),tr=er.getInstance(),ir={context:Ni,diag:Vi,metrics:ji,propagation:Zi,trace:tr},rr=Object.freeze({__proto__:null,DiagConsoleLogger:Ot,get DiagLogLevel(){return bt},INVALID_SPANID:ni,INVALID_SPAN_CONTEXT:si,INVALID_TRACEID:ai,ProxyTracer:Ai,ProxyTracerProvider:Li,ROOT_CONTEXT:Rt,get SamplingDecision(){return Ti},get SpanKind(){return wi},get SpanStatusCode(){return Ei},get TraceFlags(){return Xt},get ValueType(){return kt},baggageEntryMetadataFromString:At,context:Ni,createContextKey:Ct,createNoopMeter:function(){return zt},createTraceState:function(e){return new Ii(e)},default:ir,defaultTextMapGetter:Zt,defaultTextMapSetter:Jt,diag:Vi,isSpanContextValid:yi,isValidSpanId:bi,isValidTraceId:vi,metrics:ji,propagation:Zi,trace:tr}),nr=Ct("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function ar(e){return e.setValue(nr,!0)}function sr(e){return!0===e.getValue(nr)}var or="=",lr=";",ur=",",cr="baggage";function dr(e){return e.reduce((function(e,t){var i=""+e+(""!==e?ur:"")+t;return i.length>8192?e:i}),"")}function pr(e){return e.getAllEntries().map((function(e){var t=function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s}(e,2),i=t[0],r=t[1],n=encodeURIComponent(i)+"="+encodeURIComponent(r.value);return void 0!==r.metadata&&(n+=lr+r.metadata.toString()),n}))}function hr(e){var t=e.split(lr);if(!(t.length<=0)){var i=t.shift();if(i){var r=i.indexOf(or);if(!(r<=0)){var n,a=decodeURIComponent(i.substring(0,r).trim()),s=decodeURIComponent(i.substring(r+1).trim());return t.length>0&&(n=At(t.join(lr))),{key:a,value:s,metadata:n}}}}}var fr=Object.freeze({__proto__:null,getKeyPairs:pr,parseKeyPairsIntoRecord:function(e){return"string"!=typeof e||0===e.length?{}:e.split(ur).map((function(e){return hr(e)})).filter((function(e){return void 0!==e&&e.value.length>0})).reduce((function(e,t){return e[t.key]=t.value,e}),{})},parsePairKeyValue:hr,serializeKeyPairs:dr}),mr=function(){function e(){}return e.prototype.inject=function(e,t,i){var r=Zi.getBaggage(e);if(r&&!sr(e)){var n=dr(pr(r).filter((function(e){return e.length<=4096})).slice(0,180));n.length>0&&i.set(t,cr,n)}},e.prototype.extract=function(e,t,i){var r=i.get(t,cr),n=Array.isArray(r)?r.join(ur):r;if(!n)return e;var a={};return 0===n.length?e:(n.split(ur).forEach((function(e){var t=hr(e);if(t){var i={value:t.value};t.metadata&&(i.metadata=t.metadata),a[t.key]=i}})),0===Object.entries(a).length?e:Zi.setBaggage(e,Zi.createBaggage(a)))},e.prototype.fields=function(){return[cr]},e}(),gr=function(){function e(e,t){this._monotonicClock=t,this._epochMillis=e.now(),this._performanceMillis=t.now()}return e.prototype.now=function(){var e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e},e}(),vr=function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},br=function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s};function yr(e){var t,i,r={};if("object"!=typeof e||null==e)return r;try{for(var n=vr(Object.entries(e)),a=n.next();!a.done;a=n.next()){var s=br(a.value,2),o=s[0],l=s[1];Sr(o)?$r(l)?Array.isArray(l)?r[o]=l.slice():r[o]=l:Vi.warn("Invalid attribute value set for key: "+o):Vi.warn("Invalid attribute key: "+o)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return r}function Sr(e){return"string"==typeof e&&e.length>0}function $r(e){return null==e||(Array.isArray(e)?function(e){var t,i,r;try{for(var n=vr(e),a=n.next();!a.done;a=n.next()){var s=a.value;if(null!=s){if(!r){if(_r(s)){r=typeof s;continue}return!1}if(typeof s!==r)return!1}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return!0}(e):_r(e))}function _r(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}function Tr(){return function(e){Vi.error(function(e){return"string"==typeof e?e:JSON.stringify(function(e){for(var t={},i=e;null!==i;)Object.getOwnPropertyNames(i).forEach((function(e){if(!t[e]){var r=i[e];r&&(t[e]=String(r))}})),i=Object.getPrototypeOf(i);return t}(e))}(e))}}var wr,Er=Tr();function xr(e){try{Er(e)}catch{}}!function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"}(wr||(wr={}));var Ar=",",Cr=["OTEL_SDK_DISABLED"];function kr(e){return Cr.indexOf(e)>-1}var Lr=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function Rr(e){return Lr.indexOf(e)>-1}var Pr=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function Or(e){return Pr.indexOf(e)>-1}var Mr=1/0,Ir=128,Nr={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:bt.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Mr,OTEL_ATTRIBUTE_COUNT_LIMIT:Ir,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Mr,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:Ir,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:Mr,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:Ir,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:wr.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function Vr(e,t,i){if(!(typeof i[e]>"u")){var r=String(i[e]);t[e]="true"===r.toLowerCase()}}function Dr(e,t,i,r,n){if(void 0===r&&(r=-1/0),void 0===n&&(n=1/0),typeof i[e]<"u"){var a=Number(i[e]);isNaN(a)||(t[e]=a<r?r:a>n?n:a)}}function Br(e,t,i,r){void 0===r&&(r=Ar);var n=i[e];"string"==typeof n&&(t[e]=n.split(r).map((function(e){return e.trim()})))}var Ur={ALL:bt.ALL,VERBOSE:bt.VERBOSE,DEBUG:bt.DEBUG,INFO:bt.INFO,WARN:bt.WARN,ERROR:bt.ERROR,NONE:bt.NONE};function Fr(e,t,i){var r=i[e];if("string"==typeof r){var n=Ur[r.toUpperCase()];null!=n&&(t[e]=n)}}function jr(e){var t={};for(var i in Nr){var r=i;if("OTEL_LOG_LEVEL"===r)Fr(r,t,e);else if(kr(r))Vr(r,t,e);else if(Rr(r))Dr(r,t,e);else if(Or(r))Br(r,t,e);else{var n=e[r];typeof n<"u"&&null!==n&&(t[r]=String(n))}}return t}var Hr="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{};function zr(){var e=jr(Hr);return Object.assign({},Nr,e)}function qr(){return jr(Hr)}function Wr(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}function Gr(e){for(var t=new Uint8Array(e.length/2),i=0,r=0;r<e.length;r+=2){var n=Wr(e.charCodeAt(r)),a=Wr(e.charCodeAt(r+1));t[i++]=n<<4|a}return t}var Qr=function(){this.generateTraceId=Kr(16),this.generateSpanId=Kr(8)},Yr=Array(32);function Kr(e){return function(){for(var t=0;t<2*e;t++)Yr[t]=Math.floor(16*Math.random())+48,Yr[t]>=58&&(Yr[t]+=39);return String.fromCharCode.apply(null,Yr.slice(0,2*e))}}var Xr=performance,Zr="1.25.1";function Jr(e){for(var t={},i=e.length,r=0;r<i;r++){var n=e[r];n&&(t[String(n).toUpperCase().replace(/[-.]/g,"_")]=n)}return t}var en,tn="aws.lambda.invoked_arn",rn="db.system",nn="db.connection_string",an="db.user",sn="db.jdbc.driver_classname",on="db.name",ln="db.statement",un="db.operation",cn="db.mssql.instance_name",dn="db.cassandra.keyspace",pn="db.cassandra.page_size",hn="db.cassandra.consistency_level",fn="db.cassandra.table",mn="db.cassandra.idempotence",gn="db.cassandra.speculative_execution_count",vn="db.cassandra.coordinator.id",bn="db.cassandra.coordinator.dc",yn="db.hbase.namespace",Sn="db.redis.database_index",$n="db.mongodb.collection",_n="db.sql.table",Tn="exception.type",wn="exception.message",En="exception.stacktrace",xn="exception.escaped",An="faas.trigger",Cn="faas.execution",kn="faas.document.collection",Ln="faas.document.operation",Rn="faas.document.time",Pn="faas.document.name",On="faas.time",Mn="faas.cron",In="faas.coldstart",Nn="faas.invoked_name",Vn="faas.invoked_provider",Dn="faas.invoked_region",Bn="net.transport",Un="net.peer.ip",Fn="net.peer.port",jn="net.peer.name",Hn="net.host.ip",zn="net.host.port",qn="net.host.name",Wn="net.host.connection.type",Gn="net.host.connection.subtype",Qn="net.host.carrier.name",Yn="net.host.carrier.mcc",Kn="net.host.carrier.mnc",Xn="net.host.carrier.icc",Zn="peer.service",Jn="enduser.id",ea="enduser.role",ta="enduser.scope",ia="thread.id",ra="thread.name",na="code.function",aa="code.namespace",sa="code.filepath",oa="code.lineno",la="http.method",ua="http.url",ca="http.target",da="http.host",pa="http.scheme",ha="http.status_code",fa="http.flavor",ma="http.user_agent",ga="http.request_content_length",va="http.request_content_length_uncompressed",ba="http.response_content_length",ya="http.response_content_length_uncompressed",Sa="http.server_name",$a="http.route",_a="http.client_ip",Ta="aws.dynamodb.table_names",wa="aws.dynamodb.consumed_capacity",Ea="aws.dynamodb.item_collection_metrics",xa="aws.dynamodb.provisioned_read_capacity",Aa="aws.dynamodb.provisioned_write_capacity",Ca="aws.dynamodb.consistent_read",ka="aws.dynamodb.projection",La="aws.dynamodb.limit",Ra="aws.dynamodb.attributes_to_get",Pa="aws.dynamodb.index_name",Oa="aws.dynamodb.select",Ma="aws.dynamodb.global_secondary_indexes",Ia="aws.dynamodb.local_secondary_indexes",Na="aws.dynamodb.exclusive_start_table",Va="aws.dynamodb.table_count",Da="aws.dynamodb.scan_forward",Ba="aws.dynamodb.segment",Ua="aws.dynamodb.total_segments",Fa="aws.dynamodb.count",ja="aws.dynamodb.scanned_count",Ha="aws.dynamodb.attribute_definitions",za="aws.dynamodb.global_secondary_index_updates",qa="messaging.system",Wa="messaging.destination",Ga="messaging.destination_kind",Qa="messaging.temp_destination",Ya="messaging.protocol",Ka="messaging.protocol_version",Xa="messaging.url",Za="messaging.message_id",Ja="messaging.conversation_id",es="messaging.message_payload_size_bytes",ts="messaging.message_payload_compressed_size_bytes",is="messaging.operation",rs="messaging.consumer_id",ns="messaging.rabbitmq.routing_key",as="messaging.kafka.message_key",ss="messaging.kafka.consumer_group",os="messaging.kafka.client_id",ls="messaging.kafka.partition",us="messaging.kafka.tombstone",cs="rpc.system",ds="rpc.service",ps="rpc.method",hs="rpc.grpc.status_code",fs="rpc.jsonrpc.version",ms="rpc.jsonrpc.request_id",gs="rpc.jsonrpc.error_code",vs="rpc.jsonrpc.error_message",bs="message.type",ys="message.id",Ss="message.compressed_size",$s="message.uncompressed_size",_s=tn,Ts=rn,ws=nn,Es=an,xs=sn,As=on,Cs=ln,ks=un,Ls=cn,Rs=dn,Ps=pn,Os=hn,Ms=fn,Is=mn,Ns=gn,Vs=vn,Ds=bn,Bs=yn,Us=Sn,Fs=$n,js=_n,Hs=Tn,zs=wn,qs=En,Ws=xn,Gs=An,Qs=Cn,Ys=kn,Ks=Ln,Xs=Rn,Zs=Pn,Js=On,eo=Mn,to=In,io=Nn,ro=Vn,no=Dn,ao=Bn,so=Un,oo=Fn,lo=jn,uo=Hn,co=zn,po=qn,ho=Wn,fo=Gn,mo=Qn,go=Yn,vo=Kn,bo=Xn,yo=Zn,So=Jn,$o=ea,_o=ta,To=ia,wo=ra,Eo=na,xo=aa,Ao=sa,Co=oa,ko=la,Lo=ua,Ro=ca,Po=da,Oo=pa,Mo=ha,Io=fa,No=ma,Vo=ga,Do=va,Bo=ba,Uo=ya,Fo=Sa,jo=$a,Ho=_a,zo=Ta,qo=wa,Wo=Ea,Go=xa,Qo=Aa,Yo=Ca,Ko=ka,Xo=La,Zo=Ra,Jo=Pa,el=Oa,tl=Ma,il=Ia,rl=Na,nl=Va,al=Da,sl=Ba,ol=Ua,ll=Fa,ul=ja,cl=Ha,dl=za,pl=qa,hl=Wa,fl=Ga,ml=Qa,gl=Ya,vl=Ka,bl=Xa,yl=Za,Sl=Ja,$l=es,_l=ts,Tl=is,wl=rs,El=ns,xl=as,Al=ss,Cl=os,kl=ls,Ll=us,Rl=cs,Pl=ds,Ol=ps,Ml=hs,Il=fs,Nl=ms,Vl=gs,Dl=vs,Bl=bs,Ul=ys,Fl=Ss,jl=$s,Hl=Jr([tn,rn,nn,an,sn,on,ln,un,cn,dn,pn,hn,fn,mn,gn,vn,bn,yn,Sn,$n,_n,Tn,wn,En,xn,An,Cn,kn,Ln,Rn,Pn,On,Mn,In,Nn,Vn,Dn,Bn,Un,Fn,jn,Hn,zn,qn,Wn,Gn,Qn,Yn,Kn,Xn,Zn,Jn,ea,ta,ia,ra,na,aa,sa,oa,la,ua,ca,da,pa,ha,fa,ma,ga,va,ba,ya,Sa,$a,_a,Ta,wa,Ea,xa,Aa,Ca,ka,La,Ra,Pa,Oa,Ma,Ia,Na,Va,Da,Ba,Ua,Fa,ja,Ha,za,qa,Wa,Ga,Qa,Ya,Ka,Xa,Za,Ja,es,ts,is,rs,ns,as,ss,os,ls,us,cs,ds,ps,hs,fs,ms,gs,vs,bs,ys,Ss,$s]),zl="other_sql",ql="mssql",Wl="mysql",Gl="oracle",Ql="postgresql",Yl="redshift",Kl="hive",Xl="cloudscape",Zl="hsqldb",Jl="progress",eu="maxdb",tu="hanadb",iu="ingres",ru="firstsql",nu="cache",au="adabas",su="firebird",ou="derby",lu="filemaker",uu="informix",cu="instantdb",du="interbase",pu="mariadb",hu="netezza",fu="pervasive",mu="pointbase",gu="sqlite",vu="sybase",bu="teradata",yu="vertica",Su="coldfusion",$u="cassandra",_u="hbase",Tu="mongodb",wu="redis",Eu="couchbase",xu="couchdb",Au="cosmosdb",Cu="dynamodb",ku="neo4j",Lu="geode",Ru="elasticsearch",Pu="memcached",Ou="cockroachdb",Mu=zl,Iu=ql,Nu=Wl,Vu=Gl,Du=Ql,Bu=Yl,Uu=Kl,Fu=Xl,ju=Zl,Hu=Jl,zu=eu,qu=tu,Wu=iu,Gu=ru,Qu=nu,Yu=au,Ku=su,Xu=ou,Zu=lu,Ju=uu,ec=cu,tc=du,ic=pu,rc=hu,nc=fu,ac=mu,sc=gu,oc=vu,lc=bu,uc=yu,cc=Su,dc=$u,pc=_u,hc=Tu,fc=wu,mc=Eu,gc=xu,vc=Au,bc=Cu,yc=ku,Sc=Lu,$c=Ru,_c=Pu,Tc=Ou,wc=Jr([zl,ql,Wl,Gl,"db2",Ql,Yl,Kl,Xl,Zl,Jl,eu,tu,iu,ru,"edb",nu,au,su,ou,lu,uu,cu,du,pu,hu,fu,mu,gu,vu,bu,yu,"h2",Su,$u,_u,Tu,wu,Eu,xu,Au,Cu,ku,Lu,Ru,Pu,Ou]),Ec="each_quorum",xc="quorum",Ac="local_quorum",Cc="three",kc="local_one",Lc="serial",Rc="local_serial",Pc=Ec,Oc=xc,Mc=Ac,Ic=Cc,Nc=kc,Vc=Lc,Dc=Rc,Bc=Jr(["all",Ec,xc,Ac,"one","two",Cc,kc,"any",Lc,Rc]),Uc="datasource",Fc="http",jc="pubsub",Hc="timer",zc="other",qc=Uc,Wc=Fc,Gc=jc,Qc=Hc,Yc=zc,Kc=Jr([Uc,Fc,jc,Hc,zc]),Xc="insert",Zc="edit",Jc="delete",ed=Xc,td=Zc,id=Jc,rd=Jr([Xc,Zc,Jc]),nd="alibaba_cloud",ad="azure",sd=nd,od=ad,ld=Jr([nd,"aws",ad,"gcp"]),ud="ip_tcp",cd="ip_udp",dd="unix",pd="pipe",hd="inproc",fd="other",md=ud,gd=cd,vd=dd,bd=pd,yd=hd,Sd=fd,$d=Jr([ud,cd,"ip",dd,pd,hd,fd]),_d="wifi",Td="wired",wd="cell",Ed="unavailable",xd="unknown",Ad=_d,Cd=Td,kd=wd,Ld=Ed,Rd=xd,Pd=Jr([_d,Td,wd,Ed,xd]),Od="gprs",Md="edge",Id="umts",Nd="cdma",Vd="evdo_0",Dd="evdo_a",Bd="cdma2000_1xrtt",Ud="hsdpa",Fd="hsupa",jd="hspa",Hd="iden",zd="evdo_b",qd="ehrpd",Wd="hspap",Gd="td_scdma",Qd="iwlan",Yd="nrnsa",Kd="lte_ca",Xd=Od,Zd=Md,Jd=Id,ep=Nd,tp=Vd,ip=Dd,rp=Bd,np=Ud,ap=Fd,sp=jd,op=Hd,lp=zd,up=qd,cp=Wd,dp=Gd,pp=Qd,hp=Yd,fp=Kd,mp=Jr([Od,Md,Id,Nd,Vd,Dd,Bd,Ud,Fd,jd,Hd,zd,"lte",qd,Wd,"gsm",Gd,Qd,"nr",Yd,Kd]),gp="SPDY",vp="QUIC",bp=gp,yp=vp,Sp={HTTP_1_0:"1.0",HTTP_1_1:"1.1",HTTP_2_0:"2.0",SPDY:gp,QUIC:vp},$p="queue",_p="topic",Tp=$p,wp=_p,Ep=Jr([$p,_p]),xp="receive",Ap="process",Cp=xp,kp=Ap,Lp=Jr([xp,Ap]),Rp={OK:0,CANCELLED:1,UNKNOWN:2,INVALID_ARGUMENT:3,DEADLINE_EXCEEDED:4,NOT_FOUND:5,ALREADY_EXISTS:6,PERMISSION_DENIED:7,RESOURCE_EXHAUSTED:8,FAILED_PRECONDITION:9,ABORTED:10,OUT_OF_RANGE:11,UNIMPLEMENTED:12,INTERNAL:13,UNAVAILABLE:14,DATA_LOSS:15,UNAUTHENTICATED:16},Pp="SENT",Op="RECEIVED",Mp=Pp,Ip=Op,Np=Jr([Pp,Op]),Vp="cloud.provider",Dp="cloud.account.id",Bp="cloud.region",Up="cloud.availability_zone",Fp="cloud.platform",jp="aws.ecs.container.arn",Hp="aws.ecs.cluster.arn",zp="aws.ecs.launchtype",qp="aws.ecs.task.arn",Wp="aws.ecs.task.family",Gp="aws.ecs.task.revision",Qp="aws.eks.cluster.arn",Yp="aws.log.group.names",Kp="aws.log.group.arns",Xp="aws.log.stream.names",Zp="aws.log.stream.arns",Jp="container.name",eh="container.id",th="container.runtime",ih="container.image.name",rh="container.image.tag",nh="deployment.environment",ah="device.id",sh="device.model.identifier",oh="device.model.name",lh="faas.name",uh="faas.id",ch="faas.version",dh="faas.instance",ph="faas.max_memory",hh="host.id",fh="host.name",mh="host.type",gh="host.arch",vh="host.image.name",bh="host.image.id",yh="host.image.version",Sh="k8s.cluster.name",$h="k8s.node.name",_h="k8s.node.uid",Th="k8s.namespace.name",wh="k8s.pod.uid",Eh="k8s.pod.name",xh="k8s.container.name",Ah="k8s.replicaset.uid",Ch="k8s.replicaset.name",kh="k8s.deployment.uid",Lh="k8s.deployment.name",Rh="k8s.statefulset.uid",Ph="k8s.statefulset.name",Oh="k8s.daemonset.uid",Mh="k8s.daemonset.name",Ih="k8s.job.uid",Nh="k8s.job.name",Vh="k8s.cronjob.uid",Dh="k8s.cronjob.name",Bh="os.type",Uh="os.description",Fh="os.name",jh="os.version",Hh="process.pid",zh="process.executable.name",qh="process.executable.path",Wh="process.command",Gh="process.command_line",Qh="process.command_args",Yh="process.owner",Kh="process.runtime.name",Xh="process.runtime.version",Zh="process.runtime.description",Jh="service.name",ef="service.namespace",tf="service.instance.id",rf="service.version",nf="telemetry.sdk.name",af="telemetry.sdk.language",sf="telemetry.sdk.version",of="telemetry.auto.version",lf="webengine.name",uf="webengine.version",cf="webengine.description",df=Vp,pf=Dp,hf=Bp,ff=Up,mf=Fp,gf=jp,vf=Hp,bf=zp,yf=qp,Sf=Wp,$f=Gp,_f=Qp,Tf=Yp,wf=Kp,Ef=Xp,xf=Zp,Af=Jp,Cf=eh,kf=th,Lf=ih,Rf=rh,Pf=nh,Of=ah,Mf=sh,If=oh,Nf=lh,Vf=uh,Df=ch,Bf=dh,Uf=ph,Ff=hh,jf=fh,Hf=mh,zf=gh,qf=vh,Wf=bh,Gf=yh,Qf=Sh,Yf=$h,Kf=_h,Xf=Th,Zf=wh,Jf=Eh,em=xh,tm=Ah,im=Ch,rm=kh,nm=Lh,am=Rh,sm=Ph,om=Oh,lm=Mh,um=Ih,cm=Nh,dm=Vh,pm=Dh,hm=Bh,fm=Uh,mm=Fh,gm=jh,vm=Hh,bm=zh,ym=qh,Sm=Wh,$m=Gh,_m=Qh,Tm=Yh,wm=Kh,Em=Xh,xm=Zh,Am=Jh,Cm=ef,km=tf,Lm=rf,Rm=nf,Pm=af,Om=sf,Mm=of,Im=lf,Nm=uf,Vm=cf,Dm=Jr([Vp,Dp,Bp,Up,Fp,jp,Hp,zp,qp,Wp,Gp,Qp,Yp,Kp,Xp,Zp,Jp,eh,th,ih,rh,nh,ah,sh,oh,lh,uh,ch,dh,ph,hh,fh,mh,gh,vh,bh,yh,Sh,$h,_h,Th,wh,Eh,xh,Ah,Ch,kh,Lh,Rh,Ph,Oh,Mh,Ih,Nh,Vh,Dh,Bh,Uh,Fh,jh,Hh,zh,qh,Wh,Gh,Qh,Yh,Kh,Xh,Zh,Jh,ef,tf,rf,nf,af,sf,of,lf,uf,cf]),Bm="alibaba_cloud",Um="azure",Fm=Bm,jm=Um,Hm=Jr([Bm,"aws",Um,"gcp"]),zm="alibaba_cloud_ecs",qm="alibaba_cloud_fc",Wm="aws_ec2",Gm="aws_ecs",Qm="aws_eks",Ym="aws_lambda",Km="aws_elastic_beanstalk",Xm="azure_vm",Zm="azure_container_instances",Jm="azure_aks",eg="azure_functions",tg="azure_app_service",ig="gcp_compute_engine",rg="gcp_cloud_run",ng="gcp_kubernetes_engine",ag="gcp_cloud_functions",sg="gcp_app_engine",og=zm,lg=qm,ug=Wm,cg=Gm,dg=Qm,pg=Ym,hg=Km,fg=Xm,mg=Zm,gg=Jm,vg=eg,bg=tg,yg=ig,Sg=rg,$g=ng,_g=ag,Tg=sg,wg=Jr([zm,qm,Wm,Gm,Qm,Ym,Km,Xm,Zm,Jm,eg,tg,ig,rg,ng,ag,sg]),Eg="fargate",xg=Eg,Ag=Jr(["ec2",Eg]),Cg="amd64",kg="arm32",Lg="arm64",Rg="ia64",Pg="ppc32",Og="ppc64",Mg=Cg,Ig=kg,Ng=Lg,Vg=Rg,Dg=Pg,Bg=Og,Ug=Jr([Cg,kg,Lg,Rg,Pg,Og,"x86"]),Fg="windows",jg="linux",Hg="darwin",zg="freebsd",qg="netbsd",Wg="openbsd",Gg="dragonflybsd",Qg="hpux",Yg="solaris",Kg="z_os",Xg=Fg,Zg=jg,Jg=Hg,ev=zg,tv=qg,iv=Wg,rv=Gg,nv=Qg,av=Yg,sv=Kg,ov=Jr([Fg,jg,Hg,zg,qg,Wg,Gg,Qg,"aix",Yg,Kg]),lv="dotnet",uv="erlang",cv="java",dv="nodejs",pv="python",hv="ruby",fv="webjs",mv=lv,gv=uv,vv=cv,bv=dv,yv=pv,Sv=hv,$v=fv,_v=Jr(["cpp",lv,uv,"go",cv,dv,"php",pv,hv,fv]),Tv=Object.freeze({__proto__:null,AWSECSLAUNCHTYPEVALUES_EC2:"ec2",AWSECSLAUNCHTYPEVALUES_FARGATE:xg,AwsEcsLaunchtypeValues:Ag,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_ECS:og,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_FC:lg,CLOUDPLATFORMVALUES_AWS_EC2:ug,CLOUDPLATFORMVALUES_AWS_ECS:cg,CLOUDPLATFORMVALUES_AWS_EKS:dg,CLOUDPLATFORMVALUES_AWS_ELASTIC_BEANSTALK:hg,CLOUDPLATFORMVALUES_AWS_LAMBDA:pg,CLOUDPLATFORMVALUES_AZURE_AKS:gg,CLOUDPLATFORMVALUES_AZURE_APP_SERVICE:bg,CLOUDPLATFORMVALUES_AZURE_CONTAINER_INSTANCES:mg,CLOUDPLATFORMVALUES_AZURE_FUNCTIONS:vg,CLOUDPLATFORMVALUES_AZURE_VM:fg,CLOUDPLATFORMVALUES_GCP_APP_ENGINE:Tg,CLOUDPLATFORMVALUES_GCP_CLOUD_FUNCTIONS:_g,CLOUDPLATFORMVALUES_GCP_CLOUD_RUN:Sg,CLOUDPLATFORMVALUES_GCP_COMPUTE_ENGINE:yg,CLOUDPLATFORMVALUES_GCP_KUBERNETES_ENGINE:$g,CLOUDPROVIDERVALUES_ALIBABA_CLOUD:Fm,CLOUDPROVIDERVALUES_AWS:"aws",CLOUDPROVIDERVALUES_AZURE:jm,CLOUDPROVIDERVALUES_GCP:"gcp",CloudPlatformValues:wg,CloudProviderValues:Hm,DBCASSANDRACONSISTENCYLEVELVALUES_ALL:"all",DBCASSANDRACONSISTENCYLEVELVALUES_ANY:"any",DBCASSANDRACONSISTENCYLEVELVALUES_EACH_QUORUM:Pc,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_ONE:Nc,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_QUORUM:Mc,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_SERIAL:Dc,DBCASSANDRACONSISTENCYLEVELVALUES_ONE:"one",DBCASSANDRACONSISTENCYLEVELVALUES_QUORUM:Oc,DBCASSANDRACONSISTENCYLEVELVALUES_SERIAL:Vc,DBCASSANDRACONSISTENCYLEVELVALUES_THREE:Ic,DBCASSANDRACONSISTENCYLEVELVALUES_TWO:"two",DBSYSTEMVALUES_ADABAS:Yu,DBSYSTEMVALUES_CACHE:Qu,DBSYSTEMVALUES_CASSANDRA:dc,DBSYSTEMVALUES_CLOUDSCAPE:Fu,DBSYSTEMVALUES_COCKROACHDB:Tc,DBSYSTEMVALUES_COLDFUSION:cc,DBSYSTEMVALUES_COSMOSDB:vc,DBSYSTEMVALUES_COUCHBASE:mc,DBSYSTEMVALUES_COUCHDB:gc,DBSYSTEMVALUES_DB2:"db2",DBSYSTEMVALUES_DERBY:Xu,DBSYSTEMVALUES_DYNAMODB:bc,DBSYSTEMVALUES_EDB:"edb",DBSYSTEMVALUES_ELASTICSEARCH:$c,DBSYSTEMVALUES_FILEMAKER:Zu,DBSYSTEMVALUES_FIREBIRD:Ku,DBSYSTEMVALUES_FIRSTSQL:Gu,DBSYSTEMVALUES_GEODE:Sc,DBSYSTEMVALUES_H2:"h2",DBSYSTEMVALUES_HANADB:qu,DBSYSTEMVALUES_HBASE:pc,DBSYSTEMVALUES_HIVE:Uu,DBSYSTEMVALUES_HSQLDB:ju,DBSYSTEMVALUES_INFORMIX:Ju,DBSYSTEMVALUES_INGRES:Wu,DBSYSTEMVALUES_INSTANTDB:ec,DBSYSTEMVALUES_INTERBASE:tc,DBSYSTEMVALUES_MARIADB:ic,DBSYSTEMVALUES_MAXDB:zu,DBSYSTEMVALUES_MEMCACHED:_c,DBSYSTEMVALUES_MONGODB:hc,DBSYSTEMVALUES_MSSQL:Iu,DBSYSTEMVALUES_MYSQL:Nu,DBSYSTEMVALUES_NEO4J:yc,DBSYSTEMVALUES_NETEZZA:rc,DBSYSTEMVALUES_ORACLE:Vu,DBSYSTEMVALUES_OTHER_SQL:Mu,DBSYSTEMVALUES_PERVASIVE:nc,DBSYSTEMVALUES_POINTBASE:ac,DBSYSTEMVALUES_POSTGRESQL:Du,DBSYSTEMVALUES_PROGRESS:Hu,DBSYSTEMVALUES_REDIS:fc,DBSYSTEMVALUES_REDSHIFT:Bu,DBSYSTEMVALUES_SQLITE:sc,DBSYSTEMVALUES_SYBASE:oc,DBSYSTEMVALUES_TERADATA:lc,DBSYSTEMVALUES_VERTICA:uc,DbCassandraConsistencyLevelValues:Bc,DbSystemValues:wc,FAASDOCUMENTOPERATIONVALUES_DELETE:id,FAASDOCUMENTOPERATIONVALUES_EDIT:td,FAASDOCUMENTOPERATIONVALUES_INSERT:ed,FAASINVOKEDPROVIDERVALUES_ALIBABA_CLOUD:sd,FAASINVOKEDPROVIDERVALUES_AWS:"aws",FAASINVOKEDPROVIDERVALUES_AZURE:od,FAASINVOKEDPROVIDERVALUES_GCP:"gcp",FAASTRIGGERVALUES_DATASOURCE:qc,FAASTRIGGERVALUES_HTTP:Wc,FAASTRIGGERVALUES_OTHER:Yc,FAASTRIGGERVALUES_PUBSUB:Gc,FAASTRIGGERVALUES_TIMER:Qc,FaasDocumentOperationValues:rd,FaasInvokedProviderValues:ld,FaasTriggerValues:Kc,HOSTARCHVALUES_AMD64:Mg,HOSTARCHVALUES_ARM32:Ig,HOSTARCHVALUES_ARM64:Ng,HOSTARCHVALUES_IA64:Vg,HOSTARCHVALUES_PPC32:Dg,HOSTARCHVALUES_PPC64:Bg,HOSTARCHVALUES_X86:"x86",HTTPFLAVORVALUES_HTTP_1_0:"1.0",HTTPFLAVORVALUES_HTTP_1_1:"1.1",HTTPFLAVORVALUES_HTTP_2_0:"2.0",HTTPFLAVORVALUES_QUIC:yp,HTTPFLAVORVALUES_SPDY:bp,HostArchValues:Ug,HttpFlavorValues:Sp,MESSAGETYPEVALUES_RECEIVED:Ip,MESSAGETYPEVALUES_SENT:Mp,MESSAGINGDESTINATIONKINDVALUES_QUEUE:Tp,MESSAGINGDESTINATIONKINDVALUES_TOPIC:wp,MESSAGINGOPERATIONVALUES_PROCESS:kp,MESSAGINGOPERATIONVALUES_RECEIVE:Cp,MessageTypeValues:Np,MessagingDestinationKindValues:Ep,MessagingOperationValues:Lp,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA:ep,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA2000_1XRTT:rp,NETHOSTCONNECTIONSUBTYPEVALUES_EDGE:Zd,NETHOSTCONNECTIONSUBTYPEVALUES_EHRPD:up,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_0:tp,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_A:ip,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_B:lp,NETHOSTCONNECTIONSUBTYPEVALUES_GPRS:Xd,NETHOSTCONNECTIONSUBTYPEVALUES_GSM:"gsm",NETHOSTCONNECTIONSUBTYPEVALUES_HSDPA:np,NETHOSTCONNECTIONSUBTYPEVALUES_HSPA:sp,NETHOSTCONNECTIONSUBTYPEVALUES_HSPAP:cp,NETHOSTCONNECTIONSUBTYPEVALUES_HSUPA:ap,NETHOSTCONNECTIONSUBTYPEVALUES_IDEN:op,NETHOSTCONNECTIONSUBTYPEVALUES_IWLAN:pp,NETHOSTCONNECTIONSUBTYPEVALUES_LTE:"lte",NETHOSTCONNECTIONSUBTYPEVALUES_LTE_CA:fp,NETHOSTCONNECTIONSUBTYPEVALUES_NR:"nr",NETHOSTCONNECTIONSUBTYPEVALUES_NRNSA:hp,NETHOSTCONNECTIONSUBTYPEVALUES_TD_SCDMA:dp,NETHOSTCONNECTIONSUBTYPEVALUES_UMTS:Jd,NETHOSTCONNECTIONTYPEVALUES_CELL:kd,NETHOSTCONNECTIONTYPEVALUES_UNAVAILABLE:Ld,NETHOSTCONNECTIONTYPEVALUES_UNKNOWN:Rd,NETHOSTCONNECTIONTYPEVALUES_WIFI:Ad,NETHOSTCONNECTIONTYPEVALUES_WIRED:Cd,NETTRANSPORTVALUES_INPROC:yd,NETTRANSPORTVALUES_IP:"ip",NETTRANSPORTVALUES_IP_TCP:md,NETTRANSPORTVALUES_IP_UDP:gd,NETTRANSPORTVALUES_OTHER:Sd,NETTRANSPORTVALUES_PIPE:bd,NETTRANSPORTVALUES_UNIX:vd,NetHostConnectionSubtypeValues:mp,NetHostConnectionTypeValues:Pd,NetTransportValues:$d,OSTYPEVALUES_AIX:"aix",OSTYPEVALUES_DARWIN:Jg,OSTYPEVALUES_DRAGONFLYBSD:rv,OSTYPEVALUES_FREEBSD:ev,OSTYPEVALUES_HPUX:nv,OSTYPEVALUES_LINUX:Zg,OSTYPEVALUES_NETBSD:tv,OSTYPEVALUES_OPENBSD:iv,OSTYPEVALUES_SOLARIS:av,OSTYPEVALUES_WINDOWS:Xg,OSTYPEVALUES_Z_OS:sv,OsTypeValues:ov,RPCGRPCSTATUSCODEVALUES_ABORTED:10,RPCGRPCSTATUSCODEVALUES_ALREADY_EXISTS:6,RPCGRPCSTATUSCODEVALUES_CANCELLED:1,RPCGRPCSTATUSCODEVALUES_DATA_LOSS:15,RPCGRPCSTATUSCODEVALUES_DEADLINE_EXCEEDED:4,RPCGRPCSTATUSCODEVALUES_FAILED_PRECONDITION:9,RPCGRPCSTATUSCODEVALUES_INTERNAL:13,RPCGRPCSTATUSCODEVALUES_INVALID_ARGUMENT:3,RPCGRPCSTATUSCODEVALUES_NOT_FOUND:5,RPCGRPCSTATUSCODEVALUES_OK:0,RPCGRPCSTATUSCODEVALUES_OUT_OF_RANGE:11,RPCGRPCSTATUSCODEVALUES_PERMISSION_DENIED:7,RPCGRPCSTATUSCODEVALUES_RESOURCE_EXHAUSTED:8,RPCGRPCSTATUSCODEVALUES_UNAUTHENTICATED:16,RPCGRPCSTATUSCODEVALUES_UNAVAILABLE:14,RPCGRPCSTATUSCODEVALUES_UNIMPLEMENTED:12,RPCGRPCSTATUSCODEVALUES_UNKNOWN:2,RpcGrpcStatusCodeValues:Rp,SEMATTRS_AWS_DYNAMODB_ATTRIBUTES_TO_GET:Zo,SEMATTRS_AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:cl,SEMATTRS_AWS_DYNAMODB_CONSISTENT_READ:Yo,SEMATTRS_AWS_DYNAMODB_CONSUMED_CAPACITY:qo,SEMATTRS_AWS_DYNAMODB_COUNT:ll,SEMATTRS_AWS_DYNAMODB_EXCLUSIVE_START_TABLE:rl,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:tl,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:dl,SEMATTRS_AWS_DYNAMODB_INDEX_NAME:Jo,SEMATTRS_AWS_DYNAMODB_ITEM_COLLECTION_METRICS:Wo,SEMATTRS_AWS_DYNAMODB_LIMIT:Xo,SEMATTRS_AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:il,SEMATTRS_AWS_DYNAMODB_PROJECTION:Ko,SEMATTRS_AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:Go,SEMATTRS_AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:Qo,SEMATTRS_AWS_DYNAMODB_SCANNED_COUNT:ul,SEMATTRS_AWS_DYNAMODB_SCAN_FORWARD:al,SEMATTRS_AWS_DYNAMODB_SEGMENT:sl,SEMATTRS_AWS_DYNAMODB_SELECT:el,SEMATTRS_AWS_DYNAMODB_TABLE_COUNT:nl,SEMATTRS_AWS_DYNAMODB_TABLE_NAMES:zo,SEMATTRS_AWS_DYNAMODB_TOTAL_SEGMENTS:ol,SEMATTRS_AWS_LAMBDA_INVOKED_ARN:_s,SEMATTRS_CODE_FILEPATH:Ao,SEMATTRS_CODE_FUNCTION:Eo,SEMATTRS_CODE_LINENO:Co,SEMATTRS_CODE_NAMESPACE:xo,SEMATTRS_DB_CASSANDRA_CONSISTENCY_LEVEL:Os,SEMATTRS_DB_CASSANDRA_COORDINATOR_DC:Ds,SEMATTRS_DB_CASSANDRA_COORDINATOR_ID:Vs,SEMATTRS_DB_CASSANDRA_IDEMPOTENCE:Is,SEMATTRS_DB_CASSANDRA_KEYSPACE:Rs,SEMATTRS_DB_CASSANDRA_PAGE_SIZE:Ps,SEMATTRS_DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:Ns,SEMATTRS_DB_CASSANDRA_TABLE:Ms,SEMATTRS_DB_CONNECTION_STRING:ws,SEMATTRS_DB_HBASE_NAMESPACE:Bs,SEMATTRS_DB_JDBC_DRIVER_CLASSNAME:xs,SEMATTRS_DB_MONGODB_COLLECTION:Fs,SEMATTRS_DB_MSSQL_INSTANCE_NAME:Ls,SEMATTRS_DB_NAME:As,SEMATTRS_DB_OPERATION:ks,SEMATTRS_DB_REDIS_DATABASE_INDEX:Us,SEMATTRS_DB_SQL_TABLE:js,SEMATTRS_DB_STATEMENT:Cs,SEMATTRS_DB_SYSTEM:Ts,SEMATTRS_DB_USER:Es,SEMATTRS_ENDUSER_ID:So,SEMATTRS_ENDUSER_ROLE:$o,SEMATTRS_ENDUSER_SCOPE:_o,SEMATTRS_EXCEPTION_ESCAPED:Ws,SEMATTRS_EXCEPTION_MESSAGE:zs,SEMATTRS_EXCEPTION_STACKTRACE:qs,SEMATTRS_EXCEPTION_TYPE:Hs,SEMATTRS_FAAS_COLDSTART:to,SEMATTRS_FAAS_CRON:eo,SEMATTRS_FAAS_DOCUMENT_COLLECTION:Ys,SEMATTRS_FAAS_DOCUMENT_NAME:Zs,SEMATTRS_FAAS_DOCUMENT_OPERATION:Ks,SEMATTRS_FAAS_DOCUMENT_TIME:Xs,SEMATTRS_FAAS_EXECUTION:Qs,SEMATTRS_FAAS_INVOKED_NAME:io,SEMATTRS_FAAS_INVOKED_PROVIDER:ro,SEMATTRS_FAAS_INVOKED_REGION:no,SEMATTRS_FAAS_TIME:Js,SEMATTRS_FAAS_TRIGGER:Gs,SEMATTRS_HTTP_CLIENT_IP:Ho,SEMATTRS_HTTP_FLAVOR:Io,SEMATTRS_HTTP_HOST:Po,SEMATTRS_HTTP_METHOD:ko,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH:Vo,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:Do,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH:Bo,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:Uo,SEMATTRS_HTTP_ROUTE:jo,SEMATTRS_HTTP_SCHEME:Oo,SEMATTRS_HTTP_SERVER_NAME:Fo,SEMATTRS_HTTP_STATUS_CODE:Mo,SEMATTRS_HTTP_TARGET:Ro,SEMATTRS_HTTP_URL:Lo,SEMATTRS_HTTP_USER_AGENT:No,SEMATTRS_MESSAGE_COMPRESSED_SIZE:Fl,SEMATTRS_MESSAGE_ID:Ul,SEMATTRS_MESSAGE_TYPE:Bl,SEMATTRS_MESSAGE_UNCOMPRESSED_SIZE:jl,SEMATTRS_MESSAGING_CONSUMER_ID:wl,SEMATTRS_MESSAGING_CONVERSATION_ID:Sl,SEMATTRS_MESSAGING_DESTINATION:hl,SEMATTRS_MESSAGING_DESTINATION_KIND:fl,SEMATTRS_MESSAGING_KAFKA_CLIENT_ID:Cl,SEMATTRS_MESSAGING_KAFKA_CONSUMER_GROUP:Al,SEMATTRS_MESSAGING_KAFKA_MESSAGE_KEY:xl,SEMATTRS_MESSAGING_KAFKA_PARTITION:kl,SEMATTRS_MESSAGING_KAFKA_TOMBSTONE:Ll,SEMATTRS_MESSAGING_MESSAGE_ID:yl,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:_l,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:$l,SEMATTRS_MESSAGING_OPERATION:Tl,SEMATTRS_MESSAGING_PROTOCOL:gl,SEMATTRS_MESSAGING_PROTOCOL_VERSION:vl,SEMATTRS_MESSAGING_RABBITMQ_ROUTING_KEY:El,SEMATTRS_MESSAGING_SYSTEM:pl,SEMATTRS_MESSAGING_TEMP_DESTINATION:ml,SEMATTRS_MESSAGING_URL:bl,SEMATTRS_NET_HOST_CARRIER_ICC:bo,SEMATTRS_NET_HOST_CARRIER_MCC:go,SEMATTRS_NET_HOST_CARRIER_MNC:vo,SEMATTRS_NET_HOST_CARRIER_NAME:mo,SEMATTRS_NET_HOST_CONNECTION_SUBTYPE:fo,SEMATTRS_NET_HOST_CONNECTION_TYPE:ho,SEMATTRS_NET_HOST_IP:uo,SEMATTRS_NET_HOST_NAME:po,SEMATTRS_NET_HOST_PORT:co,SEMATTRS_NET_PEER_IP:so,SEMATTRS_NET_PEER_NAME:lo,SEMATTRS_NET_PEER_PORT:oo,SEMATTRS_NET_TRANSPORT:ao,SEMATTRS_PEER_SERVICE:yo,SEMATTRS_RPC_GRPC_STATUS_CODE:Ml,SEMATTRS_RPC_JSONRPC_ERROR_CODE:Vl,SEMATTRS_RPC_JSONRPC_ERROR_MESSAGE:Dl,SEMATTRS_RPC_JSONRPC_REQUEST_ID:Nl,SEMATTRS_RPC_JSONRPC_VERSION:Il,SEMATTRS_RPC_METHOD:Ol,SEMATTRS_RPC_SERVICE:Pl,SEMATTRS_RPC_SYSTEM:Rl,SEMATTRS_THREAD_ID:To,SEMATTRS_THREAD_NAME:wo,SEMRESATTRS_AWS_ECS_CLUSTER_ARN:vf,SEMRESATTRS_AWS_ECS_CONTAINER_ARN:gf,SEMRESATTRS_AWS_ECS_LAUNCHTYPE:bf,SEMRESATTRS_AWS_ECS_TASK_ARN:yf,SEMRESATTRS_AWS_ECS_TASK_FAMILY:Sf,SEMRESATTRS_AWS_ECS_TASK_REVISION:$f,SEMRESATTRS_AWS_EKS_CLUSTER_ARN:_f,SEMRESATTRS_AWS_LOG_GROUP_ARNS:wf,SEMRESATTRS_AWS_LOG_GROUP_NAMES:Tf,SEMRESATTRS_AWS_LOG_STREAM_ARNS:xf,SEMRESATTRS_AWS_LOG_STREAM_NAMES:Ef,SEMRESATTRS_CLOUD_ACCOUNT_ID:pf,SEMRESATTRS_CLOUD_AVAILABILITY_ZONE:ff,SEMRESATTRS_CLOUD_PLATFORM:mf,SEMRESATTRS_CLOUD_PROVIDER:df,SEMRESATTRS_CLOUD_REGION:hf,SEMRESATTRS_CONTAINER_ID:Cf,SEMRESATTRS_CONTAINER_IMAGE_NAME:Lf,SEMRESATTRS_CONTAINER_IMAGE_TAG:Rf,SEMRESATTRS_CONTAINER_NAME:Af,SEMRESATTRS_CONTAINER_RUNTIME:kf,SEMRESATTRS_DEPLOYMENT_ENVIRONMENT:Pf,SEMRESATTRS_DEVICE_ID:Of,SEMRESATTRS_DEVICE_MODEL_IDENTIFIER:Mf,SEMRESATTRS_DEVICE_MODEL_NAME:If,SEMRESATTRS_FAAS_ID:Vf,SEMRESATTRS_FAAS_INSTANCE:Bf,SEMRESATTRS_FAAS_MAX_MEMORY:Uf,SEMRESATTRS_FAAS_NAME:Nf,SEMRESATTRS_FAAS_VERSION:Df,SEMRESATTRS_HOST_ARCH:zf,SEMRESATTRS_HOST_ID:Ff,SEMRESATTRS_HOST_IMAGE_ID:Wf,SEMRESATTRS_HOST_IMAGE_NAME:qf,SEMRESATTRS_HOST_IMAGE_VERSION:Gf,SEMRESATTRS_HOST_NAME:jf,SEMRESATTRS_HOST_TYPE:Hf,SEMRESATTRS_K8S_CLUSTER_NAME:Qf,SEMRESATTRS_K8S_CONTAINER_NAME:em,SEMRESATTRS_K8S_CRONJOB_NAME:pm,SEMRESATTRS_K8S_CRONJOB_UID:dm,SEMRESATTRS_K8S_DAEMONSET_NAME:lm,SEMRESATTRS_K8S_DAEMONSET_UID:om,SEMRESATTRS_K8S_DEPLOYMENT_NAME:nm,SEMRESATTRS_K8S_DEPLOYMENT_UID:rm,SEMRESATTRS_K8S_JOB_NAME:cm,SEMRESATTRS_K8S_JOB_UID:um,SEMRESATTRS_K8S_NAMESPACE_NAME:Xf,SEMRESATTRS_K8S_NODE_NAME:Yf,SEMRESATTRS_K8S_NODE_UID:Kf,SEMRESATTRS_K8S_POD_NAME:Jf,SEMRESATTRS_K8S_POD_UID:Zf,SEMRESATTRS_K8S_REPLICASET_NAME:im,SEMRESATTRS_K8S_REPLICASET_UID:tm,SEMRESATTRS_K8S_STATEFULSET_NAME:sm,SEMRESATTRS_K8S_STATEFULSET_UID:am,SEMRESATTRS_OS_DESCRIPTION:fm,SEMRESATTRS_OS_NAME:mm,SEMRESATTRS_OS_TYPE:hm,SEMRESATTRS_OS_VERSION:gm,SEMRESATTRS_PROCESS_COMMAND:Sm,SEMRESATTRS_PROCESS_COMMAND_ARGS:_m,SEMRESATTRS_PROCESS_COMMAND_LINE:$m,SEMRESATTRS_PROCESS_EXECUTABLE_NAME:bm,SEMRESATTRS_PROCESS_EXECUTABLE_PATH:ym,SEMRESATTRS_PROCESS_OWNER:Tm,SEMRESATTRS_PROCESS_PID:vm,SEMRESATTRS_PROCESS_RUNTIME_DESCRIPTION:xm,SEMRESATTRS_PROCESS_RUNTIME_NAME:wm,SEMRESATTRS_PROCESS_RUNTIME_VERSION:Em,SEMRESATTRS_SERVICE_INSTANCE_ID:km,SEMRESATTRS_SERVICE_NAME:Am,SEMRESATTRS_SERVICE_NAMESPACE:Cm,SEMRESATTRS_SERVICE_VERSION:Lm,SEMRESATTRS_TELEMETRY_AUTO_VERSION:Mm,SEMRESATTRS_TELEMETRY_SDK_LANGUAGE:Pm,SEMRESATTRS_TELEMETRY_SDK_NAME:Rm,SEMRESATTRS_TELEMETRY_SDK_VERSION:Om,SEMRESATTRS_WEBENGINE_DESCRIPTION:Vm,SEMRESATTRS_WEBENGINE_NAME:Im,SEMRESATTRS_WEBENGINE_VERSION:Nm,SemanticAttributes:Hl,SemanticResourceAttributes:Dm,TELEMETRYSDKLANGUAGEVALUES_CPP:"cpp",TELEMETRYSDKLANGUAGEVALUES_DOTNET:mv,TELEMETRYSDKLANGUAGEVALUES_ERLANG:gv,TELEMETRYSDKLANGUAGEVALUES_GO:"go",TELEMETRYSDKLANGUAGEVALUES_JAVA:vv,TELEMETRYSDKLANGUAGEVALUES_NODEJS:bv,TELEMETRYSDKLANGUAGEVALUES_PHP:"php",TELEMETRYSDKLANGUAGEVALUES_PYTHON:yv,TELEMETRYSDKLANGUAGEVALUES_RUBY:Sv,TELEMETRYSDKLANGUAGEVALUES_WEBJS:$v,TelemetrySdkLanguageValues:_v}),wv=((en={})[Rm]="opentelemetry",en[wm]="browser",en[Pm]=$v,en[Om]=Zr,en);var Ev,xv=Math.pow(10,6),Av=Math.pow(10,9);function Cv(e){var t=e/1e3;return[Math.trunc(t),Math.round(e%1e3*xv)]}function kv(){var e=Xr.timeOrigin;if("number"!=typeof e){var t=Xr;e=t.timing&&t.timing.fetchStart}return e}function Lv(e){return Mv(Cv(kv()),Cv("number"==typeof e?e:Xr.now()))}function Rv(e,t){var i=t[0]-e[0],r=t[1]-e[1];return r<0&&(i-=1,r+=Av),[i,r]}function Pv(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function Ov(e){return Pv(e)||"number"==typeof e||e instanceof Date}function Mv(e,t){var i=[e[0]+t[0],e[1]+t[1]];return i[1]>=Av&&(i[1]-=Av,i[0]+=1),i}!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"}(Ev||(Ev={}));var Iv=function(){function e(e){var t;void 0===e&&(e={}),this._propagators=null!==(t=e.propagators)&&void 0!==t?t:[],this._fields=Array.from(new Set(this._propagators.map((function(e){return"function"==typeof e.fields?e.fields():[]})).reduce((function(e,t){return e.concat(t)}),[])))}return e.prototype.inject=function(e,t,i){var r,n;try{for(var a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this._propagators),s=a.next();!s.done;s=a.next()){var o=s.value;try{o.inject(e,t,i)}catch(e){Vi.warn("Failed to inject with "+o.constructor.name+". Err: "+e.message)}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.extract=function(e,t,i){return this._propagators.reduce((function(e,r){try{return r.extract(e,t,i)}catch(e){Vi.warn("Failed to inject with "+r.constructor.name+". Err: "+e.message)}return e}),e)},e.prototype.fields=function(){return this._fields.slice()},e}(),Nv="[_0-9a-z-*/]",Vv=new RegExp("^(?:"+("[a-z]"+Nv+"{0,255}")+"|"+("[a-z0-9]"+Nv+"{0,240}@[a-z]"+Nv+"{0,13}")+")$"),Dv=/^[ -~]{0,255}[!-~]$/,Bv=/,|=/;var Uv=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var i=this._clone();return i._internalState.has(e)&&i._internalState.delete(e),i._internalState.set(e,t),i},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce((function(t,i){return t.push(i+"="+e.get(i)),t}),[]).join(",")},e.prototype._parse=function(e){e.length>512||(this._internalState=e.split(",").reverse().reduce((function(e,t){var i=t.trim(),r=i.indexOf("=");if(-1!==r){var n=i.slice(0,r),a=i.slice(r+1,t.length);(function(e){return Vv.test(e)})(n)&&function(e){return Dv.test(e)&&!Bv.test(e)}(a)&&e.set(n,a)}return e}),new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}(),Fv="traceparent",jv="tracestate",Hv=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");function zv(e){var t=Hv.exec(e);return!t||"00"===t[1]&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}var qv,Wv=function(){function e(){}return e.prototype.inject=function(e,t,i){var r=tr.getSpanContext(e);if(r&&!sr(e)&&yi(r)){var n="00-"+r.traceId+"-"+r.spanId+"-0"+Number(r.traceFlags||Xt.NONE).toString(16);i.set(t,Fv,n),r.traceState&&i.set(t,jv,r.traceState.serialize())}},e.prototype.extract=function(e,t,i){var r=i.get(t,Fv);if(!r)return e;var n=Array.isArray(r)?r[0]:r;if("string"!=typeof n)return e;var a=zv(n);if(!a)return e;a.isRemote=!0;var s=i.get(t,jv);if(s){var o=Array.isArray(s)?s.join(","):s;a.traceState=new Uv("string"==typeof o?o:void 0)}return tr.setSpanContext(e,a)},e.prototype.fields=function(){return[Fv,jv]},e}(),Gv=Ct("OpenTelemetry SDK Context Key RPC_METADATA");!function(e){e.HTTP="http"}(qv||(qv={}));var Qv=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Ti.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),Yv=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Ti.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),Kv=function(){function e(e){var t,i,r,n;this._root=e.root,this._root||(xr(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Yv),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new Yv,this._remoteParentNotSampled=null!==(i=e.remoteParentNotSampled)&&void 0!==i?i:new Qv,this._localParentSampled=null!==(r=e.localParentSampled)&&void 0!==r?r:new Yv,this._localParentNotSampled=null!==(n=e.localParentNotSampled)&&void 0!==n?n:new Qv}return e.prototype.shouldSample=function(e,t,i,r,n,a){var s=tr.getSpanContext(e);return s&&yi(s)?s.isRemote?s.traceFlags&Xt.SAMPLED?this._remoteParentSampled.shouldSample(e,t,i,r,n,a):this._remoteParentNotSampled.shouldSample(e,t,i,r,n,a):s.traceFlags&Xt.SAMPLED?this._localParentSampled.shouldSample(e,t,i,r,n,a):this._localParentNotSampled.shouldSample(e,t,i,r,n,a):this._root.shouldSample(e,t,i,r,n,a)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),Xv=function(){function e(e){void 0===e&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}return e.prototype.shouldSample=function(e,t){return{decision:vi(t)&&this._accumulate(t)<this._upperBound?Ti.RECORD_AND_SAMPLED:Ti.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e},e.prototype._accumulate=function(e){for(var t=0,i=0;i<e.length/8;i++){var r=8*i;t=(t^parseInt(e.slice(r,r+8),16))>>>0}return t},e}(),Zv="[object Object]",Jv="[object Null]",eb="[object Undefined]",tb=Function.prototype.toString,ib=tb.call(Object),rb=function(e,t){return function(i){return e(t(i))}}(Object.getPrototypeOf,Object),nb=Object.prototype,ab=nb.hasOwnProperty,sb=Symbol?Symbol.toStringTag:void 0,ob=nb.toString;function lb(e){if(!function(e){return null!=e&&"object"==typeof e}(e)||function(e){return null==e?void 0===e?eb:Jv:sb&&sb in Object(e)?function(e){var t=ab.call(e,sb),i=e[sb],r=!1;try{e[sb]=void 0,r=!0}catch{}var n=ob.call(e);return r&&(t?e[sb]=i:delete e[sb]),n}(e):function(e){return ob.call(e)}(e)}(e)!==Zv)return!1;var t=rb(e);if(null===t)return!0;var i=ab.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&tb.call(i)===ib}var ub=20;function cb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=e.shift(),r=new WeakMap;e.length>0;)i=pb(i,e.shift(),0,r);return i}function db(e){return fb(e)?e.slice():e}function pb(e,t,i,r){var n;if(void 0===i&&(i=0),!(i>ub)){if(i++,vb(e)||vb(t)||mb(t))n=db(t);else if(fb(e)){if(n=e.slice(),fb(t))for(var a=0,s=t.length;a<s;a++)n.push(db(t[a]));else if(gb(t))for(a=0,s=(o=Object.keys(t)).length;a<s;a++){n[l=o[a]]=db(t[l])}}else if(gb(e))if(gb(t)){if(!function(e,t){return!(!lb(e)||!lb(t))}(e,t))return t;n=Object.assign({},e);var o;for(a=0,s=(o=Object.keys(t)).length;a<s;a++){var l,u=t[l=o[a]];if(vb(u))typeof u>"u"?delete n[l]:n[l]=u;else{var c=n[l],d=u;if(hb(e,l,r)||hb(t,l,r))delete n[l];else{if(gb(c)&&gb(d)){var p=r.get(c)||[],h=r.get(d)||[];p.push({obj:e,key:l}),h.push({obj:t,key:l}),r.set(c,p),r.set(d,h)}n[l]=pb(n[l],u,i,r)}}}}else n=t;return n}}function hb(e,t,i){for(var r=i.get(e[t])||[],n=0,a=r.length;n<a;n++){var s=r[n];if(s.key===t&&s.obj===e)return!0}return!1}function fb(e){return Array.isArray(e)}function mb(e){return"function"==typeof e}function gb(e){return!vb(e)&&!fb(e)&&!mb(e)&&"object"==typeof e}function vb(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||typeof e>"u"||e instanceof Date||e instanceof RegExp||null===e}var bb=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),yb=function(e){function t(i){var r=e.call(this,i)||this;return Object.setPrototypeOf(r,t.prototype),r}return bb(t,e),t}(Error);function Sb(e,t){return"string"==typeof t?e===t:!!e.match(t)}var $b=function(){function e(){var e=this;this._promise=new Promise((function(t,i){e._resolve=t,e._reject=i}))}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(e){this._resolve(e)},e.prototype.reject=function(e){this._reject(e)},e}(),_b=function(){function e(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new $b}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var e,t=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,function(e,t,i){if(i||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}([this._that],function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s}(i),!1))).then((function(e){return t._deferred.resolve(e)}),(function(e){return t._deferred.reject(e)}))}catch(e){this._deferred.reject(e)}}return this._deferred.promise},e}();var Tb,wb={_export:function(e,t){return new Promise((function(i){Ni.with(ar(Ni.active()),(function(){e.export(t,(function(e){i(e)}))}))}))}},Eb=Object.freeze({__proto__:null,AlwaysOffSampler:Qv,AlwaysOnSampler:Yv,AnchoredClock:gr,BindOnceFuture:_b,CompositePropagator:Iv,DEFAULT_ATTRIBUTE_COUNT_LIMIT:Ir,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:Mr,DEFAULT_ENVIRONMENT:Nr,DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:128,DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:128,get ExportResultCode(){return Ev},ParentBasedSampler:Kv,get RPCType(){return qv},RandomIdGenerator:Qr,SDK_INFO:wv,TRACE_PARENT_HEADER:Fv,TRACE_STATE_HEADER:jv,TimeoutError:yb,TraceIdRatioBasedSampler:Xv,TraceState:Uv,get TracesSamplerValues(){return wr},VERSION:Zr,W3CBaggagePropagator:mr,W3CTraceContextPropagator:Wv,_globalThis:Hr,addHrTimes:Mv,baggageUtils:fr,callWithTimeout:function(e,t){var i,r=new Promise((function(e,r){i=setTimeout((function(){r(new yb("Operation timed out."))}),t)}));return Promise.race([e,r]).then((function(e){return clearTimeout(i),e}),(function(e){throw clearTimeout(i),e}))},deleteRPCMetadata:function(e){return e.deleteValue(Gv)},getEnv:zr,getEnvWithoutDefaults:qr,getRPCMetadata:function(e){return e.getValue(Gv)},getTimeOrigin:kv,globalErrorHandler:xr,hexToBase64:function(e){return btoa(String.fromCharCode.apply(String,function(e,t,i){if(i||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s}(Gr(e)),!1)))},hexToBinary:Gr,hrTime:Lv,hrTimeDuration:Rv,hrTimeToMicroseconds:function(e){return 1e6*e[0]+e[1]/1e3},hrTimeToMilliseconds:function(e){return 1e3*e[0]+e[1]/1e6},hrTimeToNanoseconds:function(e){return e[0]*Av+e[1]},hrTimeToTimeStamp:function(e){var t=""+"0".repeat(9)+e[1]+"Z",i=t.substr(t.length-9-1);return new Date(1e3*e[0]).toISOString().replace("000Z",i)},internal:wb,isAttributeKey:Sr,isAttributeValue:$r,isTimeInput:Ov,isTimeInputHrTime:Pv,isTracingSuppressed:sr,isUrlIgnored:function(e,t){var i,r;if(!t)return!1;try{for(var n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),a=n.next();!a.done;a=n.next()){if(Sb(e,a.value))return!0}}catch(e){i={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return!1},isWrapped:function(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped},loggingErrorHandler:Tr,merge:cb,millisToHrTime:Cv,otperformance:Xr,parseEnvironment:jr,parseTraceParent:zv,sanitizeAttributes:yr,setGlobalErrorHandler:function(e){Er=e},setRPCMetadata:function(e,t){return e.setValue(Gv,t)},suppressTracing:ar,timeInputToHrTime:function(e){if(Pv(e))return e;if("number"==typeof e)return e<kv()?Lv(e):Cv(e);if(e instanceof Date)return Cv(e.getTime());throw TypeError("Invalid input type")},unrefTimer:function(e){},unsuppressTracing:function(e){return e.deleteValue(nr)},urlMatches:Sb}),xb=function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s},Ab=function(){function e(e,t,i,r,n,a,s,o,l,u){void 0===s&&(s=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:Ei.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=i,this._spanContext=r,this.parentSpanId=a,this.kind=n,this.links=s;var c=Date.now();this._performanceStartTime=Xr.now(),this._performanceOffset=c-(this._performanceStartTime+kv()),this._startTimeProvided=null!=o,this.startTime=this._getTime(o??c),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,null!=u&&this.setAttributes(u),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t)}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return null==t||this._isSpanEnded()?this:0===e.length?(Vi.warn("Invalid attribute key: "+e),this):$r(t)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(t),this):(Vi.warn("Invalid attribute value set for key: "+e),this)},e.prototype.setAttributes=function(e){var t,i;try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(e)),n=r.next();!n.done;n=r.next()){var a=xb(n.value,2),s=a[0],o=a[1];this.setAttribute(s,o)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}return this},e.prototype.addEvent=function(e,t,i){if(this._isSpanEnded())return this;if(0===this._spanLimits.eventCountLimit)return Vi.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(0===this._droppedEventsCount&&Vi.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),Ov(t)&&(Ov(i)||(i=t),t=void 0);var r=yr(t);return this.events.push({name:e,attributes:r,time:this._getTime(i),droppedAttributesCount:0}),this},e.prototype.addLink=function(e){return this.links.push(e),this},e.prototype.addLinks=function(e){var t;return(t=this.links).push.apply(t,function(e,t,i){if(i||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}([],xb(e),!1)),this},e.prototype.setStatus=function(e){return this._isSpanEnded()||(this.status=e),this},e.prototype.updateName=function(e){return this._isSpanEnded()||(this.name=e),this},e.prototype.end=function(e){this._isSpanEnded()?Vi.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once."):(this._ended=!0,this.endTime=this._getTime(e),this._duration=Rv(this.startTime,this.endTime),this._duration[0]<0&&(Vi.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&Vi.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this))},e.prototype._getTime=function(e){if("number"==typeof e&&e<Xr.now())return Lv(e+this._performanceOffset);if("number"==typeof e)return Cv(e);if(e instanceof Date)return Cv(e.getTime());if(Pv(e))return e;if(this._startTimeProvided)return Cv(Date.now());var t=Xr.now()-this._performanceStartTime;return Mv(this.startTime,Cv(t))},e.prototype.isRecording=function(){return!1===this._ended},e.prototype.recordException=function(e,t){var i={};"string"==typeof e?i[zs]=e:e&&(e.code?i[Hs]=e.code.toString():e.name&&(i[Hs]=e.name),e.message&&(i[zs]=e.message),e.stack&&(i[qs]=e.stack)),i[Hs]||i[zs]?this.addEvent("exception",i,t):Vi.warn("Failed to record an exception "+e)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&Vi.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substr(0,t)},e.prototype._truncateToSize=function(e){var t=this,i=this._attributeValueLengthLimit;return i<=0?(Vi.warn("Attribute value limit must be positive, got "+i),e):"string"==typeof e?this._truncateToLimitUtil(e,i):Array.isArray(e)?e.map((function(e){return"string"==typeof e?t._truncateToLimitUtil(e,i):e})):e},e}();!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(Tb||(Tb={}));var Cb=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Tb.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),kb=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Tb.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),Lb=function(){function e(e){var t,i,r,n;this._root=e.root,this._root||(xr(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new kb),this._remoteParentSampled=null!==(t=e.remoteParentSampled)&&void 0!==t?t:new kb,this._remoteParentNotSampled=null!==(i=e.remoteParentNotSampled)&&void 0!==i?i:new Cb,this._localParentSampled=null!==(r=e.localParentSampled)&&void 0!==r?r:new kb,this._localParentNotSampled=null!==(n=e.localParentNotSampled)&&void 0!==n?n:new Cb}return e.prototype.shouldSample=function(e,t,i,r,n,a){var s=tr.getSpanContext(e);return s&&yi(s)?s.isRemote?s.traceFlags&Xt.SAMPLED?this._remoteParentSampled.shouldSample(e,t,i,r,n,a):this._remoteParentNotSampled.shouldSample(e,t,i,r,n,a):s.traceFlags&Xt.SAMPLED?this._localParentSampled.shouldSample(e,t,i,r,n,a):this._localParentNotSampled.shouldSample(e,t,i,r,n,a):this._root.shouldSample(e,t,i,r,n,a)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),Rb=function(){function e(e){void 0===e&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(4294967295*this._ratio)}return e.prototype.shouldSample=function(e,t){return{decision:vi(t)&&this._accumulate(t)<this._upperBound?Tb.RECORD_AND_SAMPLED:Tb.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(e){return"number"!=typeof e||isNaN(e)?0:e>=1?1:e<=0?0:e},e.prototype._accumulate=function(e){for(var t=0,i=0;i<e.length/8;i++){var r=8*i;t=(t^parseInt(e.slice(r,r+8),16))>>>0}return t},e}(),Pb=zr(),Ob=wr.AlwaysOn,Mb=1;function Ib(){return{sampler:Nb(Pb),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:zr().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:zr().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:zr().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:zr().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:zr().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:zr().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:zr().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:zr().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function Nb(e){switch(void 0===e&&(e=zr()),e.OTEL_TRACES_SAMPLER){case wr.AlwaysOn:return new kb;case wr.AlwaysOff:return new Cb;case wr.ParentBasedAlwaysOn:return new Lb({root:new kb});case wr.ParentBasedAlwaysOff:return new Lb({root:new Cb});case wr.TraceIdRatio:return new Rb(Vb(e));case wr.ParentBasedTraceIdRatio:return new Lb({root:new Rb(Vb(e))});default:return Vi.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+Ob+'".'),new kb}}function Vb(e){if(void 0===e.OTEL_TRACES_SAMPLER_ARG||""===e.OTEL_TRACES_SAMPLER_ARG)return Vi.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+Mb+"."),Mb;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(Vi.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+Mb+"."),Mb):t<0||t>1?(Vi.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+Mb+"."),Mb):t}var Db=function(){function e(e,t){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var i=zr();this._maxExportBatchSize="number"==typeof t?.maxExportBatchSize?t.maxExportBatchSize:i.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof t?.maxQueueSize?t.maxQueueSize:i.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof t?.scheduledDelayMillis?t.scheduledDelayMillis:i.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof t?.exportTimeoutMillis?t.exportTimeoutMillis:i.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new _b(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(Vi.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&Xt.SAMPLED&&this._addToBuffer(e)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var e=this;return Promise.resolve().then((function(){return e.onShutdown()})).then((function(){return e._flushAll()})).then((function(){return e._exporter.shutdown()}))},e.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize)return 0===this._droppedSpansCount&&Vi.debug("maxQueueSize reached, dropping spans"),void this._droppedSpansCount++;this._droppedSpansCount>0&&(Vi.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},e.prototype._flushAll=function(){var e=this;return new Promise((function(t,i){for(var r=[],n=0,a=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize);n<a;n++)r.push(e._flushOneBatch());Promise.all(r).then((function(){t()})).catch(i)}))},e.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise((function(t,i){var r=setTimeout((function(){i(new Error("Timeout"))}),e._exportTimeoutMillis);Ni.with(ar(Ni.active()),(function(){var n;e._finishedSpans.length<=e._maxExportBatchSize?(n=e._finishedSpans,e._finishedSpans=[]):n=e._finishedSpans.splice(0,e._maxExportBatchSize);for(var a=function(){return e._exporter.export(n,(function(e){var n;clearTimeout(r),e.code===Ev.SUCCESS?t():i(null!==(n=e.error)&&void 0!==n?n:new Error("BatchSpanProcessor: span export failed"))}))},s=null,o=0,l=n.length;o<l;o++){var u=n[o];u.resource.asyncAttributesPending&&u.resource.waitForAsyncAttributes&&(s??(s=[]),s.push(u.resource.waitForAsyncAttributes()))}null===s?a():Promise.all(s).then(a,(function(e){xr(e),i(e)}))}))}))},e.prototype._maybeStartTimer=function(){var e=this;if(!this._isExporting){var t=function(){e._isExporting=!0,e._flushOneBatch().finally((function(){e._isExporting=!1,e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())})).catch((function(t){e._isExporting=!1,xr(t)}))};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();void 0===this._timer&&(this._timer=setTimeout((function(){return t()}),this._scheduledDelayMillis))}},e.prototype._clearTimer=function(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)},e}(),Bb=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ub=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.onInit(i),r}return Bb(t,e),t.prototype.onInit=function(e){var t=this;!0!==e?.disableAutoFlushOnDocumentHide&&typeof document<"u"&&(this._visibilityChangeListener=function(){"hidden"===document.visibilityState&&t.forceFlush()},this._pageHideListener=function(){t.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},t.prototype.onShutdown=function(){typeof document<"u"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},t}(Db),Fb=function(){this.generateTraceId=Hb(16),this.generateSpanId=Hb(8)},jb=Array(32);function Hb(e){return function(){for(var t=0;t<2*e;t++)jb[t]=Math.floor(16*Math.random())+48,jb[t]>=58&&(jb[t]+=39);return String.fromCharCode.apply(null,jb.slice(0,2*e))}}var zb=function(){function e(e,t,i){this._tracerProvider=i;var r=function(e){var t={sampler:Nb()},i=Ib(),r=Object.assign({},i,t,e);return r.generalLimits=Object.assign({},i.generalLimits,e.generalLimits||{}),r.spanLimits=Object.assign({},i.spanLimits,e.spanLimits||{}),r}(t);this._sampler=r.sampler,this._generalLimits=r.generalLimits,this._spanLimits=r.spanLimits,this._idGenerator=t.idGenerator||new Fb,this.resource=i.resource,this.instrumentationLibrary=e}return e.prototype.startSpan=function(e,t,i){var r,n,a;void 0===t&&(t={}),void 0===i&&(i=Ni.active()),t.root&&(i=tr.deleteSpan(i));var s=tr.getSpan(i);if(sr(i))return Vi.debug("Instrumentation suppressed, returning Noop Span"),tr.wrapSpanContext(si);var o,l,u,c=s?.spanContext(),d=this._idGenerator.generateSpanId();c&&tr.isSpanContextValid(c)?(o=c.traceId,l=c.traceState,u=c.spanId):o=this._idGenerator.generateTraceId();var p=null!==(r=t.kind)&&void 0!==r?r:wi.INTERNAL,h=(null!==(n=t.links)&&void 0!==n?n:[]).map((function(e){return{context:e.context,attributes:yr(e.attributes)}})),f=yr(t.attributes),m=this._sampler.shouldSample(i,o,e,p,f,h);l=null!==(a=m.traceState)&&void 0!==a?a:l;var g={traceId:o,spanId:d,traceFlags:m.decision===Ti.RECORD_AND_SAMPLED?Xt.SAMPLED:Xt.NONE,traceState:l};if(m.decision===Ti.NOT_RECORD)return Vi.debug("Recording is off, propagating context in a non-recording span"),tr.wrapSpanContext(g);var v=yr(Object.assign(f,m.attributes));return new Ab(this,i,e,g,p,u,h,t.startTime,void 0,v)},e.prototype.startActiveSpan=function(e,t,i,r){var n,a,s;if(!(arguments.length<2)){2===arguments.length?s=t:3===arguments.length?(n=t,s=i):(n=t,a=i,s=r);var o=a??Ni.active(),l=this.startSpan(e,n,o),u=tr.setSpan(o,l);return Ni.with(u,s,void 0,l)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}();var qb,Wb=function(){return Wb=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},Wb.apply(this,arguments)},Gb=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):function(e){return e instanceof i?e:new i((function(t){t(e)}))}(e.value).then(s,o)}l((r=r.apply(e,t||[])).next())}))},Qb=function(e,t){var i,r,n,a,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&a[0]?r.return:a[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,a[1])).done)return n;switch(r=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){s.label=a[1];break}if(6===a[0]&&s.label<n[1]){s.label=n[1],n=a;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(a);break}n[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}},Yb=function(){function e(e,t){var i,r=this;this._attributes=e,this.asyncAttributesPending=null!=t,this._syncAttributes=null!==(i=this._attributes)&&void 0!==i?i:{},this._asyncAttributesPromise=t?.then((function(e){return r._attributes=Object.assign({},r._attributes,e),r.asyncAttributesPending=!1,e}),(function(e){return Vi.debug("a resource's async attributes promise rejected: %s",e),r.asyncAttributesPending=!1,{}}))}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e(((t={})[Am]="unknown_service",t[Pm]=wv[Pm],t[Rm]=wv[Rm],t[Om]=wv[Om],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&Vi.error("Accessing resource attributes before async attributes settled"),null!==(e=this._attributes)&&void 0!==e?e:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return Gb(this,void 0,void 0,(function(){return Qb(this,(function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.merge=function(t){var i,r=this;if(!t)return this;var n=Wb(Wb({},this._syncAttributes),null!==(i=t._syncAttributes)&&void 0!==i?i:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(n);var a=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then((function(e){var i,n=function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s}(e,2),a=n[0],s=n[1];return Wb(Wb(Wb(Wb({},r._syncAttributes),a),null!==(i=t._syncAttributes)&&void 0!==i?i:t.attributes),s)}));return new e(n,a)},e.EMPTY=new e({}),e}(),Kb=function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xb=function(){function e(e){this._spanProcessors=e}return e.prototype.forceFlush=function(){var e,t,i=[];try{for(var r=Kb(this._spanProcessors),n=r.next();!n.done;n=r.next()){var a=n.value;i.push(a.forceFlush())}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return new Promise((function(e){Promise.all(i).then((function(){e()})).catch((function(t){xr(t||new Error("MultiSpanProcessor: forceFlush failed")),e()}))}))},e.prototype.onStart=function(e,t){var i,r;try{for(var n=Kb(this._spanProcessors),a=n.next();!a.done;a=n.next()){a.value.onStart(e,t)}}catch(e){i={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}},e.prototype.onEnd=function(e){var t,i;try{for(var r=Kb(this._spanProcessors),n=r.next();!n.done;n=r.next()){n.value.onEnd(e)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}},e.prototype.shutdown=function(){var e,t,i=[];try{for(var r=Kb(this._spanProcessors),n=r.next();!n.done;n=r.next()){var a=n.value;i.push(a.shutdown())}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return new Promise((function(e,t){Promise.all(i).then((function(){e()}),t)}))},e}(),Zb=function(){function e(){}return e.prototype.onStart=function(e,t){},e.prototype.onEnd=function(e){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}();!function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"}(qb||(qb={}));var Jb=function(){function e(e){var t;void 0===e&&(e={}),this._registeredSpanProcessors=[],this._tracers=new Map;var i=cb({},Ib(),function(e){var t,i,r,n,a,s,o,l,u,c,d,p,h=Object.assign({},e.spanLimits),f=qr();return h.attributeCountLimit=null!==(s=null!==(a=null!==(n=null!==(i=null===(t=e.spanLimits)||void 0===t?void 0:t.attributeCountLimit)&&void 0!==i?i:null===(r=e.generalLimits)||void 0===r?void 0:r.attributeCountLimit)&&void 0!==n?n:f.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)&&void 0!==a?a:f.OTEL_ATTRIBUTE_COUNT_LIMIT)&&void 0!==s?s:Ir,h.attributeValueLengthLimit=null!==(p=null!==(d=null!==(c=null!==(l=null===(o=e.spanLimits)||void 0===o?void 0:o.attributeValueLengthLimit)&&void 0!==l?l:null===(u=e.generalLimits)||void 0===u?void 0:u.attributeValueLengthLimit)&&void 0!==c?c:f.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==d?d:f.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)&&void 0!==p?p:Mr,Object.assign({},e,{spanLimits:h})}(e));this.resource=null!==(t=i.resource)&&void 0!==t?t:Yb.empty(),this.resource=Yb.default().merge(this.resource),this._config=Object.assign({},i,{resource:this.resource});var r=this._buildExporterFromEnv();if(void 0!==r){var n=new Ub(r);this.activeSpanProcessor=n}else this.activeSpanProcessor=new Zb}return e.prototype.getTracer=function(e,t,i){var r=e+"@"+(t||"")+":"+(i?.schemaUrl||"");return this._tracers.has(r)||this._tracers.set(r,new zb({name:e,version:t,schemaUrl:i?.schemaUrl},this._config,this)),this._tracers.get(r)},e.prototype.addSpanProcessor=function(e){0===this._registeredSpanProcessors.length&&this.activeSpanProcessor.shutdown().catch((function(e){return Vi.error("Error while trying to shutdown current span processor",e)})),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new Xb(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(e){void 0===e&&(e={}),tr.setGlobalTracerProvider(this),void 0===e.propagator&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&Ni.setGlobalContextManager(e.contextManager),e.propagator&&Zi.setGlobalPropagator(e.propagator)},e.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map((function(t){return new Promise((function(i){var r,n=setTimeout((function(){i(new Error("Span processor did not completed within timeout period of "+e+" ms")),r=qb.timeout}),e);t.forceFlush().then((function(){clearTimeout(n),r!==qb.timeout&&(r=qb.resolved,i(r))})).catch((function(e){clearTimeout(n),r=qb.error,i(e)}))}))}));return new Promise((function(e,i){Promise.all(t).then((function(t){var r=t.filter((function(e){return e!==qb.resolved}));r.length>0?i(r):e()})).catch((function(e){return i([e])}))}))},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(e){var t;return null===(t=this.constructor._registeredPropagators.get(e))||void 0===t?void 0:t()},e.prototype._getSpanExporter=function(e){var t;return null===(t=this.constructor._registeredExporters.get(e))||void 0===t?void 0:t()},e.prototype._buildPropagatorFromEnv=function(){var e=this,t=Array.from(new Set(zr().OTEL_PROPAGATORS)),i=t.map((function(t){var i=e._getPropagator(t);return i||Vi.warn('Propagator "'+t+'" requested through environment variable is unavailable.'),i})).reduce((function(e,t){return t&&e.push(t),e}),[]);if(0!==i.length)return 1===t.length?i[0]:new Iv({propagators:i})},e.prototype._buildExporterFromEnv=function(){var e=zr().OTEL_TRACES_EXPORTER;if("none"!==e&&""!==e){var t=this._getSpanExporter(e);return t||Vi.error('Exporter "'+e+'" requested through environment variable is unavailable.'),t}},e._registeredPropagators=new Map([["tracecontext",function(){return new Wv}],["baggage",function(){return new mr}]]),e._registeredExporters=new Map,e}(),ey=function(){function e(){this._enabled=!1,this._currentContext=Rt}return e.prototype._bindFunction=function(e,t){void 0===e&&(e=Rt);var i=this,r=function(){for(var r=this,n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return i.with(e,(function(){return t.apply(r,n)}))};return Object.defineProperty(r,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),r},e.prototype.active=function(){return this._currentContext},e.prototype.bind=function(e,t){return void 0===e&&(e=this.active()),"function"==typeof t?this._bindFunction(e,t):t},e.prototype.disable=function(){return this._currentContext=Rt,this._enabled=!1,this},e.prototype.enable=function(){return this._enabled||(this._enabled=!0,this._currentContext=Rt),this},e.prototype.with=function(e,t,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];var a=this._currentContext;this._currentContext=e||Rt;try{return t.call.apply(t,function(e,t,i){if(i||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}([i],function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s}(r),!1))}finally{this._currentContext=a}},e}(),ty=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),iy=function(e){function t(t){void 0===t&&(t={});var i=e.call(this,t)||this;if(t.contextManager)throw"contextManager should be defined in register method not in constructor";if(t.propagator)throw"propagator should be defined in register method not in constructor";return i}return ty(t,e),t.prototype.register=function(t){void 0===t&&(t={}),void 0===t.contextManager&&(t.contextManager=new ey),t.contextManager&&t.contextManager.enable(),e.prototype.register.call(this,t)},t}(Jb),ry=function(){function e(){}return e.prototype.emit=function(e){},e}(),ny=function(){function e(){}return e.prototype.getLogger=function(e,t,i){return new ry},e}(),ay=new ny,sy="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},oy=Symbol.for("io.opentelemetry.js.api.logs"),ly=sy;var uy=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalLoggerProvider=function(e){return ly[oy]?this.getLoggerProvider():(ly[oy]=function(e,t,i){return function(r){return r===e?t:i}}(1,e,ay),e)},e.prototype.getLoggerProvider=function(){var e,t;return null!==(t=null===(e=ly[oy])||void 0===e?void 0:e.call(ly,1))&&void 0!==t?t:ay},e.prototype.getLogger=function(e,t,i){return this.getLoggerProvider().getLogger(e,t,i)},e.prototype.disable=function(){delete ly[oy]},e}(),cy=uy.getInstance();var dy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function py(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var i=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(i,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),i}var hy={},fy=py(rr),my=py(Tv),gy=py(Eb),vy={},by={};Object.defineProperty(by,"__esModule",{value:!0}),by.defaultServiceName=void 0,by.defaultServiceName=function(){return"unknown_service"},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0;var t=by;Object.defineProperty(e,"defaultServiceName",{enumerable:!0,get:function(){return t.defaultServiceName}})}(vy),Object.defineProperty(hy,"__esModule",{value:!0});var yy=hy.Resource=void 0,Sy=fy,$y=my,_y=gy,Ty=vy,wy=class e{static empty(){return e.EMPTY}static default(){return new e({[$y.SEMRESATTRS_SERVICE_NAME]:(0,Ty.defaultServiceName)(),[$y.SEMRESATTRS_TELEMETRY_SDK_LANGUAGE]:_y.SDK_INFO[$y.SEMRESATTRS_TELEMETRY_SDK_LANGUAGE],[$y.SEMRESATTRS_TELEMETRY_SDK_NAME]:_y.SDK_INFO[$y.SEMRESATTRS_TELEMETRY_SDK_NAME],[$y.SEMRESATTRS_TELEMETRY_SDK_VERSION]:_y.SDK_INFO[$y.SEMRESATTRS_TELEMETRY_SDK_VERSION]})}get attributes(){var e;return this.asyncAttributesPending&&Sy.diag.error("Accessing resource attributes before async attributes settled"),null!==(e=this._attributes)&&void 0!==e?e:{}}async waitForAsyncAttributes(){this.asyncAttributesPending&&await this._asyncAttributesPromise}merge(t){var i;if(!t)return this;let r=Object.assign(Object.assign({},this._syncAttributes),null!==(i=t._syncAttributes)&&void 0!==i?i:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(r);let n=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then((([e,i])=>{var r;return Object.assign(Object.assign(Object.assign(Object.assign({},this._syncAttributes),e),null!==(r=t._syncAttributes)&&void 0!==r?r:t.attributes),i)}));return new e(r,n)}constructor(e,t){var i;this._attributes=e,this.asyncAttributesPending=null!=t,this._syncAttributes=null!==(i=this._attributes)&&void 0!==i?i:{},this._asyncAttributesPromise=t?.then((e=>(this._attributes=Object.assign({},this._attributes,e),this.asyncAttributesPending=!1,e)),(e=>(Sy.diag.debug("a resource's async attributes promise rejected: %s",e),this.asyncAttributesPending=!1,{})))}};yy=hy.Resource=wy,wy.EMPTY=new wy({});var Ey,xy=typeof performance<"u";function Ay(){return function(e){return Math.round(1e6*e)}(function(){let e;return e=xy&&performance.now?performance.timeOrigin?performance.timeOrigin+performance.now():performance.timing&&performance.timing.navigationStart?performance.timing.navigationStart+performance.now():Date.now()+performance.now():Date.now(),e}())}var Cy=class{initData(e){if("form"===e.dataType){let t=new FormData;for(let i in e.data)if(Object.prototype.hasOwnProperty.call(e.data,i)){let r=e.data[i];"object"==typeof r&&!(r instanceof Blob)&&(r=JSON.stringify(r)),t.append(i,r)}return t}return"blob"===e.dataType?e.data:JSON.stringify(e.data)}initQueryParams(e){let t=e.queryParams||{},i=[];e.sdkVersion&&(t.sdkVersion=e.sdkVersion);for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e]&&i.push(e+"="+t[e]);return i.length?"?"+i.join("&"):""}doRequest(){let e=new XMLHttpRequest;e.open("POST",this.url);for(let t in this.headers)Object.prototype.hasOwnProperty.call(this.headers,t)&&e.setRequestHeader(t,this.headers[t]);return e.responseType="json",e.onload=this.xhrHandler,e.onerror=this.xhrHandler,e.onabort=this.xhrHandler,e.ontimeout=this.xhrHandler,e.send(this.data),e}retry(){this.retryInterval=Math.min(2*this.retryInterval,this.maxRetryInterval),this.retryCount--,this.xhr=this.doRequest()}xhrHandler(e){let t=this.xhr;t&&(("timeout"===e.type||"error"===e.type&&t.readyState===XMLHttpRequest.DONE&&0===t.status)&&this.retryCount>0?setTimeout(this.retry,this.retryInterval):(typeof window<"u"&&window.removeEventListener("beforeunload",this.onBeforeUnload),this.onRequestEnd&&this.onRequestEnd()))}onBeforeUnload(){void 0===Ey&&(Ey="keepalive"in new Request("")),Ey&&(this.xhr&&this.xhr.abort(),fetch(this.url,{headers:this.headers,method:"POST",body:this.data,keepalive:!0}))}constructor(e){this.maxRetryInterval=3e5,this.headers={},this.retryInterval=1e4,this.retryCount=5,this.onBeforeUnload=this.onBeforeUnload.bind(this),this.xhrHandler=this.xhrHandler.bind(this),this.retry=this.retry.bind(this),this.dataType=e.dataType,this.data=this.initData(e),this.url=(e.apiHost||"https://api-hprof.odkl.ru")+e.apiUrl+this.initQueryParams(e),"json"===this.dataType?this.headers["Content-Type"]="application/json;charset=utf-8":"blob"===this.dataType&&(this.headers["Content-Type"]="application/octet-stream"),e.beforeUnload?this.onBeforeUnload():(typeof window<"u"&&window.addEventListener("beforeunload",this.onBeforeUnload),this.onRequestEnd=e.onRequestEnd,this.xhr=this.doRequest())}};var ky={},Ly={},Ry={},Py={},Oy={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0,(t=e.TracesSamplerValues||(e.TracesSamplerValues={})).AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"}(Oy),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=e.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT=e.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT=e.DEFAULT_ATTRIBUTE_COUNT_LIMIT=e.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=void 0;let t=fy,i=Oy,r=",",n=["OTEL_SDK_DISABLED"];function a(e){return n.indexOf(e)>-1}let s=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function o(e){return s.indexOf(e)>-1}let l=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function u(e){return l.indexOf(e)>-1}function c(e,t,i){if(typeof i[e]>"u")return;let r=String(i[e]);t[e]="true"===r.toLowerCase()}function d(e,t,i,r=-1/0,n=1/0){if(typeof i[e]<"u"){let a=Number(i[e]);isNaN(a)||(t[e]=a<r?r:a>n?n:a)}}function p(e,t,i,n=r){let a=i[e];"string"==typeof a&&(t[e]=a.split(n).map((e=>e.trim())))}e.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=1/0,e.DEFAULT_ATTRIBUTE_COUNT_LIMIT=128,e.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT=128,e.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT=128,e.DEFAULT_ENVIRONMENT={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:t.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:e.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_ATTRIBUTE_COUNT_LIMIT:e.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:e.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:e.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:e.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:e.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:e.DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:e.DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:i.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};let h={ALL:t.DiagLogLevel.ALL,VERBOSE:t.DiagLogLevel.VERBOSE,DEBUG:t.DiagLogLevel.DEBUG,INFO:t.DiagLogLevel.INFO,WARN:t.DiagLogLevel.WARN,ERROR:t.DiagLogLevel.ERROR,NONE:t.DiagLogLevel.NONE};function f(e,t,i){let r=i[e];if("string"==typeof r){let i=h[r.toUpperCase()];null!=i&&(t[e]=i)}}e.parseEnvironment=function(t){let i={};for(let r in e.DEFAULT_ENVIRONMENT){let e=r;if("OTEL_LOG_LEVEL"===e)f(e,i,t);else if(a(e))c(e,i,t);else if(o(e))d(e,i,t);else if(u(e))p(e,i,t);else{let r=t[e];typeof r<"u"&&null!==r&&(i[e]=String(r))}}return i}}(Py);var My={};Object.defineProperty(My,"__esModule",{value:!0}),My._globalThis=void 0,My._globalThis="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof dy?dy:{},Object.defineProperty(Ry,"__esModule",{value:!0}),Ry.getEnvWithoutDefaults=Ry.getEnv=void 0;var Iy=Py,Ny=My;Ry.getEnv=function(){let e=(0,Iy.parseEnvironment)(Ny._globalThis);return Object.assign({},Iy.DEFAULT_ENVIRONMENT,e)},Ry.getEnvWithoutDefaults=function(){return(0,Iy.parseEnvironment)(Ny._globalThis)};var Vy={},Dy={};function By(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}Object.defineProperty(Dy,"__esModule",{value:!0}),Dy.hexToBinary=void 0,Dy.hexToBinary=function(e){let t=new Uint8Array(e.length/2),i=0;for(let r=0;r<e.length;r+=2){let n=By(e.charCodeAt(r)),a=By(e.charCodeAt(r+1));t[i++]=n<<4|a}return t},Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.hexToBase64=void 0;var Uy=Dy;Vy.hexToBase64=function(e){return btoa(String.fromCharCode(...(0,Uy.hexToBinary)(e)))};var Fy={};Object.defineProperty(Fy,"__esModule",{value:!0}),Fy.RandomIdGenerator=void 0;Fy.RandomIdGenerator=class{constructor(){this.generateTraceId=Hy(16),this.generateSpanId=Hy(8)}};var jy=Array(32);function Hy(e){return function(){for(let t=0;t<2*e;t++)jy[t]=Math.floor(16*Math.random())+48,jy[t]>=58&&(jy[t]+=39);return String.fromCharCode.apply(null,jy.slice(0,2*e))}}var zy={};Object.defineProperty(zy,"__esModule",{value:!0}),zy.otperformance=void 0,zy.otperformance=performance;var qy={},Wy={};Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.VERSION=void 0,Wy.VERSION="1.25.1",Object.defineProperty(qy,"__esModule",{value:!0}),qy.SDK_INFO=void 0;var Gy=Wy,Qy=my;qy.SDK_INFO={[Qy.SEMRESATTRS_TELEMETRY_SDK_NAME]:"opentelemetry",[Qy.SEMRESATTRS_PROCESS_RUNTIME_NAME]:"browser",[Qy.SEMRESATTRS_TELEMETRY_SDK_LANGUAGE]:Qy.TELEMETRYSDKLANGUAGEVALUES_WEBJS,[Qy.SEMRESATTRS_TELEMETRY_SDK_VERSION]:Gy.VERSION};var Yy={};Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.unrefTimer=void 0,Yy.unrefTimer=function(e){},function(e){var t=dy&&dy.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),i=dy&&dy.__exportStar||function(e,i){for(var r in e)"default"!==r&&!Object.prototype.hasOwnProperty.call(i,r)&&t(i,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=e.getEnvWithoutDefaults=void 0;var r=Ry;Object.defineProperty(e,"getEnvWithoutDefaults",{enumerable:!0,get:function(){return r.getEnvWithoutDefaults}}),Object.defineProperty(e,"getEnv",{enumerable:!0,get:function(){return r.getEnv}}),i(My,e),i(Vy,e),i(Fy,e),i(zy,e),i(qy,e),i(Yy,e)}(Ly),Object.defineProperty(ky,"__esModule",{value:!0}),ky.addHrTimes=ky.isTimeInput=ky.isTimeInputHrTime=ky.hrTimeToMicroseconds=ky.hrTimeToMilliseconds=iS=ky.hrTimeToNanoseconds=ky.hrTimeToTimeStamp=ky.hrTimeDuration=ky.timeInputToHrTime=ky.hrTime=ky.getTimeOrigin=ky.millisToHrTime=void 0;var Ky=Ly,Xy=Math.pow(10,6),Zy=Math.pow(10,9);function Jy(e){let t=e/1e3;return[Math.trunc(t),Math.round(e%1e3*Xy)]}function eS(){let e=Ky.otperformance.timeOrigin;if("number"!=typeof e){let t=Ky.otperformance;e=t.timing&&t.timing.fetchStart}return e}function tS(e){return nS(Jy(eS()),Jy("number"==typeof e?e:Ky.otperformance.now()))}ky.millisToHrTime=Jy,ky.getTimeOrigin=eS,ky.hrTime=tS,ky.timeInputToHrTime=function(e){if(rS(e))return e;if("number"==typeof e)return e<eS()?tS(e):Jy(e);if(e instanceof Date)return Jy(e.getTime());throw TypeError("Invalid input type")},ky.hrTimeDuration=function(e,t){let i=t[0]-e[0],r=t[1]-e[1];return r<0&&(i-=1,r+=Zy),[i,r]},ky.hrTimeToTimeStamp=function(e){let t=`${"0".repeat(9)}${e[1]}Z`,i=t.substr(t.length-9-1);return new Date(1e3*e[0]).toISOString().replace("000Z",i)};var iS=ky.hrTimeToNanoseconds=function(e){return e[0]*Zy+e[1]};function rS(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function nS(e,t){let i=[e[0]+t[0],e[1]+t[1]];return i[1]>=Zy&&(i[1]-=Zy,i[0]+=1),i}ky.hrTimeToMilliseconds=function(e){return 1e3*e[0]+e[1]/1e6},ky.hrTimeToMicroseconds=function(e){return 1e6*e[0]+e[1]/1e3},ky.isTimeInputHrTime=rS,ky.isTimeInput=function(e){return rS(e)||"number"==typeof e||e instanceof Date},ky.addHrTimes=nS;var aS=class{clear(){this.data={resourceSpans:[]},this.scopeSpansByResource.clear(),this.spansByResourceAndInstrumentation.forEach((function(e){e.clear()})),this.spansByResourceAndInstrumentation.clear()}getData(){return this.data}addSpan(e){this.getSpansFromMap(e).push(function(e){return{traceId:e.spanContext().traceId,spanId:e.spanContext().spanId,parentSpanId:e.parentSpanId,name:e.name,startTimeUnixNano:String(iS(e.startTime)),endTimeUnixNano:e.ended?String(iS(e.endTime)):void 0,ended:e.ended,kind:e.kind,events:e.events.map(lS),links:e.links,status:e.status,droppedEventsCount:e.droppedEventsCount,droppedLinksCount:e.droppedLinksCount,attributes:sS(e.attributes)}}(e))}addSpans(e){for(let t=0,i=e.length;t<i;t++)this.addSpan(e[t])}getSpansFromMap(e){let t=this.spansByResourceAndInstrumentation.get(e.resource);t||(t=new Map,this.spansByResourceAndInstrumentation.set(e.resource,t));let i=t.get(e.instrumentationLibrary);return i||(i=[],t.set(e.instrumentationLibrary,i),this.getScopeSpansFormMap(e).push({scope:Object.assign({},e.instrumentationLibrary),spans:i})),i}getScopeSpansFormMap(e){let t=this.scopeSpansByResource.get(e.resource);if(!t){let i=sS(e.resource.attributes),r={};i&&i.length&&(r.attributes=i),t=[],this.scopeSpansByResource.set(e.resource,t),this.data.resourceSpans.push({resource:r,scopeSpans:t})}return t}constructor(e){this.data={resourceSpans:[]},this.scopeSpansByResource=new Map,this.spansByResourceAndInstrumentation=new Map,e&&this.addSpans(e)}};function sS(e){if(!e)return;let t=[];for(let i in e){let r=e[i];t.push({key:i,value:oS(r)})}return t}function oS(e){return null==e?{anyValue:e}:"string"==typeof e?{stringValue:e}:"number"==typeof e?{doubleValue:e}:"boolean"==typeof e?{booleanValue:e}:{arrayValue:{values:e.map(oS)}}}function lS(e){return{timeUnixNano:iS(e.time),name:e.name,attributes:sS(e.attributes),droppedAttributesCount:e.droppedAttributesCount}}function uS(e){let t=new aS(e),i=t.getData();return t.clear(),i}var cS=class{export(e,t){(function(e){typeof window<"u"&&new Cy(e)})({apiHost:this.apiHost,apiUrl:"/api/otel/trace",queryParams:{crashToken:this.appToken,clientTimeUnixNano:Ay()},dataType:"json",data:uS(e)}),t({code:Ev.SUCCESS})}shutdown(){return this.forceFlush()}forceFlush(){return Promise.resolve()}constructor(e){this.apiHost=e.apiHost,this.appToken=e.appToken}},dS={};Object.defineProperty(dS,"__esModule",{value:!0});var pS=dS.BatchSpanProcessorBase=void 0,hS=fy,fS=gy;pS=dS.BatchSpanProcessorBase=class{forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(e,t){}onEnd(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&hS.TraceFlags.SAMPLED&&this._addToBuffer(e)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then((()=>this.onShutdown())).then((()=>this._flushAll())).then((()=>this._exporter.shutdown()))}_addToBuffer(e){if(this._finishedSpans.length>=this._maxQueueSize)return 0===this._droppedSpansCount&&hS.diag.debug("maxQueueSize reached, dropping spans"),void this._droppedSpansCount++;this._droppedSpansCount>0&&(hS.diag.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()}_flushAll(){return new Promise(((e,t)=>{let i=[];for(let e=0,t=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);e<t;e++)i.push(this._flushOneBatch());Promise.all(i).then((()=>{e()})).catch(t)}))}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise(((e,t)=>{let i=setTimeout((()=>{t(new Error("Timeout"))}),this._exportTimeoutMillis);hS.context.with((0,fS.suppressTracing)(hS.context.active()),(()=>{let r;this._finishedSpans.length<=this._maxExportBatchSize?(r=this._finishedSpans,this._finishedSpans=[]):r=this._finishedSpans.splice(0,this._maxExportBatchSize);let n=()=>this._exporter.export(r,(r=>{var n;clearTimeout(i),r.code===fS.ExportResultCode.SUCCESS?e():t(null!==(n=r.error)&&void 0!==n?n:new Error("BatchSpanProcessor: span export failed"))})),a=null;for(let e=0,t=r.length;e<t;e++){let t=r[e];t.resource.asyncAttributesPending&&t.resource.waitForAsyncAttributes&&(a??(a=[]),a.push(t.resource.waitForAsyncAttributes()))}null===a?n():Promise.all(a).then(n,(e=>{(0,fS.globalErrorHandler)(e),t(e)}))}))}))}_maybeStartTimer(){if(this._isExporting)return;let e=()=>{this._isExporting=!0,this._flushOneBatch().finally((()=>{this._isExporting=!1,this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())})).catch((e=>{this._isExporting=!1,(0,fS.globalErrorHandler)(e)}))};if(this._finishedSpans.length>=this._maxExportBatchSize)return e();void 0===this._timer&&(this._timer=setTimeout((()=>e()),this._scheduledDelayMillis),(0,fS.unrefTimer)(this._timer))}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}constructor(e,t){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;let i=(0,fS.getEnv)();this._maxExportBatchSize="number"==typeof t?.maxExportBatchSize?t.maxExportBatchSize:i.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize="number"==typeof t?.maxQueueSize?t.maxQueueSize:i.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis="number"==typeof t?.scheduledDelayMillis?t.scheduledDelayMillis:i.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis="number"==typeof t?.exportTimeoutMillis?t.exportTimeoutMillis:i.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new fS.BindOnceFuture(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(hS.diag.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}};var mS=class extends pS{onShutdown(){}},gS=class{getProvider(){return this.provider}getTracer(){return this.provider.getTracer(this.serviceName)}destroy(){this.provider.forceFlush(),this.provider.shutdown()}constructor(e){this.serviceName=e.serviceName||"tracer-js-sdk";let t=new iy({resource:new yy({[Am]:this.serviceName}),spanLimits:e.spanLimits});t.addSpanProcessor(new mS(new cS(e),{scheduledDelayMillis:5e3,exportTimeoutMillis:3e4,maxQueueSize:2048,maxExportBatchSize:512})),t.register({}),function(e){var t,i,r=e.tracerProvider||tr.getTracerProvider(),n=e.meterProvider||ji.getMeterProvider(),a=e.loggerProvider||cy.getLoggerProvider(),s=null!==(i=null===(t=e.instrumentations)||void 0===t?void 0:t.flat())&&void 0!==i?i:[];(function(e,t,i,r){for(var n=0,a=e.length;n<a;n++){var s=e[n];t&&s.setTracerProvider(t),i&&s.setMeterProvider(i),r&&s.setLoggerProvider&&s.setLoggerProvider(r),s.getConfig().enabled||s.enable()}})(s,r,n,a)}({instrumentations:e.instrumentations}),this.provider=t}};function vS(e){let t=function(){if(typeof window>"u")return{data:{},modules:{},version:"1.1.4"};let e="TracerSDK";return window[e]||(window[e]={data:{},modules:{},version:"1.1.4"}),window[e]}().data;return t[e]||(t[e]={}),t[e]}function bS(e){return function(e,t,i){let r=vS(e);return r[t]||(r[t]=i()),r[t]}(e.appToken,8,(function(){return new gS(e)}))}var yS=class{getJsonData(){return uS(this.spans)}clear(){this.spans=[]}export(e,t){this.spans=this.spans.concat(e),t({code:Ev.SUCCESS})}shutdown(){return this.forceFlush()}forceFlush(){return Promise.resolve()}constructor(){this.spans=[]}},SS=class{onStart(e,t){this.disabled||!this.startedSpansExporter||this.startedSpansExporter.export([e],this.onExport)}onEnd(e){this.disabled||!this.endedSpansExporter||this.endedSpansExporter.export([e],this.onExport)}onExport(e){}forceFlush(){return Promise.resolve()}shutdown(){return this.disabled=!0,Promise.resolve()}constructor(e={}){this.disabled=!1,this.endedSpansExporter=e.endedSpansExporter,this.startedSpansExporter=e.startedSpansExporter}},$S=class e{log(e,t){}error(e,t){}critical(e,t){}createComponentTracer(t){return new e({name:t})}end(){}getFinishedSpans(){}getTraceId(){return this.fakeTraceId}constructor({name:e}){}},_S=class e{log(e,t){this.span.addEvent(e,{...t,type:"log"})}error(e,t){this.span.addEvent(e,{...t,type:"error"})}critical(e,t){this.span.addEvent(e,{...t,type:"critical"})}static createRootTracer(t=!1){return t?new e({name:"Root"}):new $S({name:"Root"})}createComponentTracer(t){let i=new e({name:t,parentContext:this.context,tracer:this.tracer});return this.childTracers.push(i),i}end(){this.childTracers.forEach((e=>e.end())),this.span.end()}getFinishedSpans(){return this.spanExporter?.getJsonData()}getTraceId(){return this.span.spanContext().traceId}constructor({name:e,parentContext:t,tracer:i}){this.childTracers=[];let a=!i;if(a){let e=bS({serviceName:"videoplayer-sdk-web",appToken:"L9SBoka6ZWk4xPjaK7tmfSfYvMhcge7nvGDjpdMmscb",spanLimits:{attributeCountLimit:1/0,eventCountLimit:1/0,attributePerEventCountLimit:1/0}}).getProvider(),t=new yS,i=new yS;this.spanExporter=t,e.addSpanProcessor(new SS({startedSpansExporter:t,endedSpansExporter:i})),this.tracer=e.getTracer("sdk-videoplayer-tracer")}else this.tracer=i;this.span=this.tracer.startSpan(e,{root:a},t),this.context=r.trace.setSpan(n.context.active(),this.span)}};function TS(e,t='Assertion "value is not nullable" failed'){if(null==e)throw new Error(t)}function wS(e){return typeof e<"u"&&null!==e}function ES(e){return null==e}function xS(e,t){if(!e?.length)throw new Error(t)}var AS=(e,t,i)=>new Promise(((r,n)=>{t.addEventListener("abort",(()=>{l(),u.remove()}));let a,s=()=>{l(),n()},o=()=>{l(),r()},l=()=>{a&&clearTimeout(a),u.removeEventListener("load",o),u.removeEventListener("error",s)};i&&(a=window.setTimeout(s,i));let u=document.createElement("script");u.addEventListener("load",o),u.addEventListener("error",s),u.src=e,document.head.appendChild(u)})),CS="function"==typeof window.performance?.now?()=>window.performance.now():()=>Date.now(),kS=(e,t)=>async(...i)=>{let r,n=t(...i),a=e.aborted;for(;!a&&!e.aborted;)try{let e=await n.next(r);a=e.done??!1,r=e.value}catch(e){await n.throw(e)}return r},LS=()=>/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(navigator.appVersion??navigator.userAgent)||navigator?.userAgentData?.mobile,RS=new class{get browser(){return this._currentBrowser}get device(){return this._currentDevice}get isTouch(){return this._maxTouchPoints>0}get isIOS(){return["iPhone","iPad","iPod"].includes(this.device)}get isMac(){return"Mac"===this.device}get isApple(){return this.isIOS||this.isMac}get isIphoneOrOldIpad(){if(!this.isApple||!this.isTouch)return!1;let e="iPad"===this.device||window?.screen.width>700,t=this._iosVersion;return!e||e&&!!t&&t<16}get isAndroid(){return"Android"===this.device}get isMobile(){return this._isMobile}get iOSVersion(){return this._iosVersion}get macVersion(){return this._macVersion}get isYandex(){return"Yandex"===this.browser}get isSafari(){return"Safari"===this.browser}get isSamsungBrowser(){return"SamsungBrowser"===this.browser}get isHDR(){return this._isHdr}detect(){let{userAgent:e,maxTouchPoints:t}=navigator;try{this._maxTouchPoints=t,this._isHdr=!!matchMedia("(dynamic-range: high)")?.matches}catch(e){console.error(e)}try{this._isMobile=LS()}catch(e){console.error(e)}this.detectBrowser(e),this.detectDevice(e),this.isIOS&&this.detectIOSVersion(),this.isMac&&this.detectMacVersion()}detectBrowser(e){try{let t=/yabrowser/i.test(e)?"Yandex":void 0,i=/samsungbrowser/i.test(e)?"SamsungBrowser":void 0,r=/chrome|crios/i.test(e)?"Chrome":void 0,n=/chromium/i.test(e)?"Chromium":void 0,a=/firefox|fxios/i.test(e)?"Firefox":void 0,s=/webkit|safari|khtml/i.test(e)?"Safari":void 0,o=/opr\//i.test(e)?"Opera":void 0,l=/edg/i.test(e)?"Edge":void 0;this._currentBrowser=t||i||a||o||l||r||n||s||"Rest"}catch(e){console.error(e)}}detectDevice(e){try{let t=/android/i.test(e)?"Android":void 0,i=/iphone/i.test(e)?"iPhone":void 0,r=/ipad/i.test(e)?"iPad":void 0,n=/ipod/i.test(e)?"iPod":void 0,a=/mac/i.test(e)?"Mac":void 0,s=/webOS|BlackBerry|IEMobile|Opera Mini/i.test(e)?"RestMobile":void 0;this._currentDevice=t||i||r||n||s||a||"Desktop"}catch(e){console.error(e)}}detectIOSVersion(){try{let{userAgent:e}=window.navigator,t=e.match(/Version\/(\d+(\.\d+)?)/i);if(!t)return;let i=t[1],r=parseFloat(i);if(isNaN(r))return;this._iosVersion=r}catch(e){console.error(e)}}detectMacVersion(){try{let{userAgent:e}=window.navigator,t=e.match(/Version\/(\d+)/);if(!t)return;let i=t[1],r=parseInt(i,10);if(isNaN(r))return;this._macVersion=r}catch(e){console.error(e)}}constructor(){this.detect()}},PS=(e,{start:t=0,factor:i=2,max:r=1/0,min:n=t,random:a=0}={})=>{let s=t;return s*=i**e,s*=Math.random()*a*2-a+1,s=Math.round(s),s=Math.min(s,r),s=Math.max(s,n),s},OS={};((e,t)=>{for(var i in t)s(e,i,{get:t[i],enumerable:!0})})(OS,{clear:()=>zS,get:()=>US,has:()=>jS,isPersistent:()=>BS,remove:()=>HS,set:()=>FS});var MS,IS,NS,VS=`vk-videoplayer-dummy-key-${Math.random()}`,DS=()=>{if(void 0!==IS)return IS;try{localStorage.setItem(VS,"test"),localStorage.removeItem(VS),IS=0}catch(e){if(!(e instanceof DOMException||e instanceof TypeError))throw e;try{sessionStorage.getItem(VS),IS=1}catch(e){if(!(e instanceof DOMException||e instanceof TypeError))throw e;IS=2}}return 2===IS&&(MS=new Map),IS},BS=()=>0===DS(),US=e=>{let t=DS();switch(t){case 0:return localStorage.getItem(e)??void 0;case 1:return sessionStorage.getItem(e)??void 0;case 2:return MS?.get(e);default:it(t)}},FS=(e,t)=>{let i=DS();switch(i){case 0:try{localStorage.setItem(e,t)}catch(e){if(!(e instanceof DOMException))throw e;console.error(e)}break;case 1:try{sessionStorage.setItem(e,t)}catch(e){if(!(e instanceof DOMException))throw e;console.error(e)}break;case 2:return void MS?.set(e,t);default:it(i)}},jS=e=>{let t=DS();switch(t){case 0:return e in localStorage;case 1:return e in sessionStorage;case 2:return MS?.has(e)??!1;default:return it(t),!1}},HS=e=>{let t=DS();switch(t){case 0:return localStorage.removeItem(e);case 1:return sessionStorage.removeItem(e);case 2:return void MS?.delete(e);default:it(t)}},zS=()=>{let e=DS();switch(e){case 0:return localStorage.clear();case 1:return sessionStorage.clear();case 2:return MS?.clear();default:it(e)}},qS=()=>{let e,t;try{e=window.self!==window.top}catch(t){t instanceof DOMException&&"SecurityError"===t.name?e=!0:(e=!1,console.error(t))}try{window.location.ancestorOrigins&&(t=window.location.ancestorOrigins[window.location.ancestorOrigins.length-1])}catch(e){console.error(e)}try{!t&&document.referrer&&(t=document.referrer)}catch(e){console.error(e)}return{isEmbed:e,host:t?new URL(t).hostname:void 0}},WS=((NS=WS||{}).INVARIANT="Invariant quality",NS.Q_144P="144p",NS.Q_240P="240p",NS.Q_360P="360p",NS.Q_480P="480p",NS.Q_576P="576p",NS.Q_720P="720p",NS.Q_1080P="1080p",NS.Q_1440P="1440p",NS.Q_2160P="2160p",NS.Q_4320P="4320p",NS),GS={"144p":{width:256,height:144},"240p":{width:428,height:240},"360p":{width:640,height:360},"480p":{width:856,height:480},"576p":{width:1024,height:576},"720p":{width:1280,height:720},"1080p":{width:1920,height:1080},"1440p":{width:2560,height:1440},"2160p":{width:3840,height:2160},"4320p":{width:7680,height:4320}},QS=(e,t)=>GS[e].height>GS[t].height,YS=(e,t)=>GS[e].height>=GS[t].height,KS=(e,t)=>GS[e].height<GS[t].height,XS=(e,t)=>GS[e].height<=GS[t].height,ZS=e=>e.sort(((e,t)=>e===t?0:"Invariant quality"===e?1:"Invariant quality"===t?-1:KS(e,t)?1:-1))[0],JS=Object.keys(GS).sort(((e,t)=>KS(e,t)?-1:1)),e$=({width:e,height:t})=>{let i=Math.min(e,t),r=Math.max(e,t);return JS.find((e=>{let t=GS[e];return t.width>=r&&t.height>=i}))},t$=e=>GS[e].height,i$=e=>"Invariant quality"===e;var r$=(e,t)=>{let i={};for(let r of Object.keys(t)){let n=t[r],a=e[r];Array.isArray(n)&&Array.isArray(a)?i[r]=a:i[r]="object"==typeof n&&"object"==typeof a?r$(a,n):r in e?a:n}return i};function n$(e,t=0,i){let r,n,a,s,o,l,u=0,c=!1,d=!1,p=!0,h=!t&&0!==t&&"function"==typeof window.requestAnimationFrame;function f(t){let i=r,a=n;return r=n=void 0,u=t,s=e.apply(a,i),s}function m(e,t){return h?(o&&window.cancelAnimationFrame(o),window.requestAnimationFrame(e)):setTimeout(e,t)}function g(e){let i=e-l;return void 0===l||i>=t||i<0||d&&e-u>=a}function v(){let e=Date.now();if(g(e))return b(e);o=m(v,function(e){let i=e-u,r=t-(e-l);return d?Math.min(r,a-i):r}(e))}function b(e){return o=void 0,p&&r?f(e):(r=n=void 0,s)}function y(...e){let i=Date.now(),a=g(i);if(r=e,n=this,l=i,a){if(void 0===o)return function(e){return u=e,o=m(v,t),c?f(e):s}(l);if(d)return o=m(v,t),f(l)}return void 0===o&&(o=m(v,t)),s}return i&&(c=!!i.leading,d="maxWait"in i,a=i?.maxWait?Math.max(+i?.maxWait||0,t):a,p="trailing"in i?!!i.trailing:p),y.cancel=function(){var e;void 0!==o&&(e=o,h?window.cancelAnimationFrame(e):clearTimeout(e)),u=0,r=l=n=o=void 0},y.flush=function(){return void 0===o?s:b(Date.now())},y.pending=function(){return void 0!==o},y}var a$=(e,t=0,i)=>n$(e,t,{leading:!0,trailing:!0,...i,maxWait:t}),s$=(e,t)=>{if(null===e||"object"!=typeof e)return e;let i=Array.isArray(e)?[]:{};for(let r in e){if("function"==typeof t){let n=t(e[r],r,e,i);if(void 0!==n){i[r]=n;continue}}"object"==typeof e[r]?i[r]=s$(e[r],t):i[r]=e[r]}return i},o$=(e,t=300)=>new at((i=>{let{width:r,height:n}=e.getBoundingClientRect();if(i.next({width:r,height:n}),!window.ResizeObserver)return;let a=new ResizeObserver(a$((e=>{let t,r,n=e[0];n&&(n.contentBoxSize&&n.contentBoxSize[0]?(r=n.contentBoxSize[0].blockSize,t=n.contentBoxSize[0].inlineSize):n.contentRect&&(t=n.contentRect.width,r=n.contentRect.height),wS(t)&&wS(r)&&i.next({width:t,height:r}))}),t));return a.observe(e),()=>a.disconnect()})),l$=(e,t=6,i=".")=>{let r={};for(let n in e)if(e.hasOwnProperty(n)&&!(e[n]instanceof HTMLElement)&&t)if("object"==typeof e[n]&&null!==e[n]){let a=l$(e[n],t-1);for(let e in a)a.hasOwnProperty(e)&&(r[n+i+e]=a[e])}else r[n]=e[n];return r},u$=e=>{e.removeAttribute("src"),e.load()},c$=e=>{let t;try{t=new URL(e)}catch{return!1}return"https:"===t.protocol},d$=e=>{try{return new URL(e)}catch{return null}},p$=e=>t=>i=>{let r="object"==typeof i;null==i||r&&!Object.keys(i).length||e(t,r?l$(i):{value:i})},h$=class extends st{next(e){super.next(this.value=e)}error(e){super.error(this.value=e)}getValue(){return this.value}_subscribe(e){let t=super._subscribe(e);return e.next(this.value),t}constructor(e){super(),this.value=e}};function f$(e){return new at((t=>{let i={},r=Object.keys(e).length;return Object.entries(e).reduce(((e,[n,a])=>e.add(a.subscribe((e=>n=>{e in i||r--,i[e]=n,0===r&&t.next(i)})(n)))),new tt)}))}function m$(...e){return new at((t=>e.reduce(((e,i)=>e.add(i.subscribe(t))),new tt)))}var g$=e=>new at((t=>{let i=window.setTimeout((()=>{try{t.next()}catch(e){if(!t.error)throw e;t.error(e)}}),e);return()=>window.clearTimeout(i)})),v$=e=>new at((t=>{let i=window.setInterval((()=>t.next()),e);return()=>{i&&(window.clearInterval(i),i=void 0)}})),b$=e=>new at((t=>{e.forEach((e=>t.next(e)))})),y$=(e,t)=>new at((i=>{let r=e=>i.next(e);return e.addEventListener(t,r),()=>e.removeEventListener(t,r)}));var S$={leading:!1,trailing:!0};function $$(e,t=S$){return i=>new at((r=>i.subscribe(new _$(r,e,t))))}var _$=class{next(e){this.lastValue=e,wS(this.timeout)?window.clearTimeout(this.timeout):this.config.leading&&this.destination.next(e),this.timeout=window.setTimeout((()=>{if(this.config.trailing)try{this.destination.next(this.lastValue)}catch(e){if(!this.destination.error)throw e;this.destination.error(e)}this.timeout=void 0}),this.time)}error(e){this.destination.error?.(e)}constructor(e,t,i){this.destination=e,this.time=t,this.config=i}},T$={leading:!0,trailing:!1};function w$(e,t=T$){return i=>new at((r=>i.subscribe(new E$(r,e,t))))}var E$=class{next(e){this.lastValue=e,ES(this.timeout)&&(this.config.leading&&this.destination.next(e),this.timeout=window.setTimeout((()=>{this.config.trailing&&this.destination.next(this.lastValue),this.timeout=void 0}),this.time))}error(e){this.destination.error?.(e)}constructor(e,t,i){this.destination=e,this.time=t,this.config=i}};function x$(e){return t=>new at((i=>t.subscribe(new A$(i,e))))}var A$=class{next(e){let t;try{t=this.predicate(e)}catch(e){throw this.error(e),e}t&&this.destination.next(e)}error(e){this.destination.error?.(e)}constructor(e,t){this.destination=e,this.predicate=t}};function C$(e=((e,t)=>e===t)){return t=>new at((i=>t.subscribe(new L$(i,e))))}var k$={},L$=class{next(e){let t;try{t=this.lastValue===k$||!this.predicate(this.lastValue,e),this.lastValue=e}catch(e){throw this.error(e),e}t&&this.destination.next(e)}error(e){this.destination.error?.(e)}constructor(e,t){this.destination=e,this.predicate=t,this.lastValue=k$}};function R$(e){return t=>new at((i=>t.subscribe(new P$(i,e))))}var P$=class{next(e){let t;try{t=this.mapper(e)}catch(e){throw this.error(e),e}this.destination.next(t)}error(e){this.destination.error?.(e)}constructor(e,t){this.destination=e,this.mapper=t}};function O$(e){return R$((()=>e))}function M$(){return e=>new at((t=>{let i=!1,r=!1,n=e.subscribe((e=>{i||(i=!0,t.next(e)),r&&n.unsubscribe()}),(e=>{i=!0,t.error?.(e),r&&n.unsubscribe()}));return r=!0,i&&n.unsubscribe(),n}))}function I$(e){return t=>new at((i=>t.subscribe(new V$(i,e))))}var N$,V$=class{next(e){try{this.effect(e)}catch(e){throw this.error(e),e}this.destination.next(e)}error(e){this.destination.error?.(e)}constructor(e,t){this.destination=e,this.effect=t}},D$=((N$=D$||{}).NETWORK="network",N$.VIDEO_PIPELINE="video_pipeline",N$.EXTERNAL_API="external_api",N$.PARSER="parser",N$.DOM="dom",N$.WTF="wtf",N$.FATAL="fatal",N$),B$=class{addEventListener(e,t,i){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:i})}removeEventListener(e,t){if(!(e in this.listeners))return;let i=this.listeners[e];for(let e=0,r=i.length;e<r;e++)if(i[e].callback===t)return void i.splice(e,1)}dispatchEvent(e){if(!(e.type in this.listeners))return;let t=this.listeners[e.type].slice();for(let i=0,r=t.length;i<r;i++){let r=t[i];try{r.callback.call(this,e)}catch(e){Promise.resolve().then((()=>{throw e}))}r.options&&r.options.once&&this.removeEventListener(e.type,r.callback)}return!e.defaultPrevented}constructor(){Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}},U$=class extends B${toString(){return"[object AbortSignal]"}dispatchEvent(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),super.dispatchEvent(e)}constructor(){super(),this.listeners||B$.call(this),Object.defineProperty(this,"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(this,"reason",{value:void 0,writable:!0,configurable:!0})}},F$=class{abort(e){let t;try{t=new Event("abort")}catch{typeof document<"u"?document.createEvent?(t=document.createEvent("Event"),t.initEvent("abort",!1,!1)):(t=document.createEventObject(),t.type="abort"):t={type:"abort",bubbles:!1,cancelable:!1}}let i=e;if(void 0===i)if(typeof document>"u")i=new Error("This operation was aborted"),i.name="AbortError";else try{i=new DOMException("signal is aborted without reason")}catch{i=new Error("This operation was aborted"),i.name="AbortError"}this.signal.reason=i,this.signal.dispatchEvent(t)}toString(){return"[object AbortController]"}constructor(){Object.defineProperty(this,"signal",{value:new U$,writable:!0,configurable:!0})}};function j$(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}typeof Symbol<"u"&&Symbol.toStringTag&&(F$.prototype[Symbol.toStringTag]="AbortController",U$.prototype[Symbol.toStringTag]="AbortSignal");var H$,z$=j$({fetch:window.fetch,Request:window.Request,AbortController:window.AbortController}),q$=z$?function(e){"function"==typeof e&&(e={fetch:e});let{fetch:t,Request:i=t.Request,AbortController:r,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:n=!1}=e;if(!j$({fetch:t,Request:i,AbortController:r,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:n}))return{fetch:t,Request:a};let a=i;(a&&!a.prototype.hasOwnProperty("signal")||n)&&(a=function(e,t){let r;t&&t.signal&&(r=t.signal,delete t.signal);let n=new i(e,t);return r&&Object.defineProperty(n,"signal",{writable:!1,enumerable:!1,configurable:!0,value:r}),n},a.prototype=i.prototype);let s=t;return{fetch:(e,t)=>{let i=a&&a.prototype.isPrototypeOf(e)?e.signal:t?t.signal:void 0;if(i){let r;try{r=new DOMException("Aborted","AbortError")}catch{r=new Error("Aborted"),r.name="AbortError"}if(i.aborted)return Promise.reject(r);let n=new Promise(((e,t)=>{i.addEventListener("abort",(()=>t(r)),{once:!0})}));return t&&t.signal&&delete t.signal,Promise.race([n,s(e,t)])}return s(e,t)},Request:a}}({fetch:window.fetch,Request:window.Request,AbortController:window.AbortController}):void 0,W$=z$?q$.fetch:window.fetch,G$=(z$?q$.Request:window.Request,z$||window.AbortController,z$||window.AbortSignal,((e,t,i)=>(i=null!=e?a(u(e)):{},((e,t,i,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of l(t))!c.call(e,n)&&n!==i&&s(e,n,{get:()=>t[n],enumerable:!(r=o(t,n))||r.enumerable});return e})(!t&&e&&e.__esModule?i:s(i,"default",{value:e,enumerable:!0}),e)))(Je(),1)),Q$=(e=>(e.Armenian="58",e.Azerbaijani="57",e.Belarusian="114",e.English="3",e.Kazakh="97",e.Portuguese="73",e.Russian="0",e.Spanish="4",e.Ukrainian="1",e.Uzbek="65",e.Vietnamese="75",e))(Q$||{}),Y$=async(e,t,i)=>{let r=new URL("https://vk.com/js/lang-pack.js");r.searchParams.set("format","json"),r.searchParams.set("name",t),void 0!==e&&r.searchParams.set("lang",e);let n=await(await W$(r.toString())).json();return K$(n,i)},K$=(e,t)=>(0,G$.default)(Object.entries(e.keys).map((([e,i])=>[e.substring(`${t}_`.length),X$(i)]))),X$=e=>Array.isArray(e)?e[0]:e,Z$=((H$=Z$||{}).RU="ru",H$.EN="en",H$)},89923:(e,t,i)=>{i.d(t,{ApiEnv:()=>Wt,InteractiveInterfaceClick:()=>Xt,OneStat:()=>ki,SeekAction:()=>Kt,VERSION:()=>si});var r,n,a,s,o,l,u=i(819705),c=i(773439),d=Object.create,p=Object.defineProperty,h=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,v=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),b=(e,t,i)=>(i=null!=e?d(m(e)):{},((e,t,i,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of f(t))!g.call(e,n)&&n!==i&&p(e,n,{get:()=>t[n],enumerable:!(r=h(t,n))||r.enumerable});return e})(!t&&e&&e.__esModule?i:p(i,"default",{value:e,enumerable:!0}),e)),y=v((()=>{})),S=v(((e,t)=>{var i=function(e){return e&&e.Math===Math&&e};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof global&&global)||i("object"==typeof e&&e)||function(){return this}()||Function("return this")()})),$=v(((e,t)=>{t.exports=function(e){try{return!!e()}catch{return!0}}})),_=v(((e,t)=>{var i=$();t.exports=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))})),T=v(((e,t)=>{var i=_(),r=Function.prototype,n=r.apply,a=r.call;t.exports="object"==typeof Reflect&&Reflect.apply||(i?a.bind(n):function(){return a.apply(n,arguments)})})),w=v(((e,t)=>{var i=_(),r=Function.prototype,n=r.call,a=i&&r.bind.bind(n,n);t.exports=i?a:function(e){return function(){return n.apply(e,arguments)}}})),E=v(((e,t)=>{var i=w(),r=i({}.toString),n=i("".slice);t.exports=function(e){return n(r(e),8,-1)}})),x=v(((e,t)=>{var i=E(),r=w();t.exports=function(e){if("Function"===i(e))return r(e)}})),A=v(((e,t)=>{var i="object"==typeof document&&document.all;t.exports=typeof i>"u"&&void 0!==i?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}})),C=v(((e,t)=>{var i=$();t.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))})),k=v(((e,t)=>{var i=_(),r=Function.prototype.call;t.exports=i?r.bind(r):function(){return r.apply(r,arguments)}})),L=v((e=>{var t={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!t.call({1:2},1);e.f=r?function(e){var t=i(this,e);return!!t&&t.enumerable}:t})),R=v(((e,t)=>{t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}})),P=v(((e,t)=>{var i=w(),r=$(),n=E(),a=Object,s=i("".split);t.exports=r((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"===n(e)?s(e,""):a(e)}:a})),O=v(((e,t)=>{t.exports=function(e){return null==e}})),M=v(((e,t)=>{var i=O(),r=TypeError;t.exports=function(e){if(i(e))throw new r("Can't call method on "+e);return e}})),I=v(((e,t)=>{var i=P(),r=M();t.exports=function(e){return i(r(e))}})),N=v(((e,t)=>{var i=A();t.exports=function(e){return"object"==typeof e?null!==e:i(e)}})),V=v(((e,t)=>{t.exports={}})),D=v(((e,t)=>{var i=V(),r=S(),n=A(),a=function(e){return n(e)?e:void 0};t.exports=function(e,t){return arguments.length<2?a(i[e])||a(r[e]):i[e]&&i[e][t]||r[e]&&r[e][t]}})),B=v(((e,t)=>{var i=w();t.exports=i({}.isPrototypeOf)})),U=v(((e,t)=>{var i=S().navigator,r=i&&i.userAgent;t.exports=r?String(r):""})),F=v(((e,t)=>{var i,r,n=S(),a=U(),s=n.process,o=n.Deno,l=s&&s.versions||o&&o.version,u=l&&l.v8;u&&(r=(i=u.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&a&&((!(i=a.match(/Edge\/(\d+)/))||i[1]>=74)&&((i=a.match(/Chrome\/(\d+)/))&&(r=+i[1]))),t.exports=r})),j=v(((e,t)=>{var i=F(),r=$(),n=S().String;t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol("symbol detection");return!n(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))})),H=v(((e,t)=>{var i=j();t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator})),z=v(((e,t)=>{var i=D(),r=A(),n=B(),a=H(),s=Object;t.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return r(t)&&n(t.prototype,s(e))}})),q=v(((e,t)=>{var i=String;t.exports=function(e){try{return i(e)}catch{return"Object"}}})),W=v(((e,t)=>{var i=A(),r=q(),n=TypeError;t.exports=function(e){if(i(e))return e;throw new n(r(e)+" is not a function")}})),G=v(((e,t)=>{var i=W(),r=O();t.exports=function(e,t){var n=e[t];return r(n)?void 0:i(n)}})),Q=v(((e,t)=>{var i=k(),r=A(),n=N(),a=TypeError;t.exports=function(e,t){var s,o;if("string"===t&&r(s=e.toString)&&!n(o=i(s,e))||r(s=e.valueOf)&&!n(o=i(s,e))||"string"!==t&&r(s=e.toString)&&!n(o=i(s,e)))return o;throw new a("Can't convert object to primitive value")}})),Y=v(((e,t)=>{t.exports=!0})),K=v(((e,t)=>{var i=S(),r=Object.defineProperty;t.exports=function(e,t){try{r(i,e,{value:t,configurable:!0,writable:!0})}catch{i[e]=t}return t}})),X=v(((e,t)=>{var i=Y(),r=S(),n=K(),a="__core-js_shared__",s=t.exports=r[a]||n(a,{});(s.versions||(s.versions=[])).push({version:"3.38.0",mode:i?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.0/LICENSE",source:"https://github.com/zloirock/core-js"})})),Z=v(((e,t)=>{var i=X();t.exports=function(e,t){return i[e]||(i[e]=t||{})}})),J=v(((e,t)=>{var i=M(),r=Object;t.exports=function(e){return r(i(e))}})),ee=v(((e,t)=>{var i=w(),r=J(),n=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(e,t){return n(r(e),t)}})),te=v(((e,t)=>{var i=w(),r=0,n=Math.random(),a=i(1..toString);t.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++r+n,36)}})),ie=v(((e,t)=>{var i=S(),r=Z(),n=ee(),a=te(),s=j(),o=H(),l=i.Symbol,u=r("wks"),c=o?l.for||l:l&&l.withoutSetter||a;t.exports=function(e){return n(u,e)||(u[e]=s&&n(l,e)?l[e]:c("Symbol."+e)),u[e]}})),re=v(((e,t)=>{var i=k(),r=N(),n=z(),a=G(),s=Q(),o=ie(),l=TypeError,u=o("toPrimitive");t.exports=function(e,t){if(!r(e)||n(e))return e;var o,c=a(e,u);if(c){if(void 0===t&&(t="default"),o=i(c,e,t),!r(o)||n(o))return o;throw new l("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}})),ne=v(((e,t)=>{var i=re(),r=z();t.exports=function(e){var t=i(e,"string");return r(t)?t:t+""}})),ae=v(((e,t)=>{var i=S(),r=N(),n=i.document,a=r(n)&&r(n.createElement);t.exports=function(e){return a?n.createElement(e):{}}})),se=v(((e,t)=>{var i=C(),r=$(),n=ae();t.exports=!i&&!r((function(){return 7!==Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))})),oe=v((e=>{var t=C(),i=k(),r=L(),n=R(),a=I(),s=ne(),o=ee(),l=se(),u=Object.getOwnPropertyDescriptor;e.f=t?u:function(e,t){if(e=a(e),t=s(t),l)try{return u(e,t)}catch{}if(o(e,t))return n(!i(r.f,e,t),e[t])}})),le=v(((e,t)=>{var i=$(),r=A(),n=/#|\.prototype\./,a=function(e,t){var n=o[s(e)];return n===u||n!==l&&(r(t)?i(t):!!t)},s=a.normalize=function(e){return String(e).replace(n,".").toLowerCase()},o=a.data={},l=a.NATIVE="N",u=a.POLYFILL="P";t.exports=a})),ue=v(((e,t)=>{var i=x(),r=W(),n=_(),a=i(i.bind);t.exports=function(e,t){return r(e),void 0===t?e:n?a(e,t):function(){return e.apply(t,arguments)}}})),ce=v(((e,t)=>{var i=C(),r=$();t.exports=i&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))})),de=v(((e,t)=>{var i=N(),r=String,n=TypeError;t.exports=function(e){if(i(e))return e;throw new n(r(e)+" is not an object")}})),pe=v((e=>{var t=C(),i=se(),r=ce(),n=de(),a=ne(),s=TypeError,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u="enumerable",c="configurable",d="writable";e.f=t?r?function(e,t,i){if(n(e),t=a(t),n(i),"function"==typeof e&&"prototype"===t&&"value"in i&&d in i&&!i[d]){var r=l(e,t);r&&r[d]&&(e[t]=i.value,i={configurable:c in i?i[c]:r[c],enumerable:u in i?i[u]:r[u],writable:!1})}return o(e,t,i)}:o:function(e,t,r){if(n(e),t=a(t),n(r),i)try{return o(e,t,r)}catch{}if("get"in r||"set"in r)throw new s("Accessors not supported");return"value"in r&&(e[t]=r.value),e}})),he=v(((e,t)=>{var i=C(),r=pe(),n=R();t.exports=i?function(e,t,i){return r.f(e,t,n(1,i))}:function(e,t,i){return e[t]=i,e}})),fe=v(((e,t)=>{var i=S(),r=T(),n=x(),a=A(),s=oe().f,o=le(),l=V(),u=ue(),c=he(),d=ee();X();var p=function(e){var t=function(i,n,a){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(i);case 2:return new e(i,n)}return new e(i,n,a)}return r(e,this,arguments)};return t.prototype=e.prototype,t};t.exports=function(e,t){var r,h,f,m,g,v,b,y,S,$=e.target,_=e.global,T=e.stat,w=e.proto,E=_?i:T?i[$]:i[$]&&i[$].prototype,x=_?l:l[$]||c(l,$,{})[$],A=x.prototype;for(m in t)h=!(r=o(_?m:$+(T?".":"#")+m,e.forced))&&E&&d(E,m),v=x[m],h&&(e.dontCallGetSet?b=(S=s(E,m))&&S.value:b=E[m]),g=h&&b?b:t[m],(r||w||typeof v!=typeof g)&&(y=e.bind&&h?u(g,i):e.wrap&&h?p(g):w&&a(g)?n(g):g,(e.sham||g&&g.sham||v&&v.sham)&&c(y,"sham",!0),c(x,m,y),w&&(d(l,f=$+"Prototype")||c(l,f,{}),c(l[f],m,g),e.real&&A&&(r||!A[m])&&c(A,m,g)))}})),me=v(((e,t)=>{var i=S(),r=U(),n=E(),a=function(e){return r.slice(0,e.length)===e};t.exports=a("Bun/")?"BUN":a("Cloudflare-Workers")?"CLOUDFLARE":a("Deno/")?"DENO":a("Node.js/")?"NODE":i.Bun&&"string"==typeof Bun.version?"BUN":i.Deno&&"object"==typeof Deno.version?"DENO":"process"===n(i.process)?"NODE":i.window&&i.document?"BROWSER":"REST"})),ge=v(((e,t)=>{var i=me();t.exports="NODE"===i})),ve=v(((e,t)=>{var i=he();t.exports=function(e,t,r,n){return n&&n.enumerable?e[t]=r:i(e,t,r),e}})),be=v(((e,t)=>{var i=w(),r=W();t.exports=function(e,t,n){try{return i(r(Object.getOwnPropertyDescriptor(e,t)[n]))}catch{}}})),ye=v(((e,t)=>{var i=N();t.exports=function(e){return i(e)||null===e}})),Se=v(((e,t)=>{var i=ye(),r=String,n=TypeError;t.exports=function(e){if(i(e))return e;throw new n("Can't set "+r(e)+" as a prototype")}})),$e=v(((e,t)=>{var i=be(),r=N(),n=M(),a=Se();t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,s={};try{(e=i(Object.prototype,"__proto__","set"))(s,[]),t=s instanceof Array}catch{}return function(i,s){return n(i),a(s),r(i)&&(t?e(i,s):i.__proto__=s),i}}():void 0)})),_e=v(((e,t)=>{var i={};i[ie()("toStringTag")]="z",t.exports="[object z]"===String(i)})),Te=v(((e,t)=>{var i=_e(),r=A(),n=E(),a=ie()("toStringTag"),s=Object,o="Arguments"===n(function(){return arguments}());t.exports=i?n:function(e){var t,i,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch{}}(t=s(e),a))?i:o?n(t):"Object"===(l=n(t))&&r(t.callee)?"Arguments":l}})),we=v(((e,t)=>{var i=_e(),r=Te();t.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}})),Ee=v(((e,t)=>{var i=_e(),r=pe().f,n=he(),a=ee(),s=we(),o=ie()("toStringTag");t.exports=function(e,t,l,u){var c=l?e:e&&e.prototype;c&&(a(c,o)||r(c,o,{configurable:!0,value:t}),u&&!i&&n(c,"toString",s))}})),xe=v(((e,t)=>{var i=pe();t.exports=function(e,t,r){return i.f(e,t,r)}})),Ae=v(((e,t)=>{var i=D(),r=xe(),n=ie(),a=C(),s=n("species");t.exports=function(e){var t=i(e);a&&t&&!t[s]&&r(t,s,{configurable:!0,get:function(){return this}})}})),Ce=v(((e,t)=>{var i=B(),r=TypeError;t.exports=function(e,t){if(i(t,e))return e;throw new r("Incorrect invocation")}})),ke=v(((e,t)=>{var i=w(),r=A(),n=X(),a=i(Function.toString);r(n.inspectSource)||(n.inspectSource=function(e){return a(e)}),t.exports=n.inspectSource})),Le=v(((e,t)=>{var i=w(),r=$(),n=A(),a=Te(),s=D(),o=ke(),l=function(){},u=s("Reflect","construct"),c=/^\s*(?:class|function)\b/,d=i(c.exec),p=!c.test(l),h=function(e){if(!n(e))return!1;try{return u(l,[],e),!0}catch{return!1}},f=function(e){if(!n(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(c,o(e))}catch{return!0}};f.sham=!0,t.exports=!u||r((function(){var e;return h(h.call)||!h(Object)||!h((function(){e=!0}))||e}))?f:h})),Re=v(((e,t)=>{var i=Le(),r=q(),n=TypeError;t.exports=function(e){if(i(e))return e;throw new n(r(e)+" is not a constructor")}})),Pe=v(((e,t)=>{var i=de(),r=Re(),n=O(),a=ie()("species");t.exports=function(e,t){var s,o=i(e).constructor;return void 0===o||n(s=i(o)[a])?t:r(s)}})),Oe=v(((e,t)=>{var i=D();t.exports=i("document","documentElement")})),Me=v(((e,t)=>{var i=w();t.exports=i([].slice)})),Ie=v(((e,t)=>{var i=TypeError;t.exports=function(e,t){if(e<t)throw new i("Not enough arguments");return e}})),Ne=v(((e,t)=>{var i=U();t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)})),Ve=v(((e,t)=>{var i,r,n,a,s=S(),o=T(),l=ue(),u=A(),c=ee(),d=$(),p=Oe(),h=Me(),f=ae(),m=Ie(),g=Ne(),v=ge(),b=s.setImmediate,y=s.clearImmediate,_=s.process,w=s.Dispatch,E=s.Function,x=s.MessageChannel,C=s.String,k=0,L={},R="onreadystatechange";d((function(){i=s.location}));var P=function(e){if(c(L,e)){var t=L[e];delete L[e],t()}},O=function(e){return function(){P(e)}},M=function(e){P(e.data)},I=function(e){s.postMessage(C(e),i.protocol+"//"+i.host)};(!b||!y)&&(b=function(e){m(arguments.length,1);var t=u(e)?e:E(e),i=h(arguments,1);return L[++k]=function(){o(t,void 0,i)},r(k),k},y=function(e){delete L[e]},v?r=function(e){_.nextTick(O(e))}:w&&w.now?r=function(e){w.now(O(e))}:x&&!g?(a=(n=new x).port2,n.port1.onmessage=M,r=l(a.postMessage,a)):s.addEventListener&&u(s.postMessage)&&!s.importScripts&&i&&"file:"!==i.protocol&&!d(I)?(r=I,s.addEventListener("message",M,!1)):r=R in f("script")?function(e){p.appendChild(f("script"))[R]=function(){p.removeChild(this),P(e)}}:function(e){setTimeout(O(e),0)}),t.exports={set:b,clear:y}})),De=v(((e,t)=>{var i=S(),r=C(),n=Object.getOwnPropertyDescriptor;t.exports=function(e){if(!r)return i[e];var t=n(i,e);return t&&t.value}})),Be=v(((e,t)=>{var i=function(){this.head=null,this.tail=null};i.prototype={add:function(e){var t={item:e,next:null},i=this.tail;i?i.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},t.exports=i})),Ue=v(((e,t)=>{var i=U();t.exports=/ipad|iphone|ipod/i.test(i)&&typeof Pebble<"u"})),Fe=v(((e,t)=>{var i=U();t.exports=/web0s(?!.*chrome)/i.test(i)})),je=v(((e,t)=>{var i,r,n,a,s,o,l,u=S(),c=De(),d=ue(),p=Ve().set,h=Be(),f=Ne(),m=Ue(),g=Fe(),v=ge(),b=u.MutationObserver||u.WebKitMutationObserver,y=u.document,$=u.process,_=u.Promise,T=c("queueMicrotask");T||(o=new h,l=function(){var e,t;for(v&&(e=$.domain)&&e.exit();t=o.get();)try{t()}catch(e){throw o.head&&i(),e}e&&e.enter()},f||v||g||!b||!y?!m&&_&&_.resolve?((a=_.resolve(void 0)).constructor=_,s=d(a.then,a),i=function(){s(l)}):v?i=function(){$.nextTick(l)}:(p=d(p,u),i=function(){p(l)}):(r=!0,n=y.createTextNode(""),new b(l).observe(n,{characterData:!0}),i=function(){n.data=r=!r}),T=function(e){o.head||i(),o.add(e)}),t.exports=T})),He=v(((e,t)=>{t.exports=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch{}}})),ze=v(((e,t)=>{t.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}})),qe=v(((e,t)=>{var i=S(),r=A(),n=i.WeakMap;t.exports=r(n)&&/native code/.test(String(n))})),We=v(((e,t)=>{var i=Z(),r=te(),n=i("keys");t.exports=function(e){return n[e]||(n[e]=r(e))}})),Ge=v(((e,t)=>{t.exports={}})),Qe=v(((e,t)=>{var i,r,n,a,s,o=qe(),l=S(),u=N(),c=he(),d=ee(),p=X(),h=We(),f=Ge(),m="Object already initialized",g=l.TypeError,v=l.WeakMap;o||p.state?((a=p.state||(p.state=new v)).get=a.get,a.has=a.has,a.set=a.set,i=function(e,t){if(a.has(e))throw new g(m);return t.facade=e,a.set(e,t),t},r=function(e){return a.get(e)||{}},n=function(e){return a.has(e)}):(f[s=h("state")]=!0,i=function(e,t){if(d(e,s))throw new g(m);return t.facade=e,c(e,s,t),t},r=function(e){return d(e,s)?e[s]:{}},n=function(e){return d(e,s)}),t.exports={set:i,get:r,has:n,enforce:function(e){return n(e)?r(e):i(e,{})},getterFor:function(e){return function(t){var i;if(!u(t)||(i=r(t)).type!==e)throw new g("Incompatible receiver, "+e+" required");return i}}}})),Ye=v(((e,t)=>{var i=S();t.exports=i.Promise})),Ke=v(((e,t)=>{var i=S(),r=Ye(),n=A(),a=le(),s=ke(),o=ie(),l=me(),u=Y(),c=F(),d=r&&r.prototype,p=o("species"),h=!1,f=n(i.PromiseRejectionEvent),m=a("Promise",(function(){var e=s(r),t=e!==String(r);if(!t&&66===c||u&&(!d.catch||!d.finally))return!0;if(!c||c<51||!/native code/.test(e)){var i=new r((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};if((i.constructor={})[p]=n,!(h=i.then((function(){}))instanceof n))return!0}return!(t||"BROWSER"!==l&&"DENO"!==l||f)}));t.exports={CONSTRUCTOR:m,REJECTION_EVENT:f,SUBCLASSING:h}})),Xe=v(((e,t)=>{var i=W(),r=TypeError,n=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw new r("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)};t.exports.f=function(e){return new n(e)}})),Ze=v((()=>{var e,t,i,r=fe(),n=Y(),a=ge(),s=S(),o=k(),l=ve(),u=$e(),c=Ee(),d=Ae(),p=W(),h=A(),f=N(),m=Ce(),g=Pe(),v=Ve().set,b=je(),y=He(),$=ze(),_=Be(),T=Qe(),w=Ye(),E=Ke(),x=Xe(),C="Promise",L=E.CONSTRUCTOR,R=E.REJECTION_EVENT,P=E.SUBCLASSING,O=T.getterFor(C),M=T.set,I=w&&w.prototype,V=w,D=I,B=s.TypeError,U=s.document,F=s.process,j=x.f,H=j,z=!!(U&&U.createEvent&&s.dispatchEvent),q="unhandledrejection",G=function(e){var t;return!(!f(e)||!h(t=e.then))&&t},Q=function(e,t){var i,r,n,a=t.value,s=1===t.state,l=s?e.ok:e.fail,u=e.resolve,c=e.reject,d=e.domain;try{l?(s||(2===t.rejection&&ee(t),t.rejection=1),!0===l?i=a:(d&&d.enter(),i=l(a),d&&(d.exit(),n=!0)),i===e.promise?c(new B("Promise-chain cycle")):(r=G(i))?o(r,i,u,c):u(i)):c(a)}catch(e){d&&!n&&d.exit(),c(e)}},K=function(e,t){e.notified||(e.notified=!0,b((function(){for(var i,r=e.reactions;i=r.get();)Q(i,e);e.notified=!1,t&&!e.rejection&&Z(e)})))},X=function(e,t,i){var r,n;z?((r=U.createEvent("Event")).promise=t,r.reason=i,r.initEvent(e,!1,!0),s.dispatchEvent(r)):r={promise:t,reason:i},!R&&(n=s["on"+e])?n(r):e===q&&y("Unhandled promise rejection",i)},Z=function(e){o(v,s,(function(){var t,i=e.facade,r=e.value;if(J(e)&&(t=$((function(){a?F.emit("unhandledRejection",r,i):X(q,i,r)})),e.rejection=a||J(e)?2:1,t.error))throw t.value}))},J=function(e){return 1!==e.rejection&&!e.parent},ee=function(e){o(v,s,(function(){var t=e.facade;a?F.emit("rejectionHandled",t):X("rejectionhandled",t,e.value)}))},te=function(e,t,i){return function(r){e(t,r,i)}},ie=function(e,t,i){e.done||(e.done=!0,i&&(e=i),e.value=t,e.state=2,K(e,!0))},re=function(e,t,i){if(!e.done){e.done=!0,i&&(e=i);try{if(e.facade===t)throw new B("Promise can't be resolved itself");var r=G(t);r?b((function(){var i={done:!1};try{o(r,t,te(re,i,e),te(ie,i,e))}catch(t){ie(i,t,e)}})):(e.value=t,e.state=1,K(e,!1))}catch(t){ie({done:!1},t,e)}}};if(L&&(D=(V=function(t){m(this,D),p(t),o(e,this);var i=O(this);try{t(te(re,i),te(ie,i))}catch(e){ie(i,e)}}).prototype,(e=function(e){M(this,{type:C,done:!1,notified:!1,parent:!1,reactions:new _,rejection:!1,state:0,value:void 0})}).prototype=l(D,"then",(function(e,t){var i=O(this),r=j(g(this,V));return i.parent=!0,r.ok=!h(e)||e,r.fail=h(t)&&t,r.domain=a?F.domain:void 0,0===i.state?i.reactions.add(r):b((function(){Q(r,i)})),r.promise})),t=function(){var t=new e,i=O(t);this.promise=t,this.resolve=te(re,i),this.reject=te(ie,i)},x.f=j=function(e){return e===V||undefined===e?new t(e):H(e)},!n&&h(w)&&I!==Object.prototype)){i=I.then,P||l(I,"then",(function(e,t){var r=this;return new V((function(e,t){o(i,r,e,t)})).then(e,t)}),{unsafe:!0});try{delete I.constructor}catch{}u&&u(I,D)}r({global:!0,constructor:!0,wrap:!0,forced:L},{Promise:V}),c(V,C,!1,!0),d(C)})),Je=v(((e,t)=>{t.exports={}})),et=v(((e,t)=>{var i=ie(),r=Je(),n=i("iterator"),a=Array.prototype;t.exports=function(e){return void 0!==e&&(r.Array===e||a[n]===e)}})),tt=v(((e,t)=>{var i=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(e){var t=+e;return(t>0?r:i)(t)}})),it=v(((e,t)=>{var i=tt();t.exports=function(e){var t=+e;return t!=t||0===t?0:i(t)}})),rt=v(((e,t)=>{var i=it(),r=Math.min;t.exports=function(e){var t=i(e);return t>0?r(t,9007199254740991):0}})),nt=v(((e,t)=>{var i=rt();t.exports=function(e){return i(e.length)}})),at=v(((e,t)=>{var i=Te(),r=G(),n=O(),a=Je(),s=ie()("iterator");t.exports=function(e){if(!n(e))return r(e,s)||r(e,"@@iterator")||a[i(e)]}})),st=v(((e,t)=>{var i=k(),r=W(),n=de(),a=q(),s=at(),o=TypeError;t.exports=function(e,t){var l=arguments.length<2?s(e):t;if(r(l))return n(i(l,e));throw new o(a(e)+" is not iterable")}})),ot=v(((e,t)=>{var i=k(),r=de(),n=G();t.exports=function(e,t,a){var s,o;r(e);try{if(!(s=n(e,"return"))){if("throw"===t)throw a;return a}s=i(s,e)}catch(e){o=!0,s=e}if("throw"===t)throw a;if(o)throw s;return r(s),a}})),lt=v(((e,t)=>{var i=ue(),r=k(),n=de(),a=q(),s=et(),o=nt(),l=B(),u=st(),c=at(),d=ot(),p=TypeError,h=function(e,t){this.stopped=e,this.result=t},f=h.prototype;t.exports=function(e,t,m){var g,v,b,y,S,$,_,T=m&&m.that,w=!(!m||!m.AS_ENTRIES),E=!(!m||!m.IS_RECORD),x=!(!m||!m.IS_ITERATOR),A=!(!m||!m.INTERRUPTED),C=i(t,T),k=function(e){return g&&d(g,"normal",e),new h(!0,e)},L=function(e){return w?(n(e),A?C(e[0],e[1],k):C(e[0],e[1])):A?C(e,k):C(e)};if(E)g=e.iterator;else if(x)g=e;else{if(!(v=c(e)))throw new p(a(e)+" is not iterable");if(s(v)){for(b=0,y=o(e);y>b;b++)if((S=L(e[b]))&&l(f,S))return S;return new h(!1)}g=u(e,v)}for($=E?e.next:g.next;!(_=r($,g)).done;){try{S=L(_.value)}catch(e){d(g,"throw",e)}if("object"==typeof S&&S&&l(f,S))return S}return new h(!1)}})),ut=v(((e,t)=>{var i,r,n=ie()("iterator"),a=!1;try{i=0,(r={next:function(){return{done:!!i++}},return:function(){a=!0}})[n]=function(){return this},Array.from(r,(function(){throw 2}))}catch{}t.exports=function(e,t){try{if(!t&&!a)return!1}catch{return!1}var i=!1;try{var r={};r[n]=function(){return{next:function(){return{done:i=!0}}}},e(r)}catch{}return i}})),ct=v(((e,t)=>{var i=Ye(),r=ut(),n=Ke().CONSTRUCTOR;t.exports=n||!r((function(e){i.all(e).then(void 0,(function(){}))}))})),dt=v((()=>{var e=fe(),t=k(),i=W(),r=Xe(),n=ze(),a=lt();e({target:"Promise",stat:!0,forced:ct()},{all:function(e){var s=this,o=r.f(s),l=o.resolve,u=o.reject,c=n((function(){var r=i(s.resolve),n=[],o=0,c=1;a(e,(function(e){var i=o++,a=!1;c++,t(r,s,e).then((function(e){a||(a=!0,n[i]=e,--c||l(n))}),u)})),--c||l(n)}));return c.error&&u(c.value),o.promise}})})),pt=v((()=>{var e,t=fe(),i=Y(),r=Ke().CONSTRUCTOR,n=Ye(),a=D(),s=A(),o=ve(),l=n&&n.prototype;t({target:"Promise",proto:!0,forced:r,real:!0},{catch:function(e){return this.then(void 0,e)}}),!i&&s(n)&&(e=a("Promise").prototype.catch,l.catch!==e&&o(l,"catch",e,{unsafe:!0}))})),ht=v((()=>{var e=fe(),t=k(),i=W(),r=Xe(),n=ze(),a=lt();e({target:"Promise",stat:!0,forced:ct()},{race:function(e){var s=this,o=r.f(s),l=o.reject,u=n((function(){var r=i(s.resolve);a(e,(function(e){t(r,s,e).then(o.resolve,l)}))}));return u.error&&l(u.value),o.promise}})})),ft=v((()=>{var e=fe(),t=Xe();e({target:"Promise",stat:!0,forced:Ke().CONSTRUCTOR},{reject:function(e){var i=t.f(this);return(0,i.reject)(e),i.promise}})})),mt=v(((e,t)=>{var i=de(),r=N(),n=Xe();t.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var a=n.f(e);return(0,a.resolve)(t),a.promise}})),gt=v((()=>{var e=fe(),t=D(),i=Y(),r=Ye(),n=Ke().CONSTRUCTOR,a=mt(),s=t("Promise"),o=i&&!n;e({target:"Promise",stat:!0,forced:i||n},{resolve:function(e){return a(o&&this===s?r:this,e)}})})),vt=v((()=>{Ze(),dt(),pt(),ht(),ft(),gt()})),bt=v((()=>{var e,t=fe(),i=Y(),r=Ye(),n=$(),a=D(),s=A(),o=Pe(),l=mt(),u=ve(),c=r&&r.prototype;t({target:"Promise",proto:!0,real:!0,forced:!!r&&n((function(){c.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=o(this,a("Promise")),i=s(e);return this.then(i?function(i){return l(t,e()).then((function(){return i}))}:e,i?function(i){return l(t,e()).then((function(){throw i}))}:e)}}),!i&&s(r)&&(e=a("Promise").prototype.finally,c.finally!==e&&u(c,"finally",e,{unsafe:!0}))})),yt=v(((e,t)=>{var i=D();t.exports=i})),St=v(((e,t)=>{y(),vt(),bt();var i=yt();t.exports=i("Promise","finally")})),$t=v(((e,t)=>{var i=St();t.exports=i})),_t=v(((e,t)=>{var i=$t();t.exports=i})),Tt=v(((e,t)=>{t.exports=function(){}})),wt=v(((e,t)=>{var i=C(),r=ee(),n=Function.prototype,a=i&&Object.getOwnPropertyDescriptor,s=r(n,"name"),o=s&&"something"===function(){}.name,l=s&&(!i||i&&a(n,"name").configurable);t.exports={EXISTS:s,PROPER:o,CONFIGURABLE:l}})),Et=v(((e,t)=>{var i=it(),r=Math.max,n=Math.min;t.exports=function(e,t){var a=i(e);return a<0?r(a+t,0):n(a,t)}})),xt=v(((e,t)=>{var i=I(),r=Et(),n=nt(),a=function(e){return function(t,a,s){var o=i(t),l=n(o);if(0===l)return!e&&-1;var u,c=r(s,l);if(e&&a!=a){for(;l>c;)if((u=o[c++])!=u)return!0}else for(;l>c;c++)if((e||c in o)&&o[c]===a)return e||c||0;return!e&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}})),At=v(((e,t)=>{var i=w(),r=ee(),n=I(),a=xt().indexOf,s=Ge(),o=i([].push);t.exports=function(e,t){var i,l=n(e),u=0,c=[];for(i in l)!r(s,i)&&r(l,i)&&o(c,i);for(;t.length>u;)r(l,i=t[u++])&&(~a(c,i)||o(c,i));return c}})),Ct=v(((e,t)=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]})),kt=v(((e,t)=>{var i=At(),r=Ct();t.exports=Object.keys||function(e){return i(e,r)}})),Lt=v((e=>{var t=C(),i=ce(),r=pe(),n=de(),a=I(),s=kt();e.f=t&&!i?Object.defineProperties:function(e,t){n(e);for(var i,o=a(t),l=s(t),u=l.length,c=0;u>c;)r.f(e,i=l[c++],o[i]);return e}})),Rt=v(((e,t)=>{var i,r=de(),n=Lt(),a=Ct(),s=Ge(),o=Oe(),l=ae(),u=We(),c="prototype",d="script",p=u("IE_PROTO"),h=function(){},f=function(e){return"<"+d+">"+e+"</"+d+">"},m=function(e){e.write(f("")),e.close();var t=e.parentWindow.Object;return e=null,t},g=function(){try{i=new ActiveXObject("htmlfile")}catch{}g=typeof document<"u"?document.domain&&i?m(i):function(){var e,t=l("iframe"),i="java"+d+":";return t.style.display="none",o.appendChild(t),t.src=String(i),(e=t.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F}():m(i);for(var e=a.length;e--;)delete g[c][a[e]];return g()};s[p]=!0,t.exports=Object.create||function(e,t){var i;return null!==e?(h[c]=r(e),i=new h,h[c]=null,i[p]=e):i=g(),void 0===t?i:n.f(i,t)}})),Pt=v(((e,t)=>{var i=$();t.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))})),Ot=v(((e,t)=>{var i=ee(),r=A(),n=J(),a=We(),s=Pt(),o=a("IE_PROTO"),l=Object,u=l.prototype;t.exports=s?l.getPrototypeOf:function(e){var t=n(e);if(i(t,o))return t[o];var a=t.constructor;return r(a)&&t instanceof a?a.prototype:t instanceof l?u:null}})),Mt=v(((e,t)=>{var i,r,n,a=$(),s=A(),o=N(),l=Rt(),u=Ot(),c=ve(),d=ie(),p=Y(),h=d("iterator"),f=!1;[].keys&&("next"in(n=[].keys())?(r=u(u(n)))!==Object.prototype&&(i=r):f=!0),!o(i)||a((function(){var e={};return i[h].call(e)!==e}))?i={}:p&&(i=l(i)),s(i[h])||c(i,h,(function(){return this})),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:f}})),It=v(((e,t)=>{var i=Mt().IteratorPrototype,r=Rt(),n=R(),a=Ee(),s=Je(),o=function(){return this};t.exports=function(e,t,l,u){var c=t+" Iterator";return e.prototype=r(i,{next:n(+!u,l)}),a(e,c,!1,!0),s[c]=o,e}})),Nt=v(((e,t)=>{var i=fe(),r=k(),n=Y(),a=wt(),s=A(),o=It(),l=Ot(),u=$e(),c=Ee(),d=he(),p=ve(),h=ie(),f=Je(),m=Mt(),g=a.PROPER,v=a.CONFIGURABLE,b=m.IteratorPrototype,y=m.BUGGY_SAFARI_ITERATORS,S=h("iterator"),$="keys",_="values",T="entries",w=function(){return this};t.exports=function(e,t,a,h,m,E,x){o(a,t,h);var A,C,k,L=function(e){if(e===m&&I)return I;if(!y&&e&&e in O)return O[e];switch(e){case $:case _:case T:return function(){return new a(this,e)}}return function(){return new a(this)}},R=t+" Iterator",P=!1,O=e.prototype,M=O[S]||O["@@iterator"]||m&&O[m],I=!y&&M||L(m),N="Array"===t&&O.entries||M;if(N&&((A=l(N.call(new e)))!==Object.prototype&&A.next&&(!n&&l(A)!==b&&(u?u(A,b):s(A[S])||p(A,S,w)),c(A,R,!0,!0),n&&(f[R]=w))),g&&m===_&&M&&M.name!==_&&(!n&&v?d(O,"name",_):(P=!0,I=function(){return r(M,this)})),m)if(C={values:L(_),keys:E?I:L($),entries:L(T)},x)for(k in C)(y||P||!(k in O))&&p(O,k,C[k]);else i({target:t,proto:!0,forced:y||P},C);return(!n||x)&&O[S]!==I&&p(O,S,I,{name:m}),f[t]=I,C}})),Vt=v(((e,t)=>{t.exports=function(e,t){return{value:e,done:t}}})),Dt=v(((e,t)=>{var i=I(),r=Tt(),n=Je(),a=Qe(),s=pe().f,o=Nt(),l=Vt(),u=Y(),c=C(),d="Array Iterator",p=a.set,h=a.getterFor(d);t.exports=o(Array,"Array",(function(e,t){p(this,{type:d,target:i(e),index:0,kind:t})}),(function(){var e=h(this),t=e.target,i=e.index++;if(!t||i>=t.length)return e.target=void 0,l(void 0,!0);switch(e.kind){case"keys":return l(i,!1);case"values":return l(t[i],!1)}return l([i,t[i]],!1)}),"values");var f=n.Arguments=n.Array;if(r("keys"),r("values"),r("entries"),!u&&c&&"values"!==f.name)try{s(f,"name",{value:"values"})}catch{}})),Bt=v(((e,t)=>{var i=C(),r=pe(),n=R();t.exports=function(e,t,a){i?r.f(e,t,n(0,a)):e[t]=a}})),Ut=v((()=>{var e=fe(),t=lt(),i=Bt();e({target:"Object",stat:!0},{fromEntries:function(e){var r={};return t(e,(function(e,t){i(r,e,t)}),{AS_ENTRIES:!0}),r}})})),Ft=v(((e,t)=>{Dt(),Ut();var i=V();t.exports=i.Object.fromEntries})),jt=v(((e,t)=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}})),Ht=v((()=>{Dt();var e,t=jt(),i=S(),r=Ee(),n=Je();for(e in t)r(i[e],e),n[e]=n.Array})),zt=v(((e,t)=>{var i=Ft();Ht(),t.exports=i})),qt=v(((e,t)=>{var i=zt();t.exports=i})),Wt=((a=Wt||{}).PROD="prod",a.VK_ALIAS="vk_alias",a.VIDEOTEST="videotest",a.TEST="test",a.OKCDN="okcdn",a.AUTO="auto",a),Gt=((n=Gt||{}).Q144P="mobile",n.Q240P="lowest",n.Q360P="low",n.Q480P="medium",n.Q720P="high",n.Q1080P="fullhd",n.Q1440P="quadhd",n.Q2160P="ultrahd",n.UNKNOWN="unknown",n),Qt=((r=Qt||{}).MP4="mp4",r.DASH="dash",r.DASH_SEP="dash_sep",r.ONDEMAND_DASH="ondemand_dash",r.HLS="hls",r.ONDEMAND_HLS="ondemand_hls",r.WEBM="webm",r.AV1="av1",r.ONDEMAND_DASH_LIVE="ondemand_dash_live",r.ONDEMAND_HLS_LIVE="ondemand_hls_live",r.WEBRTC="webrtc",r.UNKNOWN="unknown",r.RTMP="rtmp",r),Yt=((s=Yt||{}).HTTP1="http1",s.HTTP2="http2",s.HTTP3="http3",s),Kt=((l=Kt||{}).SLIDER="slider",l.DOUBLE_TAP="double_tap",l.TIME_CODE="time_code",l.EPISODE="episode",l.REWIND="rewind",l.LIVE="live",l.UNKNOWN="unknown",l),Xt=((o=Xt||{}).GRAPH_SHOW="iGraphShow",o.GRAPH_HIDE="iGraphHide",o.NEXT_AREA="iNextChapterArea",o.NEXT_BUTTON="iNextChapterBtn",o.WATCH_AGAIN="iWatchAgainBtn",o),Zt={action_play:"ap",action_play_interactive:"api",first_bytes:"fb",player_ready:"pr",first_frame:"ff",seek:"sk",watch_coverage_record:"wr",watch_coverage_live:"wl",empty_buffer:"eb",action_stop:"as",close_at_empty_buffer:"cb",content_error:"er",player_interface_click:"pc",next_movie:"nm",track_switch:"ts",failover:"fo",quality:"qt"},Jt={vsid:"si",isid:"is",vid:"vi",place:"pl",quality:"qt",cdn_host:"ch",stat_type:"st",param:"pm",vk_app_id:"va",track_code:"tc",connection_type:"cnt",connection_reused:"cr",cached_data:"cd",live:"lv",muted:"mu",mode:"mo",subtitles:"sb",failover:"fo",download_speed:"ds",manual_quality:"mq",ref_domain:"rd",direct_url:"du"},ei={unknown:"un",mobile:"m",lowest:"ls",low:"l",medium:"md",high:"h",fullhd:"f",quadhd:"q",ultrahd:"u"},ti={pip:"pi",fullscreen:"fs",external:"ex",prefetch:"pr",airplay:"ap",chromecast:"cc",invisible:"iv"},ii={apiEnv:"vk_alias",requestRetryCount:1,firstFlushTime:5e3,flushDebounceTime:1e4,flushMaxWait:6e4,storageExpiration:1296e5,watchCoverageInterval:15e3,disabledOperations:["quality"],disabledCustomFields:[],shorten:!0,maxLoops:100,embedUrlParams:[],useBeacon:!0,synchronizeTime:!0,debugLog:!1,backoff:{start:1e3,factor:1.5,max:3e5,random:.1}};var ri=b(_t(),1),ni=b(qt(),1),ai=e=>{let{operation:t,custom:i}=e,r=(0,ni.default)(Object.entries(i).map((([e,t])=>{let i=t;return t&&("mode"===e?i=ti[t]??t:"quality"===e&&(i=ei[t]??t)),[Jt[e]??e,i]})));return{...e,operation:Zt[t]??t,custom:r}},si="1.0.64",oi={prod:"https://api.ok.ru",vk_alias:"https://api.mycdn.me",videotest:"https://videotestapi.ok.ru/api",test:"https://apitest.ok.ru",okcdn:"https://api.okcdn.ru",auto:""},li=class{async authorize(e){return this.authToken=e??await this.refreshAuthToken(),this._authorizeWithBackoff()}logBeacon(e){let t=this.createLogParams(e),i=this.sessionKey;i&&(this.params.apiTransport.sendBeacon("log.externalLog",t,i)||this.logRequest(e))}async logRequest(e){let t="log.externalLog",i=this.createLogParams(e),r=this.sessionKey??await this._authorizeWithBackoff();if(!r)return;let n=async(e,a=this.params.config.requestRetryCount)=>{try{return await this.params.apiTransport.sendRequest(t,i,r)}catch(i){if(!i||!("error_code"in i))return void this.params.error$.next({id:"logRequestUnknown",category:u.ErrorCategory.NETWORK,message:`Unknown ${t} error`,thrown:i});let r=i?.error_code;switch(r){case 102:case 103:case 104:return this.authorized$.next(!1),this.sessionKey=await this._authorizeWithBackoff(),a>0?n(e,a-1):void 0;case 401:return this.authorized$.next(!1),this.authToken=await this.refreshAuthToken(),this.sessionKey=await this._authorizeWithBackoff(),a>0?n(e,a-1):void 0;default:return void this.params.error$.next({id:`LogRequest#${r}`,category:u.ErrorCategory.EXTERNAL_API,message:`${t} error`,data:i})}}};return n(e)}destroy(){window.clearTimeout(this.backoffTimeoutId),this.backoffTimeoutId=0}async refreshAuthToken(){if(this.params.refreshAuthToken)return this.refreshAuthTokenPromise||(this.refreshAuthTokenPromise=(0,ri.default)(this.params.refreshAuthToken(),(()=>{this.refreshAuthTokenPromise=void 0}))),this.refreshAuthTokenPromise}createLogParams(e){return{collector:"ok.mobile.apps.video",data:JSON.stringify({application:`@vkontakte/videoplayer-statistics:${si}`,platform:this.params.mobile?"M_WEB":"WEB",items:this.params.config.shorten?e.map(ai):e})}}_authorizeWithBackoff(){if(!this.consequentAuthErrors)return this._authorize();let e=(0,u.getExponentialDelay)(this.consequentAuthErrors,this.params.config.backoff);return new Promise((t=>{this.backoffTimeoutId||(this.backoffTimeoutId=window.setTimeout((()=>{(0,ri.default)(this._authorize().then(t).catch((e=>this.params.error$.next({id:"AuthorizeBackoff",category:u.ErrorCategory.NETWORK,message:"Otherwise unhandled error in authorization",thrown:e}))),(()=>this.backoffTimeoutId=0))}),e))}))}async _authorize(){if(this.authorizePromise)return this.authorizePromise;this.sessionKey=void 0,this.authorized$.next(!1);let e={session_data:{version:2,device_id:this.params.deviceId,client_version:si.split("-")[0],client_type:"SDK_JS"}};return void 0!==this.authToken&&(e.session_data.auth_token=this.authToken,e.session_data.version=3),this.authorizePromise=(0,ri.default)(this.params.apiTransport.sendRequest("auth.anonymLogin",e).then((e=>((!e||!e.session_key)&&this.params.error$.next({id:"AuthorizeFailed",category:u.ErrorCategory.EXTERNAL_API,message:"No session key",data:e}),this.sessionKey=e?.session_key??void 0,this.sessionKey))).catch((async e=>{this.sessionKey=void 0;let t=e?.error_code;if(401===t)return this.authToken=await this.refreshAuthToken(),this._authorizeWithBackoff();t?this.params.error$.next({id:`Authorize#${t}`,category:u.ErrorCategory.EXTERNAL_API,message:"authorize error",data:e}):this.params.error$.next({id:"AuthorizeUnknown",category:u.ErrorCategory.NETWORK,message:"authorize error",thrown:e})})),(()=>{this.authorizePromise=void 0,this.consequentAuthErrors=this.sessionKey?0:this.consequentAuthErrors+1,this.authorized$.next(void 0!==this.sessionKey)})),this.authorizePromise}constructor(e){this.consequentAuthErrors=0,this.authorized$=new u.ValueSubject(!1),this.params=e}},ui=class{addEventListener(e,t,i){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:i})}removeEventListener(e,t){if(!(e in this.listeners))return;let i=this.listeners[e];for(let e=0,r=i.length;e<r;e++)if(i[e].callback===t)return void i.splice(e,1)}dispatchEvent(e){if(!(e.type in this.listeners))return;let t=this.listeners[e.type].slice();for(let i=0,r=t.length;i<r;i++){let r=t[i];try{r.callback.call(this,e)}catch(e){Promise.resolve().then((()=>{throw e}))}r.options&&r.options.once&&this.removeEventListener(e.type,r.callback)}return!e.defaultPrevented}constructor(){Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}},ci=class extends ui{toString(){return"[object AbortSignal]"}dispatchEvent(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),super.dispatchEvent(e)}constructor(){super(),this.listeners||ui.call(this),Object.defineProperty(this,"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(this,"reason",{value:void 0,writable:!0,configurable:!0})}},di=class{abort(e){let t;try{t=new Event("abort")}catch{typeof document<"u"?document.createEvent?(t=document.createEvent("Event"),t.initEvent("abort",!1,!1)):(t=document.createEventObject(),t.type="abort"):t={type:"abort",bubbles:!1,cancelable:!1}}let i=e;if(void 0===i)if(typeof document>"u")i=new Error("This operation was aborted"),i.name="AbortError";else try{i=new DOMException("signal is aborted without reason")}catch{i=new Error("This operation was aborted"),i.name="AbortError"}this.signal.reason=i,this.signal.dispatchEvent(t)}toString(){return"[object AbortController]"}constructor(){Object.defineProperty(this,"signal",{value:new ci,writable:!0,configurable:!0})}};function pi(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}typeof Symbol<"u"&&Symbol.toStringTag&&(di.prototype[Symbol.toStringTag]="AbortController",ci.prototype[Symbol.toStringTag]="AbortSignal");var hi=pi({fetch:window.fetch,Request:window.Request,AbortController:window.AbortController}),fi=hi?function(e){"function"==typeof e&&(e={fetch:e});let{fetch:t,Request:i=t.Request,AbortController:r,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:n=!1}=e;if(!pi({fetch:t,Request:i,AbortController:r,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:n}))return{fetch:t,Request:a};let a=i;(a&&!a.prototype.hasOwnProperty("signal")||n)&&(a=function(e,t){let r;t&&t.signal&&(r=t.signal,delete t.signal);let n=new i(e,t);return r&&Object.defineProperty(n,"signal",{writable:!1,enumerable:!1,configurable:!0,value:r}),n},a.prototype=i.prototype);let s=t;return{fetch:(e,t)=>{let i=a&&a.prototype.isPrototypeOf(e)?e.signal:t?t.signal:void 0;if(i){let r;try{r=new DOMException("Aborted","AbortError")}catch{r=new Error("Aborted"),r.name="AbortError"}if(i.aborted)return Promise.reject(r);let n=new Promise(((e,t)=>{i.addEventListener("abort",(()=>t(r)),{once:!0})}));return t&&t.signal&&delete t.signal,Promise.race([n,s(e,t)])}return s(e,t)},Request:a}}({fetch:window.fetch,Request:window.Request,AbortController:window.AbortController}):void 0,mi=hi?fi.fetch:window.fetch,gi=(hi?fi.Request:window.Request,hi||window.AbortController,hi||window.AbortSignal,class{async resolveApiBaseUrl(){if("auto"!==this.apiEnv||this.isApiBaseUrlFetched)return this.apiBaseUrl;try{let e=atob("aHR0cHM6Ly9kbnMuZ29vZ2xlL3Jlc29sdmU/bmFtZT12aWRlby5fZW5kcG9pbnQub2sucnUmdHlwZT1UWFQ="),t=(await(await mi(e,{method:"GET",mode:"cors",cache:"no-cache"})).json())?.Answer[0]?.data;if(!t)throw new Error("Wrong DNS response");return t}catch(e){return this.params.error$.next({id:"OneStat:ApiTransport:resolveApiBaseUrl",category:u.ErrorCategory.NETWORK,message:"Unhandled resolve api base url error",thrown:e}),oi.vk_alias}finally{this.isApiBaseUrlFetched=!0}}sendBeacon(e,t,i){if(!window.Blob||!window.navigator.sendBeacon)return!1;let r=this._prepareQueryParams({method:e,queryParams:t,sessionKey:i}),n=new window.Blob([r.toString()],{type:"application/x-www-form-urlencoded"});try{return window.navigator.sendBeacon(`${this.apiBaseUrl}/fb.do`,n)}catch(i){this.params.error$.next({id:"OneStat:ApiTransport:sendBeacon",category:u.ErrorCategory.NETWORK,message:"Unhandled beacon error",thrown:i,data:{method:e,params:t}})}return!1}async sendRequest(e,t,i){let r=(0,u.now)(),n=n=>{n instanceof TypeError&&["Failed to fetch","NetworkError when attempting to fetch resource."].includes(n.message)?this.params.error$.next({id:"Network",category:u.ErrorCategory.NETWORK,message:"Request failed",thrown:n}):this.params.error$.next({id:"OneStat:ApiTransport:sendRequest",category:u.ErrorCategory.NETWORK,message:"Unhandled request error",thrown:n,data:{method:e,params:t,sessionKey:i,time:(0,u.now)()-r}})};return this.apiBaseUrl=await this.resolveApiBaseUrl(),mi(`${this.apiBaseUrl}/fb.do`,{method:"post",headers:{"Content-type":"application/x-www-form-urlencoded"},body:this._prepareQueryParams({method:e,queryParams:t,sessionKey:i})}).then((e=>{let t=0===Number(e.headers.get("content-length")),i=new Date(e.headers.get("date")??"").getTime(),a=(0,u.now)()-r;if(isFinite(i)&&this.timeSynchronisation?.addServerTime(i,a),!t)return e.json().then((e=>Object.prototype.hasOwnProperty.call(e,"error_msg")?Promise.reject(e):e),n)}),n)}_prepareQueryParams(e){let t=new URLSearchParams({format:"JSON",method:e.method,application_key:this.apiKey});return void 0!==e.sessionKey&&t.append("session_key",e.sessionKey),Object.entries(e.queryParams).forEach((([e,i])=>t.append(e,"string"==typeof i?i:JSON.stringify(i)))),t}constructor(e){this.params=e,this.apiKey=e.apiKey,this.apiEnv=e.config.apiEnv,this.apiBaseUrl=oi[this.apiEnv],this.timeSynchronisation=e.timeSynchronisation,this.isApiBaseUrlFetched=!1}}),vi="onestat_events",bi=e=>t=>t.timestamp+e>=(0,u.now)(),yi=class{safeFlush(){try{this.flush()}catch(e){this.error$.next({id:"LoggerError",category:u.ErrorCategory.WTF,message:String(e)??"Unknown logger error",thrown:e})}}readFromStorage(){let e=u.safeStorage.get(vi);try{return e?JSON.parse(e):{}}catch{}return{}}addToStorage(e){if(!this.userSalt)return void this.unsaltedStorage.push(e);let t=this.readFromStorage(),i=(t[this.userSalt]??[]).filter(bi(this.params.config.storageExpiration));u.safeStorage.set(vi,JSON.stringify({...t,[this.userSalt]:[...i,e]}))}getFromStorage(){return this.userSalt?(this.readFromStorage()[this.userSalt]??[]).filter(bi(this.params.config.storageExpiration)):this.unsaltedStorage}markStorageSent(){if(!this.userSalt)return void(this.unsaltedStorage=[]);let e=this.readFromStorage();delete e[this.userSalt],u.safeStorage.set(vi,JSON.stringify(e))}housekeepStorage(){let e=this.readFromStorage();for(let[t,i]of Object.entries(e)){let r=i.filter(bi(this.params.config.storageExpiration));r.length?e[t]=r:delete e[t],this.loggerDebugLog({message:`${i.length} retrieved from storage, ${r.length} of them actual`})}u.safeStorage.set(vi,JSON.stringify(e))}log(e){this.addToStorage(e),!this.isPaused&&(this.isUrgent(e)?this.flush():this.lastVsid!==e.custom.vsid?this.firstFlush():this.debouncedFlush(),this.lastVsid=e.custom.vsid)}flush(e=!1){let t=this.getFromStorage();0!==t.length&&(this.api.authorized$.getValue()?(e&&this.params.config.useBeacon?(this.loggerDebugLog({message:`Flushing ${t.length} events through beacon`}),this.api.logBeacon(t)):(this.loggerDebugLog({message:`Flushing ${t.length} events`}),this.api.logRequest(t)),this.markStorageSent()):this.api.authorize(),this.firstFlush.cancel(),this.debouncedFlush.cancel())}pause(){this.isPaused=!0,this.debouncedFlush.cancel()}resume(){this.isPaused=!1,this.debouncedFlush()}destroy(){this.subscription.unsubscribe(),this.firstFlush.cancel(),this.debouncedFlush.cancel()}constructor(e){this.unsaltedStorage=[],this.isPaused=!1,this.isUrgent=e=>{let{operation:t}=e;return["action_play","watch_coverage_record","watch_coverage_live"].includes(t)},this.params=e,this.api=e.api,this.error$=e.error$,this.userSalt=e.userSalt,this.loggerDebugLog=e.debugLogger.createComponentLog("stat logger"),this.firstFlush=(0,u.debounceFn)((()=>this.safeFlush()),this.params.config.firstFlushTime,{maxWait:this.params.config.firstFlushTime});let t=u.safeStorage.isPersistent()?this.params.config.flushMaxWait:0;this.debouncedFlush=(0,u.debounceFn)((()=>this.safeFlush()),this.params.config.flushDebounceTime,{maxWait:t}),this.subscription=this.api.authorized$.subscribe((e=>{e&&this.debouncedFlush()})),this.housekeepStorage()}},Si=e=>e&&{[c.HttpConnectionType.HTTP1]:"http1",[c.HttpConnectionType.HTTP2]:"http2",[c.HttpConnectionType.QUIC]:"http3"}[e],$i=e=>{if(void 0!==e)switch(e){case c.VideoFormat.MPEG:return"mp4";case c.VideoFormat.DASH:case c.VideoFormat.DASH_LIVE:case c.VideoFormat.DASH_STREAMS:return"dash";case c.VideoFormat.DASH_SEP:return"dash_sep";case c.VideoFormat.DASH_ONDEMAND:return"ondemand_dash";case c.VideoFormat.DASH_WEBM:case c.VideoFormat.DASH_LIVE_WEBM:return"webm";case c.VideoFormat.DASH_WEBM_AV1:return"av1";case c.VideoFormat.DASH_LIVE_CMAF:return"ondemand_dash_live";case c.VideoFormat.HLS:case c.VideoFormat.HLS_LIVE:return"hls";case c.VideoFormat.HLS_ONDEMAND:return"ondemand_hls";case c.VideoFormat.HLS_LIVE_CMAF:return"ondemand_hls_live";case c.VideoFormat.WEB_RTC_LIVE:return"webrtc";default:return(0,u.assertNever)(e)}},_i=e=>{if(void 0!==e)switch(e){case c.Surface.NONE:case c.Surface.INLINE:return;case c.Surface.FULLSCREEN:return"fullscreen";case c.Surface.SECOND_SCREEN:return"chromecast";case c.Surface.PIP:return"pip";case c.Surface.INVISIBLE:return"invisible";default:return(0,u.assertNever)(e)}},Ti=e=>{switch(e){case"slow-2g":case"2g":return"poor";case"3g":return"good";case"4g":return"excellent"}},wi=class{getOffset(){return this.offset??0}setOffset(e){this.offset=e}now(){return Date.now()+(this.offset??0)}date(e=new Date){return e.setTime(e.getTime()+(this.offset??0)),e}addServerTime(e,t){let i=e-Date.now()-t/2;Math.abs(i)<1e3?this.offset=0:void 0===this.offset?this.offset=Math.round(i):this.offset=Math.round(.2*i+.8*this.offset)}constructor(e){this.offset=void 0,this.offset=e}},Ei="_one-stat_",xi=`${Ei}uuid`,Ai=`${Ei}deviceId`,Ci=()=>{let e=new u.Subscription;return{subscription:e,subscribe:(t,i)=>{t&&e.add(t.subscribe(i))}}},ki=class{updateContext(e){this.statContext={...this.statContext,...e}}attachTo(e){let t,i=new u.Subscription,r=(e,t)=>i.add(e.subscribe(t));r(e.events.willStart$,(()=>{let t=e.info.position$.getValue();this.logActionPlay({position:t}),this.statContext.projectId&&this.logActionPlayInteractive()})),r(e.events.looped$,(()=>{this.resetViewSession(),++this.loopCounter>this.config.maxLoops&&(this.disabled=!0),this.logActionPlay({position:e.info.position$.getValue()})})),r(e.events.seeked$,(()=>{this.logSeek({action:this.seekAction$.getValue(),time:e.info.position$.getValue()}),this.seekAction$.next("unknown")})),r(e.events.paused$,(()=>{this.logPause({position:e.info.position$.getValue()})})),r(e.events.willResume$,(()=>{this.logPlay()})),r(e.events.started$,(()=>{this.statContext.clip&&this.logWatchCoverageRecord({start:0,end:0})})),r(e.events.playing$,(()=>{this.logPlaying()})),r(((e,t)=>new u.Observable((i=>{let r,n=new u.Subscription,a=(0,u.merge)((0,u.fromEvent)(window,"beforeunload"),e.events.willDestruct$),s=new u.ValueSubject(void 0);n.add(e.info.isLive$.pipe((0,u.filterChanged)()).subscribe((t=>{r&&(r.unsubscribe(),s.next(void 0)),r=t?e.info.liveTime$.pipe((0,u.map)((e=>e&&e/1e3))).subscribe(s):e.info.position$.subscribe(s),n.add(r)})));let{playing$:o,paused$:l}=e.events,d=e.events.willSeek$.pipe((0,u.filter)((()=>e.info.playbackState$.getValue()===c.PlaybackState.PLAYING))),p=e.events.seeked$.pipe((0,u.filter)((()=>e.info.playbackState$.getValue()===c.PlaybackState.PLAYING))),h=!1,f=new u.Subject;n.add(d.subscribe((()=>{h||f.next(),h=!0}))),n.add(p.subscribe((()=>h=!1)));let m,g=new u.Subject,v=new u.Subject,b=(0,u.merge)(o,p,g),y=(0,u.merge)(l,f,a,e.events.looped$,v),S=()=>{v.next(),g.next()};if(n.add(b.subscribe((()=>m=s.getValue()))),n.add(y.subscribe((()=>{let e=s.getValue();(0,u.isNullable)(m)||m===e||(0,u.isNullable)(e)||(i.next({from:m,to:e}),m=void 0)}))),t.forceInterval&&isFinite(t.forceInterval)){let e=0;n.add(b.subscribe((()=>e=window.setTimeout(S,t.forceInterval)))),n.add(y.subscribe((()=>window.clearTimeout(e))))}return n})))(e,{forceInterval:this.config.watchCoverageInterval}),(t=>{let i=e.info.isLive$.getValue(),r={start:parseFloat(t.from.toFixed(3)),end:parseFloat(t.to.toFixed(3))};i?this.logWatchCoverageLive(r):this.logWatchCoverageRecord(r)})),r(e.info.isStalled$,(e=>{e?t=(0,u.now)():((0,u.isNonNullable)(t)&&this.logEmptyBuffer({duration:(0,u.now)()-t}),t=void 0)}));let n=!1;i.add(e.events.fatalError$.pipe((0,u.once)()).subscribe((()=>n=!0))),r(e.events.willStop$,(()=>{if(e.info.isStalled$.getValue()){let e=(0,u.isNonNullable)(t)?(0,u.now)()-t:void 0;this.logCloseAtEmptyBuffer({duration:e??0}),t=void 0}else n||this.logActionStop()})),r(e.events.managedError$,(({id:e})=>{this.logError({fatal:!1,errorType:e})})),r(e.events.fatalError$,(({id:e})=>{this.logError({fatal:!0,errorType:e})}));let a,s,o,l,d,p=!1;return r(e.events.firstBytes$,(e=>{a=(0,u.now)(),this.logFirstBytes({time:e})})),r(e.events.willStart$,(()=>s=(0,u.now)())),r(e.info.currentBuffer$,(e=>{!p&&e&&e.end-e.start>0&&(0,u.isNonNullable)(a)&&(this.logPlayerReady({duration:(0,u.now)()-a}),p=!0)})),r(e.events.firstFrame$,(()=>{(0,u.isNonNullable)(a)&&!p&&(this.logPlayerReady({duration:(0,u.now)()-a}),p=!0),(0,u.isNonNullable)(s)&&this.logFirstFrame({time:(0,u.now)()-s})})),r(e.info.currentVideoStream$,(e=>{e&&(o&&e.id!==o&&this.logTrackSwitch(e),o=e.id)})),r(e.info.currentAudioStream$,(e=>{e&&(l&&e.id!==l&&this.logTrackSwitch(e),l=e.id)})),r(e.info.atLiveEdge$,(e=>this.updateContext({liveEdge:e}))),r((0,u.combine)({muted:e.info.muted$,volume:e.info.volume$}),(({muted:e,volume:t})=>this.updateContext({audible:!e&&t>0}))),r(e.info.currentQuality$,(e=>{let t=(i=e)&&{[c.VideoQuality.INVARIANT]:"unknown",[c.VideoQuality.Q_144P]:"mobile",[c.VideoQuality.Q_240P]:"lowest",[c.VideoQuality.Q_360P]:"low",[c.VideoQuality.Q_480P]:"medium",[c.VideoQuality.Q_576P]:"unknown",[c.VideoQuality.Q_720P]:"high",[c.VideoQuality.Q_1080P]:"fullhd",[c.VideoQuality.Q_1440P]:"quadhd",[c.VideoQuality.Q_2160P]:"ultrahd",[c.VideoQuality.Q_4320P]:"unknown"}[i];var i;this.updateContext({quality:t}),t&&this.logQuality(t)})),r(e.info.isAutoQualityEnabled$,(e=>this.updateContext({autoQuality:e}))),r(e.info.currentFormat$,(e=>this.updateContext({contentType:$i(e)}))),r(e.info.currentPlaybackRate$,(e=>this.updateContext({rate:e}))),r(e.info.is3DVideo$,(e=>this.updateContext({is3d:e}))),r(e.info.hostname$,(e=>{let t=void 0!==d&&d!==e;this.updateContext({cdnHostname:e,failover:t}),t&&this.logFailover(e),d=e})),r(e.info.throughputEstimation$,(e=>this.updateContext({downloadSpeed:e}))),r(e.info.httpConnectionType$,(e=>{this.statContext.firstConnectionType||this.updateContext({firstConnectionType:Si(e)}),this.updateContext({connectionType:Si(e)})})),r(e.info.httpConnectionReused$,(e=>{(0,u.isNullable)(this.statContext.firstConnectionReused)&&this.updateContext({firstConnectionReused:e}),this.updateContext({connectionReused:e})})),r(e.info.surface$,(e=>this.updateContext({mode:_i(e)}))),r((0,u.combine)({current:e.info.currentTextTrack$,available:e.info.availableTextTracks$}),(({current:e,available:t})=>{let i=t.find((({id:t})=>t===e)),r=i&&(i.isAuto?`${i.language}_auto`:i.language);this.updateContext({subtitles:r})})),this.player=e,this.uiEvents&&this.attachToUi(this.uiEvents),this.resubscribeBeforeunload(),this.subscription.add(i),i}attachToUi(e){this.uiEvents=e;let{subscription:t,subscribe:i}=Ci();return this.player&&(i(e.actionRewind$,(()=>{this.player&&(this.resetViewSession(),this.logActionPlay({position:this.player.info.position$.getValue()}))})),i(e.actionSeek$,this.seekAction$),i(e.inPiP$,(e=>{let t=e?"pip":_i(this.player?.info.surface$.getValue());this.updateContext({mode:t})})),i(e.inFullscreen$,(e=>{let t=e?"fullscreen":_i(this.player?.info.surface$.getValue());this.updateContext({mode:t})})),i(e.actionSetSubtitle$,(e=>this.updateContext({subtitles:e}))),i(e.nextMovie$,(e=>this.logNextMovie(e))),this.resubscribeBeforeunload(),this.subscription.add(t)),t}attachToAds(e){let{subscription:t,subscribe:i}=Ci();return i(e.slotRequested$,(()=>this.logAdSlotRequest())),i(e.started$,(e=>this.logAdStarted(e))),i(e.paused$,(()=>this.logAdPaused())),i(e.resumed$,(()=>this.logAdResumed())),i(e.ended$,(()=>this.logAdEnded())),i(e.skipped$,(()=>this.logAdSkipped())),i(e.clicked$,(()=>this.logAdClicked())),i(e.error$,(e=>this.logError({errorType:e,fatal:!1}))),this.resubscribeBeforeunload(),this.subscription.add(t),t}attachToInteractive(e){let{subscription:t,subscribe:i}=Ci();return i(e.click$,(e=>this.logInterfaceClick(e))),i(e.nextMovie$,(e=>this.logNextMovie(e))),this.resubscribeBeforeunload(),this.subscription.add(t),t}authorize(e){return this.api.authorize(e)}pause(){this.logger.pause(),this.oneStatDebugLog({message:"paused"})}resume(){this.logger.resume(),this.oneStatDebugLog({message:"resumed"})}destroy(){this.logger.flush(),this.subscription.unsubscribe(),this.api.destroy(),this.logger.destroy()}resetViewSession(){this.oneStatDebugLog({message:"VSID reset"}),this.vsid$.next(Math.floor(4294967296*Math.random()).toString(36).padStart(7,"0"))}getDeviceId(){return this.deviceId}setFieldBlacklist(){}logInited(){}logReady(e){this.log({operation:"player_ready",param:String(e.time)})}logStarted(...e){this.logActionPlay(...e)}logPlay(){this.log({operation:"play_toggle"})}logPlaying(){this.log({operation:"playing"})}logPause(e){this.log({operation:"pause",param:String(Math.round(e.position))})}logSeek(e){this.log({operation:"seek",param:e.action,time:e.time})}logFirstBytes(e){this.log({operation:"first_bytes",param:String(e.time)})}logFirstFrame(e){this.log({operation:"first_frame",param:String(e.time)})}logError(e){this.log({operation:"content_error",param:`${e.fatal?"fatal":"recoverable"}_${e.errorType}`})}logWatchCoverageRecord(e){this.log({operation:"watch_coverage_record",param:`${e.start}-${e.end}`},{in_history:this.statContext.inHistory?1:void 0})}logWatchCoverageLive(e){let t=this.timeSynchronisation?.getOffset()??0,i=e.start+t,r=e.end+t;this.log({operation:"watch_coverage_live",param:`${i}-${r}`},{in_history:this.statContext.inHistory?1:void 0})}logEmptyBuffer(e){this.log({operation:"empty_buffer",param:String(e.duration)})}logDownloadSpeed(){}logAdSlotRequest(){this.log({operation:"adv",param:"slot_request"})}logAdStarted(e){this.log({operation:"adv",param:e})}logAdPaused(){this.log({operation:"adv",param:"pause"})}logAdResumed(){this.log({operation:"adv",param:"resume"})}logAdEnded(){this.log({operation:"adv",param:"ended"})}logAdSkipped(){this.log({operation:"adv",param:"skip"})}logAdClicked(){this.log({operation:"adv",param:"click"})}logInterfaceClick(e){this.log({operation:"player_interface_click",param:e})}logNextMovie(e){this.log({operation:"next_movie",param:String(e)})}subscribe(){this.resubscribeBeforeunload();let e=window.navigator.connection;e&&"onchange"in e&&"effectiveType"in e&&this.subscription.add((0,u.merge)((0,u.fromEvent)(e,"change"),(0,u.observableFrom)(["init"])).subscribe((()=>this.updateContext({network:Ti(e.effectiveType)})))),this.config.debugLog&&this.debugLogger.log$.subscribe((e=>{console.debug("%c stat ","background:#fa6470;",`component: ${e.component}.`,e.message)}))}resubscribeBeforeunload(){this.beforeunloadSubscription?.unsubscribe(),this.beforeunloadSubscription=(0,u.fromEvent)(window,"beforeunload").subscribe((()=>this.logger.flush(!0))),this.subscription.add(this.beforeunloadSubscription)}logPlayerReady(e){this.log({operation:"player_ready",param:String(Math.round(e.duration))})}logActionPlay(e){this.log({operation:"action_play",param:String(Math.round(e.position))})}logActionPlayInteractive(){this.statContext.projectId&&this.log({operation:"action_play_interactive",param:String(this.statContext.movieId)},{vid:this.statContext.projectId})}logFailover(e){this.log({operation:"failover",param:e})}logCloseAtEmptyBuffer(e){this.log({operation:"close_at_empty_buffer",param:String(Math.round(e.duration))})}logActionStop(){this.log({operation:"action_stop"})}logTrackSwitch(e){this.log({operation:"track_switch",param:e.id})}logQuality(e){this.log({operation:"quality",param:e})}log(e,t={}){if(this.disabled)return void this.oneStatDebugLog({message:`operation ${e.operation} but statistics is disabled`});if(this.config.disabledOperations.includes(e.operation))return void this.oneStatDebugLog({message:`operation ${e.operation} but it is disabled`});this.oneStatDebugLog({message:`operation ${e.operation} ${e.param}`});let i=this.createLogItem(e,t);this.logger.log(i)}createLogItem({operation:e,param:t,time:i},r={}){let n=this.timeSynchronisation?.now()??(0,u.now)(),a=this.vsid$.getValue();(0,u.assertNonNullable)(a);let s,o,l=this.isid$.getValue(),c="empty_buffer"===e||"close_at_empty_buffer"===e?this.statContext.connectionType:this.statContext.firstConnectionType,d=this.statContext.firstConnectionReused;if(this.isEmbed){s=this.embedParent;let e=[...new URLSearchParams(location.search).entries()].filter((([e,t])=>this.config.embedUrlParams.includes(e)));o=new URLSearchParams(e).toString()}else"direct"===this.statContext.place&&(this.statContext.refDomain?s=(0,u.createURL)(this.statContext.refDomain)?.hostname??this.statContext.refDomain:document.referrer&&(s=(0,u.createURL)(document.referrer)?.hostname??document.referrer),o=location.href.substring(0,1024));let p={vsid:a,isid:l,vid:this.statContext.movieId,ct:this.statContext.contentType,place:this.isEmbed?"embed":this.statContext.place,quality:this.statContext.quality,cdn_host:this.statContext.cdnHostname,stat_type:!0===this.statContext.autoplay?"auto":!1===this.statContext.autoplay?"":void 0,param:t,vk_app_id:this.statContext.vkAppId,track_code:this.statContext.trackCode,connection_type:c,connection_reused:!0===d?1:!1===d?0:void 0,cached_data:!0===this.statContext.cached?1:!1===this.statContext.cached?0:void 0,live:this.statContext.liveEdge?1:void 0,muted:!1===this.statContext.audible?1:void 0,mode:this.statContext.mode,subtitles:this.statContext.subtitles,download_speed:this.statContext.downloadSpeed,manual_quality:this.statContext.autoQuality?void 0:1,ref_domain:s,direct_url:o,rate:1===this.statContext.rate||(0,u.isNullable)(this.statContext.rate)?void 0:this.statContext.rate.toFixed(2),view_360:this.statContext.is3d?1:void 0,aid:this.statContext.albumId,vk_playlist_id:this.statContext.vkPlaylistId,...r};for(let e of this.config.disabledCustomFields)delete p[e];return{operation:e,type:1,time:i,network:this.statContext.network,timestamp:n,custom:p}}constructor(e,t){var i;this.subscription=new u.Subscription,this.debugLogger=new u.Logger,this.oneStatDebugLog=this.debugLogger.createComponentLog("onestat"),this.loopCounter=0,this.disabled=!1,this.vsid$=new u.ValueSubject(void 0),this.isid$=new u.ValueSubject(void 0),this.seekAction$=new u.ValueSubject("unknown"),this.statContext=e,this.config=(i=t.config??{},(0,u.fillWithDefault)(i,ii)),(0,u.isNonNullable)(t.apiEnv)&&(this.config.apiEnv=t.apiEnv),this.config.synchronizeTime&&(this.timeSynchronisation=new wi);let r=new u.Subject;this.experimental={error$:r},u.safeStorage.get(xi)&&u.safeStorage.remove(xi);let n=u.safeStorage.get(Ai);this.statContext.deviceId?this.deviceId=this.statContext.deviceId:n?this.deviceId=n:(this.deviceId=function(){let e,t,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=new Array(36),n=0;for(t=0;t<36;t++)8===t||13===t||18===t||23===t?r[t]="-":14===t?r[t]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),e=15&n,n>>=4,r[t]=i[19===t?3&e|8:e]);return r.join("")}(),u.safeStorage.set(Ai,this.deviceId)),this.resetViewSession(),t.useIsid&&this.isid$.next(t.isid??Math.floor(0x10000000000000000*Math.random()).toString(36).padStart(13,"0"));let a=new gi({apiKey:"CIOPGQJGDIHBABABA",config:this.config,error$:r,timeSynchronisation:this.timeSynchronisation});this.api=new li({config:this.config,apiTransport:a,refreshAuthToken:t.refreshAuthToken,mobile:this.statContext.mobile??!1,deviceId:this.deviceId,error$:r}),this.logger=new yi({config:this.config,debugLogger:this.debugLogger,api:this.api,error$:r,userSalt:t.userSalt});let{isEmbed:s,host:o}=(0,u.detectEmbed)();this.isEmbed=s,this.embedParent=o,this.subscribe()}}},317929:(e,t,i)=>{i.d(t,{VERSION:()=>Ke,VideoFormat:()=>n.VideoFormat,registerPlayerWebComponent:()=>db});var r,n=i(773439),a=i(819705),s=i(89923);i(34414);function o(){}function l(e,t){for(let i in t)e[i]=t[i];return e}function u(e){return e()}function c(){return Object.create(null)}function d(e){e.forEach(u)}function p(e){return"function"==typeof e}function h(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function f(e,t){return e===t||(r||(r=document.createElement("a")),r.href=t,e===r.href)}function m(e,...t){if(null==e){for(let e of t)e(void 0);return o}let i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function g(e){let t;return m(e,(e=>t=e))(),t}function v(e,t,i){e.$$.on_destroy.push(m(t,i))}function b(e,t,i,r){if(e){let n=y(e,t,i,r);return e[0](n)}}function y(e,t,i,r){return e[1]&&r?l(i.ctx.slice(),e[1](r(t))):i.ctx}function S(e,t,i,r){if(e[2]&&r){let n=e[2](r(i));if(void 0===t.dirty)return n;if("object"==typeof n){let e=[],i=Math.max(t.dirty.length,n.length);for(let r=0;r<i;r+=1)e[r]=t.dirty[r]|n[r];return e}return t.dirty|n}return t.dirty}function $(e,t,i,r,n,a){if(n){let s=y(t,i,r,a);e.p(s,n)}}function _(e){if(e.ctx.length>32){let t=[],i=e.ctx.length/32;for(let e=0;e<i;e++)t[e]=-1;return t}return-1}function T(e){let t={};for(let i in e)"$"!==i[0]&&(t[i]=e[i]);return t}function w(e){return e&&p(e.destroy)?e.destroy:o}var E=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;"WeakMap"in E&&new WeakMap;var x;function A(e,t){e.appendChild(t)}function C(e,t,i){let r=function(e){if(!e)return document;let t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}(e);if(!r.getElementById(t)){let e=P("style");e.id=t,e.textContent=i,function(e,t){A(e.head||e,t),t.sheet}(r,e)}}function k(e,t,i){e.insertBefore(t,i||null)}function L(e){e.parentNode&&e.parentNode.removeChild(e)}function R(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function P(e){return document.createElement(e)}function O(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function M(e){return document.createTextNode(e)}function I(){return M(" ")}function N(){return M("")}function V(e,t,i,r){return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)}function D(e){return function(t){return t.preventDefault(),e.call(this,t)}}function B(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function U(e,t,i){null==i?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function F(e,t){for(let i in t)U(e,i,t[i])}function j(e,t){t=""+t,e.data!==t&&(e.data=t)}function H(e,t,i,r){null==i?e.style.removeProperty(t):e.style.setProperty(t,i,r?"important":"")}function z(e,t,i){e.classList.toggle(t,!!i)}function q(e,t){return new e(t)}function W(e){x=e}function G(){if(!x)throw new Error("Function called outside component initialization");return x}function Q(e){G().$$.on_mount.push(e)}function Y(e){G().$$.on_destroy.push(e)}function K(e,t){return G().$$.context.set(e,t),t}function X(e){return G().$$.context.get(e)}function Z(){return G().$$.context}function J(e,t){let i=e.$$.callbacks[t.type];i&&i.slice().forEach((e=>e.call(this,t)))}var ee=[],te=[],ie=[],re=[],ne=Promise.resolve(),ae=!1;function se(){ae||(ae=!0,ne.then(pe))}function oe(){return se(),ne}function le(e){ie.push(e)}function ue(e){re.push(e)}var ce=new Set,de=0;function pe(){if(0!==de)return;let e=x;do{try{for(;de<ee.length;){let e=ee[de];de++,W(e),he(e.$$)}}catch(e){throw ee.length=0,de=0,e}for(W(null),ee.length=0,de=0;te.length;)te.pop()();for(let e=0;e<ie.length;e+=1){let t=ie[e];ce.has(t)||(ce.add(t),t())}ie.length=0}while(ee.length);for(;re.length;)re.pop()();ae=!1,ce.clear(),W(e)}function he(e){if(null!==e.fragment){e.update(),d(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(le)}}var fe,me=new Set;function ge(){fe={r:0,c:[],p:fe}}function ve(){fe.r||d(fe.c),fe=fe.p}function be(e,t){e&&e.i&&(me.delete(e),e.i(t))}function ye(e,t,i,r){if(e&&e.o){if(me.has(e))return;me.add(e),fe.c.push((()=>{me.delete(e),r&&(i&&e.d(1),r())})),e.o(t)}else r&&r()}function Se(e){return void 0!==e?.length?e:Array.from(e)}function $e(e,t){ye(e,1,1,(()=>{t.delete(e.key)}))}function _e(e,t){let i={},r={},n={$$scope:1},a=e.length;for(;a--;){let s=e[a],o=t[a];if(o){for(let e in s)e in o||(r[e]=1);for(let e in o)n[e]||(i[e]=o[e],n[e]=1);e[a]=o}else for(let e in s)n[e]=1}for(let e in r)e in i||(i[e]=void 0);return i}function Te(e){return"object"==typeof e&&null!==e?e:{}}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);function we(e,t,i){let r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=i,i(e.$$.ctx[r]))}function Ee(e){e&&e.c()}function xe(e,t,i){let{fragment:r,after_update:n}=e.$$;r&&r.m(t,i),le((()=>{let t=e.$$.on_mount.map(u).filter(p);e.$$.on_destroy?e.$$.on_destroy.push(...t):d(t),e.$$.on_mount=[]})),n.forEach(le)}function Ae(e,t){let i=e.$$;null!==i.fragment&&(function(e){let t=[],i=[];ie.forEach((r=>-1===e.indexOf(r)?t.push(r):i.push(r))),i.forEach((e=>e())),ie=t}(i.after_update),d(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function Ce(e,t,i,r,n,a,s=null,l=[-1]){let u=x;W(e);let p=e.$$={fragment:null,ctx:[],props:a,update:o,not_equal:n,bound:c(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:c(),dirty:l,skip_bound:!1,root:t.target||u.$$.root};s&&s(p.root);let h=!1;if(p.ctx=i?i(e,t.props||{},((t,i,...r)=>{let a=r.length?r[0]:i;return p.ctx&&n(p.ctx[t],p.ctx[t]=a)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](a),h&&function(e,t){-1===e.$$.dirty[0]&&(ee.push(e),se(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),i})):[],p.update(),h=!0,d(p.before_update),p.fragment=!!r&&r(p.ctx),t.target){if(t.hydrate){!0;let e=function(e){return Array.from(e.childNodes)}(t.target);p.fragment&&p.fragment.l(e),e.forEach(L)}else p.fragment&&p.fragment.c();t.intro&&be(e.$$.fragment),xe(e,t.target,t.anchor),!1,pe()}W(u)}function ke(e,t,i,r){let n=i[e]?.type;if("Boolean"===n&&"boolean"!=typeof t?null!=t:t,!r||!i[e])return t;if("toAttribute"===r)switch(n){case"Object":case"Array":return null==t?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return t??null;default:return t}else switch(n){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":default:return t;case"Number":return null!=t?+t:t}}"function"==typeof HTMLElement&&HTMLElement;var Le=class{$destroy(){Ae(this,1),this.$destroy=o}$on(e,t){if(!p(t))return o;let i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{let e=i.indexOf(t);-1!==e&&i.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}constructor(){this.$$=void 0,this.$$set=void 0}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");var Re,Pe={isMobile:void 0,defaultLanguage:a.InterfaceLanguage.RU,downloadVKLanguages:!0,updateBuiltinLanguages:!0,isSmoothVideoRotate:!0,showSupport:!0,supportLink:"https://vk.com/support?act=new&from=v",showLogo:void 0,logoLink:"https://vk.com/video",logoType:"vk_video",volumeDefault:1,volumeMinRestore:.05,loaderDelay:500,minSubtitlesFontSize:13,autoSubtitlesTimeout:2e3,allowChangingFullscreenTarget:!0,trafficSavingLimit:a.VideoQuality.Q_480P,episodeMinWidthPc:8,hideThumbTimerAfterTouch:!0,sentry:{dsn:"https://e349fd23c68f405388980d0868d0ff27@sentry.mvk.com/126",sampleRate:.01,whiteErrorCategoryList:[],blackErrorCategoryList:[],whiteErrorIdList:[],blackErrorIdList:[]},features:{autoplay:!0,statistics:!0,sentry:!0,preload:!0,subtitles:!0,episodes:!0,fullscreen:!0,timelinePreview:!0,mediaSession:!0,annotations:!0,annotationsInside:!1,pip:!0,dpip:!0,download:!0,liveRewind:!0,playbackRate:!0,trafficSaving:!0,episodesClustering:!0,copyVideoLink:!0,videoRotate:!0,interactiveGraph:!1,interactiveResponsiveUi:!1,seekToInteractive:!0,interactiveLastFrame:!1,interactiveTextPermanent:!0,interactiveHideTime:!0,interactivePlayPrevChapter:!0,interactiveTimeIndicator:!0,thumbTimer:!0,hotKeyMapModal:!0,hotKeyHelpers:!0,saveDebugInfoToFile:!1,saveTraceInfoToFile:!1,additionalButtons:!0,additionalButtonsDesktopControlPanelRight:!0,additionalSettingsMenuItems:!0,additionalContextMenuItems:!0,contextMenuButton:!0,audioLanguages:!1,saveRate:!1,fullscreenInternalTargetPlayerContainer:!1,endScreen:!0,autoplayNext:!0,nextPrevButtons:!0,previewNoEmptySpace:!1},controls:{showOnStartupAtAutoplay:!0,hideTimeout:500,hideTimeoutMobile:3e3,hideTimeoutInitial:200,hideTimeoutFullscreen:3e3,hideTimeoutCursor:3e3,hideTimeoutTooltips:1e3,collapseMobileUnmute:6e3,hide360IconTimeout:3e3,hideHotKeyHelpers:2e3,playbackRateMin:.25,playbackRateMax:2,playbackRateStep:.25,volumeStepKeyboard:.05,volumeStepWheel:.05,volumeBarTimeout:300,seekStepKeyboard:1e4,seekStepMobile:15e3,seekStepFrame:400},ads:{enable:void 0,initTimeout:2e3,loadTimeout:2e3,runtimeTimeout:5e3,slot:void 0,preview:void 0},interactive:{historyMaxLength:100,noInteractionEventTimeout:3e4}},Oe=()=>X("ui-config"),Me="vk_player_debug_panel_opened",Ie={KeyF:"f",KeyK:"k",KeyC:"c",KeyM:"m"},Ne=new Set(["ArrowLeft","ArrowRight","KeyL","KeyJ"]),Ve=new Set(["Tab","Space","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"]),De=new Set(["ShiftRight","ShiftLeft"]),Be=["TIMELINE"],Ue=[...Be,"GRAPH_BUTTON"],Fe=[...Be,"PLAY_BUTTON"],je=[...Ue,"PLAY_BUTTON"],He=((Re=He||{}).XS="xs",Re.S="s",Re.M="m",Re.L="l",Re.XL="xl",Re),ze={xs:0,s:1,m:2,l:3,xl:4},qe=[];function We(e,t){return{subscribe:Ge(e,t).subscribe}}function Ge(e,t=o){let i,r=new Set;function n(t){if(h(e,t)&&(e=t,i)){let t=!qe.length;for(let t of r)t[1](),qe.push(t,e);if(t){for(let e=0;e<qe.length;e+=2)qe[e][0](qe[e+1]);qe.length=0}}}function a(t){n(t(e))}return{set:n,update:a,subscribe:function(s,l=o){let u=[s,l];return r.add(u),1===r.size&&(i=t(n,a)||o),s(e),()=>{r.delete(u),0===r.size&&i&&(i(),i=null)}}}}function Qe(e,t,i){let r=!Array.isArray(e),n=r?[e]:e;if(!n.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");let a=t.length<2;return We(i,((e,i)=>{let s=!1,l=[],u=0,c=o,h=()=>{if(u)return;c();let n=t(r?l[0]:l,e,i);a?e(n):c=p(n)?n:o},f=n.map(((e,t)=>m(e,(e=>{l[t]=e,u&=~(1<<t),s&&h()}),(()=>{u|=1<<t}))));return s=!0,h(),function(){d(f),c(),s=!1}}))}var Ye="prod",Ke="1.1.50",Xe=(e,t,i)=>{let r=document.createElement("a");r.href=e,r.download=`${t}.${i}`,r.style.display="none",r.click()},Ze=Symbol("storeContext"),Je=Symbol("microStoresContext"),et=()=>{let e=X(Ze);return(0,a.assertNonNullable)(e,"Store context is empty!"),e},tt=()=>{let e=X(Je);return(0,a.assertNonNullable)(e,"MicroStores context is empty!"),e},it=(e,t)=>rt(e,e.getValue(),t),rt=(e,t,i)=>We(t,(t=>{let r=e.subscribe((e=>{t(e),i?.(e)}));return()=>r.unsubscribe()})),nt=class{async download(e){if(this.pendingDownloads.has(e))return null;this.pendingDownloads.add(e);try{let t=await fetch(e,{signal:this.destroyController.signal});if(t.ok)return await t.text();throw t}finally{this.pendingDownloads.delete(e)}}destroy(){this.destroyController.abort(),this.pendingDownloads.clear()}isDestroyed(){return this.destroyController.signal.aborted}constructor(){this.destroyController=new AbortController,this.pendingDownloads=new Set}},at="vk_player_prefer_traffic_saving_enabled",st="vk_player_preferred_volume",ot="vk_player_prefer_volume_mute",lt="vk_player_preferred_quality",ut="vk_player_preferred_stream_language",ct="vk_player_preferred_rate",dt="vk_player_preferred_autoplay_next",pt=e=>e>1?1:e<0?0:e,ht=e=>a.safeStorage.set(st,pt(e).toString(10)),ft=()=>{let e=a.safeStorage.get(st);return(0,a.isNullable)(e)?void 0:pt(parseFloat(e))},mt=()=>a.safeStorage.remove(lt),gt=(e,t)=>{t?a.safeStorage.set(e,"true"):a.safeStorage.remove(e)},vt=e=>"true"===a.safeStorage.get(e),bt=e=>gt(ot,e),yt=e=>a.safeStorage.set(ut,e);function St(e){let t,i,r,n,a,s,o,u,c,d,p,h,f,m,g,v,y,T=e[2].default,w=b(T,e,e[1],null),E=[{xmlns:"http://www.w3.org/2000/svg"},{width:"76"},{height:"45"},{fill:"none"},{"data-testid":"video-360-icon"},{role:"img"},e[0]],x={};for(let e=0;e<E.length;e+=1)x=l(x,E[e]);return{c(){t=O("svg"),w&&w.c(),i=O("g"),r=O("path"),n=O("path"),a=O("path"),s=O("path"),o=O("path"),u=O("defs"),c=O("filter"),d=O("feFlood"),p=O("feColorMatrix"),h=O("feOffset"),f=O("feGaussianBlur"),m=O("feColorMatrix"),g=O("feBlend"),v=O("feBlend"),U(r,"fill","#fff"),U(r,"fill-rule","evenodd"),U(r,"d","M67 9.489A3.49 3.49 0 0 1 63.511 13 3.493 3.493 0 0 1 60 9.489 3.49 3.49 0 0 1 63.511 6 3.484 3.484 0 0 1 67 9.489m-5.003 0c0 .834.68 1.514 1.514 1.514.812 0 1.492-.68 1.492-1.514 0-.812-.68-1.492-1.492-1.492-.834 0-1.514.68-1.514 1.492"),U(r,"clip-rule","evenodd"),U(n,"fill","#fff"),U(n,"d","M26.86 15.183c1.372-.492 2.534-1.711 2.534-3.61C29.394 8.922 27.185 7 24.07 7c-1.965 0-3.573.784-4.67 2.29l-.108.149a1.333 1.333 0 0 0 .268 1.855c.536.402 1.295.343 1.736-.162.09-.102.164-.19.205-.247.594-.81 1.431-1.306 2.5-1.306 1.534 0 2.604.915 2.604 2.251 0 1.36-1.093 2.275-2.651 2.275h-.583a1.231 1.231 0 0 0 0 2.462h.583c1.744 0 2.907.985 2.907 2.392 0 1.453-1.186 2.462-2.884 2.462-1.296 0-2.201-.552-2.883-1.603a10 10 0 0 0-.2-.287 1.403 1.403 0 0 0-2.052-.246c-.494.42-.65 1.13-.305 1.68.072.116.146.227.218.322C20.132 23.137 21.678 24 23.999 24c3.28 0 5.628-2.04 5.628-4.924 0-2.204-1.395-3.4-2.767-3.893"),U(a,"fill","#fff"),U(a,"fill-rule","evenodd"),U(a,"d","M37.732 12.675c-.465 0-1 .046-1.511.164l2.584-3.74a1.338 1.338 0 1 0-2.203-1.518l-3.753 5.469c-1.418 2.133-1.837 3.822-1.837 5.276 0 3.47 2.558 5.674 6.186 5.674 3.604 0 6.162-2.392 6.162-5.768 0-3.236-2.349-5.557-5.628-5.557m-.534 8.746c-1.977 0-3.326-1.267-3.326-3.142 0-1.853 1.349-3.142 3.326-3.142 1.953 0 3.302 1.29 3.302 3.142 0 1.875-1.35 3.142-3.302 3.142M58 15.512c0 5.041-2.697 8.441-6.627 8.441s-6.628-3.4-6.628-8.441 2.698-8.442 6.628-8.442S58 10.47 58 15.512m-10.348 0c0 3.564 1.488 5.862 3.72 5.862s3.721-2.298 3.721-5.862-1.488-5.862-3.72-5.862-3.72 2.298-3.72 5.862Z"),U(a,"clip-rule","evenodd"),U(s,"fill","#fff"),U(s,"d","M67 23.5c0-1.318-1.201-3.094-4.199-4.673a1.5 1.5 0 1 1 1.398-2.654C67.452 17.886 70 20.433 70 23.5c0 3.126-2.556 5.554-6.088 7.27-3.633 1.766-8.825 3.062-15.259 3.722a1.5 1.5 0 0 1-.306-2.984c6.248-.641 11.057-1.882 14.253-3.436C65.897 26.47 67 24.8 67 23.5M38.879 35H38c-9.64 0-17.447-1.133-22.9-3.018-2.72-.941-4.94-2.099-6.506-3.468C7.019 27.138 6 25.445 6 23.5c0-1.64.785-3.073 1.908-4.255 1.119-1.179 2.66-2.205 4.42-3.086a1.5 1.5 0 1 1 1.343 2.682c-1.584.793-2.794 1.634-3.588 2.47C9.293 22.143 9 22.873 9 23.5c0 .807.407 1.74 1.568 2.755 1.17 1.022 2.996 2.02 5.513 2.892C21.106 30.885 28.55 32 38 32h.879l-1.44-1.44a1.5 1.5 0 0 1 2.122-2.12l3.999 3.998.01.011a1.5 1.5 0 0 1 .317 1.624 1.5 1.5 0 0 1-.326.488l-4 4a1.5 1.5 0 0 1-2.122-2.122L38.88 35Z"),U(o,"stroke","#000"),U(o,"stroke-linecap","round"),U(o,"stroke-linejoin","round"),U(o,"stroke-opacity",".12"),U(o,"stroke-width",".5"),U(o,"d","m7.908 19.245-.181-.173c1.146-1.206 2.714-2.248 4.49-3.137a1.75 1.75 0 1 1 1.566 3.13c-1.57.786-2.752 1.61-3.519 2.418-.762.802-1.014 1.474-1.014 2.017 0 .713.357 1.583 1.483 2.567 1.136.993 2.93 1.978 5.43 2.843 4.99 1.726 12.403 2.84 21.837 2.84h.275l-1.012-1.013a1.75 1.75 0 1 1 2.474-2.474l4 3.998h0l.012.013s0 0 0 0c.162.165.284.354.368.556q0 0 0 0l-.23.096A1.5 1.5 0 0 1 44 33.5q-.002.306-.113.573L7.907 19.245Zm0 0-.181-.173C6.576 20.284 5.75 21.775 5.75 23.5c0 2.04 1.07 3.796 2.68 5.202 1.599 1.398 3.85 2.569 6.589 3.516C20.506 34.116 28.343 35.25 38 35.25h.275zm29.824-6.82c-.3 0-.63.018-.965.063l2.244-3.247c.728-1.054-.026-2.491-1.306-2.491-.524 0-1.014.258-1.31.69l-3.752 5.468h0l-.002.003c-1.442 2.17-1.879 3.905-1.879 5.415 0 1.8.665 3.288 1.815 4.324 1.147 1.033 2.757 1.6 4.62 1.6 3.727 0 6.413-2.488 6.413-6.018 0-3.377-2.464-5.807-5.878-5.807m25.779.825c2.07 0 3.739-1.67 3.739-3.761 0-2.07-1.67-3.739-3.739-3.739a3.74 3.74 0 0 0-3.761 3.739 3.743 3.743 0 0 0 3.761 3.761m0-2.497a1.267 1.267 0 0 1-1.264-1.264c0-.671.566-1.242 1.264-1.242.674 0 1.242.568 1.242 1.242 0 .698-.57 1.264-1.242 1.264m-33.634 8.323c0-2.043-1.139-3.272-2.388-3.895 1.208-.629 2.155-1.846 2.155-3.609 0-2.82-2.357-4.822-5.575-4.822-2.04 0-3.724.818-4.871 2.392l-.109.149a1.583 1.583 0 0 0 .32 2.203c.635.476 1.542.411 2.074-.197.09-.103.17-.198.219-.264.553-.755 1.318-1.204 2.297-1.204.72 0 1.309.214 1.715.564.403.347.64.84.64 1.437 0 .608-.242 1.107-.653 1.457-.415.353-1.017.568-1.748.568h-.583a1.481 1.481 0 0 0 0 2.962h.583c.826 0 1.493.233 1.948.61.451.375.709.902.709 1.532 0 .654-.265 1.2-.718 1.586-.455.388-1.116.626-1.916.626-.61 0-1.117-.13-1.548-.375s-.801-.614-1.125-1.114a11 11 0 0 0-.206-.296 1.653 1.653 0 0 0-2.417-.292c-.577.49-.774 1.335-.356 2.004.075.119.152.236.23.339.704.945 1.462 1.652 2.352 2.121.892.47 1.9.692 3.094.692 3.383 0 5.877-2.121 5.877-5.174m7.32 2.095c-.934 0-1.7-.299-2.232-.8-.53-.5-.843-1.217-.843-2.092 0-.863.313-1.581.844-2.085s1.298-.807 2.232-.807c.92 0 1.682.303 2.21.807.529.503.842 1.222.842 2.085 0 .875-.314 1.593-.84 2.093-.53.5-1.29.799-2.212.799Zm14.176 3.032c2.044 0 3.772-.887 4.983-2.425 1.208-1.534 1.894-3.703 1.894-6.266s-.686-4.732-1.894-6.266c-1.211-1.539-2.94-2.426-4.983-2.426-2.044 0-3.773.887-4.984 2.426-1.208 1.534-1.894 3.703-1.894 6.266s.686 4.732 1.894 6.266c1.211 1.538 2.94 2.425 4.984 2.425m0-3.08c-1.017 0-1.874-.518-2.487-1.478-.618-.968-.984-2.382-.984-4.133 0-1.752.366-3.166.984-4.133.613-.96 1.47-1.48 2.487-1.48s1.873.52 2.486 1.48c.618.967.984 2.381.984 4.133 0 1.751-.366 3.165-.984 4.133-.613.96-1.47 1.479-2.486 1.479Zm11.312-2.075c2.975 1.567 4.065 3.279 4.065 4.452 0 1.148-.983 2.756-4.259 4.347-3.16 1.536-7.937 2.773-14.17 3.412a1.75 1.75 0 0 0 .358 3.482c6.45-.662 11.673-1.963 15.342-3.746 3.551-1.725 6.229-4.216 6.229-7.495 0-3.213-2.661-5.825-5.935-7.548a1.75 1.75 0 1 0-1.63 3.096"),U(i,"filter","url(#a)"),U(d,"flood-opacity","0"),U(d,"result","BackgroundImageFix"),U(p,"in","SourceAlpha"),U(p,"result","hardAlpha"),U(p,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"),U(f,"stdDeviation","2.5"),U(m,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16 0"),U(g,"in2","BackgroundImageFix"),U(g,"result","effect1_dropShadow_618_12297"),U(v,"in","SourceGraphic"),U(v,"in2","effect1_dropShadow_618_12297"),U(v,"result","shape"),U(c,"id","a"),U(c,"width","75"),U(c,"height","44"),U(c,"x",".5"),U(c,"y",".5"),U(c,"color-interpolation-filters","sRGB"),U(c,"filterUnits","userSpaceOnUse"),F(t,x)},m(e,l){k(e,t,l),w&&w.m(t,null),A(t,i),A(i,r),A(i,n),A(i,a),A(i,s),A(i,o),A(t,u),A(u,c),A(c,d),A(c,p),A(c,h),A(c,f),A(c,m),A(c,g),A(c,v),y=!0},p(e,[i]){w&&w.p&&(!y||2&i)&&$(w,T,e,e[1],y?S(T,e[1],i,null):_(e[1]),null),F(t,x=_e(E,[{xmlns:"http://www.w3.org/2000/svg"},{width:"76"},{height:"45"},{fill:"none"},{"data-testid":"video-360-icon"},{role:"img"},1&i&&e[0]]))},i(e){y||(be(w,e),y=!0)},o(e){ye(w,e),y=!1},d(e){e&&L(t),w&&w.d(e)}}}function $t(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var _t=class extends Le{constructor(e){super(),Ce(this,e,$t,St,h,{})}},Tt={auto_quality_invariant:"Авто",auto_quality:"Авто ({actual})",auto_quality_option:"Авто",menu_quality:"Качество",menu_traffic_saving:"Экономия данных",menu_playback_rate:"Скорость",menu_report:"Сообщить о проблеме",menu_pip:"Картинка в картинке",menu_copy_video_link:"Скопировать ссылку на видео",menu_copy_video_link_with_timestamp:"Скопировать ссылку на кадр",menu_video_rotate:"Повернуть",menu_video_loop_on:"Включить повторение",menu_video_loop_off:"Отключить повторение",menu_chromecast:"Chromecast трансляция",menu_copy_debug:"Копировать данные для диагностики",menu_save_debug:"Сохранить данные для диагностики",menu_debug_overlay:"Техническая информация",menu_copy_embed_code:"Копировать код для встраивания",menu_audio_languages:"Звуковая дорожка",audio_stream_display_language_label:"{label} ({language})",audio_stream_display_language_label_index:"{label} {index} ({language})",audio_stream_display_label_index:"{label} {index}",audio_stream_display_language_index:"{language} {index}",audio_stream_display_unknown:"Дорожка {index}",pip_dummy_title:"Видео воспроизводится в режиме картинка в картинке",submenu_quality:"Качество",submenu_playback_rate:"Скорость",submenu_settings:"Настройки",submenu_traffic_saving:"Экономия данных",submenu_audio_languages:"Звуковая дорожка",mobile_unmute:"Включить звук",playing_ads:"Реклама {timeleft}",skip_ads_now:"Пропустить рекламу",skip_ads_after:"Пропустить рекламу через {time}с",visit_advertiser:"Перейти на сайт",aria_timeline:"Ползунок временной шкалы",aria_timeline_value:"{position} (общая длительность {duration}",aria_open_settings:"Открыть настройки видеоплеера",doubletap_seek_step:"{seconds} секунд",playback_rate_1:"Обычная",playback_rate:"{multiplier}x",video360:"панорамное видео",subtitles_caption:"Субтитры",subtitles_auto:"{language} (Автоматические)",subtitles_off:"Выкл.",subtitles_auto_caption:"Автоматические субтитры",subtitles_turn_on:"Включить субтитры",subtitles_turn_off:"Выключить субтитры",traffic_saving_off:"Откл.",traffic_saving_on:"Вкл.",traffic_saving_disable:"Отключена",traffic_saving_enable:"Включена",traffic_saving_helper_text:"При включении качество видео будет снижено для экономии трафика",tooltip_button_disabled:"Кнопка недоступна",tooltip_previous:"Предыдущее видео",tooltip_restart:"Начать заново",tooltip_play:"Смотреть",tooltip_pause:"Пауза",tooltip_next:"Следующее видео",tooltip_interactive_go_back:"Вернуться к предыдущей главе",tooltip_interactive_go_back_disabled:"История прохождения недоступна",tooltip_interactive_go_back_disabled_first:"Вы смотрите первую главу",tooltip_interactive_go_back_disabled_limit:"Лимит возвратов исчерпан",tooltip_chapter_without_interactive:"В этой главе нет интерактива",tooltip_interactive_of_chapter_completed:"Интерактивы этой главы уже пройдены",tooltip_interactive_seek:"Перейти к интерактиву",tooltip_interactive_graph_off:"Показать карту сюжета",tooltip_interactive_graph_on:"Скрыть карту сюжета",tooltip_live:"Перемотать на актуальный лайв",tooltip_episodes:"Эпизоды",tooltip_volume:"Включить звук",tooltip_volume_muted:"Выключить звук",tooltip_subtitles_off:"Включить субтитры",tooltip_subtitles_on:"Выключить субтитры",tooltip_settings_off:"Открыть настройки",tooltip_settings_on:"Закрыть настройки",tooltip_fullscreen_off:"На весь экран",tooltip_fullscreen_on:"Выйти из полноэкранного режима",tooltip_chromecast_off:"Включить Chromecast",tooltip_chromecast_on:"Выключить Chromecast",tooltip_episode_finished:"Вы уже сделали свой выбор",tooltip_episode_unfinished:"Не пройдено",tooltip_disabled_when_interactive:"Интерактив уже идёт",tooltip_disabled_when_graph_on:"Кнопка недоступна во время просмотра карты",tooltip_interactive_interaction_time_indicator:"Нажмите на элемент интерактива",tooltip_vk_logo:"Открыть в VK Видео",tooltip_vk_video_logo:"Перейти в VK Видео",download_video_caption:"Скачать видео",hotkey_helper_current_volume:"{value} %",hotkey_map_modal_title:"Быстрые клавиши",hotkey_map_modal_close_btn_text:"Закрыть",hotkey_map_group_title_common:"Общие",hotkey_map_group_title_playback:"Воспроизведение",hotkey_map_group_title_subtitles:"Субтитры",hotkey_map_group_title_episodes:"Эпизоды",hotkey_map_item_mute_description:"Включить или отключить звук",hotkey_map_item_mute_value:"m",hotkey_map_item_volume_up_description:"Увеличить громкость",hotkey_map_item_volume_up_value:"Стрелка вверх",hotkey_map_item_volume_down_description:"Уменьшить громкость",hotkey_map_item_volume_down_value:"Стрелка вниз",hotkey_map_item_pip_description:"Свернуть или развернуть мини-проигрыватель",hotkey_map_item_pip_value:"i",hotkey_map_item_full_screen_description:"Включить или выключить полноэкранный режим",hotkey_map_item_full_screen_value:"f",hotkey_map_item_show_context_menu_description:"Скрыть или показать контекстное меню",hotkey_map_item_show_context_menu_value:"Shift + !",hotkey_map_item_show_hotkey_map_description:"Скрыть или показать список горячих клавиш",hotkey_map_item_show_hotkey_map_value:"Shift + ?",hotkey_map_item_play_toggle_description:"Приостановить или продолжить воспроизведение",hotkey_map_item_play_toggle_value:"Пробел (или k)",hotkey_map_item_seek_backward_description:"Перемотать ролик на 10 секунд назад",hotkey_map_item_seek_backward_value:"Стрелка влево (или j)",hotkey_map_item_seek_forward_description:"Перемотать ролик на 10 секунд вперёд",hotkey_map_item_seek_forward_value:"Стрелка вправо (или l)",hotkey_map_item_fast_seek_backward_description:"Ускоренная перемотка назад",hotkey_map_item_fast_seek_backward_value:"Shift + Стрелка влево",hotkey_map_item_fast_seek_forward_description:"Ускоренная перемотка вперёд",hotkey_map_item_fast_seek_forward_value:"Shift + Стрелка вправо",hotkey_map_item_rate_down_description:"Уменьшить скорость воспроизведения",hotkey_map_item_rate_down_value:"< (Shift + ,)",hotkey_map_item_rate_up_description:"Увеличить скорость воспроизведения",hotkey_map_item_rate_up_value:"> (Shift + .)",hotkey_map_item_prev_frame_description:"Перейти к предыдущему кадру <br />(когда воспроизведение приостановлено)",hotkey_map_item_prev_frame_value:",",hotkey_map_item_next_frame_description:"Перейти к следующему кадру <br />(когда воспроизведение приостановлено)",hotkey_map_item_next_frame_value:".",hotkey_map_item_jump_seek_description:"Перейти к определённому моменту видео <br />(например, при нажатии на цифру «7» ролик будет перемотан до временной отметки, которая соответствует 70% от длительности видео)",hotkey_map_item_jump_seek_value:"0, 1, 2, 3, 4, 5, 6, 7, 8, 9",hotkey_map_item_subtitles_toggle_description:"Включить или отключить субтитры",hotkey_map_item_subtitles_toggle_value:"c",hotkey_map_item_prev_episode_description:"Перейти к предыдущему эпизоду",hotkey_map_item_prev_episode_pc_value:"Ctrl + Стрелка влево",hotkey_map_item_prev_episode_mac_value:"Option + Стрелка влево",hotkey_map_item_next_episode_description:"Перейти к следующему эпизоду",hotkey_map_item_next_episode_pc_value:"Ctrl + Стрелка вправо",hotkey_map_item_next_episode_mac_value:"Option + Стрелка вправо",waiting_live_day_value:"дн",waiting_live_hour_value:"ч",waiting_live_minute_value:"мин",waiting_live_second_value:"сек",waiting_live_colon:":",waiting_live_upcoming_title:"Трансляция еще не началась",waiting_live_timer_title:"До начала трансляции осталось",waiting_live_recover_title:"Трансляция приостановлена - она продолжится, когда автор вернётся",waiting_record_title:"Трансляция завершена - запись появится позже",aria_label_video_player:"Видео плеер",aria_label_spherical_control:"Контроллер для сферического видео. Используйте клавиши со стрелками для панорамирования видео.",aria_label_debug_panel:"Область с технической информацией, сделайте скриншот для техподдержки",aria_label_new_tab_alert:"Откроется в новой вкладке.",aria_label_context_menu_open:"Открыть контекстное меню",aria_label_context_menu_close:"Закрыть контекстное меню",aria_label_menu_quality:"Качество: {actual}",aria_label_menu_audio_languages:"Язык аудио: {actual}",aria_label_menu_rate:"Скорость: {actual}",aria_label_menu_subtitle:"Субтитры: {actual}",aria_label_menu_download:"Скачать видео",aria_label_menu_debug_overlay_enable:"Включить отображение технической информации",aria_label_menu_debug_overlay_disable:"Выключить отображение технической информации",aria_label_menu_rotate:"Повернуть видео на 90 градусов",aria_label_menu_loop:"Переключение режима повторения",aria_label_submenu_back:"Вернуться в меню настроек",aria_label_submenu_traffic_saving_off:"Выключить режим экономии данных",aria_label_submenu_traffic_saving_on:"Включить режим экономии данных",end_screen_next_video:"Следующее видео",end_screen_recommended_video:"Рекомендуемое видео"},wt={mobile_unmute:"Unmute",auto_quality_invariant:"Auto",auto_quality:"Auto ({actual})",auto_quality_option:"Auto",menu_quality:"Quality",menu_playback_rate:"Playback rate",menu_traffic_saving:"Data saving",menu_report:"Report a problem",menu_pip:"Picture in picture",menu_copy_video_link:"Copy video link",menu_copy_video_link_with_timestamp:"Copy link with timestamp",menu_video_rotate:"Rotate",menu_video_loop_on:"Enable loop",menu_video_loop_off:"Disable loop",menu_chromecast:"Chromecast stream",menu_copy_debug:"Copy debug info",menu_save_debug:"Save debug info",menu_debug_overlay:"Tech stats",menu_copy_embed_code:"Copy embed code",menu_audio_languages:"Audio track",audio_stream_display_language_label:"{label} ({language})",audio_stream_display_language_label_index:"{label} {index} ({language})",audio_stream_display_label_index:"{label} {index}",audio_stream_display_language_index:"{language} {index}",audio_stream_display_unknown:"Audio track {index}",pip_dummy_title:"Video plays in picture-in-picture mode",submenu_quality:"Quality",submenu_playback_rate:"Playback rate",submenu_traffic_saving:"Data saving",submenu_settings:"Settings",submenu_audio_languages:"Audio track",playing_ads:"Ads {timeleft}",skip_ads_after:"Skip ads",skip_ads_now:"Ads can be skipped in {time}s",visit_advertiser:"Visit site",aria_timeline:"Time scale slider",aria_timeline_value:"{position} out of {duration}",aria_open_settings:"Open video player settings",doubletap_seek_step:"{seconds} seconds",playback_rate_1:"Normal",playback_rate:"{multiplier}x",video360:"spherical video",subtitles_caption:"Subtitles",subtitles_auto:"{language} (Auto-generated)",subtitles_off:"Off",subtitles_auto_caption:"Auto subtitles",subtitles_turn_on:"Turn on subtitles",subtitles_turn_off:"Turn off subtitles",traffic_saving_off:"Off",traffic_saving_on:"On",traffic_saving_disable:"Disabled",traffic_saving_enable:"Enabled",traffic_saving_helper_text:"When turned on the video quality will be reduced to save data",tooltip_button_disabled:"Button disabled",tooltip_previous:"Previous video",tooltip_restart:"Watch again",tooltip_play:"Play",tooltip_pause:"Pause",tooltip_next:"Next video",tooltip_interactive_go_back:"Back to previous chapter",tooltip_interactive_go_back_disabled:"Interactive history unavailable",tooltip_interactive_go_back_disabled_first:"You're watching the first chapter",tooltip_interactive_go_back_disabled_limit:"Go-back limit exceeded",tooltip_chapter_without_interactive:"This chapter has no interactive segment",tooltip_interactive_of_chapter_completed:"Chapter's interactive segments already watched",tooltip_interactive_seek:"Go to interactive",tooltip_interactive_graph_off:"Show interactive graph",tooltip_interactive_graph_on:"Hide interactive graph",tooltip_live:"Go to the live edge",tooltip_episodes:"Episodes",tooltip_volume:"Turn volume off",tooltip_volume_muted:"Turn volume on",tooltip_subtitles_off:"Turn subtitles on",tooltip_subtitles_on:"Turn subtitles off",tooltip_settings_off:"Open settings",tooltip_settings_on:"Close settings",tooltip_fullscreen_off:"Enter fullscreen mode",tooltip_fullscreen_on:"Exit fullscreen mode",tooltip_chromecast_off:"Turn Chromecast on",tooltip_chromecast_on:"Turn Chromecast off",tooltip_episode_finished:"You have already viewed interactive episode",tooltip_episode_unfinished:"Interactive episode not finished",tooltip_disabled_when_interactive:"Interactive video in progress",tooltip_disabled_when_graph_on:"Button is disabled when graph is opened",tooltip_interactive_interaction_time_indicator:"Press the interactive element",tooltip_vk_logo:"Open in VK Video",tooltip_vk_video_logo:"Go to VK Video",download_video_caption:"Download video",hotkey_helper_current_volume:"{value} %",hotkey_map_modal_title:"Keyboard shortcuts",hotkey_map_modal_close_btn_text:"Close",hotkey_map_group_title_common:"Common",hotkey_map_group_title_playback:"Playback",hotkey_map_group_title_subtitles:"Subtitles",hotkey_map_group_title_episodes:"Episodes",hotkey_map_item_mute_description:"Toggle mute",hotkey_map_item_mute_value:"m",hotkey_map_item_volume_up_description:"Increase volume",hotkey_map_item_volume_up_value:"Arrow up",hotkey_map_item_volume_down_description:"Decrease volume",hotkey_map_item_volume_down_value:"Arrow down",hotkey_map_item_pip_description:"Toggle miniplayer",hotkey_map_item_pip_value:"i",hotkey_map_item_full_screen_description:"Toggle full screen",hotkey_map_item_full_screen_value:"f",hotkey_map_item_show_context_menu_description:"Hide or show context menu",hotkey_map_item_show_context_menu_value:"Shift + !",hotkey_map_item_show_hotkey_map_description:"Hide or show list of hotkeys",hotkey_map_item_show_hotkey_map_value:"Shift + ?",hotkey_map_item_play_toggle_description:"Toggle play/pause",hotkey_map_item_play_toggle_value:"Space (or k)",hotkey_map_item_seek_backward_description:"Rewind 10 seconds",hotkey_map_item_seek_backward_value:"Arrow left (or j)",hotkey_map_item_seek_forward_description:"Forward 10 seconds",hotkey_map_item_seek_forward_value:"Arrow right (or l)",hotkey_map_item_fast_seek_backward_description:"Fast rewind",hotkey_map_item_fast_seek_backward_value:"Shift + Arrow left",hotkey_map_item_fast_seek_forward_description:"Fast forward",hotkey_map_item_fast_seek_forward_value:"Shift + Arrow right",hotkey_map_item_rate_down_description:"Decrease playback rate",hotkey_map_item_rate_down_value:"< (Shift + ,)",hotkey_map_item_rate_up_description:"Increase playback rate",hotkey_map_item_rate_up_value:"> (Shift + .)",hotkey_map_item_prev_frame_description:"Previous frame (while paused)",hotkey_map_item_prev_frame_value:",",hotkey_map_item_next_frame_description:"Next frame (while paused)",hotkey_map_item_next_frame_value:".",hotkey_map_item_jump_seek_description:"Seek to specific point in the video (7 advances to 70% of duration)",hotkey_map_item_jump_seek_value:"0, 1, 2, 3, 4, 5, 6, 7, 8, 9",hotkey_map_item_subtitles_toggle_description:"Toggle captions ON/OFF",hotkey_map_item_subtitles_toggle_value:"c",hotkey_map_item_prev_episode_description:"Seek to previous episode",hotkey_map_item_prev_episode_pc_value:"Ctrl + Arrow left",hotkey_map_item_prev_episode_mac_value:"Option + Arrow left",hotkey_map_item_next_episode_description:"Seek to next episode",hotkey_map_item_next_episode_pc_value:"Ctrl + Arrow right",hotkey_map_item_next_episode_mac_value:"Option + Arrow right",waiting_live_day_value:"d",waiting_live_hour_value:"h",waiting_live_minute_value:"min",waiting_live_second_value:"sec",waiting_live_colon:":",waiting_live_upcoming_title:"The broadcast hasn't started yet",waiting_live_timer_title:"Before the start of the broadcast left",waiting_live_recover_title:"The broadcast has been paused - it will resume when the author returns",waiting_record_title:"The broadcast completed - recording will appear later",aria_label_video_player:"Video player",aria_label_spherical_control:"Spherical video control. Use the arrow keys to pan the video.",aria_label_debug_panel:"Technical information area, take a screenshot for technical support",aria_label_new_tab_alert:"Opens in a new tab.",aria_label_context_menu_open:"Open context menu",aria_label_context_menu_close:"Close context menu",aria_label_menu_quality:"Quality: {actual}",aria_label_menu_audio_languages:"Audio language: {actual}",aria_label_menu_rate:"Rate: {actual}",aria_label_menu_subtitle:"Subtitles: {actual}",aria_label_menu_download:"Download video",aria_label_menu_debug_overlay_enable:"Enable display of technical information",aria_label_menu_debug_overlay_disable:"Disable display of technical information",aria_label_menu_rotate:"Rotate video 90 degrees",aria_label_menu_loop:"Toggle loop",aria_label_submenu_back:"Return to settings menu",aria_label_submenu_traffic_saving_off:"Disable data saving mode",aria_label_submenu_traffic_saving_on:"Enable data saving mode",end_screen_next_video:"Next video",end_screen_recommended_video:"Recommended video"},Et=new Map;Et.set(a.InterfaceLanguage.EN,wt),Et.set(a.InterfaceLanguage.RU,Tt);var xt,At,Ct=new Map,kt=({language:e,pack:t,fallback:i})=>{if(Et.has(e)){let i=Et.get(e);Et.set(e,{...i,...t})}else Et.set(e,t);Ct.set(e,i)},Lt=e=>Et.has(e),Rt=(e,t,i,r)=>{let n=Et.get(e)?.[t];if((0,a.isNullable)(n)){let i=Ct.get(e)??r;n=(i?Et.get(i):void 0)?.[t]}return(0,a.isNullable)(n)?t+Object.values(i??{}).join(" "):i?n.replaceAll(/{(\w+?)}/g,((e,t)=>i[t]??"")):n},Pt=(e,t)=>{let{interfaceLanguage$:i}=et(),r=g(i),n=Oe();return Rt(r,e,t,n.defaultLanguage)};(At=xt||(xt={})).fatal="fatal",At.error="error",At.warning="warning",At.log="log",At.info="info",At.debug="debug",At.critical="critical";var Ot=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Mt=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,It=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Nt="?",Vt=/^(?:(\w+):)\/\/(?:([\w-]+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Dt(e){return(e&&e.message||"No error message").split("\n").filter((e=>!!e))[0]}function Bt(e){try{let t=function(e){if(!e.stack)return null;let t,i,r=[],n=e.stack.split("\n");for(let a=0;a<n.length;++a){if(t=Ot.exec(n[a]))i={filename:t[2]&&0===t[2].indexOf("address at ")?t[2].substr(11):t[2],function:t[1]||Nt,lineno:t[3]?+t[3]:null,colno:t[4]?+t[4]:null};else if(t=It.exec(n[a]))i={filename:t[2],function:t[1]||Nt,lineno:+t[3],colno:t[4]?+t[4]:null};else{if(!(t=Mt.exec(n[a])))continue;0===a&&!t[5]&&void 0!==e.columnNumber&&(r[0].column=e.columnNumber+1),i={filename:t[3],function:t[1]||Nt,lineno:t[4]?+t[4]:null,colno:t[5]?+t[5]:null}}!i.function&&i.lineno&&(i.function=Nt),r.push(i)}return r.length?{value:Dt(e),type:e.name,stacktrace:{frames:r.reverse()}}:null}(e);if(t)return t}catch{}return{value:Dt(e),type:e&&e.name,stacktrace:{frames:[]}}}var Ut=class{prepare(e){return{...this.getRequestBlank(),exception:{values:[Bt(e)]}}}report(e){this.send(this.prepare(e))}send(e){!this.apiUrl||!e||this.createRequest(e)}createRequest(e){let t=new XMLHttpRequest;t.open("POST",this.apiUrl,!0),t.setRequestHeader("Content-type","application/json"),t.setRequestHeader("X-Sentry-Auth",this.authHeader||""),t.send(JSON.stringify(e))}getRequestBlank(){return{platform:"javascript",event_id:"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),sdk:{name:"micro-sentry.javascript.core",version:"0.0.0"},timestamp:Date.now()/1e3,environment:this.environment}}constructor(e){if(e&&e.dsn){let t=Vt.exec(e.dsn),i=t?t.slice(1):[],r=i[5].split("/"),n=r.slice(0,-1).join("/");this.apiUrl=i[0]+"://"+i[3]+(i[4]?":"+i[4]:"")+(n?"/"+n:"")+"/api/"+r.pop()+"/store/",this.authHeader="Sentry sentry_version=7,sentry_key="+i[1]+(i[2]?",sentry_secret="+i[2]:"")}this.environment=e&&e.environment}};function Ft(e,t){return"[object RegExp]"===Object.prototype.toString.call(t)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t)}var jt=class e extends Ut{get state(){return this._state}clearState(){this._state={}}setTags(e){return this.setKeyState("tags",{...e}),this}setTag(e,t){return this.extendState({tags:{[e]:t}}),this}setExtra(e,t){return this.extendState({extra:{[e]:t}}),this}setExtras(e){return this.setKeyState("extra",{...e}),this}setUser(e){return this.setKeyState("user",{...e}),this}clone(){let t=new e({...this.options,plugins:[]});return t.extendState(this.state),t}withScope(e){let t=this.clone();e(t),t.destroy(),this.setBreadcrumbs(void 0)}addBreadcrumb(e){this.extendState({breadcrumbs:[{timestamp:Date.now()/1e3,...this.beforeBreadcrumb(e)}]})}setBreadcrumbs(e){this.setKeyState("breadcrumbs",e)}captureMessage(e,t){this.send({...this.getRequestBlank(),message:e,level:t})}destroy(){this.destroyed=!0,this.plugins.forEach((e=>{e.destroy&&e.destroy()}))}isIgnoredError(e){return!!this.ignoreErrors.length&&this.getPossibleEventMessages(e).some((e=>this.ignoreErrors.some((t=>Ft(e,t)))))}getRequestBlank(){return{request:{url:this.window.location.toString(),headers:{"User-Agent":this.window.navigator.userAgent}},...super.getRequestBlank(),sdk:{name:"micro-sentry.javascript.browser",version:"0.0.0"},...this.state}}send(e){this.destroyed||this.isDeniedUrl(e)||this.isIgnoredError(e)||(super.send(this.beforeSend({release:this.release,...e})),this.setBreadcrumbs(void 0))}getPossibleEventMessages(e){if(e.message)return[e.message];if(e.exception)try{let{type:t="",value:i=""}=e.exception.values&&e.exception.values[0]||{};return[`${i}`,`${t}: ${i}`]}catch{return[]}return[]}isDeniedUrl(e){if(!this.blacklistUrls.length)return!1;let t=this.getEventFilterUrl(e);return!!t&&this.blacklistUrls.some((e=>Ft(t,e)))}getEventFilterUrl(e){try{if(e.exception){let t=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return t&&t[t.length-1].filename||null}return null}catch{return null}}extendState(e){this._state=Object.keys(e).reduce(((t,i)=>{let r=this._state[i],n=Array.isArray(r)?r:null,a=e[i],s=Array.isArray(a)?a:null;return{...t,[i]:n||s?[...n||[],...s||[]]:{..."string"!=typeof r?r:{},..."string"!=typeof a?a:{}}}}),this._state)}setKeyState(e,t){this._state[e]=t}constructor(e,t=function(){return window}()){super(e),this.options=e,this.window=t,this.destroyed=!1,this._state={};let{plugins:i=[],beforeSend:r=(e=>e),beforeBreadcrumb:n=(e=>e),blacklistUrls:a=[],ignoreErrors:s=[],release:o}=this.options||{};this.plugins=i.map((e=>new e(this))),this.beforeSend=r,this.beforeBreadcrumb=n,this.blacklistUrls=a,this.ignoreErrors=s,this.release=o}},Ht=null,zt=class{destroy(){this.sentryClient?.destroy(),this.sentrySubscription?.unsubscribe(),Ht=null}logIError(e,t=!1){e.thrown&&this.report(e.thrown,{fatal:t,errorType:e.id,category:e.category},{message:e.message,errorData:e.data})}report(e,t={},i={}){let{sentryClient:r,context:n,options:s}=this,{sampleRate:o=0,whiteErrorIdList:l,whiteErrorCategoryList:u=[],blackErrorIdList:c,blackErrorCategoryList:d}=s,{errorType:p,category:h}=t;if(!((0,a.isNonNullable)(h)&&d.includes(h)||(0,a.isNonNullable)(p)&&c.includes(p))&&(Math.random()<=o||(0,a.isNonNullable)(h)&&u.includes(h)||(0,a.isNonNullable)(p)&&l.includes(p))){Object.keys(t).length&&r.setTags({version:this.version,...t}),(Object.keys(n).length||Object.keys(i).length)&&r.setExtras({...n,...i});try{p&&r.captureMessage(p,t.fatal?xt.fatal:xt.error),r.report(e)}catch(e){console.error(e)}}}static getInstance(){return Ht}constructor(e,t,i={}){!Ht&&e.dsn&&(this.sentryClient=new jt({dsn:e.dsn,environment:t.env}),this.version=t.version,this.sentrySubscription=new a.Subscription,this.options=e,this.context=i,Ht=this)}},qt=e=>{if(e.requestFullscreen)return e.requestFullscreen();if(e.msRequestFullscreen)return e.msRequestFullscreen();if(e.webkitRequestFullscreen)return e.webkitRequestFullscreen();if(e.mozRequestFullScreen)return e.mozRequestFullScreen();let t=e.querySelector("video");return t?.webkitEnterFullscreen?t.webkitEnterFullscreen():Promise.reject()},Wt=e=>e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():Promise.reject(),Gt=()=>{let e=document;return e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement},Qt=()=>!!Gt(),Yt=e=>{document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e)},Kt=e=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e)},Xt=class{isSupported(){return document.pictureInPictureEnabled&&!a.clientChecker.isYandex}isActive(){return this.isSupported()&&!!document.pictureInPictureElement}setContext(e){this.svelteContext=e}async revealPictureInPicture(){this.isRequested&&(this.unregistryEventHandlers(),await this.request(),this.registryEventHandlers())}async request(){if(this.isSupported()&&!this.isActive())try{await(this.videoElement?.requestPictureInPicture())}catch{this.isRequested=!1}}async remove(){!this.isSupported()||!this.isActive()||await document.exitPictureInPicture()}assignPlayerContainer(e){this.isSupported()&&(this.playerContainer=e)}updateVideoElement(){this.isSupported()&&(this.videoElement=this.playerContainer?.querySelector("video"))}registryEventHandlers(){this.videoElement?.addEventListener("enterpictureinpicture",this.eventHandlers.enterpictureinpicture),this.videoElement?.addEventListener("leavepictureinpicture",this.eventHandlers.leavepictureinpicture)}registryExternalEventHandlers(e){this.externalEventHandlers={...e}}unregistryEventHandlers(){this.videoElement?.removeEventListener("enterpictureinpicture",this.eventHandlers.enterpictureinpicture),this.videoElement?.removeEventListener("leavepictureinpicture",this.eventHandlers.leavepictureinpicture)}async dispose(){this.unregistryEventHandlers(),await this.remove()}onEnterPictureInPicture(e){let t=e.pictureInPictureWindow;t&&(this.info.isActive$.next(!0),this.isRequested=!0,t.addEventListener("resize",this.eventHandlers.resize),this.externalEventHandlers.enterpictureinpicture?.(e))}onLeavePictureInPicture(e){let t=e.pictureInPictureWindow;this.info.isActive$.next(!1),this.isRequested=!1,t?.removeEventListener("resize",this.eventHandlers.resize),this.externalEventHandlers.leavepictureinpicture?.(e),this.playerDummyElement?.$destroy()}onResize(e){this.externalEventHandlers.resize?.(e)}constructor(){this.isRequested=!1,this.videoElement=void 0,this.playerContainer=void 0,this.externalEventHandlers={},this.eventHandlers={enterpictureinpicture:this.onEnterPictureInPicture.bind(this),leavepictureinpicture:this.onLeavePictureInPicture.bind(this),resize:(0,a.debounceFn)(this.onResize.bind(this),300)},this.info={isActive$:new a.ValueSubject(this.isActive()),type:0}}};function Zt(e){return e instanceof Xt}function Jt(e){let t=et();return Q((()=>{t.getAdmanWrapper().startPostroll()})),[]}var ei=class extends Le{constructor(e){super(),Ce(this,e,Jt,null,h,{})}};function ti(e){C(e,"svelte-1k4i25s",".container.svelte-1k4i25s.svelte-1k4i25s{position:absolute;top:14px;right:16px;padding:6px 10px;font-size:13px;color:#fff;background:rgba(0, 0, 0, 0.56);border-radius:6px;transition:color .2s}.container-mobile.svelte-1k4i25s.svelte-1k4i25s{bottom:14px;top:unset;font-size:15px;max-width:142px}.icon.svelte-1k4i25s.svelte-1k4i25s{margin-left:4px;position:relative;top:2px;fill:var(--white);transition:fill .2s}.skip.svelte-1k4i25s.svelte-1k4i25s{width:86px}.skippable.svelte-1k4i25s.svelte-1k4i25s{cursor:pointer;color:var(--white)}.skippable.svelte-1k4i25s.svelte-1k4i25s:hover{color:rgba(255, 255, 255, .75)}.skippable.svelte-1k4i25s:hover .icon.svelte-1k4i25s{fill:rgba(255, 255, 255, .75)}")}function ii(e){let t,i=Pt("skip_ads_after",{time:Math.ceil(e[1]-e[0]).toFixed(0)})+"";return{c(){t=M(i)},m(e,i){k(e,t,i)},p(e,r){3&r&&i!==(i=Pt("skip_ads_after",{time:Math.ceil(e[1]-e[0]).toFixed(0)})+"")&&j(t,i)},d(e){e&&L(t)}}}function ri(e){let t,i,r,n,a,s,o,l=Pt("skip_ads_now")+"";return{c(){t=P("div"),i=M(l),r=I(),n=O("svg"),a=O("path"),U(a,"fill-rule","evenodd"),U(a,"clip-rule","evenodd"),U(a,"d","M0.263627 0.263605C-0.0878444 0.615078 -0.0878429 1.18493 0.26363 1.5364L4.72723 5.99998L0.263627 10.4636C-0.0878444 10.8151 -0.0878429 11.3849 0.26363 11.7364C0.615103 12.0879 1.18495 12.0879 1.53642 11.7364L6.63642 6.63637C6.98789 6.2849 6.98789 5.71505 6.63642 5.36358L1.53642 0.263602C1.18495 -0.0878686 0.615098 -0.0878673 0.263627 0.263605Z"),U(n,"class","icon svelte-1k4i25s"),U(n,"width","7"),U(n,"height","12"),U(n,"viewBox","0 0 7 12"),U(n,"fill","none"),U(n,"xmlns","http://www.w3.org/2000/svg"),U(t,"class","skip svelte-1k4i25s")},m(l,u){k(l,t,u),A(t,i),A(t,r),A(t,n),A(n,a),s||(o=V(t,"click",B((function(){p(e[2])&&e[2].apply(this,arguments)}))),s=!0)},p(t,i){e=t},d(e){e&&L(t),s=!1,o()}}}function ni(e){let t;function i(e,t){return e[3]?ri:ii}let r=i(e),n=r(e);return{c(){t=P("div"),n.c(),U(t,"class","container svelte-1k4i25s"),z(t,"container-mobile",e[4]),z(t,"skippable",e[3])},m(e,i){k(e,t,i),n.m(t,null)},p(e,[a]){r===(r=i(e))&&n?n.p(e,a):(n.d(1),n=r(e),n&&(n.c(),n.m(t,null))),16&a&&z(t,"container-mobile",e[4]),8&a&&z(t,"skippable",e[3])},i:o,o,d(e){e&&L(t),n.d()}}}function ai(e,t,i){let r,n,{position:s=0}=t,{secondsToWatchBeforeSkip:o=0}=t,{skipAd:l=a.noop}=t,u=et().ui.isMobile;return v(e,u,(e=>i(4,r=e))),e.$$set=e=>{"position"in e&&i(0,s=e.position),"secondsToWatchBeforeSkip"in e&&i(1,o=e.secondsToWatchBeforeSkip),"skipAd"in e&&i(2,l=e.skipAd)},e.$$.update=()=>{3&e.$$.dirty&&i(3,n=s>0&&s>=o)},[s,o,l,n,r,u]}var si=class extends Le{constructor(e){super(),Ce(this,e,ai,ni,h,{position:0,secondsToWatchBeforeSkip:1,skipAd:2},ti)}};function oi(e){C(e,"svelte-1wy3dql","button.svelte-1wy3dql{position:absolute;pointer-events:none;bottom:14px;left:16px;font-size:15px;background:white;border:none;padding:6px 10px;border-radius:6px;color:black}")}function li(e){let t;return{c(){t=P("button"),t.textContent=`${Pt("visit_advertiser")}`,U(t,"class","svelte-1wy3dql")},m(e,i){k(e,t,i)},p:o,i:o,o,d(e){e&&L(t)}}}var ui=class extends Le{constructor(e){super(),Ce(this,e,null,li,h,{},oi)}};function ci(e){C(e,"svelte-354ajf",".container.svelte-354ajf{width:100%;height:100%}.top-gradient-mobile.svelte-354ajf{position:absolute;width:100%;height:80px;top:0;left:0;pointer-events:none;background:linear-gradient(\n      360deg,\n      rgba(0, 0, 0, 0) 0%,\n      rgba(0, 0, 0, 0.05) 12%,\n      rgba(0, 0, 0, 0.15) 25%,\n      rgba(0, 0, 0, 0.3) 45%,\n      rgba(0, 0, 0, 0.4) 57%,\n      rgba(0, 0, 0, 0.5) 77%,\n      rgba(0, 0, 0, 0.55) 88%,\n      rgba(0, 0, 0, 0.65) 100%\n    )}")}function di(e){let t;return{c(){t=P("div"),U(t,"class","top-gradient-mobile svelte-354ajf")},m(e,i){k(e,t,i)},d(e){e&&L(t)}}}function pi(e){let t,i;return t=new si({props:{position:e[5],secondsToWatchBeforeSkip:e[6],skipAd:e[8].actions.internal.skipAd}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};32&i&&(r.position=e[5]),64&i&&(r.secondsToWatchBeforeSkip=e[6]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function hi(e){let t,i;return t=new ei({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function fi(e){let t,i;return t=new ui({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function mi(e){let t,i,r,n,a,s,o,l=e[0]&&di(),u=e[3]&&pi(e),c=e[7]&&hi(),d=e[4]&&fi();return{c(){t=P("div"),l&&l.c(),i=I(),r=P("video"),n=I(),u&&u.c(),a=I(),c&&c.c(),s=I(),d&&d.c(),H(r,"width","100%"),H(r,"height","100%"),r.playsInline=!0,U(t,"class","container svelte-354ajf")},m(p,h){k(p,t,h),l&&l.m(t,null),A(t,i),A(t,r),e[19](r),A(t,n),u&&u.m(t,null),A(t,a),c&&c.m(t,null),A(t,s),d&&d.m(t,null),e[20](t),o=!0},p(e,[r]){e[0]?l||(l=di(),l.c(),l.m(t,i)):l&&(l.d(1),l=null),e[3]?u?(u.p(e,r),8&r&&be(u,1)):(u=pi(e),u.c(),be(u,1),u.m(t,a)):u&&(ge(),ye(u,1,1,(()=>{u=null})),ve()),e[7]?c?128&r&&be(c,1):(c=hi(),c.c(),be(c,1),c.m(t,s)):c&&(ge(),ye(c,1,1,(()=>{c=null})),ve()),e[4]?d?16&r&&be(d,1):(d=fi(),d.c(),be(d,1),d.m(t,null)):d&&(ge(),ye(d,1,1,(()=>{d=null})),ve())},i(e){o||(be(u),be(c),be(d),o=!0)},o(e){ye(u),ye(c),ye(d),o=!1},d(i){i&&L(t),l&&l.d(),e[19](null),u&&u.d(),c&&c.d(),d&&d.d(),e[20](null)}}}function gi(e,t,i){let r,n,a,s,o,{adsSlotId:l}=t,{adsParams:u}=t,{adsPreviewParam:c}=t,{duration:d=0}=t,p=et(),h=p.state.isEnded$;v(e,h,(e=>i(7,o=e)));let f=p.ui.isMobile;v(e,f,(e=>i(0,n=e)));let m,b,y=!1,S=p.ads.playbackState;v(e,S,(e=>i(18,r=e)));let $=p.ads.canSkip,_=p.ads.position;v(e,_,(e=>i(5,a=e)));let T,w,E=p.ads.secondsToWatchBeforeSkip;return v(e,E,(e=>i(6,s=e))),Q((()=>{let e=p.getAdmanWrapper();if(!l)return void e.onAdmanLoadingError();let t=t=>{e.initAdman(t),y=!0},i=new AbortController,{width:r,height:n}=g(p.ui.playerSize),a={width:r,height:n,isFullscreen:g(p.ui.isFullscreen),isAutoplay:g(p.ui.isAutoplay),adsContainer:m,adsVideoElement:b,slotId:l,params:u,previewParam:c,duration:d};return window.AdmanHTML?t(a):e.loadAdman(i.signal).then((()=>{t(a)})).catch((()=>{e.onAdmanLoadingError()})),()=>{!y&&i.abort()}})),e.$$set=e=>{"adsSlotId"in e&&i(14,l=e.adsSlotId),"adsParams"in e&&i(15,u=e.adsParams),"adsPreviewParam"in e&&i(16,c=e.adsPreviewParam),"duration"in e&&i(17,d=e.duration)},e.$$.update=()=>{262144&e.$$.dirty&&i(3,T=$&&"inactive"!==r),262145&e.$$.dirty&&i(4,w=n&&"inactive"!==r)},[n,m,b,T,w,a,s,o,p,h,f,S,_,E,l,u,c,d,r,function(e){te[e?"unshift":"push"]((()=>{b=e,i(2,b)}))},function(e){te[e?"unshift":"push"]((()=>{m=e,i(1,m)}))}]}var vi=class extends Le{constructor(e){super(),Ce(this,e,gi,mi,h,{adsSlotId:14,adsParams:15,adsPreviewParam:16,duration:17},ci)}},bi=e=>{if(!isFinite(e))return"00:00";let t=Math.round(e),i=Math.floor(t/3600);t-=3600*i;let r=Math.floor(t/60);t-=60*r;let n=[r,t].map((e=>String(e).padStart(2,"0"))).join(":");return i>0&&(n=`${i}:${n}`),n};function yi(e){let t,i,r,n,a=e[2].default,s=b(a,e,e[1],null),o=[{xmlns:"http://www.w3.org/2000/svg"},{width:"42"},{height:"20"},{"aria-hidden":"true"},{"data-testid":"live-icon"},{role:"img"},e[0]],u={};for(let e=0;e<o.length;e+=1)u=l(u,o[e]);return{c(){t=O("svg"),s&&s.c(),i=O("path"),r=O("path"),U(i,"fill","none"),U(i,"stroke","#fff"),U(i,"stroke-width","2"),U(i,"d","M6.41 1A6.46 6.46 0 0 0 3 1.55 3.5 3.5 0 0 0 1.55 3 6.46 6.46 0 0 0 1 6.41v7.18A6.46 6.46 0 0 0 1.55 17 3.5 3.5 0 0 0 3 18.45a6.46 6.46 0 0 0 3.41.55h29.18a6.46 6.46 0 0 0 3.41-.55A3.5 3.5 0 0 0 40.45 17a6.46 6.46 0 0 0 .55-3.41V6.41A6.46 6.46 0 0 0 40.45 3 3.5 3.5 0 0 0 39 1.55 6.46 6.46 0 0 0 35.59 1z"),U(r,"fill","#f0f2f5"),U(r,"fill-rule","evenodd"),U(r,"d","M8 5a1 1 0 0 1 1 1v7h3a1 1 0 0 1 1 .88V14a1 1 0 0 1-1 1H8a1 1 0 0 1-1-.77v-.11A.5.5 0 0 1 7 14V6a1 1 0 0 1 .88-1zm8 0a1 1 0 0 1 1 1v8a1 1 0 0 1-.88 1H16a1 1 0 0 1-1-1V6a1 1 0 0 1 .88-1zm18 0a1 1 0 0 1 1 .88V6a1 1 0 0 1-1 1h-3v2h3a1 1 0 0 1 1 .88V10a1 1 0 0 1-1 1h-3v2h3a1 1 0 0 1 1 .88V14a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-.77v-.11a.5.5 0 0 1 0-.12V6a1 1 0 0 1 .56-.9A1 1 0 0 1 30 5zm-8 0a1 1 0 0 1 1 1v.1a.9.9 0 0 1-.11.35l-2.47 7.57a1.48 1.48 0 0 1-1.32.98h-.2a1.48 1.48 0 0 1-1.31-.95l-2.47-7.57a.9.9 0 0 1-.12-.36V6a1 1 0 0 1 .88-1H20a1 1 0 0 1 1 1v-.1l2 6.4 2-6.4a1 1 0 0 1 1-.9"),F(t,u)},m(e,a){k(e,t,a),s&&s.m(t,null),A(t,i),A(t,r),n=!0},p(e,[i]){s&&s.p&&(!n||2&i)&&$(s,a,e,e[1],n?S(a,e[1],i,null):_(e[1]),null),F(t,u=_e(o,[{xmlns:"http://www.w3.org/2000/svg"},{width:"42"},{height:"20"},{"aria-hidden":"true"},{"data-testid":"live-icon"},{role:"img"},1&i&&e[0]]))},i(e){n||(be(s,e),n=!0)},o(e){ye(s,e),n=!1},d(e){e&&L(t),s&&s.d(e)}}}function Si(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var $i=class extends Le{constructor(e){super(),Ce(this,e,Si,yi,h,{})}};function _i(e){let t,i,r,n,a=e[2].default,s=b(a,e,e[1],null),o=[{xmlns:"http://www.w3.org/2000/svg"},{width:"42"},{height:"20"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"live-active-icon"},{role:"img"},e[0]],u={};for(let e=0;e<o.length;e+=1)u=l(u,o[e]);return{c(){t=O("svg"),s&&s.c(),i=O("rect"),r=O("path"),U(i,"width","42"),U(i,"height","20"),U(i,"fill","#FF3347"),U(i,"rx","5"),U(r,"fill","#F2F3F5"),U(r,"fill-rule","evenodd"),U(r,"d","M8 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4a1 1 0 1 0 0-2H9V6a1 1 0 0 0-1-1m7 1a1 1 0 1 1 2 0v8a1 1 0 1 1-2 0zm15-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4a1 1 0 1 0 0-2h-3v-2h3a1 1 0 1 0 0-2h-3V7h3a1 1 0 1 0 0-2zm-8.325 9.31-2.55-7.824a1 1 0 0 1-.117-.363L19 6.1h.005a1 1 0 1 1 1.99-.199L21 5.9l2 6.4 2-6.4h.005a1 1 0 0 1 1.99.2H27l-.008.023a1 1 0 0 1-.118.363l-2.55 7.824a1 1 0 0 1-.95.69h-.748a1 1 0 0 1-.95-.69z"),U(r,"clip-rule","evenodd"),F(t,u)},m(e,a){k(e,t,a),s&&s.m(t,null),A(t,i),A(t,r),n=!0},p(e,[i]){s&&s.p&&(!n||2&i)&&$(s,a,e,e[1],n?S(a,e[1],i,null):_(e[1]),null),F(t,u=_e(o,[{xmlns:"http://www.w3.org/2000/svg"},{width:"42"},{height:"20"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"live-active-icon"},{role:"img"},1&i&&e[0]]))},i(e){n||(be(s,e),n=!0)},o(e){ye(s,e),n=!1},d(e){e&&L(t),s&&s.d(e)}}}function Ti(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var wi=class extends Le{constructor(e){super(),Ce(this,e,Ti,_i,h,{})}};function Ei(e){let t,i;return t=new $i({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function xi(e){let t,i;return t=new wi({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Ai(e){let t,i,r,n,a=[xi,Ei],s=[];function o(e,t){return e[0]?0:1}return t=o(e),i=s[t]=a[t](e),{c(){i.c(),r=N()},m(e,i){s[t].m(e,i),k(e,r,i),n=!0},p(e,[n]){let l=t;t=o(e),t!==l&&(ge(),ye(s[l],1,1,(()=>{s[l]=null})),ve(),i=s[t],i||(i=s[t]=a[t](e),i.c()),be(i,1),i.m(r.parentNode,r))},i(e){n||(be(i),n=!0)},o(e){ye(i),n=!1},d(e){e&&L(r),s[t].d(e)}}}function Ci(e,t,i){let{isActive:r=!1}=t;return e.$$set=e=>{"isActive"in e&&i(0,r=e.isActive)},[r]}var ki=class extends Le{constructor(e){super(),Ce(this,e,Ci,Ai,h,{isActive:0})}};function Li(e){C(e,"svelte-i7xnqb",".thumb-timer.svelte-i7xnqb.svelte-i7xnqb{position:absolute;z-index:var(--thumb-timer-z-index);bottom:0;right:0;margin:8px;padding:0 7px;border-radius:3px;background:var(--black-alpha-40);color:var(--white);font-size:12.5px;line-height:23px;height:23px;white-space:nowrap;transition:visibility var(--controls-transition-duration), opacity var(--controls-transition-duration)}.thumb-timer.live.svelte-i7xnqb.svelte-i7xnqb{font-size:0;line-height:20px;height:20px;border-radius:2px;background:var(--red)}.thumb-timer.hidden.svelte-i7xnqb.svelte-i7xnqb{visibility:hidden;opacity:0}.thumb-timer.svelte-i7xnqb.svelte-i7xnqb:after{content:'';display:inline-block;vertical-align:middle;height:100%}.thumb-timer-live-icon.svelte-i7xnqb.svelte-i7xnqb{display:inline-block;vertical-align:middle;width:42px;height:20px;margin:0 -7px}.thumb-timer-equalizer.svelte-i7xnqb.svelte-i7xnqb{display:inline-block;vertical-align:middle;position:relative;width:10px;height:10px;margin-top:-4px;margin-right:4px}.live.svelte-i7xnqb .thumb-timer-equalizer.svelte-i7xnqb{margin-top:-2px}.thumb-timer-equalizer.svelte-i7xnqb .col.svelte-i7xnqb{width:2px;height:10px;margin-right:2px;background:var(--white);position:absolute;bottom:0;transform-origin:50% 100%;animation:1.5s infinite linear alternate;animation-play-state:paused}.thumb-timer.playing.svelte-i7xnqb .thumb-timer-equalizer .col.svelte-i7xnqb{animation-play-state:running}.thumb-timer-equalizer.svelte-i7xnqb .col.svelte-i7xnqb:nth-child(1){left:0;animation-name:svelte-i7xnqb-thumb-timer-equalizer-col1}.thumb-timer-equalizer.svelte-i7xnqb .col.svelte-i7xnqb:nth-child(2){left:3px;animation-name:svelte-i7xnqb-thumb-timer-equalizer-col2}.thumb-timer-equalizer.svelte-i7xnqb .col.svelte-i7xnqb:nth-child(3){left:6px;animation-name:svelte-i7xnqb-thumb-timer-equalizer-col3}@keyframes svelte-i7xnqb-thumb-timer-equalizer-col1{0%{transform:scaleY(0.1)}25%{transform:scaleY(0.8)}50%{transform:scaleY(0.4)}75%{transform:scaleY(0.6)}100%{transform:scaleY(0.1)}}@keyframes svelte-i7xnqb-thumb-timer-equalizer-col2{0%{transform:scaleY(1)}25%{transform:scaleY(0.3)}50%{transform:scaleY(0.9)}75%{transform:scaleY(0.6)}100%{transform:scaleY(1)}}@keyframes svelte-i7xnqb-thumb-timer-equalizer-col3{0%{transform:scaleY(0.6)}25%{transform:scaleY(0.9)}50%{transform:scaleY(0.1)}75%{transform:scaleY(0.9)}100%{transform:scaleY(0.6)}}.thumb-timer-text.svelte-i7xnqb.svelte-i7xnqb{display:inline-block;text-align:right}")}function Ri(e){let t,i=bi(e[4]-e[3])+"";return{c(){t=M(i)},m(e,i){k(e,t,i)},p(e,r){24&r&&i!==(i=bi(e[4]-e[3])+"")&&j(t,i)},i:o,o,d(e){e&&L(t)}}}function Pi(e){let t,i,r;return i=new ki({props:{isActive:!0}}),{c(){t=P("div"),Ee(i.$$.fragment),U(t,"class","thumb-timer-live-icon svelte-i7xnqb")},m(e,n){k(e,t,n),xe(i,t,null),r=!0},p:o,i(e){r||(be(i.$$.fragment,e),r=!0)},o(e){ye(i.$$.fragment,e),r=!1},d(e){e&&L(t),Ae(i)}}}function Oi(e){let t,i,r,n,a,s,o,l=[Pi,Ri],u=[];function c(e,t){return e[1]?0:1}return a=c(e),s=u[a]=l[a](e),{c(){t=P("div"),i=P("div"),i.innerHTML='<div class="col svelte-i7xnqb"></div> <div class="col svelte-i7xnqb"></div> <div class="col svelte-i7xnqb"></div>',r=I(),n=P("span"),s.c(),U(i,"class","thumb-timer-equalizer svelte-i7xnqb"),U(n,"class","thumb-timer-text svelte-i7xnqb"),U(t,"role","timer"),U(t,"class","thumb-timer svelte-i7xnqb"),U(t,"data-testid","thumb-timer"),z(t,"live",e[1]),z(t,"hidden",e[0]),z(t,"playing",e[2])},m(e,s){k(e,t,s),A(t,i),A(t,r),A(t,n),u[a].m(n,null),o=!0},p(e,[i]){let r=a;a=c(e),a===r?u[a].p(e,i):(ge(),ye(u[r],1,1,(()=>{u[r]=null})),ve(),s=u[a],s?s.p(e,i):(s=u[a]=l[a](e),s.c()),be(s,1),s.m(n,null)),(!o||2&i)&&z(t,"live",e[1]),(!o||1&i)&&z(t,"hidden",e[0]),(!o||4&i)&&z(t,"playing",e[2])},i(e){o||(be(s),o=!0)},o(e){ye(s),o=!1},d(e){e&&L(t),u[a].d()}}}function Mi(e,t,i){let{isHidden:r=!1}=t,{isLive:n=!1}=t,{isPlaying:a=!1}=t,{position:s}=t,{duration:o}=t;return e.$$set=e=>{"isHidden"in e&&i(0,r=e.isHidden),"isLive"in e&&i(1,n=e.isLive),"isPlaying"in e&&i(2,a=e.isPlaying),"position"in e&&i(3,s=e.position),"duration"in e&&i(4,o=e.duration)},[r,n,a,s,o]}var Ii,Ni=class extends Le{constructor(e){super(),Ce(this,e,Mi,Oi,h,{isHidden:0,isLive:1,isPlaying:2,position:3,duration:4},Li)}},Vi=e=>{if(document.queryCommandSupported&&document.queryCommandSupported("copy")){let t=document.createElement("textarea");t.textContent=e,t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t),t.select();try{document.execCommand("copy")}finally{document.body.removeChild(t)}}},Di=e=>{e.stopPropagation(),e.preventDefault()},Bi=e=>"Escape"===e.code,Ui=(e,t=[])=>{let i=e.code;return["Enter","Space",...t].includes(i)},Fi=e=>{if((e=>{let t=e.code;return"Tab"===t&&!e.shiftKey||"ArrowDown"===t})(e))return Di(e),void(e=>{let t=e.nextElementSibling;t||(t=e.parentNode?.firstElementChild),t?.focus()})(e.target);(e=>{let t=e.code;return"Tab"===t||"ArrowUp"===t})(e)&&(Di(e),(e=>{let t=e.previousElementSibling;t||(t=e.parentNode?.lastElementChild),t?.focus()})(e.target))},ji=e=>!a.clientChecker.isAndroid&&0===e?.detail||a.clientChecker.isAndroid&&""===e?.pointerType,Hi=async(e,t,i)=>{await oe(),e&&!e.classList.contains("opened")&&!t&&g(i)&&(await oe(),i.set(!1),e.focus())},zi=async(e,t,i)=>{await oe(),e&&t&&i&&e.children[0]?.focus()},qi=(e,t)=>{Fi(e),Bi(e)&&(Di(e),t())},Wi=async(e,t,i)=>{Ui(e,["ArrowRight"])&&(Di(e),t(),await oe(),i()?.focus())},Gi=(e,t)=>{Ui(e)&&(Di(e),t())},Qi=((Ii=Qi||{}).OPEN_SUB_MENU="OPEN_SUB_MENU",Ii.CLICK="CLICK",Ii.SWITCH="SWITCH",Ii),Yi=100,Ki=200,Xi=300,Zi=400,Ji=500,er=600,tr=700,ir=800,rr=900,nr=1e3;function ar(e){C(e,"svelte-1hm4mm9",".item.svelte-1hm4mm9{padding:8px 16px;cursor:pointer;position:relative;display:block;color:rgba(255, 255, 255, 0.72);font-size:13px;line-height:18px;letter-spacing:-0.14px;white-space:nowrap}.item.svelte-1hm4mm9:hover{background:rgba(66, 66, 66, .5);color:var(--white)}")}function sr(e){let t,i,r,n,a;return{c(){t=P("li"),i=M(e[1]),U(t,"class","item svelte-1hm4mm9"),U(t,"role","menuitem"),U(t,"tabindex","0"),U(t,"aria-label",r=e[2]??e[1]),U(t,"data-testid",e[0])},m(r,s){k(r,t,s),A(t,i),n||(a=[V(t,"click",B(e[3])),V(t,"keydown",e[4])],n=!0)},p(e,[n]){2&n&&j(i,e[1]),6&n&&r!==(r=e[2]??e[1])&&U(t,"aria-label",r),1&n&&U(t,"data-testid",e[0])},i:o,o,d(e){e&&L(t),n=!1,d(a)}}}function or(e,t,i){let{id:r}=t,{onClick:n=a.noop}=t,{closeContextMenu:s=a.noop}=t,{label:o}=t,{ariaLabel:l}=t,u=()=>{n(),s()};return e.$$set=e=>{"id"in e&&i(0,r=e.id),"onClick"in e&&i(5,n=e.onClick),"closeContextMenu"in e&&i(6,s=e.closeContextMenu),"label"in e&&i(1,o=e.label),"ariaLabel"in e&&i(2,l=e.ariaLabel)},[r,o,l,u,e=>{Gi(e,(()=>u()))},n,s]}var lr=class extends Le{constructor(e){super(),Ce(this,e,or,sr,h,{id:0,onClick:5,closeContextMenu:6,label:1,ariaLabel:2},ar)}},ur=(e,t)=>e.weight-t.weight;function cr(e){C(e,"svelte-1p5ukkp","ul.svelte-1p5ukkp{position:absolute;z-index:var(--context-menu-z-index);border-radius:8px;background:rgba(0, 0, 0, 0.72);transition:visibility .1s,opacity .1s;list-style:none;margin:0;padding:6px 0;max-height:100%;max-width:100%;overflow-x:hidden;overflow-y:auto}")}function dr(e,t,i){let r=e.slice();return r[52]=t[i],r}function pr(e){let t,i,r,n,a=Se(e[2]),s=[];for(let t=0;t<a.length;t+=1)s[t]=hr(dr(e,a,t));let o=e=>ye(s[e],1,1,(()=>{s[e]=null}));return{c(){t=P("ul");for(let e=0;e<s.length;e+=1)s[e].c();U(t,"role","menu"),H(t,"top",e[4]+"px"),H(t,"left",e[3]+"px"),U(t,"class","svelte-1p5ukkp")},m(a,o){k(a,t,o);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);e[34](t),i=!0,r||(n=[V(t,"contextmenu",D(e[33])),V(t,"keydown",e[13])],r=!0)},p(e,r){if(4100&r[0]){let i;for(a=Se(e[2]),i=0;i<a.length;i+=1){let n=dr(e,a,i);s[i]?(s[i].p(n,r),be(s[i],1)):(s[i]=hr(n),s[i].c(),be(s[i],1),s[i].m(t,null))}for(ge(),i=a.length;i<s.length;i+=1)o(i);ve()}(!i||16&r[0])&&H(t,"top",e[4]+"px"),(!i||8&r[0])&&H(t,"left",e[3]+"px")},i(e){if(!i){for(let e=0;e<a.length;e+=1)be(s[e]);i=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)ye(s[e]);i=!1},d(i){i&&L(t),R(s,i),e[34](null),r=!1,d(n)}}}function hr(e){let t,i;return t=new lr({props:{id:e[52].id,label:e[52].label,ariaLabel:e[52].ariaLabel,onClick:e[52].onClick,closeContextMenu:e[12]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};4&i[0]&&(r.id=e[52].id),4&i[0]&&(r.label=e[52].label),4&i[0]&&(r.ariaLabel=e[52].ariaLabel),4&i[0]&&(r.onClick=e[52].onClick),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function fr(e){let t,i,r=e[1]&&pr(e);return{c(){r&&r.c(),t=N()},m(e,n){r&&r.m(e,n),k(e,t,n),i=!0},p(e,i){e[1]?r?(r.p(e,i),2&i[0]&&be(r,1)):(r=pr(e),r.c(),be(r,1),r.m(t.parentNode,t)):r&&(ge(),ye(r,1,1,(()=>{r=null})),ve())},i(e){i||(be(r),i=!0)},o(e){ye(r),i=!1},d(e){e&&L(t),r&&r.d(e)}}}function mr(e,t,i){let r,s,o,l,u,c,d,p,h,f,m,g,b,y,S,{visible:$=!1}=t,{supportLink:_}=t,{position:T={top:0,left:0}}=t,{playerContainerRef:w}=t,{controlsContainerRef:E}=t,{menuElementRef:x}=t,{returnFocus:A}=t,C=0,k=0,L=et(),R=Oe(),P=L.ui.contextMenu.visible$,O=L.ui.debugPanelVisible;v(e,O,(e=>i(28,f=e)));let M=L.ui.additionalContextMenuItems$;v(e,M,(e=>i(27,h=e)));let I=L.webApi.pictureInPictureApi,N=L.webApi.pictureInPictureApi?.info.isActive$;v(e,N,(e=>i(30,b=e)));let V=L.actions.internal.togglePictureInPicture,D=L.state.chromecastState$;v(e,D,(e=>i(31,y=e)));let B=L.state.isLive$;v(e,B,(e=>i(32,S=e)));let U=L.state.positionExact$;v(e,U,(e=>i(35,g=e)));let F=L.state.isInteractive,j=L.state.looped$;v(e,j,(e=>i(29,m=e)));let H=()=>{P.set(!1),A?.()},z=()=>{L.actions.internal.videoRotate()},q=()=>{(0,a.isValidURL)(_)&&window.open(_,"_blank"),L.actions.internal.reportProblem(),L.actions.internal.pause()},W=()=>{let e=L.actions.internal.getDebugTextData();if(R.features.saveDebugInfoToFile){let t=new Blob([...e],{type:"plain/text"}),i=window.URL.createObjectURL(t);Xe(i,"vk_player_debug_info","txt")}else Vi(L.actions.internal.getDebugTextData())},G=()=>{let e=L.actions.internal.getTraceTextData(),t=new Blob([...e],{type:"application/json"}),i=window.URL.createObjectURL(t);Xe(i,"vk_player_trace_info","json")},Q=()=>{O.set(!0)},Y=async()=>{try{V()}finally{A?.()}},K=()=>{L.actions.internal.setLooped(!m)},X=()=>{if(o){let e=L.callbacks?.onCopyEmbedCodeClicked?.();e&&Vi(e)}},Z=(e=!1)=>{if(L.callbacks?.onCopyVideoLink){let t=L.callbacks?.onCopyVideoLink(e,g);t&&Vi(t)}},ee=[];return e.$$set=e=>{"visible"in e&&i(1,$=e.visible),"supportLink"in e&&i(14,_=e.supportLink),"position"in e&&i(15,T=e.position),"playerContainerRef"in e&&i(16,w=e.playerContainerRef),"controlsContainerRef"in e&&i(17,E=e.controlsContainerRef),"menuElementRef"in e&&i(0,x=e.menuElementRef),"returnFocus"in e&&i(18,A=e.returnFocus)},e.$$.update=()=>{if(67108864&e.$$.dirty[0]|2&e.$$.dirty[1]&&i(25,s=r&&!S&&!F),1&e.$$.dirty[1]&&i(23,l=I&&y!==n.ChromecastState.CONNECTED&&!F),1073741824&e.$$.dirty[0]&&i(21,c=R.showSupport&&!b),229377&e.$$.dirty[0]&&x&&w&&E){let{top:e,left:t,bottom:r,right:n}=T,s=t??0,o=e??0,l=x.getBoundingClientRect();(0,a.isNullable)(t)&&!(0,a.isNullable)(n)&&(s=n-l.width),(0,a.isNullable)(e)&&!(0,a.isNullable)(r)&&(o=r-l.height),s=Math.max(s,0),o=Math.max(o,0),((e,t)=>{if(!x||!w||!E)return;let r=x.getBoundingClientRect(),n=w.getBoundingClientRect();i(3,C=e-n.left),i(4,k=t-n.top),C+r.width>n.width&&i(3,C=n.width-r.width),k+r.height>n.height&&i(4,k=n.height-r.height),i(3,C=Math.max(C,0)),i(4,k=Math.max(k,0))})(s,o)}1073217540&e.$$.dirty[0]&&(i(2,ee=[]),r&&ee.push({id:"copy-link",weight:Yi,label:Pt("menu_copy_video_link"),onClick:()=>Z()}),s&&ee.push({id:"copy-link-timestamp",weight:Ki,label:Pt("menu_copy_video_link_with_timestamp"),onClick:()=>Z(!0)}),o&&ee.push({id:"copy-embed-code",weight:Xi,label:Pt("menu_copy_embed_code"),onClick:X}),l&&ee.push({id:"pip",weight:Zi,label:Pt("menu_pip"),onClick:Y}),ee.push({id:"video-loop",weight:Ji,label:Pt(m?"menu_video_loop_off":"menu_video_loop_on"),ariaLabel:Pt("aria_label_menu_loop"),onClick:K}),u&&ee.push({id:"rotate",weight:er,label:Pt("menu_video_rotate"),ariaLabel:Pt("aria_label_menu_rotate"),onClick:z}),c&&ee.push({id:"report",weight:tr,label:Pt("menu_report"),ariaLabel:`${Pt("menu_report")}. ${Pt("aria_label_new_tab_alert")}`,onClick:q}),ee.push({id:"save-debug",weight:ir,label:p,onClick:W}),d&&ee.push({id:"save-trace",weight:rr,label:Pt("menu_save_debug"),onClick:G}),ee.push({id:"debug-info",weight:nr,label:Pt("menu_debug_overlay"),ariaLabel:Pt(f?"aria_label_menu_debug_overlay_disable":"aria_label_menu_debug_overlay_enable"),onClick:Q}),i(2,ee=[...ee,...h].sort(ur)))},i(26,r=R.features.copyVideoLink&&L.callbacks?.onCopyVideoLink),i(24,o=!!L.callbacks?.onCopyEmbedCodeClicked),i(22,u=R.features.videoRotate&&!F),i(19,d=R.features.saveTraceInfoToFile),i(20,p=R.features.saveDebugInfoToFile?Pt("menu_save_debug"):Pt("menu_copy_debug")),[x,$,ee,C,k,O,M,N,D,B,U,j,H,e=>{qi(e,H)},_,T,w,E,A,d,p,c,u,l,o,s,r,h,f,m,b,y,S,function(t){J.call(this,e,t)},function(e){te[e?"unshift":"push"]((()=>{x=e,i(0,x)}))}]}var gr=class extends Le{constructor(e){super(),Ce(this,e,mr,fr,h,{visible:1,supportLink:14,position:15,playerContainerRef:16,controlsContainerRef:17,menuElementRef:0,returnFocus:18},cr,[-1,-1])}},vr=class{constructor(e){this.value=e,this.next=null}},br=class{push(e){let t=new vr(e);this.top?(this.top.next=t,this.top=t):(this.top=t,this.bottom=t),this.size++,this.size>this.maxSize&&this.bottom&&(this.bottom=this.bottom.next)}getValuesFromBottom(){let e=[],t=this.bottom;for(;t;)e.push(t.value),t=t.next;return e}constructor(e){this.top=null,this.bottom=null,this.size=0,this.maxSize=e}};function yr(e){C(e,"svelte-1ssl9eb",".container.svelte-1ssl9eb{display:inline-block;width:120px;height:16px}canvas.svelte-1ssl9eb{transform:scale(1, -1);margin-top:2px}")}function Sr(e){let t,i;return{c(){t=P("div"),i=P("canvas"),U(i,"class","svelte-1ssl9eb"),U(t,"class","container svelte-1ssl9eb")},m(r,n){k(r,t,n),A(t,i),e[3](i)},p:o,i:o,o,d(i){i&&L(t),e[3](null)}}}function $r(e,t,i,r,n){0===n&&(n=1),e.fillStyle="#fff",e.fillRect(t,i,r,n)}function _r(e,t,i){let r,n,{values:a=[]}=t;return Q((()=>{i(0,r.width=120,r),i(0,r.height=16,r),i(2,n=r.getContext("2d"))})),e.$$set=e=>{"values"in e&&i(1,a=e.values)},e.$$.update=()=>{if(6&e.$$.dirty){let e="";if(n){let t=a[0];for(let e=1;e<a.length;e++)a[e]>t&&(t=a[e]);n.clearRect(0,0,120,16);let i=59;for(let r=a.length-1;r>=0;r--){let s=2*i,o=t>0?a[r]/t*16:0;$r(n,s,0,2,o),e=o+" "+e,i--}}}},[r,a,n,function(e){te[e?"unshift":"push"]((()=>{r=e,i(0,r)}))}]}var Tr=class extends Le{constructor(e){super(),Ce(this,e,_r,Sr,h,{values:1},yr)}};function wr(e){C(e,"svelte-k5ymwy",".container.svelte-k5ymwy.svelte-k5ymwy.svelte-k5ymwy{background:rgba(28, 28, 28, 0.8);border-radius:4px;color:#fff;left:20px;position:absolute;z-index:var(--debug-panel-z-index);top:45px;min-width:160px;font-size:10px;text-align:left}.container-mobile.svelte-k5ymwy.svelte-k5ymwy.svelte-k5ymwy{top:16px;left:16px}button.svelte-k5ymwy.svelte-k5ymwy.svelte-k5ymwy{position:absolute;right:5px;top:3px;cursor:pointer;outline:0;border:none;background-color:transparent;padding:0;color:#fff}.content.svelte-k5ymwy.svelte-k5ymwy.svelte-k5ymwy{padding:5px}.content.svelte-k5ymwy>div.svelte-k5ymwy>div.svelte-k5ymwy{display:inline-block;text-align:right;width:50px;padding:0 5px}")}function Er(e){let t,i,r,n,a,s=e[0].id+"";return{c(){t=P("div"),i=P("div"),i.textContent="Video id",r=I(),n=P("span"),a=M(s),U(i,"class","svelte-k5ymwy"),U(t,"class","svelte-k5ymwy")},m(e,s){k(e,t,s),A(t,i),A(t,r),A(t,n),A(n,a)},p(e,t){1&t&&s!==(s=e[0].id+"")&&j(a,s)},d(e){e&&L(t)}}}function xr(e){let t,i,r,n,a,s=e[0].vsid+"";return{c(){t=P("div"),i=P("div"),i.textContent="VSID",r=I(),n=P("span"),a=M(s),U(i,"class","svelte-k5ymwy"),U(t,"class","svelte-k5ymwy")},m(e,s){k(e,t,s),A(t,i),A(t,r),A(t,n),A(n,a)},p(e,t){1&t&&s!==(s=e[0].vsid+"")&&j(a,s)},d(e){e&&L(t)}}}function Ar(e){let t,i,r,n,a,s=e[0].provider+"";return{c(){t=P("div"),i=P("div"),i.textContent="Provider",r=I(),n=P("span"),a=M(s),U(i,"class","svelte-k5ymwy"),U(t,"class","svelte-k5ymwy")},m(e,s){k(e,t,s),A(t,i),A(t,r),A(t,n),A(n,a)},p(e,t){1&t&&s!==(s=e[0].provider+"")&&j(a,s)},d(e){e&&L(t)}}}function Cr(e){let t,i,r,n,a,s,o,l,u,c,d,p,h=(e[0].videoCodec||"")+"",f=e[0].hdr?"(HDR)":"",m=(e[0].audioCodec||"")+"",g=e[0].audioLanguage?`(${e[0].audioLanguage})`:"";return{c(){t=P("div"),i=P("div"),i.textContent="Streams",r=I(),n=P("span"),a=M("Video: "),s=M(h),o=I(),l=M(f),u=M("\n          &\n          Audio: "),c=M(m),d=I(),p=M(g),U(i,"class","svelte-k5ymwy"),U(t,"class","svelte-k5ymwy")},m(e,h){k(e,t,h),A(t,i),A(t,r),A(t,n),A(n,a),A(n,s),A(n,o),A(n,l),A(n,u),A(n,c),A(n,d),A(n,p)},p(e,t){1&t&&h!==(h=(e[0].videoCodec||"")+"")&&j(s,h),1&t&&f!==(f=e[0].hdr?"(HDR)":"")&&j(l,f),1&t&&m!==(m=(e[0].audioCodec||"")+"")&&j(c,m),1&t&&g!==(g=e[0].audioLanguage?`(${e[0].audioLanguage})`:"")&&j(p,g)},d(e){e&&L(t)}}}function kr(e){let t,i,r,n,a,s=e[0].viewport+"";return{c(){t=P("div"),i=P("div"),i.textContent="Viewport",r=I(),n=P("span"),a=M(s),U(i,"class","svelte-k5ymwy"),U(t,"class","svelte-k5ymwy")},m(e,s){k(e,t,s),A(t,i),A(t,r),A(t,n),A(n,a)},p(e,t){1&t&&s!==(s=e[0].viewport+"")&&j(a,s)},d(e){e&&L(t)}}}function Lr(e){let t,i,r,n,a,s=e[0].videoSize+"";return{c(){t=P("div"),i=P("div"),i.textContent="Video size",r=I(),n=P("span"),a=M(s),U(i,"class","svelte-k5ymwy"),U(t,"class","svelte-k5ymwy")},m(e,s){k(e,t,s),A(t,i),A(t,r),A(t,n),A(n,a)},p(e,t){1&t&&s!==(s=e[0].videoSize+"")&&j(a,s)},d(e){e&&L(t)}}}function Rr(e){let t,i,r,n,a,s=e[0].cdn+"";return{c(){t=P("div"),i=P("div"),i.textContent="CDN host",r=I(),n=P("span"),a=M(s),U(i,"class","svelte-k5ymwy"),U(t,"class","svelte-k5ymwy")},m(e,s){k(e,t,s),A(t,i),A(t,r),A(t,n),A(n,a)},p(e,t){1&t&&s!==(s=e[0].cdn+"")&&j(a,s)},d(e){e&&L(t)}}}function Pr(e){let t,i,r,n,a,s,o=e[0].volume+"";return{c(){t=P("div"),i=P("div"),i.textContent="Volume",r=I(),n=P("span"),a=M(o),s=M(" %"),U(i,"class","svelte-k5ymwy"),U(t,"class","svelte-k5ymwy")},m(e,o){k(e,t,o),A(t,i),A(t,r),A(t,n),A(n,a),A(n,s)},p(e,t){1&t&&o!==(o=e[0].volume+"")&&j(a,o)},d(e){e&&L(t)}}}function Or(e){let t,i,r,n,a,s,o=e[0].buffer.toFixed(2)+"";return{c(){t=P("div"),i=P("div"),i.textContent="Buffer",r=I(),n=P("span"),a=M(o),s=M(" s"),U(i,"class","svelte-k5ymwy"),U(t,"class","svelte-k5ymwy")},m(e,o){k(e,t,o),A(t,i),A(t,r),A(t,n),A(n,a),A(n,s)},p(e,t){1&t&&o!==(o=e[0].buffer.toFixed(2)+"")&&j(a,o)},d(e){e&&L(t)}}}function Mr(e){let t,i,r,n,a,s=[{value:e[0].currentVideoSegmentLength,title:"Video:"},{value:e[0].currentAudioSegmentLength,title:"Audio:"}].filter(Dr).map(Br).join(" & ")+"";return{c(){t=P("div"),i=P("div"),i.textContent="Segment",r=I(),n=P("span"),a=M(s),U(i,"class","svelte-k5ymwy"),U(t,"class","svelte-k5ymwy")},m(e,s){k(e,t,s),A(t,i),A(t,r),A(t,n),A(n,a)},p(e,t){1&t&&s!==(s=[{value:e[0].currentVideoSegmentLength,title:"Video:"},{value:e[0].currentAudioSegmentLength,title:"Audio:"}].filter(Dr).map(Br).join(" & ")+"")&&j(a,s)},d(e){e&&L(t)}}}function Ir(e){let t,i,r,n,a,s,o,l,u,c=e[0].speed.toFixed(2)+"";return n=new Tr({props:{values:e[5]}}),{c(){t=P("div"),i=P("div"),i.textContent="Network",r=I(),Ee(n.$$.fragment),a=I(),s=P("span"),o=M(c),l=M(" Kbps"),U(i,"class","svelte-k5ymwy"),U(t,"class","svelte-k5ymwy")},m(e,c){k(e,t,c),A(t,i),A(t,r),xe(n,t,null),A(t,a),A(t,s),A(s,o),A(s,l),u=!0},p(e,t){let i={};32&t&&(i.values=e[5]),n.$set(i),(!u||1&t)&&c!==(c=e[0].speed.toFixed(2)+"")&&j(o,c)},i(e){u||(be(n.$$.fragment,e),u=!0)},o(e){ye(n.$$.fragment,e),u=!1},d(e){e&&L(t),Ae(n)}}}function Nr(e){let t,i,r,n,a,s,o,l,u,c=e[0].bitrate.toFixed(2)+"";return n=new Tr({props:{values:e[6]}}),{c(){t=P("div"),i=P("div"),i.textContent="V bitrate",r=I(),Ee(n.$$.fragment),a=I(),s=P("span"),o=M(c),l=M(" Kbps"),U(i,"class","svelte-k5ymwy"),U(t,"class","svelte-k5ymwy")},m(e,c){k(e,t,c),A(t,i),A(t,r),xe(n,t,null),A(t,a),A(t,s),A(s,o),A(s,l),u=!0},p(e,t){let i={};64&t&&(i.values=e[6]),n.$set(i),(!u||1&t)&&c!==(c=e[0].bitrate.toFixed(2)+"")&&j(o,c)},i(e){u||(be(n.$$.fragment,e),u=!0)},o(e){ye(n.$$.fragment,e),u=!1},d(e){e&&L(t),Ae(n)}}}function Vr(e){let t,i,r,n,a,s,o,l,u,c,d,p,h,f,m,g,v,b,y,S,$,_,T,w,E,x,C,R,O,N,D,F,H,q,W,G,Q,Y,K,X,Z,J,ee=e[0].version+"",te=e[0].id&&Er(e),ie=e[0].vsid&&xr(e),re=e[0].provider&&Ar(e),ne=(e[0].videoCodec||e[0].audioCodec)&&Cr(e),ae=e[0].viewport&&kr(e),se=e[0].videoSize&&Lr(e),oe=e[0].cdn&&Rr(e),le=e[0].volume&&Pr(e),ue=e[0].buffer&&Or(e),ce=(e[0].currentVideoSegmentLength||e[0].currentAudioSegmentLength)&&Mr(e),de=e[0].speed&&Ir(e),pe=e[0].bitrate&&Nr(e);return W=new Tr({props:{values:e[4]}}),{c(){t=P("div"),i=P("button"),i.textContent="[x]",r=I(),n=P("div"),a=P("div"),s=P("div"),s.textContent="Version",o=I(),l=P("span"),u=M(ee),c=I(),te&&te.c(),d=I(),ie&&ie.c(),p=I(),re&&re.c(),h=I(),ne&&ne.c(),f=I(),ae&&ae.c(),m=I(),se&&se.c(),g=I(),oe&&oe.c(),v=I(),le&&le.c(),b=I(),ue&&ue.c(),y=I(),ce&&ce.c(),S=I(),$=P("div"),_=P("div"),_.textContent="Dropped",T=I(),w=P("span"),E=M(e[2]),x=M(" / "),C=M(e[1]),R=M(" frames"),O=I(),de&&de.c(),N=I(),pe&&pe.c(),D=I(),F=P("div"),H=P("div"),H.textContent="FPS",q=I(),Ee(W.$$.fragment),G=I(),Q=P("span"),Y=M(e[3]),U(i,"class","close svelte-k5ymwy"),U(i,"title","закрыть"),U(s,"class","svelte-k5ymwy"),U(a,"class","svelte-k5ymwy"),U(_,"class","svelte-k5ymwy"),U($,"class","svelte-k5ymwy"),U(H,"class","svelte-k5ymwy"),U(F,"class","svelte-k5ymwy"),U(n,"class","content svelte-k5ymwy"),U(t,"class","container svelte-k5ymwy"),U(t,"role","region"),U(t,"aria-label",K=Pt("aria_label_debug_panel")),z(t,"container-mobile",e[7])},m(L,P){k(L,t,P),A(t,i),A(t,r),A(t,n),A(n,a),A(a,s),A(a,o),A(a,l),A(l,u),A(n,c),te&&te.m(n,null),A(n,d),ie&&ie.m(n,null),A(n,p),re&&re.m(n,null),A(n,h),ne&&ne.m(n,null),A(n,f),ae&&ae.m(n,null),A(n,m),se&&se.m(n,null),A(n,g),oe&&oe.m(n,null),A(n,v),le&&le.m(n,null),A(n,b),ue&&ue.m(n,null),A(n,y),ce&&ce.m(n,null),A(n,S),A(n,$),A($,_),A($,T),A($,w),A(w,E),A(w,x),A(w,C),A(w,R),A(n,O),de&&de.m(n,null),A(n,N),pe&&pe.m(n,null),A(n,D),A(n,F),A(F,H),A(F,q),xe(W,F,null),A(F,G),A(F,Q),A(Q,Y),X=!0,Z||(J=V(i,"click",B(e[9])),Z=!0)},p(e,[i]){(!X||1&i)&&ee!==(ee=e[0].version+"")&&j(u,ee),e[0].id?te?te.p(e,i):(te=Er(e),te.c(),te.m(n,d)):te&&(te.d(1),te=null),e[0].vsid?ie?ie.p(e,i):(ie=xr(e),ie.c(),ie.m(n,p)):ie&&(ie.d(1),ie=null),e[0].provider?re?re.p(e,i):(re=Ar(e),re.c(),re.m(n,h)):re&&(re.d(1),re=null),e[0].videoCodec||e[0].audioCodec?ne?ne.p(e,i):(ne=Cr(e),ne.c(),ne.m(n,f)):ne&&(ne.d(1),ne=null),e[0].viewport?ae?ae.p(e,i):(ae=kr(e),ae.c(),ae.m(n,m)):ae&&(ae.d(1),ae=null),e[0].videoSize?se?se.p(e,i):(se=Lr(e),se.c(),se.m(n,g)):se&&(se.d(1),se=null),e[0].cdn?oe?oe.p(e,i):(oe=Rr(e),oe.c(),oe.m(n,v)):oe&&(oe.d(1),oe=null),e[0].volume?le?le.p(e,i):(le=Pr(e),le.c(),le.m(n,b)):le&&(le.d(1),le=null),e[0].buffer?ue?ue.p(e,i):(ue=Or(e),ue.c(),ue.m(n,y)):ue&&(ue.d(1),ue=null),e[0].currentVideoSegmentLength||e[0].currentAudioSegmentLength?ce?ce.p(e,i):(ce=Mr(e),ce.c(),ce.m(n,S)):ce&&(ce.d(1),ce=null),(!X||4&i)&&j(E,e[2]),(!X||2&i)&&j(C,e[1]),e[0].speed?de?(de.p(e,i),1&i&&be(de,1)):(de=Ir(e),de.c(),be(de,1),de.m(n,N)):de&&(ge(),ye(de,1,1,(()=>{de=null})),ve()),e[0].bitrate?pe?(pe.p(e,i),1&i&&be(pe,1)):(pe=Nr(e),pe.c(),be(pe,1),pe.m(n,D)):pe&&(ge(),ye(pe,1,1,(()=>{pe=null})),ve());let r={};16&i&&(r.values=e[4]),W.$set(r),(!X||8&i)&&j(Y,e[3]),(!X||128&i)&&z(t,"container-mobile",e[7])},i(e){X||(be(de),be(pe),be(W.$$.fragment,e),X=!0)},o(e){ye(de),ye(pe),ye(W.$$.fragment,e),X=!1},d(e){e&&L(t),te&&te.d(),ie&&ie.d(),re&&re.d(),ne&&ne.d(),ae&&ae.d(),se&&se.d(),oe&&oe.d(),le&&le.d(),ue&&ue.d(),ce&&ce.d(),de&&de.d(),pe&&pe.d(),Ae(W),Z=!1,J()}}}var Dr=({value:e})=>e,Br=({value:e,title:t})=>`${t} ${((e??0)/1e3).toFixed(2)} s`;function Ur(e,t,i){let r,n=et(),s=n.ui.debugPanelVisible,o=n.ui.isMobile;v(e,o,(e=>i(7,r=e)));let l=n.actions.internal.getDebugPanelData(),u=n.actions.internal.getVideoElement(),c=0,d=0,p=0,h=new br(60),f=new br(60),m=new br(60),g=[],b=[],y=[];return Q((()=>{a.safeStorage.set(Me,"true"),n.actions.internal.startLogging(),u&&(i(2,d=u.getVideoPlaybackQuality().droppedVideoFrames),i(1,c=u.getVideoPlaybackQuality().totalVideoFrames));let e,t=window.setInterval((()=>{i(0,l=n.actions.internal.getDebugPanelData())}),500);return u&&(e=window.setInterval((()=>{if(u){i(2,d=u.getVideoPlaybackQuality().droppedVideoFrames);let e=u.getVideoPlaybackQuality().totalVideoFrames;i(3,p=e-c),i(1,c=e),h.push(p),l.speed&&f.push(l.speed),l.bitrate&&m.push(l.bitrate),i(4,g=h.getValuesFromBottom()),i(5,b=f.getValuesFromBottom()),i(6,y=m.getValuesFromBottom())}}),1e3)),()=>{n.actions.internal.stopLogging(),clearInterval(t),e&&clearInterval(e)}})),[l,c,d,p,g,b,y,r,o,()=>{a.safeStorage.remove(Me),s.set(!1)}]}var Fr=class extends Le{constructor(e){super(),Ce(this,e,Ur,Vr,h,{},wr)}};function jr(e){C(e,"svelte-1ome55p",".close.svelte-1ome55p{cursor:pointer;opacity:0.8;transition:opacity 0.2s;position:relative;width:16px;height:16px}.close.svelte-1ome55p:hover{opacity:1}.close.svelte-1ome55p:before,.close.svelte-1ome55p:after{position:absolute;left:8px;content:' ';height:16px;width:2px;background-color:var(--white)}.close.svelte-1ome55p:before{transform:rotate(45deg)}.close.svelte-1ome55p:after{transform:rotate(-45deg)}")}function Hr(e){let t,i,r;return{c(){t=P("div"),U(t,"class","close svelte-1ome55p")},m(n,a){k(n,t,a),i||(r=V(t,"click",B(e[0])),i=!0)},p:o,i:o,o,d(e){e&&L(t),i=!1,r()}}}function zr(e){return[function(t){J.call(this,e,t)}]}var qr=class extends Le{constructor(e){super(),Ce(this,e,zr,Hr,h,{},jr)}};function Wr(e){C(e,"svelte-8jhsry",".timer.svelte-8jhsry{border-radius:50%;transition:background .2s;background:rgba(31, 31, 31, .65);width:50px;height:50px;display:flex;align-items:center;justify-content:space-around}.timer.svelte-8jhsry:hover{background:rgba(31, 31, 31, .85)\n  }.timer-canvas.svelte-8jhsry{width:50px;height:50px;position:absolute}.timer-play-icon.svelte-8jhsry{width:22px;height:26px}")}function Gr(e){let t,i,r,n,a,s,l;return{c(){t=P("div"),i=P("canvas"),r=I(),n=O("svg"),a=O("g"),s=O("g"),l=O("path"),U(i,"class","timer-canvas svelte-8jhsry"),U(i,"width","100"),U(i,"height","100"),U(l,"class","_play"),U(l,"d","m8.13340613 5.10548415 10.49681277 6.24354325c.3559987.2117494.472936.6720001.2611866 1.0279989-.0638111.1072809-.1533894.1969388-.2606135.2608453l-10.4968128 6.256187c-.35581027.2120659-.81616483.095538-1.02823068-.2602722-.06921066-.1161237-.10574852-.2487949-.10574852-.3839792v-12.49973035c0-.41421357.33578644-.75.75-.75.13495801 0 .26741554.03641567.38340613.1054073z"),U(l,"fill","#fff"),U(s,"fill-rule","nonzero"),U(a,"fill","none"),U(a,"fill-rule","evenodd"),U(n,"class","timer-play-icon svelte-8jhsry"),U(n,"viewBox","0 0 24 24"),U(n,"xmlns","http://www.w3.org/2000/svg"),U(t,"class","timer svelte-8jhsry")},m(o,u){k(o,t,u),A(t,i),e[3](i),A(t,r),A(t,n),A(n,a),A(a,s),A(s,l)},p:o,i:o,o,d(i){i&&L(t),e[3](null)}}}function Qr(e,t,i){let r,n,s,o,l,u,{isRunning:c=!0}=t,{onTimerEnded:d=a.noop}=t,p=()=>{c&&(o&&u&&(s=Date.now()-5e3*u,o=!1),u=(Date.now()-s)/5e3,u<1?(n?.clearRect(0,0,100,100),n?.beginPath(),n?.arc(50,50,47,-Math.PI/2,-Math.PI/2+2*Math.PI*u),n?.stroke(),l=requestAnimationFrame(p)):d())};return Q((()=>{if(n=r.getContext("2d"),n)return n.lineWidth=6,n.lineCap="round",n.strokeStyle="#fff",s=Date.now(),()=>{cancelAnimationFrame(l)}})),e.$$set=e=>{"isRunning"in e&&i(1,c=e.isRunning),"onTimerEnded"in e&&i(2,d=e.onTimerEnded)},e.$$.update=()=>{2&e.$$.dirty&&(c?l=requestAnimationFrame(p):o=!0)},[r,c,d,function(e){te[e?"unshift":"push"]((()=>{r=e,i(0,r)}))}]}var Yr=class extends Le{constructor(e){super(),Ce(this,e,Qr,Gr,h,{isRunning:1,onTimerEnded:2},Wr)}};function Kr(e){C(e,"svelte-149n6j1",".overlay.svelte-149n6j1{width:100%;height:100%;background:rgba(0, 0, 0, 0.72);position:absolute}.next-video.svelte-149n6j1{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex;width:362px;flex-direction:column}.top.svelte-149n6j1{display:flex;justify-content:space-between}.caption.svelte-149n6j1{font-size:11px;font-weight:bold;color:var(--white);text-transform:uppercase;opacity:0.8}.row.svelte-149n6j1{height:102px;background:rgba(48, 48, 48, .8);cursor:pointer;margin-top:6px;display:flex;flex-direction:row;width:100%}.column.svelte-149n6j1{display:flex;flex-direction:column;flex-basis:50%}.thumb.svelte-149n6j1{width:100%;height:100%;background:no-repeat center;background-size:cover;display:flex;align-items:center;position:relative;justify-content:space-around}.thumb-overlay.svelte-149n6j1{width:100%;height:100%;background:var(--black);opacity:0.3;position:absolute}.title.svelte-149n6j1{padding:10px 16px;font-size:12px;font-weight:bold;color:var(--white);line-height:1.6;max-height:52px;overflow:hidden}")}function Xr(e){let t,i,r,n,a,s,o,l,u,c,d,p,h,f,m,g,v,b,y,S,$,_;return o=new qr({}),o.$on("click",e[6]),f=new Yr({props:{isRunning:e[2],onTimerEnded:e[5]}}),{c(){t=P("div"),i=I(),r=P("div"),n=P("div"),a=P("div"),a.textContent=`${Pt("end_screen_next_video")}`,s=I(),Ee(o.$$.fragment),l=I(),u=P("div"),c=P("div"),d=P("div"),p=P("div"),h=I(),Ee(f.$$.fragment),g=I(),v=P("div"),b=P("div"),y=M(e[0]),U(t,"class","overlay svelte-149n6j1"),U(a,"class","caption svelte-149n6j1"),U(n,"class","top svelte-149n6j1"),U(p,"class","thumb-overlay svelte-149n6j1"),U(d,"class","thumb svelte-149n6j1"),U(d,"style",m=`background-image: url('${e[1]}')`),U(c,"class","column svelte-149n6j1"),U(b,"class","title svelte-149n6j1"),U(v,"class","column svelte-149n6j1"),U(u,"class","row svelte-149n6j1"),U(r,"class","next-video svelte-149n6j1")},m(m,T){k(m,t,T),k(m,i,T),k(m,r,T),A(r,n),A(n,a),A(n,s),xe(o,n,null),A(r,l),A(r,u),A(u,c),A(c,d),A(d,p),A(d,h),xe(f,d,null),A(u,g),A(u,v),A(v,b),A(b,y),S=!0,$||(_=V(u,"click",e[4]),$=!0)},p(e,[t]){let i={};4&t&&(i.isRunning=e[2]),f.$set(i),(!S||2&t&&m!==(m=`background-image: url('${e[1]}')`))&&U(d,"style",m),(!S||1&t)&&j(y,e[0])},i(e){S||(be(o.$$.fragment,e),be(f.$$.fragment,e),S=!0)},o(e){ye(o.$$.fragment,e),ye(f.$$.fragment,e),S=!1},d(e){e&&(L(t),L(i),L(r)),Ae(o),Ae(f),$=!1,_()}}}function Zr(e,t,i){let r,{title:n}=t,{thumb:a}=t,{clickCloseIcon:s}=t,o=et(),l=o.ui.timerNextVideoRunning$;v(e,l,(e=>i(2,r=e)));let u=o.actions.internal.nextVideoClick,c=o.actions.internal.nextVideoAnnouncementClick,d=o.actions.internal.nextVideoAnnouncementAuto,p=o.actions.internal.nextVideoAnnouncementCancel;return e.$$set=e=>{"title"in e&&i(0,n=e.title),"thumb"in e&&i(1,a=e.thumb),"clickCloseIcon"in e&&i(7,s=e.clickCloseIcon)},[n,a,r,l,()=>{u(!1),c()},()=>{u(!1),d()},()=>{s(),p()},s]}var Jr=class extends Le{constructor(e){super(),Ce(this,e,Zr,Xr,h,{title:0,thumb:1,clickCloseIcon:7},Kr)}},en=(e,t)=>Math.min(+(e+t).toFixed(2),1),tn=(e,t)=>Math.max(+(e-t).toFixed(2),0),rn=(e,t,i)=>{let r=en(t,i);t<1&&e.actions.internal.setVolume(r)},nn=(e,t,i)=>{let r=tn(t,i);t>0&&e.actions.internal.setVolume(r)},an=({isAudioDisabled:e,audioDisabledHintCallback:t,isAudioAvailable:i,audioIsNotExistHintCallback:r})=>e?(t?.(),!1):!!i||(r?.(),!1);function sn(e){C(e,"svelte-10kkmxz",".keyboard-controls.svelte-10kkmxz{position:absolute;left:0;right:0;top:0;bottom:0}")}function on(e){let t,i,r,n,a,s=e[26].default,o=b(s,e,e[25],null);return{c(){t=P("div"),o&&o.c(),U(t,"class","keyboard-controls svelte-10kkmxz"),U(t,"tabindex","-1"),U(t,"role","region"),U(t,"aria-label",i=Pt("aria_label_video_player"))},m(i,s){k(i,t,s),o&&o.m(t,null),e[27](t),r=!0,n||(a=[V(t,"keyup",e[17]),V(t,"keydown",e[16])],n=!0)},p(e,t){o&&o.p&&(!r||33554432&t[0])&&$(o,s,e,e[25],r?S(s,e[25],t,null):_(e[25]),null)},i(e){r||(be(o,e),r=!0)},o(e){ye(o,e),r=!1},d(i){i&&L(t),o&&o.d(i),e[27](null),n=!1,d(a)}}}function ln(e,t,i){let r,o,l,u,c,d,p,h,f,m,g,b,y,S,$,{$$slots:_={},$$scope:T}=t,{isAds:w}=t,{hideContextMenu:E}=t,{toggleFullscreen:x}=t,{showHotKeyHelpers:A}=t,{showKeyMap:C}=t,{fakePlayButtonHandler:k}=t,L=et(),R=Oe(),P=L.getLogger().createComponentLog("KeyboardControls component"),O=L.state.playbackState$;v(e,O,(e=>i(31,o=e)));let M=L.ads.playbackState;v(e,M,(e=>i(30,r=e)));let I=L.state.positionExact$;v(e,I,(e=>i(41,b=e)));let N=L.state.duration$;v(e,N,(e=>i(40,g=e)));let V=L.state.volume$;v(e,V,(e=>i(44,$=e)));let D=L.ui.controls.disabledControls$;v(e,D,(e=>i(39,m=e)));let B=L.state.muted$;v(e,B,(e=>i(34,c=e)));let U=L.state.currentSubtitle$;v(e,U,(e=>i(33,u=e)));let F=L.state.currentPlaybackRate$;v(e,F,(e=>i(42,y=e)));let j=L.state.availablePlaybackRates$;v(e,j,(e=>i(43,S=e)));let H=L.ui.contextMenu.openedByHotKey$,z=L.ui.contextMenu.lastActiveElem$,q=L.ui.contextMenu.visible$,W=L.ui.contextMenu.position$,G=L.state.isEnded$;v(e,G,(e=>i(36,p=e)));let Q=L.ui.overlayContainer$;v(e,Q,(e=>i(32,l=e)));let Y=L.callbacks?.onAudioDoesNotExistHint,K=L.callbacks?.onAudioDisabledHint,X=L.state.isAudioAvailable$;v(e,X,(e=>i(35,d=e)));let Z=L.state.isAudioDisabled,J=L.state.isInteractiveTime$;v(e,J,(e=>i(38,f=e)));let{showInteractiveTimeIndicatorTooltip$:ee}=tt();v(e,ee,(e=>i(37,h=e)));let ie,re=0,ne=!0,ae=e=>(e!==ne&&(ne=e,re=0),re+=1,(R.controls.seekStepKeyboard+R.controls.seekStepKeyboard*re)/1e3);return e.$$set=e=>{"isAds"in e&&i(18,w=e.isAds),"hideContextMenu"in e&&i(19,E=e.hideContextMenu),"toggleFullscreen"in e&&i(20,x=e.toggleFullscreen),"showHotKeyHelpers"in e&&i(21,A=e.showHotKeyHelpers),"showKeyMap"in e&&i(22,C=e.showKeyMap),"fakePlayButtonHandler"in e&&i(23,k=e.fakePlayButtonHandler),"$$scope"in e&&i(25,T=e.$$scope)},[ie,O,M,I,N,V,D,B,U,F,j,G,Q,X,J,ee,e=>{let t=e.target,i=t?.getAttribute("role")?.includes("menuitem"),v=t.classList.contains("btn"),_=e.code;if(v&&"Space"===_)return;let T=Ve.has(_);if(i&&T)return;let O=!Ne.has(_);if(e.ctrlKey&&O||e.altKey&&O||e.metaKey)return;let M=i&&"Escape"===_;De.has(_)||M||E();let I=o===n.PlaybackState.PLAYING||o===n.PlaybackState.PAUSED,N=w&&("paused"===r||"playing"===r),V=!N&&!m.has("TIMELINE");if(I||N)switch(P({message:`key down, code: ${_}`}),_){case"KeyJ":case"ArrowLeft":if(!V)break;if(e.ctrlKey||e.altKey){let t=L.actions.internal.getPrevEpisode();L.actions.internal.seekToPrevEpisode(t),t&&A({type:"EPISODE_PREV",text:t.text}),e.preventDefault()}else{let t=e.shiftKey?ae(!1):R.controls.seekStepKeyboard/1e3,i=Math.max(b-t,0);b>0&&(L.actions.internal.seekTime(i,s.SeekAction.DOUBLE_TAP),A({type:"BACKWARD_SEEK",text:t.toString()}),e.preventDefault())}break;case"KeyL":case"ArrowRight":if(!V)break;if(e.ctrlKey||e.altKey){let t=L.actions.internal.getNextEpisode();L.actions.internal.seekToNextEpisode(t),t&&A({type:"EPISODE_NEXT",text:t.text}),e.preventDefault()}else{let t=e.shiftKey?ae(!0):R.controls.seekStepKeyboard/1e3,i=Math.min(b+t,g);Math.round(b)<Math.round(g)&&(L.actions.internal.seekTime(i,s.SeekAction.DOUBLE_TAP),A({type:"FORWARD_SEEK",text:t.toString()}),e.preventDefault())}break;case"ArrowUp":if(an({isAudioDisabled:Z,audioDisabledHintCallback:K,isAudioAvailable:d,audioIsNotExistHintCallback:Y})){let e=$,t=R.controls.volumeStepKeyboard,i=e<=1;if(rn(L,e,t),i){let i=Math.round(100*en(e,t)).toString();A({type:"VOLUME",t:{key:"hotkey_helper_current_volume",value:i}})}}e.preventDefault();break;case"ArrowDown":if(an({isAudioDisabled:Z,audioDisabledHintCallback:K,isAudioAvailable:d,audioIsNotExistHintCallback:Y})){let e=$,t=R.controls.volumeStepKeyboard,i=e>=0;if(nn(L,e,t),i){let i=Math.round(100*tn(e,t)).toString();A({type:"VOLUME",t:{key:"hotkey_helper_current_volume",value:i}})}}e.preventDefault();break;case"Comma":if(e.shiftKey){L.actions.internal.decrementPlaybackRate();let t=S.find((e=>e.value===y));A({type:"RATE_DOWN",text:t?.displayValue}),e.preventDefault()}else{if(N||o!==n.PlaybackState.PAUSED)break;let t=Math.max(b-R.controls.seekStepFrame/1e3,0);b>0&&(A({type:"BACKWARD_SEEK"}),L.actions.internal.clearDelayedBufferingCheckTimeout(),L.actions.internal.seekTime(t,s.SeekAction.DOUBLE_TAP),e.preventDefault())}break;case"Period":if(e.shiftKey){L.actions.internal.incrementPlaybackRate();let t=S.find((e=>e.value===y));A({type:"RATE_UP",text:t?.displayValue}),e.preventDefault()}else{if(N||o!==n.PlaybackState.PAUSED)break;let t=Math.min(b+R.controls.seekStepFrame/1e3,g);b<g&&(A({type:"FORWARD_SEEK"}),L.actions.internal.clearDelayedBufferingCheckTimeout(),L.actions.internal.seekTime(t,s.SeekAction.DOUBLE_TAP),e.preventDefault())}break;case"KeyK":case"Space":if(!m.has("PLAY_BUTTON"))if(f&&h&&ee.set(!1),k)k();else{L.actions.internal.togglePlay();let e="PLAY";o===n.PlaybackState.PAUSED?e="PAUSE":p&&(e="REPLAY"),A({type:e})}e.preventDefault();break;case"KeyM":an({isAudioDisabled:Z,audioDisabledHintCallback:K,isAudioAvailable:d,audioIsNotExistHintCallback:Y})&&(A({type:c?"VOLUME":"MUTE"}),L.actions.internal.toggleMuted()),e.preventDefault();break;case"KeyF":x(),e.preventDefault();break;case"KeyC":L.actions.internal.toggleSubtitle(),"off"!==u.value?A({type:"SUBTITLES_ON",text:u?.displayValue}):A({type:"SUBTITLES_OFF"}),e.preventDefault();break;case"KeyI":L.actions.internal.togglePictureInPicture(),e.preventDefault();break;case"Digit1":case"Numpad1":if(e.shiftKey){let i=(e=>{if(!e)return{top:0,left:0};let t=e.getBoundingClientRect(),i=t.left+8;return{bottom:t.bottom+-58,left:i}})(l);W.set(i),z.set(t),H.set(!0),q.set(!0),e.preventDefault();break}A(),L.actions.internal.seekToPercent(.1,s.SeekAction.DOUBLE_TAP),e.preventDefault();break;case"Digit2":case"Numpad2":A(),L.actions.internal.seekToPercent(.2,s.SeekAction.DOUBLE_TAP),e.preventDefault();break;case"Digit3":case"Numpad3":A(),L.actions.internal.seekToPercent(.3,s.SeekAction.DOUBLE_TAP),e.preventDefault();break;case"Digit4":case"Numpad4":A(),L.actions.internal.seekToPercent(.4,s.SeekAction.DOUBLE_TAP),e.preventDefault();break;case"Digit5":case"Numpad5":A(),L.actions.internal.seekToPercent(.5,s.SeekAction.DOUBLE_TAP),e.preventDefault();break;case"Digit6":case"Numpad6":A(),L.actions.internal.seekToPercent(.6,s.SeekAction.DOUBLE_TAP),e.preventDefault();break;case"Digit7":case"Numpad7":A(),L.actions.internal.seekToPercent(.7,s.SeekAction.DOUBLE_TAP),e.preventDefault();break;case"Digit8":case"Numpad8":A(),L.actions.internal.seekToPercent(.8,s.SeekAction.DOUBLE_TAP),e.preventDefault();break;case"Digit9":case"Numpad9":A(),L.actions.internal.seekToPercent(.9,s.SeekAction.DOUBLE_TAP),e.preventDefault();break;case"Digit0":case"Numpad0":A(),L.actions.internal.seekToPercent(0,s.SeekAction.DOUBLE_TAP),e.preventDefault();break;case"Slash":e.shiftKey&&R.features.hotKeyMapModal&&(C(),e.preventDefault());break;case"ShiftLeft":case"ShiftRight":e.preventDefault();break;case"Tab":case"Escape":case"Enter":break;default:(0,a.checkNever)(_)}},e=>{let t=e.code;if(!(e.ctrlKey||e.altKey||e.metaKey)&&(o===n.PlaybackState.PLAYING||o===n.PlaybackState.PAUSED||w&&("paused"===r||"playing"===r)))switch(t){case"ShiftLeft":case"ShiftRight":re=0}},w,E,x,A,C,k,()=>ie?.focus(),T,_,function(e){te[e?"unshift":"push"]((()=>{ie=e,i(0,ie)}))}]}var un=class extends Le{get focus(){return this.$$.ctx[24]}constructor(e){super(),Ce(this,e,ln,on,h,{isAds:18,hideContextMenu:19,toggleFullscreen:20,showHotKeyHelpers:21,showKeyMap:22,fakePlayButtonHandler:23,focus:24},sn,[-1,-1])}};function cn(e){C(e,"svelte-8nkw5s",".container.svelte-8nkw5s.svelte-8nkw5s{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);pointer-events:none;display:flex}.dot.svelte-8nkw5s.svelte-8nkw5s:nth-child(1){animation-delay:calc(0 * 180ms)}.dot.svelte-8nkw5s.svelte-8nkw5s:nth-child(2){animation-delay:calc(1 * 180ms)}.dot.svelte-8nkw5s.svelte-8nkw5s:nth-child(3){animation-delay:calc(2 * 180ms)}@keyframes svelte-8nkw5s-dot_animation{0%{opacity:0.2}30%{opacity:1}100%{opacity:0.2}}.dot.svelte-8nkw5s.svelte-8nkw5s{border-radius:4px;width:8px;height:8px;background:var(--white);animation-duration:750ms;animation-name:svelte-8nkw5s-dot_animation;animation-iteration-count:infinite}.dot.svelte-8nkw5s+.dot.svelte-8nkw5s{margin-left:4px}")}function dn(e){let t,i,r,n,a,s;return{c(){t=P("div"),i=P("div"),r=I(),n=P("div"),a=I(),s=P("div"),U(i,"class","dot svelte-8nkw5s"),U(n,"class","dot svelte-8nkw5s"),U(s,"class","dot svelte-8nkw5s"),U(t,"class","container svelte-8nkw5s"),U(t,"style",e[0])},m(e,o){k(e,t,o),A(t,i),A(t,r),A(t,n),A(t,a),A(t,s)},p(e,[i]){1&i&&U(t,"style",e[0])},i:o,o,d(e){e&&L(t)}}}function pn(e,t,i){let{style:r=""}=t;return e.$$set=e=>{"style"in e&&i(0,r=e.style)},[r]}var hn=class extends Le{constructor(e){super(),Ce(this,e,pn,dn,h,{style:0},cn)}};function fn(e){let t,i,r,n,a,s,o,u,c,d,p,h,f,m,g=e[2].default,v=b(g,e,e[1],null),y=[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"cross-icon"},{role:"img"},e[0]],T={};for(let e=0;e<y.length;e+=1)T=l(T,y[e]);return{c(){t=O("svg"),v&&v.c(),i=O("g"),r=O("path"),n=O("path"),a=O("defs"),s=O("filter"),o=O("feFlood"),u=O("feColorMatrix"),c=O("feOffset"),d=O("feGaussianBlur"),p=O("feColorMatrix"),h=O("feBlend"),f=O("feBlend"),U(r,"fill","#fff"),U(r,"d","M7.536 6.264a.9.9 0 0 0-1.272 1.272L10.727 12l-4.463 4.464a.9.9 0 0 0 1.272 1.272L12 13.273l4.464 4.463a.9.9 0 1 0 1.272-1.272L13.273 12l4.463-4.464a.9.9 0 1 0-1.272-1.272L12 10.727z"),U(n,"stroke","#000"),U(n,"stroke-opacity",".12"),U(n,"stroke-width",".5"),U(n,"d","M7.713 6.087a1.15 1.15 0 1 0-1.626 1.626L10.374 12l-4.287 4.287a1.15 1.15 0 0 0 1.626 1.626L12 13.626l4.287 4.287a1.15 1.15 0 0 0 1.626-1.626L13.626 12l4.287-4.287a1.15 1.15 0 1 0-1.626-1.626L12 10.374z"),U(i,"filter","url(#a)"),U(o,"flood-opacity","0"),U(o,"result","BackgroundImageFix"),U(u,"in","SourceAlpha"),U(u,"result","hardAlpha"),U(u,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"),U(d,"stdDeviation","2.5"),U(p,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16 0"),U(h,"in2","BackgroundImageFix"),U(h,"result","effect1_dropShadow_2422_111980"),U(f,"in","SourceGraphic"),U(f,"in2","effect1_dropShadow_2422_111980"),U(f,"result","shape"),U(s,"id","a"),U(s,"width","23"),U(s,"height","23"),U(s,"x",".5"),U(s,"y",".5"),U(s,"color-interpolation-filters","sRGB"),U(s,"filterUnits","userSpaceOnUse"),F(t,T)},m(e,l){k(e,t,l),v&&v.m(t,null),A(t,i),A(i,r),A(i,n),A(t,a),A(a,s),A(s,o),A(s,u),A(s,c),A(s,d),A(s,p),A(s,h),A(s,f),m=!0},p(e,[i]){v&&v.p&&(!m||2&i)&&$(v,g,e,e[1],m?S(g,e[1],i,null):_(e[1]),null),F(t,T=_e(y,[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"cross-icon"},{role:"img"},1&i&&e[0]]))},i(e){m||(be(v,e),m=!0)},o(e){ye(v,e),m=!1},d(e){e&&L(t),v&&v.d(e)}}}function mn(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var gn=class extends Le{constructor(e){super(),Ce(this,e,mn,fn,h,{})}};function vn(e){C(e,"svelte-wr0kwr",".btn.svelte-wr0kwr{padding:8px;margin:0;height:var(--controls-height);display:flex;flex-direction:row;align-items:center;justify-content:center}.w-max.svelte-wr0kwr{width:100%}.btn--live.svelte-wr0kwr{padding:10px 4px}.btn-jc-l.svelte-wr0kwr{justify-content:left}.btn-m.svelte-wr0kwr{position:absolute;left:12px;top:50%;transform:translateY(-50%);height:44px;width:44px;border-radius:12px;background-color:rgba(0, 0, 0, 0.56);transition:opacity var(--controls-transition-duration);display:flex;align-items:center;justify-content:center}.btn-m--play.svelte-wr0kwr{width:var(--big-play-size);height:var(--big-play-size);display:flex;align-items:center;justify-content:center;position:relative;padding:16px}.btn-m--play.svelte-wr0kwr svg{transform:scale(2)}.btn-m--prev.svelte-wr0kwr,.btn-m--next.svelte-wr0kwr{position:absolute;width:50px;height:50px}.btn-m--prev.svelte-wr0kwr{right:calc(100% + 35px)}.btn-m--next.svelte-wr0kwr{left:calc(100% + 35px)}.btn.svelte-wr0kwr:disabled{cursor:default;pointer-events:none}.btn.svelte-wr0kwr:not(.btn-full-opacity):disabled{opacity:0.4}.btn.svelte-wr0kwr:not(:disabled):hover{opacity:0.8}.pr-0.svelte-wr0kwr{padding-right:0}.pl-0.svelte-wr0kwr{padding-left:0}")}function bn(e){let t,i,r,n,s,o,l,u,c,h,f,m,g=e[14].default,v=b(g,e,e[13],null);return{c(){t=P("button"),v&&v.c(),U(t,"class",i="btn "+e[1]+" svelte-wr0kwr"),U(t,"style",r=e[2]||null),t.disabled=n=e[3]??null,U(t,"aria-hidden",s=e[5]??null),U(t,"aria-label",o=e[6]??null),U(t,"aria-keyshortcuts",l=e[7]??null),U(t,"aria-expanded",u=e[8]??null),U(t,"data-testid",c=e[4]??null),U(t,"tabindex",e[9])},m(i,r){k(i,t,r),v&&v.m(t,null),e[16](t),h=!0,f||(m=[V(t,"pointerdown",B(e[15])),V(t,"click",B((function(){p(e[10]===a.noop?null:e[10])&&(e[10]===a.noop?null:e[10]).apply(this,arguments)}))),V(t,"focus",D((function(){p(e[11]===a.noop?null:e[11])&&(e[11]===a.noop?null:e[11]).apply(this,arguments)}))),V(t,"blur",D((function(){p(e[12]===a.noop?null:e[12])&&(e[12]===a.noop?null:e[12]).apply(this,arguments)})))],f=!0)},p(a,[d]){e=a,v&&v.p&&(!h||8192&d)&&$(v,g,e,e[13],h?S(g,e[13],d,null):_(e[13]),null),(!h||2&d&&i!==(i="btn "+e[1]+" svelte-wr0kwr"))&&U(t,"class",i),(!h||4&d&&r!==(r=e[2]||null))&&U(t,"style",r),(!h||8&d&&n!==(n=e[3]??null))&&(t.disabled=n),(!h||32&d&&s!==(s=e[5]??null))&&U(t,"aria-hidden",s),(!h||64&d&&o!==(o=e[6]??null))&&U(t,"aria-label",o),(!h||128&d&&l!==(l=e[7]??null))&&U(t,"aria-keyshortcuts",l),(!h||256&d&&u!==(u=e[8]??null))&&U(t,"aria-expanded",u),(!h||16&d&&c!==(c=e[4]??null))&&U(t,"data-testid",c),(!h||512&d)&&U(t,"tabindex",e[9])},i(e){h||(be(v,e),h=!0)},o(e){ye(v,e),h=!1},d(i){i&&L(t),v&&v.d(i),e[16](null),f=!1,d(m)}}}function yn(e,t,i){let{$$slots:r={},$$scope:n}=t,{className:s=""}=t,{style:o=""}=t,{disabled:l}=t,{testId:u}=t,{ariaHidden:c}=t,{ariaLabel:d}=t,{ref:p}=t,{ariaKeyShortCut:h}=t,{ariaExpanded:f}=t,{tabIndex:m=0}=t,{click:g=a.noop}=t,{focus:v=a.noop}=t,{blur:b=a.noop}=t;return e.$$set=e=>{"className"in e&&i(1,s=e.className),"style"in e&&i(2,o=e.style),"disabled"in e&&i(3,l=e.disabled),"testId"in e&&i(4,u=e.testId),"ariaHidden"in e&&i(5,c=e.ariaHidden),"ariaLabel"in e&&i(6,d=e.ariaLabel),"ref"in e&&i(0,p=e.ref),"ariaKeyShortCut"in e&&i(7,h=e.ariaKeyShortCut),"ariaExpanded"in e&&i(8,f=e.ariaExpanded),"tabIndex"in e&&i(9,m=e.tabIndex),"click"in e&&i(10,g=e.click),"focus"in e&&i(11,v=e.focus),"blur"in e&&i(12,b=e.blur),"$$scope"in e&&i(13,n=e.$$scope)},[p,s,o,l,u,c,d,h,f,m,g,v,b,n,r,function(t){J.call(this,e,t)},function(e){te[e?"unshift":"push"]((()=>{p=e,i(0,p)}))}]}var Sn=class extends Le{constructor(e){super(),Ce(this,e,yn,bn,h,{className:1,style:2,disabled:3,testId:4,ariaHidden:5,ariaLabel:6,ref:0,ariaKeyShortCut:7,ariaExpanded:8,tabIndex:9,click:10,focus:11,blur:12},vn)}};function $n(e){C(e,"svelte-1witlsj",".modal-overlay.svelte-1witlsj{position:absolute;top:0;bottom:0;left:0;right:0;background:transparent;display:flex;align-items:center;justify-content:center}.modal-container.svelte-1witlsj{display:flex;flex-direction:column;width:calc(100% - 32px);max-width:600px;height:calc(100% - 24px);max-height:490px;background:var(--mobile-settings-bg);color:var(--white);border-radius:8px}.modal-header.svelte-1witlsj{box-sizing:border-box;display:flex;justify-content:space-between;align-items:start;height:40px;padding:8px 10px;border-bottom:1px solid var(--white-alpha-24)}.modal-title.svelte-1witlsj{margin:3px 0 0 6px;color:var(--white);font-feature-settings:'clig' off, 'liga' off;font-size:13px;font-style:normal;font-weight:600;line-height:16px}.modal-scroll.svelte-1witlsj{overflow-y:auto;overflow-x:hidden;margin:8px 4px 8px 0;height:100%}.modal-scroll.svelte-1witlsj::-webkit-scrollbar{width:8px}.modal-scroll.svelte-1witlsj::-webkit-scrollbar-track{box-shadow:none;background-color:transparent;border-radius:4px;margin-right:2px}.modal-scroll.svelte-1witlsj::-webkit-scrollbar-thumb{min-height:40px;border-radius:5px;background-color:#666;border:1px solid transparent;background-clip:padding-box}.modal-scroll.svelte-1witlsj::-webkit-scrollbar-thumb:hover{background-color:#777}.modal-main.svelte-1witlsj{margin:-8px -4px 0 0}")}function _n(e){let t,i,r,n,a,s=e[2]&&Tn(e);return{c(){t=P("div"),i=P("h3"),r=M(e[3]),n=I(),s&&s.c(),U(i,"class","modal-title svelte-1witlsj"),U(t,"class","modal-header svelte-1witlsj")},m(e,o){k(e,t,o),A(t,i),A(i,r),A(t,n),s&&s.m(t,null),a=!0},p(e,i){(!a||8&i)&&j(r,e[3]),e[2]?s?(s.p(e,i),4&i&&be(s,1)):(s=Tn(e),s.c(),be(s,1),s.m(t,null)):s&&(ge(),ye(s,1,1,(()=>{s=null})),ve())},i(e){a||(be(s),a=!0)},o(e){ye(s),a=!1},d(e){e&&L(t),s&&s.d()}}}function Tn(e){let t,i;return t=new Sn({props:{click:e[0],testId:"close-modal",style:"padding: 0; height: 24px; width: 24px",ariaLabel:Pt("hotkey_map_modal_close_btn_text"),$$slots:{default:[wn]},$$scope:{ctx:e}}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};1&i&&(r.click=e[0]),32&i&&(r.$$scope={dirty:i,ctx:e}),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function wn(e){let t,i;return t=new gn({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function En(e){let t,i,r,n,a,s,o=e[1]&&_n(e),l=e[4].default,u=b(l,e,e[5],null);return{c(){t=P("div"),i=P("div"),o&&o.c(),r=I(),n=P("div"),a=P("div"),u&&u.c(),U(a,"class","modal-main svelte-1witlsj"),U(n,"class","modal-scroll svelte-1witlsj"),U(i,"class","modal-container svelte-1witlsj"),U(t,"class","modal-overlay svelte-1witlsj")},m(e,l){k(e,t,l),A(t,i),o&&o.m(i,null),A(i,r),A(i,n),A(n,a),u&&u.m(a,null),s=!0},p(e,[t]){e[1]?o?(o.p(e,t),2&t&&be(o,1)):(o=_n(e),o.c(),be(o,1),o.m(i,r)):o&&(ge(),ye(o,1,1,(()=>{o=null})),ve()),u&&u.p&&(!s||32&t)&&$(u,l,e,e[5],s?S(l,e[5],t,null):_(e[5]),null)},i(e){s||(be(o),be(u,e),s=!0)},o(e){ye(o),ye(u,e),s=!1},d(e){e&&L(t),o&&o.d(),u&&u.d(e)}}}function xn(e,t,i){let{$$slots:r={},$$scope:n}=t,{onClose:a}=t,{showHeader:s=!0}=t,{showCloseCross:o=!0}=t,{title:l}=t;return e.$$set=e=>{"onClose"in e&&i(0,a=e.onClose),"showHeader"in e&&i(1,s=e.showHeader),"showCloseCross"in e&&i(2,o=e.showCloseCross),"title"in e&&i(3,l=e.title),"$$scope"in e&&i(5,n=e.$$scope)},[a,s,o,l,r,n]}var An=class extends Le{constructor(e){super(),Ce(this,e,xn,En,h,{onClose:0,showHeader:1,showCloseCross:2,title:3},$n)}},Cn=new Set(["BR"]),kn=e=>{let t=document.createElement("DIV");t.innerHTML=e;let i=t.querySelectorAll("*"),r=i.length;for(;r--;){let e=i[r],t=e.tagName;Cn.has(t)||e.parentElement?.removeChild(e)}return t.innerHTML};function Ln(e){C(e,"svelte-quklnq",".hot-key-map.svelte-quklnq{color:var(--black);box-sizing:border-box;overflow-x:hidden}.hot-key-map-group.svelte-quklnq{border-bottom:1px solid var(--white-alpha-24);margin:0 20px 0 16px}.hot-key-map-group.svelte-quklnq:last-child{border-bottom:none}.hot-key-map-group-title.svelte-quklnq{color:var(--white);font-feature-settings:'clig' off, 'liga' off;font-size:13px;font-style:normal;font-weight:600;line-height:16px}.hot-key-map-group-title.svelte-quklnq,.hot-key-map-item.svelte-quklnq{padding:12px 0;margin:0;width:100%}.hot-key-map-group-items.svelte-quklnq{box-sizing:border-box;list-style:none;padding:0;margin:0}.hot-key-map-item.svelte-quklnq{box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;--videoplayer-hotkey-item-value-width:156px;--videoplayer-hotkey-item-value-padding-left:24px}.hot-key-map-item-description.svelte-quklnq{color:var(--white-alpha-72);width:calc(100% - var(--videoplayer-hotkey-item-value-width) - var(--videoplayer-hotkey-item-value-padding-left));max-width:388px}.hot-key-map-item-value.svelte-quklnq{color:var(--white);width:var(--videoplayer-hotkey-item-value-width);padding-left:var(--videoplayer-hotkey-item-value-padding-left);letter-spacing:-0.14px}.hot-key-map-item-description.svelte-quklnq,.hot-key-map-item-value.svelte-quklnq{font-feature-settings:'clig' off, 'liga' off;font-size:13px;font-style:normal;font-weight:400;line-height:16px}")}function Rn(e,t,i){let r=e.slice();return r[5]=t[i].title,r[6]=t[i].items,r}function Pn(e,t,i){let r=e.slice();return r[9]=t[i].description,r[10]=t[i].value,r}function On(e){let t,i,r,n,a,s,o=kn(e[9])+"",l=e[10]+"";return{c(){t=P("li"),i=P("span"),r=I(),n=P("span"),a=M(l),s=I(),U(i,"class","hot-key-map-item-description svelte-quklnq"),U(n,"class","hot-key-map-item-value svelte-quklnq"),U(t,"class","hot-key-map-item svelte-quklnq")},m(e,l){k(e,t,l),A(t,i),i.innerHTML=o,A(t,r),A(t,n),A(n,a),A(t,s)},p(e,t){1&t&&o!==(o=kn(e[9])+"")&&(i.innerHTML=o),1&t&&l!==(l=e[10]+"")&&j(a,l)},d(e){e&&L(t)}}}function Mn(e){let t,i,r,n,a,s,o=e[5]+"",l=Se(e[6]),u=[];for(let t=0;t<l.length;t+=1)u[t]=On(Pn(e,l,t));return{c(){t=P("div"),i=P("h5"),r=M(o),n=I(),a=P("ul");for(let e=0;e<u.length;e+=1)u[e].c();s=I(),U(i,"class","hot-key-map-group-title svelte-quklnq"),U(a,"class","hot-key-map-group-items svelte-quklnq"),U(t,"class","hot-key-map-group svelte-quklnq")},m(e,o){k(e,t,o),A(t,i),A(i,r),A(t,n),A(t,a);for(let e=0;e<u.length;e+=1)u[e]&&u[e].m(a,null);A(t,s)},p(e,t){if(1&t&&o!==(o=e[5]+"")&&j(r,o),1&t){let i;for(l=Se(e[6]),i=0;i<l.length;i+=1){let r=Pn(e,l,i);u[i]?u[i].p(r,t):(u[i]=On(r),u[i].c(),u[i].m(a,null))}for(;i<u.length;i+=1)u[i].d(1);u.length=l.length}},d(e){e&&L(t),R(u,e)}}}function In(e){let t,i=Se(e[0].groups),r=[];for(let t=0;t<i.length;t+=1)r[t]=Mn(Rn(e,i,t));return{c(){t=P("div");for(let e=0;e<r.length;e+=1)r[e].c();U(t,"class","hot-key-map svelte-quklnq")},m(e,i){k(e,t,i);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null)},p(e,n){if(1&n){let a;for(i=Se(e[0].groups),a=0;a<i.length;a+=1){let s=Rn(e,i,a);r[a]?r[a].p(s,n):(r[a]=Mn(s),r[a].c(),r[a].m(t,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},d(e){e&&L(t),R(r,e)}}}function Nn(e){let t,i;return t=new An({props:{title:e[0].title,onClose:e[2],$$slots:{default:[In]},$$scope:{ctx:e}}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,[i]){let r={};1&i&&(r.title=e[0].title),8193&i&&(r.$$scope={dirty:i,ctx:e}),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Vn(e,t,i){let r,n=et(),{data:a,show:s}=n.ui.modals.hotKeyMap;return v(e,a,(e=>i(0,r=e))),[r,a,()=>{s.set(!1)}]}var Dn,Bn=class extends Le{constructor(e){super(),Ce(this,e,Vn,Nn,h,{},Ln)}};function Un(e){return Dn||(Dn=new ResizeObserver((e=>{for(let t of e)t.target.dispatchEvent(new CustomEvent("fd:resize"))}))),Dn.observe(e),{destroy(){Dn.unobserve(e)}}}function Fn(e){C(e,"svelte-1oe0j8n",".pillow.svelte-1oe0j8n{background-color:#679FF8;color:var(--white);font-size:6px;font-weight:600;-webkit-font-smoothing:antialiased;padding:2px 4px;border-radius:12px}")}function jn(e){let t,i,r=e[1].default,n=b(r,e,e[0],null);return{c(){t=P("div"),n&&n.c(),U(t,"class","pillow svelte-1oe0j8n")},m(e,r){k(e,t,r),n&&n.m(t,null),i=!0},p(e,[t]){n&&n.p&&(!i||1&t)&&$(n,r,e,e[0],i?S(r,e[0],t,null):_(e[0]),null)},i(e){i||(be(n,e),i=!0)},o(e){ye(n,e),i=!1},d(e){e&&L(t),n&&n.d(e)}}}function Hn(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{"$$scope"in e&&i(0,n=e.$$scope)},[n,r]}var zn=class extends Le{constructor(e){super(),Ce(this,e,Hn,jn,h,{},Fn)}};function qn(e){let t,i,r,n,a=e[2].default,s=b(a,e,e[1],null),o=[{xmlns:"http://www.w3.org/2000/svg"},{width:"9"},{height:"5"},{fill:"none"},{role:"img"},e[0]],u={};for(let e=0;e<o.length;e+=1)u=l(u,o[e]);return{c(){t=O("svg"),s&&s.c(),i=O("path"),r=O("path"),U(i,"fill","currentColor"),U(i,"d","M5.517 5c.325 0 .516-.198.516-.536v-.97l.492-.517 1.46 1.74c.16.205.304.283.516.283A.49.49 0 0 0 9 4.501c0-.14-.068-.287-.222-.478l-1.47-1.73L8.818.868C8.949.731 9 .618 9 .475A.474.474 0 0 0 8.515 0c-.171 0-.301.065-.445.222L6.064 2.25h-.03V.54c0-.342-.192-.54-.517-.54s-.516.198-.516.54v3.924c0 .338.191.536.516.536"),U(r,"fill","currentColor"),U(r,"fill-rule","evenodd"),U(r,"d","m2.551 1.052-1.51 2.052h1.51zM3.5 3.104V.832c0-.81-1.089-1.14-1.556-.48L.139 2.821a.75.75 0 0 0 .612 1.183h1.8v.55c0 .248.25.45.499.45a.45.45 0 0 0 .45-.45v-.55h.052a.45.45 0 0 0 0-.9z"),U(r,"clip-rule","evenodd"),F(t,u)},m(e,a){k(e,t,a),s&&s.m(t,null),A(t,i),A(t,r),n=!0},p(e,[i]){s&&s.p&&(!n||2&i)&&$(s,a,e,e[1],n?S(a,e[1],i,null):_(e[1]),null),F(t,u=_e(o,[{xmlns:"http://www.w3.org/2000/svg"},{width:"9"},{height:"5"},{fill:"none"},{role:"img"},1&i&&e[0]]))},i(e){n||(be(s,e),n=!0)},o(e){ye(s,e),n=!1},d(e){e&&L(t),s&&s.d(e)}}}function Wn(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var Gn=class extends Le{constructor(e){super(),Ce(this,e,Wn,qn,h,{})}};function Qn(e){let t,i,r,n,a=e[2].default,s=b(a,e,e[1],null),o=[{xmlns:"http://www.w3.org/2000/svg"},{width:"9"},{height:"5"},{fill:"none"},{role:"img"},e[0]],u={};for(let e=0;e<o.length;e+=1)u=l(u,o[e]);return{c(){t=O("svg"),s&&s.c(),i=O("path"),r=O("path"),U(i,"fill","currentColor"),U(i,"d","M5.513 5c.323 0 .513-.198.513-.537v-.97l.49-.516L7.99 4.715c.16.205.302.284.513.284A.49.49 0 0 0 9 4.5c0-.14-.068-.287-.22-.478L7.293 2.293 8.82.868C8.949.731 9 .618 9 .475A.473.473 0 0 0 8.517 0c-.17 0-.299.065-.441.222L6.056 2.25h-.03V.54c0-.342-.19-.54-.513-.54S5 .198 5 .54v3.923c0 .339.19.537.513.537"),U(r,"fill","currentColor"),U(r,"fill-rule","evenodd"),U(r,"d","M2 0q-.53 0-.952.173a1.5 1.5 0 0 0-.654.484q-.23.312-.23.71c0 .423.208.756.613.995a1.46 1.46 0 0 0-.547.44q-.23.305-.23.71 0 .432.252.778l.001.001q.26.336.712.523Q1.418 5.001 2 5q.582 0 1.035-.186.451-.187.705-.524.26-.346.26-.777 0-.406-.23-.711a1.45 1.45 0 0 0-.552-.44c.409-.235.618-.569.618-.994a1.14 1.14 0 0 0-.238-.711 1.44 1.44 0 0 0-.653-.484A2.4 2.4 0 0 0 2 0m-.573.964C1.563.86 1.75.804 2 .804s.434.055.564.16h.001a.51.51 0 0 1 .204.43.52.52 0 0 1-.204.437c-.13.105-.315.161-.565.161s-.437-.056-.573-.161a.52.52 0 0 1-.203-.437q.002-.276.203-.43m-.345 2.522c0-.217.08-.381.233-.503.16-.122.385-.188.685-.188s.522.066.677.188q.24.181.24.503a.63.63 0 0 1-.24.523c-.155.122-.377.188-.677.188s-.524-.065-.684-.187a.64.64 0 0 1-.234-.524"),U(r,"clip-rule","evenodd"),F(t,u)},m(e,a){k(e,t,a),s&&s.m(t,null),A(t,i),A(t,r),n=!0},p(e,[i]){s&&s.p&&(!n||2&i)&&$(s,a,e,e[1],n?S(a,e[1],i,null):_(e[1]),null),F(t,u=_e(o,[{xmlns:"http://www.w3.org/2000/svg"},{width:"9"},{height:"5"},{fill:"none"},{role:"img"},1&i&&e[0]]))},i(e){n||(be(s,e),n=!0)},o(e){ye(s,e),n=!1},d(e){e&&L(t),s&&s.d(e)}}}function Yn(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var Kn=class extends Le{constructor(e){super(),Ce(this,e,Yn,Qn,h,{})}};function Xn(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"9"},{height:"5"},{fill:"none"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","currentColor"),U(i,"d","M5.516 5h1.107C8.103 5 9 4.065 9 2.5S8.103 0 6.623 0H5.516C5.191 0 5 .2 5 .537V4.46c0 .342.191.54.516.54m.516-.854V.852H6.5C7.41.852 8 1.468 8 2.5c0 1.066-.577 1.646-1.5 1.646zM.516 5c.325 0 .516-.198.516-.536V2.922h1.936v1.542c0 .338.191.536.516.536S4 4.802 4 4.464V.54C4 .198 3.809 0 3.484 0s-.516.198-.516.54v1.531H1.032V.54C1.032.198.841 0 .516 0S0 .198 0 .54v3.989C0 4.867.191 5 .516 5"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"9"},{height:"5"},{fill:"none"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function Zn(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var Jn=class extends Le{constructor(e){super(),Ce(this,e,Zn,Xn,h,{})}};function ea(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"13"},{height:"5"},{fill:"none"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","currentColor"),U(i,"d","M9.516 5h1.107C12.103 5 13 4.065 13 2.5S12.103 0 10.623 0H9.516C9.191 0 9 .2 9 .537V4.46c0 .342.191.54.516.54m.516-.854V.852h.468c.91 0 1.5.616 1.5 1.648 0 1.066-.577 1.646-1.5 1.646zM4.516 5c.325 0 .516-.198.516-.536V2.922h1.936v1.542c0 .338.191.536.516.536S8 4.802 8 4.464V.54C8 .198 7.809 0 7.484 0s-.516.198-.516.54v1.531H5.032V.54c0-.342-.191-.54-.516-.54S4 .198 4 .54v3.989c0 .338.191.471.516.471m-4 0c.325 0 .516-.198.516-.537V3h1.332c.27 0 .441-.154.441-.41 0-.253-.174-.407-.44-.407H1.031V.854h1.5c.28 0 .468-.16.468-.427C3 .161 2.815 0 2.532 0H.516C.191 0 0 .198 0 .537v3.926C0 4.802.191 5 .516 5"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"13"},{height:"5"},{fill:"none"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function ta(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var ia=class extends Le{constructor(e){super(),Ce(this,e,ta,ea,h,{})}};function ra(e){let t,i,r,n,a=e[2].default,s=b(a,e,e[1],null),o=[{xmlns:"http://www.w3.org/2000/svg"},{width:"15"},{height:"7"},{fill:"none"},{role:"img"},e[0]],u={};for(let e=0;e<o.length;e+=1)u=l(u,o[e]);return{c(){t=O("svg"),s&&s.c(),i=O("path"),r=O("path"),U(i,"fill","currentColor"),U(i,"d","M11.516 5.75h1.107c1.48 0 2.377-.935 2.377-2.5s-.897-2.5-2.377-2.5h-1.107c-.325 0-.516.199-.516.537V5.21c0 .342.191.54.516.54m.516-.854V1.602h.468c.91 0 1.5.616 1.5 1.648 0 1.066-.577 1.646-1.5 1.646zm-5.516.854c.325 0 .516-.198.516-.536V3.672h1.936v1.542c0 .338.191.536.516.536S10 5.552 10 5.214V1.29c0-.342-.191-.54-.516-.54s-.516.198-.516.54v1.531H7.032V1.29c0-.342-.191-.54-.516-.54S6 .948 6 1.29v3.989c0 .338.191.471.516.471"),U(r,"fill","currentColor"),U(r,"fill-rule","evenodd"),U(r,"d","M3.338 5.659a4 4 0 0 1-.838.091C1.037 5.75 0 4.885 0 3.303 0 1.733 1.037.75 2.5.75 3.96.75 5 1.734 5 3.303c0 .863-.274 1.46-.778 1.88l.194.29a.5.5 0 0 1-.832.554zm-.52-.78-.234-.352a.5.5 0 1 1 .832-.554l.245.367c.184-.26.286-.615.286-1.037 0-1.036-.64-1.653-1.447-1.653-.81 0-1.447.617-1.447 1.653 0 1.032.637 1.596 1.447 1.596.08 0 .208-.007.318-.02"),U(r,"clip-rule","evenodd"),F(t,u)},m(e,a){k(e,t,a),s&&s.m(t,null),A(t,i),A(t,r),n=!0},p(e,[i]){s&&s.p&&(!n||2&i)&&$(s,a,e,e[1],n?S(a,e[1],i,null):_(e[1]),null),F(t,u=_e(o,[{xmlns:"http://www.w3.org/2000/svg"},{width:"15"},{height:"7"},{fill:"none"},{role:"img"},1&i&&e[0]]))},i(e){n||(be(s,e),n=!0)},o(e){ye(s,e),n=!1},d(e){e&&L(t),s&&s.d(e)}}}function na(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var aa=class extends Le{constructor(e){super(),Ce(this,e,na,ra,h,{})}},sa=e=>{switch(e){case a.VideoQuality.Q_720P:return Jn;case a.VideoQuality.Q_1080P:return ia;case a.VideoQuality.Q_1440P:return aa;case a.VideoQuality.Q_2160P:return Gn;case a.VideoQuality.Q_4320P:return Kn}};function oa(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"settings-mobile-icon"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"d","M12.722 2.213c1.208.037 1.994.702 2.408 1.954l.065.215.051.191q.027.111.068.235l.058.159.034.017.069-.023.133-.051.156-.068c1.414-.658 2.502-.536 3.387.437l.125.145.82 1.017c.732.962.71 1.99-.004 3.1l-.125.187-.117.16a3 3 0 0 0-.142.205l-.07.115-.034.057.004.02.091.06.127.077.153.083c1.39.71 1.963 1.641 1.742 2.936l-.038.188-.244 1.058c-.158.685-.282 1.01-.77 1.454-.475.432-1.016.61-1.732.67l-.22.014-.198.006q-.116.002-.246.015l-.181.021.013.142.013.096.033.179c.323 1.526-.04 2.558-1.188 3.202l-.17.09-1.175.57c-1.102.495-2.099.242-3.02-.702l-.153-.164-.13-.15a3 3 0 0 0-.17-.186l-.097-.096-.05-.046-.09.087-.106.108-.118.133c-.952 1.134-1.957 1.54-3.176 1.067l-.175-.074-1.052-.51-.312-.16c-.476-.26-.743-.51-1.004-1.061-.275-.58-.294-1.15-.16-1.883l.044-.225q.024-.114.041-.242l.019-.172-.004-.004-.104-.014-.146-.013-.174-.008c-1.56-.028-2.484-.614-2.853-1.877l-.049-.185-.292-1.274c-.235-1.185.236-2.1 1.364-2.785l.194-.112.175-.093a3 3 0 0 0 .216-.12l.155-.102.004-.019-.063-.108-.08-.125-.103-.143c-.937-1.246-1.044-2.335-.276-3.404l.115-.153.824-1.013c.79-.915 1.8-1.107 3.034-.64l.208.083.181.081q.103.048.222.093l.136.048.036-.017.033-.089.045-.138.046-.166c.36-1.436 1.085-2.242 2.39-2.35l.19-.011h1.39Zm-.056 1.799h-1.333l-.14.01c-.285.037-.472.191-.652.832l-.041.156-.057.206a6.3 6.3 0 0 1-.468 1.134 6 6 0 0 0-1.147.558 6.5 6.5 0 0 1-1.16-.35l-.35-.154c-.248-.107-.435-.161-.583-.175l-.084-.003a.55.55 0 0 0-.408.193l-.068.074-.789.973-.095.125c-.183.264-.21.5.195 1.075l.228.316c.212.31.425.692.598 1.102q-.195.577-.27 1.201c-.334.29-.69.537-1.013.72l-.343.184c-.617.34-.695.563-.646.881l.013.075.28 1.22.04.152c.096.308.265.475.968.509l.388.014c.37.024.798.09 1.223.204q.337.526.776.968a6.3 6.3 0 0 1-.118 1.445c-.201.95-.014 1.102.383 1.3l1.126.547a.8.8 0 0 0 .337.089l.067-.006c.181-.028.382-.162.67-.485l.258-.295a6.5 6.5 0 0 1 .949-.837l.298.023L12 18l.302-.008.298-.022c.363.263.691.559.948.837l.258.295c.325.364.538.488.737.49l.066-.003a.8.8 0 0 0 .178-.046l.093-.039 1.126-.548.139-.073c.3-.175.42-.395.245-1.226a6.2 6.2 0 0 1-.117-1.445q.436-.442.775-.97a6.5 6.5 0 0 1 1.223-.202l.387-.014c.812-.04.912-.256 1.008-.66l.264-1.142c.09-.406.095-.643-.617-1.035l-.342-.183a6.4 6.4 0 0 1-1.014-.722 6 6 0 0 0-.27-1.201c.174-.41.386-.791.598-1.1l.228-.317c.406-.575.378-.81.195-1.075l-.045-.062-.787-.974c-.14-.171-.259-.294-.452-.322l-.076-.007c-.16-.003-.368.05-.667.178l-.35.155a6.4 6.4 0 0 1-1.158.348 6 6 0 0 0-1.15-.556 6.5 6.5 0 0 1-.454-1.093l-.113-.414c-.192-.678-.393-.805-.714-.828zM12 8.2a3.8 3.8 0 1 1 0 7.6 3.8 3.8 0 0 1 0-7.6m0 1.8a2 2 0 1 0 0 4 2 2 0 0 0 0-4"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"settings-mobile-icon"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function la(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var ua=class extends Le{constructor(e){super(),Ce(this,e,la,oa,h,{})}};function ca(e){let t,i,r,n,a=e[2].default,s=b(a,e,e[1],null),o=[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"data-testid":"settings-icon"},{role:"img"},e[0]],u={};for(let e=0;e<o.length;e+=1)u=l(u,o[e]);return{c(){t=O("svg"),s&&s.c(),i=O("path"),r=O("path"),U(i,"fill","#fff"),U(i,"fill-rule","evenodd"),U(i,"d","M13.933 4.875a.6.6 0 0 0-.07-.658c-.327-.413-.45-.833-.574-1.253l-.039-.13C13 2 12.833 2 12.417 2h-.91c-.371.003-.6.052-.757.833-.148.738-.36 1.476-1.566 2.186a.5.5 0 0 1-.12.05c-1.27.324-1.905-.023-2.542-.37l-.12-.065c-.766-.412-.884-.294-1.178 0l-.643.644c-.26.264-.389.461.053 1.124.418.626.789 1.299.438 2.654a.5.5 0 0 1-.05.12c-.668 1.126-1.362 1.33-2.058 1.535l-.13.039C2 11 2 11.167 2 11.583v.91c.003.371.052.6.833.757.738.148 1.476.36 2.186 1.566a.5.5 0 0 1 .05.12c.324 1.27-.023 1.905-.37 2.542l-.065.12c-.412.766-.294.884 0 1.178l.644.643c.264.26.461.389 1.124-.053.626-.418 1.299-.789 2.654-.438q.063.016.12.05c1.126.668 1.33 1.362 1.535 2.058l.039.13c.25.834.417.834.833.834h.91c.371-.003.6-.052.757-.833.148-.738.36-1.476 1.566-2.186a.5.5 0 0 1 .12-.05c1.27-.324 1.905.023 2.542.37l.12.065c.766.412.884.294 1.178 0l.643-.644c.26-.264.389-.461-.053-1.124-.26-.39-.503-.799-.563-1.38a.6.6 0 0 0-.413-.519 7.5 7.5 0 0 1-1.918-.871.58.58 0 0 0-.758.134 4.75 4.75 0 1 1-3.163-7.68.58.58 0 0 0 .633-.44 7.5 7.5 0 0 1 .749-1.967"),U(i,"clip-rule","evenodd"),U(r,"fill","#fff"),U(r,"d","M13.25 2.833c.225.751.383 1.502 1.63 2.222 1.399.38 2.082.003 2.718-.42.663-.443.86-.315 1.124-.054l.644.643c.294.294.412.412 0 1.178-.372.69-.792 1.333-.418 2.726.72 1.255 1.47 1.472 2.219 1.622.78.156.83.386.833.757v.91c0 .416 0 .583-.833.833-.751.225-1.502.383-2.222 1.63-.38 1.399-.003 2.082.42 2.718.443.663.315.86.054 1.124l-.643.644c-.294.294-.412.412-1.178 0-.69-.372-1.333-.792-2.726-.418-1.255.72-1.472 1.47-1.622 2.219-.156.78-.386.83-.757.833h-.91c-.416 0-.583 0-.833-.833-.225-.751-.383-1.502-1.63-2.222-1.399-.38-2.082-.003-2.718.42-.663.443-.86.315-1.124.054l-.644-.643c-.294-.294-.412-.412 0-1.178.372-.69.792-1.333.418-2.726-.72-1.255-1.47-1.472-2.219-1.622-.78-.156-.83-.386-.833-.757v-.91c0-.416 0-.583.833-.833.751-.225 1.502-.383 2.222-1.63.38-1.399.003-2.082-.42-2.718-.443-.663-.315-.86-.054-1.124l.643-.644c.294-.294.412-.412 1.178 0 .69.372 1.333.792 2.726.418 1.255-.72 1.472-1.47 1.622-2.219.156-.78.386-.83.757-.833h.91c.416 0 .583 0 .833.833M12 7.25a4.75 4.75 0 1 0 0 9.5 4.75 4.75 0 0 0 0-9.5"),U(r,"class","_full"),F(t,u)},m(e,a){k(e,t,a),s&&s.m(t,null),A(t,i),A(t,r),n=!0},p(e,[i]){s&&s.p&&(!n||2&i)&&$(s,a,e,e[1],n?S(a,e[1],i,null):_(e[1]),null),F(t,u=_e(o,[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"data-testid":"settings-icon"},{role:"img"},1&i&&e[0]]))},i(e){n||(be(s,e),n=!0)},o(e){ye(s,e),n=!1},d(e){e&&L(t),s&&s.d(e)}}}function da(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var pa=class extends Le{constructor(e){super(),Ce(this,e,da,ca,h,{})}};function ha(e){C(e,"svelte-8t5w85",'.icon.svelte-8t5w85{display:flex;position:relative;width:24px;height:24px}.icon.svelte-8t5w85 .pillow{position:absolute;top:1px;right:-9px}.icon.triple.svelte-8t5w85 .pillow{right:-13px}.icon.svelte-8t5w85 svg[data-testid="settings-icon--labeled"] ._full{visibility:hidden;opacity:0}')}function fa(e){let t,i,r,n,a=e[1]&&ga(e);return r=new pa({props:{"data-testid":e[1]?"settings-icon--labeled":"settings-icon"}}),{c(){t=P("div"),a&&a.c(),i=I(),Ee(r.$$.fragment),U(t,"class","icon svelte-8t5w85"),U(t,"aria-hidden","true"),z(t,"triple",e[2])},m(e,s){k(e,t,s),a&&a.m(t,null),A(t,i),xe(r,t,null),n=!0},p(e,s){e[1]?a?(a.p(e,s),2&s&&be(a,1)):(a=ga(e),a.c(),be(a,1),a.m(t,i)):a&&(ge(),ye(a,1,1,(()=>{a=null})),ve());let o={};2&s&&(o["data-testid"]=e[1]?"settings-icon--labeled":"settings-icon"),r.$set(o),(!n||4&s)&&z(t,"triple",e[2])},i(e){n||(be(a),be(r.$$.fragment,e),n=!0)},o(e){ye(a),ye(r.$$.fragment,e),n=!1},d(e){e&&L(t),a&&a.d(),Ae(r)}}}function ma(e){let t,i;return t=new ua({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p:o,i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function ga(e){let t,i;return t=new zn({props:{$$slots:{default:[va]},$$scope:{ctx:e}}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};18&i&&(r.$$scope={dirty:i,ctx:e}),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function va(e){let t,i,r;var n=e[1];return n&&(t=q(n,{})),{c(){t&&Ee(t.$$.fragment),i=N()},m(e,n){t&&xe(t,e,n),k(e,i,n),r=!0},p(e,r){if(2&r&&n!==(n=e[1])){if(t){ge();let e=t;ye(e.$$.fragment,1,0,(()=>{Ae(e,1)})),ve()}n?(t=q(n,{}),Ee(t.$$.fragment),be(t.$$.fragment,1),xe(t,i.parentNode,i)):t=null}},i(e){r||(t&&be(t.$$.fragment,e),r=!0)},o(e){t&&ye(t.$$.fragment,e),r=!1},d(e){e&&L(i),t&&Ae(t,e)}}}function ba(e){let t,i,r,n,a=[ma,fa],s=[];function o(e,t){return e[0]?0:1}return t=o(e),i=s[t]=a[t](e),{c(){i.c(),r=N()},m(e,i){s[t].m(e,i),k(e,r,i),n=!0},p(e,[n]){let l=t;t=o(e),t===l?s[t].p(e,n):(ge(),ye(s[l],1,1,(()=>{s[l]=null})),ve(),i=s[t],i?i.p(e,n):(i=s[t]=a[t](e),i.c()),be(i,1),i.m(r.parentNode,r))},i(e){n||(be(i),n=!0)},o(e){ye(i),n=!1},d(e){e&&L(r),s[t].d(e)}}}function ya(e,t,i){let r,n,{isMobile:a=!1}=t,{currentQuality:s}=t;return e.$$set=e=>{"isMobile"in e&&i(0,a=e.isMobile),"currentQuality"in e&&i(3,s=e.currentQuality)},e.$$.update=()=>{8&e.$$.dirty&&i(1,r=sa(s)),2&e.$$.dirty&&i(2,n=!!r&&[ia,aa].includes(r))},[a,r,n,s]}var Sa=class extends Le{constructor(e){super(),Ce(this,e,ya,ba,h,{isMobile:0,currentQuality:3},ha)}};function $a(e){C(e,"svelte-d9t49t",".settings-icon-wrapper.svelte-d9t49t{position:relative;width:24px}")}function _a(e){let t,i,r;return i=new Sa({props:{isMobile:e[3],currentQuality:e[4]}}),{c(){t=P("span"),Ee(i.$$.fragment),U(t,"class","settings-icon-wrapper svelte-d9t49t")},m(e,n){k(e,t,n),xe(i,t,null),r=!0},p(e,t){let r={};8&t&&(r.isMobile=e[3]),16&t&&(r.currentQuality=e[4]),i.$set(r)},i(e){r||(be(i.$$.fragment,e),r=!0)},o(e){ye(i.$$.fragment,e),r=!1},d(e){e&&L(t),Ae(i)}}}function Ta(e){let t,i,r;function n(t){e[10](t)}let a={className:e[1]?"opened":"",testId:"btn-settings",click:e[8],ariaLabel:e[2],ariaExpanded:e[1],$$slots:{default:[_a]},$$scope:{ctx:e}};return void 0!==e[0]&&(a.ref=e[0]),t=new Sn({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,[r]){let n={};2&r&&(n.className=e[1]?"opened":""),4&r&&(n.ariaLabel=e[2]),2&r&&(n.ariaExpanded=e[1]),16408&r&&(n.$$scope={dirty:r,ctx:e}),!i&&1&r&&(i=!0,n.ref=e[0],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function wa(e,t,i){let r,n,a,{ref$:s}=t,o=et(),l=o.state.currentQuality$;v(e,l,(e=>i(4,a=e)));let u=o.ui.settingsMenu.visible$;v(e,u,(e=>i(1,r=e)));let c,d,p=o.actions.internal.openSettingsMenu,h=o.actions.internal.closeSettingsMenu,f=o.ui.isMobile;return v(e,f,(e=>i(3,n=e))),e.$$set=e=>{"ref$"in e&&i(9,s=e.ref$)},e.$$.update=()=>{513&e.$$.dirty&&s&&s.set(c),2&e.$$.dirty&&i(2,d=Pt(r?"tooltip_settings_on":"tooltip_settings_off"))},[c,r,d,n,a,l,u,f,async function(e){let t=ji(e);r?h():p(t,oe)},s,function(e){c=e,i(0,c)}]}var Ea=class extends Le{constructor(e){super(),Ce(this,e,wa,Ta,h,{ref$:9},$a)}};function xa(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"22"},{height:"16"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"subtitle-pained-icon"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"d","M3 0h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3m1 9h2a1 1 0 0 0 0-2H4a1 1 0 0 0 0 2m5 0h7a1 1 0 1 0 0-2H9a1 1 0 0 0 0 2m-5 4h7a1 1 0 1 0 0-2H4a1 1 0 1 0 0 2m10 0h2a1 1 0 1 0 0-2h-2a1 1 0 1 0 0 2"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"22"},{height:"16"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"subtitle-pained-icon"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function Aa(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var Ca=class extends Le{constructor(e){super(),Ce(this,e,Aa,xa,h,{})}};function ka(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"22"},{height:"18"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"subtitle-empty-icon"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"d","M14.692.428c2.293 0 3.124.24 3.962.687a4.67 4.67 0 0 1 1.944 1.944c.449.839.687 1.67.687 3.962v3.958c0 2.292-.238 3.123-.687 3.961a4.67 4.67 0 0 1-1.944 1.944c-.838.449-1.67.687-3.962.687H7.307c-2.293 0-3.124-.238-3.962-.687A4.67 4.67 0 0 1 1.4 14.94c-.448-.838-.687-1.669-.687-3.961V7.02c0-2.292.239-3.123.687-3.962a4.67 4.67 0 0 1 1.944-1.944C4.183.667 5.015.428 7.307.428zm.243 1.716-7.628-.001c-1.832 0-2.484.126-3.154.484a2.96 2.96 0 0 0-1.24 1.24c-.343.64-.473 1.264-.484 2.912v4.2c0 1.83.125 2.483.483 3.153q.433.809 1.241 1.24c.67.36 1.322.485 3.154.485h7.385c1.832 0 2.484-.126 3.154-.484a2.96 2.96 0 0 0 1.24-1.241c.36-.67.485-1.322.485-3.153V7.02c0-1.831-.126-2.483-.484-3.153a2.96 2.96 0 0 0-1.241-1.24c-.64-.343-1.263-.473-2.911-.484ZM11 10.714a.857.857 0 1 1 0 1.714H5.857a.857.857 0 0 1 0-1.714zm5.142 0a.857.857 0 1 1 0 1.714h-1.714a.857.857 0 0 1 0-1.714zm0-3.428a.857.857 0 1 1 0 1.714H11a.857.857 0 1 1 0-1.714zm-8.571 0a.857.857 0 0 1 0 1.714H5.857a.857.857 0 0 1 0-1.714z"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"22"},{height:"18"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"subtitle-empty-icon"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function La(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var Ra=class extends Le{constructor(e){super(),Ce(this,e,La,ka,h,{})}};function Pa(e){let t,i;return t=new Ra({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Oa(e){let t,i;return t=new Ca({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Ma(e){let t,i,r,n,a=[Oa,Pa],s=[];function o(e,t){return e[0]?0:1}return t=o(e),i=s[t]=a[t](e),{c(){i.c(),r=N()},m(e,i){s[t].m(e,i),k(e,r,i),n=!0},p(e,n){let l=t;t=o(e),t!==l&&(ge(),ye(s[l],1,1,(()=>{s[l]=null})),ve(),i=s[t],i||(i=s[t]=a[t](e),i.c()),be(i,1),i.m(r.parentNode,r))},i(e){n||(be(i),n=!0)},o(e){ye(i),n=!1},d(e){e&&L(r),s[t].d(e)}}}function Ia(e){let t,i;return t=new Sn({props:{testId:"btn-Subtitles",ariaLabel:e[2],click:e[1],ariaKeyShortCut:Ie.KeyC,$$slots:{default:[Ma]},$$scope:{ctx:e}}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,[i]){let r={};4&i&&(r.ariaLabel=e[2]),2&i&&(r.click=e[1]),9&i&&(r.$$scope={dirty:i,ctx:e}),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Na(e,t,i){let r,{isSubtitlesEnabled:n=!1}=t,{click:a}=t;return e.$$set=e=>{"isSubtitlesEnabled"in e&&i(0,n=e.isSubtitlesEnabled),"click"in e&&i(1,a=e.click)},e.$$.update=()=>{1&e.$$.dirty&&i(2,r=Pt(n?"tooltip_subtitles_on":"tooltip_subtitles_off"))},[n,a,r]}var Va=class extends Le{constructor(e){super(),Ce(this,e,Na,Ia,h,{isSubtitlesEnabled:0,click:1})}};function Da(e){C(e,"svelte-19o2urr",".time.svelte-19o2urr{display:flex;align-items:center;font-weight:500;font-variant-numeric:tabular-nums;padding:12px 6px}.time.mobile.svelte-19o2urr{padding:0 0 0 8px}.current.svelte-19o2urr{position:relative}.duration.svelte-19o2urr{opacity:0.7}.duration.svelte-19o2urr:before{content:' / ';white-space:pre}")}function Ba(e){let t,i;return{c(){t=P("span"),i=M(e[3]),U(t,"class","duration svelte-19o2urr")},m(e,r){k(e,t,r),A(t,i)},p(e,t){8&t&&j(i,e[3])},d(e){e&&L(t)}}}function Ua(e){let t,i,r,n,a=e[2]&&Ba(e);return{c(){t=P("div"),i=P("span"),r=M(e[4]),n=I(),a&&a.c(),U(i,"class","current svelte-19o2urr"),U(t,"class","time svelte-19o2urr"),z(t,"mobile",e[1])},m(s,o){k(s,t,o),A(t,i),A(i,r),A(t,n),a&&a.m(t,null),e[7](t)},p(e,[i]){16&i&&j(r,e[4]),e[2]?a?a.p(e,i):(a=Ba(e),a.c(),a.m(t,null)):a&&(a.d(1),a=null),2&i&&z(t,"mobile",e[1])},i:o,o,d(i){i&&L(t),a&&a.d(),e[7](null)}}}function Fa(e,t,i){let r,n,{isMobile:a=!1}=t,{duration:s}=t,{position:o}=t,{showDuration:l=!0}=t,{ref:u}=t;return e.$$set=e=>{"isMobile"in e&&i(1,a=e.isMobile),"duration"in e&&i(5,s=e.duration),"position"in e&&i(6,o=e.position),"showDuration"in e&&i(2,l=e.showDuration),"ref"in e&&i(0,u=e.ref)},e.$$.update=()=>{32&e.$$.dirty&&i(3,r=bi(s)),64&e.$$.dirty&&i(4,n=bi(o))},[u,a,l,r,n,s,o,function(e){te[e?"unshift":"push"]((()=>{u=e,i(0,u)}))}]}var ja=class extends Le{constructor(e){super(),Ce(this,e,Fa,Ua,h,{isMobile:1,duration:5,position:6,showDuration:2,ref:0},Da)}};function Ha(e){C(e,"svelte-1n5yyua",".icon.svelte-1n5yyua.svelte-1n5yyua{display:block;width:24px;height:24px}.icon.svelte-1n5yyua .cross.svelte-1n5yyua{visibility:hidden}.icon[data-value='off'].svelte-1n5yyua .wave1.svelte-1n5yyua,.icon[data-value='off'].svelte-1n5yyua .wave2.svelte-1n5yyua{visibility:hidden}.icon[data-value='off'].svelte-1n5yyua .cross.svelte-1n5yyua{visibility:visible}.icon[data-value='mid'].svelte-1n5yyua .wave2.svelte-1n5yyua,.icon[data-value='min'].svelte-1n5yyua .wave2.svelte-1n5yyua{visibility:hidden}")}function za(e){let t,i,r,n,a,s;return{c(){t=O("svg"),i=O("g"),r=O("path"),n=O("path"),a=O("path"),U(r,"class","wave2 svelte-1n5yyua"),U(r,"d","M12.98 18.823c-.031 1.207-.67 1.609-1.828.62-1.719-1.469-3.609-3.194-4.242-3.721-.632-.529-1.645-.62-3.073-.62-1.427 0-1.815-.621-1.815-1.241s-.014-1.83-.014-2.001c0-.055.005-.086.014-.13.02-.095-.058-.973 0-1.59.085-.906.388-1.241 1.815-1.241 1.428 0 2.44-.092 3.073-.62.633-.529 2.523-2.253 4.242-3.722 1.158-.989 1.797-.587 1.829.62.043 1.607 0 3.85 0 6.683 0 2.83.043 5.356 0 6.963zm2.901-8.704A.875.875 0 1 1 17.12 8.88c.176.177.41.47.64.872.384.671.616 1.425.616 2.247s-.232 1.576-.615 2.247a4.23 4.23 0 0 1-.641.872.875.875 0 1 1-1.238-1.238c.074-.073.214-.249.36-.503.241-.423.384-.887.384-1.378s-.143-.955-.385-1.378a2.597 2.597 0 0 0-.359-.503zm3-2A.875.875 0 1 1 20.12 6.88c.263.264.62.74.966 1.432.517 1.033.843 2.255.89 3.716-.047 1.403-.373 2.625-.89 3.658-.346.692-.703 1.168-.966 1.432a.875.875 0 1 1-1.238-1.238c.138-.137.383-.464.639-.976.407-.814.667-1.79.705-2.876-.038-1.144-.298-2.12-.705-2.934-.256-.512-.501-.839-.639-.976z"),U(n,"class","wave1 svelte-1n5yyua"),U(n,"d","M12.98 18.823c-.031 1.207-.67 1.609-1.828.62-1.719-1.469-3.609-3.194-4.242-3.721-.632-.529-1.645-.62-3.073-.62-1.427 0-1.815-.621-1.815-1.241s-.014-1.83-.014-2.001c0-.055.005-.086.014-.13.02-.095-.058-.973 0-1.59.085-.906.388-1.241 1.815-1.241 1.428 0 2.44-.092 3.073-.62.633-.529 2.523-2.253 4.242-3.722 1.158-.989 1.797-.587 1.829.62.043 1.607 0 3.85 0 6.683 0 2.83.043 5.356 0 6.963zm2.901-8.704A.875.875 0 1 1 17.12 8.88c.176.177.41.47.64.872.384.671.616 1.425.616 2.247s-.232 1.576-.615 2.247a4.23 4.23 0 0 1-.641.872.875.875 0 1 1-1.238-1.238c.074-.073.214-.249.36-.503.241-.423.384-.887.384-1.378s-.143-.955-.385-1.378a2.597 2.597 0 0 0-.359-.503z"),U(a,"class","cross svelte-1n5yyua"),U(a,"d","m20 10.763 2.381-2.382A.875.875 0 1 1 23.62 9.62L21.237 12l2.382 2.381a.875.875 0 1 1-1.238 1.238L20 13.237l-2.381 2.382a.875.875 0 1 1-1.238-1.238L18.763 12 16.38 9.619A.875.875 0 1 1 17.62 8.38zm-7.02 8.06c-.031 1.207-.67 1.609-1.828.62-1.719-1.469-3.609-3.194-4.242-3.721-.632-.529-1.645-.62-3.073-.62-1.427 0-1.815-.621-1.815-1.241s-.014-1.83-.014-2.001c0-.055.005-.086.014-.13.02-.095-.058-.973 0-1.59.085-.906.388-1.241 1.815-1.241 1.428 0 2.44-.092 3.073-.62.633-.529 2.523-2.253 4.242-3.722 1.158-.989 1.797-.587 1.829.62.043 1.607 0 3.85 0 6.683 0 2.83.043 5.356 0 6.963z"),U(i,"fill","#fff"),U(i,"fill-rule","evenodd"),U(t,"data-value",e[0]),U(t,"data-testid",s="volume-"+e[0]+"-icon"),U(t,"xmlns","http://www.w3.org/2000/svg"),U(t,"class","icon svelte-1n5yyua"),U(t,"aria-hidden","true")},m(e,s){k(e,t,s),A(t,i),A(i,r),A(i,n),A(i,a)},p(e,[i]){1&i&&U(t,"data-value",e[0]),1&i&&s!==(s="volume-"+e[0]+"-icon")&&U(t,"data-testid",s)},i:o,o,d(e){e&&L(t)}}}function qa(e,t,i){let r,{volume:n=1}=t,{muted:a=!1}=t;return e.$$set=e=>{"volume"in e&&i(1,n=e.volume),"muted"in e&&i(2,a=e.muted)},e.$$.update=()=>{var t;6&e.$$.dirty&&i(0,(t=n,r=a?"off":t>.5?"max":t>.2?"mid":t>0?"min":"off"))},[r,n,a]}var Wa=class extends Le{constructor(e){super(),Ce(this,e,qa,za,h,{volume:1,muted:2},Ha)}};function Ga(e){let t,i,r=e[4].default,n=b(r,e,e[3],null);return{c(){t=P("div"),n&&n.c(),U(t,"class","overlay")},m(r,a){k(r,t,a),n&&n.m(t,null),e[5](t),i=!0},p(e,[t]){n&&n.p&&(!i||8&t)&&$(n,r,e,e[3],i?S(r,e[3],t,null):_(e[3]),null)},i(e){i||(be(n,e),i=!0)},o(e){ye(n,e),i=!1},d(i){i&&L(t),n&&n.d(i),e[5](null)}}}function Qa(e,t,i){let r,{$$slots:n={},$$scope:a}=t,s=et().ui.overlayContainer$;v(e,s,(e=>i(2,r=e)));let o,l=e=>{!e||!o||e.contains(o)||e.appendChild(o)};return Q((()=>(l(r),()=>{var e;!(e=r)||!o||!e.contains(o)||e.removeChild(o)}))),e.$$set=e=>{"$$scope"in e&&i(3,a=e.$$scope)},e.$$.update=()=>{4&e.$$.dirty&&l(r)},[o,s,r,a,n,function(e){te[e?"unshift":"push"]((()=>{o=e,i(0,o)}))}]}var Ya=class extends Le{constructor(e){super(),Ce(this,e,Qa,Ga,h,{})}};function Ka(e){C(e,"svelte-1jbbzcj",'.tooltip-wrapper.svelte-1jbbzcj{display:flex;flex-direction:column;min-width:0}.full-width.svelte-1jbbzcj{width:100%}.tooltip.svelte-1jbbzcj{position:absolute;opacity:0;visibility:hidden;transition:opacity 200ms, visibility 200ms;bottom:100%;left:0}.content.svelte-1jbbzcj{display:inline-block;padding:6px 10px;border-radius:3px;color:var(--white);background-color:rgba(41, 41, 41, .8)}.tooltip.active.svelte-1jbbzcj{opacity:1;visibility:visible}.tooltip-pointer.svelte-1jbbzcj{position:absolute;bottom:0;width:0;border-top:5px solid rgba(41, 41, 41, .8);border-right:5px solid transparent;border-left:5px solid transparent;content:" ";font-size:0;line-height:0}')}function Xa(e){let t,i;return t=new Ya({props:{$$slots:{default:[Za]},$$scope:{ctx:e}}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};16777445&i[0]&&(r.$$scope={dirty:i,ctx:e}),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Za(e){let t,i,r,n,a;return{c(){t=P("div"),i=P("div"),r=M(e[2]),n=I(),a=P("div"),U(i,"class","content svelte-1jbbzcj"),U(a,"class","tooltip-pointer svelte-1jbbzcj"),U(a,"style",e[7]),U(t,"class","tooltip svelte-1jbbzcj"),U(t,"style",e[6]),z(t,"active",e[0])},m(s,o){k(s,t,o),A(t,i),A(i,r),A(t,n),A(t,a),e[23](t)},p(e,i){4&i[0]&&j(r,e[2]),128&i[0]&&U(a,"style",e[7]),64&i[0]&&U(t,"style",e[6]),1&i[0]&&z(t,"active",e[0])},d(i){i&&L(t),e[23](null)}}}function Ja(e){let t,i,r,n,a,s,o=e[21].default,l=b(o,e,e[24],null),u=e[2]&&!e[1]&&Xa(e);return{c(){t=P("div"),l&&l.c(),i=I(),u&&u.c(),r=N(),U(t,"class","tooltip-wrapper svelte-1jbbzcj"),z(t,"full-width",e[3])},m(o,c){k(o,t,c),l&&l.m(t,null),e[22](t),k(o,i,c),u&&u.m(o,c),k(o,r,c),n=!0,a||(s=[V(t,"mouseenter",e[10]),V(t,"mousemove",e[10]),V(t,"mouseleave",e[11]),V(t,"mousedown",e[11]),V(t,"mouseup",e[10])],a=!0)},p(e,i){l&&l.p&&(!n||16777216&i[0])&&$(l,o,e,e[24],n?S(o,e[24],i,null):_(e[24]),null),(!n||8&i[0])&&z(t,"full-width",e[3]),e[2]&&!e[1]?u?(u.p(e,i),6&i[0]&&be(u,1)):(u=Xa(e),u.c(),be(u,1),u.m(r.parentNode,r)):u&&(ge(),ye(u,1,1,(()=>{u=null})),ve())},i(e){n||(be(l,e),be(u),n=!0)},o(e){ye(l,e),ye(u),n=!1},d(n){n&&(L(t),L(i),L(r)),l&&l.d(n),e[22](null),u&&u.d(n),a=!1,d(s)}}}function es(e,t,i){let r,n,s,o,l,{$$slots:u={},$$scope:c}=t,{isMobile:d=!1}=t,{content:p=""}=t,{active:h=!1}=t,{translateX:f=0}=t,{translateY:m=0}=t,{isFullWidthWrapper:g=!1}=t,{maxTooltipWidth:b}=t,{placement:y="top"}=t,{onVisibilityChange:S=a.noop}=t,$=0,_=0,T=0,w=0,E=Oe(),x=et(),A=x.ui.playerSize;v(e,A,(e=>i(27,n=e)));let C=x.ui.overlayContainer$;v(e,C,(e=>i(26,r=e)));let k,L,R=x.getLogger().createComponentLog("Tooltip component"),P=()=>{switch(y){case"top":(()=>{if(!r||!o||!s)return;i(18,_=5);let e=r.getBoundingClientRect(),t=s.getBoundingClientRect(),a=t.width,l=o.clientWidth,u=n.width,c=(a-l)/2,d=t.left+f-e.left,p=d+c,h=t.top+m-e.top,g=l/2-5,v=p+l>u-8;p<8&&(p=8,g=d+t.width/2-12.5),v&&(p=u-8-l,g=t.left-e.left+t.width/2-p-5),i(19,T=p),i(20,w=h),i(17,$=g)})();break;case"bottom":!r||!o||!s||i(18,_=-5);break;case"left":(()=>{if(!r||!o||!s)return;i(17,$=5);let e=r.getBoundingClientRect(),t=s.getBoundingClientRect(),n=t.height,a=o.clientHeight,l=(n-a)/2+a,u=t.left+f-e.left-o.clientWidth-5;u<8&&(u=8);let c=t.top+m-e.top+l,d=2-l/2;i(19,T=u),i(20,w=c),i(18,_=d),i(17,$=-3)})();break;default:!r||!o||!s||i(17,$=-5)}},O=()=>{try{if(!r||!s)return;P(),i(0,h=!0)}catch(e){R({message:String(e)})}};return Q(P),Y((()=>window.clearTimeout(l))),e.$$set=e=>{"isMobile"in e&&i(1,d=e.isMobile),"content"in e&&i(2,p=e.content),"active"in e&&i(0,h=e.active),"translateX"in e&&i(12,f=e.translateX),"translateY"in e&&i(13,m=e.translateY),"isFullWidthWrapper"in e&&i(3,g=e.isFullWidthWrapper),"maxTooltipWidth"in e&&i(14,b=e.maxTooltipWidth),"placement"in e&&i(15,y=e.placement),"onVisibilityChange"in e&&i(16,S=e.onVisibilityChange),"$$scope"in e&&i(24,c=e.$$scope)},e.$$.update=()=>{65537&e.$$.dirty[0]&&S(h),1966080&e.$$.dirty[0]&&(i(6,k=((e,t)=>{let i="";switch(y){case"top":default:i=`transform: translate(${e}px, ${t}px);`;break;case"bottom":i=`transform: translate(${e}px, ${t}px); top: auto; bottom: 100%;`;break;case"left":i=`transform: translate(${e}px, ${t}px); left: 0; right: auto;`}return i+=` max-width: ${void 0===b?"auto":`${b}px`};`,i})(T,w)),i(7,L=((e,t)=>{let i="";switch(y){case"top":i=`transform: translate(${e}px, ${t}px) rotate(0); top: auto; bottom: 0;`;break;case"bottom":i=`transform: translate(${e}px, ${t}px) rotate(180deg); top: 0; bottom: auto;`;break;case"left":i=`transform: translate(${e}px, ${t}px) rotate(-90deg); left: 100%; top: auto; bottom: 0;`;break;default:i=`transform: translate(${e}px, ${t}px) rotate(90deg); right: 100%; top: auto; bottom: 0;`}return i})($,_)))},[h,d,p,g,s,o,k,L,A,C,()=>{o&&(l||(l=window.setTimeout(O,E.controls.hideTimeoutTooltips)),h&&O())},()=>{i(0,h=!1),window.clearTimeout(l),l=void 0},f,m,b,y,S,$,_,T,w,u,function(e){te[e?"unshift":"push"]((()=>{s=e,i(4,s)}))},function(e){te[e?"unshift":"push"]((()=>{o=e,i(5,o)}))},c]}var ts=class extends Le{constructor(e){super(),Ce(this,e,es,Ja,h,{isMobile:1,content:2,active:0,translateX:12,translateY:13,isFullWidthWrapper:3,maxTooltipWidth:14,placement:15,onVisibilityChange:16},Ka,[-1,-1])}};function is(e){C(e,"svelte-p9r045",".btn-container.svelte-p9r045{position:relative;display:flex;align-items:center;height:100%;transition:var(--button-hover-transition);will-change:opacity;-webkit-tap-highlight-color:transparent}.w-max.svelte-p9r045{width:100%;min-width:0}")}function rs(e){let t,i=e[19].default,r=b(i,e,e[24],null);return{c(){r&&r.c()},m(e,i){r&&r.m(e,i),t=!0},p(e,n){r&&r.p&&(!t||16777216&n)&&$(r,i,e,e[24],t?S(i,e[24],n,null):_(e[24]),null)},i(e){t||(be(r,e),t=!0)},o(e){ye(r,e),t=!1},d(e){r&&r.d(e)}}}function ns(e){let t,i;return t=new ts({props:{content:e[11],translateX:e[9],translateY:e[10],isFullWidthWrapper:e[4],active:e[5],placement:e[6],onVisibilityChange:e[8],$$slots:{default:[as]},$$scope:{ctx:e}}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};2048&i&&(r.content=e[11]),512&i&&(r.translateX=e[9]),1024&i&&(r.translateY=e[10]),16&i&&(r.isFullWidthWrapper=e[4]),32&i&&(r.active=e[5]),64&i&&(r.placement=e[6]),256&i&&(r.onVisibilityChange=e[8]),16777216&i&&(r.$$scope={dirty:i,ctx:e}),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function as(e){let t,i=e[19].default,r=b(i,e,e[24],null);return{c(){r&&r.c()},m(e,i){r&&r.m(e,i),t=!0},p(e,n){r&&r.p&&(!t||16777216&n)&&$(r,i,e,e[24],t?S(i,e[24],n,null):_(e[24]),null)},i(e){t||(be(r,e),t=!0)},o(e){ye(r,e),t=!1},d(e){r&&r.d(e)}}}function ss(e){let t,i,r,n,a,s,o,l,u,c=[ns,rs],p=[];function h(e,t){return e[3]&&e[11]&&!e[12]?0:1}return i=h(e),r=p[i]=c[i](e),{c(){t=P("div"),r.c(),U(t,"class",n="btn-container "+e[2]+" svelte-p9r045"),U(t,"aria-hidden",a=e[7]||null)},m(r,n){k(r,t,n),p[i].m(t,null),e[23](t),o=!0,l||(u=[w(s=Un.call(null,t)),V(t,"fd:resize",e[22]),V(t,"pointerdown",B(e[20])),V(t,"click",B(e[21]))],l=!0)},p(e,[s]){let l=i;i=h(e),i===l?p[i].p(e,s):(ge(),ye(p[l],1,1,(()=>{p[l]=null})),ve(),r=p[i],r?r.p(e,s):(r=p[i]=c[i](e),r.c()),be(r,1),r.m(t,null)),(!o||4&s&&n!==(n="btn-container "+e[2]+" svelte-p9r045"))&&U(t,"class",n),(!o||128&s&&a!==(a=e[7]||null))&&U(t,"aria-hidden",a)},i(e){o||(be(r),o=!0)},o(e){ye(r),o=!1},d(r){r&&L(t),p[i].d(),e[23](null),l=!1,d(u)}}}function os(e,t,i){let r,n,{$$slots:s={},$$scope:o}=t,{className:l=""}=t,{disabled:u=!1}=t,{hasTooltip:c=!0}=t,{ref:d}=t,{width:p}=t,{isFullWidthTooltip:h=!0}=t,{tooltipContent:f=""}=t,{tooltipActive:m=!1}=t,{tooltipPlacement:g="top"}=t,{disabledTooltipContent:b=Pt("tooltip_button_disabled")}=t,{isAriaHidden:y=!1}=t,{onTooltipVisibilityChange:S=a.noop}=t,{initialTranslateXPx:$=0}=t,{initialTranslateYPx:_=-18}=t,T=et(),w=T.ui.isMobile;v(e,w,(e=>i(12,n=e)));let E,x=T.state.graphIsOpened$;v(e,x,(e=>i(18,r=e)));return e.$$set=e=>{"className"in e&&i(2,l=e.className),"disabled"in e&&i(15,u=e.disabled),"hasTooltip"in e&&i(3,c=e.hasTooltip),"ref"in e&&i(0,d=e.ref),"width"in e&&i(1,p=e.width),"isFullWidthTooltip"in e&&i(4,h=e.isFullWidthTooltip),"tooltipContent"in e&&i(16,f=e.tooltipContent),"tooltipActive"in e&&i(5,m=e.tooltipActive),"tooltipPlacement"in e&&i(6,g=e.tooltipPlacement),"disabledTooltipContent"in e&&i(17,b=e.disabledTooltipContent),"isAriaHidden"in e&&i(7,y=e.isAriaHidden),"onTooltipVisibilityChange"in e&&i(8,S=e.onTooltipVisibilityChange),"initialTranslateXPx"in e&&i(9,$=e.initialTranslateXPx),"initialTranslateYPx"in e&&i(10,_=e.initialTranslateYPx),"$$scope"in e&&i(24,o=e.$$scope)},e.$$.update=()=>{491520&e.$$.dirty&&i(11,E=u?r?Pt("tooltip_disabled_when_graph_on"):b:f)},[d,p,l,c,h,m,g,y,S,$,_,E,n,w,x,u,f,b,r,s,function(t){J.call(this,e,t)},function(t){J.call(this,e,t)},e=>{i(1,p=e.target.clientWidth)},function(e){te[e?"unshift":"push"]((()=>{d=e,i(0,d)}))},o]}var ls=class extends Le{constructor(e){super(),Ce(this,e,os,ss,h,{className:2,disabled:15,hasTooltip:3,ref:0,width:1,isFullWidthTooltip:4,tooltipContent:16,tooltipActive:5,tooltipPlacement:6,disabledTooltipContent:17,isAriaHidden:7,onTooltipVisibilityChange:8,initialTranslateXPx:9,initialTranslateYPx:10},is)}};function us(e){let t,i,r,n,a,s;return{c(){t=O("svg"),i=O("rect"),n=O("path"),U(i,"width","20"),U(i,"height","20"),U(i,"rx","10"),U(i,"fill","white"),U(i,"fill-opacity",r=e[0]?1:.24),U(n,"d","M12.5259 8.68864L12.587 8.87536L12.3702 8.23648C12.236 7.84095 11.8295 7.60563 11.4192 7.68593C10.9471 7.77831 10.6508 8.24892 10.7718 8.71381L10.8968 9.19361L10.6671 8.33855C10.5566 7.92714 10.1475 7.67011 9.72832 7.74872C9.32282 7.82476 9.04808 8.18606 9.06319 8.57993L8.34064 5.64592C8.21338 5.12912 7.64646 4.85578 7.1621 5.07767C6.79216 5.24715 6.59467 5.65495 6.69131 6.0498L7.98547 11.3373L6.87 10.178C6.52545 9.81987 5.94024 9.86103 5.64933 10.2638C5.44455 10.5474 5.44907 10.9312 5.66048 11.2098L7.89246 14.1518C7.89246 14.1518 9.12075 15.9833 12.1932 15.3769C14.6243 14.8972 15.4434 12.7097 14.7748 10.4997L14.2213 8.20869C14.0975 7.69621 13.5537 7.40646 13.0585 7.58916C12.614 7.75319 12.3788 8.23875 12.5259 8.68864Z"),U(n,"fill",a=e[0]?"var(--interactive-episode-complete)":"white"),U(t,"width","20"),U(t,"height","20"),U(t,"viewBox","0 0 20 20"),U(t,"fill","none"),U(t,"xmlns","http://www.w3.org/2000/svg"),U(t,"aria-hidden","true"),U(t,"data-testid",(e[0],s="interactive-episode-completed-icon"))},m(e,r){k(e,t,r),A(t,i),A(t,n)},p(e,[o]){1&o&&r!==(r=e[0]?1:.24)&&U(i,"fill-opacity",r),1&o&&a!==(a=e[0]?"var(--interactive-episode-complete)":"white")&&U(n,"fill",a),1&o&&s!==(e[0],s="interactive-episode-completed-icon")&&U(t,"data-testid",s)},i:o,o,d(e){e&&L(t)}}}function cs(e,t,i){let{completed:r}=t;return e.$$set=e=>{"completed"in e&&i(0,r=e.completed)},[r]}var ds=class extends Le{constructor(e){super(),Ce(this,e,cs,us,h,{completed:0})}};function ps(e){C(e,"svelte-bklhpe",".interactive-episode-icon.svelte-bklhpe{width:20px;height:20px;position:absolute;transform:translateX(-50%);cursor:default}.interactive-episode-icon.disabled.svelte-bklhpe{pointer-events:none;opacity:0.4}")}function hs(e){let t,i,r,n,a,s,o;return i=new ds({props:{completed:!!e[0].completed}}),{c(){t=P("div"),Ee(i.$$.fragment),U(t,"class","interactive-episode-icon svelte-bklhpe"),U(t,"style",r=`left: ${e[0].from+e[0].width/2}%`),z(t,"disabled",e[1])},m(r,l){k(r,t,l),xe(i,t,null),a=!0,s||(o=[w(n=Un.call(null,t)),V(t,"fd:resize",e[3])],s=!0)},p(e,n){let s={};1&n&&(s.completed=!!e[0].completed),i.$set(s),(!a||1&n&&r!==(r=`left: ${e[0].from+e[0].width/2}%`))&&U(t,"style",r),(!a||2&n)&&z(t,"disabled",e[1])},i(e){a||(be(i.$$.fragment,e),a=!0)},o(e){ye(i.$$.fragment,e),a=!1},d(e){e&&L(t),Ae(i),s=!1,d(o)}}}function fs(e){let t,i;return t=new ls({props:{tooltipContent:Pt(e[0].completed?"tooltip_episode_finished":"tooltip_episode_unfinished"),initialTranslateXPx:-10,initialTranslateYPx:-10,disabled:e[1],width:e[2]||0,isAriaHidden:!0,isFullWidthTooltip:!1,$$slots:{default:[hs]},$$scope:{ctx:e}}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,[i]){let r={};1&i&&(r.tooltipContent=Pt(e[0].completed?"tooltip_episode_finished":"tooltip_episode_unfinished")),2&i&&(r.disabled=e[1]),4&i&&(r.width=e[2]||0),23&i&&(r.$$scope={dirty:i,ctx:e}),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function ms(e,t,i){let r,{videoEpisode:n}=t,{disabled:a}=t;return e.$$set=e=>{"videoEpisode"in e&&i(0,n=e.videoEpisode),"disabled"in e&&i(1,a=e.disabled)},[n,a,r,e=>{i(2,r=e.target.clientWidth)}]}var gs=class extends Le{constructor(e){super(),Ce(this,e,ms,fs,h,{videoEpisode:0,disabled:1},ps)}};function vs(e){C(e,"svelte-1rzxunm",".video-episodes-wrap.svelte-1rzxunm{position:absolute;width:100%;height:100%}.video-episode.svelte-1rzxunm{position:absolute;height:calc(3 * var(--slider-height));box-sizing:border-box;margin-top:-5px;padding:var(--slider-height) var(--slider-video-episode-gap);transition:transform 0.2s}.video-episode.svelte-1rzxunm:not(.disabled):where(:hover, :active){transform:scaleY(1.5)}.video-episode-inner.svelte-1rzxunm,.video-episode-loaded.svelte-1rzxunm,.video-episode-filled.svelte-1rzxunm{position:absolute;height:var(--slider-height);border-radius:var(--slider-radius)}.video-episode-inner.svelte-1rzxunm{position:absolute;overflow:hidden;width:calc(100% - 2 * var(--slider-video-episode-gap));background:var(--slider-bg)}.video-episode-loaded.svelte-1rzxunm{position:absolute;left:-100%;width:100%;height:100%;border-radius:var(--slider-radius);background:var(--slider-loaded-bg);transition:transform 0.2s}.video-episode-filled.svelte-1rzxunm{position:absolute;left:-100%;width:100%;height:100%;border-radius:var(--slider-radius);background-color:var(--slider-filled-bg)}")}function bs(e,t,i){let r=e.slice();return r[3]=t[i],r}function ys(e){let t,i,r,n,a,s,o,l,u;return{c(){t=P("div"),i=P("div"),r=P("div"),a=I(),s=P("div"),l=I(),U(r,"class","video-episode-loaded svelte-1rzxunm"),U(r,"style",n=`transform: translateX(${e[3].loadedWidth/e[3].width*100}%)`),U(s,"class","video-episode-filled svelte-1rzxunm"),U(s,"style",o=`transform: translateX(${e[3].filledWidth/e[3].width*100}%)`),z(s,"mobile",e[1]),U(i,"class","video-episode-inner svelte-1rzxunm"),U(t,"class","video-episode svelte-1rzxunm"),U(t,"style",u=`left: ${e[3].from}%; width: ${e[3].width}%`),z(t,"disabled",e[2]),z(t,"mobile",e[1])},m(e,n){k(e,t,n),A(t,i),A(i,r),A(i,a),A(i,s),A(t,l)},p(e,i){1&i&&n!==(n=`transform: translateX(${e[3].loadedWidth/e[3].width*100}%)`)&&U(r,"style",n),1&i&&o!==(o=`transform: translateX(${e[3].filledWidth/e[3].width*100}%)`)&&U(s,"style",o),2&i&&z(s,"mobile",e[1]),1&i&&u!==(u=`left: ${e[3].from}%; width: ${e[3].width}%`)&&U(t,"style",u),4&i&&z(t,"disabled",e[2]),2&i&&z(t,"mobile",e[1])},d(e){e&&L(t)}}}function Ss(e){let t,i=Se(e[0]),r=[];for(let t=0;t<i.length;t+=1)r[t]=ys(bs(e,i,t));return{c(){t=P("div");for(let e=0;e<r.length;e+=1)r[e].c();U(t,"class","video-episodes-wrap svelte-1rzxunm")},m(e,i){k(e,t,i);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null)},p(e,[n]){if(7&n){let a;for(i=Se(e[0]),a=0;a<i.length;a+=1){let s=bs(e,i,a);r[a]?r[a].p(s,n):(r[a]=ys(s),r[a].c(),r[a].m(t,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},i:o,o,d(e){e&&L(t),R(r,e)}}}function $s(e,t,i){let{videoEpisodes:r=[]}=t,{isMobile:n}=t,{disabled:a}=t;return e.$$set=e=>{"videoEpisodes"in e&&i(0,r=e.videoEpisodes),"isMobile"in e&&i(1,n=e.isMobile),"disabled"in e&&i(2,a=e.disabled)},[r,n,a]}var _s=class extends Le{constructor(e){super(),Ce(this,e,$s,Ss,h,{videoEpisodes:0,isMobile:1,disabled:2},vs)}};function Ts(e){C(e,"svelte-v8ydei",".interactive-icons.svelte-v8ydei.svelte-v8ydei{position:absolute;width:calc(100% - 20px);top:-28px}.interactive-icons.mobile.svelte-v8ydei.svelte-v8ydei{top:-10px}.slider.svelte-v8ydei.svelte-v8ydei{position:relative;height:var(--slider-height);border-radius:var(--slider-radius);cursor:pointer;transition:visibility 0.2s, opacity 0.2s;will-change:opacity, transform;width:100%;touch-action:none;-webkit-tap-highlight-color:transparent}.no-handle.svelte-v8ydei.svelte-v8ydei{cursor:default}.slider.svelte-v8ydei.svelte-v8ydei:before{content:'';position:absolute;left:0;right:0;top:calc(-1 * (var(--controls-height) / 2 - var(--slider-height)) / 2);height:calc(var(--controls-height) / 2)}.bars.svelte-v8ydei.svelte-v8ydei{position:absolute;width:100%;height:100%;border-radius:var(--slider-radius);overflow:hidden;background:var(--slider-bg)}.loaded.svelte-v8ydei.svelte-v8ydei{position:absolute;left:-100%;width:100%;height:100%;border-radius:var(--slider-radius);background:var(--slider-loaded-bg);transition:transform 0.2s}.filled.svelte-v8ydei.svelte-v8ydei{position:absolute;left:-100%;width:100%;height:100%;border-radius:var(--slider-radius);background-color:var(--slider-filled-bg)}.slider.square.svelte-v8ydei.svelte-v8ydei,.slider.square.svelte-v8ydei>.bars.svelte-v8ydei,.slider.square.svelte-v8ydei .loaded.svelte-v8ydei,.slider.square.svelte-v8ydei .filled.svelte-v8ydei{border-radius:unset}.filled.active-live.svelte-v8ydei.svelte-v8ydei{background-color:var(--slider-filled-active-live-bg)}.filled.ads.svelte-v8ydei.svelte-v8ydei{background-color:var(--slider-filled-ads)}.handleWrap.svelte-v8ydei.svelte-v8ydei{position:absolute;left:-100%;width:100%}.handle.svelte-v8ydei.svelte-v8ydei{position:absolute;width:var(--slider-handle-size);height:var(--slider-handle-size);right:calc(-1 * var(--slider-handle-size) / 2);top:calc((var(--slider-height) - var(--slider-handle-size)) / 2);border-radius:50%;background-color:var(--slider-filled-bg);visibility:hidden;opacity:0;transform:scale(0);transition:opacity 0.2s, transform 0.2s, visibility 0.2s;will-change:opacity, transform}.handle.active-live.svelte-v8ydei.svelte-v8ydei{background-color:var(--slider-filled-active-live-bg)}.slider.svelte-v8ydei:hover .handle.svelte-v8ydei,.slider-dragging.svelte-v8ydei .handle.svelte-v8ydei{visibility:visible;opacity:1;transform:scale(1)}.slider-dragging.svelte-v8ydei .handle.svelte-v8ydei{transform:scale(1.3)}.slider-vertical.svelte-v8ydei.svelte-v8ydei{position:absolute;left:-8px;top:-18px;transform-origin:0 0;transform:rotate(-90deg)}.slider.disabled.svelte-v8ydei.svelte-v8ydei{cursor:default;opacity:0.4}")}function ws(e,t,i){let r=e.slice();return r[50]=t[i],r}function Es(e){let t,i,r=Se(e[21]),n=[];for(let t=0;t<r.length;t+=1)n[t]=As(ws(e,r,t));let a=e=>ye(n[e],1,1,(()=>{n[e]=null}));return{c(){t=P("div");for(let e=0;e<n.length;e+=1)n[e].c();U(t,"class","interactive-icons svelte-v8ydei"),z(t,"mobile",e[6]),z(t,"hidden",e[6]&&!e[20])},m(e,r){k(e,t,r);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null);i=!0},p(e,s){if(2098176&s[0]){let i;for(r=Se(e[21]),i=0;i<r.length;i+=1){let a=ws(e,r,i);n[i]?(n[i].p(a,s),be(n[i],1)):(n[i]=As(a),n[i].c(),be(n[i],1),n[i].m(t,null))}for(ge(),i=r.length;i<n.length;i+=1)a(i);ve()}(!i||64&s[0])&&z(t,"mobile",e[6]),(!i||1048640&s[0])&&z(t,"hidden",e[6]&&!e[20])},i(e){if(!i){for(let e=0;e<r.length;e+=1)be(n[e]);i=!0}},o(e){n=n.filter(Boolean);for(let e=0;e<n.length;e+=1)ye(n[e]);i=!1},d(e){e&&L(t),R(n,e)}}}function xs(e){let t,i;return t=new gs({props:{videoEpisode:e[50],disabled:e[10]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};2097152&i[0]&&(r.videoEpisode=e[50]),1024&i[0]&&(r.disabled=e[10]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function As(e){let t,i,r=e[50].interactive&&xs(e);return{c(){r&&r.c(),t=N()},m(e,n){r&&r.m(e,n),k(e,t,n),i=!0},p(e,i){e[50].interactive?r?(r.p(e,i),2097152&i[0]&&be(r,1)):(r=xs(e),r.c(),be(r,1),r.m(t.parentNode,t)):r&&(ge(),ye(r,1,1,(()=>{r=null})),ve())},i(e){i||(be(r),i=!0)},o(e){ye(r),i=!1},d(e){e&&L(t),r&&r.d(e)}}}function Cs(e){let t,i,r,n,a,s;return{c(){t=P("div"),i=P("div"),n=I(),a=P("div"),U(i,"class","loaded svelte-v8ydei"),U(i,"style",r=`transform: translateX(${100*e[12]}%);`),U(a,"class","filled svelte-v8ydei"),U(a,"style",s=`transform: translateX(${100*e[13]}%);`),z(a,"active-live",e[5]),z(a,"ads",e[7]),U(t,"class","bars svelte-v8ydei")},m(e,r){k(e,t,r),A(t,i),A(t,n),A(t,a)},p(e,t){4096&t[0]&&r!==(r=`transform: translateX(${100*e[12]}%);`)&&U(i,"style",r),8192&t[0]&&s!==(s=`transform: translateX(${100*e[13]}%);`)&&U(a,"style",s),32&t[0]&&z(a,"active-live",e[5]),128&t[0]&&z(a,"ads",e[7])},i:o,o,d(e){e&&L(t)}}}function ks(e){let t,i;return t=new _s({props:{videoEpisodes:e[21],disabled:e[10],isMobile:e[6]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};2097152&i[0]&&(r.videoEpisodes=e[21]),1024&i[0]&&(r.disabled=e[10]),64&i[0]&&(r.isMobile=e[6]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Ls(e){let t,i,r,n,a,s,o,l,u,c,p,h,f,m=e[9]&&Es(e),g=[ks,Cs],v=[];function b(e,t){return e[21].length?0:1}return r=b(e),n=v[r]=g[r](e),{c(){m&&m.c(),t=I(),i=P("div"),n.c(),a=I(),s=P("div"),o=P("div"),U(o,"class","handle svelte-v8ydei"),z(o,"active-live",e[5]),U(s,"class","handleWrap svelte-v8ydei"),U(s,"style",l=`transform: translateX(${100*e[14]}%);`),z(s,"hidden",e[11]),U(i,"class",u="slider "+e[1]+" svelte-v8ydei"),U(i,"aria-label",e[15]),U(i,"aria-valuemin",e[16]),U(i,"aria-valuemax",e[17]),U(i,"aria-valuenow",e[18]),U(i,"aria-valuetext",e[19]),U(i,"role","slider"),U(i,"tabindex","0"),U(i,"data-testid",c=e[2]??null),z(i,"disabled",e[10]),z(i,"slider-dragging",e[20]),z(i,"hidden",e[3]),z(i,"slider-vertical",e[4]),z(i,"no-handle",e[11]),z(i,"square",e[8])},m(n,l){m&&m.m(n,l),k(n,t,l),k(n,i,l),v[r].m(i,null),A(i,a),A(i,s),A(s,o),e[44](i),p=!0,h||(f=[V(i,"pointerdown",D(e[22])),V(i,"pointermove",D(e[23])),V(i,"pointerup",D(e[24])),V(i,"pointerenter",D(e[25])),V(i,"pointerleave",D(e[26])),V(i,"click",B(e[28])),V(i,"wheel",e[27])],h=!0)},p(e,d){e[9]?m?(m.p(e,d),512&d[0]&&be(m,1)):(m=Es(e),m.c(),be(m,1),m.m(t.parentNode,t)):m&&(ge(),ye(m,1,1,(()=>{m=null})),ve());let h=r;r=b(e),r===h?v[r].p(e,d):(ge(),ye(v[h],1,1,(()=>{v[h]=null})),ve(),n=v[r],n?n.p(e,d):(n=v[r]=g[r](e),n.c()),be(n,1),n.m(i,a)),(!p||32&d[0])&&z(o,"active-live",e[5]),(!p||16384&d[0]&&l!==(l=`transform: translateX(${100*e[14]}%);`))&&U(s,"style",l),(!p||2048&d[0])&&z(s,"hidden",e[11]),(!p||2&d[0]&&u!==(u="slider "+e[1]+" svelte-v8ydei"))&&U(i,"class",u),(!p||32768&d[0])&&U(i,"aria-label",e[15]),(!p||65536&d[0])&&U(i,"aria-valuemin",e[16]),(!p||131072&d[0])&&U(i,"aria-valuemax",e[17]),(!p||262144&d[0])&&U(i,"aria-valuenow",e[18]),(!p||524288&d[0])&&U(i,"aria-valuetext",e[19]),(!p||4&d[0]&&c!==(c=e[2]??null))&&U(i,"data-testid",c),(!p||1026&d[0])&&z(i,"disabled",e[10]),(!p||1048578&d[0])&&z(i,"slider-dragging",e[20]),(!p||10&d[0])&&z(i,"hidden",e[3]),(!p||18&d[0])&&z(i,"slider-vertical",e[4]),(!p||2050&d[0])&&z(i,"no-handle",e[11]),(!p||258&d[0])&&z(i,"square",e[8])},i(e){p||(be(m),be(n),p=!0)},o(e){ye(m),ye(n),p=!1},d(n){n&&(L(t),L(i)),m&&m.d(n),v[r].d(),e[44](null),h=!1,d(f)}}}function Rs(e,t,i){let r,n,s,o,{ref:l}=t,{className:u=""}=t,{testId:c}=t,{isHidden:d=!1}=t,{isVertical:p=!1}=t,{isActiveLive:h=!1}=t,{isMobile:f=!1}=t,{isAds:m=!1}=t,{squareBorders:g=!1}=t,{videoEpisodes:v=[]}=t,{withWheelHandler:b=!1}=t,{isInteractive:y=!1}=t,{disabled:S=!1}=t,{hideHandel:$=!1}=t,{onPointerDown:_=a.noop}=t,{onHandleMove:T=a.noop}=t,{onPointerUp:w=a.noop}=t,{onPointerEnter:E=a.noop}=t,{onPointerMove:x=a.noop}=t,{onPointerLeave:A=a.noop}=t,{onWheelUp:C=a.noop}=t,{onWheelDown:k=a.noop}=t,{onWheelLeft:L=a.noop}=t,{onWheelRight:R=a.noop}=t,{onDisabledClick:P=a.noop}=t,{loadedProgress:O=0}=t,{filledProgress:M=0}=t,{handleProgress:I=0}=t,{ariaLabel:N=""}=t,{ariaValueMin:V}=t,{ariaValueMax:D}=t,{ariaValueNow:B}=t,{ariaValueText:U=""}=t,F=Oe(),j=!1;function H(e,t){return p?Math.max(0,Math.min(1,(s.height-(t-s.top))/s.height)):Math.min(Math.max(e-s.x,0),s.width)/s.width}function z(e){return Math.min(Math.max(e-s.x,0),s.width)}return e.$$set=e=>{"ref"in e&&i(0,l=e.ref),"className"in e&&i(1,u=e.className),"testId"in e&&i(2,c=e.testId),"isHidden"in e&&i(3,d=e.isHidden),"isVertical"in e&&i(4,p=e.isVertical),"isActiveLive"in e&&i(5,h=e.isActiveLive),"isMobile"in e&&i(6,f=e.isMobile),"isAds"in e&&i(7,m=e.isAds),"squareBorders"in e&&i(8,g=e.squareBorders),"videoEpisodes"in e&&i(29,v=e.videoEpisodes),"withWheelHandler"in e&&i(30,b=e.withWheelHandler),"isInteractive"in e&&i(9,y=e.isInteractive),"disabled"in e&&i(10,S=e.disabled),"hideHandel"in e&&i(11,$=e.hideHandel),"onPointerDown"in e&&i(31,_=e.onPointerDown),"onHandleMove"in e&&i(32,T=e.onHandleMove),"onPointerUp"in e&&i(33,w=e.onPointerUp),"onPointerEnter"in e&&i(34,E=e.onPointerEnter),"onPointerMove"in e&&i(35,x=e.onPointerMove),"onPointerLeave"in e&&i(36,A=e.onPointerLeave),"onWheelUp"in e&&i(37,C=e.onWheelUp),"onWheelDown"in e&&i(38,k=e.onWheelDown),"onWheelLeft"in e&&i(39,L=e.onWheelLeft),"onWheelRight"in e&&i(40,R=e.onWheelRight),"onDisabledClick"in e&&i(41,P=e.onDisabledClick),"loadedProgress"in e&&i(12,O=e.loadedProgress),"filledProgress"in e&&i(13,M=e.filledProgress),"handleProgress"in e&&i(14,I=e.handleProgress),"ariaLabel"in e&&i(15,N=e.ariaLabel),"ariaValueMin"in e&&i(16,V=e.ariaValueMin),"ariaValueMax"in e&&i(17,D=e.ariaValueMax),"ariaValueNow"in e&&i(18,B=e.ariaValueNow),"ariaValueText"in e&&i(19,U=e.ariaValueText)},e.$$.update=()=>{131072&e.$$.dirty[0]&&i(42,o=D??0),536870912&e.$$.dirty[0]|2048&e.$$.dirty[1]&&i(43,r=v[v.length-1]?.time<o),536883200&e.$$.dirty[0]|6144&e.$$.dirty[1]&&i(21,n=v.length&&r&&o?function(e,t){let i=F.features.episodesClustering&&!y?F.episodeMinWidthPc:0,r=[],n=v[0].time/o*100,a=0,s=0;for(let l=1;l<v.length;l++)a=v[l].time/o*100,a-n>i&&(r.push({from:n,width:Math.max(0,a-n),loadedWidth:Math.max(0,Math.min(a,e)-n),filledWidth:Math.max(0,Math.min(a,t)-n),interactive:v[l-1].interactive,completed:v[l-1].completed}),n=v[l].time/o*100,s++);let l={from:n,width:Math.max(0,100-n),loadedWidth:Math.max(0,Math.min(e,100)-n),filledWidth:Math.max(0,Math.min(t,100)-n),interactive:v[s].interactive,completed:v[s].completed};100-n<i?(s-=1,r[s].width+=100-n,r[s].loadedWidth+=Math.max(0,Math.min(e,100)-n),r[s].filledWidth+=Math.max(0,Math.min(t,100)-n)):r[s]=l;let u=v[0].time;if(0!==u){let i=u/o*100;r.unshift({from:0,width:i,loadedWidth:Math.min(i,e),filledWidth:Math.min(i,t)})}return r}(100*O,100*M):[])},[l,u,c,d,p,h,f,m,g,y,S,$,O,M,I,N,V,D,B,U,j,n,function(e){if(l&&(s=l.getBoundingClientRect()),S||j||!l)return;i(20,j=!0);let t=H(e.clientX,e.clientY);_(t),l.setPointerCapture(e.pointerId)},function(e){if(S)return;let t=H(e.clientX,e.clientY),i=z(e.clientX);x(t,i,s.width),j&&T(t)},function(e){if(S||!j)return;i(20,j=!1);let t=H(e.clientX,e.clientY);w(t)},function(e){if(l&&(s=l.getBoundingClientRect()),S)return;let t=H(e.clientX,e.clientY),i=z(e.clientX);E(t,i,s.width)},function(){S||A()},function(e){S||b&&(e.preventDefault(),e.deltaY<0?C():e.deltaY>0?k():e.deltaX>0?R():L())},function(e){S&&P(H(e.clientX,e.clientY))},v,b,_,T,w,E,x,A,C,k,L,R,P,o,r,function(e){te[e?"unshift":"push"]((()=>{l=e,i(0,l)}))}]}var Ps=class extends Le{constructor(e){super(),Ce(this,e,Rs,Ls,h,{ref:0,className:1,testId:2,isHidden:3,isVertical:4,isActiveLive:5,isMobile:6,isAds:7,squareBorders:8,videoEpisodes:29,withWheelHandler:30,isInteractive:9,disabled:10,hideHandel:11,onPointerDown:31,onHandleMove:32,onPointerUp:33,onPointerEnter:34,onPointerMove:35,onPointerLeave:36,onWheelUp:37,onWheelDown:38,onWheelLeft:39,onWheelRight:40,onDisabledClick:41,loadedProgress:12,filledProgress:13,handleProgress:14,ariaLabel:15,ariaValueMin:16,ariaValueMax:17,ariaValueNow:18,ariaValueText:19},Ts,[-1,-1])}},Os=(e,t)=>ze[e]>=ze[t],Ms=(e,t)=>ze[e]<=ze[t];function Is(e){C(e,"svelte-1l78lz9",".volumeBar-container.svelte-1l78lz9{display:flex;align-items:center}.volumeBar-container.vertical.svelte-1l78lz9,.vertical.svelte-1l78lz9 .tooltip-wrapper,.vertical.svelte-1l78lz9 .btn{width:40px}.volumeBar.svelte-1l78lz9{display:flex;align-items:center;margin:0 8px;position:relative;width:70px}.volumeBar-slider-vertical{width:50px !important}.volumeBar-vertical.svelte-1l78lz9{padding:0 8px 0 0;width:0}")}function Ns(e){let t,i;return t=new Wa({props:{volume:e[3],muted:e[1]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};8&i[0]&&(r.volume=e[3]),2&i[0]&&(r.muted=e[1]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Vs(e){let t,i;return t=new Sn({props:{className:"btn-full-opacity",disabled:e[9],testId:e[2]?"btn-volume-vertical":"btn-volume-horizontal",ariaLabel:e[7],click:e[0],ariaKeyShortCut:Ie.KeyM,$$slots:{default:[Ns]},$$scope:{ctx:e}}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};512&i[0]&&(r.disabled=e[9]),4&i[0]&&(r.testId=e[2]?"btn-volume-vertical":"btn-volume-horizontal"),128&i[0]&&(r.ariaLabel=e[7]),1&i[0]&&(r.click=e[0]),10&i[0]|32&i[1]&&(r.$$scope={dirty:i,ctx:e}),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Ds(e){let t,i,r;return i=new Ps({props:{className:e[2]?"volumeBar-slider-vertical":"",isHidden:e[2]&&!e[5],isVertical:e[2],withWheelHandler:!0,onWheelUp:e[15],onWheelDown:e[16],onPointerDown:e[14],onHandleMove:e[17],onPointerUp:e[18],onPointerEnter:e[2]?e[19]:a.noop,onPointerLeave:e[2]?e[20]:a.noop,ariaLabel:"Ползунок громкости",ariaValueMin:0,ariaValueMax:100,ariaValueNow:Math.round(100*e[8]),ariaValueText:`${Math.round(100*e[8])}%`,filledProgress:e[8],handleProgress:e[8],testId:e[2]?"volume-slider-vertical":"volume-slider"}}),{c(){t=P("div"),Ee(i.$$.fragment),U(t,"class","volumeBar svelte-1l78lz9"),z(t,"volumeBar-vertical",e[2])},m(e,n){k(e,t,n),xe(i,t,null),r=!0},p(e,n){let s={};4&n[0]&&(s.className=e[2]?"volumeBar-slider-vertical":""),36&n[0]&&(s.isHidden=e[2]&&!e[5]),4&n[0]&&(s.isVertical=e[2]),4&n[0]&&(s.onPointerEnter=e[2]?e[19]:a.noop),4&n[0]&&(s.onPointerLeave=e[2]?e[20]:a.noop),256&n[0]&&(s.ariaValueNow=Math.round(100*e[8])),256&n[0]&&(s.ariaValueText=`${Math.round(100*e[8])}%`),256&n[0]&&(s.filledProgress=e[8]),256&n[0]&&(s.handleProgress=e[8]),4&n[0]&&(s.testId=e[2]?"volume-slider-vertical":"volume-slider"),i.$set(s),(!r||4&n[0])&&z(t,"volumeBar-vertical",e[2])},i(e){r||(be(i.$$.fragment,e),r=!0)},o(e){ye(i.$$.fragment,e),r=!1},d(e){e&&L(t),Ae(i)}}}function Bs(e){let t,i,r,n,s,o;i=new ts({props:{content:e[6],translateY:-18,$$slots:{default:[Vs]},$$scope:{ctx:e}}});let l=e[4]&&Ds(e);return{c(){t=P("div"),Ee(i.$$.fragment),r=I(),l&&l.c(),U(t,"class","volumeBar-container svelte-1l78lz9"),z(t,"vertical",e[2])},m(u,c){k(u,t,c),xe(i,t,null),A(t,r),l&&l.m(t,null),n=!0,s||(o=[V(t,"mouseenter",(function(){p(e[2]?e[21]:a.noop)&&(e[2]?e[21]:a.noop).apply(this,arguments)})),V(t,"mouseleave",(function(){p(e[2]?e[22]:a.noop)&&(e[2]?e[22]:a.noop).apply(this,arguments)})),V(t,"wheel",D(e[23]))],s=!0)},p(r,a){e=r;let s={};64&a[0]&&(s.content=e[6]),655&a[0]|32&a[1]&&(s.$$scope={dirty:a,ctx:e}),i.$set(s),e[4]?l?(l.p(e,a),16&a[0]&&be(l,1)):(l=Ds(e),l.c(),be(l,1),l.m(t,null)):l&&(ge(),ye(l,1,1,(()=>{l=null})),ve()),(!n||4&a[0])&&z(t,"vertical",e[2])},i(e){n||(be(i.$$.fragment,e),be(l),n=!0)},o(e){ye(i.$$.fragment,e),ye(l),n=!1},d(e){e&&L(t),Ae(i),l&&l.d(),s=!1,d(o)}}}function Us(e,t,i){let r,n,a,s,{click:o}=t,l=et(),u=Oe(),c=l.state.volume$;v(e,c,(e=>i(3,r=e)));let d=l.state.muted$;v(e,d,(e=>i(25,s=e)));let p=l.actions.internal.setVolume,h=l.ui.currentGridType$;v(e,h,(e=>i(24,a=e)));let f=l.callbacks?.onAudioDoesNotExistHint,m=l.callbacks?.onAudioDisabledHint,g=l.state.isAudioAvailable$;v(e,g,(e=>i(4,n=e)));let b,y,S,$,_,T,w=l.state.isAudioDisabled,E=!1,x=1,A=!1,C=!1;function k(){rn(l,r,u.controls.volumeStepWheel)}function L(){nn(l,r,u.controls.volumeStepWheel)}function R(){b=window.setTimeout((()=>{A||i(5,E=!1)}),u.controls.volumeBarTimeout)}return e.$$set=e=>{"click"in e&&i(0,o=e.click)},e.$$.update=()=>{33554448&e.$$.dirty[0]&&i(1,$=!n||s),16777216&e.$$.dirty[0]&&i(2,_=Ms(a,"s")),6&e.$$.dirty[0]&&(i(6,y=_?"":Pt($?"tooltip_volume":"tooltip_volume_muted")),i(7,S=Pt($?"tooltip_volume":"tooltip_volume_muted"))),10&e.$$.dirty[0]&&i(8,T=$?0:r),16&e.$$.dirty[0]&&i(9,C=n?w&&!m:!f)},[o,$,_,r,n,E,y,S,T,C,c,d,h,g,function(e){x=r,p(e)},k,L,function(e){p(e)},function(e){p(e,0===e?x:e)},function(){A=!0},function(){A=!1,R()},function(){clearTimeout(b),i(5,E=!0)},function(){R()},function(e){e.deltaY<0?k():e.deltaY>0&&L()},a,s]}var Fs=class extends Le{constructor(e){super(),Ce(this,e,Us,Bs,h,{click:0},Is,[-1,-1])}};function js(e){let t,i,r,n,a,s=e[2].default,o=b(s,e,e[1],null),u=[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{"aria-hidden":"true"},{role:"img"},e[0]],c={};for(let e=0;e<u.length;e+=1)c=l(c,u[e]);return{c(){t=O("svg"),o&&o.c(),i=O("g"),r=O("path"),n=O("path"),U(r,"d","M4.58 13.979a.99.99 0 0 1 .99-.99h4.451a.99.99 0 0 1 .99.99v4.452a.99.99 0 0 1-1.98 0v-2.05l-3.319 3.322a1 1 0 0 1-1.414 0v-.001a1 1 0 0 1 0-1.414l3.32-3.32H5.57a.99.99 0 0 1-.99-.99m10.388-6.36 3.32-3.322a1 1 0 0 1 1.414 0v.001a1 1 0 0 1 0 1.414l-3.32 3.32h2.049a.99.99 0 0 1 0 1.979h-4.442a1 1 0 0 1-1-1V5.569a.99.99 0 1 1 1.98 0z"),U(r,"class","_exit"),U(n,"d","M10.5 19a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-4.5a1 1 0 0 1 2 0v2.072l3.363-3.365a1 1 0 0 1 1.414 0l.016.016a1 1 0 0 1 0 1.414L7.429 18H9.5a1 1 0 0 1 1 1M18 7.429l-3.363 3.364a1 1 0 0 1-1.414 0l-.016-.016a1 1 0 0 1 0-1.414L16.571 6H14.5a1 1 0 0 1 0-2H19a1 1 0 0 1 1 1v4.5a1 1 0 0 1-2 0z"),U(n,"class","_enter"),U(i,"fill","#fff"),U(i,"fill-rule","evenodd"),F(t,c)},m(e,s){k(e,t,s),o&&o.m(t,null),A(t,i),A(i,r),A(i,n),a=!0},p(e,[i]){o&&o.p&&(!a||2&i)&&$(o,s,e,e[1],a?S(s,e[1],i,null):_(e[1]),null),F(t,c=_e(u,[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{"aria-hidden":"true"},{role:"img"},1&i&&e[0]]))},i(e){a||(be(o,e),a=!0)},o(e){ye(o,e),a=!1},d(e){e&&L(t),o&&o.d(e)}}}function Hs(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var zs=class extends Le{constructor(e){super(),Ce(this,e,Hs,js,h,{})}};function qs(e){C(e,"svelte-17t966y",'svg[data-testid="close-fullscreen-icon"] ._enter,svg[data-testid="open-fullscreen-icon"] ._exit{visibility:hidden;opacity:0}')}function Ws(e){let t,i;return t=new zs({props:{"data-testid":e[0]?"close-fullscreen-icon":"open-fullscreen-icon"}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,[i]){let r={};1&i&&(r["data-testid"]=e[0]?"close-fullscreen-icon":"open-fullscreen-icon"),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Gs(e,t,i){let{isFullscreen:r=!1}=t;return e.$$set=e=>{"isFullscreen"in e&&i(0,r=e.isFullscreen)},[r]}var Qs=class extends Le{constructor(e){super(),Ce(this,e,Gs,Ws,h,{isFullscreen:0},qs)}};function Ys(e){let t,i;return t=new Qs({props:{isFullscreen:e[0]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};1&i&&(r.isFullscreen=e[0]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Ks(e){let t,i;return t=new Sn({props:{testId:"btn-fullscreen",ariaLabel:e[2],click:e[1],ariaKeyShortCut:Ie.KeyF,$$slots:{default:[Ys]},$$scope:{ctx:e}}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,[i]){let r={};4&i&&(r.ariaLabel=e[2]),2&i&&(r.click=e[1]),9&i&&(r.$$scope={dirty:i,ctx:e}),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Xs(e,t,i){let r,{isFullscreen:n=!1}=t,{click:s=a.noop}=t;return e.$$set=e=>{"isFullscreen"in e&&i(0,n=e.isFullscreen),"click"in e&&i(1,s=e.click)},e.$$.update=()=>{1&e.$$.dirty&&i(2,r=Pt(n?"tooltip_fullscreen_on":"tooltip_fullscreen_off"))},[n,s,r]}var Zs=class extends Le{constructor(e){super(),Ce(this,e,Xs,Ks,h,{isFullscreen:0,click:1})}};function Js(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"vk-logo-icon"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"fill-rule","evenodd"),U(i,"d","M4.265 4.265C3 5.531 3 7.567 3 11.64v.72c0 4.073 0 6.11 1.265 7.375C5.531 21 7.567 21 11.64 21h.72c4.073 0 6.11 0 7.375-1.265C21 18.469 21 16.433 21 12.36v-.72c0-4.073 0-6.11-1.265-7.375C18.469 3 16.433 3 12.36 3h-.72C7.567 3 5.53 3 4.265 4.265M6 8.5c.096 4.682 2.556 7.5 6.61 7.5h.235v-2.679c1.476.15 2.577 1.254 3.026 2.679H18c-.578-2.132-2.075-3.31-3.005-3.76.93-.558 2.246-1.908 2.556-3.74h-1.937c-.406 1.49-1.615 2.84-2.77 2.968V8.5h-1.968v5.197c-1.197-.3-2.759-1.757-2.823-5.197z"),U(i,"clip-rule","evenodd"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"vk-logo-icon"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function eo(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var to=class extends Le{constructor(e){super(),Ce(this,e,eo,Js,h,{})}};function io(e){let t,i,r,n,a,s,o=e[2].default,u=b(o,e,e[1],null),c=[{xmlns:"http://www.w3.org/2000/svg"},{width:"95"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{role:"img"},e[0]],d={};for(let e=0;e<c.length;e+=1)d=l(d,c[e]);return{c(){t=O("svg"),u&&u.c(),i=O("path"),r=O("path"),n=O("path"),a=O("path"),U(i,"fill","#fff"),U(i,"d","M32.55 17.042h2.494L38.707 7h-1.81l-2.936 8.276h-.286L30.84 7H29zM48.075 17.042l-4.619-5.199L47.718 7h-2.11l-3.563 4.088h-.413V7h-1.71v10.042h1.71V12.74h.427l3.764 4.302z"),U(r,"fill","#fff"),U(r,"d","M57.888 11.886c.883-.342 1.44-1.125 1.44-2.151C59.327 8.14 58.001 7 56.062 7h-3.92v10.042h4.205c1.953 0 3.279-1.14 3.279-2.806 0-1.168-.656-2.037-1.74-2.35m-4.034-3.39h2.21c.911 0 1.539.555 1.539 1.381 0 .812-.628 1.368-1.54 1.368h-2.21zm2.494 7.05h-2.494V12.74h2.494c.898 0 1.525.57 1.525 1.396 0 .84-.627 1.41-1.525 1.41M61.188 17.042h2.323l2.766-5.498h.228v5.498h1.568V9.635h-2.324l-2.765 5.498h-.228V9.635h-1.568zM69.146 19.25h1.64v-2.208h5.33v2.208h1.64v-3.703h-1.283V9.635h-5.431l-.37 3.79c-.13 1.338-.528 2.121-1.34 2.121h-.186zm2.494-3.703c.4-.385.57-1.04.685-2.151l.228-2.265h2.28v4.416zM86.025 13.253c0-2.136-1.597-3.76-3.849-3.76s-3.848 1.61-3.848 3.846 1.596 3.846 3.848 3.846c1.54 0 2.994-.727 3.55-2.137l-1.54-.256c-.356.527-1.04.897-1.91.897-1.254 0-2.081-.77-2.238-1.909h5.958c.015-.156.029-.327.029-.527m-3.849-2.336c1.027 0 1.796.655 2.067 1.581h-4.105c.27-.954 1.04-1.58 2.038-1.58M90.837 17.185c2.324 0 3.963-1.596 3.963-3.846s-1.64-3.846-3.963-3.846-3.962 1.595-3.962 3.846c0 2.25 1.639 3.846 3.962 3.846m0-1.496c-1.34 0-2.252-.954-2.252-2.35s.912-2.35 2.252-2.35 2.252.954 2.252 2.35-.912 2.35-2.252 2.35"),U(r,"class","_ru"),U(n,"fill","#fff"),U(n,"d","M35.02 17.36h-2.484L29 7.422h1.832l2.826 8.188h.284l2.925-8.188h1.803zM43.43 12.215l4.6 5.144h-2.243l-3.749-4.256h-.426v4.256h-1.704V7.423h1.704v4.045h.412l3.55-4.045h2.101zM56.808 17.36h-2.485l-3.536-9.937h1.832l2.826 8.188h.284l2.925-8.188h1.803zM63.257 17.36h-1.633v-7.33h1.633zm-.809-8.373q-.455 0-.738-.268a.97.97 0 0 1-.284-.718.97.97 0 0 1 .284-.72q.297-.28.738-.281.44 0 .724.282a.97.97 0 0 1 .284.719.97.97 0 0 1-.284.718q-.284.268-.724.268M68.382 17.5q-1.037 0-1.86-.48a3.5 3.5 0 0 1-1.293-1.352q-.454-.874-.454-1.973t.454-1.96a3.37 3.37 0 0 1 1.293-1.352 3.55 3.55 0 0 1 1.86-.494q.894 0 1.59.367.696.352 1.136.888V7.423h1.633v9.936h-1.22l-.342-1.184a4 4 0 0 1-1.164.944q-.71.381-1.633.381m.397-1.452q1.038 0 1.676-.648.654-.663.653-1.705 0-1.044-.653-1.692-.639-.662-1.675-.662-1.023 0-1.662.662-.639.649-.639 1.692t.64 1.705q.638.648 1.66.648M81.929 13.61q0 .211-.029.522h-5.935q.113.86.71 1.38.597.508 1.52.508.624 0 1.121-.24.51-.24.781-.648l1.534.254a3 3 0 0 1-1.378 1.564q-.965.55-2.158.55-1.108 0-1.988-.48a3.6 3.6 0 0 1-1.363-1.352q-.483-.874-.483-1.973t.483-1.96a3.5 3.5 0 0 1 1.363-1.352q.88-.495 1.988-.494 1.107 0 1.974.494.88.478 1.363 1.339.497.845.497 1.888M78.095 11.3q-.738 0-1.292.423-.54.422-.739 1.141h4.09a2.17 2.17 0 0 0-.767-1.127q-.54-.437-1.292-.437M86.751 17.5q-1.136 0-2.044-.48a3.66 3.66 0 0 1-1.406-1.352q-.497-.874-.497-1.973t.497-1.96q.511-.873 1.406-1.352.909-.495 2.044-.494 1.137 0 2.031.494a3.4 3.4 0 0 1 1.406 1.353q.51.86.511 1.959 0 1.098-.511 1.973a3.53 3.53 0 0 1-1.406 1.353q-.894.48-2.03.479m0-1.48q.995 0 1.62-.634.624-.648.624-1.691t-.625-1.678q-.624-.648-1.619-.648-.993 0-1.618.648-.625.634-.625 1.678 0 1.043.625 1.69.625.636 1.618.635"),U(n,"class","_en"),U(a,"fill","#fff"),U(a,"fill-rule","evenodd"),U(a,"d","M7 8.6c0-1.96 0-2.94.381-3.689a3.5 3.5 0 0 1 1.53-1.53C9.66 3 10.64 3 12.6 3h1.36c2.464 0 3.696 0 4.638.48a4.4 4.4 0 0 1 1.922 1.922c.48.942.48 2.174.48 4.638v3.92c0 2.464 0 3.696-.48 4.638a4.4 4.4 0 0 1-1.922 1.922c-.942.48-2.174.48-4.638.48H12.6c-1.96 0-2.94 0-3.689-.381a3.5 3.5 0 0 1-1.53-1.53C7 18.34 7 17.36 7 15.4zm9.265 1.744c.901.539 1.352.808 1.505 1.157.133.304.133.65 0 .954-.153.349-.604.618-1.505 1.157l-2.386 1.425c-.943.563-1.414.844-1.802.807a1.2 1.2 0 0 1-.847-.48C11 15.05 11 14.5 11 13.403v-2.85c0-1.098 0-1.647.23-1.96.201-.274.51-.45.847-.481.388-.037.86.244 1.802.807zM5 9.04c0-2.464 0-3.696.48-4.638a4.4 4.4 0 0 1 .955-1.253 3.7 3.7 0 0 0-1.033.33A4.4 4.4 0 0 0 3.48 5.403C3 6.344 3 7.576 3 10.04v3.92c0 2.464 0 3.696.48 4.638a4.4 4.4 0 0 0 1.922 1.922c.304.155.637.26 1.033.33a4.4 4.4 0 0 1-.955-1.252C5 18.656 5 17.424 5 14.96z"),U(a,"clip-rule","evenodd"),F(t,d)},m(e,o){k(e,t,o),u&&u.m(t,null),A(t,i),A(t,r),A(t,n),A(t,a),s=!0},p(e,[i]){u&&u.p&&(!s||2&i)&&$(u,o,e,e[1],s?S(o,e[1],i,null):_(e[1]),null),F(t,d=_e(c,[{xmlns:"http://www.w3.org/2000/svg"},{width:"95"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{role:"img"},1&i&&e[0]]))},i(e){s||(be(u,e),s=!0)},o(e){ye(u,e),s=!1},d(e){e&&L(t),u&&u.d(e)}}}function ro(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var no=class extends Le{constructor(e){super(),Ce(this,e,ro,io,h,{})}};function ao(e){C(e,"svelte-1nhjml",'svg[data-testid="vk-video-logo-icon--short"] ._ru,svg[data-testid="vk-video-logo-icon--short"] ._en,svg[data-testid="vk-video-logo-icon"] ._en,svg[data-testid="vk-video-logo-icon--en"] ._ru{visibility:hidden;opacity:0}')}function so(e){let t,i;return t=new no({props:{width:e[0],height:"24",viewBox:"0 0 "+(e[0]+1)+" 24","data-testid":e[1]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,[i]){let r={};1&i&&(r.width=e[0]),1&i&&(r.viewBox="0 0 "+(e[0]+1)+" 24"),2&i&&(r["data-testid"]=e[1]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function oo(e,t,i){let r,n,{short:a=!1}=t,{isCyrillic:s=!0}=t;return e.$$set=e=>{"short"in e&&i(2,a=e.short),"isCyrillic"in e&&i(3,s=e.isCyrillic)},e.$$.update=()=>{12&e.$$.dirty&&(i(0,r=a?21:95),i(1,n=a?"vk-video-logo-icon--short":"vk-video-logo-icon"),!s&&!a&&(i(0,r=91),i(1,n="vk-video-logo-icon--en")))},[r,n,a,s]}var lo=class extends Le{constructor(e){super(),Ce(this,e,oo,so,h,{short:2,isCyrillic:3},ao)}};function uo(e){let t,i;return t=new to({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p:o,i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function co(e){let t,i;return t=new lo({props:{short:e[4],isCyrillic:e[5]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};16&i&&(r.short=e[4]),32&i&&(r.isCyrillic=e[5]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function po(e){let t,i,r,n,a=[co,uo],s=[];function o(e,t){return e[2]?0:1}return t=o(e),i=s[t]=a[t](e),{c(){i.c(),r=N()},m(e,i){s[t].m(e,i),k(e,r,i),n=!0},p(e,n){let l=t;t=o(e),t===l?s[t].p(e,n):(ge(),ye(s[l],1,1,(()=>{s[l]=null})),ve(),i=s[t],i?i.p(e,n):(i=s[t]=a[t](e),i.c()),be(i,1),i.m(r.parentNode,r))},i(e){n||(be(i),n=!0)},o(e){ye(i),n=!1},d(e){e&&L(r),s[t].d(e)}}}function ho(e){let t,i,r;function n(t){e[14](t)}let a={className:"btn-full-opacity",disabled:!e[1],click:e[9],testId:e[2]?"btn-vk-video-logo":"btn-vk-logo",ariaLabel:e[3],$$slots:{default:[po]},$$scope:{ctx:e}};return void 0!==e[0]&&(a.ref=e[0]),t=new Sn({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,[r]){let n={};2&r&&(n.disabled=!e[1]),4&r&&(n.testId=e[2]?"btn-vk-video-logo":"btn-vk-logo"),8&r&&(n.ariaLabel=e[3]),131124&r&&(n.$$scope={dirty:r,ctx:e}),!i&&1&r&&(i=!0,n.ref=e[0],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function fo(e,t,i){let r,n,a,{ref:s}=t,{logoClickable:o=!1}=t,{targetUrl:l=""}=t,{click:u}=t,c=Oe(),d=et(),p=d.ui.currentGridType$;v(e,p,(e=>i(12,r=e)));let h=d.ui.isMobile;v(e,h,(e=>i(13,n=e)));let f=d.isCyrillicRelatedInterface$;v(e,f,(e=>i(5,a=e)));let m,g,b;return e.$$set=e=>{"ref"in e&&i(0,s=e.ref),"logoClickable"in e&&i(1,o=e.logoClickable),"targetUrl"in e&&i(10,l=e.targetUrl),"click"in e&&i(11,u=e.click)},e.$$.update=()=>{12292&e.$$.dirty&&i(4,b=(n||Ms(r,"l"))&&g)},i(3,m="vk_video"===c.logoType?Pt("tooltip_vk_video_logo"):Pt("tooltip_vk_logo")),i(2,g="vk_video"===c.logoType||"vk_video_mobile"===c.logoType),[s,o,g,m,b,a,p,h,f,()=>{u(),d.callbacks?.onLogoClicked?d.callbacks?.onLogoClicked():l&&window.open(l,"_blank")},l,u,r,n,function(e){s=e,i(0,s)}]}var mo=class extends Le{constructor(e){super(),Ce(this,e,fo,ho,h,{ref:0,logoClickable:1,targetUrl:10,click:11})}};function go(e){C(e,"svelte-8z1bf5",".connecting.svelte-8z1bf5 .wave.svelte-8z1bf5{animation-duration:1s;animation-iteration-count:infinite}.connecting.svelte-8z1bf5 .wave1.svelte-8z1bf5{animation-name:svelte-8z1bf5-wave1}.connecting.svelte-8z1bf5 .wave2.svelte-8z1bf5{animation-name:svelte-8z1bf5-wave2}.connecting.svelte-8z1bf5 .wave3.svelte-8z1bf5{animation-name:svelte-8z1bf5-wave3}@keyframes svelte-8z1bf5-wave1{0%{opacity:0.3}33%{opacity:1}66%{opacity:1}100%{opacity:1}}@keyframes svelte-8z1bf5-wave2{0%{opacity:0.3}33%{opacity:0.3}66%{opacity:1}100%{opacity:1}}@keyframes svelte-8z1bf5-wave3{0%{opacity:0.3}33%{opacity:0.3}66%{opacity:0.3}100%{opacity:1}}")}function vo(e){let t,i,r,n,a,s,o,l;return{c(){t=O("svg"),i=O("g"),r=O("path"),n=O("path"),a=O("path"),s=O("path"),o=O("path"),l=O("path"),U(r,"class","wave wave1 svelte-8z1bf5"),U(r,"d","M1 18v3h3c0-1.66-1.34-3-3-3z"),U(r,"fill","#fff"),U(n,"class","wave wave2 svelte-8z1bf5"),U(n,"d","M1 14v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7z"),U(n,"fill","#fff"),U(a,"class","wave wave3 svelte-8z1bf5"),U(a,"d","M1 10v2a9 9 0 0 1 9 9h2c0-6.08-4.93-11-11-11z"),U(a,"fill","#fff"),U(s,"d","M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"),U(s,"fill","#fff"),U(o,"d","M0 0h24v24H0z"),U(l,"d","M5.667 7.44H18.5v9.167h-5.161a11.947 11.947 0 0 0-7.673-7.672V7.44Z"),U(l,"fill","#fff"),z(l,"hidden",!e[1]),U(i,"fill","none"),U(i,"fill-rule","evenodd"),U(t,"width","24"),U(t,"height","24"),U(t,"xmlns","http://www.w3.org/2000/svg"),U(t,"aria-hidden","true"),U(t,"data-testid","chromecast-icon"),U(t,"class","svelte-8z1bf5"),z(t,"connecting",e[2])},m(e,u){k(e,t,u),A(t,i),A(i,r),A(i,n),A(i,a),A(i,s),A(i,o),A(i,l)},p(e,i){2&i&&z(l,"hidden",!e[1]),4&i&&z(t,"connecting",e[2])},d(e){e&&L(t)}}}function bo(e){let t,i,r,n,a,s,o,l,u,c,d,p,h,f,m,g,v,b,y,S,$;return{c(){t=O("svg"),i=O("g"),r=O("mask"),n=O("path"),s=O("path"),o=O("path"),u=O("path"),c=O("defs"),d=O("clipPath"),p=O("path"),f=O("filter"),m=O("feFlood"),g=O("feColorMatrix"),v=O("feOffset"),b=O("feGaussianBlur"),y=O("feColorMatrix"),S=O("feBlend"),$=O("feBlend"),U(n,"fill",a=e[1]?"#2688EB":"#fff"),U(n,"d","M1.1 3.1h22v18h-22z"),U(s,"fill-rule","evenodd"),U(s,"clip-rule","evenodd"),U(s,"d","M16.2 5.9c.855 0 1.442 0 1.897.038.445.036.683.103.856.19a2.1 2.1 0 0 1 .918.919c.088.172.155.411.191.856.037.455.038 1.042.038 1.897v4.4c0 .855 0 1.442-.038 1.897-.036.445-.103.683-.19.856a2.1 2.1 0 0 1-.919.918c-.172.088-.411.155-.856.191-.455.037-1.042.038-1.897.038H15a.9.9 0 0 0 0 1.8h1.238c.808 0 1.469 0 2.006-.044.556-.045 1.058-.142 1.527-.381a3.9 3.9 0 0 0 1.704-1.704c.239-.47.336-.971.381-1.527.044-.537.044-1.198.044-2.006V9.762c0-.808 0-1.469-.044-2.006-.045-.556-.142-1.058-.381-1.527a3.9 3.9 0 0 0-1.704-1.704c-.47-.239-.971-.336-1.527-.381-.537-.044-1.198-.044-2.006-.044H6a3.901 3.901 0 0 0-3.678 2.6.9.9 0 0 0 1.697.6A2.101 2.101 0 0 1 6 5.9h10.2ZM3.069 11.52a6.9 6.9 0 0 1 7.413 7.413.9.9 0 0 0 1.795.137 8.7 8.7 0 0 0-9.344-9.344.9.9 0 0 0 .136 1.794Zm.533 3.58c-.161 0-.32.011-.474.034a.9.9 0 1 1-.256-1.782A5.1 5.1 0 0 1 8.65 19.13a.9.9 0 1 1-1.782-.256A3.3 3.3 0 0 0 3.602 15.1Zm-1.5 3.3a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z"),U(r,"id","c"),U(r,"maskUnits","userSpaceOnUse"),U(r,"x","1.1"),U(r,"y","3.1"),U(r,"width","22"),U(r,"height","18"),U(r,"fill","#000"),U(o,"fill-rule","evenodd"),U(o,"clip-rule","evenodd"),U(o,"d","M16.2 5.9c.855 0 1.442 0 1.897.038.445.036.683.103.856.19a2.1 2.1 0 0 1 .918.919c.088.172.155.411.191.856.037.455.038 1.042.038 1.897v4.4c0 .855 0 1.442-.038 1.897-.036.445-.103.683-.19.856a2.1 2.1 0 0 1-.919.918c-.172.088-.411.155-.856.191-.455.037-1.042.038-1.897.038H15a.9.9 0 0 0 0 1.8h1.238c.808 0 1.469 0 2.006-.044.556-.045 1.058-.142 1.527-.381a3.9 3.9 0 0 0 1.704-1.704c.239-.47.336-.971.381-1.527.044-.537.044-1.198.044-2.006V9.762c0-.808 0-1.469-.044-2.006-.045-.556-.142-1.058-.381-1.527a3.9 3.9 0 0 0-1.704-1.704c-.47-.239-.971-.336-1.527-.381-.537-.044-1.198-.044-2.006-.044H6a3.901 3.901 0 0 0-3.678 2.6.9.9 0 0 0 1.697.6A2.101 2.101 0 0 1 6 5.9h10.2ZM3.069 11.52a6.9 6.9 0 0 1 7.413 7.413.9.9 0 0 0 1.795.137 8.7 8.7 0 0 0-9.344-9.344.9.9 0 0 0 .136 1.794Zm.533 3.58c-.161 0-.32.011-.474.034a.9.9 0 1 1-.256-1.782A5.1 5.1 0 0 1 8.65 19.13a.9.9 0 1 1-1.782-.256A3.3 3.3 0 0 0 3.602 15.1Zm-1.5 3.3a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z"),U(o,"fill",l=e[1]?"#2688EB":"#fff"),U(u,"d","m18.097 5.938-.04.498.04-.498Zm.856.19-.227.446.227-.445Zm.918.919-.445.227.445-.227Zm.191.856-.498.04.498-.04Zm0 8.194-.498-.04.498.04Zm-.19.856-.446-.227.445.227Zm-.919.918-.227-.445.227.445Zm-.856.191.04.498-.04-.498Zm-1.86 1.838v-.5.5Zm2.007-.044.04.498-.04-.498Zm1.527-.381-.227-.446.227.446Zm1.704-1.704.445.227-.445-.227Zm.381-1.527.498.04-.498-.04Zm.044-2.006h-.5.5Zm0-4.476h-.5.5Zm-.044-2.006.498-.04-.498.04Zm-.381-1.527.445-.227-.445.227ZM19.77 4.525l-.227.446.227-.446Zm-1.527-.381.04-.498-.04.498ZM16.238 4.1v.5-.5ZM6 4.1v-.5.5ZM2.322 6.7l-.471-.167.471.167Zm1.697.6-.471-.167.471.167ZM6 5.9v-.5.5Zm-2.931 5.62-.038-.498.038.498Zm7.413 7.413.498.038-.498-.038Zm1.795.137.498.038-.498-.038ZM2.931 9.725l-.038-.498.038.498Zm-.829.966.499-.038-.499.038Zm1.025 4.443-.071-.495.071.495Zm-1.019-.763.495-.071-.495.07Zm.763-1.02.071.496-.07-.495ZM8.65 19.13l.495.072-.495-.072Zm-1.019.764-.07.494.07-.494Zm-.763-1.02.495.072-.495-.071ZM18.138 5.44c-.48-.04-1.091-.04-1.938-.04v1c.863 0 1.426.001 1.856.036l.082-.996Zm1.042.243c-.255-.13-.567-.205-1.042-.243l-.082.996c.414.034.58.092.67.138l.454-.89Zm1.137 1.137a2.6 2.6 0 0 0-1.137-1.137l-.454.891a1.6 1.6 0 0 1 .7.7l.89-.454Zm.244 1.042c-.04-.475-.114-.787-.244-1.042l-.891.454c.046.09.104.256.138.67l.997-.082ZM20.6 9.8c0-.846 0-1.458-.04-1.938l-.996.082c.035.43.036.993.036 1.856h1Zm0 4.4V9.8h-1v4.4h1Zm-.04 1.938c.04-.48.04-1.092.04-1.938h-1c0 .863-.001 1.426-.036 1.856l.997.082Zm-.243 1.042c.13-.255.205-.567.244-1.042l-.997-.082c-.034.414-.092.58-.138.67l.89.454Zm-1.137 1.137a2.6 2.6 0 0 0 1.137-1.137l-.891-.454a1.6 1.6 0 0 1-.7.7l.454.89Zm-1.042.244c.475-.04.787-.114 1.042-.244l-.454-.891c-.09.046-.256.104-.67.138l.082.997ZM16.2 18.6c.847 0 1.458 0 1.938-.04l-.082-.996c-.43.035-.993.036-1.856.036v1Zm-1.2 0h1.2v-1H15v1Zm-.4.4c0-.22.18-.4.4-.4v-1a1.4 1.4 0 0 0-1.4 1.4h1Zm.4.4a.4.4 0 0 1-.4-.4h-1a1.4 1.4 0 0 0 1.4 1.4v-1Zm1.238 0H15v1h1.238v-1Zm1.965-.042c-.512.042-1.15.042-1.965.042v1c.8 0 1.484 0 2.046-.045l-.081-.997Zm1.34-.329c-.386.198-.815.286-1.34.329l.081.997c.587-.049 1.163-.154 1.714-.435l-.454-.89Zm1.486-1.485a3.4 3.4 0 0 1-1.485 1.485l.454.891a4.4 4.4 0 0 0 1.922-1.922l-.89-.454Zm.329-1.341c-.043.525-.131.954-.329 1.34l.891.455c.281-.552.386-1.127.434-1.714l-.996-.081Zm.042-1.965c0 .815 0 1.453-.042 1.965l.997.081c.045-.561.045-1.246.045-2.046h-1Zm0 0h1-1Zm0-4.476v4.476h1V9.762h-1Zm0 0h1-1Zm-.042-1.965c.042.512.042 1.15.042 1.965h1c0-.8 0-1.484-.045-2.046l-.997.081Zm-.329-1.34c.198.386.286.815.329 1.34l.997-.081c-.049-.587-.154-1.162-.435-1.714l-.89.454ZM19.544 4.97a3.4 3.4 0 0 1 1.485 1.485l.891-.454a4.4 4.4 0 0 0-1.922-1.922l-.454.89Zm-1.341-.329c.525.043.954.132 1.34.329l.455-.891c-.552-.281-1.127-.387-1.714-.434l-.081.996ZM16.238 4.6c.815 0 1.453 0 1.965.042l.081-.996c-.562-.046-1.246-.046-2.046-.046v1Zm0 0v-1 1ZM6 4.6h10.238v-1H6v1Zm0-1v1-1Zm0 0a4.401 4.401 0 0 0-4.15 2.933l.944.334A3.401 3.401 0 0 1 6 4.6v-1ZM1.85 6.533a1.4 1.4 0 0 0 .854 1.787l.333-.943a.4.4 0 0 1-.243-.51l-.943-.334Zm.854 1.787a1.4 1.4 0 0 0 1.787-.853l-.943-.334a.4.4 0 0 1-.51.244l-.334.943Zm1.787-.853A1.601 1.601 0 0 1 6 6.4v-1c-1.131 0-2.095.722-2.452 1.733l.943.334ZM16.2 5.4H6v1h10.2v-1ZM3.602 11c-.192 0-.383.007-.571.022l.076.997A6.53 6.53 0 0 1 3.602 12v-1Zm7.4 7.4a7.4 7.4 0 0 0-7.4-7.4v1a6.4 6.4 0 0 1 6.4 6.4h1Zm-.022.571c.015-.188.022-.379.022-.571h-1c0 .167-.006.332-.019.495l.997.076Zm.369.43a.4.4 0 0 1-.369-.43l-.997-.076a1.4 1.4 0 0 0 1.29 1.502l.076-.997Zm.429-.37a.4.4 0 0 1-.43.37l-.075.996a1.4 1.4 0 0 0 1.502-1.29l-.997-.075Zm.024-.631c0 .213-.008.423-.024.632l.997.076c.018-.234.027-.47.027-.708h-1Zm-8.2-8.2a8.2 8.2 0 0 1 8.2 8.2h1a9.2 9.2 0 0 0-9.2-9.2v1Zm-.632.024c.209-.016.42-.024.632-.024v-1c-.238 0-.474.01-.708.027l.076.997Zm-.368.43a.4.4 0 0 1 .368-.43l-.076-.997a1.4 1.4 0 0 0-1.29 1.502l.998-.076Zm.429.368a.4.4 0 0 1-.43-.369l-.996.076a1.4 1.4 0 0 0 1.502 1.29l-.076-.997Zm.168 4.607c.13-.02.265-.029.403-.029v-1c-.185 0-.367.013-.545.039l.142.99Zm-1.585-1.187A1.4 1.4 0 0 0 3.2 15.629l-.142-.99a.4.4 0 0 1-.453-.34l-.99.143Zm1.187-1.585a1.4 1.4 0 0 0-1.187 1.585l.99-.142a.4.4 0 0 1 .34-.453l-.143-.99Zm.801-.057c-.271 0-.538.02-.8.057l.141.99c.216-.031.436-.047.659-.047v-1Zm5.6 5.6a5.6 5.6 0 0 0-5.6-5.6v1a4.6 4.6 0 0 1 4.6 4.6h1Zm-.057.8c.038-.262.057-.529.057-.8h-1c0 .223-.016.443-.047.659l.99.142ZM7.56 20.389A1.4 1.4 0 0 0 9.145 19.2l-.99-.142a.4.4 0 0 1-.453.34l-.142.99Zm-1.187-1.585a1.4 1.4 0 0 0 1.187 1.584l.142-.99a.4.4 0 0 1-.339-.452l-.99-.142Zm.029-.403c0 .138-.01.272-.029.403l.99.142c.026-.178.039-.36.039-.545h-1Zm-2.8-2.8a2.8 2.8 0 0 1 2.8 2.8h1a3.8 3.8 0 0 0-3.8-3.8v1Zm0 .8a2 2 0 0 0-2 2h1a1 1 0 0 1 1-1v-1Zm2 2a2 2 0 0 0-2-2v1a1 1 0 0 1 1 1h1Zm-2 2a2 2 0 0 0 2-2h-1a1 1 0 0 1-1 1v1Zm-2-2a2 2 0 0 0 2 2v-1a1 1 0 0 1-1-1h-1Z"),U(u,"fill","#000"),U(u,"fill-opacity",".12"),U(u,"mask","url(#c)"),U(i,"filter","url(#b)"),U(i,"clip-path","url(#a)"),U(p,"fill",h=e[1]?"#2688EB":"#fff"),U(p,"d","M0 0h24v24H0z"),U(d,"id","a"),U(m,"flood-opacity","0"),U(m,"result","BackgroundImageFix"),U(g,"in","SourceAlpha"),U(g,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"),U(g,"result","hardAlpha"),U(b,"stdDeviation","2.5"),U(y,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16 0"),U(S,"in2","BackgroundImageFix"),U(S,"result","effect1_dropShadow_4085_178456"),U($,"in","SourceGraphic"),U($,"in2","effect1_dropShadow_4085_178456"),U($,"result","shape"),U(f,"id","b"),U(f,"x","-3.4"),U(f,"y","-1.4"),U(f,"width","30.8"),U(f,"height","26.802"),U(f,"filterUnits","userSpaceOnUse"),U(f,"color-interpolation-filters","sRGB"),U(t,"width","24"),U(t,"height","24"),U(t,"fill","none"),U(t,"xmlns","http://www.w3.org/2000/svg"),U(t,"aria-hidden","true"),U(t,"data-testid","chromecast-mobile-icon")},m(e,a){k(e,t,a),A(t,i),A(i,r),A(r,n),A(r,s),A(i,o),A(i,u),A(t,c),A(c,d),A(d,p),A(c,f),A(f,m),A(f,g),A(f,v),A(f,b),A(f,y),A(f,S),A(f,$)},p(e,t){2&t&&a!==(a=e[1]?"#2688EB":"#fff")&&U(n,"fill",a),2&t&&l!==(l=e[1]?"#2688EB":"#fff")&&U(o,"fill",l),2&t&&h!==(h=e[1]?"#2688EB":"#fff")&&U(p,"fill",h)},d(e){e&&L(t)}}}function yo(e){let t;function i(e,t){return e[0]?bo:vo}let r=i(e),n=r(e);return{c(){n.c(),t=N()},m(e,i){n.m(e,i),k(e,t,i)},p(e,[a]){r===(r=i(e))&&n?n.p(e,a):(n.d(1),n=r(e),n&&(n.c(),n.m(t.parentNode,t)))},i:o,o,d(e){e&&L(t),n.d(e)}}}function So(e,t,i){let r,a,{isMobile:s=!1}=t,{state:o}=t;return e.$$set=e=>{"isMobile"in e&&i(0,s=e.isMobile),"state"in e&&i(3,o=e.state)},e.$$.update=()=>{8&e.$$.dirty&&(i(2,a=o===n.ChromecastState.CONNECTING),i(1,r=o===n.ChromecastState.CONNECTED))},[s,r,a,o]}var $o=class extends Le{constructor(e){super(),Ce(this,e,So,yo,h,{isMobile:0,state:3},go)}};function _o(e){let t,i;return t=new $o({props:{isMobile:e[1],state:e[2]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};2&i&&(r.isMobile=e[1]),4&i&&(r.state=e[2]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function To(e){let t,i,r;function n(t){e[5](t)}let a={ariaLabel:e[4],click:e[3],testId:"btn-chromecast",$$slots:{default:[_o]},$$scope:{ctx:e}};return void 0!==e[0]&&(a.ref=e[0]),t=new Sn({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,[r]){let n={};16&r&&(n.ariaLabel=e[4]),8&r&&(n.click=e[3]),70&r&&(n.$$scope={dirty:r,ctx:e}),!i&&1&r&&(i=!0,n.ref=e[0],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function wo(e,t,i){let r,{ref:s}=t,{isMobile:o=!1}=t,{state:l}=t,{click:u=a.noop}=t;return e.$$set=e=>{"ref"in e&&i(0,s=e.ref),"isMobile"in e&&i(1,o=e.isMobile),"state"in e&&i(2,l=e.state),"click"in e&&i(3,u=e.click)},e.$$.update=()=>{4&e.$$.dirty&&i(4,r=l===n.ChromecastState.CONNECTED?Pt("tooltip_chromecast_on"):Pt("tooltip_chromecast_off"))},[s,o,l,u,r,function(e){s=e,i(0,s)}]}var Eo=class extends Le{constructor(e){super(),Ce(this,e,wo,To,h,{ref:0,isMobile:1,state:2,click:3})}};function xo(e){C(e,"svelte-5ygsa2",'.tooltip-wrapper.svelte-5ygsa2{position:relative;display:block}.tooltip.svelte-5ygsa2{position:absolute;opacity:0;visibility:hidden;transition:opacity 200ms, visibility 200ms;bottom:100%;transform:translateX(-50%)}.pointer.svelte-5ygsa2:after{position:absolute;bottom:0;left:50%;width:0;border-top:5px solid rgba(41, 41, 41, .8);border-right:5px solid transparent;border-left:5px solid transparent;content:" ";font-size:0;line-height:0;transform:translate(-50%, 5px)}.tooltip.active.svelte-5ygsa2{opacity:1;visibility:visible}')}function Ao(e){let t,i,r,n,a=e[9].default,s=b(a,e,e[8],null);return{c(){t=P("div"),i=P("div"),s&&s.c(),U(i,"class","tooltip svelte-5ygsa2"),z(i,"active",e[0]),z(i,"pointer",e[1]),U(t,"class","tooltip-wrapper svelte-5ygsa2"),U(t,"style",r=`transform: translate(${e[5]}px, ${e[2]}px);`)},m(r,a){k(r,t,a),A(t,i),s&&s.m(i,null),e[10](i),e[11](t),n=!0},p(e,[o]){s&&s.p&&(!n||256&o)&&$(s,a,e,e[8],n?S(a,e[8],o,null):_(e[8]),null),(!n||1&o)&&z(i,"active",e[0]),(!n||2&o)&&z(i,"pointer",e[1]),(!n||36&o&&r!==(r=`transform: translate(${e[5]}px, ${e[2]}px);`))&&U(t,"style",r)},i(e){n||(be(s,e),n=!0)},o(e){ye(s,e),n=!1},d(i){i&&L(t),s&&s.d(i),e[10](null),e[11](null)}}}function Co(e,t,i){let r,n,a,{$$slots:s={},$$scope:o}=t,{active:l=!1}=t,{pointer:u=!1}=t,{translateXPx:c=0}=t,{translateYPx:d=0}=t,{containerWidth:p}=t;return e.$$set=e=>{"active"in e&&i(0,l=e.active),"pointer"in e&&i(1,u=e.pointer),"translateXPx"in e&&i(6,c=e.translateXPx),"translateYPx"in e&&i(2,d=e.translateYPx),"containerWidth"in e&&i(7,p=e.containerWidth),"$$scope"in e&&i(8,o=e.$$scope)},e.$$.update=()=>{64&e.$$.dirty&&i(5,r=function(e){if(!a)return 0;let{width:t}=a.getBoundingClientRect(),i=t/2;return e<i?i:e>p-i?p-i:e}(c))},[l,u,d,n,a,r,c,p,o,s,function(e){te[e?"unshift":"push"]((()=>{a=e,i(4,a)}))},function(e){te[e?"unshift":"push"]((()=>{n=e,i(3,n)}))}]}var ko=class extends Le{constructor(e){super(),Ce(this,e,Co,Ao,h,{active:0,pointer:1,translateXPx:6,translateYPx:2,containerWidth:7},xo)}},Lo=(e,t,i)=>i.filter((i=>i.time<=e*t)).pop();function Ro(e){C(e,"svelte-l51fc1",".timeline-preview.svelte-l51fc1{bottom:18px;border-radius:2px;pointer-events:none}.timeline-preview.mobile.svelte-l51fc1{bottom:72px}.preview.svelte-l51fc1{margin-bottom:10px;background-color:var(--timeline-preview-bg);box-shadow:0 0 2px var(--timeline-preview-shadow), 0 8px 24px var(--timeline-preview-shadow);border-radius:8px;border:1px solid var(--white)}.episode.svelte-l51fc1{margin-top:10px;margin-bottom:4px;font-size:13px;line-height:16px;text-shadow:0 8px 24px var(--timeline-preview-shadow), 0 0 2px var(--timeline-preview-shadow);max-width:150px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;font-weight:500}.time.svelte-l51fc1{font-size:13px;line-height:16px;text-align:center;color:var(--slider-filled-bg);text-shadow:0 8px 24px var(--timeline-preview-shadow), 0 0 2px var(--timeline-preview-shadow);font-weight:500}")}function Po(e){let t,i;return{c(){t=P("div"),U(t,"class","preview svelte-l51fc1"),U(t,"style",i=`width: ${e[3]}px; height: ${e[4]}px; background-image: url(${e[5]}); background-size: ${e[6]}px ${e[7]}px; background-position: ${e[8]}px ${e[9]}px; transform: translateY(${e[11]%180?-35:0}px) rotate(${e[11]}deg);`)},m(e,i){k(e,t,i)},p(e,r){3064&r&&i!==(i=`width: ${e[3]}px; height: ${e[4]}px; background-image: url(${e[5]}); background-size: ${e[6]}px ${e[7]}px; background-position: ${e[8]}px ${e[9]}px; transform: translateY(${e[11]%180?-35:0}px) rotate(${e[11]}deg);`)&&U(t,"style",i)},d(e){e&&L(t)}}}function Oo(e){let t;function i(e,t){return e[2]&&!1===e[10].completed?Io:Mo}let r=i(e),n=r(e);return{c(){n.c(),t=N()},m(e,i){n.m(e,i),k(e,t,i)},p(e,a){r===(r=i(e))&&n?n.p(e,a):(n.d(1),n=r(e),n&&(n.c(),n.m(t.parentNode,t)))},d(e){e&&L(t),n.d(e)}}}function Mo(e){let t,i=(e[10].text||"")+"";return{c(){t=M(i)},m(e,i){k(e,t,i)},p(e,r){1024&r&&i!==(i=(e[10].text||"")+"")&&j(t,i)},d(e){e&&L(t)}}}function Io(e){let t,i=Pt("tooltip_episode_unfinished")+"";return{c(){t=M(i)},m(e,i){k(e,t,i)},p:o,d(e){e&&L(t)}}}function No(e){let t,i;return{c(){t=P("div"),i=M(e[0]),U(t,"class","time svelte-l51fc1")},m(e,r){k(e,t,r),A(t,i)},p(e,t){1&t&&j(i,e[0])},d(e){e&&L(t)}}}function Vo(e){let t,i,r,n,a=e[5]&&Po(e),s=e[10]&&Oo(e),l=!e[2]&&No(e);return{c(){t=P("div"),a&&a.c(),i=I(),r=P("div"),s&&s.c(),n=I(),l&&l.c(),U(r,"class","episode svelte-l51fc1"),U(t,"class","timeline-preview svelte-l51fc1"),z(t,"mobile",e[1])},m(e,o){k(e,t,o),a&&a.m(t,null),A(t,i),A(t,r),s&&s.m(r,null),A(t,n),l&&l.m(t,null)},p(e,[n]){e[5]?a?a.p(e,n):(a=Po(e),a.c(),a.m(t,i)):a&&(a.d(1),a=null),e[10]?s?s.p(e,n):(s=Oo(e),s.c(),s.m(r,null)):s&&(s.d(1),s=null),e[2]?l&&(l.d(1),l=null):l?l.p(e,n):(l=No(e),l.c(),l.m(t,null)),2&n&&z(t,"mobile",e[1])},i:o,o,d(e){e&&L(t),a&&a.d(),s&&s.d(),l&&l.d()}}}var Do=150;function Bo(e,t,i){let r,n,a,s,o,l,u,c,d,{time:p=""}=t,{isMobile:h=!1}=t,{videoEpisodes:f=[]}=t,{previewThumbsData:m}=t,{progress:g=0}=t,{duration:b=0}=t,{isInteractive:y=!1}=t,S=et().ui.rotateAlpha;return v(e,S,(e=>i(11,r=e))),e.$$set=e=>{"time"in e&&i(0,p=e.time),"isMobile"in e&&i(1,h=e.isMobile),"videoEpisodes"in e&&i(13,f=e.videoEpisodes),"previewThumbsData"in e&&i(14,m=e.previewThumbsData),"progress"in e&&i(15,g=e.progress),"duration"in e&&i(16,b=e.duration),"isInteractive"in e&&i(2,y=e.isInteractive)},e.$$.update=()=>{32768&e.$$.dirty&&i(5,({imgSrc:s,imgWidth:o,imgHeight:l,imgOffsetX:u,imgOffsetY:c}=function(e){let t;t=m.isUV?Math.floor(b*e/m.frequency):Math.min(m.countTotal,Math.max(0,Math.floor(m.countTotal*e)));let i=Math.floor(t/m.countPerImage),r=Math.floor(t%m.countPerImage/m.countPerRow),s=t%m.countPerRow,o=Math.floor(m.countPerImage/m.countPerRow);!m.isUV&&i===Math.floor(m.countTotal/m.countPerImage)&&(o=Math.floor(m.countTotal%m.countPerImage/m.countPerRow),m.countTotal%m.countPerImage%m.countPerRow>0&&o++);let l=m.countPerRow;!m.isUV&&i===Math.floor(m.countTotal/m.countPerImage)&&m.countTotal%m.countPerImage>0&&(l=Math.min(m.countPerRow,m.countTotal%m.countPerImage));let u=n*l,c=a*o,d=-s*n,p=-r*a;return{imgSrc:m.links[i],imgWidth:u,imgHeight:c,imgOffsetX:d,imgOffsetY:p}}(g)),s,(i(6,o),i(15,g)),(i(7,l),i(15,g)),(i(8,u),i(15,g)),(i(9,c),i(15,g))),106496&e.$$.dirty&&i(10,d=Lo(g,b,f))},i(3,({width:n,height:a}=function(){let e=m.frameWidth,t=m.frameHeight;return e>Do?(t=t/e*Do,e=Do):t>Do&&(e=e/t*Do,t=Do),{width:e,height:t}}()),n,i(4,a)),[p,h,y,n,a,s,o,l,u,c,d,r,S,f,m,g,b]}var Uo=class extends Le{constructor(e){super(),Ce(this,e,Bo,Vo,h,{time:0,isMobile:1,videoEpisodes:13,previewThumbsData:14,progress:15,duration:16,isInteractive:2},Ro)}};function Fo(e){C(e,"svelte-5lzly8",".time.svelte-5lzly8{display:inline-block;padding:6px 10px;border-radius:3px;color:var(--white);background-color:rgba(41, 41, 41, .8)}")}function jo(e){let t,i;return{c(){t=P("span"),i=M(e[8]),U(t,"class","time svelte-5lzly8")},m(e,r){k(e,t,r),A(t,i)},p(e,t){256&t[0]&&j(i,e[8])},i:o,o,d(e){e&&L(t)}}}function Ho(e){let t,i;return t=new Uo({props:{time:e[8],isMobile:e[11],videoEpisodes:e[4],previewThumbsData:e[22],progress:e[9],duration:e[2],isInteractive:e[24]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};256&i[0]&&(r.time=e[8]),2048&i[0]&&(r.isMobile=e[11]),16&i[0]&&(r.videoEpisodes=e[4]),512&i[0]&&(r.progress=e[9]),4&i[0]&&(r.duration=e[2]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function zo(e){let t,i,r,n,a=[Ho,jo],s=[];function o(e,t){return e[15].features.timelinePreview&&e[22]&&!e[1]?0:1}return t=o(e),i=s[t]=a[t](e),{c(){i.c(),r=N()},m(e,i){s[t].m(e,i),k(e,r,i),n=!0},p(e,n){let l=t;t=o(e),t===l?s[t].p(e,n):(ge(),ye(s[l],1,1,(()=>{s[l]=null})),ve(),i=s[t],i?i.p(e,n):(i=s[t]=a[t](e),i.c()),be(i,1),i.m(r.parentNode,r))},i(e){n||(be(i),n=!0)},o(e){ye(i),n=!1},d(e){e&&L(r),s[t].d(e)}}}function qo(e){let t,i,r,n,a,s=[e[10]],o={$$slots:{default:[zo]},$$scope:{ctx:e}};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);function u(t){e[43](t)}t=new ko({props:o});let c={isActiveLive:e[12],isMobile:e[11],ariaLabel:Pt("aria_timeline"),ariaValueMin:0,ariaValueMax:e[2],ariaValueNow:Math.round(100*e[7]),ariaValueText:Pt("aria_timeline_value",{position:e[6],duration:e[5]}),loadedProgress:e[13],filledProgress:e[7],handleProgress:e[7],videoEpisodes:e[4],onPointerDown:e[29],onHandleMove:e[30],onPointerMove:e[33],onPointerUp:e[31],onPointerEnter:e[32],onPointerLeave:e[34],onDisabledClick:e[27],isInteractive:e[24],disabled:e[14].has("TIMELINE"),hideHandel:e[3]};return void 0!==e[0]&&(c.ref=e[0]),r=new Ps({props:c}),te.push((()=>we(r,"ref",u))),{c(){Ee(t.$$.fragment),i=I(),Ee(r.$$.fragment)},m(e,n){xe(t,e,n),k(e,i,n),xe(r,e,n),a=!0},p(e,i){let a=1024&i[0]?_e(s,[Te(e[10])]):{};2838&i[0]|1048576&i[1]&&(a.$$scope={dirty:i,ctx:e}),t.$set(a);let o={};4096&i[0]&&(o.isActiveLive=e[12]),2048&i[0]&&(o.isMobile=e[11]),4&i[0]&&(o.ariaValueMax=e[2]),128&i[0]&&(o.ariaValueNow=Math.round(100*e[7])),96&i[0]&&(o.ariaValueText=Pt("aria_timeline_value",{position:e[6],duration:e[5]})),8192&i[0]&&(o.loadedProgress=e[13]),128&i[0]&&(o.filledProgress=e[7]),128&i[0]&&(o.handleProgress=e[7]),16&i[0]&&(o.videoEpisodes=e[4]),16384&i[0]&&(o.disabled=e[14].has("TIMELINE")),8&i[0]&&(o.hideHandel=e[3]),!n&&1&i[0]&&(n=!0,o.ref=e[0],ue((()=>n=!1))),r.$set(o)},i(e){a||(be(t.$$.fragment,e),be(r.$$.fragment,e),a=!0)},o(e){ye(t.$$.fragment,e),ye(r.$$.fragment,e),a=!1},d(e){e&&L(i),Ae(t,e),Ae(r,e)}}}function Wo(e,t,i){let r,n,a,s,o,l,u,c,d,p,h,{showTimeline:f=!1}=t,{ref:m}=t,g=et(),b=Oe(),y=g.state.bufferedProgress$;v(e,y,(e=>i(13,p=e)));let S=g.state.positionWithScrubbing$;v(e,S,(e=>i(41,l=e)));let $=g.state.duration$;v(e,$,(e=>i(2,a=e)));let _=g.state.isLive$;v(e,_,(e=>i(1,n=e)));let T=g.state.isActiveLive$;v(e,T,(e=>i(12,d=e)));let w=g.ui.isMobile;v(e,w,(e=>i(11,c=e)));let E=b.features.episodes?g.actions.internal.getVideoEpisodes():void 0,x=g.actions.internal.getPreviewThumbsData(),A=g.state.interactiveEpisodes$;v(e,A,(e=>i(42,u=e)));let C=g.state.isInteractive,k=g.state.isInteractiveTime$;v(e,k,(e=>i(3,s=e)));let L=g.state.isInteractiveExpectation$;v(e,L,(e=>i(40,o=e)));let R=g.actions.internal.correctSeekTimeToInteractive,P=g.callbacks?.onDisabledTimelineClick,O=g.ui.controls.disabledControls$;v(e,O,(e=>i(14,h=e)));let M,I,N,V,D,B=b.features.interactiveResponsiveUi,U=!1,F="",j=0,H=0,z=0;function q(e){return R&&C?R(e*a)/a:e}function W(e,t,r){i(9,z=q(e)),i(37,j=t),r&&i(38,H=r),i(8,F=function(e){let t=bi((n?1-e:e)*a);return n?`-${t}`:t}(e))}return e.$$set=e=>{"showTimeline"in e&&i(35,f=e.showTimeline),"ref"in e&&i(0,m=e.ref)},e.$$.update=()=>{2048&e.$$.dirty[1]&&i(4,M=C?u:E),4&e.$$.dirty[0]&&i(5,I=bi(a)),1024&e.$$.dirty[1]&&i(6,N=bi(l)),4&e.$$.dirty[0]|1024&e.$$.dirty[1]&&i(7,V=l/a),8&e.$$.dirty[0]|512&e.$$.dirty[1]&&i(39,D=o||s),2&e.$$.dirty[0]|496&e.$$.dirty[1]&&i(10,r={containerWidth:H,translateXPx:j,translateYPx:C&&x?-36:-16,active:U&&f&&!D&&!B,pointer:!b.features.timelinePreview||!x||n})},[m,n,a,s,M,I,N,V,F,z,r,c,d,p,h,b,y,S,$,_,T,w,x,A,C,k,L,P,O,function(e){g.actions.internal.startScrubbing(q(e))},function(e){s||g.actions.internal.progressScrubbing(q(e))},function(e){g.actions.internal.completeScrubbing(q(e)),i(36,U=!1)},function(e,t,r){W(e,t,r),i(36,U=!0)},function(e,t,r){W(e,t,r),i(36,U=!0)},function(){i(36,U=!1)},f,U,j,H,D,o,l,u,function(e){m=e,i(0,m)}]}var Go=class extends Le{constructor(e){super(),Ce(this,e,Wo,qo,h,{showTimeline:35,ref:0},Fo,[-1,-1])}};function Qo(e){let t,i;return t=new Ps({props:{ariaValueMin:0,ariaValueMax:e[0],ariaValueNow:Math.round(100*e[3]),ariaValueText:Pt("aria_timeline_value",{position:e[2],duration:e[1]}),filledProgress:e[3],isAds:!0,hideHandel:!0,squareBorders:e[4]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,[i]){let r={};1&i&&(r.ariaValueMax=e[0]),8&i&&(r.ariaValueNow=Math.round(100*e[3])),6&i&&(r.ariaValueText=Pt("aria_timeline_value",{position:e[2],duration:e[1]})),8&i&&(r.filledProgress=e[3]),16&i&&(r.squareBorders=e[4]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Yo(e,t,i){let r,n,a,s,{position:o=0}=t,{duration:l=0}=t,u=et().ui.isMobile;return v(e,u,(e=>i(4,r=e))),e.$$set=e=>{"position"in e&&i(6,o=e.position),"duration"in e&&i(0,l=e.duration)},e.$$.update=()=>{1&e.$$.dirty&&i(1,n=bi(l)),64&e.$$.dirty&&i(2,a=bi(o)),65&e.$$.dirty&&i(3,s=o/l)},[l,n,a,s,r,u,o]}var Ko=class extends Le{constructor(e){super(),Ce(this,e,Yo,Qo,h,{position:6,duration:0})}};function Xo(e){C(e,"svelte-1gqonyf",".timeline.svelte-1gqonyf{position:relative;pointer-events:all;display:flex;align-items:center;bottom:0;width:100%;min-width:86px;padding:3px 10px 4px;box-sizing:border-box}.timeline.mobile.svelte-1gqonyf{height:16px;padding:6px 12px 7px;margin-top:6px}.timeline-stub.svelte-1gqonyf{width:100%;min-width:20px}.timeline-stub.mobile.svelte-1gqonyf{height:8px}")}function Zo(e){let t;return{c(){t=P("div"),U(t,"class","timeline-stub svelte-1gqonyf"),z(t,"mobile",e[3])},m(e,i){k(e,t,i)},p(e,i){8&i&&z(t,"mobile",e[3])},i:o,o,d(e){e&&L(t)}}}function Jo(e){let t,i,r,n,a=[tl,el],s=[];function o(e,t){return e[1]?0:1}return i=o(e),r=s[i]=a[i](e),{c(){t=P("div"),r.c(),U(t,"class","timeline svelte-1gqonyf"),z(t,"mobile",e[3])},m(e,r){k(e,t,r),s[i].m(t,null),n=!0},p(e,l){let u=i;i=o(e),i===u?s[i].p(e,l):(ge(),ye(s[u],1,1,(()=>{s[u]=null})),ve(),r=s[i],r?r.p(e,l):(r=s[i]=a[i](e),r.c()),be(r,1),r.m(t,null)),(!n||8&l)&&z(t,"mobile",e[3])},i(e){n||(be(r),n=!0)},o(e){ye(r),n=!1},d(e){e&&L(t),s[i].d()}}}function el(e){let t,i,r;function n(t){e[14](t)}let a={showTimeline:e[2]};return void 0!==e[0]&&(a.ref=e[0]),t=new Go({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};4&r&&(n.showTimeline=e[2]),!i&&1&r&&(i=!0,n.ref=e[0],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function tl(e){let t,i;return t=new Ko({props:{position:e[4],duration:e[5]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};16&i&&(r.position=e[4]),32&i&&(r.duration=e[5]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function il(e){let t,i,r,n,a=[Jo,Zo],s=[];function o(e,t){return e[2]?0:1}return t=o(e),i=s[t]=a[t](e),{c(){i.c(),r=N()},m(e,i){s[t].m(e,i),k(e,r,i),n=!0},p(e,[n]){let l=t;t=o(e),t===l?s[t].p(e,n):(ge(),ye(s[l],1,1,(()=>{s[l]=null})),ve(),i=s[t],i?i.p(e,n):(i=s[t]=a[t](e),i.c()),be(i,1),i.m(r.parentNode,r))},i(e){n||(be(i),n=!0)},o(e){ye(i),n=!1},d(e){e&&L(r),s[t].d(e)}}}function rl(e,t,i){let r,n,a,s,{isAds:o=!1}=t,{canRewindLive:l}=t,{isRewindableLive:u}=t,{isHidden:c=!1}=t,{ref:d}=t,p=et(),h=p.state.isLive$;v(e,h,(e=>i(13,r=e)));let f=p.ads.duration;v(e,f,(e=>i(5,s=e)));let m=p.ads.position;v(e,m,(e=>i(4,a=e)));let g,b=p.ui.isMobile;return v(e,b,(e=>i(3,n=e))),e.$$set=e=>{"isAds"in e&&i(1,o=e.isAds),"canRewindLive"in e&&i(10,l=e.canRewindLive),"isRewindableLive"in e&&i(11,u=e.isRewindableLive),"isHidden"in e&&i(12,c=e.isHidden),"ref"in e&&i(0,d=e.ref)},e.$$.update=()=>{15362&e.$$.dirty&&i(2,g=!c&&(!r||r&&l&&u||o))},[d,o,g,n,a,s,h,f,m,b,l,u,c,r,function(e){d=e,i(0,d)}]}var nl=class extends Le{constructor(e){super(),Ce(this,e,rl,il,h,{isAds:1,canRewindLive:10,isRewindableLive:11,isHidden:12,ref:0},Xo)}};function al(e){let t,i,r,n,a,s=e[2].default,o=b(s,e,e[1],null),u=[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"episodes-icon"},{style:"flex-shrink:0"},{role:"img"},e[0]],c={};for(let e=0;e<u.length;e+=1)c=l(c,u[e]);return{c(){t=O("svg"),o&&o.c(),i=O("path"),r=O("path"),n=O("path"),U(i,"fill","#fff"),U(i,"fill-rule","evenodd"),U(i,"d","m21.616 16.495-.012.07c-.156.852-.282 1.541-.427 2.093-.148.569-.333 1.063-.64 1.5a4.4 4.4 0 0 1-2.507 1.732c-.52.133-1.046.131-1.63.069-.568-.06-1.257-.187-2.11-.343l-4.34-.794c-.853-.156-1.542-.282-2.094-.426-.568-.149-1.062-.334-1.5-.642a4.4 4.4 0 0 1-1.731-2.507c-.133-.518-.131-1.045-.069-1.63.06-.567.187-1.257.343-2.11l.012-.068c.156-.853.282-1.542.427-2.095.148-.568.333-1.062.641-1.5a4.4 4.4 0 0 1 2.507-1.731c.518-.133 1.045-.131 1.63-.069.567.06 1.256.187 2.109.343l4.34.794c.853.156 1.542.282 2.094.426.568.149 1.062.334 1.5.642a4.4 4.4 0 0 1 1.731 2.506c.133.52.131 1.046.069 1.63-.06.568-.187 1.258-.343 2.11m-1.446-2.3c.052-.483.035-.769-.022-.993a2.6 2.6 0 0 0-1.023-1.481c-.19-.133-.45-.25-.921-.373-.48-.125-1.102-.24-1.997-.404l-4.272-.781c-.895-.164-1.518-.277-2.01-.33-.483-.051-.769-.035-.993.023-.6.153-1.125.516-1.481 1.023-.133.19-.25.45-.373.92-.125.48-.24 1.103-.403 1.998s-.277 1.518-.33 2.01c-.051.484-.035.77.023.994.153.6.516 1.125 1.023 1.481.189.133.45.25.92.373.48.125 1.102.24 1.997.404l4.272.781c.895.164 1.518.277 2.01.33.483.051.77.035.993-.023a2.6 2.6 0 0 0 1.481-1.023c.133-.19.25-.45.373-.92.125-.48.24-1.103.403-1.998s.278-1.518.33-2.01Z"),U(i,"clip-rule","evenodd"),U(r,"fill","#fff"),U(r,"fill-rule","evenodd"),U(r,"d","M18.187 7.488a.9.9 0 0 1-1.045-.727c-.145-.807-.199-1.086-.28-1.296A2.6 2.6 0 0 0 14.504 3.8c-.224-.006-.505.036-1.315.169l-5.846.962c-1.366.224-1.834.313-2.174.492A2.6 2.6 0 0 0 3.837 7.18c-.08.376-.039.85.114 2.226l.011.1a.9.9 0 1 1-1.787.198l-.01-.093-.019-.17c-.129-1.147-.217-1.937-.068-2.636A4.4 4.4 0 0 1 4.332 3.83c.633-.333 1.417-.461 2.556-.648l.163-.027 5.846-.961.098-.016c.674-.111 1.138-.188 1.556-.177a4.4 4.4 0 0 1 3.99 2.819c.15.39.234.853.355 1.526l.017.097a.9.9 0 0 1-.726 1.045"),U(r,"clip-rule","evenodd"),U(n,"fill","#fff"),U(n,"d","M12.724 12.414a.415.415 0 0 0-.69.231l-.72 4.18a.4.4 0 0 0 .025.221c.085.21.327.311.539.226l3.669-1.467a.406.406 0 0 0 .127-.68z"),F(t,c)},m(e,s){k(e,t,s),o&&o.m(t,null),A(t,i),A(t,r),A(t,n),a=!0},p(e,[i]){o&&o.p&&(!a||2&i)&&$(o,s,e,e[1],a?S(s,e[1],i,null):_(e[1]),null),F(t,c=_e(u,[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"episodes-icon"},{style:"flex-shrink:0"},{role:"img"},1&i&&e[0]]))},i(e){a||(be(o,e),a=!0)},o(e){ye(o,e),a=!1},d(e){e&&L(t),o&&o.d(e)}}}function sl(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var ol=class extends Le{constructor(e){super(),Ce(this,e,sl,al,h,{})}};function ll(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"12"},{height:"13"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"chevron-light-icon"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"fill-rule","evenodd"),U(i,"d","M4.146 3.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L6.793 6.5 4.146 3.854a.5.5 0 0 1 0-.708"),U(i,"clip-rule","evenodd"),U(i,"opacity",".7"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"12"},{height:"13"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"chevron-light-icon"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function ul(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var cl=class extends Le{constructor(e){super(),Ce(this,e,ul,ll,h,{})}};function dl(e){C(e,"svelte-1yhs2ga",".text.svelte-1yhs2ga{padding:0 8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.text.count.svelte-1yhs2ga{overflow:visible}.text.mobile.svelte-1yhs2ga{padding:0 3px 0 4px}.chevron-episodes.svelte-1yhs2ga{margin-bottom:-4px}")}function pl(e){let t,i,r;function n(t){e[19](t)}let a={className:"w-max btn-full-opacity btn-jc-l "+(e[7]?"px-0":""),testId:"btn-episodes",click:e[13],disabled:!e[8],ariaExpanded:e[4],ariaLabel:e[6],$$slots:{default:[vl]},$$scope:{ctx:e}};return void 0!==e[1]&&(a.ref=e[1]),t=new Sn({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};128&r&&(n.className="w-max btn-full-opacity btn-jc-l "+(e[7]?"px-0":"")),16&r&&(n.ariaExpanded=e[4]),64&r&&(n.ariaLabel=e[6]),8388777&r&&(n.$$scope={dirty:r,ctx:e}),!i&&2&r&&(i=!0,n.ref=e[1],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function hl(e){let t,i,r,n;function a(e,t){return"FULL"===e[5]?gl:"COUNT"===e[5]?ml:void 0}t=new ol({});let s=a(e),o=s&&s(e);return{c(){Ee(t.$$.fragment),i=I(),o&&o.c(),r=N()},m(e,a){xe(t,e,a),k(e,i,a),o&&o.m(e,a),k(e,r,a),n=!0},p(e,t){s===(s=a(e))&&o?o.p(e,t):(o&&o.d(1),o=s&&s(e),o&&(o.c(),o.m(r.parentNode,r)))},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){ye(t.$$.fragment,e),n=!1},d(e){e&&(L(i),L(r)),Ae(t,e),o&&o.d(e)}}}function fl(e){let t,i,r,n,a,s;return a=new cl({}),{c(){t=P("span"),i=M(e[3]),r=I(),n=P("div"),Ee(a.$$.fragment),U(t,"class","text mobile svelte-1yhs2ga"),U(n,"class","chevron-episodes svelte-1yhs2ga")},m(e,o){k(e,t,o),A(t,i),k(e,r,o),k(e,n,o),xe(a,n,null),s=!0},p(e,t){(!s||8&t)&&j(i,e[3])},i(e){s||(be(a.$$.fragment,e),s=!0)},o(e){ye(a.$$.fragment,e),s=!1},d(e){e&&(L(t),L(r),L(n)),Ae(a)}}}function ml(e){let t,i,r=e[0].length+"";return{c(){t=P("span"),i=M(r),U(t,"class","text count svelte-1yhs2ga")},m(e,r){k(e,t,r),A(t,i)},p(e,t){1&t&&r!==(r=e[0].length+"")&&j(i,r)},d(e){e&&L(t)}}}function gl(e){let t,i;return{c(){t=P("span"),i=M(e[3]),U(t,"class","text svelte-1yhs2ga")},m(e,r){k(e,t,r),A(t,i)},p(e,t){8&t&&j(i,e[3])},d(e){e&&L(t)}}}function vl(e){let t,i,r,n,a=[fl,hl],s=[];function o(e,t){return e[7]?0:1}return t=o(e),i=s[t]=a[t](e),{c(){i.c(),r=N()},m(e,i){s[t].m(e,i),k(e,r,i),n=!0},p(e,n){let l=t;t=o(e),t===l?s[t].p(e,n):(ge(),ye(s[l],1,1,(()=>{s[l]=null})),ve(),i=s[t],i?i.p(e,n):(i=s[t]=a[t](e),i.c()),be(i,1),i.m(r.parentNode,r))},i(e){n||(be(i),n=!0)},o(e){ye(i),n=!1},d(e){e&&L(r),s[t].d(e)}}}function bl(e){let t,i,r=e[2]&&pl(e);return{c(){r&&r.c(),t=N()},m(e,n){r&&r.m(e,n),k(e,t,n),i=!0},p(e,[i]){e[2]?r?(r.p(e,i),4&i&&be(r,1)):(r=pl(e),r.c(),be(r,1),r.m(t.parentNode,t)):r&&(ge(),ye(r,1,1,(()=>{r=null})),ve())},i(e){i||(be(r),i=!0)},o(e){ye(r),i=!1},d(e){e&&L(t),r&&r.d(e)}}}function yl(e,t,i){let r,n,s,o,{position:l=0}=t,{duration:u=0}=t,{timeCodes:c=[]}=t,d=et(),p=d.callbacks?.onEpisodeChanged??a.noop,h=!!d.callbacks?.onEpisodeClicked,f=d.ui.currentGridType$;v(e,f,(e=>i(18,s=e)));let m=d.ui.episodes.openedByKeyboard$;v(e,m,(e=>i(17,n=e)));let g=d.ui.episodes.panelOpened$;v(e,g,(e=>i(4,r=e)));let b=d.ui.isMobile;v(e,b,(e=>i(7,o=e)));let y,S,$,_=null,T=0,w="";return e.$$set=e=>{"position"in e&&i(14,l=e.position),"duration"in e&&i(15,u=e.duration),"timeCodes"in e&&i(0,c=e.timeCodes)},e.$$.update=()=>{if(49152&e.$$.dirty&&i(16,T=l/u),98309&e.$$.dirty){let e=Lo(T,u,c);e?_?.time!==e.time&&(p(e),i(2,_=e)):i(2,_=null)}4&e.$$.dirty&&i(3,w=_?.text||""),262144&e.$$.dirty&&(Os(s,"xl")?i(5,S="FULL"):Os(s,"m")&&((e,t)=>ze[e]<ze[t])(s,"xl")?i(5,S="COUNT"):i(5,S="SHORT")),8&e.$$.dirty&&i(6,$=`${Pt("tooltip_episodes")}: ${w}`),131090&e.$$.dirty&&(async(e,t,i)=>{await oe(),"false"===e?.getAttribute("aria-expanded")&&t&&!i&&(m.set(!1),e.focus())})(y,n,r)},[c,y,_,w,r,S,$,o,h,f,m,g,b,e=>{if(d.callbacks?.onEpisodeClicked){let t=ji(e);m.set(t),g.set(!0),d.callbacks?.onEpisodeClicked?.(t)}},l,u,T,n,s,function(e){y=e,i(1,y)}]}var Sl,$l,_l,Tl=class extends Le{constructor(e){super(),Ce(this,e,yl,bl,h,{position:14,duration:15,timeCodes:0},dl)}},wl=(e,t)=>e<400||t<225?5:e<640||t<360?0:e<960||t<540?1:e<1280||t<720?2:3,El=class{init(e,t,i){this.actions=e,this.adsState=t,this.playerState=i}onAdmanLoadingError(){this.onAdError("adman loading error")}initAdman(e){if(this.adman)return;this.events.init$.next(),this.startWatchDog();let t,{width:i,height:r,isFullscreen:n,isAutoplay:a,adsContainer:s,adsVideoElement:o,slotId:l,params:u={},duration:c,previewParam:d}=e,p=this.playerState&&g(this.playerState.vsid);p&&(t=parseInt(p,36));let h={dl:encodeURIComponent(window.location.href),autoplay:a,player_width:i,player_height:r,puid10:wl(i,r),puid11:n?0:1,preview:d,...t?{request_id:t}:{},duration:c,...u};d||delete h.preview;let f={slot:l,wrapper:s,videoEl:o,videoQuality:r,params:h,browser:{mobile:!1}};try{let e=new window.AdmanHTML;e.setDebug(!1),e.onReady(this.onAdsReady),e.onStarted(this.onAdStarted),e.onPlayed(this.onAdPlayed),e.onPaused(this.onAdPaused),e.adMidrollPoint(this.onAdMidrollPoint),e.onClosed(this.onAdClosed),e.onSkipped(this.onAdSkipped),e.onClicked(this.onAdClicked),e.onTimeRemained(this.onAdTimeRemained),e.onCompleted(this.onAdCompleted),e.onError(this.onAdError),e.init(f),this.adman=e,this.videoElement=o,this.events.slotRequested$.next(),this.log({message:`adman init, config: ${JSON.stringify(f)}`})}catch{this.onAdError("could not init adman")}}switchToVideo(e=!1){if(null===this.currentAdSection&&!e)return void this.log({message:"switch to video, no currentAdSection. can't switch"});let t="postroll"===this.currentAdSection;if(this.actions){if(this.adsState&&this.playerState)this.adsState.playbackState.set("inactive"),this.currentAdSection=null,this.playerState.mobileUnmuteButtonVisible.set(!1),this.log({message:`switch to video, isPostroll: ${t}`}),t&&(this.adsState.postrollPassed.set(!0),this.log({message:"postroll passed"}));else{let e="Switch to video: Adman state was not updated correctly";this.log({message:e}),this.events.error$.next(e)}this.actions.switchFromAdsToVideo?.(!t)}}togglePlay(){if(this.adsState){this.log({message:"toggle play"});let e=g(this.adsState.playbackState);"playing"===e?this.pause():"paused"===e&&this.play()}else this.onAdError("Can not toggle play: Adman state is not initialized")}setInitialVolume(e){this.log({message:`set initial volume ${e}`}),this.initialVolume=e}setVolume(e){if(this.log({message:`set volume ${e}`}),this.adman)try{this.adman.setVolume(e)}catch{this.onAdError("could not set ad volume")}this.videoElement&&(this.videoElement.volume=e)}setFullscreen(e){if(this.log({message:`set fullscreen ${e}`}),this.adman)try{this.adman.setFullscreen(e)}catch{this.onAdError("could not set ad fullscreen")}}startPreroll(){if(this.adman){if(!this.isDestroyed){this.log({message:"start preroll"}),this.setVolume(this.initialVolume),this.currentAdSection="preroll",this.startWatchDog();try{this.adman.start("preroll")}catch{this.onAdError("could not start preroll")}}}else this.onAdError("Can not start preroll: Adman is not initialized")}startPostroll(){if(this.adman&&this.actions){this.log({message:"start postroll"}),this.actions.switchFromVideoToAds(),this.currentAdSection="postroll",this.startWatchDog();try{this.adman.start("postroll")}catch{this.onAdError("could not start postroll")}}else this.onAdError("Can not start postroll: Adman is not initialized")}startWatchDog(){this.watchDogTimeout&&clearTimeout(this.watchDogTimeout),this.watchDogTimeout=window.setTimeout((()=>this.onAdError("Watchdog timeout")),this.runtimeTimeout)}stopWatchDog(){clearTimeout(this.watchDogTimeout)}play(){if(this.adman){this.log({message:"ad play"}),this.startWatchDog();try{this.adman.resume(),this.events.resumed$.next()}catch{this.onAdError("could not resume ad")}}else this.onAdError("Can not play: Adman is not initialized")}pause(){if(this.adman){this.stopWatchDog(),this.log({message:"ad pause"});try{this.adman.pause(),this.events.paused$.next()}catch{this.onAdError("could not pause ad")}}else this.onAdError("Can not pause: Adman is not initialized")}skip(){if(this.adman){this.stopWatchDog(),this.log({message:"ad skip"});try{this.adman.skip(),this.events.skipped$.next()}catch{this.onAdError("could not skip ad")}}else this.onAdError("Can not skip: Adman is not initialized")}setPosition(e,t){this.adman?.setPosition(Math.floor(e),Math.floor(t))}destroy(){this.log({message:"destroy"}),this.stopWatchDog(),this.adman?.destroy(),this.videoElement&&(0,a.clearVideoElement)(this.videoElement),this.isDestroyed=!0}constructor(e,t){this.adman=null,this.initialVolume=1,this.videoElement=null,this.currentAdSection=null,this.actions=null,this.adsState=null,this.playerState=null,this.events={init$:new a.Subject,loadStarted$:new a.Subject,loadEnded$:new a.Subject,loadError$:new a.Subject,ready$:new a.Subject,slotRequested$:new a.Subject,started$:new a.Subject,timeRemained$:new a.Subject,paused$:new a.Subject,resumed$:new a.Subject,ended$:new a.Subject,empty$:new a.Subject,skipped$:new a.Subject,clicked$:new a.Subject,closed$:new a.Subject,error$:new a.Subject},this.loadAdman=e=>new Promise(((t,i)=>{let r;this.events.loadStarted$.next();let n=()=>{clearTimeout(r),delete window.admanAsyncInit,window.AdmanHTML?(t(),this.events.loadEnded$.next()):i()};(0,a.addScript)("//ad.mail.ru/static/admanhtml/rbadman-html5.min.js",e,this.loadTimeout).then((()=>{window.AdmanHTML?(t(),this.events.loadEnded$.next()):(window.admanAsyncInit=n,r=window.setTimeout(n,this.initTimeout))})).catch((()=>{i(),clearTimeout(r)}))})),this.onAdsReady=()=>{this.log({message:"ads ready"}),this.events.ready$.next(),this.startPreroll()},this.onAdStarted=(e,t)=>{this.adsState&&this.playerState&&this.actions?(this.log({message:`ad started, section: ${e}, banner: ${JSON.stringify(t)}`}),this.events.started$.next(e),t.muted&&(this.setVolume(0),this.actions.setMuted(!0),this.log({message:"ad muted start"}),g(this.playerState.isMobile)&&this.playerState.mobileUnmuteButtonVisible.set(!0)),this.adsState.duration.set(t.duration),this.adsState.playbackState.set("playing"),this.adsState.canSkip.set(t.allowClose),this.adsState.secondsToWatchBeforeSkip.set(t.allowCloseDelay),this.startWatchDog()):this.onAdError("Started callback failed: Adman is not initialized")},this.onAdTimeRemained=e=>{this.adsState?(this.adsState.position.set(e.currentTime),this.events.timeRemained$.next(e),this.startWatchDog()):this.onAdError("TimeRemained callback failed: Adman state is not initialized")},this.onAdPaused=()=>{this.stopWatchDog(),this.adsState?(this.log({message:"ad paused"}),this.adsState.playbackState.set("paused")):this.onAdError("Paused callback failed: Adman state is not initialized")},this.onAdPlayed=()=>{this.startWatchDog(),this.adsState?(this.log({message:"ad played"}),this.adsState.playbackState.set("playing")):this.onAdError("Player callback failed: Adman is not initialized")},this.onAdMidrollPoint=()=>{if(this.adman&&this.actions){this.log({message:"midroll point"}),this.actions.switchFromVideoToAds(),this.currentAdSection="midroll",this.startWatchDog();try{this.adman.start("midroll")}catch{this.onAdError("could not start midroll")}}else this.onAdError("Midroll callback failed: Adman is not initialized")},this.onAdSkipped=()=>{this.log({message:"ad skipped"}),this.stopWatchDog()},this.onAdClosed=()=>{this.log({message:"ad closed"}),this.currentAdSection&&this.events.closed$.next(this.currentAdSection),this.stopWatchDog(),this.switchToVideo()},this.onAdCompleted=()=>{this.log({message:"ad completed"}),this.currentAdSection?this.events.ended$.next(this.currentAdSection):this.events.empty$.next(),this.switchToVideo(),this.stopWatchDog()},this.onAdClicked=()=>{this.log({message:"ad clicked"}),this.videoElement?.pause(),this.currentAdSection&&this.events.clicked$.next(this.currentAdSection),this.stopWatchDog()},this.onAdError=(e="ad error")=>{this.log({message:e}),this.events.error$.next(e),this.switchToVideo(!0),this.stopWatchDog()},this.log=e.createComponentLog("AdmanWrapper"),this.loadTimeout=t.loadTimeout,this.initTimeout=t.initTimeout,this.runtimeTimeout=t.runtimeTimeout}},xl=e=>{let t=Math.round(e);return isNaN(t)||t<40?"":t>=40&&t<55?50:t>=55&&t<90?60:t>=90&&t<180?120:t>=180?240:""},Al=class{parse(e){let t={startTime:0,endTime:0},i=this.timingRegExp.exec(e);return i&&(t.startTime=this.calcTime(i[1],i[2],i[3],i[4]),t.endTime=this.calcTime(i[6],i[7],i[8],i[9])),t}parseTime(e){let t=this.timeRegExp.exec(e);return t?this.calcTime(t[1],t[2],t[3],t[4]):0}isTime(e){return this.timeRegExp.test(e)}calcTime(e="0",t="0",i="0",r="0"){return 60*Number(e)*60+60*Number(t)+Number(i)+ +`0.${r}`}constructor(){this.timeRegExp=/(\d{2,})?:?(\d{2}):(\d{2}).(\d{2,3})/,this.timingRegExp=new RegExp(`${this.timeRegExp.source}( ?--\x3e ?)${this.timeRegExp.source}`)}},Cl=class{parse(e){let t={texts:[]},i=e.replace(new RegExp(this.letterTagRegExp,"g"),"").split({[Symbol.split](e){let t=0,i=[];for(;t<e.length;){let r=["<",">"].reduce(((i,r)=>{let n=e.indexOf(r,t);return-1===i||i>n?n:i}),-1);if(-1===r){i.push(e.substring(t));break}i.push(e.substring(t,r)),t=r+1}return i}}),r=new Al;for(let e of i)r.isTime(e)?t.texts.push({type:"timestamp",value:r.parseTime(e)}):t.texts.push({type:"text",value:e});return t}constructor(){this.letterTagRegExp=/<[a-z]*>|<\/[a-z]*>/}},kl=class{parse(e){let t=[],i=e.split(this.twoLinesRegExp);for(let e of i){let i={startTime:0,endTime:0,texts:[],lang:""},r=e.split(this.oneLineRegExp);for(let e of r)if(i.startTime||i.endTime){if(""!==e.trim()){let t=new Cl,{texts:r}=t.parse(e);i.texts=[...i.texts,...r]}}else{let t=new Al,{startTime:r,endTime:n}=t.parse(e);i.startTime=r,i.endTime=n}(i.startTime||i.endTime)&&i.texts.length>0&&t.push(i)}return t}constructor(){this.oneLineRegExp=/\r\n|\n|\r/,this.twoLinesRegExp=/\r\n\r\n|\n\n|\r\r/}},Ll=0,Rl=!1,Pl=(e,t=0,i=0)=>e<t&&e<i,Ol=(e,t=0,i=0)=>e>=t&&e<=i,Ml={ru:"Русский",en:"English",uk:"Українська",be:"Беларуская (тарашкевiца)",es:"Español",fi:"Suomi",de:"Deutsch",it:"Italiano",bg:"Български",hr:"Hrvatski",hu:"Magyar",sr:"Српски",pt:"Português",el:"Ελληνικά",pl:"Polski",fr:"Français",ko:"한국어","zh-CN":"汉语",lt:"Lietuvių",ja:"日本語",cs:"Čeština",et:"Eesti",tt:"Татарча",ba:"Башҡортса",cv:"Чăвашла",sk:"Slovenčina",ro:"Română",no:"Norsk",lv:"Latviešu",az:"Azərbaycan dili",hy:"Հայերեն",sv:"Svenska",nl:"Nederlands",tk:"Türkmen",ka:"ქართული",da:"Dansk",uz:"O‘zbek",th:"ภาษาไทย",id:"Bahasa Indonesia",tg:"Тоҷикӣ",sl:"Slovenščina",bs:"Bosanski","pt-BR":"Português brasileiro",fa:"فارسی",vi:"Tiếng Việt",hi:"हिन्दी",si:"සිංහල",bn:"বাংলা",tl:"Tagalog",mn:"Монгол",my:"ဗမာစာ",tr:"Türkçe",ne:"नेपाली",ur:"اردو",ky:"Кыргыз тили",pa:"پنجابی",os:"Ирон",kn:"ಕನ್ನಡ",sw:"Kiswahili",kk:"Қазақша",ar:"العربية",he:"עברית",ab:"Аҧсшәа",eu:"Euskara",eo:"Esperanto"},Il={abk:"as",ara:"ar",aze:"az",bak:"ba",bel:"be",ben:"bn",bos:"bs",bul:"bg",ces:"cs",chv:"cv",dan:"da",deu:"de",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",fas:"fa",fin:"fi",fra:"fr",heb:"he",hin:"hi",hrv:"hr",hun:"hu",hye:"hy",ind:"id",ita:"it",jpn:"ja",kan:"kn",kat:"ka",kaz:"kk",kir:"ky",kor:"ko",lav:"lv",lit:"lt",mon:"mn",mya:"my",nep:"ne",nld:"nl",nor:"no",oss:"os",pan:"pa",pol:"pl",por:"pt",ron:"ro",rus:"ru",sin:"si",slk:"sk",slv:"sl",spa:"es",srp:"sr",swa:"sw",swe:"sv",tat:"tt",tgk:"tg",tgl:"tl",tha:"th",tuk:"tk",tur:"tr",ukr:"uk",urd:"ur",uzb:"uz",vie:"vi"},Nl=e=>Ml[e]??Ml[Il[e]]??void 0,Vl=class{destroy(){this.oneStat.destroy(),this.statSubscription.unsubscribe()}constructor(e,t=new a.Subscription){this.oneStat=e,this.statSubscription=t}},Dl=((_l=Dl||{}).DESKTOP_CONTROL_PANEL_LEFT="desktop-control-panel-left",_l.DESKTOP_CONTROL_PANEL_RIGHT="desktop-control-panel-right",_l),Bl=e=>e??0,Ul=(e,t)=>{let i=e?.getBoundingClientRect?.(),r=t?.getBoundingClientRect?.();return{top:Math.round(Bl(i?.top)-Bl(r?.top)),left:Math.round(Bl(i?.left)-Bl(r?.left)),bottom:Math.round(Bl(i?.bottom)-Bl(r?.top)),right:Math.round(Bl(i?.right)-Bl(r?.left))}},Fl=e=>{let t=e?.getBoundingClientRect?.();return{width:Bl(t?.width),height:Bl(t?.height)}},jl=({interfaceLanguage:e,isCyrillicRelatedInterface:t,videoId:i,isClip:r,isLiveCatchUpMode:o,statAuthToken:l,isAudioDisabled:u,canDownload:c,callbacks:d,webApi:p,videoEpisodes:h,previewThumbsData:f,uiConfig:m,coreConfig:v,player:b,disabledControls:y,isInteractive:S,interactiveRanges$:$,isInteractiveTime$:_,replayInteractive:T,stopPlayer:w,hasInteractiveBranches:E,playPrevChapterDisabledTooltip:x,additionalButtons:A,additionalSettingsMenuItems:C,additionalContextMenuItems:k,playPrevVideo:L,playNextVideo:R,looped:P=!1,statistics:O,saveRate:M})=>{let I,N,V={...v,configName:[...v.configName??[],"ui"],isAudioDisabled:u,live:{...v.live??{},isLiveCatchUpMode:!!o}},D=m,B=a.Tracer.createRootTracer(D.features.saveTraceInfoToFile),U=B.createComponentTracer("Store"),F=b||new n.Player(V,B),j=new a.Logger,H=new El(j,{loadTimeout:D.ads.loadTimeout,initTimeout:D.ads.initTimeout,runtimeTimeout:D.ads.runtimeTimeout}),z=zt.getInstance(),q=p?.pictureInPictureApi,W=p?.annotationsApi,G=j.createComponentLog("Store"),Q={},Y=new nt,K=O?it(O.oneStat.vsid$):We(void 0),X=Ge(Qt()),Z=q?.info.isActive$??new a.ValueSubject(!1),J=q?.info.type,ee=Ge(0),te=Ge([]),ie=(0,a.merge)(F.events.fatalError$,F.events.managedError$).subscribe((e=>te.update((t=>[...t,e])))),re=We(!1,(e=>{let t=F.events.fatalError$.subscribe((()=>e(!0)));return()=>t.unsubscribe()})),ne=async e=>{let t=Object.values(a.InterfaceLanguage).includes(e);if(D.downloadVKLanguages&&(t&&D.updateBuiltinLanguages||!Lt(e))){let t;try{t=await(0,a.loadVKLangPack)(e,"videoplayer","videoplayer")}catch(e){O?.oneStat?.logError({errorType:"VKLangPack",fatal:!1}),z?.report(e,{errorType:"VKLangPack",fatal:!1})}t&&(kt({language:e,pack:t,fallback:D.defaultLanguage}),ae.set(e))}Lt(e)&&ae.set(e)},ae=Ge(e),se=Ge(t);ne(e);let oe=(e,t)=>{let i=g(ae);return Rt(i,e,t,D.defaultLanguage)},le=Ge("thumb"),ue=(()=>{let e=Qe([re,le],(([e,t])=>e?"crashed":t));return{...e,is:t=>g(e)===t}})(),ce=(()=>{let e=Ge(new Set(y));return{...e,add:t=>{e.update((e=>new Set([...e].concat(t))))},remove:t=>{e.update((e=>{let i=[...e];return new Set(Array.isArray(t)?i.filter((e=>!t.includes(e))):i.filter((e=>e!==t)))}))},includes:t=>{let i=g(e);return Array.isArray(t)?t.every((e=>i.has(e))):i.has(t)}}})();U.log("create store"),G({message:"create store"});let de=new a.Subject,pe=new a.Subject,he=new a.Subject,fe=new a.Subject,me=null,ge={actionRewind$:pe,actionSeek$:he,inPiP$:Z,inFullscreen$:new a.Observable((e=>X.subscribe((t=>e.next(t))))),actionSetSubtitle$:fe,nextMovie$:de};if(O){let{oneStat:e,statSubscription:t}=O;S||t.add(e.attachTo(F)),t.add(e.attachToUi(ge)),t.add(e.attachToAds(H.events)),e.authorize(l).catch((e=>{G({message:`onestat auth error ${String(e)}`})}))}if(z){let e=new a.Subscription,t=(t,i)=>e.add(t.subscribe(i));if(t(F.events.managedError$,(e=>{z.logIError(e)})),t(F.events.fatalError$,(e=>{z.logIError(e,!0)})),O){let{oneStat:e}=O;t(e.experimental.error$,(e=>{z.logIError(e)}))}z.sentrySubscription.add(e)}let ve=()=>{a.clientChecker.isIOS&&N&&(e=>{let t=e;t?.webkitExitFullscreen?t?.webkitExitFullscreen():Promise.reject()})(N)},be=(new a.Subscription).add(F.experimental.element$.subscribe((e=>{e&&(N=e,e.classList.add("player-media"),Zt(q)&&(q.updateVideoElement(),q.registryEventHandlers()),S&&e.setAttribute("pip","false"))}))).add(F.events.ended$.subscribe((()=>{ve(),d?.onEnded?.()}))).add(F.events.looped$.subscribe((()=>{d?.onLooped?.()}))).add(F.events.started$.subscribe((async()=>{Zt(q)&&await(q?.revealPictureInPicture());let e=F.info.muted$.getValue();d?.onStarted?.(),Q.onStarted?.(e)}))).add(F.events.willSeek$.subscribe((({from:e,to:t})=>{d?.onSeek?.(e,t)}))).add(F.events.autoplaySoundProhibited$.subscribe((()=>{d?.onAutoplaySoundProhibited?.()}))).add(F.info.position$.subscribe((e=>{let t=F.info.duration$.getValue();isFinite(t)&&t>0&&(d?.onTimeupdate?.(t,e),H.setPosition(e,t))}))).add(F.events.fatalError$.subscribe((()=>{d?.onCrashed?.()}))).add(F.events.loadedMetadata$.subscribe((()=>{Di.state.loadedMetadata$.set(!0)}))).add(F.info.is3DVideo$.subscribe((e=>{Di.ui.is3DVideo.set(e)}))).add(F.info.isEnded$.subscribe((e=>{S&&(e?(_?.getValue()&&ce.add(je),ce.add("PLAY_BUTTON")):ce.remove("PLAY_BUTTON"))}))).add(F.info.liveTime$.subscribe((e=>{d?.onLiveTime?.(e)}))).add(F.info.isStalled$.subscribe((e=>{d?.onStalledChanged?.(e)}))).add(H.events.loadStarted$.subscribe((()=>d?.adsInfo?.onLoadStarted?.()))).add(H.events.loadEnded$.subscribe((()=>d?.adsInfo?.onLoadEnded?.()))).add(H.events.loadError$.subscribe((()=>d?.adsInfo?.onLoadError?.()))).add(H.events.init$.subscribe((()=>d?.adsInfo?.onInit?.()))).add(H.events.ready$.subscribe((()=>d?.adsInfo?.onReady?.()))).add(H.events.started$.subscribe((e=>d?.adsInfo?.onStarted?.(e)))).add(H.events.timeRemained$.subscribe((e=>d?.adsInfo?.onTimeRemained?.(e)))).add(H.events.ended$.subscribe((e=>d?.adsInfo?.onCompleted?.(e)))).add(H.events.empty$.subscribe((()=>d?.adsInfo?.onEmpty?.()))).add(H.events.clicked$.subscribe((e=>d?.adsInfo?.onClicked?.(e)))).add(H.events.closed$.subscribe((e=>d?.adsInfo?.onClosed?.(e)))).add(H.events.error$.subscribe((e=>d?.adsInfo?.onError?.(e)))),ye=new a.Subscription,Se=We(F.info.position$.getValue(),(e=>{let t,i,r=()=>{let a=F.info.playbackState$.getValue(),s=F.info.isLive$.getValue(),o=F.info.duration$.getValue(),l=F.info.position$.getValue();if([n.PlaybackState.PLAYING,n.PlaybackState.PAUSED].includes(a)){let t=s?l-o:F.getExactTime();t!==i&&e(t),i=t}t=requestAnimationFrame(r)};return r(),()=>cancelAnimationFrame(t)})),$e=it(Z),_e=it(F.info.playbackState$),Te=it(F.info.currentBuffer$),we=it(F.info.isEnded$),Ee=it(F.info.isLive$),xe=D.features.playbackRate?it(F.info.canChangePlaybackSpeed$):We(!1),Ae=it(F.info.liveBufferTime$),Ce=it(F.info.volume$),ke=it(F.info.muted$),Le=rt(F.info.autoQualityLimits$.pipe((0,a.map)((({max:e})=>void 0!==e))),void 0!==F.info.autoQualityLimits$.getValue()?.max),Re=it(F.info.autoQualityLimitingAvailable$),Pe=it(F.info.availableQualities$),Oe=it(F.info.availableQualitiesFps$),Me=it(F.info.chromecastState$),Ie=it(F.info.chromecastDeviceName$),Ne=it(F.info.currentFormat$),Ve=it(F.info.throughputEstimation$),De=it(F.info.videoBitrate$),Be=it(F.info.intrinsicVideoSize$),Ue=it(F.info.duration$),Fe=it(F.info.isAudioAvailable$),He=null,ze=F.info.isBuffering$,qe=We(ze.getValue(),(e=>{let t=ze.subscribe((t=>{t&&null===He?He=window.setTimeout((()=>{e(ze.getValue()),He=null}),D.loaderDelay):e(t)}));return()=>{t.unsubscribe(),He&&clearTimeout(He)}})),Ye=Qe([Ue,Ee],(([e,t])=>t?-e:e)),Ze=Qe([_e],(([e])=>e===n.PlaybackState.PLAYING)),Je=it(F.info.atLiveEdge$),et=it(F.info.atLiveDurationEdge$),tt=it(F.info.position$),st=Qe([tt,Ue],(([e,t])=>isFinite(e)&&isFinite(t)&&!!t)),ot=Qe([Me],(([e])=>e===n.ChromecastState.CONNECTED)),pt=it(F.info.availableVideoStreams$),vt=D.features.audioLanguages?it(F.info.availableAudioStreams$):We([]),St=it(F.info.currentVideoStream$),$t=it(F.info.currentAudioStream$),_t=e=>{let t;if(1===e.length&&(t=e.at(0)),t??(t=e.find((e=>"isDefault"in e&&e.isDefault))),t)return t;let i=a.safeStorage.get(ut);return i&&(t=e.find((({language:e})=>i===e))),t??(t=e.at(0)),t},Tt=!1;be.add(F.info.availableAudioStreams$.subscribe((e=>{if(!Tt&&e.length){let t=_t(e);t&&(F.setAudioStream(t),Tt=!0)}})));let wt=!1;be.add(F.info.availableVideoStreams$.subscribe((e=>{if(!wt&&e.length){let t=_t(e);t&&(F.setVideoStream(t),wt=!0)}})));let Et=Ge(void 0),xt=it(F.info.isAutoQualityEnabled$,(e=>e&&Et.set(void 0))),At=it(F.info.currentQuality$,(()=>Et.set(void 0))),Ct=Qe([Et,At],(([e,t])=>e??t)),Pt=Qe([Pe,Oe,xt,Ct,Ne],(([e,t,i,r,s])=>{let o=[];s!==n.VideoFormat.MPEG&&o.push({value:"auto",displayValue:oe("auto_quality_option"),selected:i});let l=e.filter((e=>!(0,a.isInvariantQuality)(e)));for(let e of l){let n=t[e];o.push({value:e,displayValue:`${e}${n?xl(n):""}`,selected:!i&&e===r})}return o})),Ot=it(F.info.currentPlaybackRate$),Mt=Qe([Ot,Je,et],(([e,t,i])=>{let r=i||S?1:D.controls.playbackRateMin,n=t?1:D.controls.playbackRateMax,a=D.controls.playbackRateStep,s=[];for(let t=r;t<=n;t+=a)s.push({value:t,displayValue:1===t?oe("playback_rate_1"):oe("playback_rate",{multiplier:t.toString(10)}),selected:e===t});return s})),It={displayValue:oe("subtitles_off"),value:"off"},Nt=Ge({...It}),Vt=D.features.subtitles?it(F.info.availableTextTracks$):We([]),Dt=(()=>{let e=[],t=0;return{add:(i,r)=>{e[t]=[i,r],t=(t+1)%10},find:t=>e.find((([e])=>e===t))}})(),Bt=Qe([Vt,Nt],(([e,t],i)=>{let r=[],n=e.find((({language:e})=>e===t.value));if(n?.url){let[,e]=Dt.find(n.url)??[];if(e)return void i(e);Y.download(n.url).then((e=>{if(!e||Y.isDestroyed())return;let a=new kl,s=n.language,o=!!n.isAuto,l=a.parse(e);s&&r.push({lang:s,subtitles:l,isAuto:o}),Dt.add(n.url,r),g(Nt).value===t.value&&i(r)})).catch((e=>{O?.oneStat?.logError({errorType:"Subtitles download",fatal:!1}),z?.report(e,{errorType:"Subtitles download",fatal:!1})}))}i(r)})),Ut=Qe([Ot,Ze,Nt],(([e,t,i],r)=>{let n;if(F.info.isLive$.getValue()&&t&&i.value!==It.value){let t=()=>{n=setTimeout(t,1e3/(3*e)),r(Date.now())};return t(),()=>clearTimeout(n)}})),Ft=Qe([Vt,Nt],(([e,t])=>{if(!e.length)return[];let i=[];for(let{language:r,isAuto:n}of e){let e=r&&Nl(r);r&&e&&i.push({displayValue:n?oe("subtitles_auto",{language:e}):e,value:r,selected:t?.value===r,isAuto:n})}return i.length?(i.unshift({...It,selected:t?.value===It.value}),i):[]})),jt={available:[],prev:[]},Ht=Qe([Se,Nt,Bt,Ut],(([e,t,i,r])=>{let n=F.info.isLive$.getValue();if(n&&jt.prev!==i){let e=i.find((({lang:e})=>e===t.value)),r=jt.prev.find((({lang:e})=>e===t.value));if(e){let t={...e,subtitles:[...r?.subtitles??[],...e.subtitles]};jt.available=[t],jt.prev=i}}if(t&&t.value!==It.value){let r=n?N?.currentTime??0:e,s=n?jt.available:i;return((e,t,i,r=!1)=>{let n=i.find((({lang:e})=>e===t.value))?.subtitles;if(r){let i=n?.find((({startTime:t,endTime:i})=>Ol(e,t,i)));return i?{...i,lang:t.value}:void 0}let s=e>=Ll,o=e<Ll;if(Ll=e,o&&(Rl=!1),(0,a.isNonNullable)(Sl)&&Ol(e,Sl.startTime,Sl.endTime)&&Sl.lang===t.value)return Sl;if(!(0,a.isNonNullable)($l)&&n?.length&&!Rl){let i=n.find((({startTime:t,endTime:i})=>Ol(e,t,i)||s&&Pl(e,t,i)));return $l=i&&{...i,lang:t.value},Sl=void 0,void(!(0,a.isNonNullable)($l)&&n[n.length-1].endTime<e&&(Rl=!0))}if(Ol(e,$l?.startTime,$l?.endTime))return Sl=$l,$l=void 0,Sl;(s&&((e,t=0,i=0)=>e>t&&e>i)(e,$l?.startTime,$l?.endTime)||o&&Pl(e,$l?.startTime,$l?.endTime))&&($l=void 0)})(r,t,s,n)}})),qt=Qe([Ht],(([e])=>e?.texts?e.texts:[])),Wt=Ge(!0),Gt=Qe([Te,Ye,tt,Ae],(([e,t,i,r])=>{let n=e?.end??0;return r?(n-(-i+r-t))/t:n/t})),Yt=it(F.info.availableSources$),Kt=Qe([Yt],(([e])=>Object.keys(e?.[n.VideoFormat.MPEG]||{}).length>0)),Xt=(e,t=e,i=!1)=>{let r=!i,n=F.info.muted$.getValue();G({message:`set volume, volume: ${e}, preferredVolume: ${t}, internalCall: ${r}`}),U.log("set volume",{volume:e,preferredVolume:t,internalCall:r}),F.setVolume(e),H.setVolume(e),r&&d?.onVolumeChange?.(e),ht(t),n?(F.setMuted(!1),r&&d?.onUnmute?.(),bt(!1)):!n&&0===e&&(F.setMuted(!0),r&&d?.onMute?.(),bt(!0))},Jt=(e,t=!1)=>{let i=!t,r=F.info.volume$.getValue();if(G({message:`set muted, currentVolume: ${r}, mute: ${e}, internalCall: ${i}`}),U.log("set muted",{mute:e,currentVolume:r,internalCall:i}),F.setMuted(e),H.setVolume(e?0:r),bt(e),i&&(e?d?.onMute?.():d?.onUnmute?.()),0===r){let e=ft()??D.volumeDefault;0===e&&(e=D.volumeMinRestore,ht(e)),F.setVolume(e),H.setVolume(e),i&&d?.onVolumeChange?.(e)}},ei=Ge(!1),ti=e=>{U.log("set looped",{isLooped:e}),ei.set(e),F.setLooped(e)};ti(P);let ii,ri,ni=e=>{G({message:`set trafficSavingEnabled, value: ${e}`}),U.log("set traffic saving enabled",{trafficSavingEnabled:e}),F.setAutoQualityLimits({max:e?D.trafficSavingLimit:void 0}),(e=>{gt(at,e)})(e)},ai=e=>{U.log("set playback rate",{playbackRate:e}),F.setPlaybackRate(e),D.features.saveRate&&M&&!F.info.isLive$.getValue()&&(e=>{a.safeStorage.set(ct,JSON.stringify({rate:e}))})(e)},si=e=>{U.log("set subtitles",{...e}),e&&e.value!==It.value&&fe.next(e.isAuto?e.value+"_auto":e.value),Nt.set(e)},oi=(e,t,i=!0)=>{if(G({message:`seek to time, time: ${e}`}),U.log("seek to time",{time:e,action:t,forcePrecise:i}),he.next(t),F.info.isLive$.getValue()){let t=F.info.duration$.getValue(),r=Math.min(0,t+e);F.seekTime(r,i)}else{if(_?.getValue())return;F.info.isEnded$.getValue()&&(G({message:"seek after ended, call callbacks.onPlay"}),d?.onPlay?.()),F.seekTime(Vi(e),i)}},li=(e,t)=>{G({message:`seek to percent, percent: ${e}`}),U.log("seek to percent",{percent:e,action:t});let i=g(Ye)*e;oi(i,t,!1)},ui=Ge(void 0),ci=Ge(!1),di=e=>{ui.set(e)},pi=()=>{ui.set(void 0),ci.set(!1)},hi=()=>{clearTimeout(ri),clearTimeout(ii),ii=window.setTimeout((()=>{pi()}),500),N?.removeEventListener("seeked",hi)},fi=Qe([Se,Ye,ui],(([e,t,i],r)=>{r((0,a.isNonNullable)(i)?i*t:e)})),mi=Ge({width:0,height:0}),gi=Qe([mi],(([{width:e}],t)=>{let i=(e=>e>699?"xl":e>599?"l":e>509?"m":e>320?"s":"xs")(e);t(i)})),vi=Ge(!1),bi=A.filter((e=>(e=>!e.type)(e))),yi=Qe([gi,vi],(([e,t])=>t?bi.filter((e=>!e.hideOnMobile)):bi.filter((t=>!t.hideOnDesktopGridTypes?.includes(e))))),Si=Ge(A.filter((e=>(e=>!!e.type)(e)))),$i=Qe([Si,gi],(([e,t])=>e.filter((e=>!e.hideOnDesktopGridTypes?.includes(t))))),_i=Qe([$i,yi],(([e,t])=>[...D.features.additionalButtonsDesktopControlPanelRight?e.filter((e=>"desktop-control-panel-right"===e.type)):[],...D.features.additionalButtons?t.map(((e,t)=>({id:t,weight:t,type:"desktop-control-panel-right",testId:e.testId,icon:e.iconUrl,onClick:e.onClick,ariaLabel:e.ariaLabel??e.tooltip,tooltipText:e.tooltip}))):[]])),Ti=Ge(C),wi=Qe([Ti],(([e])=>D.features.additionalSettingsMenuItems?e.map((e=>"SWITCH"===e.type?{...e,onClick:e.onChangeEnabled}:e)):[])),Ei=Ge(k),xi=Qe([Ei],(([e])=>D.features.additionalContextMenuItems?e:[])),Ai=Qe([vi,re],(([e,t],i)=>{i(e&&t)})),Ci=()=>N,ki=e=>{if((0,a.assertNonNullable)(Di),F.info.isEnded$.getValue())return;let t=!e;if("ads"===g(Di.playerPhase))return G({message:`pause ads, internalCall: ${t}`}),U.log("pause ads",{internalCall:t}),void H.pause();G({message:`pause video, internalCall: ${t}`}),U.log("pause video",{internalCall:t}),t&&d?.onPause?.(),F.pause()},Li=e=>{(0,a.assertNonNullable)(Di);let t=!e;if("ads"===g(Di.playerPhase))return G({message:`play ads, internalCall: ${t}`}),U.log("play ads",{internalCall:t}),void H.play();G({message:`play video, internalCall: ${t}`}),U.log("play video",{internalCall:t}),t&&d?.onPlay?.(),F.play()},Ri=(e,t)=>{(0,a.assertNonNullable)(Di),G({message:`first start, show ads: ${e}, internalCall: ${!t}`}),U.log("first start",{showAds:e,external:t}),e?le.set("ads"):(le.set("video"),t?F.play():Di.actions.internal.togglePlay())},Pi=()=>(G({message:"getting time codes"}),h),Oi=()=>{let e=Pi();if(!e||[0,1].includes(e.length))return;let t=F.info.position$.getValue();return e.find((e=>e.time>t))},Mi=()=>{let e=Pi();if(!e||[0,1].includes(e.length))return;let t=F.info.position$.getValue(),i=e.findIndex((e=>e.time>t)),r=-1===i?e.length-2:i-2;return r<0?void 0:e[r]},Ii=Ge([]);$?.subscribe((e=>{let t=[];for(let i=0;i<e.length;i++){let{range:[r,n],subjects:a}=e[i];0===i&&0!==r&&t.push({time:0,text:"",interactive:!1,completed:!0}),t.push({time:r/1e3,text:"",interactive:!0,completed:!a.length}),n!==1/0&&t.push({time:n/1e3,text:"",interactive:!1,completed:!0})}Ii.set(t)}));let Ni=Ge(!1);_?.subscribe((e=>{e&&g(ci)&&pi()}));let Vi=e=>{if(!S)return e;let t=g(Ii),i=g(Ye),r=g(tt)/i,n=t.find((e=>e.interactive&&!e.completed&&e.time>r));return"number"==typeof n?.time?Math.min(e,n.time-.05):e},Di={interfaceLanguage$:ae,isCyrillicRelatedInterface$:se,initVideo:e=>{G({message:`init video, config: ${JSON.stringify(e)}`}),S?(e=>{let t=e.container;t.append(F.experimental.element$.getValue()),me=new MutationObserver((e=>{let{removedNodes:i}=e[0];i.length&&t.append(F.experimental.element$.getValue())})),me.observe(t,{childList:!0})})(e):F.initVideo(e),U.log("init video",{isInteractive:S}),e.subtitles&&F.setExternalTextTracks(e.subtitles),I=e},videoId:i,isClip:r,playerPhase:ue,vsid:K,state:{positionExact$:Se,positionWithScrubbing$:fi,duration$:Ye,playbackState$:_e,isPlaying$:Ze,isLoaderVisible:qe,bufferedProgress$:Gt,isLive$:Ee,canChangePlaybackSpeed$:xe,isActiveLive$:Je,isOldestAvailableLive$:et,isRewindableLive$:st,isEnded$:we,muted$:ke,volume$:Ce,trafficSavingEnabled$:Le,autoQualityLimitingAvailable$:Re,availableVideoStreams$:pt,availableAudioStreams$:vt,videoStream$:St,audioStream$:$t,currentQuality$:Ct,isAutoQualityEnabled$:xt,availableQualities$:Pt,currentPlaybackRate$:Ot,availablePlaybackRates$:Mt,currentSubtitle$:Nt,availableSubtitlesList$:Ft,currentSubtitleCaptions$:qt,isAutoSubtitleCaptionVisible$:Wt,chromecastState$:Me,chromecastDeviceName$:Ie,chromecastConnected$:ot,currentFormat$:Ne,throughputEstimation$:Ve,videoBitrate$:De,videoSize$:Be,errorLog$:te,crashed$:re,isAudioAvailable$:Fe,isAudioDisabled:!!u,canDownload:D.features.download&&!!c,availableSources$:Yt,hasMpegSources$:Kt,isInteractive:S,showInteractiveGraph:D.features.interactiveGraph,showSeekToInteractive:D.features.seekToInteractive,showPlayPrevChapter:D.features.interactivePlayPrevChapter,showInteractiveTimeIndicator:D.features.interactiveTimeIndicator&&!!g(Ii).length,interactiveEpisodes$:Ii,isInteractiveTime$:_?it(_):Ge(!1),graphIsOpened$:Ge(!1),isInteractiveExpectation$:Ni,hasInteractiveBranches:E,playPrevChapterDisabledTooltip:x,looped$:ei,loadedMetadata$:Ge(!1)},ui:{controlsVisible:Ge(!1),touched:Ge(!1),controls:{prevButton:Ge(void 0),playButton:Ge(void 0),replayButton:Ge(void 0),nextButton:Ge(void 0),playPrevChapterButton:Ge(void 0),seekToInteractiveButton:Ge(void 0),interactiveGraphButton:Ge(void 0),liveButton:Ge(void 0),time:Ge(void 0),episodes:Ge(void 0),volume:Ge(void 0),subtitles:Ge(void 0),settings:Ge(void 0),context:Ge(void 0),chromecast:Ge(void 0),pip:Ge(void 0),fullscreen:Ge(void 0),vkLogo:Ge(void 0),interactiveTimeIndicator:Ge(void 0),timeline:Ge(void 0),autoplayNextToggle:Ge(void 0),additionalButtons:A.length?A.reduce((e=>[...e,Ge(void 0)]),[]):[],disabledControls$:ce},modals:{hotKeyMap:{show:Ge(!1),data:Ge({title:"",closeBtnText:"",groups:[]})}},isFullscreen:X,rotateAlpha:ee,isAutoplay:Ge(!1),debugPanelVisible:Ge(!1),episodes:{panelOpened$:Ge(!1),openedByKeyboard$:Ge(!1)},contextMenu:{visible$:Ge(!1),btnRef$:Ge(void 0),openedByBtnKeyboard$:Ge(!1),openedByHotKey$:Ge(!1),lastActiveElem$:Ge(void 0),showContextMenuBtn$:Ge(!1),position$:Ge({top:0,left:0})},playerSize:mi,isMobile:vi,mobileNotReportControlHidden$:Ai,mobileUnmuteButtonExpanded:Ge(!1),mobileUnmuteButtonVisible:Ge(!1),icon3DVideoVisible:Ge(!1),scrubbingInProgress:ci,is3DVideo:Ge(!1),isPictureInPictureActive$:$e,pictureInPictureType$:We(J),currentGridType$:gi,additionalButtonsDeprecated$:yi,additionalDesktopControlPanelRightButtons$:_i,additionalSettingsMenuItems$:wi,additionalContextMenuItems$:xi,interactiveHideMobileControls:Ge(!1),overlayContainer$:Ge(void 0),startedByKeyboard$:Ge(!1),autoplayNextEnabled$:Ge(!1),timerNextVideoRunning$:Ge(!0),settingsMenu:{visible$:Ge(!1),ref$:Ge(void 0),openedByBtnKeyboard$:Ge(!1)},settingsSubMenu:{visible$:Ge(!1),ref$:Ge(void 0),name$:Ge(void 0)}},ads:{position:Ge(0),duration:Ge(0),playbackState:Ge("inactive"),canSkip:Ge(!1),secondsToWatchBeforeSkip:Ge(0),postrollPassed:Ge(!1)},webApi:{pictureInPictureApi:q,annotationsApi:W},actions:{internal:{preload:()=>{F.prepare()},firstStart:e=>Ri(e,!1),play:()=>Li(!1),pause:()=>ki(!1),togglePlay:()=>{(0,a.assertNonNullable)(Di);let e=g(Di.ui.controls.disabledControls$),t=g(Di.playerPhase),i={playerPhase:t,isInteractive:S,isVideoEnded:!1,action:"none"};if(e.has("PLAY_BUTTON"))return;if(G({message:"toggle play"}),"ads"===t)return i.action="play",U.log("toggle adman play",i),void H.togglePlay();let r=()=>{G({message:"toggle play, call player.play"}),i.action="play",F.play(),d?.onPlay?.()};if(F.info.isEnded$.getValue()){if(G({message:"toggle play, video ended, seek to 0"}),pe.next(),he.next(s.SeekAction.REWIND),S)return void T?.();F.seekTime(0),r()}else F.info.playbackState$.getValue()!==n.PlaybackState.PLAYING?r():(G({message:"toggle play, call player.pause"}),i.action="pause",F.pause(),d?.onPause?.());U.log("toggle play",i)},toggleMuted:()=>{G({message:"toggle muted"});let e=F.info.muted$.getValue(),t=F.info.volume$.getValue(),i=0===t||e,r=!i;U.log("toggle muted",{muted:e,volume:t,soundIsOff:i,nextValue:r}),Jt(r)},openSettingsMenu:async(e,t=(()=>Promise.resolve()))=>{Di.ui.settingsMenu.openedByBtnKeyboard$.set(!!e),Di.ui.settingsMenu.visible$.set(!0),await t();let i=g(Di.ui.settingsMenu.ref$),r=Ci();if(d?.uiInfo?.onSettingsMenu&&i&&r){let e=Fl(i),t=Ul(i,r);d.uiInfo.onSettingsMenu({visible:!0,size:e,position:t,name:"settings"})}U.log("open settings menu",{wasOpenedByKeyboard:e})},closeSettingsMenu:()=>{if(Di.ui.settingsMenu.visible$.set(!1),!g(Di.ui.settingsSubMenu.visible$)){let e=g(Di.ui.settingsMenu.ref$);if(d?.uiInfo?.onSettingsMenu&&e){let t=Fl(e),i={top:0,left:0,bottom:0,right:0};d.uiInfo.onSettingsMenu({visible:!1,size:t,position:i,name:"settings"})}}U.log("close settings menu")},openSettingsSubMenu:(e,t)=>{Di.ui.settingsSubMenu.visible$.set(!0),Di.ui.settingsSubMenu.ref$.set(t),Di.ui.settingsSubMenu.name$.set(e);let i=Ci();if(d?.uiInfo?.onSettingsMenu&&t&&i){let r=Fl(t),n=Ul(t,i);d.uiInfo.onSettingsMenu({visible:!0,name:e,size:r,position:n})}U.log("open settings sub menu",{name:e})},closeSettingsSubMenu:(e,t=!1)=>{Di.ui.settingsSubMenu.visible$.set(!1);let i=g(Di.ui.settingsMenu.ref$),r=Ci(),n=g(Di.ui.settingsMenu.visible$);if(d?.uiInfo?.onSettingsMenu&&i&&r)if(n&&!t){let e=Fl(i),t=Ul(i,r);d.uiInfo.onSettingsMenu({visible:!0,size:e,position:t,name:"settings"})}else{let t=Fl(e),i={top:0,left:0,bottom:0,right:0},r=g(Di.ui.settingsSubMenu.name$);d.uiInfo.onSettingsMenu({visible:!1,size:t,position:i,name:r})}U.log("close settings sub menu")},setVolume:Xt,setVideoStream:e=>{e.language&&yt(e.language),F.setVideoStream(e)},setAudioStream:e=>{e.language&&yt(e.language),F.setAudioStream(e)},setQuality:e=>{G({message:`set quality, quality: ${e}`}),U.log("set quality",{quality:e}),F.setAutoQuality("auto"===e),"auto"!==e?(((e,t)=>{a.safeStorage.set(lt,JSON.stringify({videoId:e,value:t}))})(i,e),Et.set(e),F.setQuality(e)):mt()},setTrafficSavingEnabled:e=>ni(e),setPlaybackRate:ai,incrementPlaybackRate:()=>{let e=g(Mt),t=e.findIndex((({selected:e})=>e));if(t===e.length-1)return;let i=e[t+1];ai(i.value)},decrementPlaybackRate:()=>{let e=g(Mt),t=e.findIndex((({selected:e})=>e));if(0===t)return;let i=e[t-1];ai(i.value)},setSubtitle:si,toggleSubtitle:()=>{U.log("toggle subtitles");let e=g(Ft),t=g(Nt),i=g(ae);if(t?.value===It.value){let t=e.filter((e=>e.value!==It.value)).find((e=>e.value===i))||e[1];si(t??{...It})}else si({...It,selected:!1})},togglePictureInPicture:async()=>{let e=q?.isActive(),t="none";q?.isActive()?(t="remove",await(q?.remove())):(t="request",await(q?.request())),U.log("toggle picture in picture",{isActive:e,action:t})},startScrubbing:e=>{G({message:`start scrubbing, progress: ${e}`}),U.log("start scrubbing",{progress:e}),ci.set(!0),di(e)},progressScrubbing:di,completeScrubbing:e=>{G({message:`complete scrubbing, progress: ${e}`}),U.log("complete scrubbing",{progress:e}),li(e,s.SeekAction.SLIDER),g(Di.ui.isMobile)&&g(Di.state.currentFormat$)===n.VideoFormat.HLS?(N?.addEventListener("seeked",hi),ri=window.setTimeout((()=>{hi()}),300)):pi()},toggleChromecast:()=>{G({message:"toggle chromecast"}),U.log("toggle chromecast"),F.toggleChromecast()},switchToActiveLive:()=>{he.next(s.SeekAction.LIVE),G({message:"switch to active live"}),U.log("switch to active live"),F.seekTime(0),F.info.playbackState$.getValue()!==n.PlaybackState.PLAYING&&Di.actions.internal.togglePlay()},switchFromAdsToVideo:(e=!0)=>{(0,a.assertNonNullable)(Di),G({message:`switch from ads to video, callPlay: ${e}`}),U.log("switch from ads to video",{callPlay:e}),le.set("video"),e&&F.play()},switchFromVideoToAds:()=>{(0,a.assertNonNullable)(Di),G({message:"switch from video to ads"}),U.log("switch from video to ads"),Di.actions.internal.pause(),ve(),le.set("ads")},skipAd:()=>{U.log("skip adman"),H.skip()},setLiveWaitingStart:e=>{(0,a.assertNonNullable)(Di);let t=e?"LiveWaitingStart":"thumb";U.log("set live waiting start",{state:e,playerPhase:t}),le.set(t)},setLiveWaitingRecover:e=>{(0,a.assertNonNullable)(Di);let t=e?"LiveWaitingRecover":"thumb";U.log("set live waiting recover",{state:e,playerPhase:t}),le.set(t)},setLiveWaitingRecord:e=>{(0,a.assertNonNullable)(Di);let t=e?"LiveWaitingRecord":"thumb";U.log("set live waiting record",{state:e,playerPhase:t}),le.set(t)},getDebugTextData:()=>((0,a.assertNonNullable)(Di),U.log("get debug text data"),((e,t,i)=>{let r=e.info,{width:o,height:l}=g(i.ui.playerSize),u=r.throughputEstimation$.getValue()?.toFixed(0)??0,c=r.rttEstimation$.getValue()?.toFixed(0)??0,d=r.isAutoQualityEnabled$.getValue()?"auto":"manual",p=`${Ke} (core: ${n.VERSION}, stat: ${s.VERSION}, shared: ${a.VERSION})`,h=g(i.state.errorLog$),f=h.length?"\n"+h.map(((e,t)=>`${t}) Type: ${e.id}\nMessage: ${e.message} (${e.thrown})\nTrace: ${e.thrown?.stack}\n`)).join("\n"):void 0,m=i.state.isAudioDisabled?"disabled":g(i.state.isAudioAvailable$)?void 0:"unavailable",v=e.info.currentVideoStream$.getValue(),b=e.info.currentAudioStream$.getValue(),y=[];v&&y.push(`Video: ${v?.codec??""}`+(v?.hdr?" (HDR)":"")),b&&y.push(`Audio: ${b?.codec??""}`+(b?.language?` (${b.language})`:""));let S={Version:p,Browser:navigator.userAgent,Config:e.experimental.tuningConfigName$.getValue().join(", "),"United video id":String(i.videoId),VSID:g(i.vsid),"Content host":r.hostname$.getValue(),"Connection type":r.httpConnectionType$.getValue()+(r.httpConnectionReused$.getValue()?" (reused)":""),Throughput:`${u}Kbps @ ${c}ms RTT`,Format:r.currentFormat$.getValue(),"Available Formats":Object.keys(t.sources).join(", "),Streams:y.join(", "),Quality:`${d} ${r.currentQuality$.getValue()}`,"Available qualities":r.availableQualities$.getValue().join(", "),Audio:m,Position:`${g(i.state.positionExact$)}s`,State:`${g(i.playerPhase)} ${r.playbackState$.getValue()}`,"Player size":`${o}x${l}`,URL:window.location.href,Errors:f};return Object.entries(S).filter((([e,t])=>void 0!==t)).map((([e,t])=>`${e}: ${t}`)).join("\n")})(F,I,Di)),getTraceTextData:()=>((0,a.assertNonNullable)(Di),JSON.stringify(B.getFinishedSpans())),getDebugPanelData:()=>((0,a.assertNonNullable)(Di),((e,t,i)=>{let r=e.info,{width:n,height:a}=g(i.ui.playerSize),s={version:Ke,viewport:`${n}x${a}`,volume:Math.round(100*g(i.state.volume$))};s.id=i.videoId,r.currentFormat$.getValue()&&(s.provider=r.currentFormat$.getValue()),r.hostname$.getValue()&&(s.cdn=r.hostname$.getValue());let o=r.intrinsicVideoSize$.getValue();o&&(s.videoSize=`${o.width}x${o.height}`);let l=r.currentBuffer$.getValue(),u=r.isLive$.getValue(),c=r.liveBufferTime$.getValue();l&&(s.buffer=u&&c?l.end-c:Math.max(l.end-g(i.state.positionExact$),0));let d=r.throughputEstimation$.getValue();d&&(s.speed=d);let p=r.videoBitrate$.getValue();p&&(s.bitrate=p);let h=r.currentVideoSegmentLength$.getValue();h&&(s.currentVideoSegmentLength=h);let f=r.currentAudioSegmentLength$.getValue();f&&(s.currentAudioSegmentLength=f);let m=g(i.vsid);"string"==typeof m&&(s.vsid=m);let v=e.info.currentVideoStream$.getValue()?.codec;v&&(s.videoCodec=v);let b=e.info.currentAudioStream$.getValue()?.codec;b&&(s.audioCodec=b),e.info.currentVideoStream$.getValue()?.hdr&&(s.hdr=!0);let y=e.info.currentAudioStream$.getValue()?.language;return y&&(s.audioLanguage=y),s})(F,0,Di)),getVideoElement:Ci,seekTime:(e,t,i)=>oi(e,t,i),clearDelayedBufferingCheckTimeout:()=>{He&&clearTimeout(He),He=null},seekEpisodeStartTime:e=>{G({message:`seek to episode start time: ${e}`}),U.log("seek to episode start time",{time:e}),oi(e,s.SeekAction.EPISODE,!0)},seekToPercent:li,getNextEpisode:Oi,seekToNextEpisode:e=>{let t=e;t||(t=Oi());let i=F.info.position$.getValue();U.log("seek to next episode",{currentTime:i,...t}),t&&(G({message:"seek to next episode"}),oi(t.time,s.SeekAction.EPISODE,!0))},getPrevEpisode:Mi,seekToPrevEpisode:e=>{let t=e;t||(t=Mi());let i=F.info.position$.getValue();U.log("seek to prev episode",{currentTime:i,...t}),t&&(G({message:"seek to prev episode"}),oi(t.time,s.SeekAction.EPISODE,!0))},startLogging:()=>{ye.add(F.events.log$.subscribe((e=>{console.debug("%c sdk ","background:#9ddcf7;",`sdk component: ${e.component}`,e.message)}))).add(j.log$.subscribe((e=>{console.debug("%c ui ","background:#f3da0b;",`ui component: ${e.component}.`,e.message)})))},stopLogging:()=>{ye.unsubscribe()},startCameraManualRotation:(e,t)=>{U.log("start camera manual rotation",{mx:e,my:t}),F.startCameraManualRotation(e,t)},stopCameraManualRotation:(e=!1)=>{U.log("stop camera manual rotation",{immediate:e}),F.stopCameraManualRotation(e)},moveCameraFocusPX:(e,t,i)=>{U.log("move camera focus px",{xpx:e,ypx:t,dt:i}),F.moveCameraFocusPX(e,t,i)},holdCamera:()=>{F.holdCamera()},releaseCamera:()=>{F.releaseCamera()},getVideoEpisodes:Pi,getPreviewThumbsData:()=>(G({message:"getting preview thumbs data"}),U.log("get preview thumbs data",{...f}),f),downloadVideo:()=>{let e=(()=>{let e=Object.keys(F.info.availableSources$?.getValue()?.[n.VideoFormat.MPEG]||{}),t=(0,a.getHighestQuality)(e)||a.VideoQuality.Q_144P;return I.sources[n.VideoFormat.MPEG]?.[t]})();if(e)U.log("download video",{url:e}),((e,t)=>{Xe(e,t,"mp4")})(e,I?.meta?.title||"video");else{let e="There is no URL for download video";U.log("download video",{message:e}),G({message:e})}},addLanguage:kt,setLanguage:ne,nextMovie:e=>de.next(e),videoRotate:(e=-90)=>{U.log("rotate video",{alphaDiff:e}),ee.update((t=>t+e))},correctSeekTimeToInteractive:Vi,replayInteractive:T,setLooped:ti,reportProblem:()=>{d?.uiInfo?.onReportProblem?.()},setAutoplayNextEnabled:e=>{G({message:`set autoplayNextEnabled, value: ${e}`}),U.log("set autoplay next enabled",{autoplayNextEnabled:e}),Di.ui.autoplayNextEnabled$.set(e),(e=>{gt(dt,e)})(e)},setTimerNextVideoRunning:e=>{G({message:`set timerNextVideoRunning, value: ${e}`}),U.log("set timer next video running",{timerNextVideoRunning:e}),Di.ui.timerNextVideoRunning$.set(e)},prevVideoClick:(e=!0)=>{let t=!0;if(e&&d?.onPrevVideoClick)try{t=d?.onPrevVideoClick?.()}catch{G({message:"onPrevVideoClick callback failed to execute"})}t&&L()},nextVideoClick:(e=!0)=>{let t=!0;if(e&&d?.onNextVideoClick)try{t=d?.onNextVideoClick?.()}catch{G({message:"onNextVideoClick callback failed to execute"})}t&&R()},nextVideoAnnouncementClick:()=>{d?.onNextVideoAnnouncementClick?.()},nextVideoAnnouncementAuto:()=>{d?.onNextVideoAnnouncementAuto?.()},nextVideoAnnouncementCancel:()=>{d?.onNextVideoAnnouncementCancel?.()}},external:{firstStart:e=>Ri(e,!0),play:()=>Li(!0),pause:()=>ki(!0),stop:()=>(e=>{(0,a.assertNonNullable)(Di);let t=!e;"ads"!==g(Di.playerPhase)?(G({message:`player will be stopped, internalCall: ${t}`}),w?.()):G({message:"player cannot be stopped during ads via external method"})})(!0),seekTime:e=>(e=>{G({message:`seek external, time: ${e}`}),U.log("seek external",{time:e}),he.next(s.SeekAction.UNKNOWN),F.seekTime(F.info.isLive$.getValue()?-e:e)})(e),seekEpisodeStartTime:e=>(e=>{G({message:`seek external to episode start time: ${e}`}),U.log("seek external to episode start time",{time:e}),oi(e,s.SeekAction.EPISODE,!0)})(e),setPlaybackRate:e=>(e=>{G({message:`set playback rate to: ${e}`}),U.log("set playback rate external",{playbackRate:e}),F.setPlaybackRate(e)})(e),setAutoQualityLimits:e=>(e=>{let t=e.max??"none",i=e.min??"none";G({message:`set auto quality limitation. Max: ${t}. Min: ${i}`}),U.log("set auto quality limits",{max:t,min:i}),F.setAutoQualityLimits(e)})(e),setMuted:e=>Jt(e,!0),setVolume:e=>Xt(e,e,!0),returnFocusToEpisodes:()=>{Di.ui.episodes.panelOpened$.set(!1)},updateAdditionalSettingsItem:(e,t)=>{let i=g(Ti).map((i=>i.id!==e?i:{...i,...t}));Ti.set(i)},addAdditionalSettingsItem:e=>{let t=g(Ti);t.some((t=>t.id===e.id))?G({message:`Settings menu item with id: "${e.id}" was exist! Can't add more with the same id`}):(t.push(e),Ti.set(t))},removeAdditionalSettingsItem:e=>{let t=g(Ti);t.some((t=>t.id===e))?(t=t.filter((t=>t.id!==e)),Ti.set(t)):G({message:`Can't find settings menu item with id: "${e}"! Can't remove item with this id`})},updateAdditionalContextItem:(e,t)=>{let i=g(Ei).map((i=>i.id!==e?i:{...i,...t}));Ei.set(i)},addAdditionalContextItem:e=>{let t=g(Ei);t.some((t=>t.id===e.id))?G({message:`Context menu item with id: "${e.id}" was exist! Can't add more with the same id`}):(t.push(e),Ei.set(t))},removeAdditionalContextItem:e=>{let t=g(Ei);t.some((t=>t.id===e))?(t=t.filter((t=>t.id!==e)),Ei.set(t)):G({message:`Can't find context menu item with id: "${e}"! Can't remove item with this id`})},updateAdditionalButton:(e,t)=>{let i=g(Si).map((i=>i.id!==e?i:{...i,...t}));Si.set(i)},addAdditionalButton:e=>{let t=g(Si);t.some((t=>t.id===e.id))?G({message:`Additional button with id: "${e.id}" was exist! Can't add more with the same id`}):(t.push(e),Si.set(t))},removeAdditionalButton:e=>{let t=g(Si);t.some((t=>t.id===e))?(t=t.filter((t=>t.id!==e)),Si.set(t)):G({message:`Can't find additional button with id: "${e}"! Can't remove item with this id`})},setLiveLowLatency:e=>{he.next(s.SeekAction.LIVE),G({message:"live switch to low latency "+e}),U.log("live switch to low latency "+e),F.setLiveLowLatency(e)}}},callbacks:d,setUiCallbacks:e=>{Q={...e}},getAdmanWrapper:()=>H,getLogger:()=>j,destroy:()=>{U.log("destroy store"),clearTimeout(ri),clearTimeout(ii),be.unsubscribe(),ye.unsubscribe(),F.destroy(),H.destroy(),O?.destroy(),z?.destroy(),ie.unsubscribe(),me?.disconnect(),me=null,Y.destroy()}};return Di},Hl=(e,t,i,r)=>{if(!e)return;let n=["interactiveTimeIndicator"];for(let[a,s]of Object.entries(t))if(!["tooltipPointerOffsetX","disabledControls$","additionalButtons"].includes(a)){let t=i[a]?.getBoundingClientRect(),o=(r||n.includes(a))&&!!t&&!!(t.right-t.left),{top:l,left:u,bottom:c,right:d}=Ul(i[a],e);s.set({positionStartX:0,positionEndX:0,left:o?u:0,right:o?d:0,top:o?l:0,bottom:o?c:0,isDisplayed:o})}},zl=async(e,t,i)=>{await oe(),t&&i&&(i.focus(),e.set(!1))};function ql(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"dots-icon"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"d","M18 10c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m-6 4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m-6 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"dots-icon"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function Wl(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var Gl=class extends Le{constructor(e){super(),Ce(this,e,Wl,ql,h,{})}};function Ql(e){let t,i;return t=new Gl({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Yl(e){let t,i,r;function n(t){e[8](t)}let a={className:e[3]?"opened":"",testId:"btn-context-menu",disabled:e[0],ariaLabel:e[1],click:e[5],focus:e[6],blur:e[7],ariaExpanded:e[3],$$slots:{default:[Ql]},$$scope:{ctx:e}};return void 0!==e[2]&&(a.ref=e[2]),t=new Sn({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,[r]){let n={};8&r&&(n.className=e[3]?"opened":""),1&r&&(n.disabled=e[0]),2&r&&(n.ariaLabel=e[1]),8&r&&(n.ariaExpanded=e[3]),16384&r&&(n.$$scope={dirty:r,ctx:e}),!i&&4&r&&(i=!0,n.ref=e[2],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Kl(e,t,i){let r,{disabled:n=!1}=t,{ariaLabel:a=""}=t,s=et(),o=s.ui.contextMenu.visible$;v(e,o,(e=>i(3,r=e)));let l,u=s.ui.contextMenu.openedByBtnKeyboard$,c=s.ui.contextMenu.showContextMenuBtn$,d=s.ui.contextMenu.position$,p=s.ui.contextMenu.btnRef$;return e.$$set=e=>{"disabled"in e&&i(0,n=e.disabled),"ariaLabel"in e&&i(1,a=e.ariaLabel)},e.$$.update=()=>{4&e.$$.dirty&&l&&p.set(l)},[n,a,l,r,o,e=>{let t=ji(e),i=(e=>{let t=e.getBoundingClientRect();return{right:t.left+t.width,bottom:t.top+-14}})(l);d.set(i),u.set(t),o.set(!r)},()=>{c.set(!0)},()=>{c.set(!1)},function(e){l=e,i(2,l)}]}var Xl=class extends Le{constructor(e){super(),Ce(this,e,Kl,Yl,h,{disabled:0,ariaLabel:1})}};function Zl(e){C(e,"svelte-od3veb",".interactive-episode-icon-animated.svelte-od3veb{position:absolute;top:16px;right:16px;width:32px;height:32px;transition:0.3s;opacity:1}.interactive-episode-icon-animated.icon-small.svelte-od3veb{width:28px;height:28px}.invisible.svelte-od3veb{opacity:0;visibility:hidden}.fullscreen.svelte-od3veb:not(.mobile){width:40px;top:19px;right:23px;height:40px}.mobile.svelte-od3veb{width:28px;height:28px;top:12px;right:14px}.fullscreen.mobile.svelte-od3veb{width:32px;height:32px}@media screen and (orientation: portrait){.interactive-episode-icon-animated.mobile.fullscreen.svelte-od3veb{top:40px;right:16px}}@keyframes svelte-od3veb-pulse{0%{transform:scale(1);border-width:1px;opacity:0}10%{opacity:1}50%{transform:scale(1.5);border-width:1px;opacity:0.5}100%{transform:scale(1.5);border-width:0.5px;opacity:0}}.pulse.svelte-od3veb{display:block;content:'';border:1px solid #fff;position:absolute;top:0;left:0;right:0;bottom:0;border-radius:100%;transform:scale(1.8);animation:1s svelte-od3veb-pulse infinite;transition:0.3s;pointer-events:none}.pulse.paused.svelte-od3veb{animation-play-state:paused}.interactive-episode-icon-animated svg{width:100%;height:100%}.ref-block.svelte-od3veb{position:absolute;top:0;width:100%;height:100%;visibility:hidden}.hidden.svelte-od3veb{display:none}")}function Jl(e){let t,i;return t=new ds({props:{completed:!0}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p:o,i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function eu(e){let t,i,r,n,a,s,o,l,u,c;function p(t){e[25](t)}let h={tooltipContent:Pt("tooltip_interactive_interaction_time_indicator"),tooltipActive:e[6],initialTranslateYPx:72,tooltipPlacement:"bottom",onTooltipVisibilityChange:e[15],$$slots:{default:[Jl]},$$scope:{ctx:e}};return void 0!==e[0]&&(h.ref=e[0]),i=new ls({props:h}),te.push((()=>we(i,"ref",p))),i.$on("click",e[16]),{c(){t=P("div"),Ee(i.$$.fragment),n=I(),a=P("div"),s=I(),o=P("div"),U(a,"class","ref-block svelte-od3veb"),z(a,"hidden",e[1]),U(o,"class","pulse svelte-od3veb"),z(o,"paused",e[5]),U(t,"class","interactive-episode-icon-animated svelte-od3veb"),z(t,"mobile",e[2]),z(t,"fullscreen",e[7]),z(t,"invisible",e[1]),z(t,"icon-small",e[4])},m(r,d){k(r,t,d),xe(i,t,null),A(t,n),A(t,a),e[26](a),A(t,s),A(t,o),e[27](o),l=!0,u||(c=[V(t,"mousemove",B(e[24])),V(t,"mouseleave",e[17])],u=!0)},p(e,n){let s={};64&n[0]&&(s.tooltipActive=e[6]),8&n[1]&&(s.$$scope={dirty:n,ctx:e}),!r&&1&n[0]&&(r=!0,s.ref=e[0],ue((()=>r=!1))),i.$set(s),(!l||2&n[0])&&z(a,"hidden",e[1]),(!l||32&n[0])&&z(o,"paused",e[5]),(!l||4&n[0])&&z(t,"mobile",e[2]),(!l||128&n[0])&&z(t,"fullscreen",e[7]),(!l||2&n[0])&&z(t,"invisible",e[1]),(!l||16&n[0])&&z(t,"icon-small",e[4])},i(e){l||(be(i.$$.fragment,e),l=!0)},o(e){ye(i.$$.fragment,e),l=!1},d(r){r&&L(t),Ae(i),e[26](null),e[27](null),u=!1,d(c)}}}function tu(e,t,i){let r,n,a,s,o,l,u,c,{ref:d}=t,p=et(),h=tt(),{interactiveControlsOpacity$:f}=h;v(e,f,(e=>i(20,n=e)));let m=p.ui.isMobile;v(e,m,(e=>i(2,l=e)));let g=p.ui.isFullscreen;v(e,g,(e=>i(7,u=e)));let b=p.state.isInteractiveTime$;v(e,b,(e=>i(21,a=e)));let y=h.showInteractiveTimeIndicatorTooltip$;v(e,y,(e=>i(19,r=e)));let S=p.ui.controlsVisible;v(e,S,(e=>i(23,o=e)));let $=p.callbacks?.onInteractiveTimeIndicatorClick,_=p.ui.currentGridType$;v(e,_,(e=>i(22,s=e)));let T,w,E,x,A,C=()=>{i(5,x=!0)},k=()=>{i(5,x=!1),c?.removeEventListener("animationiteration",C)};Y((()=>{y.clearTimeout(),k()}));return e.$$set=e=>{"ref"in e&&i(0,d=e.ref)},e.$$.update=()=>{8388612&e.$$.dirty[0]&&i(18,T=!l&&o),4194304&e.$$.dirty[0]&&i(4,w=Ms(s,"s")),3407872&e.$$.dirty[0]&&i(1,E=!a||!!n||T),2&e.$$.dirty[0]&&i(5,x=E),524290&e.$$.dirty[0]&&i(6,A=r&&!E),524288&e.$$.dirty[0]&&(r?(k(),c?.addEventListener("animationiteration",C,{once:!0})):k())},[d,E,l,c,w,x,A,u,f,m,g,b,y,S,_,e=>{y.set(e)},()=>{E||(y.set(!0),$?.())},()=>{y.set(!1)},T,r,n,a,s,o,function(t){J.call(this,e,t)},function(e){d=e,i(0,d)},function(e){te[e?"unshift":"push"]((()=>{d=e,i(0,d)}))},function(e){te[e?"unshift":"push"]((()=>{c=e,i(3,c)}))}]}var iu=class extends Le{constructor(e){super(),Ce(this,e,tu,eu,h,{ref:0},Zl,[-1,-1])}};function ru(e){let t,i,r,n=[e[2]??{}];var a=e[1];function s(e,t){let i={};for(let e=0;e<n.length;e+=1)i=l(i,n[e]);return void 0!==t&&4&t&&(i=l(i,_e(n,[Te(e[2]??{})]))),{props:i}}return a&&(t=q(a,s(e))),{c(){t&&Ee(t.$$.fragment),i=N()},m(e,n){t&&xe(t,e,n),k(e,i,n),r=!0},p(e,r){if(2&r&&a!==(a=e[1])){if(t){ge();let e=t;ye(e.$$.fragment,1,0,(()=>{Ae(e,1)})),ve()}a?(t=q(a,s(e,r)),Ee(t.$$.fragment),be(t.$$.fragment,1),xe(t,i.parentNode,i)):t=null}else if(a){let i=4&r?_e(n,[Te(e[2]??{})]):{};t.$set(i)}},i(e){r||(t&&be(t.$$.fragment,e),r=!0)},o(e){t&&ye(t.$$.fragment,e),r=!1},d(e){e&&L(i),t&&Ae(t,e)}}}function nu(e){let t,i,r;function n(t){e[7](t)}let a={disabled:e[5],tooltipContent:e[3],disabledTooltipContent:e[4],className:e[6],$$slots:{default:[ru]},$$scope:{ctx:e}};return void 0!==e[0]&&(a.ref=e[0]),t=new ls({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,[r]){let n={};32&r&&(n.disabled=e[5]),8&r&&(n.tooltipContent=e[3]),16&r&&(n.disabledTooltipContent=e[4]),64&r&&(n.className=e[6]),262&r&&(n.$$scope={dirty:r,ctx:e}),!i&&1&r&&(i=!0,n.ref=e[0],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function au(e,t,i){let{buttonComponent:r}=t,{buttonComponentProps:n}=t,{tooltipText:a}=t,{disabledTooltipContent:s}=t,{disabled:o=!1}=t,{className:l}=t,{ref:u}=t;return e.$$set=e=>{"buttonComponent"in e&&i(1,r=e.buttonComponent),"buttonComponentProps"in e&&i(2,n=e.buttonComponentProps),"tooltipText"in e&&i(3,a=e.tooltipText),"disabledTooltipContent"in e&&i(4,s=e.disabledTooltipContent),"disabled"in e&&i(5,o=e.disabled),"className"in e&&i(6,l=e.className),"ref"in e&&i(0,u=e.ref)},[u,r,n,a,s,o,l,function(e){u=e,i(0,u)}]}var su=class extends Le{constructor(e){super(),Ce(this,e,au,nu,h,{buttonComponent:1,buttonComponentProps:2,tooltipText:3,disabledTooltipContent:4,disabled:5,className:6,ref:0})}},ou=100,lu=200,uu=300,cu=400,du=500,pu=600,hu=700,fu=800;function mu(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"26"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"d","M16 10.835V7.5a1 1 0 1 1 2 0v9a1 1 0 0 1-2 0v-3.335l-8.149 4.67C7.03 18.304 6 17.715 6 16.772V7.227c0-.943 1.029-1.533 1.851-1.061L16 10.834z"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"26"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function gu(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var vu=class extends Le{constructor(e){super(),Ce(this,e,gu,mu,h,{})}};function bu(e){let t,i;return t=new vu({props:{style:e[1],"data-testid":e[0]?"prev-icon":"next-icon"}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,[i]){let r={};2&i&&(r.style=e[1]),1&i&&(r["data-testid"]=e[0]?"prev-icon":"next-icon"),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function yu(e,t,i){let r,{isPrev:n=!1}=t,{isMobile:a=!1}=t;return e.$$set=e=>{"isPrev"in e&&i(0,n=e.isPrev),"isMobile"in e&&i(2,a=e.isMobile)},e.$$.update=()=>{5&e.$$.dirty&&i(1,r=n&&a?"transform: scaleX(-1) scale(1.3333);":n?"transform: scaleX(-1);":a?"transform: scale(1.3333);":void 0)},[n,r,a]}var Su=class extends Le{constructor(e){super(),Ce(this,e,yu,bu,h,{isPrev:0,isMobile:2})}};function $u(e){C(e,"svelte-xtk2k4",".icon-background-mobile.svelte-xtk2k4{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:var(--big-play-radius);background-color:var(--big-play-bg-color)}")}function _u(e){let t;return{c(){t=P("div"),U(t,"class","icon-background-mobile svelte-xtk2k4")},m(e,i){k(e,t,i)},d(e){e&&L(t)}}}function Tu(e){let t,i,r,n=e[1]&&_u();return i=new Su({props:{isMobile:e[1],isPrev:"prev"===e[3]}}),{c(){n&&n.c(),t=I(),Ee(i.$$.fragment)},m(e,a){n&&n.m(e,a),k(e,t,a),xe(i,e,a),r=!0},p(e,r){e[1]?n||(n=_u(),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null);let a={};2&r&&(a.isMobile=e[1]),8&r&&(a.isPrev="prev"===e[3]),i.$set(a)},i(e){r||(be(i.$$.fragment,e),r=!0)},o(e){ye(i.$$.fragment,e),r=!1},d(e){e&&L(t),n&&n.d(e),Ae(i,e)}}}function wu(e){let t,i,r;function n(t){e[6](t)}let a={className:`btn-${e[1]?"m":"d"}--${e[3]}`,testId:"btn-"+e[3],disabled:e[2],ariaLabel:e[5],click:e[4],$$slots:{default:[Tu]},$$scope:{ctx:e}};return void 0!==e[0]&&(a.ref=e[0]),t=new Sn({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,[r]){let n={};10&r&&(n.className=`btn-${e[1]?"m":"d"}--${e[3]}`),8&r&&(n.testId="btn-"+e[3]),4&r&&(n.disabled=e[2]),32&r&&(n.ariaLabel=e[5]),16&r&&(n.click=e[4]),138&r&&(n.$$scope={dirty:r,ctx:e}),!i&&1&r&&(i=!0,n.ref=e[0],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Eu(e,t,i){let r,{ref:n}=t,{isMobile:a=!1}=t,{disabled:s=!1}=t,{type:o}=t,{click:l}=t;return e.$$set=e=>{"ref"in e&&i(0,n=e.ref),"isMobile"in e&&i(1,a=e.isMobile),"disabled"in e&&i(2,s=e.disabled),"type"in e&&i(3,o=e.type),"click"in e&&i(4,l=e.click)},e.$$.update=()=>{8&e.$$.dirty&&i(5,r=Pt("prev"===o?"tooltip_previous":"tooltip_next"))},[n,a,s,o,l,r,function(e){n=e,i(0,n)}]}var xu=class extends Le{constructor(e){super(),Ce(this,e,Eu,wu,h,{ref:0,isMobile:1,disabled:2,type:3,click:4},$u)}};function Au(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"replay-icon"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"d","M12 9.096a.4.4 0 0 1-.67.296L7.044 5.493a.67.67 0 0 1 0-.986L11.33.608a.4.4 0 0 1 .67.296V4a8 8 0 1 1-8 8 1 1 0 1 1 2 0 6 6 0 1 0 6-6z"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"replay-icon"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function Cu(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var ku=class extends Le{constructor(e){super(),Ce(this,e,Cu,Au,h,{})}};function Lu(e){C(e,"svelte-1ot3duq",".mobile.svelte-1ot3duq{position:relative;display:flex;align-items:center;justify-content:center}.mobile.svelte-1ot3duq svg{transform:scale(2)}.icon-background-mobile.svelte-1ot3duq{position:absolute;top:16px;left:16px;border-radius:var(--big-play-radius);background-color:var(--big-play-bg-color);width:calc(100% - 32px);height:calc(100% - 32px)}")}function Ru(e){let t;return{c(){t=P("div"),U(t,"class","icon-background-mobile svelte-1ot3duq")},m(e,i){k(e,t,i)},d(e){e&&L(t)}}}function Pu(e){let t,i,r,n,a=e[1]&&Ru();return r=new ku({}),{c(){a&&a.c(),t=I(),i=P("div"),Ee(r.$$.fragment),U(i,"class","svelte-1ot3duq"),z(i,"mobile",e[1])},m(e,s){a&&a.m(e,s),k(e,t,s),k(e,i,s),xe(r,i,null),n=!0},p(e,r){e[1]?a||(a=Ru(),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),(!n||2&r)&&z(i,"mobile",e[1])},i(e){n||(be(r.$$.fragment,e),n=!0)},o(e){ye(r.$$.fragment,e),n=!1},d(e){e&&(L(t),L(i)),a&&a.d(e),Ae(r)}}}function Ou(e){let t,i,r;function n(t){e[5](t)}let a={className:(e[1]?"btn-m--play":"")+" "+e[3],testId:"btn-replay",ariaLabel:Pt("tooltip_restart"),disabled:e[2],click:e[4],ariaKeyShortCut:Ie.KeyK,$$slots:{default:[Pu]},$$scope:{ctx:e}};return void 0!==e[0]&&(a.ref=e[0]),t=new Sn({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,[r]){let n={};10&r&&(n.className=(e[1]?"btn-m--play":"")+" "+e[3]),4&r&&(n.disabled=e[2]),16&r&&(n.click=e[4]),66&r&&(n.$$scope={dirty:r,ctx:e}),!i&&1&r&&(i=!0,n.ref=e[0],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Mu(e,t,i){let{ref:r}=t,{isMobile:n=!1}=t,{disabled:s=!1}=t,{className:o=""}=t,{click:l=a.noop}=t;return e.$$set=e=>{"ref"in e&&i(0,r=e.ref),"isMobile"in e&&i(1,n=e.isMobile),"disabled"in e&&i(2,s=e.disabled),"className"in e&&i(3,o=e.className),"click"in e&&i(4,l=e.click)},[r,n,s,o,l,function(e){r=e,i(0,r)}]}var Iu=class extends Le{constructor(e){super(),Ce(this,e,Mu,Ou,h,{ref:0,isMobile:1,disabled:2,className:3,click:4},Lu)}};function Nu(e){let t,i;return{c(){t=O("svg"),i=O("path"),U(i,"d","M17.671 10.923c.82.483.82 1.67 0 2.154l-8.787 5.175A1.25 1.25 0 0 1 7 17.174V6.826a1.25 1.25 0 0 1 1.884-1.078l8.787 5.175z"),U(i,"fill",e[3]),U(t,"width",e[0]),U(t,"height",e[1]),U(t,"viewBox",e[2]),U(t,"fill","none"),U(t,"xmlns","http://www.w3.org/2000/svg"),U(t,"aria-hidden","true"),U(t,"data-testid","play-icon")},m(e,r){k(e,t,r),A(t,i)},p(e,[r]){8&r&&U(i,"fill",e[3]),1&r&&U(t,"width",e[0]),2&r&&U(t,"height",e[1]),4&r&&U(t,"viewBox",e[2])},i:o,o,d(e){e&&L(t)}}}function Vu(e,t,i){let{width:r="24"}=t,{height:n="24"}=t,{viewBox:a="0 0 24 24"}=t,{fill:s="#fff"}=t;return e.$$set=e=>{"width"in e&&i(0,r=e.width),"height"in e&&i(1,n=e.height),"viewBox"in e&&i(2,a=e.viewBox),"fill"in e&&i(3,s=e.fill)},[r,n,a,s]}var Du=class extends Le{constructor(e){super(),Ce(this,e,Vu,Nu,h,{width:0,height:1,viewBox:2,fill:3})}};function Bu(e){let t,i;return{c(){t=O("svg"),i=O("path"),U(i,"d","M8.712 5c.448 0 .61.047.774.134a.913.913 0 0 1 .38.38c.087.164.134.326.134.774v11.424c0 .448-.047.61-.134.774a.914.914 0 0 1-.38.38c-.164.087-.326.134-.774.134H6.788c-.448 0-.61-.047-.774-.134a.914.914 0 0 1-.38-.38c-.087-.164-.134-.326-.134-.774V6.288c0-.448.047-.61.134-.774a.913.913 0 0 1 .38-.38C6.178 5.047 6.34 5 6.788 5h1.924zm8 0c.448 0 .61.047.774.134a.914.914 0 0 1 .38.38c.087.164.134.326.134.774v11.424c0 .448-.047.61-.134.774a.914.914 0 0 1-.38.38c-.164.087-.326.134-.774.134h-1.924c-.448 0-.61-.047-.774-.134a.914.914 0 0 1-.38-.38c-.087-.164-.134-.326-.134-.774V6.288c0-.448.047-.61.134-.774a.914.914 0 0 1 .38-.38c.164-.087.326-.134.774-.134h1.924z"),U(i,"fill",e[3]),U(t,"width",e[0]),U(t,"height",e[1]),U(t,"viewBox",e[2]),U(t,"fill","none"),U(t,"xmlns","http://www.w3.org/2000/svg"),U(t,"aria-hidden","true"),U(t,"data-testid","pause-icon")},m(e,r){k(e,t,r),A(t,i)},p(e,[r]){8&r&&U(i,"fill",e[3]),1&r&&U(t,"width",e[0]),2&r&&U(t,"height",e[1]),4&r&&U(t,"viewBox",e[2])},i:o,o,d(e){e&&L(t)}}}function Uu(e,t,i){let{width:r="24"}=t,{height:n="24"}=t,{viewBox:a="0 0 24 24"}=t,{fill:s="#fff"}=t;return e.$$set=e=>{"width"in e&&i(0,r=e.width),"height"in e&&i(1,n=e.height),"viewBox"in e&&i(2,a=e.viewBox),"fill"in e&&i(3,s=e.fill)},[r,n,a,s]}var Fu=class extends Le{constructor(e){super(),Ce(this,e,Uu,Bu,h,{width:0,height:1,viewBox:2,fill:3})}};function ju(e){C(e,"svelte-1ot3duq",".mobile.svelte-1ot3duq{position:relative;display:flex;align-items:center;justify-content:center}.mobile.svelte-1ot3duq svg{transform:scale(2)}.icon-background-mobile.svelte-1ot3duq{position:absolute;top:16px;left:16px;border-radius:var(--big-play-radius);background-color:var(--big-play-bg-color);width:calc(100% - 32px);height:calc(100% - 32px)}")}function Hu(e){let t;return{c(){t=P("div"),U(t,"class","icon-background-mobile svelte-1ot3duq")},m(e,i){k(e,t,i)},d(e){e&&L(t)}}}function zu(e){let t,i,r,n,a=e[1]&&Hu();var s=e[8];return s&&(r=q(s,{})),{c(){a&&a.c(),t=I(),i=P("div"),r&&Ee(r.$$.fragment),U(i,"class","svelte-1ot3duq"),z(i,"mobile",e[1])},m(e,s){a&&a.m(e,s),k(e,t,s),k(e,i,s),r&&xe(r,i,null),n=!0},p(e,o){if(e[1]?a||(a=Hu(),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),256&o&&s!==(s=e[8])){if(r){ge();let e=r;ye(e.$$.fragment,1,0,(()=>{Ae(e,1)})),ve()}s?(r=q(s,{}),Ee(r.$$.fragment),be(r.$$.fragment,1),xe(r,i,null)):r=null}(!n||2&o)&&z(i,"mobile",e[1])},i(e){n||(r&&be(r.$$.fragment,e),n=!0)},o(e){r&&ye(r.$$.fragment,e),n=!1},d(e){e&&(L(t),L(i)),a&&a.d(e),r&&Ae(r)}}}function qu(e){let t,i,r;function n(t){e[13](t)}let a={className:(e[1]?"btn-m--play":"")+" "+e[3],testId:"btn-play",click:e[5]?e[6]:e[4],disabled:e[2],ariaLabel:e[7],ariaKeyShortCut:Ie.KeyK,$$slots:{default:[zu]},$$scope:{ctx:e}};return void 0!==e[0]&&(a.ref=e[0]),t=new Sn({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,[r]){let n={};10&r&&(n.className=(e[1]?"btn-m--play":"")+" "+e[3]),112&r&&(n.click=e[5]?e[6]:e[4]),4&r&&(n.disabled=e[2]),128&r&&(n.ariaLabel=e[7]),33026&r&&(n.$$scope={dirty:r,ctx:e}),!i&&1&r&&(i=!0,n.ref=e[0],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Wu(e,t,i){let r,n,{fakeIsPlaying$:s}=tt();v(e,s,(e=>i(12,n=e)));let o,l,u,c,{ref:d}=t,{isMobile:p=!1}=t,{isPlaying:h=!1}=t,{disabled:f=!1}=t,{className:m=""}=t,{click:g=a.noop}=t,{toggle:b}=s;return e.$$set=e=>{"ref"in e&&i(0,d=e.ref),"isMobile"in e&&i(1,p=e.isMobile),"isPlaying"in e&&i(10,h=e.isPlaying),"disabled"in e&&i(2,f=e.disabled),"className"in e&&i(3,m=e.className),"click"in e&&i(4,g=e.click)},e.$$.update=()=>{4096&e.$$.dirty&&i(5,l=null!==n),5152&e.$$.dirty&&i(11,u=l?n:h),2048&e.$$.dirty&&i(7,c=Pt(u?"tooltip_pause":"tooltip_play")),2048&e.$$.dirty&&i(8,r=u?Fu:Du)},i(6,o=b),[d,p,f,m,g,l,o,c,r,s,h,u,n,function(e){d=e,i(0,d)}]}var Gu=class extends Le{constructor(e){super(),Ce(this,e,Wu,qu,h,{ref:0,isMobile:1,isPlaying:10,disabled:2,className:3,click:4},ju)}};function Qu(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"data-testid":"play-prev-chapter-icon"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"d","M12.583 12.917v2.496a1 1 0 0 1-1.522.853l-5.583-3.413a1 1 0 0 1 0-1.706l5.583-3.413a1 1 0 0 1 1.522.853v2.496l5.478-3.349a1 1 0 0 1 1.522.853v6.826a1 1 0 0 1-1.522.853z"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"data-testid":"play-prev-chapter-icon"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function Yu(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var Ku=class extends Le{constructor(e){super(),Ce(this,e,Yu,Qu,h,{})}};function Xu(e){let t,i;return t=new Ku({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Zu(e){let t,i,r;function n(t){e[4](t)}let a={className:e[1]?"hidden":"",testId:"btn-play-prev-chapter",ariaLabel:Pt("tooltip_interactive_go_back"),disabled:e[2],click:e[3],$$slots:{default:[Xu]},$$scope:{ctx:e}};return void 0!==e[0]&&(a.ref=e[0]),t=new Sn({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,[r]){let n={};2&r&&(n.className=e[1]?"hidden":""),4&r&&(n.disabled=e[2]),8&r&&(n.click=e[3]),32&r&&(n.$$scope={dirty:r,ctx:e}),!i&&1&r&&(i=!0,n.ref=e[0],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Ju(e,t,i){let{ref:r}=t,{hidden:n=!1}=t,{disabled:a=!1}=t,{click:s}=t;return e.$$set=e=>{"ref"in e&&i(0,r=e.ref),"hidden"in e&&i(1,n=e.hidden),"disabled"in e&&i(2,a=e.disabled),"click"in e&&i(3,s=e.click)},[r,n,a,s,function(e){r=e,i(0,r)}]}var ec=class extends Le{constructor(e){super(),Ce(this,e,Ju,Zu,h,{ref:0,hidden:1,disabled:2,click:3})}};function tc(e){let t,i,r,n,a=e[2].default,s=b(a,e,e[1],null),o=[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"seek-to-interactive-icon"},{role:"img"},e[0]],u={};for(let e=0;e<o.length;e+=1)u=l(u,o[e]);return{c(){t=O("svg"),s&&s.c(),i=O("path"),r=O("path"),U(i,"fill","#fff"),U(i,"fill-rule","evenodd"),U(i,"d","M16.726 4.845C16.187 4.8 15.496 4.8 14.5 4.8H7.9a.9.9 0 1 1 0-1.8h6.639c.947 0 1.713 0 2.333.05.64.053 1.204.163 1.726.43a4.4 4.4 0 0 1 1.923 1.922c.266.523.377 1.087.429 1.726.05.62.05 1.386.05 2.334v5.076c0 .948 0 1.714-.05 2.334-.052.64-.163 1.203-.43 1.726a4.4 4.4 0 0 1-1.922 1.922c-.522.267-1.086.377-1.726.43-.62.05-1.386.05-2.333.05H7.9a.9.9 0 1 1 0-1.8h6.6c.995 0 1.687 0 2.226-.045.528-.043.828-.123 1.055-.238a2.6 2.6 0 0 0 1.136-1.137c.115-.226.195-.527.239-1.055.044-.538.044-1.23.044-2.225v-5c0-.995 0-1.687-.044-2.226-.043-.527-.124-.828-.239-1.054a2.6 2.6 0 0 0-1.136-1.137c-.227-.115-.527-.195-1.055-.238"),U(i,"clip-rule","evenodd"),U(r,"fill","#fff"),U(r,"d","M7.76 11.169V8.908c0-.708.704-1.143 1.252-.774l4.594 3.093c.525.353.525 1.193 0 1.546l-4.594 3.093c-.548.369-1.252-.066-1.252-.774v-2.261l-4.508 3.035C2.704 16.235 2 15.8 2 15.091V8.908c0-.708.704-1.143 1.252-.774z"),F(t,u)},m(e,a){k(e,t,a),s&&s.m(t,null),A(t,i),A(t,r),n=!0},p(e,[i]){s&&s.p&&(!n||2&i)&&$(s,a,e,e[1],n?S(a,e[1],i,null):_(e[1]),null),F(t,u=_e(o,[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"seek-to-interactive-icon"},{role:"img"},1&i&&e[0]]))},i(e){n||(be(s,e),n=!0)},o(e){ye(s,e),n=!1},d(e){e&&L(t),s&&s.d(e)}}}function ic(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var rc=class extends Le{constructor(e){super(),Ce(this,e,ic,tc,h,{})}};function nc(e){let t,i;return t=new rc({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function ac(e){let t,i,r;function n(t){e[4](t)}let a={className:e[1]?"hidden":"",testId:"btn-seek-to-interactive",ariaLabel:Pt("tooltip_interactive_seek"),disabled:e[2],click:e[3],$$slots:{default:[nc]},$$scope:{ctx:e}};return void 0!==e[0]&&(a.ref=e[0]),t=new Sn({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,[r]){let n={};2&r&&(n.className=e[1]?"hidden":""),4&r&&(n.disabled=e[2]),8&r&&(n.click=e[3]),32&r&&(n.$$scope={dirty:r,ctx:e}),!i&&1&r&&(i=!0,n.ref=e[0],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function sc(e,t,i){let{ref:r}=t,{hidden:n=!1}=t,{disabled:a=!1}=t,{click:s}=t;return e.$$set=e=>{"ref"in e&&i(0,r=e.ref),"hidden"in e&&i(1,n=e.hidden),"disabled"in e&&i(2,a=e.disabled),"click"in e&&i(3,s=e.click)},[r,n,a,s,function(e){r=e,i(0,r)}]}var oc=class extends Le{constructor(e){super(),Ce(this,e,sc,ac,h,{ref:0,hidden:1,disabled:2,click:3})}};function lc(e){let t,i,r,n,a=e[2].default,s=b(a,e,e[1],null),o=[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{role:"img"},e[0]],u={};for(let e=0;e<o.length;e+=1)u=l(u,o[e]);return{c(){t=O("svg"),s&&s.c(),i=O("path"),r=O("path"),U(i,"fill","#fff"),U(i,"fill-rule","evenodd"),U(i,"d","M16.777 3h1.419c.31 0 .596 0 .834.02.258.02.539.068.817.21.397.2.72.523.923.918.141.277.19.557.21.814.02.237.02.521.02.83V7.19c0 .31 0 .594-.02.831-.02.256-.069.537-.21.813a2.1 2.1 0 0 1-.923.92c-.278.14-.56.188-.817.21-.238.019-.524.019-.834.019h-1.419c-.31 0-.596 0-.834-.02a2.15 2.15 0 0 1-.817-.21 2.1 2.1 0 0 1-.923-.919 2.1 2.1 0 0 1-.21-.813 8 8 0 0 1-.02-.63l-2.198-.002c-.495-.001-.81 0-1.05.018-.23.019-.309.05-.343.067a.8.8 0 0 0-.352.35c-.017.034-.049.113-.068.341-.02.24-.02.554-.02 1.046v5.57c0 .49 0 .804.02 1.043.019.228.05.306.068.34.077.15.2.273.35.35.035.017.113.049.342.067.24.02.555.021 1.048.022l2.203.003a8 8 0 0 1 .02-.627c.02-.256.069-.537.21-.813.203-.396.526-.718.923-.92.278-.14.56-.189.817-.21.238-.019.524-.019.834-.019h1.419c.31 0 .596 0 .834.02.258.02.539.068.817.21.397.201.72.523.923.919.141.276.19.557.21.813.02.237.02.522.02.831v1.397c0 .31 0 .594-.02.831-.02.256-.069.537-.21.814a2.1 2.1 0 0 1-.923.919c-.278.14-.56.189-.817.21-.238.019-.524.019-.834.019h-1.419c-.31 0-.596 0-.834-.02a2.15 2.15 0 0 1-.817-.21 2.1 2.1 0 0 1-.923-.918 2.1 2.1 0 0 1-.21-.814 8 8 0 0 1-.02-.63l-2.24-.002c-.449 0-.839-.001-1.16-.028-.341-.028-.684-.09-1.016-.259a2.6 2.6 0 0 1-1.14-1.137c-.17-.33-.231-.672-.259-1.011-.026-.321-.026-.71-.026-1.156v-1.921H2.905A.903.903 0 0 1 2 11.992c0-.498.405-.901.905-.901h5.227V9.177c0-.448 0-.837.026-1.159.028-.34.09-.682.26-1.013a2.6 2.6 0 0 1 1.144-1.138c.332-.168.676-.23 1.017-.257.323-.025.714-.025 1.164-.024l2.23.003a8 8 0 0 1 .02-.627c.02-.257.069-.537.21-.814.203-.395.526-.717.923-.919.278-.14.56-.189.817-.21C16.18 3 16.467 3 16.777 3m-.833 1.837a1 1 0 0 1 .146-.02 10 10 0 0 1 .72-.014h1.354c.353 0 .563 0 .719.013a1 1 0 0 1 .146.021.3.3 0 0 1 .126.126 1 1 0 0 1 .021.145c.013.156.014.365.014.716v1.334c0 .352 0 .561-.014.716a1 1 0 0 1-.02.146.3.3 0 0 1-.127.125 1 1 0 0 1-.146.022c-.156.012-.366.013-.719.013H16.81c-.353 0-.563 0-.719-.013a1 1 0 0 1-.146-.022.3.3 0 0 1-.126-.125 1 1 0 0 1-.021-.146 10 10 0 0 1-.014-.716V5.824c0-.351.001-.56.014-.716a1 1 0 0 1 .021-.145.3.3 0 0 1 .126-.126Zm0 11.018a1 1 0 0 1 .146-.022c.156-.012.366-.013.72-.013h1.354c.353 0 .563 0 .719.013a1 1 0 0 1 .146.022.3.3 0 0 1 .126.125 1 1 0 0 1 .021.146c.013.155.014.364.014.716v1.334c0 .351 0 .56-.014.716a1 1 0 0 1-.02.145.3.3 0 0 1-.127.126 1 1 0 0 1-.146.02c-.156.014-.366.014-.719.014H16.81c-.353 0-.563 0-.719-.013a1 1 0 0 1-.146-.021.3.3 0 0 1-.126-.126 1 1 0 0 1-.021-.145 10 10 0 0 1-.014-.716v-1.334c0-.352.001-.561.014-.716a1 1 0 0 1 .021-.146.3.3 0 0 1 .126-.125Z"),U(i,"clip-rule","evenodd"),U(r,"fill","#fff"),U(r,"fill-rule","evenodd"),U(r,"d","M15.2 5.899v1.203c0 .594 0 .892.115 1.119.102.2.265.362.464.463.227.116.525.116 1.12.116H18.1c.595 0 .892 0 1.12-.116.199-.101.361-.264.463-.463.116-.227.116-.525.116-1.12V5.9c0-.595 0-.892-.116-1.12a1.06 1.06 0 0 0-.464-.463c-.227-.116-.524-.116-1.119-.116h-1.203c-.594 0-.892 0-1.119.116-.2.102-.362.264-.464.464-.115.227-.115.524-.115 1.119Zm-.051 11.03v1.143c0 .605 0 .908.118 1.139.103.203.268.368.472.472.23.117.533.117 1.138.117H18.1c.605 0 .907 0 1.138-.117a1.08 1.08 0 0 0 .472-.472c.118-.231.118-.534.118-1.139v-1.144c0-.605 0-.907-.118-1.138a1.08 1.08 0 0 0-.472-.472c-.231-.118-.534-.118-1.138-.118h-1.224c-.605 0-.907 0-1.138.118a1.08 1.08 0 0 0-.472.472c-.118.23-.118.533-.118 1.138Z"),U(r,"class","_closed"),U(r,"clip-rule","evenodd"),F(t,u)},m(e,a){k(e,t,a),s&&s.m(t,null),A(t,i),A(t,r),n=!0},p(e,[i]){s&&s.p&&(!n||2&i)&&$(s,a,e,e[1],n?S(a,e[1],i,null):_(e[1]),null),F(t,u=_e(o,[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{role:"img"},1&i&&e[0]]))},i(e){n||(be(s,e),n=!0)},o(e){ye(s,e),n=!1},d(e){e&&L(t),s&&s.d(e)}}}function uc(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var cc=class extends Le{constructor(e){super(),Ce(this,e,uc,lc,h,{})}};function dc(e){C(e,"svelte-17ceof5",'svg[data-testid="graph-open-icon"] ._closed{visibility:hidden;opacity:0}')}function pc(e){let t,i;return t=new cc({props:{"data-testid":e[0]?"graph-close-icon":"graph-open-icon"}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,[i]){let r={};1&i&&(r["data-testid"]=e[0]?"graph-close-icon":"graph-open-icon"),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function hc(e,t,i){let{isOpened:r=!1}=t;return e.$$set=e=>{"isOpened"in e&&i(0,r=e.isOpened)},[r]}var fc=class extends Le{constructor(e){super(),Ce(this,e,hc,pc,h,{isOpened:0},dc)}};function mc(e){let t,i;return t=new fc({props:{isOpened:!!e[3]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};8&i&&(r.isOpened=!!e[3]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function gc(e){let t,i,r;function n(t){e[6](t)}let a={className:e[1]?"hidden":"",testId:"btn-graph",disabled:e[2],ariaLabel:e[5],click:e[4],$$slots:{default:[mc]},$$scope:{ctx:e}};return void 0!==e[0]&&(a.ref=e[0]),t=new Sn({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,[r]){let n={};2&r&&(n.className=e[1]?"hidden":""),4&r&&(n.disabled=e[2]),32&r&&(n.ariaLabel=e[5]),16&r&&(n.click=e[4]),136&r&&(n.$$scope={dirty:r,ctx:e}),!i&&1&r&&(i=!0,n.ref=e[0],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function vc(e,t,i){let r,{ref:n}=t,{hidden:a=!1}=t,{disabled:s=!1}=t,{graphIsOpened:o=!1}=t,{click:l}=t;return e.$$set=e=>{"ref"in e&&i(0,n=e.ref),"hidden"in e&&i(1,a=e.hidden),"disabled"in e&&i(2,s=e.disabled),"graphIsOpened"in e&&i(3,o=e.graphIsOpened),"click"in e&&i(4,l=e.click)},e.$$.update=()=>{8&e.$$.dirty&&i(5,r=Pt(o?"tooltip_interactive_graph_on":"tooltip_interactive_graph_off"))},[n,a,s,o,l,r,function(e){n=e,i(0,n)}]}var bc=class extends Le{constructor(e){super(),Ce(this,e,vc,gc,h,{ref:0,hidden:1,disabled:2,graphIsOpened:3,click:4})}};function yc(e){let t,i;return t=new ki({props:{isActive:e[1]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};2&i&&(r.isActive=e[1]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Sc(e){let t,i;return t=new Sn({props:{className:e[0]?"":"btn--live btn-full-opacity",testId:e[1]?"btn-live":"btn-live-offset",disabled:e[1]&&e[3]===n.PlaybackState.PLAYING,ariaLabel:e[2],click:e[4],$$slots:{default:[yc]},$$scope:{ctx:e}}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,[i]){let r={};1&i&&(r.className=e[0]?"":"btn--live btn-full-opacity"),2&i&&(r.testId=e[1]?"btn-live":"btn-live-offset"),10&i&&(r.disabled=e[1]&&e[3]===n.PlaybackState.PLAYING),4&i&&(r.ariaLabel=e[2]),16&i&&(r.click=e[4]),514&i&&(r.$$scope={dirty:i,ctx:e}),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function $c(e,t,i){let r,{isMobile:a=!1}=t,{isLiveActive:s=!1}=t,{ariaLabel:o=""}=t,l=et(),u=l.state.playbackState$;v(e,u,(e=>i(3,r=e)));let c,d=l.actions.internal.switchToActiveLive,p=l.actions.internal.togglePlay;return e.$$set=e=>{"isMobile"in e&&i(0,a=e.isMobile),"isLiveActive"in e&&i(1,s=e.isLiveActive),"ariaLabel"in e&&i(2,o=e.ariaLabel)},e.$$.update=()=>{10&e.$$.dirty&&i(4,c=()=>{s?r===n.PlaybackState.PAUSED&&p():d()})},[a,s,o,r,c,u]}var _c=class extends Le{constructor(e){super(),Ce(this,e,$c,Sc,h,{isMobile:0,isLiveActive:1,ariaLabel:2})}};function Tc(e){let t,i,r,n;return{c(){t=P("img"),U(t,"class","icon"),f(t.src,i=e[0])||U(t,"src",i),U(t,"aria-hidden","true")},m(i,a){k(i,t,a),r||(n=V(t,"error",e[2]),r=!0)},p(e,r){1&r&&!f(t.src,i=e[0])&&U(t,"src",i)},d(e){e&&L(t),r=!1,n()}}}function wc(e){let t;return{c(){t=P("div"),t.innerHTML='<div class="inner"></div>',U(t,"class","icon icon-error-stub")},m(e,i){k(e,t,i)},p:o,d(e){e&&L(t)}}}function Ec(e){let t;function i(e,t){return e[1]?wc:Tc}let r=i(e),n=r(e);return{c(){n.c(),t=N()},m(e,i){n.m(e,i),k(e,t,i)},p(e,[a]){r===(r=i(e))&&n?n.p(e,a):(n.d(1),n=r(e),n&&(n.c(),n.m(t.parentNode,t)))},i:o,o,d(e){e&&L(t),n.d(e)}}}function xc(e,t,i){let r,{icon:n}=t;return e.$$set=e=>{"icon"in e&&i(0,n=e.icon)},i(1,r=!1),[n,r,()=>{i(1,r=!0)}]}var Ac=class extends Le{constructor(e){super(),Ce(this,e,xc,Ec,h,{icon:0})}};function Cc(e){let t,i;return t=new Ac({props:{icon:e[3]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};8&i&&(r.icon=e[3]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function kc(e){let t,i;return t=new Sn({props:{className:e[8],ariaLabel:e[4],click:e[7],disabled:e[9],testId:e[2]??e[1],$$slots:{default:[Cc]},$$scope:{ctx:e}}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};256&i&&(r.className=e[8]),16&i&&(r.ariaLabel=e[4]),128&i&&(r.click=e[7]),512&i&&(r.disabled=e[9]),6&i&&(r.testId=e[2]??e[1]),8200&i&&(r.$$scope={dirty:i,ctx:e}),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Lc(e){let t,i,r;function n(t){e[12](t)}let a={disabled:e[9],tooltipContent:e[5],disabledTooltipContent:e[6],width:40,$$slots:{default:[kc]},$$scope:{ctx:e}};return void 0!==e[0]&&(a.ref=e[0]),t=new ls({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,[r]){let n={};512&r&&(n.disabled=e[9]),32&r&&(n.tooltipContent=e[5]),64&r&&(n.disabledTooltipContent=e[6]),9118&r&&(n.$$scope={dirty:r,ctx:e}),!i&&1&r&&(i=!0,n.ref=e[0],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Rc(e,t,i){let r,n,s,{id:o}=t,{testId:l}=t,{icon:u}=t,{ariaLabel:c}=t,{tooltipText:d}=t,{disabledTooltipContent:p}=t,{disabled:h=!1}=t,{onClick:f=a.noop}=t,{ref:m}=t;return e.$$set=e=>{"id"in e&&i(1,o=e.id),"testId"in e&&i(2,l=e.testId),"icon"in e&&i(3,u=e.icon),"ariaLabel"in e&&i(4,c=e.ariaLabel),"tooltipText"in e&&i(5,d=e.tooltipText),"disabledTooltipContent"in e&&i(6,p=e.disabledTooltipContent),"disabled"in e&&i(10,h=e.disabled),"onClick"in e&&i(7,f=e.onClick),"ref"in e&&i(0,m=e.ref)},e.$$.update=()=>{128&e.$$.dirty&&i(11,r=f===a.noop),3072&e.$$.dirty&&i(9,n=r||h),2048&e.$$.dirty&&i(8,s=r?"btn-full-opacity":"")},[m,o,l,u,c,d,p,f,s,n,h,r,function(e){m=e,i(0,m)}]}var Pc=class extends Le{constructor(e){super(),Ce(this,e,Rc,Lc,h,{id:1,testId:2,icon:3,ariaLabel:4,tooltipText:5,disabledTooltipContent:6,disabled:10,onClick:7,ref:0})}},Oc=e=>!!e.buttonComponent,Mc=100,Ic=200,Nc=300,Vc=400,Dc=500,Bc=600,Uc=700;function Fc(e){C(e,"svelte-ips4nw",".wrapper-bottom.svelte-ips4nw.svelte-ips4nw{pointer-events:none;position:absolute;z-index:var(--controls-container-z-index);width:100%;bottom:0;left:0;height:var(--controls-gradient-height);background:var(--controls-gradient);transition:transform var(--controls-transition-duration) var(--controls-transition-fn);display:flex;flex-direction:column;justify-content:flex-end;box-sizing:border-box}.wrapper-bottom.svelte-ips4nw>.svelte-ips4nw{pointer-events:auto}.controls.svelte-ips4nw.svelte-ips4nw{width:100%;display:flex;align-items:center;justify-content:space-between;height:var(--controls-height);white-space:nowrap;font-size:13px;transition:transform var(--controls-transition-duration) var(--controls-transition-fn);will-change:transform;padding:0 8px 4px;box-sizing:border-box}.controls-left.svelte-ips4nw.svelte-ips4nw,.controls-right.svelte-ips4nw.svelte-ips4nw{display:flex;align-content:center}.controls-left.svelte-ips4nw.svelte-ips4nw{flex-grow:1;min-width:0;overflow:hidden}.controls-left.svelte-ips4nw > *:not(:first-child),.controls-right.svelte-ips4nw > *{margin-left:var(--controls-desktop-item-margin-left)}.controls-hidden.svelte-ips4nw.svelte-ips4nw{visibility:visible;transform:translateY(100%)}.wrapper-bottom.no-smooth.svelte-ips4nw.svelte-ips4nw{transition:none}")}function jc(e,t,i){let r=e.slice();return r[201]=t[i],r[202]=t,r[203]=i,r}function Hc(e,t,i){let r=e.slice();return r[201]=t[i],r[204]=t,r[205]=i,r}function zc(e){let t,i,r;function n(t){e[163](t,e[201])}let a={buttonComponent:e[201].buttonComponent,buttonComponentProps:e[201].buttonComponentProps,tooltipText:e[201].tooltipText,disabledTooltipContent:e[201].disabledTooltipContent,disabled:e[201].disabled,className:e[201].className};return void 0!==e[10][e[201].id]&&(a.ref=e[10][e[201].id]),t=new su({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(r,n){e=r;let a={};2048&n[0]&&(a.buttonComponent=e[201].buttonComponent),2048&n[0]&&(a.buttonComponentProps=e[201].buttonComponentProps),2048&n[0]&&(a.tooltipText=e[201].tooltipText),2048&n[0]&&(a.disabledTooltipContent=e[201].disabledTooltipContent),2048&n[0]&&(a.disabled=e[201].disabled),2048&n[0]&&(a.className=e[201].className),!i&&3072&n[0]&&(i=!0,a.ref=e[10][e[201].id],ue((()=>i=!1))),t.$set(a)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function qc(e){let t,i,r;function n(t){e[164](t)}let a={isMobile:!1,showDuration:e[15],position:e[5]?e[33]:e[34],duration:e[5]?e[35]:e[36]};return void 0!==e[10].time&&(a.ref=e[10].time),t=new ja({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};32768&r[0]&&(n.showDuration=e[15]),32&r[0]|12&r[1]&&(n.position=e[5]?e[33]:e[34]),32&r[0]|48&r[1]&&(n.duration=e[5]?e[35]:e[36]),!i&&1024&r[0]&&(i=!0,n.ref=e[10].time,ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Wc(e){let t,i;return t=new Tl({props:{position:e[34],duration:e[36],timeCodes:e[50]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};8&i[1]&&(r.position=e[34]),32&i[1]&&(r.duration=e[36]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Gc(e){let t,i,r=e[8]&&Wc(e);return{c(){r&&r.c(),t=N()},m(e,n){r&&r.m(e,n),k(e,t,n),i=!0},p(e,i){e[8]?r?(r.p(e,i),256&i[0]&&be(r,1)):(r=Wc(e),r.c(),be(r,1),r.m(t.parentNode,t)):r&&(ge(),ye(r,1,1,(()=>{r=null})),ve())},i(e){i||(be(r),i=!0)},o(e){ye(r),i=!1},d(e){e&&L(t),r&&r.d(e)}}}function Qc(e){let t,i,r;function n(t){e[168](t,e[201])}let a={id:e[201].id,testId:e[201].testId,icon:e[201].icon,ariaLabel:e[201].ariaLabel,tooltipText:e[201].tooltipText,disabledTooltipContent:e[201].disabledTooltipContent,disabled:!!e[201].disabled,onClick:e[201].onClick};return void 0!==e[10][e[201].id]&&(a.ref=e[10][e[201].id]),t=new Pc({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(r,n){e=r;let a={};4096&n[0]&&(a.id=e[201].id),4096&n[0]&&(a.testId=e[201].testId),4096&n[0]&&(a.icon=e[201].icon),4096&n[0]&&(a.ariaLabel=e[201].ariaLabel),4096&n[0]&&(a.tooltipText=e[201].tooltipText),4096&n[0]&&(a.disabledTooltipContent=e[201].disabledTooltipContent),4096&n[0]&&(a.disabled=!!e[201].disabled),4096&n[0]&&(a.onClick=e[201].onClick),!i&&5120&n[0]&&(i=!0,a.ref=e[10][e[201].id],ue((()=>i=!1))),t.$set(a)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Yc(e){let t,i,r;function n(t){e[167](t,e[201])}let a={buttonComponent:e[201].buttonComponent,buttonComponentProps:e[201].buttonComponentProps,tooltipText:e[201].tooltipText,disabledTooltipContent:e[201].disabledTooltipContent,disabled:e[201].disabled,className:e[201].className};return void 0!==e[10][e[201].id]&&(a.ref=e[10][e[201].id]),t=new su({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(r,n){e=r;let a={};4096&n[0]&&(a.buttonComponent=e[201].buttonComponent),4096&n[0]&&(a.buttonComponentProps=e[201].buttonComponentProps),4096&n[0]&&(a.tooltipText=e[201].tooltipText),4096&n[0]&&(a.disabledTooltipContent=e[201].disabledTooltipContent),4096&n[0]&&(a.disabled=e[201].disabled),4096&n[0]&&(a.className=e[201].className),!i&&5120&n[0]&&(i=!0,a.ref=e[10][e[201].id],ue((()=>i=!1))),t.$set(a)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Kc(e){let t,i,r,n,a,s=[Yc,Qc],o=[];function l(e,i){return 4096&i[0]&&(t=null),null==t&&(t=!!Oc(e[201])),t?0:1}return i=l(e,[-1,-1,-1,-1,-1,-1,-1]),r=o[i]=s[i](e),{c(){r.c(),n=N()},m(e,t){o[i].m(e,t),k(e,n,t),a=!0},p(e,t){let a=i;i=l(e,t),i===a?o[i].p(e,t):(ge(),ye(o[a],1,1,(()=>{o[a]=null})),ve(),r=o[i],r?r.p(e,t):(r=o[i]=s[i](e),r.c()),be(r,1),r.m(n.parentNode,n))},i(e){a||(be(r),a=!0)},o(e){ye(r),a=!1},d(e){e&&L(n),o[i].d(e)}}}function Xc(e){let t,i,r,n,a,s,o,l,u,c,p,h,f,m,g,v,b,y;function S(t){e[162](t)}let $={isHidden:!e[14],isAds:e[5],canRewindLive:e[6],isRewindableLive:e[13]};void 0!==e[10].timeline&&($.ref=e[10].timeline),i=new nl({props:$}),te.push((()=>we(i,"ref",S)));let _=Se(e[11]),T=[];for(let t=0;t<_.length;t+=1)T[t]=zc(Hc(e,_,t));let E=e=>ye(T[e],1,1,(()=>{T[e]=null})),x=e[7]&&qc(e);function C(t){e[165](t)}let O={className:"w-max",disabled:!e[8],tooltipContent:Pt("tooltip_episodes"),$$slots:{default:[Gc]},$$scope:{ctx:e}};void 0!==e[10].episodes&&(O.ref=e[10].episodes),u=new ls({props:O}),te.push((()=>we(u,"ref",C)));let M=Se(e[12]),D=[];for(let t=0;t<M.length;t+=1)D[t]=Kc(jc(e,M,t));let B=e=>ye(D[e],1,1,(()=>{D[e]=null})),F=e[67]&&function(e){let t,i,r;function n(t){e[171](t)}let a={};return void 0!==e[10].interactiveTimeIndicator&&(a.ref=e[10].interactiveTimeIndicator),t=new iu({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};!i&&1024&r[0]&&(i=!0,n.ref=e[10].interactiveTimeIndicator,ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}(e);return{c(){t=P("div"),Ee(i.$$.fragment),n=I(),a=P("div"),s=P("div");for(let e=0;e<T.length;e+=1)T[e].c();o=I(),x&&x.c(),l=I(),Ee(u.$$.fragment),h=I(),f=P("div");for(let e=0;e<D.length;e+=1)D[e].c();m=I(),F&&F.c(),g=N(),U(s,"class","controls-left svelte-ips4nw"),U(f,"class","controls-right svelte-ips4nw"),U(a,"class","controls svelte-ips4nw"),U(t,"class","wrapper-bottom svelte-ips4nw"),z(t,"hidden",e[2]),z(t,"controls-hidden",!e[4]),z(t,"no-smooth",e[3])},m(r,c){k(r,t,c),xe(i,t,null),A(t,n),A(t,a),A(a,s);for(let e=0;e<T.length;e+=1)T[e]&&T[e].m(s,null);A(s,o),x&&x.m(s,null),A(s,l),xe(u,s,null),A(a,h),A(a,f);for(let e=0;e<D.length;e+=1)D[e]&&D[e].m(f,null);e[169](a),e[170](t),k(r,m,c),F&&F.m(r,c),k(r,g,c),v=!0,b||(y=[w(p=Un.call(null,s)),V(s,"fd:resize",e[166])],b=!0)},p(e,n){let a={};if(16384&n[0]&&(a.isHidden=!e[14]),32&n[0]&&(a.isAds=e[5]),64&n[0]&&(a.canRewindLive=e[6]),8192&n[0]&&(a.isRewindableLive=e[13]),!r&&1024&n[0]&&(r=!0,a.ref=e[10].timeline,ue((()=>r=!1))),i.$set(a),3072&n[0]){let t;for(_=Se(e[11]),t=0;t<_.length;t+=1){let i=Hc(e,_,t);T[t]?(T[t].p(i,n),be(T[t],1)):(T[t]=zc(i),T[t].c(),be(T[t],1),T[t].m(s,o))}for(ge(),t=_.length;t<T.length;t+=1)E(t);ve()}e[7]?x?(x.p(e,n),128&n[0]&&be(x,1)):(x=qc(e),x.c(),be(x,1),x.m(s,l)):x&&(ge(),ye(x,1,1,(()=>{x=null})),ve());let d={};if(256&n[0]&&(d.disabled=!e[8]),256&n[0]|40&n[1]|1048576&n[6]&&(d.$$scope={dirty:n,ctx:e}),!c&&1024&n[0]&&(c=!0,d.ref=e[10].episodes,ue((()=>c=!1))),u.$set(d),5120&n[0]){let t;for(M=Se(e[12]),t=0;t<M.length;t+=1){let i=jc(e,M,t);D[t]?(D[t].p(i,n),be(D[t],1)):(D[t]=Kc(i),D[t].c(),be(D[t],1),D[t].m(f,null))}for(ge(),t=M.length;t<D.length;t+=1)B(t);ve()}(!v||4&n[0])&&z(t,"hidden",e[2]),(!v||16&n[0])&&z(t,"controls-hidden",!e[4]),(!v||8&n[0])&&z(t,"no-smooth",e[3]),e[67]&&F.p(e,n)},i(e){if(!v){be(i.$$.fragment,e);for(let e=0;e<_.length;e+=1)be(T[e]);be(x),be(u.$$.fragment,e);for(let e=0;e<M.length;e+=1)be(D[e]);be(F),v=!0}},o(e){ye(i.$$.fragment,e),T=T.filter(Boolean);for(let e=0;e<T.length;e+=1)ye(T[e]);ye(x),ye(u.$$.fragment,e),D=D.filter(Boolean);for(let e=0;e<D.length;e+=1)ye(D[e]);ye(F),v=!1},d(r){r&&(L(t),L(m),L(g)),Ae(i),R(T,r),x&&x.d(),Ae(u),R(D,r),e[169](null),e[170](null),F&&F.d(r),b=!1,d(y)}}}function Zc(e,t,i){let r,s,l,u,c,d,p,h,f,g,b,y,S,$,_,T,w,E,x,A,C,k,L,R,P,O,M,I,N,V,D,B,U,F,j,H,z,q,W,G,Q,Y,K,X,Z,J,ee,ie,re,ne,ae,se,oe,le,ue,ce,de,pe,he,fe,me,ge,ve,be,ye,Se,$e,_e,Te,we,Ee,xe,Ae,Ce=o,ke=o,Le=o,Re=o,Pe=o,Me=o,Ie=o,Ne=o,Ve=o,De=o,Be=o,Ue=o,Fe=o,je=o,He=o,ze=o,qe=o;e.$$.on_destroy.push((()=>Ce())),e.$$.on_destroy.push((()=>ke())),e.$$.on_destroy.push((()=>Le())),e.$$.on_destroy.push((()=>Re())),e.$$.on_destroy.push((()=>Pe())),e.$$.on_destroy.push((()=>Me())),e.$$.on_destroy.push((()=>Ie())),e.$$.on_destroy.push((()=>Ne())),e.$$.on_destroy.push((()=>Ve())),e.$$.on_destroy.push((()=>De())),e.$$.on_destroy.push((()=>Be())),e.$$.on_destroy.push((()=>Ue())),e.$$.on_destroy.push((()=>Fe())),e.$$.on_destroy.push((()=>je())),e.$$.on_destroy.push((()=>He())),e.$$.on_destroy.push((()=>ze())),e.$$.on_destroy.push((()=>qe()));let{bottomHidden:We}=t,{bottomNoSmooth:Qe}=t,{showControls:Ye}=t,{playerControlsWrapperRef:Ke}=t,{playerControlsRef:Xe}=t,{isAds:Ze=!1}=t,{canRewindLive:Je}=t,{logoClickable:it}=t,{logoHidden:rt}=t,{logoTargetUrl:nt=""}=t,{showNextPrevButtons:at}=t,{nextButtonActive:st}=t,{prevButtonActive:ot}=t,{customFullscreenSupported:lt=!0}=t,{toggleFullscreen:ut}=t,{seekToInteractive:ct}=t,{playPrevChapter:dt}=t,{fakeIsPlaying$:pt}=tt();v(e,pt,(e=>i(126,B=e)));let ht=et(),ft=tt(),mt=Oe(),gt=ht.actions.internal.toggleMuted,vt=ht.actions.internal.togglePlay,bt=ht.actions.internal.pause,yt=ht.actions.internal.toggleSubtitle,St=ht.callbacks?.onAudioDoesNotExistHint,$t=ht.callbacks?.onAudioDisabledHint,_t=ht.state.duration$;v(e,_t,(e=>i(36,Ae=e)));let Tt=ht.state.positionWithScrubbing$;v(e,Tt,(e=>i(34,Ee=e)));let wt=ht.state.playbackState$;v(e,wt,(e=>i(123,N=e)));let Et=ht.state.isAudioAvailable$;v(e,Et,(e=>i(172,U=e)));let xt=ht.state.isAudioDisabled,At=ht.state.isEnded$;v(e,At,(e=>i(158,Se=e)));let Ct=ht.state.isLive$;v(e,Ct,(e=>i(152,fe=e)));let kt=ht.state.isActiveLive$;v(e,kt,(e=>i(151,pe=e)));let Lt=ht.state.isRewindableLive$;v(e,Lt,(e=>i(13,he=e)));let Rt=ht.ui.isPictureInPictureActive$;v(e,Rt,(e=>i(154,ge=e)));let Ot=ht.ui.pictureInPictureType$;v(e,Ot,(e=>i(153,me=e)));let Mt=ht.ui.settingsMenu.visible$;v(e,Mt,(e=>i(122,I=e)));let It=ht.ui.settingsMenu.openedByBtnKeyboard$;v(e,It,(e=>i(128,j=e)));let Nt=ht.ui.controls,Vt=ht.actions.internal.getVideoEpisodes(),Dt=ht.state.chromecastState$;v(e,Dt,(e=>i(120,O=e)));let Bt=ht.state.availableSubtitlesList$;v(e,Bt,(e=>i(157,ye=e)));let Ut=ht.state.currentSubtitle$;v(e,Ut,(e=>i(159,$e=e)));let Ft=Nt.disabledControls$;v(e,Ft,(e=>i(161,Te=e)));let jt=ht.ui.contextMenu.visible$;v(e,jt,(e=>i(150,de=e)));let Ht=ht.ui.contextMenu.showContextMenuBtn$;v(e,Ht,(e=>i(155,ve=e)));let zt=ht.ui.contextMenu.openedByBtnKeyboard$;v(e,zt,(e=>i(156,be=e)));let qt=ht.ui.startedByKeyboard$;v(e,qt,(e=>i(127,F=e)));let Wt=ht.ads.duration;v(e,Wt,(e=>i(35,xe=e)));let Gt=ht.ads.position;v(e,Gt,(e=>i(33,we=e)));let Qt=ht.ads.playbackState;v(e,Qt,(e=>i(160,_e=e)));let Yt=ht.ui.isFullscreen;v(e,Yt,(e=>i(121,M=e)));let Kt=ht.ui.playerSize;v(e,Kt,(e=>i(131,q=e)));let Xt=ht.ui.currentGridType$;v(e,Xt,(e=>i(132,W=e)));let Zt=ht.ui.additionalDesktopControlPanelRightButtons$;v(e,Zt,(e=>i(119,P=e)));let Jt=ht.actions.internal.getVideoElement,ei=ht.actions.internal.replayInteractive,ti=ht.actions.internal.prevVideoClick,ii=ht.actions.internal.nextVideoClick,ri=ht.state.isInteractive,ni=ht.state.isInteractiveTime$;v(e,ni,(e=>i(130,z=e)));let ai=ht.state.showInteractiveGraph,si=ht.state.showSeekToInteractive,oi=ht.state.showPlayPrevChapter,li=ht.state.showInteractiveTimeIndicator,ui=ht.state.playPrevChapterDisabledTooltip,ci=ft.seekToInteractiveDisabledTooltip$;v(e,ci,(e=>i(125,D=e)));let di=ft.graphIsOpened$;v(e,di,(e=>i(124,V=e)));let pi,hi,fi,mi,gi,vi,bi,yi,Si,$i,_i,Ti,wi,Ei,xi,Ai,Ci,ki,Li,Ri,Pi,Oi,Mi,Ii,Ni,Vi,Di,Bi,Ui,Fi,ji,qi,Wi=mt.features.interactiveResponsiveUi,Gi=()=>ht.actions.internal.toggleChromecast(),Qi="",Yi={},Ki=(0,a.debounceFn)(Hl,260),Xi=Ge();function Zi(){an({isAudioDisabled:xt,audioDisabledHintCallback:$t,isAudioAvailable:U,audioIsNotExistHintCallback:St})&&gt()}v(e,Xi,(e=>i(129,H=e)));let Ji,er,tr,ir=ri?ei:vt,rr=[],nr=[];return e.$$set=e=>{"bottomHidden"in e&&i(2,We=e.bottomHidden),"bottomNoSmooth"in e&&i(3,Qe=e.bottomNoSmooth),"showControls"in e&&i(4,Ye=e.showControls),"playerControlsWrapperRef"in e&&i(0,Ke=e.playerControlsWrapperRef),"playerControlsRef"in e&&i(1,Xe=e.playerControlsRef),"isAds"in e&&i(5,Ze=e.isAds),"canRewindLive"in e&&i(6,Je=e.canRewindLive),"logoClickable"in e&&i(71,it=e.logoClickable),"logoHidden"in e&&i(72,rt=e.logoHidden),"logoTargetUrl"in e&&i(73,nt=e.logoTargetUrl),"showNextPrevButtons"in e&&i(74,at=e.showNextPrevButtons),"nextButtonActive"in e&&i(75,st=e.nextButtonActive),"prevButtonActive"in e&&i(76,ot=e.prevButtonActive),"customFullscreenSupported"in e&&i(77,lt=e.customFullscreenSupported),"toggleFullscreen"in e&&i(78,ut=e.toggleFullscreen),"seekToInteractive"in e&&i(79,ct=e.seekToInteractive),"playPrevChapter"in e&&i(80,dt=e.playPrevChapter)},e.$$.update=()=>{if(64&e.$$.dirty[5]&&i(117,r=Te.has("EPISODE_BUTTON")),64&e.$$.dirty[5]&&i(112,s=Te.has("GRAPH_BUTTON")),64&e.$$.dirty[5]&&i(113,l=Te.has("SEEK_TO_INTERACTIVE_BUTTON")),64&e.$$.dirty[5]&&i(115,u=Te.has("PLAY_BUTTON")),64&e.$$.dirty[5]&&i(116,c=Te.has("REPLAY_BUTTON")),64&e.$$.dirty[5]&&i(114,d=Te.has("PLAY_PREV_CHAPTER_BUTTON")),32&e.$$.dirty[0]|1073741824&e.$$.dirty[3]|32&e.$$.dirty[5]&&i(81,pi=Ze?"playing"===_e:N===n.PlaybackState.PLAYING),16&e.$$.dirty[5]&&i(82,hi="off"!==$e.value),32&e.$$.dirty[0]|8&e.$$.dirty[5]&&i(118,p=Se&&!Ze||ri),33554432&e.$$.dirty[3]|256&e.$$.dirty[4]&&i(83,fi=Wi?p&&Os(W,"m"):p),32&e.$$.dirty[0]|8&e.$$.dirty[5]&&i(84,mi=!Se||ri||Ze),256&e.$$.dirty[4]&&i(85,gi=Os(W,"m")),32&e.$$.dirty[0]|12288&e.$$.dirty[2]|256&e.$$.dirty[4]&&i(86,vi=at&&Os(W,"m")&&!Ze&&st),32&e.$$.dirty[0]|20480&e.$$.dirty[2]|256&e.$$.dirty[4]&&i(87,bi=at&&Os(W,"m")&&!Ze&&ot),32&e.$$.dirty[0]|268435456&e.$$.dirty[4]&&i(88,yi=!Ze&&!!fe),134217728&e.$$.dirty[3]|1610612992&e.$$.dirty[4]&&i(89,Si=O!==n.ChromecastState.NOT_AVAILABLE&&!(ge&&1===me)&&Os(W,"m")&&!ri),256&e.$$.dirty[4]|4&e.$$.dirty[5]&&i(90,$i=ye.length>0&&Os(W,"m")),3&e.$$.dirty[5]&&i(91,_i=be||ve),32&e.$$.dirty[0]|256&e.$$.dirty[4]&&i(92,Ti=Os(W,"s")&&!Ze),32&e.$$.dirty[0]|1024&e.$$.dirty[2]&&i(93,wi=!rt&&!Ze),33792&e.$$.dirty[2]|1610612992&e.$$.dirty[4]&&i(94,Ei=mt.features.fullscreen&&(rt||Os(W,Wi?"xs":"s"))&&!(ge&&1===me)&&(!ri||lt)),32&e.$$.dirty[0]|268435456&e.$$.dirty[4]&&i(7,xi=(!fe||Ze)&&!(mt.features.interactiveHideTime&&ri)),128&e.$$.dirty[4]&&i(14,Ai=q.width>100),256&e.$$.dirty[4]&&i(95,Ci=ai&&Os(W,"m")),256&e.$$.dirty[4]&&i(96,ki=Wi?si&&Os(W,"s"):si),256&e.$$.dirty[4]&&i(97,Li=Wi?oi&&Os(W,"s"):oi),32&e.$$.dirty[0]|8388608&e.$$.dirty[2]|16777216&e.$$.dirty[3]|268435456&e.$$.dirty[4]&&i(8,Ri=!Ze&&!fe&&!!Vt?.length&&gi&&!r),8192&e.$$.dirty[0]|134217728&e.$$.dirty[4]&&i(98,Pi=!he||pe),1&e.$$.dirty[4]&&i(99,Oi=Pt(V?"tooltip_interactive_graph_on":"tooltip_interactive_graph_off")),67108864&e.$$.dirty[4]&&i(100,Mi=Pt(de?"aria_label_context_menu_close":"aria_label_context_menu_open")),1073741856&e.$$.dirty[3]&&(t=N,Pi?t===n.PlaybackState.PAUSED&&i(101,Qi=Pt("tooltip_play")):i(101,Qi=Pt("tooltip_live"))),1048576&e.$$.dirty[2]&&i(103,Ni=Pt(hi?"tooltip_subtitles_on":"tooltip_subtitles_off")),268435456&e.$$.dirty[3]&&i(104,Vi=Pt(M?"tooltip_fullscreen_on":"tooltip_fullscreen_off")),134217728&e.$$.dirty[3]&&i(105,Di=O===n.ChromecastState.CONNECTED?Pt("tooltip_chromecast_on"):Pt("tooltip_chromecast_off")),67108864&e.$$.dirty[3]|67108352&e.$$.dirty[4]&&i(106,Ui={prevButton:ce?ce.right-ce.left:0,replayButton:ue?ue.right-ue.left:0,playButton:le?le.right-le.left:0,nextButton:oe?oe.right-oe.left:0,playPrevChapterButton:se?se.right-se.left:0,seekToInteractiveButton:ae?ae.right-ae.left:0,interactiveGraphButton:ne?ne.right-ne.left:0,liveButton:re?re.right-re.left:0,time:ie?ie.right-ie.left:0,episodes:ee?ee.right-ee.left:0,vkLogo:J?J.right-J.left:0,volume:Z?Z.right-Z.left:0,subtitles:X?X.right-X.left:0,settings:K?K.right-K.left:0,context:Y?Y.right-Y.left:0,fullscreen:Q?Q.right-Q.left:0,chromecast:G?G.right-G.left:0,additionalButtons:P.length?P.reduce((e=>[...e,40]),[]):[]}),24576&e.$$.dirty[3]&&(!Fi||Fi<Ui.time)&&i(107,Fi=Ui.time),896&e.$$.dirty[0]|24576&e.$$.dirty[3]|256&e.$$.dirty[4]){let e=0;Ri&&(e=Os(W,"xl")?Ui.time:60);let t=Ui.prevButton+Ui.playButton+Ui.nextButton+Ui.seekToInteractiveButton+Ui.interactiveGraphButton+Ui.liveButton+Fi+e;i(108,ji=xi&&Bi>=t)}var t;32768&e.$$.dirty[3]|256&e.$$.dirty[4]&&i(15,qi=ji&&Os(W,"m")),1040&e.$$.dirty[0]|192&e.$$.dirty[4]&&Ki(Jt(),Nt,Yi,Ye),536870912&e.$$.dirty[3]|32&e.$$.dirty[4]&&H&&Hi(H,I,It),536870912&e.$$.dirty[3]|16&e.$$.dirty[4]&&zi(undefined,I,j),8&e.$$.dirty[4]&&zl(qt,F,undefined),4&e.$$.dirty[4]&&i(109,Ji=null!==B),524288&e.$$.dirty[2]|65536&e.$$.dirty[3]|4&e.$$.dirty[4]&&i(110,er=Ji?B:pi),131072&e.$$.dirty[3]&&i(111,tr=Pt(er?"tooltip_pause":"tooltip_play")),2048&e.$$.dirty[0]|124674048&e.$$.dirty[2]|1090257276&e.$$.dirty[3]|3&e.$$.dirty[4]&&(i(11,rr=[]),bi&&rr.push({id:"prevButton",type:"desktop-control-panel-left",weight:ou,buttonComponent:xu,buttonComponentProps:{disabled:!ot,type:"prev",click:ti.bind(null,!0)},tooltipText:Pt("tooltip_previous"),disabled:!ot}),fi&&rr.push({id:"replayButton",type:"desktop-control-panel-left",weight:lu,buttonComponent:Iu,buttonComponentProps:{disabled:c,click:ir},tooltipText:Pt("tooltip_restart"),disabled:c}),mi&&rr.push({id:"playButton",type:"desktop-control-panel-left",weight:uu,buttonComponent:Gu,buttonComponentProps:{disabled:u,isPlaying:pi,click:vt},tooltipText:tr,disabled:u}),vi&&rr.push({id:"nextButton",type:"desktop-control-panel-left",weight:cu,buttonComponent:xu,buttonComponentProps:{disabled:!st,type:"next",click:ii.bind(null,!0)},tooltipText:Pt("tooltip_next"),disabled:!st}),ri&&(Li&&rr.push({id:"playPrevChapterButton",type:"desktop-control-panel-left",weight:du,buttonComponent:ec,buttonComponentProps:{disabled:d,click:dt},tooltipText:Pt("tooltip_interactive_go_back"),disabledTooltipContent:ui,disabled:d}),ki&&rr.push({id:"seekToInteractiveButton",type:"desktop-control-panel-left",weight:pu,buttonComponent:oc,buttonComponentProps:{disabled:l,click:ct},tooltipText:Pt("tooltip_interactive_seek"),disabled:l,disabledTooltipContent:Pt(D)}),Ci&&rr.push({id:"interactiveGraphButton",type:"desktop-control-panel-left",weight:hu,buttonComponent:bc,buttonComponentProps:{disabled:s,click:di.toggle,graphIsOpened:V},tooltipText:Oi})),yi&&rr.push({id:"liveButton",type:"desktop-control-panel-left",weight:fu,buttonComponent:_c,buttonComponentProps:{isLiveActive:Pi,ariaLabel:Qi},tooltipText:Qi,disabled:Pi&&N===n.PlaybackState.PLAYING}),i(11,rr=rr.sort(ur))),4096&e.$$.dirty[0]|2014382592&e.$$.dirty[2]|1006640771&e.$$.dirty[3]&&(i(12,nr=[]),wi&&nr.push({id:"vkLogo",type:"desktop-control-panel-right",weight:Mc,buttonComponent:mo,buttonComponentProps:{targetUrl:nt,logoClickable:it,click:bt},tooltipText:Ii,disabledTooltipContent:"",disabled:!it}),nr.push({id:"volume",type:"desktop-control-panel-right",weight:Ic,buttonComponent:Fs,buttonComponentProps:{click:Zi}}),$i&&nr.push({id:"subtitles",type:"desktop-control-panel-right",weight:Nc,buttonComponent:Va,buttonComponentProps:{isSubtitlesEnabled:hi,click:yt},tooltipText:Ni}),Ti&&nr.push({id:"settings",type:"desktop-control-panel-right",weight:Vc,buttonComponent:Ea,buttonComponentProps:{ref$:Xi},tooltipText:I?void 0:Pt("tooltip_settings_off")}),mt.features.contextMenuButton&&nr.push({id:"context",type:"desktop-control-panel-right",weight:Dc,buttonComponent:Xl,buttonComponentProps:{click:ut},className:_i?"":"out-of-view",tooltipText:Mi}),Ei&&nr.push({id:"fullscreen",type:"desktop-control-panel-right",weight:Bc,buttonComponent:Zs,buttonComponentProps:{isFullscreen:M,click:ut},tooltipText:Vi}),Si&&nr.push({id:"chromecast",type:"desktop-control-panel-right",weight:Uc,buttonComponent:Eo,buttonComponentProps:{state:O,click:Gi},tooltipText:Di}),i(12,nr=[...nr,...P].sort(ur)))},i(102,Ii="vk_video"===mt.logoType?Pt("tooltip_vk_video_logo"):Pt("tooltip_vk_logo")),i(32,({prevButton:h,replayButton:f,playButton:g,nextButton:b,playPrevChapterButton:y,seekToInteractiveButton:S,interactiveGraphButton:$,liveButton:_,time:T,episodes:w,vkLogo:E,volume:x,subtitles:A,settings:C,context:k,fullscreen:L,chromecast:R}=Nt),h,(i(31,f),ze(),ze=m(f,(e=>i(148,ue=e))),f),(i(30,g),He(),He=m(g,(e=>i(147,le=e))),g),(i(29,b),je(),je=m(b,(e=>i(146,oe=e))),b),(i(28,y),Fe(),Fe=m(y,(e=>i(145,se=e))),y),(i(27,S),Ue(),Ue=m(S,(e=>i(144,ae=e))),S),(i(26,$),Be(),Be=m($,(e=>i(143,ne=e))),$),(i(25,_),De(),De=m(_,(e=>i(142,re=e))),_),(i(24,T),Ve(),Ve=m(T,(e=>i(141,ie=e))),T),(i(23,w),Ne(),Ne=m(w,(e=>i(140,ee=e))),w),(i(22,E),Ie(),Ie=m(E,(e=>i(139,J=e))),E),(i(21,x),Me(),Me=m(x,(e=>i(138,Z=e))),x),(i(20,A),Pe(),Pe=m(A,(e=>i(137,X=e))),A),(i(19,C),Re(),Re=m(C,(e=>i(136,K=e))),C),(i(18,k),Le(),Le=m(k,(e=>i(135,Y=e))),k),(i(17,L),ke(),ke=m(L,(e=>i(134,Q=e))),L),(i(16,R),Ce(),Ce=m(R,(e=>i(133,G=e))),R)),qe(),qe=m(h,(e=>i(149,ce=e))),[Ke,Xe,We,Qe,Ye,Ze,Je,xi,Ri,Bi,Yi,rr,nr,he,Ai,qi,R,L,k,C,A,x,E,w,T,_,$,S,y,b,g,f,h,we,Ee,xe,Ae,pt,_t,Tt,wt,Et,At,Ct,kt,Lt,Rt,Ot,Mt,It,Vt,Dt,Bt,Ut,Ft,jt,Ht,zt,qt,Wt,Gt,Qt,Yt,Kt,Xt,Zt,ni,li,ci,di,Xi,it,rt,nt,at,st,ot,lt,ut,ct,dt,pi,hi,fi,mi,gi,vi,bi,yi,Si,$i,_i,Ti,wi,Ei,Ci,ki,Li,Pi,Oi,Mi,Qi,Ii,Ni,Vi,Di,Ui,Fi,ji,Ji,er,tr,s,l,d,u,c,r,p,P,O,M,I,N,V,D,B,F,j,H,z,q,W,G,Q,Y,K,X,Z,J,ee,ie,re,ne,ae,se,oe,le,ue,ce,de,pe,fe,me,ge,ve,be,ye,Se,$e,_e,Te,function(t){e.$$.not_equal(Yi.timeline,t)&&(Yi.timeline=t,i(10,Yi))},function(t,r){e.$$.not_equal(Yi[r.id],t)&&(Yi[r.id]=t,i(10,Yi))},function(t){e.$$.not_equal(Yi.time,t)&&(Yi.time=t,i(10,Yi))},function(t){e.$$.not_equal(Yi.episodes,t)&&(Yi.episodes=t,i(10,Yi))},e=>{i(9,Bi=e.target.clientWidth)},function(t,r){e.$$.not_equal(Yi[r.id],t)&&(Yi[r.id]=t,i(10,Yi))},function(t,r){e.$$.not_equal(Yi[r.id],t)&&(Yi[r.id]=t,i(10,Yi))},function(e){te[e?"unshift":"push"]((()=>{Xe=e,i(1,Xe)}))},function(e){te[e?"unshift":"push"]((()=>{Ke=e,i(0,Ke)}))},function(t){e.$$.not_equal(Yi.interactiveTimeIndicator,t)&&(Yi.interactiveTimeIndicator=t,i(10,Yi))}]}var Jc=class extends Le{constructor(e){super(),Ce(this,e,Zc,Xc,h,{bottomHidden:2,bottomNoSmooth:3,showControls:4,playerControlsWrapperRef:0,playerControlsRef:1,isAds:5,canRewindLive:6,logoClickable:71,logoHidden:72,logoTargetUrl:73,showNextPrevButtons:74,nextButtonActive:75,prevButtonActive:76,customFullscreenSupported:77,toggleFullscreen:78,seekToInteractive:79,playPrevChapter:80},Fc,[-1,-1,-1,-1,-1,-1,-1])}};function ed(e){C(e,"svelte-1aqpg2x",".icon.svelte-1aqpg2x{width:24px !important;height:24px !important;;}.inner.svelte-1aqpg2x{width:16px;height:16px;background-color:var(--white)}")}function td(e){let t,i,r,n;return{c(){t=P("img"),U(t,"class","icon svelte-1aqpg2x"),f(t.src,i=e[0])||U(t,"src",i),U(t,"aria-hidden","true")},m(i,a){k(i,t,a),r||(n=V(t,"error",e[7]),r=!0)},p(e,r){1&r&&!f(t.src,i=e[0])&&U(t,"src",i)},d(e){e&&L(t),r=!1,n()}}}function id(e){let t;return{c(){t=P("div"),t.innerHTML='<div class="inner svelte-1aqpg2x"></div>',U(t,"class","icon icon-error-stub svelte-1aqpg2x")},m(e,i){k(e,t,i)},p:o,d(e){e&&L(t)}}}function rd(e){let t;function i(e,t){return e[5]?id:td}let r=i(e),n=r(e);return{c(){n.c(),t=N()},m(e,i){n.m(e,i),k(e,t,i)},p(e,a){r===(r=i(e))&&n?n.p(e,a):(n.d(1),n=r(e),n&&(n.c(),n.m(t.parentNode,t)))},d(e){e&&L(t),n.d(e)}}}function nd(e){let t,i;return t=new Sn({props:{className:e[4]?"btn-full-opacity":"",ariaLabel:e[1],click:e[3],disabled:e[6],testId:e[2],$$slots:{default:[rd]},$$scope:{ctx:e}}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,[i]){let r={};16&i&&(r.className=e[4]?"btn-full-opacity":""),2&i&&(r.ariaLabel=e[1]),8&i&&(r.click=e[3]),64&i&&(r.disabled=e[6]),4&i&&(r.testId=e[2]),545&i&&(r.$$scope={dirty:i,ctx:e}),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function ad(e,t,i){let r,n,s,{iconUrl:o}=t,{ariaLabel:l}=t,{disabled:u=!1}=t,{testId:c}=t,{onClick:d=a.noop}=t;return e.$$set=e=>{"iconUrl"in e&&i(0,o=e.iconUrl),"ariaLabel"in e&&i(1,l=e.ariaLabel),"disabled"in e&&i(8,u=e.disabled),"testId"in e&&i(2,c=e.testId),"onClick"in e&&i(3,d=e.onClick)},e.$$.update=()=>{8&e.$$.dirty&&i(4,r=d===a.noop),272&e.$$.dirty&&i(6,n=r||u)},i(5,s=!1),[o,l,c,d,r,s,n,()=>{i(5,s=!0)},u]}var sd=class extends Le{constructor(e){super(),Ce(this,e,ad,nd,h,{iconUrl:0,ariaLabel:1,disabled:8,testId:2,onClick:3},ed)}};function od(e){let t,i,r,n,a,s=e[2].default,o=b(s,e,e[1],null),u=[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{"aria-hidden":"true"},{"data-testid":"muted-icon"},{role:"img"},e[0]],c={};for(let e=0;e<u.length;e+=1)c=l(c,u[e]);return{c(){t=O("svg"),o&&o.c(),i=O("g"),r=O("path"),n=O("path"),U(r,"d","M0 0h24v24H0z"),U(n,"fill","#fff"),U(n,"d","M8.695 8.105 5.301 4.71a1 1 0 0 1 1.414-1.415L20.7 17.285a1 1 0 0 1-1.414 1.415L16 15.41V20a1 1 0 0 1-1 1c-.641 0-1.258-.25-1.72-.695L7.79 15H5a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2h2.765zm2.88-2.77 1.704-1.642A2.48 2.48 0 0 1 15 3a1 1 0 0 1 1 1v5.76l-4.426-4.426Z"),U(i,"fill","none"),U(i,"fill-rule","evenodd"),F(t,c)},m(e,s){k(e,t,s),o&&o.m(t,null),A(t,i),A(i,r),A(i,n),a=!0},p(e,[i]){o&&o.p&&(!a||2&i)&&$(o,s,e,e[1],a?S(s,e[1],i,null):_(e[1]),null),F(t,c=_e(u,[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{"aria-hidden":"true"},{"data-testid":"muted-icon"},{role:"img"},1&i&&e[0]]))},i(e){a||(be(o,e),a=!0)},o(e){ye(o,e),a=!1},d(e){e&&L(t),o&&o.d(e)}}}function ld(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var ud=class extends Le{constructor(e){super(),Ce(this,e,ld,od,h,{})}};function cd(e){C(e,"svelte-6gmlbk",".container.svelte-6gmlbk{display:flex;align-items:center}.expanded.svelte-6gmlbk{background-color:rgba(0, 0, 0, 0.56);border-radius:6px}.text.svelte-6gmlbk{font-size:15px;margin-left:8px}")}function dd(e){let t;return{c(){t=P("span"),t.textContent=`${Pt("mobile_unmute")}`,U(t,"class","text svelte-6gmlbk")},m(e,i){k(e,t,i)},d(e){e&&L(t)}}}function pd(e){let t,i,r,n;var a=e[4];a&&(i=q(a,{}));let s=e[1]&&dd();return{c(){t=P("div"),i&&Ee(i.$$.fragment),r=I(),s&&s.c(),U(t,"class","container svelte-6gmlbk"),U(t,"aria-hidden","true"),z(t,"expanded",e[1])},m(e,a){k(e,t,a),i&&xe(i,t,null),A(t,r),s&&s.m(t,null),n=!0},p(e,o){if(16&o&&a!==(a=e[4])){if(i){ge();let e=i;ye(e.$$.fragment,1,0,(()=>{Ae(e,1)})),ve()}a?(i=q(a,{}),Ee(i.$$.fragment),be(i.$$.fragment,1),xe(i,t,r)):i=null}e[1]?s||(s=dd(),s.c(),s.m(t,null)):s&&(s.d(1),s=null),(!n||2&o)&&z(t,"expanded",e[1])},i(e){n||(i&&be(i.$$.fragment,e),n=!0)},o(e){i&&ye(i.$$.fragment,e),n=!1},d(e){e&&L(t),i&&Ae(i),s&&s.d()}}}function hd(e){let t,i,r;function n(t){e[6](t)}let a={testId:e[1]?"btn-mobile-unmuted":"btn-mobile-muted",click:e[2],ariaLabel:e[3],$$slots:{default:[pd]},$$scope:{ctx:e}};return void 0!==e[0]&&(a.ref=e[0]),t=new Sn({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,[r]){let n={};2&r&&(n.testId=e[1]?"btn-mobile-unmuted":"btn-mobile-muted"),4&r&&(n.click=e[2]),8&r&&(n.ariaLabel=e[3]),146&r&&(n.$$scope={dirty:r,ctx:e}),!i&&1&r&&(i=!0,n.ref=e[0],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function fd(e,t,i){let r,n,{muted:s=!1}=t,{expanded:o=!1}=t,{click:l=a.noop}=t,{ref:u}=t;return e.$$set=e=>{"muted"in e&&i(5,s=e.muted),"expanded"in e&&i(1,o=e.expanded),"click"in e&&i(2,l=e.click),"ref"in e&&i(0,u=e.ref)},e.$$.update=()=>{32&e.$$.dirty&&i(3,r=Pt(s?"tooltip_volume":"tooltip_volume_muted")),2&e.$$.dirty&&i(4,n=o?Wa:ud)},[u,o,l,r,n,s,function(e){u=e,i(0,u)}]}var md=class extends Le{constructor(e){super(),Ce(this,e,fd,hd,h,{muted:5,expanded:1,click:2,ref:0},cd)}};function gd(e){let t,i,r,n,a,s=e[2].default,o=b(s,e,e[1],null),u=[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{role:"img"},e[0]],c={};for(let e=0;e<u.length;e+=1)c=l(c,u[e]);return{c(){t=O("svg"),o&&o.c(),i=O("path"),r=O("path"),n=O("path"),U(i,"fill","currentColor"),U(i,"d","M7.662 4h6.676c.808 0 1.469 0 2.006.044.556.045 1.058.142 1.526.381a3.9 3.9 0 0 1 1.705 1.704c.239.47.336.971.381 1.527C20 8.193 20 8.854 20 9.662V11.1a.9.9 0 0 1-1.8 0V9.7c0-.855 0-1.442-.038-1.897-.036-.445-.103-.684-.19-.856a2.1 2.1 0 0 0-.919-.918c-.172-.088-.411-.155-.856-.191C15.742 5.8 15.155 5.8 14.3 5.8H7.7c-.855 0-1.442 0-1.897.038-.445.036-.684.103-.856.19a2.1 2.1 0 0 0-.918.919c-.088.172-.155.411-.191.856C3.8 8.258 3.8 8.845 3.8 9.7v2.646c0 .855 0 1.442.038 1.897.036.445.103.683.19.856a2.1 2.1 0 0 0 .919.918c.172.088.411.155.856.191.455.037 1.042.038 1.897.038h2.4a.9.9 0 0 1 0 1.8H7.662c-.808 0-1.469 0-2.006-.044-.556-.045-1.058-.142-1.527-.381a3.9 3.9 0 0 1-1.704-1.704c-.239-.47-.336-.972-.381-1.527C2 13.852 2 13.192 2 12.384V9.662c0-.808 0-1.469.044-2.006.045-.556.142-1.058.381-1.527A3.9 3.9 0 0 1 4.13 4.425c.47-.239.971-.336 1.527-.381C6.193 4 6.854 4 7.662 4M13 16.8c0-.98 0-1.47.19-1.845a1.75 1.75 0 0 1 .766-.764C14.33 14 14.82 14 15.8 14h3.4c.98 0 1.47 0 1.845.19.329.168.596.436.764.766.191.374.191.864.191 1.844v.4c0 .98 0 1.47-.19 1.845a1.75 1.75 0 0 1-.765.764C20.67 20 20.18 20 19.2 20h-3.4c-.98 0-1.47 0-1.845-.19a1.75 1.75 0 0 1-.764-.765C13 18.67 13 18.18 13 17.2z"),U(i,"clip-rule","evenodd"),U(r,"fill","currentColor"),U(r,"d","m11.643 12.37-.007-.006L9.073 9.8H10.1a.9.9 0 1 0 0-1.8H6.9a.9.9 0 0 0-.9.9v3.2a.9.9 0 0 0 1.8 0v-1.022l2.53 2.524.134.134a.9.9 0 0 0 1.272-1.272z"),U(r,"class","hidden-not-active"),U(n,"fill","currentColor"),U(n,"d","m6.357 9.63.007.006L8.927 12.2H7.9a.9.9 0 1 0 0 1.8h3.2a.9.9 0 0 0 .9-.9V9.9a.9.9 0 0 0-1.8 0v1.022L7.67 8.397l-.134-.133a.9.9 0 0 0-1.272 1.272z"),U(n,"class","hidden-active"),F(t,c)},m(e,s){k(e,t,s),o&&o.m(t,null),A(t,i),A(t,r),A(t,n),a=!0},p(e,[i]){o&&o.p&&(!a||2&i)&&$(o,s,e,e[1],a?S(s,e[1],i,null):_(e[1]),null),F(t,c=_e(u,[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{role:"img"},1&i&&e[0]]))},i(e){a||(be(o,e),a=!0)},o(e){ye(o,e),a=!1},d(e){e&&L(t),o&&o.d(e)}}}function vd(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var bd=class extends Le{constructor(e){super(),Ce(this,e,vd,gd,h,{})}};function yd(e){C(e,"svelte-tmam00",'svg[data-testid="pip-icon--active"] .hidden-active,svg[data-testid="pip-icon"] .hidden-not-active{visibility:hidden;opacity:0}')}function Sd(e){let t,i;return t=new bd({props:{style:e[1],"data-testid":e[0]?"pip-icon--active":"pip-icon"}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,[i]){let r={};2&i&&(r.style=e[1]),1&i&&(r["data-testid"]=e[0]?"pip-icon--active":"pip-icon"),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function $d(e,t,i){let r,{isActive:n=!1}=t;return e.$$set=e=>{"isActive"in e&&i(0,n=e.isActive)},e.$$.update=()=>{1&e.$$.dirty&&i(1,r=n?"color: #2688EB;":"color: #fff;")},[n,r]}var _d=class extends Le{constructor(e){super(),Ce(this,e,$d,Sd,h,{isActive:0},yd)}};function Td(e){let t,i;return t=new _d({props:{isActive:e[1]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};2&i&&(r.isActive=e[1]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function wd(e){let t,i,r;function n(t){e[3](t)}let a={testId:"btn-pip",ariaLabel:Pt("menu_pip"),click:e[2],$$slots:{default:[Td]},$$scope:{ctx:e}};return void 0!==e[0]&&(a.ref=e[0]),t=new Sn({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,[r]){let n={};4&r&&(n.click=e[2]),18&r&&(n.$$scope={dirty:r,ctx:e}),!i&&1&r&&(i=!0,n.ref=e[0],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Ed(e,t,i){let{ref:r}=t,{isPictureInPictureActive:n=!1}=t,{click:s=a.noop}=t;return e.$$set=e=>{"ref"in e&&i(0,r=e.ref),"isPictureInPictureActive"in e&&i(1,n=e.isPictureInPictureActive),"click"in e&&i(2,s=e.click)},[r,n,s,function(e){r=e,i(0,r)}]}var xd=class extends Le{constructor(e){super(),Ce(this,e,Ed,wd,h,{ref:0,isPictureInPictureActive:1,click:2})}};function Ad(e){C(e,"svelte-sty291",".gutter.svelte-sty291{--gutterWidth:32px;--gutterHeight:12px;--togglerWidth:18px;--togglerHeight:18px;--togglerGap:calc(var(--togglerWidth) / 6);position:relative;width:var(--gutterWidth);height:var(--gutterHeight);background-color:rgba(255, 255, 255, 0.3);border-radius:50px}.toggler.svelte-sty291{position:absolute;top:calc(((var(--togglerHeight) - var(--gutterHeight)) / 2) * -1);left:0;display:flex;align-items:center;justify-content:center;width:var(--togglerWidth);height:var(--togglerHeight);background-color:rgba(98, 99, 100, 1);border-radius:50%;transform:translateX(calc(var(--togglerGap) * -1));transition-property:background-color, transform;transition-duration:0.2s;transition-timing-function:ease}.toggler.enabled.svelte-sty291{background-color:var(--white);transform:translateX(calc(var(--gutterWidth) - var(--togglerWidth) + var(--togglerGap)))}")}function Cd(e){let t,i;return t=new Fu({props:{width:"14",height:"14"}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function kd(e){let t,i;return t=new Du({props:{width:"14",height:"14",fill:"#000"}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Ld(e){let t,i,r,n,a,s=[kd,Cd],o=[];function l(e,t){return e[1]?0:1}return r=l(e),n=o[r]=s[r](e),{c(){t=P("span"),i=P("span"),n.c(),U(i,"class","toggler svelte-sty291"),z(i,"enabled",e[1]),U(t,"class","gutter svelte-sty291")},m(e,n){k(e,t,n),A(t,i),o[r].m(i,null),a=!0},p(e,t){let u=r;r=l(e),r!==u&&(ge(),ye(o[u],1,1,(()=>{o[u]=null})),ve(),n=o[r],n||(n=o[r]=s[r](e),n.c()),be(n,1),n.m(i,null)),(!a||2&t)&&z(i,"enabled",e[1])},i(e){a||(be(n),a=!0)},o(e){ye(n),a=!1},d(e){e&&L(t),o[r].d()}}}function Rd(e){let t,i,r;function n(t){e[4](t)}let a={click:e[3],$$slots:{default:[Ld]},$$scope:{ctx:e}};return void 0!==e[0]&&(a.ref=e[0]),t=new Sn({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,[r]){let n={};130&r&&(n.$$scope={dirty:r,ctx:e}),!i&&1&r&&(i=!0,n.ref=e[0],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Pd(e,t,i){let r,{ref:n}=t,a=et(),s=a.ui.autoplayNextEnabled$;v(e,s,(e=>i(1,r=e)));let o=a.actions.internal.setAutoplayNextEnabled;return e.$$set=e=>{"ref"in e&&i(0,n=e.ref)},[n,r,s,function(){o(!r)},function(e){n=e,i(0,n)}]}var Od=class extends Le{constructor(e){super(),Ce(this,e,Pd,Rd,h,{ref:0},Ad)}};function Md(e){C(e,"svelte-s4hj64",".wrapper-bottom.svelte-s4hj64.svelte-s4hj64{pointer-events:none;position:absolute;z-index:var(--controls-container-z-index);width:100%;bottom:0;left:0;height:var(--controls-gradient-height);background:var(--controls-gradient);transition:transform var(--controls-transition-duration) var(--controls-transition-fn);display:flex;flex-direction:column;justify-content:flex-end;box-sizing:border-box;padding:0 4px 8px}.wrapper-bottom.svelte-s4hj64>.svelte-s4hj64{pointer-events:auto}.wrapper-bottom.ads-timeline-mobile.svelte-s4hj64.svelte-s4hj64{height:9px;padding:0 4px 4px}.wrapper-middle.svelte-s4hj64.svelte-s4hj64{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transition:opacity var(--controls-transition-duration);display:flex;align-items:center}.wrapper-top-right.svelte-s4hj64.svelte-s4hj64{position:absolute;top:4px;right:8px;transition:opacity var(--controls-transition-duration);display:flex}.wrapper-top-left.svelte-s4hj64.svelte-s4hj64{position:absolute;top:4px;left:8px}.wrapper-middle-left.svelte-s4hj64.svelte-s4hj64,.wrapper-middle-left-second.svelte-s4hj64.svelte-s4hj64,.wrapper-middle-right.svelte-s4hj64.svelte-s4hj64{position:absolute;top:50%;transform:translateY(-50%);height:44px;width:44px;border-radius:12px;background-color:rgba(0, 0, 0, 0.56);transition:opacity var(--controls-transition-duration);display:flex;align-items:center;justify-content:center}.wrapper-middle-left.svelte-s4hj64.svelte-s4hj64{left:12px}.wrapper-middle-left-second.svelte-s4hj64.svelte-s4hj64{left:64px}.wrapper-middle-right.svelte-s4hj64.svelte-s4hj64{right:12px}.controls.svelte-s4hj64.svelte-s4hj64{width:100%;display:flex;align-items:center;height:var(--controls-height);white-space:nowrap;font-size:13px;transition:transform var(--controls-transition-duration) var(--controls-transition-fn);will-change:transform;padding:0 4px;box-sizing:border-box}.controls.svelte-s4hj64 > *:not(:first-child){margin-left:8px}.hidden.svelte-s4hj64.svelte-s4hj64{visibility:hidden;opacity:0}.controls-hidden.svelte-s4hj64.svelte-s4hj64{visibility:visible;transform:translateY(100%)}.wrapper-bottom.no-smooth.svelte-s4hj64.svelte-s4hj64{transition:none}.overlay-mobile.svelte-s4hj64.svelte-s4hj64{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, .3);pointer-events:none;transition:opacity var(--controls-transition-duration)}@media screen and (orientation: portrait){.wrapper-top-right.fullscreen.svelte-s4hj64.svelte-s4hj64{top:16px}.wrapper-top-left.fullscreen.svelte-s4hj64.svelte-s4hj64{top:16px}.controls-wrapper.fullscreen.svelte-s4hj64.svelte-s4hj64{position:absolute;bottom:30px;width:calc(100% - 8px)}}@media screen and (orientation: landscape){.wrapper-top-left.fullscreen.svelte-s4hj64.svelte-s4hj64{top:12px;left:44px}.wrapper-top-right.fullscreen.svelte-s4hj64.svelte-s4hj64{top:12px;right:44px}.wrapper-middle-left.fullscreen.svelte-s4hj64.svelte-s4hj64{left:44px}.wrapper-middle-left-second.fullscreen.svelte-s4hj64.svelte-s4hj64{left:96px}.wrapper-middle-right.fullscreen.svelte-s4hj64.svelte-s4hj64{right:44px}.controls-wrapper.fullscreen.svelte-s4hj64.svelte-s4hj64{position:absolute;left:36px;right:36px;bottom:32px;width:calc(100% - 72px)}}")}function Id(e,t,i){let r=e.slice();return r[171]=t[i].iconUrl,r[172]=t[i].ariaLabel,r[173]=t[i].testId,r[174]=t[i].onClick,r[175]=t[i].tooltip,r}function Nd(e){let t,i,r,n,a,s,o,l,u,c,d,p,h,f,m,g,v,b,y=(!e[47]||e[49])&&Vd(e),S=Se(e[52]),$=[];for(let t=0;t<S.length;t+=1)$[t]=Dd(Id(e,S,t));let _=e=>ye($[e],1,1,(()=>{$[e]=null})),T=e[9]&&!e[11]&&Bd(e),w=e[32]&&Ud(e),E=e[33]&&Fd(e),x=e[53]&&jd(e),C=e[35]&&Hd(e),O=e[29]&&zd(e),M=e[28]&&qd(e),V=e[27]&&Wd(e),D=e[30]&&Gd(e),B=e[95]&&!e[23]&&Qd(e);return{c(){t=P("div"),i=I(),r=P("div"),y&&y.c(),n=I(),a=P("div");for(let e=0;e<$.length;e+=1)$[e].c();s=I(),T&&T.c(),o=I(),w&&w.c(),l=I(),E&&E.c(),u=I(),x&&x.c(),c=I(),C&&C.c(),d=I(),p=P("div"),O&&O.c(),h=I(),M&&M.c(),f=I(),V&&V.c(),m=I(),D&&D.c(),g=I(),B&&B.c(),v=N(),U(t,"class","overlay-mobile svelte-s4hj64"),z(t,"hidden",!e[38]),U(r,"class","wrapper-top-left svelte-s4hj64"),z(r,"hidden",!e[4]),z(r,"fullscreen",e[48]),U(a,"class","wrapper-top-right svelte-s4hj64"),z(a,"hidden",!e[4]&&!e[21]),z(a,"fullscreen",e[48]),U(p,"class","wrapper-middle svelte-s4hj64"),z(p,"hidden",!e[4]||e[23]||e[12]&&e[10])},m(e,S){k(e,t,S),k(e,i,S),k(e,r,S),y&&y.m(r,null),k(e,n,S),k(e,a,S);for(let e=0;e<$.length;e+=1)$[e]&&$[e].m(a,null);A(a,s),T&&T.m(a,null),A(a,o),w&&w.m(a,null),A(a,l),E&&E.m(a,null),A(a,u),x&&x.m(a,null),A(a,c),C&&C.m(a,null),k(e,d,S),k(e,p,S),O&&O.m(p,null),A(p,h),M&&M.m(p,null),A(p,f),V&&V.m(p,null),A(p,m),D&&D.m(p,null),k(e,g,S),B&&B.m(e,S),k(e,v,S),b=!0},p(e,i){if((!b||128&i[1])&&z(t,"hidden",!e[38]),!e[47]||e[49]?y?(y.p(e,i),327680&i[1]&&be(y,1)):(y=Vd(e),y.c(),be(y,1),y.m(r,null)):y&&(ge(),ye(y,1,1,(()=>{y=null})),ve()),(!b||16&i[0])&&z(r,"hidden",!e[4]),(!b||131072&i[1])&&z(r,"fullscreen",e[48]),2097152&i[1]){let t;for(S=Se(e[52]),t=0;t<S.length;t+=1){let r=Id(e,S,t);$[t]?($[t].p(r,i),be($[t],1)):($[t]=Dd(r),$[t].c(),be($[t],1),$[t].m(a,s))}for(ge(),t=S.length;t<$.length;t+=1)_(t);ve()}e[9]&&!e[11]?T?(T.p(e,i),2560&i[0]&&be(T,1)):(T=Bd(e),T.c(),be(T,1),T.m(a,o)):T&&(ge(),ye(T,1,1,(()=>{T=null})),ve()),e[32]?w?(w.p(e,i),2&i[1]&&be(w,1)):(w=Ud(e),w.c(),be(w,1),w.m(a,l)):w&&(ge(),ye(w,1,1,(()=>{w=null})),ve()),e[33]?E?(E.p(e,i),4&i[1]&&be(E,1)):(E=Fd(e),E.c(),be(E,1),E.m(a,u)):E&&(ge(),ye(E,1,1,(()=>{E=null})),ve()),e[53]?x?(x.p(e,i),4194304&i[1]&&be(x,1)):(x=jd(e),x.c(),be(x,1),x.m(a,c)):x&&(ge(),ye(x,1,1,(()=>{x=null})),ve()),e[35]?C?(C.p(e,i),16&i[1]&&be(C,1)):(C=Hd(e),C.c(),be(C,1),C.m(a,null)):C&&(ge(),ye(C,1,1,(()=>{C=null})),ve()),(!b||2097168&i[0])&&z(a,"hidden",!e[4]&&!e[21]),(!b||131072&i[1])&&z(a,"fullscreen",e[48]),e[29]?O?(O.p(e,i),536870912&i[0]&&be(O,1)):(O=zd(e),O.c(),be(O,1),O.m(p,h)):O&&(ge(),ye(O,1,1,(()=>{O=null})),ve()),e[28]?M?(M.p(e,i),268435456&i[0]&&be(M,1)):(M=qd(e),M.c(),be(M,1),M.m(p,f)):M&&(ge(),ye(M,1,1,(()=>{M=null})),ve()),e[27]?V?(V.p(e,i),134217728&i[0]&&be(V,1)):(V=Wd(e),V.c(),be(V,1),V.m(p,m)):V&&(ge(),ye(V,1,1,(()=>{V=null})),ve()),e[30]?D?(D.p(e,i),1073741824&i[0]&&be(D,1)):(D=Gd(e),D.c(),be(D,1),D.m(p,null)):D&&(ge(),ye(D,1,1,(()=>{D=null})),ve()),(!b||8393744&i[0])&&z(p,"hidden",!e[4]||e[23]||e[12]&&e[10]),e[95]&&!e[23]?B?(B.p(e,i),8388608&i[0]&&be(B,1)):(B=Qd(e),B.c(),be(B,1),B.m(v.parentNode,v)):B&&(ge(),ye(B,1,1,(()=>{B=null})),ve())},i(e){if(!b){be(y);for(let e=0;e<S.length;e+=1)be($[e]);be(T),be(w),be(E),be(x),be(C),be(O),be(M),be(V),be(D),be(B),b=!0}},o(e){ye(y),$=$.filter(Boolean);for(let e=0;e<$.length;e+=1)ye($[e]);ye(T),ye(w),ye(E),ye(x),ye(C),ye(O),ye(M),ye(V),ye(D),ye(B),b=!1},d(e){e&&(L(t),L(i),L(r),L(n),L(a),L(d),L(p),L(g),L(v)),y&&y.d(),R($,e),T&&T.d(),w&&w.d(),E&&E.d(),x&&x.d(),C&&C.d(),O&&O.d(),M&&M.d(),V&&V.d(),D&&D.d(),B&&B.d(e)}}}function Vd(e){let t,i,r;function n(t){e[131](t)}let a={muted:e[50],expanded:e[47]&&!e[68]&&e[51],click:e[104]};return void 0!==e[17].volume&&(a.ref=e[17].volume),t=new md({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};524288&r[1]&&(n.muted=e[50]),1114112&r[1]&&(n.expanded=e[47]&&!e[68]&&e[51]),!i&&131072&r[0]&&(i=!0,n.ref=e[17].volume,ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Dd(e){let t,i;return t=new sd({props:{iconUrl:e[171],ariaLabel:e[172]??e[175],testId:e[173],onClick:e[174]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};2097152&i[1]&&(r.iconUrl=e[171]),2097152&i[1]&&(r.ariaLabel=e[172]??e[175]),2097152&i[1]&&(r.testId=e[173]),2097152&i[1]&&(r.onClick=e[174]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Bd(e){let t,i,r;function n(t){e[132](t)}let a={};return void 0!==e[17].autoplayNextToggle&&(a.ref=e[17].autoplayNextToggle),t=new Od({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};!i&&131072&r[0]&&(i=!0,n.ref=e[17].autoplayNextToggle,ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Ud(e){let t,i,r;function n(t){e[133](t)}let a={isMobile:!0,click:e[102],state:e[22]};return void 0!==e[17].chromecast&&(a.ref=e[17].chromecast),t=new Eo({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};4194304&r[0]&&(n.state=e[22]),!i&&131072&r[0]&&(i=!0,n.ref=e[17].chromecast,ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Fd(e){let t,i,r;function n(t){e[134](t)}let a={click:e[103],isPictureInPictureActive:e[20]};return void 0!==e[17].pip&&(a.ref=e[17].pip),t=new xd({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};1048576&r[0]&&(n.isPictureInPictureActive=e[20]),!i&&131072&r[0]&&(i=!0,n.ref=e[17].pip,ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function jd(e){let t,i;return t=new Ea({props:{ref$:e[105]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p:o,i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Hd(e){let t,i,r;function n(t){e[135](t)}let a={click:e[60],targetUrl:e[8],logoClickable:e[7]};return void 0!==e[17].vkLogo&&(a.ref=e[17].vkLogo),t=new mo({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};256&r[0]&&(n.targetUrl=e[8]),128&r[0]&&(n.logoClickable=e[7]),!i&&131072&r[0]&&(i=!0,n.ref=e[17].vkLogo,ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function zd(e){let t,i,r;function n(t){e[136](t)}let a={click:e[61].bind(null,!0),type:"prev",isMobile:!0};return void 0!==e[17].prevButton&&(a.ref=e[17].prevButton),t=new xu({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};!i&&131072&r[0]&&(i=!0,n.ref=e[17].prevButton,ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function qd(e){let t,i,r;function n(t){e[137](t)}let a={disabled:e[45],click:e[59],isMobile:!0,isPlaying:e[25]};return void 0!==e[17].playButton&&(a.ref=e[17].playButton),t=new Gu({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};16384&r[1]&&(n.disabled=e[45]),33554432&r[0]&&(n.isPlaying=e[25]),!i&&131072&r[0]&&(i=!0,n.ref=e[17].playButton,ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Wd(e){let t,i,r;function n(t){e[138](t)}let a={disabled:e[44],click:e[59],isMobile:!0};return void 0!==e[17].replayButton&&(a.ref=e[17].replayButton),t=new Iu({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};8192&r[1]&&(n.disabled=e[44]),!i&&131072&r[0]&&(i=!0,n.ref=e[17].replayButton,ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Gd(e){let t,i,r;function n(t){e[139](t)}let a={click:e[62].bind(null,!0),type:"next",isMobile:!0};return void 0!==e[17].nextButton&&(a.ref=e[17].nextButton),t=new xu({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};!i&&131072&r[0]&&(i=!0,n.ref=e[17].nextButton,ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Qd(e){let t,i,r,n,a=e[98]&&function(e){let t,i,r,n,a,s;function o(t){e[140](t)}let l={hidden:!e[4],disabled:e[43],click:e[15]};return void 0!==e[17].playPrevChapterButton&&(l.ref=e[17].playPrevChapterButton),i=new ec({props:l}),te.push((()=>we(i,"ref",o))),{c(){t=P("div"),Ee(i.$$.fragment),U(t,"class","wrapper-middle-left svelte-s4hj64"),z(t,"fullscreen",e[48]),z(t,"hidden",!e[4])},m(r,o){k(r,t,o),xe(i,t,null),n=!0,a||(s=V(t,"click",e[106]),a=!0)},p(e,a){let s={};16&a[0]&&(s.hidden=!e[4]),4096&a[1]&&(s.disabled=e[43]),32768&a[0]&&(s.click=e[15]),!r&&131072&a[0]&&(r=!0,s.ref=e[17].playPrevChapterButton,ue((()=>r=!1))),i.$set(s),(!n||131072&a[1])&&z(t,"fullscreen",e[48]),(!n||16&a[0])&&z(t,"hidden",!e[4])},i(e){n||(be(i.$$.fragment,e),n=!0)},o(e){ye(i.$$.fragment,e),n=!1},d(e){e&&L(t),Ae(i),a=!1,s()}}}(e),s=e[40]&&Yd(e),o=e[97]&&function(e){let t,i,r,n,a,s;function o(t){e[142](t)}let l={hidden:!e[4],disabled:e[42],click:e[14]};return void 0!==e[17].seekToInteractiveButton&&(l.ref=e[17].seekToInteractiveButton),i=new oc({props:l}),te.push((()=>we(i,"ref",o))),{c(){t=P("div"),Ee(i.$$.fragment),U(t,"class","wrapper-middle-right svelte-s4hj64"),z(t,"fullscreen",e[48]),z(t,"hidden",!e[4])},m(r,o){k(r,t,o),xe(i,t,null),n=!0,a||(s=V(t,"click",e[107]),a=!0)},p(e,a){let s={};16&a[0]&&(s.hidden=!e[4]),2048&a[1]&&(s.disabled=e[42]),16384&a[0]&&(s.click=e[14]),!r&&131072&a[0]&&(r=!0,s.ref=e[17].seekToInteractiveButton,ue((()=>r=!1))),i.$set(s),(!n||131072&a[1])&&z(t,"fullscreen",e[48]),(!n||16&a[0])&&z(t,"hidden",!e[4])},i(e){n||(be(i.$$.fragment,e),n=!0)},o(e){ye(i.$$.fragment,e),n=!1},d(e){e&&L(t),Ae(i),a=!1,s()}}}(e);return{c(){a&&a.c(),t=I(),s&&s.c(),i=I(),o&&o.c(),r=N()},m(e,l){a&&a.m(e,l),k(e,t,l),s&&s.m(e,l),k(e,i,l),o&&o.m(e,l),k(e,r,l),n=!0},p(e,t){e[98]&&a.p(e,t),e[40]?s?(s.p(e,t),512&t[1]&&be(s,1)):(s=Yd(e),s.c(),be(s,1),s.m(i.parentNode,i)):s&&(ge(),ye(s,1,1,(()=>{s=null})),ve()),e[97]&&o.p(e,t)},i(e){n||(be(a),be(s),be(o),n=!0)},o(e){ye(a),ye(s),ye(o),n=!1},d(e){e&&(L(t),L(i),L(r)),a&&a.d(e),s&&s.d(e),o&&o.d(e)}}}function Yd(e){let t,i,r,n,a;function s(t){e[141](t)}let o={hidden:!e[4]&&!e[54],disabled:e[46],click:e[101].toggle,graphIsOpened:e[54]};return void 0!==e[17].interactiveGraphButton&&(o.ref=e[17].interactiveGraphButton),i=new bc({props:o}),te.push((()=>we(i,"ref",s))),{c(){t=P("div"),Ee(i.$$.fragment),U(t,"class",n=function(e){return e??""}(e[98]?"wrapper-middle-left-second":"wrapper-middle-left")+" svelte-s4hj64"),z(t,"fullscreen",e[48]),z(t,"hidden",!e[4]&&!e[54])},m(e,r){k(e,t,r),xe(i,t,null),a=!0},p(e,n){let s={};16&n[0]|8388608&n[1]&&(s.hidden=!e[4]&&!e[54]),32768&n[1]&&(s.disabled=e[46]),8388608&n[1]&&(s.graphIsOpened=e[54]),!r&&131072&n[0]&&(r=!0,s.ref=e[17].interactiveGraphButton,ue((()=>r=!1))),i.$set(s),(!a||131072&n[1])&&z(t,"fullscreen",e[48]),(!a||16&n[0]|8388608&n[1])&&z(t,"hidden",!e[4]&&!e[54])},i(e){a||(be(i.$$.fragment,e),a=!0)},o(e){ye(i.$$.fragment,e),a=!1},d(e){e&&L(t),Ae(i)}}}function Kd(e){let t,i,r,n,a,s=e[49]&&Xd(e),o=e[26]&&Zd(e);return n=new Ko({props:{position:e[55],duration:e[56]}}),{c(){s&&s.c(),t=I(),o&&o.c(),i=I(),r=P("div"),Ee(n.$$.fragment),U(r,"class","wrapper-bottom ads-timeline-mobile svelte-s4hj64"),z(r,"fullscreen",e[48])},m(e,l){s&&s.m(e,l),k(e,t,l),o&&o.m(e,l),k(e,i,l),k(e,r,l),xe(n,r,null),a=!0},p(e,l){e[49]?s?(s.p(e,l),262144&l[1]&&be(s,1)):(s=Xd(e),s.c(),be(s,1),s.m(t.parentNode,t)):s&&(ge(),ye(s,1,1,(()=>{s=null})),ve()),e[26]?o?(o.p(e,l),67108864&l[0]&&be(o,1)):(o=Zd(e),o.c(),be(o,1),o.m(i.parentNode,i)):o&&(ge(),ye(o,1,1,(()=>{o=null})),ve());let u={};16777216&l[1]&&(u.position=e[55]),33554432&l[1]&&(u.duration=e[56]),n.$set(u),(!a||131072&l[1])&&z(r,"fullscreen",e[48])},i(e){a||(be(s),be(o),be(n.$$.fragment,e),a=!0)},o(e){ye(s),ye(o),ye(n.$$.fragment,e),a=!1},d(e){e&&(L(t),L(i),L(r)),s&&s.d(e),o&&o.d(e),Ae(n)}}}function Xd(e){let t,i,r,n;function a(t){e[143](t)}let s={muted:e[50],expanded:!1,click:e[104]};return void 0!==e[17].volume&&(s.ref=e[17].volume),i=new md({props:s}),te.push((()=>we(i,"ref",a))),{c(){t=P("div"),Ee(i.$$.fragment),U(t,"class","wrapper-top-right svelte-s4hj64"),z(t,"fullscreen",e[48])},m(e,r){k(e,t,r),xe(i,t,null),n=!0},p(e,a){let s={};524288&a[1]&&(s.muted=e[50]),!r&&131072&a[0]&&(r=!0,s.ref=e[17].volume,ue((()=>r=!1))),i.$set(s),(!n||131072&a[1])&&z(t,"fullscreen",e[48])},i(e){n||(be(i.$$.fragment,e),n=!0)},o(e){ye(i.$$.fragment,e),n=!1},d(e){e&&L(t),Ae(i)}}}function Zd(e){let t,i,r,n;function a(t){e[144](t)}let s={disabled:e[45],click:e[59],isMobile:!0,isPlaying:!e[26]};return void 0!==e[17].playButton&&(s.ref=e[17].playButton),i=new Gu({props:s}),te.push((()=>we(i,"ref",a))),{c(){t=P("div"),Ee(i.$$.fragment),U(t,"class","wrapper-middle svelte-s4hj64")},m(e,r){k(e,t,r),xe(i,t,null),n=!0},p(e,t){let n={};16384&t[1]&&(n.disabled=e[45]),67108864&t[0]&&(n.isPlaying=!e[26]),!r&&131072&t[0]&&(r=!0,n.ref=e[17].playButton,ue((()=>r=!1))),i.$set(n)},i(e){n||(be(i.$$.fragment,e),n=!0)},o(e){ye(i.$$.fragment,e),n=!1},d(e){e&&L(t),Ae(i)}}}function Jd(e){let t,i;return t=new Iu({props:{disabled:e[44],click:e[94]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};8192&i[1]&&(r.disabled=e[44]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function ep(e){let t,i,r;function n(t){e[146](t)}let a={$$slots:{default:[tp]},$$scope:{ctx:e}};return void 0!==e[17].liveButton&&(a.ref=e[17].liveButton),t=new ls({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};65536&r[0]|1024&r[1]|8388608&r[5]&&(n.$$scope={dirty:r,ctx:e}),!i&&131072&r[0]&&(i=!0,n.ref=e[17].liveButton,ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function tp(e){let t,i;return t=new _c({props:{isLiveActive:e[16],isMobile:!0,ariaLabel:e[41]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};65536&i[0]&&(r.isLiveActive=e[16]),1024&i[1]&&(r.ariaLabel=e[41]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function ip(e){let t,i,r;function n(t){e[147](t)}let a={showDuration:e[31],position:e[5]?e[55]:e[57],duration:e[5]?e[56]:e[58],isMobile:!0};return void 0!==e[17].time&&(a.ref=e[17].time),t=new ja({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};1&r[1]&&(n.showDuration=e[31]),32&r[0]|83886080&r[1]&&(n.position=e[5]?e[55]:e[57]),32&r[0]|167772160&r[1]&&(n.duration=e[5]?e[56]:e[58]),!i&&131072&r[0]&&(i=!0,n.ref=e[17].time,ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function rp(e){let t,i,r,n;return r=new Tl({props:{position:e[57],duration:e[58],timeCodes:e[82]}}),{c(){t=P("div"),t.textContent="·",i=I(),Ee(r.$$.fragment),U(t,"aria-hidden","true")},m(e,a){k(e,t,a),k(e,i,a),xe(r,e,a),n=!0},p(e,t){let i={};67108864&t[1]&&(i.position=e[57]),134217728&t[1]&&(i.duration=e[58]),r.$set(i)},i(e){n||(be(r.$$.fragment,e),n=!0)},o(e){ye(r.$$.fragment,e),n=!1},d(e){e&&(L(t),L(i)),Ae(r,e)}}}function np(e){let t,i,r=e[39]&&rp(e);return{c(){r&&r.c(),t=N()},m(e,n){r&&r.m(e,n),k(e,t,n),i=!0},p(e,i){e[39]?r?(r.p(e,i),256&i[1]&&be(r,1)):(r=rp(e),r.c(),be(r,1),r.m(t.parentNode,t)):r&&(ge(),ye(r,1,1,(()=>{r=null})),ve())},i(e){i||(be(r),i=!0)},o(e){ye(r),i=!1},d(e){e&&L(t),r&&r.d(e)}}}function ap(e){let t,i,r;function n(t){e[149](t)}let a={$$slots:{default:[sp]},$$scope:{ctx:e}};return void 0!==e[17].settings&&(a.ref=e[17].settings),t=new ls({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};8388608&r[5]&&(n.$$scope={dirty:r,ctx:e}),!i&&131072&r[0]&&(i=!0,n.ref=e[17].settings,ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function sp(e){let t,i;return t=new Ea({props:{ref$:e[105]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p:o,i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function op(e){let t,i,r;function n(t){e[150](t)}let a={$$slots:{default:[lp]},$$scope:{ctx:e}};return void 0!==e[17].fullscreen&&(a.ref=e[17].fullscreen),t=new ls({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};8192&r[0]|131072&r[1]|8388608&r[5]&&(n.$$scope={dirty:r,ctx:e}),!i&&131072&r[0]&&(i=!0,n.ref=e[17].fullscreen,ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function lp(e){let t,i;return t=new Zs({props:{click:e[13],isFullscreen:e[48]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};8192&i[0]&&(r.click=e[13]),131072&i[1]&&(r.isFullscreen=e[48]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function up(e){let t,i,r,n,a,s,o,l,u,c,d,p,h,f,m,g,v,b,y=!e[5]&&Nd(e),S=e[5]&&"inactive"!==e[24]&&Kd(e),$=e[95]&&function(e){let t,i,r;function n(t){e[145](t)}let a={disabled:e[44],$$slots:{default:[Jd]},$$scope:{ctx:e}};return void 0!==e[17].replayButton&&(a.ref=e[17].replayButton),t=new ls({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};8192&r[1]&&(n.disabled=e[44]),8192&r[1]|8388608&r[5]&&(n.$$scope={dirty:r,ctx:e}),!i&&131072&r[0]&&(i=!0,n.ref=e[17].replayButton,ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}(e),_=!e[5]&&e[19]&&ep(e),T=e[37]&&ip(e);function w(t){e[148](t)}let E={className:"w-max",disabled:!e[39],$$slots:{default:[np]},$$scope:{ctx:e}};void 0!==e[17].episodes&&(E.ref=e[17].episodes),u=new ls({props:E}),te.push((()=>we(u,"ref",w)));let x=e[34]&&ap(e),C=e[36]&&op(e);function R(t){e[152](t)}let O={isAds:e[5],canRewindLive:e[6],isRewindableLive:e[18]};void 0!==e[17].timeline&&(O.ref=e[17].timeline),f=new nl({props:O}),te.push((()=>we(f,"ref",R)));let M=e[99]&&function(e){let t,i,r;function n(t){e[154](t)}let a={};return void 0!==e[17].interactiveTimeIndicator&&(a.ref=e[17].interactiveTimeIndicator),t=new iu({props:a}),te.push((()=>we(t,"ref",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};!i&&131072&r[0]&&(i=!0,n.ref=e[17].interactiveTimeIndicator,ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}(e);return{c(){y&&y.c(),t=I(),S&&S.c(),i=I(),r=P("div"),n=P("div"),a=P("div"),$&&$.c(),s=I(),_&&_.c(),o=I(),T&&T.c(),l=I(),Ee(u.$$.fragment),d=I(),x&&x.c(),p=I(),C&&C.c(),h=I(),Ee(f.$$.fragment),g=I(),M&&M.c(),v=N(),U(a,"class","controls svelte-s4hj64"),z(a,"mobile",!0),U(n,"class","controls-wrapper svelte-s4hj64"),z(n,"fullscreen",e[48]),U(r,"class","wrapper-bottom svelte-s4hj64"),z(r,"hidden",e[2]),z(r,"controls-hidden",!e[4]),z(r,"no-smooth",e[3]),z(r,"mobile",!0)},m(c,m){y&&y.m(c,m),k(c,t,m),S&&S.m(c,m),k(c,i,m),k(c,r,m),A(r,n),A(n,a),$&&$.m(a,null),A(a,s),_&&_.m(a,null),A(a,o),T&&T.m(a,null),A(a,l),xe(u,a,null),A(a,d),x&&x.m(a,null),A(a,p),C&&C.m(a,null),e[151](a),A(n,h),xe(f,n,null),e[153](r),k(c,g,m),M&&M.m(c,m),k(c,v,m),b=!0},p(e,s){e[5]?y&&(ge(),ye(y,1,1,(()=>{y=null})),ve()):y?(y.p(e,s),32&s[0]&&be(y,1)):(y=Nd(e),y.c(),be(y,1),y.m(t.parentNode,t)),e[5]&&"inactive"!==e[24]?S?(S.p(e,s),16777248&s[0]&&be(S,1)):(S=Kd(e),S.c(),be(S,1),S.m(i.parentNode,i)):S&&(ge(),ye(S,1,1,(()=>{S=null})),ve()),e[95]&&$.p(e,s),!e[5]&&e[19]?_?(_.p(e,s),524320&s[0]&&be(_,1)):(_=ep(e),_.c(),be(_,1),_.m(a,o)):_&&(ge(),ye(_,1,1,(()=>{_=null})),ve()),e[37]?T?(T.p(e,s),64&s[1]&&be(T,1)):(T=ip(e),T.c(),be(T,1),T.m(a,l)):T&&(ge(),ye(T,1,1,(()=>{T=null})),ve());let d={};256&s[1]&&(d.disabled=!e[39]),201326848&s[1]|8388608&s[5]&&(d.$$scope={dirty:s,ctx:e}),!c&&131072&s[0]&&(c=!0,d.ref=e[17].episodes,ue((()=>c=!1))),u.$set(d),e[34]?x?(x.p(e,s),8&s[1]&&be(x,1)):(x=ap(e),x.c(),be(x,1),x.m(a,p)):x&&(ge(),ye(x,1,1,(()=>{x=null})),ve()),e[36]?C?(C.p(e,s),32&s[1]&&be(C,1)):(C=op(e),C.c(),be(C,1),C.m(a,null)):C&&(ge(),ye(C,1,1,(()=>{C=null})),ve());let h={};32&s[0]&&(h.isAds=e[5]),64&s[0]&&(h.canRewindLive=e[6]),262144&s[0]&&(h.isRewindableLive=e[18]),!m&&131072&s[0]&&(m=!0,h.ref=e[17].timeline,ue((()=>m=!1))),f.$set(h),(!b||131072&s[1])&&z(n,"fullscreen",e[48]),(!b||4&s[0])&&z(r,"hidden",e[2]),(!b||16&s[0])&&z(r,"controls-hidden",!e[4]),(!b||8&s[0])&&z(r,"no-smooth",e[3]),e[99]&&M.p(e,s)},i(e){b||(be(y),be(S),be($),be(_),be(T),be(u.$$.fragment,e),be(x),be(C),be(f.$$.fragment,e),be(M),b=!0)},o(e){ye(y),ye(S),ye($),ye(_),ye(T),ye(u.$$.fragment,e),ye(x),ye(C),ye(f.$$.fragment,e),ye(M),b=!1},d(n){n&&(L(t),L(i),L(r),L(g),L(v)),y&&y.d(n),S&&S.d(n),$&&$.d(),_&&_.d(),T&&T.d(),Ae(u),x&&x.d(),C&&C.d(),e[151](null),Ae(f),e[153](null),M&&M.d(n)}}}function cp(e,t,i){let r,s,o,l,u,c,d,p,h,f,m,g,b,y,S,$,_,T,w,E,x,A,C,k,L,R,P,O,M,I,N,V,D,B,U,F,j,H,z,{bottomHidden:q}=t,{bottomNoSmooth:W}=t,{showControls:G}=t,{playerControlsWrapperRef:Q}=t,{playerControlsRef:Y}=t,{isAds:K=!1}=t,{canRewindLive:X}=t,{logoClickable:Z}=t,{logoHidden:J}=t,{logoTargetUrl:ee=""}=t,{showAutoplayNext:ie}=t,{showNextPrevButtons:re}=t,{nextButtonActive:ne}=t,{prevButtonActive:ae}=t,{isOneVideoPlaylist:se=!1}=t,{customFullscreenSupported:oe=!0}=t,{endScreenShown:le}=t,{toggleFullscreen:ue}=t,{seekToInteractive:ce}=t,{playPrevChapter:de}=t,{onDisabledPlayPrevChapterClick:pe}=t,{onDisabledSeekToInteractiveClick:he}=t,fe=et(),me=tt(),ge=Oe(),ve=fe.actions.internal.toggleMuted,be=fe.actions.internal.togglePlay,ye=fe.actions.internal.pause,Se=fe.actions.internal.prevVideoClick,$e=fe.actions.internal.nextVideoClick,_e=fe.callbacks?.onAudioDoesNotExistHint,Te=fe.callbacks?.onAudioDisabledHint,we=fe.playerPhase;v(e,we,(e=>i(127,C=e)));let Ee=fe.state.duration$;v(e,Ee,(e=>i(58,z=e)));let xe=fe.state.positionWithScrubbing$;v(e,xe,(e=>i(57,H=e)));let Ae=fe.state.playbackState$;v(e,Ae,(e=>i(121,m=e)));let Ce=fe.state.isAudioAvailable$;v(e,Ce,(e=>i(47,g=e)));let ke=fe.state.isAudioDisabled,Le=fe.state.isEnded$;v(e,Le,(e=>i(128,L=e)));let Re=fe.state.isLive$;v(e,Re,(e=>i(19,T=e)));let Pe=fe.state.muted$;v(e,Pe,(e=>i(50,N=e)));let Me=fe.state.isActiveLive$;v(e,Me,(e=>i(125,$=e)));let Ie=fe.state.isRewindableLive$;v(e,Ie,(e=>i(18,_=e)));let Ne=fe.ui.scrubbingInProgress;v(e,Ne,(e=>i(23,k=e)));let Ve=fe.ui.mobileNotReportControlHidden$;v(e,Ve,(e=>i(21,x=e)));let De=fe.ui.isPictureInPictureActive$;v(e,De,(e=>i(20,E=e)));let Be=fe.ui.pictureInPictureType$;v(e,Be,(e=>i(126,w=e)));let Ue=fe.ui.mobileUnmuteButtonExpanded;v(e,Ue,(e=>i(51,V=e)));let Fe=fe.ui.mobileUnmuteButtonVisible;v(e,Fe,(e=>i(49,I=e)));let je=fe.ui.settingsMenu.visible$;v(e,je,(e=>i(119,h=e)));let He=fe.ui.settingsMenu.openedByBtnKeyboard$;v(e,He,(e=>i(118,p=e)));let ze=fe.ui.controls,qe=fe.actions.internal.getVideoEpisodes(),We=fe.webApi.pictureInPictureApi,Qe=fe.state.chromecastState$;v(e,Qe,(e=>i(22,A=e)));let Ye=fe.state.crashed$;v(e,Ye,(e=>i(53,B=e)));let Ke=ze.disabledControls$;v(e,Ke,(e=>i(129,P=e)));let Xe=fe.ui.startedByKeyboard$;v(e,Xe,(e=>i(117,d=e)));let Ze=fe.ui.currentGridType$;v(e,Ze,(e=>i(124,S=e)));let Je=fe.ads.duration;v(e,Je,(e=>i(56,j=e)));let it=fe.ads.position;v(e,it,(e=>i(55,F=e)));let rt=fe.ads.playbackState;v(e,rt,(e=>i(24,R=e)));let nt=fe.ui.isFullscreen;v(e,nt,(e=>i(48,M=e)));let at=fe.ui.playerSize;v(e,at,(e=>i(123,y=e)));let st=fe.ui.additionalButtonsDeprecated$;v(e,st,(e=>i(52,D=e)));let ot=fe.actions.internal.getVideoElement,lt=fe.actions.internal.replayInteractive,ut=fe.state.isInteractive,ct=fe.state.isInteractiveTime$;v(e,ct,(e=>i(122,b=e)));let dt=fe.state.showInteractiveGraph,pt=fe.state.showSeekToInteractive,ht=fe.state.showPlayPrevChapter,ft=fe.state.showInteractiveTimeIndicator,mt=me.seekToInteractiveDisabledTooltip$;v(e,mt,(e=>i(130,O=e)));let gt=me.graphIsOpened$;v(e,gt,(e=>i(54,U=e)));let vt,bt,yt,St,$t,_t,Tt,wt,Et,xt,At,Ct,kt,Lt,Rt,Ot,Mt,It,Nt,Vt,Dt,Bt={},Ut=(0,a.debounceFn)(Hl,260);let Ft="",jt=Ge();v(e,jt,(e=>i(120,f=e)));return e.$$set=e=>{"bottomHidden"in e&&i(2,q=e.bottomHidden),"bottomNoSmooth"in e&&i(3,W=e.bottomNoSmooth),"showControls"in e&&i(4,G=e.showControls),"playerControlsWrapperRef"in e&&i(0,Q=e.playerControlsWrapperRef),"playerControlsRef"in e&&i(1,Y=e.playerControlsRef),"isAds"in e&&i(5,K=e.isAds),"canRewindLive"in e&&i(6,X=e.canRewindLive),"logoClickable"in e&&i(7,Z=e.logoClickable),"logoHidden"in e&&i(108,J=e.logoHidden),"logoTargetUrl"in e&&i(8,ee=e.logoTargetUrl),"showAutoplayNext"in e&&i(9,ie=e.showAutoplayNext),"showNextPrevButtons"in e&&i(10,re=e.showNextPrevButtons),"nextButtonActive"in e&&i(109,ne=e.nextButtonActive),"prevButtonActive"in e&&i(110,ae=e.prevButtonActive),"isOneVideoPlaylist"in e&&i(11,se=e.isOneVideoPlaylist),"customFullscreenSupported"in e&&i(111,oe=e.customFullscreenSupported),"endScreenShown"in e&&i(12,le=e.endScreenShown),"toggleFullscreen"in e&&i(13,ue=e.toggleFullscreen),"seekToInteractive"in e&&i(14,ce=e.seekToInteractive),"playPrevChapter"in e&&i(15,de=e.playPrevChapter),"onDisabledPlayPrevChapterClick"in e&&i(112,pe=e.onDisabledPlayPrevChapterClick),"onDisabledSeekToInteractiveClick"in e&&i(113,he=e.onDisabledSeekToInteractiveClick)},e.$$.update=()=>{if(64&e.$$.dirty[4]&&(bt=Pt(O)),32&e.$$.dirty[4]&&i(116,r=P.has("EPISODE_BUTTON")),32&e.$$.dirty[4]&&i(46,s=P.has("GRAPH_BUTTON")),32&e.$$.dirty[4]&&i(42,o=P.has("SEEK_TO_INTERACTIVE_BUTTON")),32&e.$$.dirty[4]&&i(45,l=P.has("PLAY_BUTTON")),32&e.$$.dirty[4]&&i(44,u=P.has("REPLAY_BUTTON")),32&e.$$.dirty[4]&&i(43,c=P.has("PLAY_PREV_CHAPTER_BUTTON")),268435456&e.$$.dirty[3]&&i(25,yt=m===n.PlaybackState.PLAYING),16777216&e.$$.dirty[0]&&i(26,St="paused"===R),32&e.$$.dirty[0]|16&e.$$.dirty[4]&&i(27,$t=L&&!K&&!ut),32&e.$$.dirty[0]|16&e.$$.dirty[4]&&i(28,_t=!L||K),1056&e.$$.dirty[0]|131072&e.$$.dirty[3]&&i(29,Tt=re&&!K&&ae),1056&e.$$.dirty[0]|65536&e.$$.dirty[3]&&i(30,wt=re&&!K&&ne),1073741824&e.$$.dirty[3]&&i(114,Et=y.width>300),1073741824&e.$$.dirty[3]&&i(31,xt=y.width>400),8388608&e.$$.dirty[0]&&i(115,At=k),7340032&e.$$.dirty[0]|4&e.$$.dirty[4]&&i(32,Ct=!(A===n.ChromecastState.NOT_AVAILABLE||E&&1===w||x||ut)),6291456&e.$$.dirty[0]|4194304&e.$$.dirty[3]|12&e.$$.dirty[4]){let e="LiveWaitingStart"===C;i(33,kt=!!We&&A!==n.ChromecastState.CONNECTED&&!x&&(1===w&&e||!e)&&!At&&!ut)}var t;4194304&e.$$.dirty[3]|1&e.$$.dirty[4]&&i(34,Lt=!At&&Os(S,"s")),1073774592&e.$$.dirty[3]&&i(35,Rt=!J&&y.width>350),1048576&e.$$.dirty[0]|4456448&e.$$.dirty[3]|4&e.$$.dirty[4]&&i(36,Ot=ge.features.fullscreen&&!(E&&1===w)&&(!ut||oe)&&!At),524320&e.$$.dirty[0]|1077936128&e.$$.dirty[3]&&i(37,Mt=(!T||K)&&y.width>260&&!At&&!(ge.features.interactiveHideTime&&ut)),16&e.$$.dirty[0]|67108864&e.$$.dirty[3]&&i(38,It=h||G),524320&e.$$.dirty[0]|14680064&e.$$.dirty[3]&&i(39,Nt=!K&&!T&&!!qe?.length&&Et&&!r&&!At),262144&e.$$.dirty[0]|2&e.$$.dirty[4]&&i(16,Vt=!_||$),1&e.$$.dirty[4]&&i(40,Dt=dt&&Os(S,"m")),131088&e.$$.dirty[0]|1610612736&e.$$.dirty[3]&&Ut(ot(),ze,Bt,G),65536&e.$$.dirty[0]|268435456&e.$$.dirty[3]&&(t=m,Vt?t===n.PlaybackState.PAUSED&&i(41,Ft=Pt("tooltip_play")):i(41,Ft=Pt("tooltip_live"))),201326592&e.$$.dirty[3]&&f&&Hi(f,h,He),100663296&e.$$.dirty[3]&&zi(undefined,h,p),131072&e.$$.dirty[0]|16777216&e.$$.dirty[3]&&zl(Xe,d,Bt.playButton)},vt=Pt(fe.state.playPrevChapterDisabledTooltip),[Q,Y,q,W,G,K,X,Z,ee,ie,re,se,le,ue,ce,de,Vt,Bt,_,T,E,x,A,k,R,yt,St,$t,_t,Tt,wt,xt,Ct,kt,Lt,Rt,Ot,Mt,It,Nt,Dt,Ft,o,c,u,l,s,g,M,I,N,V,D,B,U,F,j,H,z,be,ye,Se,$e,we,Ee,xe,Ae,Ce,ke,Le,Re,Pe,Me,Ie,Ne,Ve,De,Be,Ue,Fe,je,He,qe,Qe,Ye,Ke,Xe,Ze,Je,it,rt,nt,at,st,lt,ut,ct,pt,ht,ft,mt,gt,()=>fe.actions.internal.toggleChromecast(),async function(){We?.isActive()?await(We?.remove()):await(We?.request())},function(){!ke&&g&&Fe.set(!1),an({isAudioDisabled:ke,audioDisabledHintCallback:Te,isAudioAvailable:g,audioIsNotExistHintCallback:_e})&&ve()},jt,()=>{c&&pe(vt)},()=>{o&&he(bt)},J,ne,ae,oe,pe,he,Et,At,r,d,p,h,f,m,b,y,S,$,w,C,L,P,O,function(t){e.$$.not_equal(Bt.volume,t)&&(Bt.volume=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.autoplayNextToggle,t)&&(Bt.autoplayNextToggle=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.chromecast,t)&&(Bt.chromecast=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.pip,t)&&(Bt.pip=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.vkLogo,t)&&(Bt.vkLogo=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.prevButton,t)&&(Bt.prevButton=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.playButton,t)&&(Bt.playButton=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.replayButton,t)&&(Bt.replayButton=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.nextButton,t)&&(Bt.nextButton=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.playPrevChapterButton,t)&&(Bt.playPrevChapterButton=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.interactiveGraphButton,t)&&(Bt.interactiveGraphButton=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.seekToInteractiveButton,t)&&(Bt.seekToInteractiveButton=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.volume,t)&&(Bt.volume=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.playButton,t)&&(Bt.playButton=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.replayButton,t)&&(Bt.replayButton=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.liveButton,t)&&(Bt.liveButton=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.time,t)&&(Bt.time=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.episodes,t)&&(Bt.episodes=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.settings,t)&&(Bt.settings=t,i(17,Bt))},function(t){e.$$.not_equal(Bt.fullscreen,t)&&(Bt.fullscreen=t,i(17,Bt))},function(e){te[e?"unshift":"push"]((()=>{Y=e,i(1,Y)}))},function(t){e.$$.not_equal(Bt.timeline,t)&&(Bt.timeline=t,i(17,Bt))},function(e){te[e?"unshift":"push"]((()=>{Q=e,i(0,Q)}))},function(t){e.$$.not_equal(Bt.interactiveTimeIndicator,t)&&(Bt.interactiveTimeIndicator=t,i(17,Bt))}]}var dp=class extends Le{constructor(e){super(),Ce(this,e,cp,up,h,{bottomHidden:2,bottomNoSmooth:3,showControls:4,playerControlsWrapperRef:0,playerControlsRef:1,isAds:5,canRewindLive:6,logoClickable:7,logoHidden:108,logoTargetUrl:8,showAutoplayNext:9,showNextPrevButtons:10,nextButtonActive:109,prevButtonActive:110,isOneVideoPlaylist:11,customFullscreenSupported:111,endScreenShown:12,toggleFullscreen:13,seekToInteractive:14,playPrevChapter:15,onDisabledPlayPrevChapterClick:112,onDisabledSeekToInteractiveClick:113},Md,[-1,-1,-1,-1,-1,-1])}};function pp(e){let t,i,r,n,a=[fp,hp],s=[];function o(e,t){return e[23]?0:1}return t=o(e),i=s[t]=a[t](e),{c(){i.c(),r=N()},m(e,i){s[t].m(e,i),k(e,r,i),n=!0},p(e,n){let l=t;t=o(e),t===l?s[t].p(e,n):(ge(),ye(s[l],1,1,(()=>{s[l]=null})),ve(),i=s[t],i?i.p(e,n):(i=s[t]=a[t](e),i.c()),be(i,1),i.m(r.parentNode,r))},i(e){n||(be(i),n=!0)},o(e){ye(i),n=!1},d(e){e&&L(r),s[t].d(e)}}}function hp(e){let t,i,r,n;function a(t){e[27](t)}function s(t){e[28](t)}let o={bottomHidden:e[2],bottomNoSmooth:e[3],showControls:e[4],isAds:e[5],canRewindLive:e[6],logoClickable:e[7],logoHidden:e[8],logoTargetUrl:e[9],showNextPrevButtons:e[10],nextButtonActive:e[12],prevButtonActive:e[13],customFullscreenSupported:e[15],toggleFullscreen:e[17],seekToInteractive:e[18],playPrevChapter:e[19]};return void 0!==e[0]&&(o.playerControlsWrapperRef=e[0]),void 0!==e[1]&&(o.playerControlsRef=e[1]),t=new Jc({props:o}),te.push((()=>we(t,"playerControlsWrapperRef",a))),te.push((()=>we(t,"playerControlsRef",s))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),n=!0},p(e,n){let a={};4&n&&(a.bottomHidden=e[2]),8&n&&(a.bottomNoSmooth=e[3]),16&n&&(a.showControls=e[4]),32&n&&(a.isAds=e[5]),64&n&&(a.canRewindLive=e[6]),128&n&&(a.logoClickable=e[7]),256&n&&(a.logoHidden=e[8]),512&n&&(a.logoTargetUrl=e[9]),1024&n&&(a.showNextPrevButtons=e[10]),4096&n&&(a.nextButtonActive=e[12]),8192&n&&(a.prevButtonActive=e[13]),32768&n&&(a.customFullscreenSupported=e[15]),131072&n&&(a.toggleFullscreen=e[17]),262144&n&&(a.seekToInteractive=e[18]),524288&n&&(a.playPrevChapter=e[19]),!i&&1&n&&(i=!0,a.playerControlsWrapperRef=e[0],ue((()=>i=!1))),!r&&2&n&&(r=!0,a.playerControlsRef=e[1],ue((()=>r=!1))),t.$set(a)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){ye(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function fp(e){let t,i,r,n;function a(t){e[25](t)}function s(t){e[26](t)}let o={bottomHidden:e[2],bottomNoSmooth:e[3],showControls:e[4],isAds:e[5],canRewindLive:e[6],logoClickable:e[7],logoHidden:e[8],logoTargetUrl:e[9],showAutoplayNext:e[11],showNextPrevButtons:e[10],nextButtonActive:e[12],prevButtonActive:e[13],isOneVideoPlaylist:e[14],customFullscreenSupported:e[15],endScreenShown:e[16],toggleFullscreen:e[17],seekToInteractive:e[18],playPrevChapter:e[19],onDisabledPlayPrevChapterClick:e[20],onDisabledSeekToInteractiveClick:e[21]};return void 0!==e[0]&&(o.playerControlsWrapperRef=e[0]),void 0!==e[1]&&(o.playerControlsRef=e[1]),t=new dp({props:o}),te.push((()=>we(t,"playerControlsWrapperRef",a))),te.push((()=>we(t,"playerControlsRef",s))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),n=!0},p(e,n){let a={};4&n&&(a.bottomHidden=e[2]),8&n&&(a.bottomNoSmooth=e[3]),16&n&&(a.showControls=e[4]),32&n&&(a.isAds=e[5]),64&n&&(a.canRewindLive=e[6]),128&n&&(a.logoClickable=e[7]),256&n&&(a.logoHidden=e[8]),512&n&&(a.logoTargetUrl=e[9]),2048&n&&(a.showAutoplayNext=e[11]),1024&n&&(a.showNextPrevButtons=e[10]),4096&n&&(a.nextButtonActive=e[12]),8192&n&&(a.prevButtonActive=e[13]),16384&n&&(a.isOneVideoPlaylist=e[14]),32768&n&&(a.customFullscreenSupported=e[15]),65536&n&&(a.endScreenShown=e[16]),131072&n&&(a.toggleFullscreen=e[17]),262144&n&&(a.seekToInteractive=e[18]),524288&n&&(a.playPrevChapter=e[19]),1048576&n&&(a.onDisabledPlayPrevChapterClick=e[20]),2097152&n&&(a.onDisabledSeekToInteractiveClick=e[21]),!i&&1&n&&(i=!0,a.playerControlsWrapperRef=e[0],ue((()=>i=!1))),!r&&2&n&&(r=!0,a.playerControlsRef=e[1],ue((()=>r=!1))),t.$set(a)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){ye(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function mp(e){let t,i,r=e[22]&&pp(e);return{c(){r&&r.c(),t=N()},m(e,n){r&&r.m(e,n),k(e,t,n),i=!0},p(e,[i]){e[22]?r?(r.p(e,i),4194304&i&&be(r,1)):(r=pp(e),r.c(),be(r,1),r.m(t.parentNode,t)):r&&(ge(),ye(r,1,1,(()=>{r=null})),ve())},i(e){i||(be(r),i=!0)},o(e){ye(r),i=!1},d(e){e&&L(t),r&&r.d(e)}}}function gp(e,t,i){let r,{bottomHidden:n}=t,{bottomNoSmooth:s=!1}=t,{showControls:o}=t,{playerControlsWrapperRef:l}=t,{playerControlsRef:u}=t,{isAds:c=!1}=t,{canRewindLive:d}=t,{logoClickable:p}=t,{logoHidden:h}=t,{logoTargetUrl:f=""}=t,{showNextPrevButtons:m}=t,{showAutoplayNext:g=!1}=t,{nextButtonActive:b}=t,{prevButtonActive:y}=t,{isOneVideoPlaylist:S=!1}=t,{customFullscreenSupported:$=!0}=t,{endScreenShown:_=!1}=t,{toggleFullscreen:T}=t,{seekToInteractive:w}=t,{playPrevChapter:E}=t,{onDisabledPlayPrevChapterClick:x=a.noop}=t,{onDisabledSeekToInteractiveClick:A=a.noop}=t,C=et().ui.isMobile;v(e,C,(e=>i(23,r=e)));let k=!1;return Q((()=>{let e=setTimeout((()=>i(22,k=!0)),0);return()=>clearTimeout(e)})),e.$$set=e=>{"bottomHidden"in e&&i(2,n=e.bottomHidden),"bottomNoSmooth"in e&&i(3,s=e.bottomNoSmooth),"showControls"in e&&i(4,o=e.showControls),"playerControlsWrapperRef"in e&&i(0,l=e.playerControlsWrapperRef),"playerControlsRef"in e&&i(1,u=e.playerControlsRef),"isAds"in e&&i(5,c=e.isAds),"canRewindLive"in e&&i(6,d=e.canRewindLive),"logoClickable"in e&&i(7,p=e.logoClickable),"logoHidden"in e&&i(8,h=e.logoHidden),"logoTargetUrl"in e&&i(9,f=e.logoTargetUrl),"showNextPrevButtons"in e&&i(10,m=e.showNextPrevButtons),"showAutoplayNext"in e&&i(11,g=e.showAutoplayNext),"nextButtonActive"in e&&i(12,b=e.nextButtonActive),"prevButtonActive"in e&&i(13,y=e.prevButtonActive),"isOneVideoPlaylist"in e&&i(14,S=e.isOneVideoPlaylist),"customFullscreenSupported"in e&&i(15,$=e.customFullscreenSupported),"endScreenShown"in e&&i(16,_=e.endScreenShown),"toggleFullscreen"in e&&i(17,T=e.toggleFullscreen),"seekToInteractive"in e&&i(18,w=e.seekToInteractive),"playPrevChapter"in e&&i(19,E=e.playPrevChapter),"onDisabledPlayPrevChapterClick"in e&&i(20,x=e.onDisabledPlayPrevChapterClick),"onDisabledSeekToInteractiveClick"in e&&i(21,A=e.onDisabledSeekToInteractiveClick)},[l,u,n,s,o,c,d,p,h,f,m,g,b,y,S,$,_,T,w,E,x,A,k,r,C,function(e){l=e,i(0,l)},function(e){u=e,i(1,u)},function(e){l=e,i(0,l)},function(e){u=e,i(1,u)}]}var vp=class extends Le{constructor(e){super(),Ce(this,e,gp,mp,h,{bottomHidden:2,bottomNoSmooth:3,showControls:4,playerControlsWrapperRef:0,playerControlsRef:1,isAds:5,canRewindLive:6,logoClickable:7,logoHidden:8,logoTargetUrl:9,showNextPrevButtons:10,showAutoplayNext:11,nextButtonActive:12,prevButtonActive:13,isOneVideoPlaylist:14,customFullscreenSupported:15,endScreenShown:16,toggleFullscreen:17,seekToInteractive:18,playPrevChapter:19,onDisabledPlayPrevChapterClick:20,onDisabledSeekToInteractiveClick:21})}};function bp(e){let t,i,r,n,a,s,o,u,c,d,p,h,f,m,g=e[2].default,v=b(g,e,e[1],null),y=[{xmlns:"http://www.w3.org/2000/svg"},{width:"48"},{height:"51"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"seek-icon"},{role:"img"},e[0]],T={};for(let e=0;e<y.length;e+=1)T=l(T,y[e]);return{c(){t=O("svg"),v&&v.c(),i=O("g"),r=O("path"),n=O("path"),a=O("defs"),s=O("filter"),o=O("feFlood"),u=O("feColorMatrix"),c=O("feOffset"),d=O("feGaussianBlur"),p=O("feColorMatrix"),h=O("feBlend"),f=O("feBlend"),U(r,"fill","#fff"),U(r,"d","M15.537 10.534a1.157 1.157 0 0 0 .003 1.96l7.658 4.823c.78.491 1.798-.065 1.798-.981v-3.3c7.265.512 13 6.568 13 13.964 0 7.732-6.268 14-14 14-5.98 0-11.088-3.75-13.093-9.032a1.5 1.5 0 0 0-2.805 1.064C10.531 39.441 16.73 44 23.996 44c9.39 0 17-7.611 17-17 0-9.053-7.076-16.453-16-16.971V6.664c0-.918-1.021-1.473-1.8-.98z"),U(n,"stroke","#000"),U(n,"stroke-opacity",".12"),U(n,"stroke-width",".5"),U(n,"d","M15.404 10.322a1.407 1.407 0 0 0 .003 2.384l7.657 4.823c.944.594 2.182-.076 2.182-1.193v-3.03c7.008.631 12.5 6.522 12.5 13.694 0 7.594-6.156 13.75-13.75 13.75-5.873 0-10.89-3.683-12.86-8.871a1.75 1.75 0 1 0-3.272 1.242c2.469 6.503 8.758 11.129 16.132 11.129 9.527 0 17.25-7.723 17.25-17.25 0-9.107-7.056-16.565-16-17.205V6.664c0-1.118-1.241-1.788-2.184-1.19z"),U(i,"filter","url(#a)"),U(o,"flood-opacity","0"),U(o,"result","BackgroundImageFix"),U(u,"in","SourceAlpha"),U(u,"result","hardAlpha"),U(u,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"),U(d,"stdDeviation","2.5"),U(p,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16 0"),U(h,"in2","BackgroundImageFix"),U(h,"result","effect1_dropShadow_2260_100684"),U(f,"in","SourceGraphic"),U(f,"in2","effect1_dropShadow_2260_100684"),U(f,"result","shape"),U(s,"id","a"),U(s,"width","43.996"),U(s,"height","49.5"),U(s,"x","2.5"),U(s,"y","0"),U(s,"color-interpolation-filters","sRGB"),U(s,"filterUnits","userSpaceOnUse"),F(t,T)},m(e,l){k(e,t,l),v&&v.m(t,null),A(t,i),A(i,r),A(i,n),A(t,a),A(a,s),A(s,o),A(s,u),A(s,c),A(s,d),A(s,p),A(s,h),A(s,f),m=!0},p(e,[i]){v&&v.p&&(!m||2&i)&&$(v,g,e,e[1],m?S(g,e[1],i,null):_(e[1]),null),F(t,T=_e(y,[{xmlns:"http://www.w3.org/2000/svg"},{width:"48"},{height:"51"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"seek-icon"},{role:"img"},1&i&&e[0]]))},i(e){m||(be(v,e),m=!0)},o(e){ye(v,e),m=!1},d(e){e&&L(t),v&&v.d(e)}}}function yp(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var Sp=class extends Le{constructor(e){super(),Ce(this,e,yp,bp,h,{})}};function $p(e){let t,i;return t=new Sp({props:{style:e[0]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,[i]){let r={};1&i&&(r.style=e[0]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function _p(e,t,i){let r,{reversed:n=!1}=t;return e.$$set=e=>{"reversed"in e&&i(1,n=e.reversed)},e.$$.update=()=>{2&e.$$.dirty&&i(0,r=n?"transform: scaleX(-1);":void 0)},[r,n]}var Tp=class extends Le{constructor(e){super(),Ce(this,e,_p,$p,h,{reversed:1})}};function wp(e){let t,i,r,n,a,s,o,u,c,d,p,h,f,m,g,v,y=e[2].default,T=b(y,e,e[1],null),w=[{xmlns:"http://www.w3.org/2000/svg"},{width:"48"},{height:"48"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"subtitles-on-icon"},{role:"img"},e[0]],E={};for(let e=0;e<w.length;e+=1)E=l(E,w[e]);return{c(){t=O("svg"),T&&T.c(),i=O("g"),r=O("path"),n=O("path"),a=O("defs"),s=O("clipPath"),o=O("path"),u=O("filter"),c=O("feFlood"),d=O("feColorMatrix"),p=O("feOffset"),h=O("feGaussianBlur"),f=O("feColorMatrix"),m=O("feBlend"),g=O("feBlend"),U(r,"fill","#fff"),U(r,"fill-rule","evenodd"),U(r,"d","M28.167 7h-8.334c-2.463 0-4.404 0-5.966.128-1.594.13-2.925.4-4.134 1.016a10.5 10.5 0 0 0-4.589 4.59c-.616 1.208-.886 2.54-1.016 4.133C4 18.429 4 20.37 4 22.833v2.334c0 2.463 0 4.404.128 5.966.13 1.594.4 2.925 1.016 4.134a10.5 10.5 0 0 0 4.59 4.589c1.208.616 2.54.886 4.133 1.016 1.562.128 3.502.128 5.966.128h8.334c2.463 0 4.404 0 5.966-.128 1.594-.13 2.925-.4 4.134-1.016a10.5 10.5 0 0 0 4.589-4.59c.616-1.208.886-2.54 1.016-4.133.128-1.562.128-3.502.128-5.966v-2.334c0-2.463 0-4.404-.128-5.966-.13-1.594-.4-2.925-1.016-4.134a10.5 10.5 0 0 0-4.59-4.589c-1.208-.616-2.54-.886-4.133-1.016C32.571 7 30.63 7 28.167 7M13.5 28a1.5 1.5 0 0 0 0 3h11a1.5 1.5 0 0 0 0-3zM12 22a1.5 1.5 0 0 1 1.5-1.5h4a1.5 1.5 0 0 1 0 3h-4A1.5 1.5 0 0 1 12 22m18.5 6a1.5 1.5 0 0 0 0 3h4a1.5 1.5 0 0 0 0-3zM22 22a1.5 1.5 0 0 1 1.5-1.5h11a1.5 1.5 0 0 1 0 3h-11A1.5 1.5 0 0 1 22 22"),U(r,"clip-rule","evenodd"),U(n,"stroke","#000"),U(n,"stroke-opacity",".12"),U(n,"stroke-width",".5"),U(n,"d","M28.167 6.75h-8.344c-2.455 0-4.405 0-5.977.128-1.609.132-2.976.407-4.226 1.044a10.75 10.75 0 0 0-4.698 4.698c-.637 1.25-.912 2.617-1.044 4.226-.128 1.572-.128 3.522-.128 5.977v2.354c0 2.455 0 4.405.128 5.977.132 1.609.407 2.976 1.044 4.226a10.75 10.75 0 0 0 4.698 4.698c1.25.637 2.617.912 4.226 1.044 1.572.128 3.522.128 5.977.128h8.354c2.455 0 4.404 0 5.977-.128 1.609-.132 2.976-.407 4.226-1.044a10.75 10.75 0 0 0 4.698-4.698c.637-1.25.912-2.617 1.044-4.226.128-1.573.128-3.522.128-5.977v-2.354c0-2.455 0-4.405-.128-5.977-.132-1.609-.407-2.976-1.044-4.226a10.75 10.75 0 0 0-4.698-4.698c-1.25-.637-2.617-.912-4.226-1.044-1.572-.128-3.522-.128-5.977-.128zM12.25 29.5c0-.69.56-1.25 1.25-1.25h11a1.25 1.25 0 1 1 0 2.5h-11c-.69 0-1.25-.56-1.25-1.25Zm0-7.5c0-.69.56-1.25 1.25-1.25h4a1.25 1.25 0 1 1 0 2.5h-4c-.69 0-1.25-.56-1.25-1.25Zm17 7.5c0-.69.56-1.25 1.25-1.25h4a1.25 1.25 0 1 1 0 2.5h-4c-.69 0-1.25-.56-1.25-1.25Zm-7-7.5c0-.69.56-1.25 1.25-1.25h11a1.25 1.25 0 1 1 0 2.5h-11c-.69 0-1.25-.56-1.25-1.25Z"),U(i,"clip-path","url(#c)"),U(i,"filter","url(#a)"),U(o,"fill","#fff"),U(o,"d","M0 0h48v48H0z"),U(s,"id","c"),U(c,"flood-opacity","0"),U(c,"result","BackgroundImageFix"),U(d,"in","SourceAlpha"),U(d,"result","hardAlpha"),U(d,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"),U(h,"stdDeviation","2.5"),U(f,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16 0"),U(m,"in2","BackgroundImageFix"),U(m,"result","effect1_dropShadow_2260_104204"),U(g,"in","SourceGraphic"),U(g,"in2","effect1_dropShadow_2260_104204"),U(g,"result","shape"),U(u,"id","a"),U(u,"width","51"),U(u,"height","45"),U(u,"x","-1.5"),U(u,"y","1.5"),U(u,"color-interpolation-filters","sRGB"),U(u,"filterUnits","userSpaceOnUse"),F(t,E)},m(e,l){k(e,t,l),T&&T.m(t,null),A(t,i),A(i,r),A(i,n),A(t,a),A(a,s),A(s,o),A(a,u),A(u,c),A(u,d),A(u,p),A(u,h),A(u,f),A(u,m),A(u,g),v=!0},p(e,[i]){T&&T.p&&(!v||2&i)&&$(T,y,e,e[1],v?S(y,e[1],i,null):_(e[1]),null),F(t,E=_e(w,[{xmlns:"http://www.w3.org/2000/svg"},{width:"48"},{height:"48"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"subtitles-on-icon"},{role:"img"},1&i&&e[0]]))},i(e){v||(be(T,e),v=!0)},o(e){ye(T,e),v=!1},d(e){e&&L(t),T&&T.d(e)}}}function Ep(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var xp=class extends Le{constructor(e){super(),Ce(this,e,Ep,wp,h,{})}};function Ap(e){let t,i,r,n,a,s,o,u,c,d,p,h,f,m,g,v,y,T=e[2].default,w=b(T,e,e[1],null),E=[{xmlns:"http://www.w3.org/2000/svg"},{width:"48"},{height:"48"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"subtitles-off-icon"},{role:"img"},e[0]],x={};for(let e=0;e<E.length;e+=1)x=l(x,E[e]);return{c(){t=O("svg"),w&&w.c(),i=O("g"),r=O("path"),n=O("path"),a=O("path"),s=O("defs"),o=O("clipPath"),u=O("path"),c=O("filter"),d=O("feFlood"),p=O("feColorMatrix"),h=O("feOffset"),f=O("feGaussianBlur"),m=O("feColorMatrix"),g=O("feBlend"),v=O("feBlend"),U(r,"fill","#fff"),U(r,"fill-rule","evenodd"),U(r,"d","M6.56 4.44a1.5 1.5 0 1 0-2.12 2.12l3.088 3.09a10.5 10.5 0 0 0-2.384 3.083c-.616 1.21-.886 2.54-1.016 4.134C4 18.429 4 20.369 4 22.833v2.334c0 2.463 0 4.404.128 5.966.13 1.594.4 2.925 1.016 4.134a10.5 10.5 0 0 0 4.59 4.589c1.208.616 2.54.886 4.133 1.016 1.562.128 3.502.128 5.966.128h8.334c2.463 0 4.404 0 5.966-.128 1.437-.117 2.66-.348 3.773-.844l3.533 3.533a1.5 1.5 0 0 0 2.122-2.122l-37-37ZM13.5 28a1.5 1.5 0 0 0 0 3h11a1.5 1.5 0 0 0 0-3zM12 22a1.5 1.5 0 0 1 1.5-1.5h4a1.5 1.5 0 0 1 0 3h-4A1.5 1.5 0 0 1 12 22"),U(r,"clip-rule","evenodd"),U(n,"fill","#fff"),U(n,"d","M34.5 23.5h-4.639l12.552 12.551q.237-.381.443-.784c.616-1.21.886-2.54 1.016-4.134.128-1.562.128-3.502.128-5.966v-2.334c0-2.463 0-4.404-.128-5.966-.13-1.594-.4-2.925-1.016-4.134a10.5 10.5 0 0 0-4.59-4.589c-1.208-.616-2.54-.886-4.133-1.016C32.571 7 30.63 7 28.167 7h-8.334c-2.463 0-4.404 0-5.966.128l-.347.03L26.86 20.5h7.64a1.5 1.5 0 0 1 0 3"),U(a,"stroke","#000"),U(a,"stroke-opacity",".12"),U(a,"stroke-width",".5"),U(a,"d","M29.861 23.25h-.603l.427.427 12.55 12.551.223.223.167-.268q.243-.39.453-.803c.637-1.25.912-2.617 1.044-4.226.128-1.573.128-3.522.128-5.977v-2.354c0-2.455 0-4.405-.128-5.977-.132-1.609-.407-2.976-1.044-4.226a10.75 10.75 0 0 0-4.698-4.698c-1.25-.637-2.617-.912-4.226-1.044-1.572-.128-3.522-.128-5.977-.128h-8.354c-2.455 0-4.405 0-5.977.128q-.177.014-.35.032l-.527.051.374.374 13.341 13.342.074.073H34.5a1.25 1.25 0 1 1 0 2.5zM6.737 4.263a1.75 1.75 0 0 0-2.474 2.474l2.903 2.904a10.8 10.8 0 0 0-2.244 2.979c-.637 1.25-.912 2.617-1.044 4.226-.128 1.572-.128 3.522-.128 5.977v2.354c0 2.455 0 4.405.128 5.977.132 1.609.407 2.976 1.044 4.226a10.75 10.75 0 0 0 4.698 4.698c1.25.637 2.617.912 4.226 1.044 1.572.128 3.522.128 5.977.128h8.354c2.455 0 4.404 0 5.977-.128 1.384-.114 2.59-.333 3.696-.797l3.413 3.412a1.75 1.75 0 1 0 2.474-2.474zM12.25 29.5c0-.69.56-1.25 1.25-1.25h11a1.25 1.25 0 1 1 0 2.5h-11c-.69 0-1.25-.56-1.25-1.25Zm0-7.5c0-.69.56-1.25 1.25-1.25h4a1.25 1.25 0 1 1 0 2.5h-4c-.69 0-1.25-.56-1.25-1.25Z"),U(i,"clip-path","url(#c)"),U(i,"filter","url(#a)"),U(u,"fill","#fff"),U(u,"d","M0 0h48v48H0z"),U(o,"id","c"),U(d,"flood-opacity","0"),U(d,"result","BackgroundImageFix"),U(p,"in","SourceAlpha"),U(p,"result","hardAlpha"),U(p,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"),U(f,"stdDeviation","2.5"),U(m,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16 0"),U(g,"in2","BackgroundImageFix"),U(g,"result","effect1_dropShadow_2260_104293"),U(v,"in","SourceGraphic"),U(v,"in2","effect1_dropShadow_2260_104293"),U(v,"result","shape"),U(c,"id","a"),U(c,"width","51"),U(c,"height","51"),U(c,"x","-1.5"),U(c,"y","-1.5"),U(c,"color-interpolation-filters","sRGB"),U(c,"filterUnits","userSpaceOnUse"),F(t,x)},m(e,l){k(e,t,l),w&&w.m(t,null),A(t,i),A(i,r),A(i,n),A(i,a),A(t,s),A(s,o),A(o,u),A(s,c),A(c,d),A(c,p),A(c,h),A(c,f),A(c,m),A(c,g),A(c,v),y=!0},p(e,[i]){w&&w.p&&(!y||2&i)&&$(w,T,e,e[1],y?S(T,e[1],i,null):_(e[1]),null),F(t,x=_e(E,[{xmlns:"http://www.w3.org/2000/svg"},{width:"48"},{height:"48"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"subtitles-off-icon"},{role:"img"},1&i&&e[0]]))},i(e){y||(be(w,e),y=!0)},o(e){ye(w,e),y=!1},d(e){e&&L(t),w&&w.d(e)}}}function Cp(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var kp=class extends Le{constructor(e){super(),Ce(this,e,Cp,Ap,h,{})}};function Lp(e){let t,i;return t=new xp({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Rp(e){let t,i;return t=new kp({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Pp(e){let t,i,r,n,a=[Rp,Lp],s=[];function o(e,t){return e[0]?0:1}return t=o(e),i=s[t]=a[t](e),{c(){i.c(),r=N()},m(e,i){s[t].m(e,i),k(e,r,i),n=!0},p(e,[n]){let l=t;t=o(e),t!==l&&(ge(),ye(s[l],1,1,(()=>{s[l]=null})),ve(),i=s[t],i||(i=s[t]=a[t](e),i.c()),be(i,1),i.m(r.parentNode,r))},i(e){n||(be(i),n=!0)},o(e){ye(i),n=!1},d(e){e&&L(r),s[t].d(e)}}}function Op(e,t,i){let{isOff:r=!1}=t;return e.$$set=e=>{"isOff"in e&&i(0,r=e.isOff)},[r]}var Mp=class extends Le{constructor(e){super(),Ce(this,e,Op,Pp,h,{isOff:0})}};function Ip(e){let t,i,r,n,a,s,o,u,c,d,p,h,f,m,g=e[2].default,v=b(g,e,e[1],null),y=[{xmlns:"http://www.w3.org/2000/svg"},{width:"48"},{height:"48"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"rate-change-icon"},{role:"img"},e[0]],T={};for(let e=0;e<y.length;e+=1)T=l(T,y[e]);return{c(){t=O("svg"),v&&v.c(),i=O("g"),r=O("path"),n=O("path"),a=O("defs"),s=O("filter"),o=O("feFlood"),u=O("feColorMatrix"),c=O("feOffset"),d=O("feGaussianBlur"),p=O("feColorMatrix"),h=O("feBlend"),f=O("feBlend"),U(r,"fill","#fff"),U(r,"d","M24 22.677v-5.87a1.2 1.2 0 0 0-1.792-1.045L9.51 22.955a1.2 1.2 0 0 0 0 2.088l12.697 7.192a1.2 1.2 0 0 0 1.791-1.044v-5.873l12.21 6.916A1.2 1.2 0 0 0 38 31.19V16.805a1.2 1.2 0 0 0-1.791-1.044z"),U(n,"stroke","#000"),U(n,"stroke-opacity",".12"),U(n,"stroke-width",".5"),U(n,"d","M24.25 16.806v5.442l11.835-6.704a1.45 1.45 0 0 1 2.165 1.261V31.19a1.45 1.45 0 0 1-2.165 1.262L24.25 25.747v5.444a1.45 1.45 0 0 1-2.164 1.262L9.388 25.26a1.45 1.45 0 0 1 0-2.523l12.697-7.192a1.45 1.45 0 0 1 2.164 1.261Z"),U(i,"filter","url(#a)"),U(o,"flood-opacity","0"),U(o,"result","BackgroundImageFix"),U(u,"in","SourceAlpha"),U(u,"result","hardAlpha"),U(u,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"),U(d,"stdDeviation","2.5"),U(p,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16 0"),U(h,"in2","BackgroundImageFix"),U(h,"result","effect1_dropShadow_2260_106627"),U(f,"in","SourceGraphic"),U(f,"in2","effect1_dropShadow_2260_106627"),U(f,"result","shape"),U(s,"id","a"),U(s,"width","40.098"),U(s,"height","27.785"),U(s,"x","3.402"),U(s,"y","10.105"),U(s,"color-interpolation-filters","sRGB"),U(s,"filterUnits","userSpaceOnUse"),F(t,T)},m(e,l){k(e,t,l),v&&v.m(t,null),A(t,i),A(i,r),A(i,n),A(t,a),A(a,s),A(s,o),A(s,u),A(s,c),A(s,d),A(s,p),A(s,h),A(s,f),m=!0},p(e,[i]){v&&v.p&&(!m||2&i)&&$(v,g,e,e[1],m?S(g,e[1],i,null):_(e[1]),null),F(t,T=_e(y,[{xmlns:"http://www.w3.org/2000/svg"},{width:"48"},{height:"48"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"rate-change-icon"},{role:"img"},1&i&&e[0]]))},i(e){m||(be(v,e),m=!0)},o(e){ye(v,e),m=!1},d(e){e&&L(t),v&&v.d(e)}}}function Np(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var Vp=class extends Le{constructor(e){super(),Ce(this,e,Np,Ip,h,{})}};function Dp(e){let t,i;return t=new Vp({props:{style:e[0]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,[i]){let r={};1&i&&(r.style=e[0]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Bp(e,t,i){let r,{reversed:n=!1}=t;return e.$$set=e=>{"reversed"in e&&i(1,n=e.reversed)},e.$$.update=()=>{2&e.$$.dirty&&i(0,r=n?"transform: scaleX(-1);":void 0)},[r,n]}var Up=class extends Le{constructor(e){super(),Ce(this,e,Bp,Dp,h,{reversed:1})}};function Fp(e){let t,i,r,n,a,s,o,u,c,d,p,h,f,m,g=e[2].default,v=b(g,e,e[1],null),y=[{xmlns:"http://www.w3.org/2000/svg"},{width:"48"},{height:"48"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"episodes-seek-icon"},{role:"img"},e[0]],T={};for(let e=0;e<y.length;e+=1)T=l(T,y[e]);return{c(){t=O("svg"),v&&v.c(),i=O("g"),r=O("path"),n=O("path"),a=O("defs"),s=O("filter"),o=O("feFlood"),u=O("feColorMatrix"),c=O("feOffset"),d=O("feGaussianBlur"),p=O("feColorMatrix"),h=O("feBlend"),f=O("feBlend"),U(r,"fill","#fff"),U(r,"d","M14 21.817c.631-.505 1.627-1.054 3.084-1.857l13.009-7.172c2.268-1.25 3.402-1.875 4.332-1.778a2.9 2.9 0 0 1 2.026 1.134c.549.73.549 1.991.549 4.511v14.69c0 2.52 0 3.78-.549 4.51a2.9 2.9 0 0 1-2.026 1.135c-.93.097-2.064-.528-4.332-1.778L17.084 28.04c-1.457-.803-2.453-1.352-3.084-1.857V34.5a1.5 1.5 0 0 1-3 0v-21a1.5 1.5 0 0 1 3 0z"),U(n,"stroke","#000"),U(n,"stroke-opacity",".12"),U(n,"stroke-width",".5"),U(n,"d","m16.964 19.74-.029.016c-1.162.641-2.046 1.129-2.685 1.567V13.5a1.75 1.75 0 1 0-3.5 0v21a1.75 1.75 0 1 0 3.5 0v-7.823c.639.438 1.523.926 2.685 1.567l.029.015 13.008 7.172.012.006c1.124.62 1.983 1.093 2.676 1.398.695.306 1.26.46 1.791.404a3.16 3.16 0 0 0 2.2-1.233c.317-.421.46-.976.53-1.711.069-.733.069-1.688.069-2.936V16.641c0-1.248 0-2.203-.07-2.936-.07-.735-.212-1.29-.529-1.711a3.16 3.16 0 0 0-2.2-1.233c-.53-.055-1.096.098-1.79.404-.694.305-1.553.778-2.677 1.398l-.012.006z"),U(i,"filter","url(#a)"),U(o,"flood-opacity","0"),U(o,"result","BackgroundImageFix"),U(u,"in","SourceAlpha"),U(u,"result","hardAlpha"),U(u,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"),U(d,"stdDeviation","2.5"),U(p,"values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.16 0"),U(h,"in2","BackgroundImageFix"),U(h,"result","effect1_dropShadow_2340_106922"),U(f,"in","SourceGraphic"),U(f,"in2","effect1_dropShadow_2340_106922"),U(f,"result","shape"),U(s,"id","a"),U(s,"width","37"),U(s,"height","37"),U(s,"x","5.5"),U(s,"y","5.5"),U(s,"color-interpolation-filters","sRGB"),U(s,"filterUnits","userSpaceOnUse"),F(t,T)},m(e,l){k(e,t,l),v&&v.m(t,null),A(t,i),A(i,r),A(i,n),A(t,a),A(a,s),A(s,o),A(s,u),A(s,c),A(s,d),A(s,p),A(s,h),A(s,f),m=!0},p(e,[i]){v&&v.p&&(!m||2&i)&&$(v,g,e,e[1],m?S(g,e[1],i,null):_(e[1]),null),F(t,T=_e(y,[{xmlns:"http://www.w3.org/2000/svg"},{width:"48"},{height:"48"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"episodes-seek-icon"},{role:"img"},1&i&&e[0]]))},i(e){m||(be(v,e),m=!0)},o(e){ye(v,e),m=!1},d(e){e&&L(t),v&&v.d(e)}}}function jp(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var Hp=class extends Le{constructor(e){super(),Ce(this,e,jp,Fp,h,{})}};function zp(e){let t,i;return t=new Hp({props:{style:e[0]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,[i]){let r={};1&i&&(r.style=e[0]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function qp(e,t,i){let r,{reversed:n=!1}=t;return e.$$set=e=>{"reversed"in e&&i(1,n=e.reversed)},e.$$.update=()=>{2&e.$$.dirty&&i(0,r=n?"transform: scaleX(-1);":void 0)},[r,n]}var Wp=class extends Le{constructor(e){super(),Ce(this,e,qp,zp,h,{reversed:1})}};function Gp(e){C(e,"svelte-1ad3n06",'.hot-key-helpers-container.svelte-1ad3n06.svelte-1ad3n06{position:absolute;z-index:var(--hot-key-helpers-container-z-index);top:calc(50% - 40px);left:calc(50% - 100px);width:200px;height:120px;display:flex;align-items:center;flex-direction:column;animation:svelte-1ad3n06-fadeIn ease var(--controls-transition-duration);padding-top:14px;box-sizing:border-box}.hot-key-helpers-container.svelte-1ad3n06>div.svelte-1ad3n06{width:48px;height:48px;display:flex;justify-content:center;align-items:center}.hot-key-helpers-container.svelte-1ad3n06 svg[data-testid="volume-off-icon"],.hot-key-helpers-container.svelte-1ad3n06 svg[data-testid="volume-max-icon"]{transform:scale(2)}.hot-key-helpers-container.svelte-1ad3n06 svg[data-testid="replay-icon"],.hot-key-helpers-container.svelte-1ad3n06 svg[data-testid="play-icon"],.hot-key-helpers-container.svelte-1ad3n06 svg[data-testid="pause-icon"]{transform:scale(2.5)}.hot-key-helpers-container--left.svelte-1ad3n06.svelte-1ad3n06{left:calc(25% - 100px)}.hot-key-helpers-container--right.svelte-1ad3n06.svelte-1ad3n06{left:calc(75% - 100px)}.hot-key-helpers-text.svelte-1ad3n06.svelte-1ad3n06{text-align:center;font-feature-settings:\'clig\' off, \'liga\' off;text-shadow:0px 0px 5px rgba(0, 0, 0, 0.16);font-size:15px;font-style:normal;font-weight:600;line-height:20px;letter-spacing:-0.105px;width:100%;max-height:40px;margin-top:4px;display:-webkit-box;text-overflow:ellipsis;white-space:pre-wrap;overflow:hidden;-webkit-line-clamp:2;-webkit-box-orient:vertical}.hidden.svelte-1ad3n06.svelte-1ad3n06{visibility:hidden;animation:svelte-1ad3n06-fadeOut ease var(--controls-transition-duration);width:0;height:0}@keyframes svelte-1ad3n06-fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes svelte-1ad3n06-fadeOut{0%{opacity:1}100%{opacity:0}}')}function Qp(e){let t,i,r,n,a,s,o,l,u,c,d,p,h,f=["BACKWARD_SEEK","FORWARD_SEEK"].includes(e[4]),m=["RATE_DOWN","RATE_UP"].includes(e[4]),g=["EPISODE_PREV","EPISODE_NEXT"].includes(e[4]),v=f&&Yp(e),b="PAUSE"===e[4]&&Kp(e),y="PLAY"===e[4]&&Xp(e),S="REPLAY"===e[4]&&Zp(e),$="SUBTITLES_OFF"===e[4]&&Jp(e),_="SUBTITLES_ON"===e[4]&&eh(e),T=m&&th(e),w=g&&ih(e),E="MUTE"===e[4]&&rh(e),x="VOLUME"===e[4]&&nh(e),C=e[5]&&ah(e);return{c(){t=P("div"),v&&v.c(),i=I(),b&&b.c(),r=I(),y&&y.c(),n=I(),S&&S.c(),a=I(),$&&$.c(),s=I(),_&&_.c(),o=I(),T&&T.c(),l=I(),w&&w.c(),u=I(),E&&E.c(),c=I(),x&&x.c(),d=I(),C&&C.c(),p=N(),U(t,"class","svelte-1ad3n06")},m(e,f){k(e,t,f),v&&v.m(t,null),A(t,i),b&&b.m(t,null),A(t,r),y&&y.m(t,null),A(t,n),S&&S.m(t,null),A(t,a),$&&$.m(t,null),A(t,s),_&&_.m(t,null),A(t,o),T&&T.m(t,null),A(t,l),w&&w.m(t,null),A(t,u),E&&E.m(t,null),A(t,c),x&&x.m(t,null),k(e,d,f),C&&C.m(e,f),k(e,p,f),h=!0},p(e,d){16&d&&(f=["BACKWARD_SEEK","FORWARD_SEEK"].includes(e[4])),f?v?(v.p(e,d),16&d&&be(v,1)):(v=Yp(e),v.c(),be(v,1),v.m(t,i)):v&&(ge(),ye(v,1,1,(()=>{v=null})),ve()),"PAUSE"===e[4]?b?16&d&&be(b,1):(b=Kp(e),b.c(),be(b,1),b.m(t,r)):b&&(ge(),ye(b,1,1,(()=>{b=null})),ve()),"PLAY"===e[4]?y?16&d&&be(y,1):(y=Xp(e),y.c(),be(y,1),y.m(t,n)):y&&(ge(),ye(y,1,1,(()=>{y=null})),ve()),"REPLAY"===e[4]?S?16&d&&be(S,1):(S=Zp(e),S.c(),be(S,1),S.m(t,a)):S&&(ge(),ye(S,1,1,(()=>{S=null})),ve()),"SUBTITLES_OFF"===e[4]?$?16&d&&be($,1):($=Jp(e),$.c(),be($,1),$.m(t,s)):$&&(ge(),ye($,1,1,(()=>{$=null})),ve()),"SUBTITLES_ON"===e[4]?_?16&d&&be(_,1):(_=eh(e),_.c(),be(_,1),_.m(t,o)):_&&(ge(),ye(_,1,1,(()=>{_=null})),ve()),16&d&&(m=["RATE_DOWN","RATE_UP"].includes(e[4])),m?T?(T.p(e,d),16&d&&be(T,1)):(T=th(e),T.c(),be(T,1),T.m(t,l)):T&&(ge(),ye(T,1,1,(()=>{T=null})),ve()),16&d&&(g=["EPISODE_PREV","EPISODE_NEXT"].includes(e[4])),g?w?(w.p(e,d),16&d&&be(w,1)):(w=ih(e),w.c(),be(w,1),w.m(t,u)):w&&(ge(),ye(w,1,1,(()=>{w=null})),ve()),"MUTE"===e[4]?E?16&d&&be(E,1):(E=rh(e),E.c(),be(E,1),E.m(t,c)):E&&(ge(),ye(E,1,1,(()=>{E=null})),ve()),"VOLUME"===e[4]?x?16&d&&be(x,1):(x=nh(e),x.c(),be(x,1),x.m(t,null)):x&&(ge(),ye(x,1,1,(()=>{x=null})),ve()),e[5]?C?C.p(e,d):(C=ah(e),C.c(),C.m(p.parentNode,p)):C&&(C.d(1),C=null)},i(e){h||(be(v),be(b),be(y),be(S),be($),be(_),be(T),be(w),be(E),be(x),h=!0)},o(e){ye(v),ye(b),ye(y),ye(S),ye($),ye(_),ye(T),ye(w),ye(E),ye(x),h=!1},d(e){e&&(L(t),L(d),L(p)),v&&v.d(),b&&b.d(),y&&y.d(),S&&S.d(),$&&$.d(),_&&_.d(),T&&T.d(),w&&w.d(),E&&E.d(),x&&x.d(),C&&C.d(e)}}}function Yp(e){let t,i;return t=new Tp({props:{reversed:"FORWARD_SEEK"===e[4]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};16&i&&(r.reversed="FORWARD_SEEK"===e[4]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Kp(e){let t,i;return t=new Fu({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Xp(e){let t,i;return t=new Du({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Zp(e){let t,i;return t=new ku({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Jp(e){let t,i;return t=new Mp({props:{isOff:!0}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function eh(e){let t,i;return t=new Mp({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function th(e){let t,i;return t=new Up({props:{reversed:"RATE_UP"===e[4]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};16&i&&(r.reversed="RATE_UP"===e[4]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function ih(e){let t,i;return t=new Wp({props:{reversed:"EPISODE_NEXT"===e[4]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};16&i&&(r.reversed="EPISODE_NEXT"===e[4]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function rh(e){let t,i;return t=new Wa({props:{volume:0}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function nh(e){let t,i;return t=new Wa({props:{volume:1}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function ah(e){let t,i;return{c(){t=P("span"),i=M(e[5]),U(t,"class","hot-key-helpers-text svelte-1ad3n06")},m(e,r){k(e,t,r),A(t,i)},p(e,t){32&t&&j(i,e[5])},d(e){e&&L(t)}}}function sh(e){let t,i,r=!e[1]&&e[4]&&Qp(e);return{c(){t=P("div"),r&&r.c(),U(t,"class","hot-key-helpers-container svelte-1ad3n06"),z(t,"hidden",e[1]),z(t,"hot-key-helpers-container--left",e[2]),z(t,"hot-key-helpers-container--right",e[3])},m(e,n){k(e,t,n),r&&r.m(t,null),i=!0},p(e,[n]){!e[1]&&e[4]?r?(r.p(e,n),18&n&&be(r,1)):(r=Qp(e),r.c(),be(r,1),r.m(t,null)):r&&(ge(),ye(r,1,1,(()=>{r=null})),ve()),(!i||2&n)&&z(t,"hidden",e[1]),(!i||4&n)&&z(t,"hot-key-helpers-container--left",e[2]),(!i||8&n)&&z(t,"hot-key-helpers-container--right",e[3])},i(e){i||(be(r),i=!0)},o(e){ye(r),i=!1},d(e){e&&L(t),r&&r.d()}}}function oh(e,t,i){let r,n=o,a=()=>(n(),n=m(p,(e=>i(6,r=e))),p);e.$$.on_destroy.push((()=>n()));let s,l,u,c,d,{data:p}=t;return a(),e.$$set=e=>{"data"in e&&a(i(0,p=e.data))},e.$$.update=()=>{64&e.$$.dirty&&(i(1,s=!r),i(2,l="BACKWARD_SEEK"===r?.type),i(3,u="FORWARD_SEEK"===r?.type),i(4,c=r?.type),i(5,d=r?.t?Pt(r.t.key,{value:r.t.value||""}):r?.text))},[p,s,l,u,c,d,r]}var lh=class extends Le{constructor(e){super(),Ce(this,e,oh,sh,h,{data:0},Gp)}};function uh(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"12"},{height:"7"},{fill:"none"},{"aria-hidden":"true"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"fill-opacity",".72"),U(i,"fill-rule","evenodd"),U(i,"d","M11.736 6.736a.9.9 0 0 1-1.272 0L6 2.273 1.536 6.736A.9.9 0 1 1 .264 5.464l5.1-5.1a.9.9 0 0 1 1.272 0l5.1 5.1a.9.9 0 0 1 0 1.272"),U(i,"clip-rule","evenodd"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"12"},{height:"7"},{fill:"none"},{"aria-hidden":"true"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function ch(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var dh=class extends Le{constructor(e){super(),Ce(this,e,ch,uh,h,{})}};function ph(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"12"},{height:"16"},{fill:"none"},{"aria-hidden":"true"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"d","m5.773 8 3.363 3.364a.9.9 0 1 1-1.272 1.272l-4-4a.9.9 0 0 1 0-1.272l4-4a.9.9 0 0 1 1.272 1.272z"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"12"},{height:"16"},{fill:"none"},{"aria-hidden":"true"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function hh(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var fh=class extends Le{constructor(e){super(),Ce(this,e,hh,ph,h,{})}};function mh(e){let t,i;return t=new fh({props:{style:e[2],"data-testid":e[0]?"chevron-icon--right":"chevron-icon--left"}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};4&i&&(r.style=e[2]),1&i&&(r["data-testid"]=e[0]?"chevron-icon--right":"chevron-icon--left"),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function gh(e){let t,i;return t=new dh({props:{style:e[2],"data-testid":e[0]?"chevron-icon--down":"chevron-icon--up"}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};4&i&&(r.style=e[2]),1&i&&(r["data-testid"]=e[0]?"chevron-icon--down":"chevron-icon--up"),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function vh(e){let t,i,r,n,a=[gh,mh],s=[];function o(e,t){return e[1]?0:1}return t=o(e),i=s[t]=a[t](e),{c(){i.c(),r=N()},m(e,i){s[t].m(e,i),k(e,r,i),n=!0},p(e,[n]){let l=t;t=o(e),t===l?s[t].p(e,n):(ge(),ye(s[l],1,1,(()=>{s[l]=null})),ve(),i=s[t],i?i.p(e,n):(i=s[t]=a[t](e),i.c()),be(i,1),i.m(r.parentNode,r))},i(e){n||(be(i),n=!0)},o(e){ye(i),n=!1},d(e){e&&L(r),s[t].d(e)}}}function bh(e,t,i){let r,n,a,{direction:s="left"}=t;return e.$$set=e=>{"direction"in e&&i(3,s=e.direction)},e.$$.update=()=>{8&e.$$.dirty&&(i(1,n=["up","down"].includes(s)),i(0,a=["right","down"].includes(s))),1&e.$$.dirty&&i(2,r=a?"transform: rotate(180deg);":void 0)},[a,n,r,s]}var yh=class extends Le{constructor(e){super(),Ce(this,e,bh,vh,h,{direction:3})}};function Sh(e){C(e,"svelte-1yzc86r",".immersive-controls.svelte-1yzc86r{position:absolute;display:flex;flex-direction:row;top:10px;left:10px;width:56px;height:56px;background-color:rgba(0, 0, 0, .56);border-radius:8px;transition-property:top, left;transition-duration:var(--controls-transition-duration);transition-timing-function:var(--controls-transition-fn)}.immersive-controls.m-shifted.svelte-1yzc86r{top:50px;left:20px}.button-block.svelte-1yzc86r{width:40px;height:40px;margin:auto auto;transform:rotate(45deg)}.button-row.svelte-1yzc86r{display:flex;flex-direction:row;position:relative}.button.svelte-1yzc86r{width:20px;height:20px;text-align:center;cursor:pointer}.button.svelte-1yzc86r svg{opacity:0.7;transition:opacity linear 0.2s}.button.button-up.svelte-1yzc86r svg{transform:rotate(-45deg) translate(-1px, -1px)}.button.button-right.svelte-1yzc86r svg{transform:rotate(45deg) translate(1px, -1px)}.button.button-down.svelte-1yzc86r svg{transform:rotate(135deg) translate(1px, -3px)}.button.button-left.svelte-1yzc86r svg{transform:rotate(-135deg) translate(-1px, -3px)}.button.svelte-1yzc86r:hover svg{opacity:1}")}function $h(e){let t,i,r,n,a,s,o,l,u,c,p,h,f,m,g,v,b,y,S;return a=new yh({props:{direction:"up"}}),l=new yh({props:{direction:"up"}}),h=new yh({props:{direction:"up"}}),g=new yh({props:{direction:"up"}}),{c(){t=P("div"),i=P("div"),r=P("div"),n=P("div"),Ee(a.$$.fragment),s=I(),o=P("div"),Ee(l.$$.fragment),u=I(),c=P("div"),p=P("div"),Ee(h.$$.fragment),f=I(),m=P("div"),Ee(g.$$.fragment),U(n,"class","button button-up svelte-1yzc86r"),U(o,"class","button button-right svelte-1yzc86r"),U(r,"class","button-row svelte-1yzc86r"),U(p,"class","button button-left svelte-1yzc86r"),U(m,"class","button button-down svelte-1yzc86r"),U(c,"class","button-row svelte-1yzc86r"),U(i,"class","button-block svelte-1yzc86r"),U(i,"aria-hidden","true"),U(t,"class","immersive-controls svelte-1yzc86r"),U(t,"tabindex","0"),U(t,"role","button"),U(t,"aria-label",v=Pt("aria_label_spherical_control")),z(t,"m-shifted",e[0])},m(d,v){k(d,t,v),A(t,i),A(i,r),A(r,n),xe(a,n,null),A(r,s),A(r,o),xe(l,o,null),A(i,u),A(i,c),A(c,p),xe(h,p,null),A(c,f),A(c,m),xe(g,m,null),b=!0,y||(S=[V(n,"mousedown",e[1]),V(n,"mouseup",e[5]),V(n,"mouseleave",e[5]),V(o,"mousedown",e[3]),V(o,"mouseup",e[5]),V(o,"mouseleave",e[5]),V(p,"mousedown",e[4]),V(p,"mouseup",e[5]),V(p,"mouseleave",e[5]),V(m,"mousedown",e[2]),V(m,"mouseup",e[5]),V(m,"mouseleave",e[5]),V(t,"keydown",e[6]),V(t,"keyup",e[7])],y=!0)},p(e,[i]){(!b||1&i)&&z(t,"m-shifted",e[0])},i(e){b||(be(a.$$.fragment,e),be(l.$$.fragment,e),be(h.$$.fragment,e),be(g.$$.fragment,e),b=!0)},o(e){ye(a.$$.fragment,e),ye(l.$$.fragment,e),ye(h.$$.fragment,e),ye(g.$$.fragment,e),b=!1},d(e){e&&L(t),Ae(a),Ae(l),Ae(h),Ae(g),y=!1,d(S)}}}function _h(e,t,i){let{isShifted:r=!1}=t,n=et(),a=new Set(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"]),s=()=>{n.actions.internal.startCameraManualRotation(0,1)},o=()=>{n.actions.internal.startCameraManualRotation(0,-1)},l=()=>{n.actions.internal.startCameraManualRotation(1,0)},u=()=>{n.actions.internal.startCameraManualRotation(-1,0)},c=()=>(n.actions.internal.stopCameraManualRotation(),null);return e.$$set=e=>{"isShifted"in e&&i(0,r=e.isShifted)},[r,s,o,l,u,c,e=>{if(a.has(e.code))switch(e.preventDefault(),e.stopPropagation(),e.code){case"ArrowUp":s();break;case"ArrowDown":o();break;case"ArrowLeft":u();break;case"ArrowRight":l()}},e=>{a.has(e.code)&&(e.preventDefault(),e.stopPropagation(),c())}]}var Th=class extends Le{constructor(e){super(),Ce(this,e,_h,$h,h,{isShifted:0},Sh)}};function wh(e){C(e,"svelte-ovfyp5",".subtitles-container.svelte-ovfyp5.svelte-ovfyp5{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;transition:transform var(--controls-transition-duration)}.subtitles-container.shifted.svelte-ovfyp5.svelte-ovfyp5{transform:translateY(calc(var(--controls-height) * -1))}.subtitles-caption.svelte-ovfyp5.svelte-ovfyp5{position:absolute;left:4%;right:4%;bottom:4%;display:flex;justify-content:center}.subtitles-caption.mobile.svelte-ovfyp5.svelte-ovfyp5{bottom:8%}.subtitles-container.auto.svelte-ovfyp5 .subtitles-caption.svelte-ovfyp5{left:24%;right:24%}.caption.svelte-ovfyp5.svelte-ovfyp5{display:block;overflow-wrap:normal;padding:4px 8px;border-radius:4px;background:rgba(0, 0, 0, 0.4)}.subtitles-container.auto.svelte-ovfyp5 .caption.svelte-ovfyp5{width:100%}.caption-line.svelte-ovfyp5.svelte-ovfyp5{display:block;text-align:center}.subtitles-container.auto.svelte-ovfyp5 .caption-line.svelte-ovfyp5{text-align:left}.caption-segment.svelte-ovfyp5.svelte-ovfyp5{display:inline-block;line-height:1.2;font-size:13px;color:var(--white);white-space:pre-wrap}")}function Eh(e,t,i){let r=e.slice();return r[16]=t[i].value,r}function xh(e,t,i){let r=e.slice();return r[16]=t[i].value,r[17]=t[i].timeAppeared,r}function Ah(e){let t,i;function r(e,t){return e[7]&&e[8]?Lh:e[5]?kh:Ch}let n=r(e),a=n(e);return{c(){t=P("div"),i=P("span"),a.c(),U(i,"class","caption svelte-ovfyp5"),U(t,"class","subtitles-caption svelte-ovfyp5"),z(t,"mobile",e[3])},m(e,r){k(e,t,r),A(t,i),a.m(i,null)},p(e,s){n===(n=r(e))&&a?a.p(e,s):(a.d(1),a=n(e),a&&(a.c(),a.m(i,null))),8&s&&z(t,"mobile",e[3])},d(e){e&&L(t),a.d()}}}function Ch(e){let t,i=Se(e[1]),r=[];for(let t=0;t<i.length;t+=1)r[t]=Rh(Eh(e,i,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=N()},m(e,i){for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,i);k(e,t,i)},p(e,n){if(18&n){let a;for(i=Se(e[1]),a=0;a<i.length;a+=1){let s=Eh(e,i,a);r[a]?r[a].p(s,n):(r[a]=Rh(s),r[a].c(),r[a].m(t.parentNode,t))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},d(e){e&&L(t),R(r,e)}}}function kh(e){let t,i,r=Se(e[6]),n=[];for(let t=0;t<r.length;t+=1)n[t]=Oh(xh(e,r,t));return{c(){t=P("span"),i=P("span");for(let e=0;e<n.length;e+=1)n[e].c();U(i,"class","caption-segment svelte-ovfyp5"),H(i,"font-size",e[4]+"px"),U(t,"class","caption-line svelte-ovfyp5")},m(e,r){k(e,t,r),A(t,i);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(i,null)},p(e,t){if(68&t){let a;for(r=Se(e[6]),a=0;a<r.length;a+=1){let s=xh(e,r,a);n[a]?n[a].p(s,t):(n[a]=Oh(s),n[a].c(),n[a].m(i,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=r.length}16&t&&H(i,"font-size",e[4]+"px")},d(e){e&&L(t),R(n,e)}}}function Lh(e){let t,i,r,n=Pt("subtitles_auto_caption")+"";return{c(){t=P("span"),i=P("span"),r=M(n),U(i,"class","caption-segment svelte-ovfyp5"),H(i,"font-size",e[4]+"px"),U(t,"class","caption-line svelte-ovfyp5")},m(e,n){k(e,t,n),A(t,i),A(i,r)},p(e,t){16&t&&H(i,"font-size",e[4]+"px")},d(e){e&&L(t)}}}function Rh(e){let t,i,r,n,a=e[16]+"";return{c(){t=P("span"),i=P("span"),r=M(a),n=I(),U(i,"class","caption-segment svelte-ovfyp5"),H(i,"font-size",e[4]+"px"),U(t,"class","caption-line svelte-ovfyp5")},m(e,a){k(e,t,a),A(t,i),A(i,r),A(t,n)},p(e,t){2&t&&a!==(a=e[16]+"")&&j(r,a),16&t&&H(i,"font-size",e[4]+"px")},d(e){e&&L(t)}}}function Ph(e){let t,i=e[16]+"";return{c(){t=M(i)},m(e,i){k(e,t,i)},p(e,r){64&r&&i!==(i=e[16]+"")&&j(t,i)},d(e){e&&L(t)}}}function Oh(e){let t,i=(!e[17]||e[17]<=e[2])&&Ph(e);return{c(){i&&i.c(),t=N()},m(e,r){i&&i.m(e,r),k(e,t,r)},p(e,r){!e[17]||e[17]<=e[2]?i?i.p(e,r):(i=Ph(e),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d(e){e&&L(t),i&&i.d(e)}}}function Mh(e){let t,i=e[1].length>0&&Ah(e);return{c(){t=P("div"),i&&i.c(),U(t,"class","subtitles-container svelte-ovfyp5"),z(t,"shifted",e[0]),z(t,"auto",e[5]&&!e[8])},m(e,r){k(e,t,r),i&&i.m(t,null)},p(e,[r]){e[1].length>0?i?i.p(e,r):(i=Ah(e),i.c(),i.m(t,null)):i&&(i.d(1),i=null),1&r&&z(t,"shifted",e[0]),288&r&&z(t,"auto",e[5]&&!e[8])},i:o,o,d(e){e&&L(t),i&&i.d()}}}function Ih(e,t,i){let r,n,{shifted:a}=t,{captions:s}=t,{position:o}=t,{playerSize:l}=t,{isMobile:u=!1}=t,c=et(),d=Oe(),p=c.state.currentSubtitle$;v(e,p,(e=>i(12,r=e)));let h,f,m,g,b,y=c.state.isAutoSubtitleCaptionVisible$;return v(e,y,(e=>i(8,n=e))),Q((()=>{b=window.setTimeout((()=>{y.set(!1)}),d.autoSubtitlesTimeout)})),Y((()=>{window.clearTimeout(b)})),e.$$set=e=>{"shifted"in e&&i(0,a=e.shifted),"captions"in e&&i(1,s=e.captions),"position"in e&&i(2,o=e.position),"playerSize"in e&&i(11,l=e.playerSize),"isMobile"in e&&i(3,u=e.isMobile)},e.$$.update=()=>{if(2048&e.$$.dirty){let e=.02*l.width;i(4,h=e<=d.minSubtitlesFontSize?d.minSubtitlesFontSize:e)}2&e.$$.dirty&&i(5,f=s.some((e=>"timestamp"===e.type))),2&e.$$.dirty&&i(6,m=s.reduce(((e,{type:t,value:i})=>("timestamp"===t?e.push({timeAppeared:Number(i),value:""}):0===e.length?e.push({value:String(i)}):e[e.length-1].value=String(i),e)),[])),4096&e.$$.dirty&&i(7,g=!!r.isAuto)},[a,s,o,u,h,f,m,g,n,p,y,l,r]}var Nh=class extends Le{constructor(e){super(),Ce(this,e,Ih,Mh,h,{shifted:0,captions:1,position:2,playerSize:11,isMobile:3},wh)}};function Vh(e){C(e,"svelte-raurnb",".wrapper.svelte-raurnb{height:100%;background-position:center;background-size:contain;background-repeat:no-repeat;display:flex;align-items:center;justify-content:center;font-size:16px;flex-direction:column}.wrapper.bgCover.svelte-raurnb{background-size:cover}.icon_wrapper.svelte-raurnb{display:flex;flex-direction:column;align-items:center;width:400px}.icon.svelte-raurnb{width:50px;height:50px}.text.svelte-raurnb{margin-top:20px}")}function Dh(e){let t,i,r;return{c(){t=P("div"),i=M("Видео воспроизводится на "),r=M(e[1]),U(t,"class","text svelte-raurnb")},m(e,n){k(e,t,n),A(t,i),A(t,r)},p(e,t){2&t&&j(r,e[1])},d(e){e&&L(t)}}}function Bh(e){let t,i,r,n,a,s,l=e[1]&&Dh(e);return{c(){t=P("div"),i=P("div"),i.innerHTML='<svg class="icon svelte-raurnb" width="22" height="22" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2a9 9 0 0 1 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" fill="#fff"></path><path d="M0 0h24v24H0z"></path></g></svg>',r=I(),l&&l.c(),U(i,"class","icon_wrapper svelte-raurnb"),U(t,"class","wrapper svelte-raurnb"),U(t,"style",n=`background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('${e[0]||""}')`),z(t,"bgCover",e[2].features.previewNoEmptySpace)},m(n,o){k(n,t,o),A(t,i),A(t,r),l&&l.m(t,null),a||(s=V(t,"click",e[3]),a=!0)},p(e,[i]){e[1]?l?l.p(e,i):(l=Dh(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null),1&i&&n!==(n=`background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('${e[0]||""}')`)&&U(t,"style",n)},i:o,o,d(e){e&&L(t),l&&l.d(),a=!1,s()}}}function Uh(e,t,i){let{thumbUrl:r}=t,{chromecastDeviceName:n}=t,a=Oe();return e.$$set=e=>{"thumbUrl"in e&&i(0,r=e.thumbUrl),"chromecastDeviceName"in e&&i(1,n=e.chromecastDeviceName)},[r,n,a,function(t){J.call(this,e,t)}]}var Fh=class extends Le{constructor(e){super(),Ce(this,e,Uh,Bh,h,{thumbUrl:0,chromecastDeviceName:1},Vh)}};function jh(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"200"},{height:"200"},{"aria-hidden":"true"},{"data-testid":"error-icon"},{viewBox:"460 190 130 90"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"fill-rule","evenodd"),U(i,"d","M460 193.998a3.997 3.997 0 0 1 3.997-3.998h122.006a4.003 4.003 0 0 1 3.997 3.998v82.004a3.997 3.997 0 0 1-3.997 3.998H463.997a4.003 4.003 0 0 1-3.997-3.998zm6 2.993c0-.546.45-.99.99-.99h4.02c.546 0 .99.45.99.99v4.02c0 .546-.45.99-.99.99h-4.02a.995.995 0 0 1-.99-.99zm0 12c0-.546.45-.99.99-.99h4.02c.546 0 .99.45.99.99v4.02c0 .546-.45.99-.99.99h-4.02a.995.995 0 0 1-.99-.99zm0 12c0-.546.45-.99.99-.99h4.02c.546 0 .99.45.99.99v4.02c0 .546-.45.99-.99.99h-4.02a.995.995 0 0 1-.99-.99zm0 12c0-.546.45-.99.99-.99h4.02c.546 0 .99.45.99.99v4.02c0 .546-.45.99-.99.99h-4.02a.995.995 0 0 1-.99-.99zm0 12c0-.546.45-.99.99-.99h4.02c.546 0 .99.45.99.99v4.02c0 .546-.45.99-.99.99h-4.02a.995.995 0 0 1-.99-.99zm0 12c0-.546.45-.99.99-.99h4.02c.546 0 .99.45.99.99v4.02c0 .546-.45.99-.99.99h-4.02a.995.995 0 0 1-.99-.99zm0 12c0-.546.45-.99.99-.99h4.02c.546 0 .99.45.99.99v4.02c0 .546-.45.99-.99.99h-4.02a.995.995 0 0 1-.99-.99zm112-72c0-.546.45-.99.99-.99h4.02c.546 0 .99.45.99.99v4.02c0 .546-.45.99-.99.99h-4.02a.995.995 0 0 1-.99-.99zm0 12c0-.546.45-.99.99-.99h4.02c.546 0 .99.45.99.99v4.02c0 .546-.45.99-.99.99h-4.02a.995.995 0 0 1-.99-.99zm0 12c0-.546.45-.99.99-.99h4.02c.546 0 .99.45.99.99v4.02c0 .546-.45.99-.99.99h-4.02a.995.995 0 0 1-.99-.99zm0 12c0-.546.45-.99.99-.99h4.02c.546 0 .99.45.99.99v4.02c0 .546-.45.99-.99.99h-4.02a.995.995 0 0 1-.99-.99zm0 12c0-.546.45-.99.99-.99h4.02c.546 0 .99.45.99.99v4.02c0 .546-.45.99-.99.99h-4.02a.995.995 0 0 1-.99-.99zm0 12c0-.546.45-.99.99-.99h4.02c.546 0 .99.45.99.99v4.02c0 .546-.45.99-.99.99h-4.02a.995.995 0 0 1-.99-.99zm0 12c0-.546.45-.99.99-.99h4.02c.546 0 .99.45.99.99v4.02c0 .546-.45.99-.99.99h-4.02a.995.995 0 0 1-.99-.99zM507 232a6 6 0 1 0 0-12 6 6 0 0 0 0 12m36 0a6 6 0 1 0 0-12 6 6 0 0 0 0 12m-18.05 15c6.05 0 11.624 4.446 11.944 4.65 2.106 1.35 3.252.772 3.957.156s1.15-2.806-1.044-4.657c-1.735-1.48-5.806-5.16-14.856-5.15s-12.95 3.5-14.792 5.185c-1.84 1.685-2.288 3.498-.973 4.657s2.315 1.158 4.357-.327c-.007.007 5.357-4.515 11.408-4.515z"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"200"},{height:"200"},{"aria-hidden":"true"},{"data-testid":"error-icon"},{viewBox:"460 190 130 90"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function Hh(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var zh=class extends Le{constructor(e){super(),Ce(this,e,Hh,jh,h,{})}};function qh(e){C(e,"svelte-13zpvm8",".container.svelte-13zpvm8{position:absolute;top:0;bottom:0;left:0;right:0;background:#000;display:flex;align-items:center;justify-content:center}")}function Wh(e){let t,i,r;return i=new zh({}),{c(){t=P("div"),Ee(i.$$.fragment),U(t,"class","container svelte-13zpvm8")},m(e,n){k(e,t,n),xe(i,t,null),r=!0},p:o,i(e){r||(be(i.$$.fragment,e),r=!0)},o(e){ye(i.$$.fragment,e),r=!1},d(e){e&&L(t),Ae(i)}}}var Gh=class extends Le{constructor(e){super(),Ce(this,e,null,Wh,h,{},qh)}};function Qh(e){C(e,"svelte-1xnh9dd",".container.svelte-1xnh9dd.svelte-1xnh9dd{position:absolute;top:0;bottom:0;left:0;right:0;background-position:center;background-size:contain;background-repeat:no-repeat;cursor:pointer;transition:opacity 0.2s, visibility 0.2s;will-change:opacity}.container.hidden.svelte-1xnh9dd.svelte-1xnh9dd{opacity:0;visibility:hidden}.container.bgCover.svelte-1xnh9dd.svelte-1xnh9dd{background-size:cover}.playButton.svelte-1xnh9dd.svelte-1xnh9dd{position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;width:var(--big-play-size);height:var(--big-play-size);display:flex;align-items:center;justify-content:center}.playButtonBackground.svelte-1xnh9dd.svelte-1xnh9dd{position:absolute;top:0;bottom:0;left:0;right:0;border-radius:var(--big-play-radius);background-color:var(--big-play-bg-color);transition:background 0.2s, transform 0.2s;transition-timing-function:ease-out;will-change:background, transform}.container.svelte-1xnh9dd:hover .playButtonBackground.svelte-1xnh9dd{background-color:var(--big-play-hover-bg-color);transform:scale(1.15)}.playButton.svelte-1xnh9dd svg{transform:scale(2)}")}function Yh(e){let t,i,r,n,a,s,o,l,u,c;return a=new Du({}),{c(){t=P("div"),i=P("div"),r=P("div"),n=I(),Ee(a.$$.fragment),U(r,"class","playButtonBackground svelte-1xnh9dd"),U(i,"class","playButton svelte-1xnh9dd"),U(i,"tabindex","0"),U(i,"role","button"),U(i,"aria-label",s=Pt("tooltip_play")),U(t,"class","container svelte-1xnh9dd"),U(t,"style",o=`background-color: #222; background-image: url('${e[0]||""}')`),z(t,"hidden",e[1]),z(t,"bgCover",e[4].features.previewNoEmptySpace)},m(s,o){k(s,t,o),A(t,i),A(i,r),A(i,n),xe(a,i,null),l=!0,u||(c=[V(i,"keydown",e[3]),V(t,"click",B((function(){p(e[2])&&e[2].apply(this,arguments)})))],u=!0)},p(i,[r]){e=i,(!l||1&r&&o!==(o=`background-color: #222; background-image: url('${e[0]||""}')`))&&U(t,"style",o),(!l||2&r)&&z(t,"hidden",e[1])},i(e){l||(be(a.$$.fragment,e),l=!0)},o(e){ye(a.$$.fragment,e),l=!1},d(e){e&&L(t),Ae(a),u=!1,d(c)}}}function Kh(e,t,i){let{thumbUrl:r}=t,{hidden:n}=t,{startVideo:a}=t,s=et(),o=Oe(),l=s.ui.startedByKeyboard$;return e.$$set=e=>{"thumbUrl"in e&&i(0,r=e.thumbUrl),"hidden"in e&&i(1,n=e.hidden),"startVideo"in e&&i(2,a=e.startVideo)},[r,n,a,e=>{let t=e.code;["Enter","Space"].includes(t)&&(e.stopPropagation(),e.preventDefault(),l.set(!0),a())},o]}var Xh=class extends Le{get handlePressKey(){return this.$$.ctx[3]}constructor(e){super(),Ce(this,e,Kh,Yh,h,{thumbUrl:0,hidden:1,startVideo:2,handlePressKey:3},Qh)}};function Zh(e){C(e,"svelte-1bcvcf2",".title.svelte-1bcvcf2{position:absolute;pointer-events:none;left:0;top:0;width:100%;height:var(--controls-gradient-height);font-size:15px;color:var(--white);box-sizing:border-box;padding:18px 20px 10px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;transition-property:visibility, transform, opacity;transition-duration:var(--controls-transition-duration);transition-timing-function:var(--controls-transition-fn);will-change:transform, opacity;background:linear-gradient(\n      0deg,\n      rgba(0, 0, 0, 0) 0%,\n      rgba(0, 0, 0, 0.02) 19%,\n      rgba(0, 0, 0, 0.10) 34%,\n      rgba(0, 0, 0, 0.40) 60%,\n      rgba(0, 0, 0, 0.60) 100%\n    )}.hidden.svelte-1bcvcf2{visibility:hidden;transform:translateY(calc(var(--controls-gradient-height) * -1));opacity:0}")}function Jh(e){let t,i;return{c(){t=P("div"),i=M(e[0]),U(t,"class","title svelte-1bcvcf2"),z(t,"hidden",e[1])},m(e,r){k(e,t,r),A(t,i)},p(e,[r]){1&r&&j(i,e[0]),2&r&&z(t,"hidden",e[1])},i:o,o,d(e){e&&L(t)}}}function ef(e,t,i){let{title:r=""}=t,{isHidden:n=!1}=t;return e.$$set=e=>{"title"in e&&i(0,r=e.title),"isHidden"in e&&i(1,n=e.isHidden)},[r,n]}var tf=class extends Le{constructor(e){super(),Ce(this,e,ef,Jh,h,{title:0,isHidden:1},Zh)}};function rf(e){C(e,"svelte-1qpxtfg",".timer__container.svelte-1qpxtfg{display:flex;align-items:flex-start;justify-content:center}.cell.svelte-1qpxtfg{display:flex;flex-direction:column;align-items:center;width:62px}.cell__value.svelte-1qpxtfg{font-size:48px;line-height:1.2;font-weight:700}.cell__unit.svelte-1qpxtfg{font-size:14px;line-height:1.2;font-weight:400}.timer__points.svelte-1qpxtfg{display:inline-block;margin:0 8px;font-size:42px;line-height:1.2;font-weight:600}")}function nf(e){let t,i,r,n,a,s,o;return{c(){t=P("div"),i=P("span"),r=M(e[0]),n=I(),a=P("span"),a.textContent=`${Pt("waiting_live_day_value")}`,s=I(),o=P("span"),o.textContent=`${Pt("waiting_live_colon")}`,U(i,"class","cell__value svelte-1qpxtfg"),U(a,"class","cell__unit svelte-1qpxtfg"),U(t,"class","timer__cell cell svelte-1qpxtfg"),U(o,"class","timer__points svelte-1qpxtfg")},m(e,l){k(e,t,l),A(t,i),A(i,r),A(t,n),A(t,a),k(e,s,l),k(e,o,l)},p(e,t){1&t&&j(r,e[0])},d(e){e&&(L(t),L(s),L(o))}}}function af(e){let t,i,r,n,a,s,o;return{c(){t=P("div"),i=P("span"),r=M(e[1]),n=I(),a=P("span"),a.textContent=`${Pt("waiting_live_hour_value")}`,s=I(),o=P("span"),o.textContent=`${Pt("waiting_live_colon")}`,U(i,"class","cell__value svelte-1qpxtfg"),U(a,"class","cell__unit svelte-1qpxtfg"),U(t,"class","timer__cell cell svelte-1qpxtfg"),U(o,"class","timer__points svelte-1qpxtfg")},m(e,l){k(e,t,l),A(t,i),A(i,r),A(t,n),A(t,a),k(e,s,l),k(e,o,l)},p(e,t){2&t&&j(r,e[1])},d(e){e&&(L(t),L(s),L(o))}}}function sf(e){let t,i,r,n,a,s,o;return{c(){t=P("div"),i=P("span"),r=M(e[2]),n=I(),a=P("span"),a.textContent=`${Pt("waiting_live_minute_value")}`,s=I(),o=P("span"),o.textContent=`${Pt("waiting_live_colon")}`,U(i,"class","cell__value svelte-1qpxtfg"),U(a,"class","cell__unit svelte-1qpxtfg"),U(t,"class","timer__cell cell svelte-1qpxtfg"),U(o,"class","timer__points svelte-1qpxtfg")},m(e,l){k(e,t,l),A(t,i),A(i,r),A(t,n),A(t,a),k(e,s,l),k(e,o,l)},p(e,t){4&t&&j(r,e[2])},d(e){e&&(L(t),L(s),L(o))}}}function of(e){let t,i,r,n,a;return{c(){t=P("div"),i=P("span"),r=M(e[3]),n=I(),a=P("span"),a.textContent=`${Pt("waiting_live_second_value")}`,U(i,"class","cell__value svelte-1qpxtfg"),U(a,"class","cell__unit svelte-1qpxtfg"),U(t,"class","timer__cell cell svelte-1qpxtfg")},m(e,s){k(e,t,s),A(t,i),A(i,r),A(t,n),A(t,a)},p(e,t){8&t&&j(r,e[3])},d(e){e&&L(t)}}}function lf(e){let t,i,r,n,a=e[0]&&nf(e),s=e[1]&&af(e),l=e[2]&&sf(e),u=e[3]&&of(e);return{c(){t=P("div"),a&&a.c(),i=I(),s&&s.c(),r=I(),l&&l.c(),n=I(),u&&u.c(),U(t,"class","timer__container svelte-1qpxtfg")},m(e,o){k(e,t,o),a&&a.m(t,null),A(t,i),s&&s.m(t,null),A(t,r),l&&l.m(t,null),A(t,n),u&&u.m(t,null)},p(e,[o]){e[0]?a?a.p(e,o):(a=nf(e),a.c(),a.m(t,i)):a&&(a.d(1),a=null),e[1]?s?s.p(e,o):(s=af(e),s.c(),s.m(t,r)):s&&(s.d(1),s=null),e[2]?l?l.p(e,o):(l=sf(e),l.c(),l.m(t,n)):l&&(l.d(1),l=null),e[3]?u?u.p(e,o):(u=of(e),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},i:o,o,d(e){e&&L(t),a&&a.d(),s&&s.d(),l&&l.d(),u&&u.d()}}}function uf(e,t,i){let r,n,a,s,o,{startTime:l}=t,{onTimerOver:u}=t,c=e=>String(e).padStart(2,"0"),d=()=>{let e=Math.floor(Date.now()/1e3),t=l-e;(e=>{let t=Math.floor(e/86400);t&&(e-=86400*t,i(0,r=c(t)));let o=Math.floor(e/3600);i(1,n=c(o));let l=Math.floor(e/60)%60;i(2,a=c(l)),i(3,s=c(e%60))})(t),t>=1?o=requestAnimationFrame(d):u()};return Q((()=>{o=requestAnimationFrame(d)})),Y((()=>{cancelAnimationFrame(o)})),e.$$set=e=>{"startTime"in e&&i(4,l=e.startTime),"onTimerOver"in e&&i(5,u=e.onTimerOver)},[r,n,a,s,l,u]}var cf=class extends Le{constructor(e){super(),Ce(this,e,uf,lf,h,{startTime:4,onTimerOver:5},rf)}};function df(e){let t,i,r,n,a,s,o=e[2].default,u=b(o,e,e[1],null),c=[{xmlns:"http://www.w3.org/2000/svg"},{"aria-hidden":"true"},{"data-testid":"podcast-icon"},{style:"shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd;width:100%;height:100%"},{viewBox:"0 0 400 400"},{role:"img"},e[0]],d={};for(let e=0;e<c.length;e+=1)d=l(d,c[e]);return{c(){t=O("svg"),u&&u.c(),i=O("path"),r=O("path"),n=O("path"),a=O("path"),U(i,"fill","#fefffe"),U(i,"d","M179.5-.5h40q127.56 18.67 171.5 140 5.724 19.896 8.5 40v40q-5.549 51.6-35.5 94-9.626-12.614-24.5-18.5-1.526-1.574-.5-3.5 39.742-61.7 23-133Q329.24 50.25 217.5 33 112.126 26.56 55 114.5q-40.395 74.102-9 152a152.3 152.3 0 0 0 14 25q1.026 1.926-.5 3.5-14.874 5.886-24.5 18.5-29.95-42.4-35.5-94v-40Q18.17 51.94 139.5 8q19.896-5.724 40-8.5"),H(i,"opacity",".965"),U(r,"fill","#fefffe"),U(r,"d","M183.5 63.5q86.294-5.475 133.5 66 32.442 60.138 8 124a186.7 186.7 0 0 1-17.5 29.5 633 633 0 0 1-38-7q54.668-57.264 19.5-128.5Q252.733 91.244 185.5 97q-74.25 14.25-88.5 88.5-5.916 53.38 32.5 90.5a1150 1150 0 0 0-36 7.5q-2.294-.044-3.5-2-43.947-63.646-16-136 32.799-70.278 109.5-82"),H(r,"opacity",".965"),U(n,"fill","#fefffe"),U(n,"d","M187.5 127.5q66.786-4.422 83.5 60 5.146 66.825-59.5 83.5-66.825 5.146-83.5-59.5-4.844-66.856 59.5-84"),H(n,"opacity",".985"),U(a,"fill","#fefffe"),U(a,"d","M219.5 399.5h-40q-67.453-7.982-117-54a31.7 31.7 0 0 1 3.5-10q8.539-9.646 20.5-14.5 54.786-19.435 113-17.5 58.214-1.935 113 17.5 11.962 4.854 20.5 14.5a31.7 31.7 0 0 1 3.5 10q-49.547 46.018-117 54"),H(a,"opacity",".986"),F(t,d)},m(e,o){k(e,t,o),u&&u.m(t,null),A(t,i),A(t,r),A(t,n),A(t,a),s=!0},p(e,[i]){u&&u.p&&(!s||2&i)&&$(u,o,e,e[1],s?S(o,e[1],i,null):_(e[1]),null),F(t,d=_e(c,[{xmlns:"http://www.w3.org/2000/svg"},{"aria-hidden":"true"},{"data-testid":"podcast-icon"},{style:"shape-rendering:geometricPrecision;text-rendering:geometricPrecision;image-rendering:optimizeQuality;fill-rule:evenodd;clip-rule:evenodd;width:100%;height:100%"},{viewBox:"0 0 400 400"},{role:"img"},1&i&&e[0]]))},i(e){s||(be(u,e),s=!0)},o(e){ye(u,e),s=!1},d(e){e&&L(t),u&&u.d(e)}}}function pf(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var hf=class extends Le{constructor(e){super(),Ce(this,e,pf,df,h,{})}};function ff(e){C(e,"svelte-15pewff",".waiting-container.svelte-15pewff{position:absolute;top:0;left:0;width:100%;height:100%;background-color:var(--black);background-position:center;background-size:cover;background-repeat:no-repeat}.waiting-container.svelte-15pewff::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.56);z-index:1}.upcoming.svelte-15pewff{position:absolute;top:50%;left:0;width:100%;transform:translateY(-50%);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:0}.upcoming-icon.svelte-15pewff{width:20%;max-width:200px;margin-bottom:20px}.upcoming__title.svelte-15pewff{font-size:14px;line-height:1.2;font-weight:400}.waiting-timer.svelte-15pewff{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);z-index:2}.timer.svelte-15pewff{display:flex;flex-direction:column;align-items:center;justify-content:center}.timer__title.svelte-15pewff{display:inline-block;vertical-align:middle;margin-bottom:12px;font-size:14px;line-height:1.2;font-weight:400}")}function mf(e){let t,i,r,n,a;return n=new cf({props:{startTime:e[1]||0,onTimerOver:e[3]}}),{c(){t=P("div"),i=P("span"),i.textContent=`${Pt("waiting_live_timer_title")}`,r=I(),Ee(n.$$.fragment),U(i,"class","timer__title svelte-15pewff"),U(t,"class","waiting-timer timer svelte-15pewff")},m(e,s){k(e,t,s),A(t,i),A(t,r),xe(n,t,null),a=!0},p(e,t){let i={};2&t&&(i.startTime=e[1]||0),4&t&&(i.onTimerOver=e[3]),n.$set(i)},i(e){a||(be(n.$$.fragment,e),a=!0)},o(e){ye(n.$$.fragment,e),a=!1},d(e){e&&L(t),Ae(n)}}}function gf(e){let t,i,r,n,a,s;return r=new hf({}),{c(){t=P("div"),i=P("div"),Ee(r.$$.fragment),n=I(),a=P("span"),a.textContent=`${Pt("waiting_live_upcoming_title")}`,U(i,"class","upcoming-icon svelte-15pewff"),U(a,"class","upcoming__title svelte-15pewff"),U(t,"class","upcoming svelte-15pewff")},m(e,o){k(e,t,o),A(t,i),xe(r,i,null),A(t,n),A(t,a),s=!0},p:o,i(e){s||(be(r.$$.fragment,e),s=!0)},o(e){ye(r.$$.fragment,e),s=!1},d(e){e&&L(t),Ae(r)}}}function vf(e){let t,i,r,n,a,s=[gf,mf],o=[];function l(e,t){return e[2]?0:1}return i=l(e),r=o[i]=s[i](e),{c(){t=P("div"),r.c(),U(t,"class","waiting-container svelte-15pewff"),U(t,"style",n=`background-image: url(${e[2]?"":e[0]})`)},m(e,r){k(e,t,r),o[i].m(t,null),a=!0},p(e,[u]){let c=i;i=l(e),i===c?o[i].p(e,u):(ge(),ye(o[c],1,1,(()=>{o[c]=null})),ve(),r=o[i],r?r.p(e,u):(r=o[i]=s[i](e),r.c()),be(r,1),r.m(t,null)),(!a||5&u&&n!==(n=`background-image: url(${e[2]?"":e[0]})`))&&U(t,"style",n)},i(e){a||(be(r),a=!0)},o(e){ye(r),a=!1},d(e){e&&L(t),o[i].d()}}}function bf(e,t,i){let r,{thumbUrl:n}=t,{startTime:a}=t;return e.$$set=e=>{"thumbUrl"in e&&i(0,n=e.thumbUrl),"startTime"in e&&i(1,a=e.startTime)},e.$$.update=()=>{2&e.$$.dirty&&i(2,r=void 0===a||a<Math.floor(Date.now()/1e3))},[n,a,r,()=>i(2,r=!0)]}var yf=class extends Le{constructor(e){super(),Ce(this,e,bf,vf,h,{thumbUrl:0,startTime:1},ff)}};function Sf(e){C(e,"svelte-xvqwsa",".waiting-container.svelte-xvqwsa{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:var(--black);background-position:center;background-size:cover;background-repeat:no-repeat}.waiting-container.svelte-xvqwsa::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.4);backdrop-filter:blur(10px)}.waiting-caption.svelte-xvqwsa{position:relative;display:flex;flex-direction:column;align-items:center}.waiting-title.svelte-xvqwsa{margin:0;padding:20px;text-align:center;font-size:20px;line-height:1.2;font-weight:400}")}function $f(e){let t,i,r,n,a,s,o,l;return r=new hn({props:{style:"position: static; transform: translate(0, 0)"}}),{c(){t=P("div"),i=P("div"),Ee(r.$$.fragment),n=I(),a=P("p"),s=M(e[1]),U(a,"class","waiting-title svelte-xvqwsa"),U(i,"class","waiting-caption svelte-xvqwsa"),U(t,"class","waiting-container svelte-xvqwsa"),U(t,"style",o=`background-image: url('${e[0]}')`)},m(e,o){k(e,t,o),A(t,i),xe(r,i,null),A(i,n),A(i,a),A(a,s),l=!0},p(e,[i]){(!l||2&i)&&j(s,e[1]),(!l||1&i&&o!==(o=`background-image: url('${e[0]}')`))&&U(t,"style",o)},i(e){l||(be(r.$$.fragment,e),l=!0)},o(e){ye(r.$$.fragment,e),l=!1},d(e){e&&L(t),Ae(r)}}}function _f(e,t,i){let r,{thumbUrl:n=""}=t,{kind:a}=t;return e.$$set=e=>{"thumbUrl"in e&&i(0,n=e.thumbUrl),"kind"in e&&i(2,a=e.kind)},e.$$.update=()=>{if(4&e.$$.dirty){let e={recover:Pt("waiting_live_recover_title"),record:Pt("waiting_record_title")};i(1,r=e[a]||"")}},[n,r,a]}var Tf=class extends Le{constructor(e){super(),Ce(this,e,_f,$f,h,{thumbUrl:0,kind:2},Sf)}},wf=(e,t)=>String(t.findIndex((t=>t.id===e.id))+1),Ef=(e,t)=>{if(!e)return"";let i,{language:r,label:n}=e;if("und"===r?i=void 0:r&&(i=Nl(r)??r),n&&r&&i){let a=t.filter((e=>e.label===n&&e.language===r));if(1===a.length)return Pt("audio_stream_display_language_label",{language:i,label:n});{let t=wf(e,a);return Pt("audio_stream_display_language_label_index",{language:i,label:n,index:t})}}if(n){let i=t.filter((e=>e.label===n));if(1===i.length)return n;{let t=wf(e,i);return Pt("audio_stream_display_label_index",{label:n,index:t})}}if(r&&i){let n=t.filter((e=>e.language===r));if(1===n.length)return i;{let t=wf(e,n);return Pt("audio_stream_display_language_index",{language:i,index:t})}}let a=wf(e,t);return Pt("audio_stream_display_unknown",{index:a})};function xf(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"16"},{height:"16"},{"aria-hidden":"true"},{"data-testid":"check-mark-icon"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"d","M6 10.2 3.5 7.7a.99.99 0 0 0-1.4 1.4l3.2 3.2a1 1 0 0 0 1.4 0l7.6-7.6a.99.99 0 0 0-1.4-1.4z"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"16"},{height:"16"},{"aria-hidden":"true"},{"data-testid":"check-mark-icon"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function Af(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var Cf=class extends Le{constructor(e){super(),Ce(this,e,Af,xf,h,{})}};function kf(e){C(e,"svelte-124aexk",".select-icon.svelte-124aexk{margin-right:auto;padding-right:12px;opacity:0.9;position:relative;top:3px}")}function Lf(e){let t,i,r;return i=new Cf({}),{c(){t=P("div"),Ee(i.$$.fragment),U(t,"class","select-icon svelte-124aexk")},m(e,n){k(e,t,n),xe(i,t,null),r=!0},i(e){r||(be(i.$$.fragment,e),r=!0)},o(e){ye(i.$$.fragment,e),r=!1},d(e){e&&L(t),Ae(i)}}}function Rf(e){let t,i,r=(e[1].label??e[1].value)+"";return{c(){t=P("div"),i=M(r),U(t,"class","menu-item-value"),z(t,"submenu-value-mobile",e[0])},m(e,r){k(e,t,r),A(t,i)},p(e,n){2&n&&r!==(r=(e[1].label??e[1].value)+"")&&j(i,r),1&n&&z(t,"submenu-value-mobile",e[0])},i:o,o,d(e){e&&L(t)}}}function Pf(e){let t,i,r,n=[e[1].valueComponentParams??{}];var a=e[1].valueComponent;function s(e,t){let i={};for(let e=0;e<n.length;e+=1)i=l(i,n[e]);return void 0!==t&&2&t&&(i=l(i,_e(n,[Te(e[1].valueComponentParams??{})]))),{props:i}}return a&&(t=q(a,s(e))),{c(){t&&Ee(t.$$.fragment),i=N()},m(e,n){t&&xe(t,e,n),k(e,i,n),r=!0},p(e,r){if(2&r&&a!==(a=e[1].valueComponent)){if(t){ge();let e=t;ye(e.$$.fragment,1,0,(()=>{Ae(e,1)})),ve()}a?(t=q(a,s(e,r)),Ee(t.$$.fragment),be(t.$$.fragment,1),xe(t,i.parentNode,i)):t=null}else if(a){let i=2&r?_e(n,[Te(e[1].valueComponentParams??{})]):{};t.$set(i)}},i(e){r||(t&&be(t.$$.fragment,e),r=!0)},o(e){t&&ye(t.$$.fragment,e),r=!1},d(e){e&&L(i),t&&Ae(t,e)}}}function Of(e){let t,i,r,n,a,s,o,l,u,c=e[1].selected&&Lf(),p=[Pf,Rf],h=[];function f(e,t){return e[1].valueComponent?0:1}return r=f(e),n=h[r]=p[r](e),{c(){t=P("li"),c&&c.c(),i=I(),n.c(),U(t,"class","item"),U(t,"data-value",a=e[1].dataValue??e[1].value),U(t,"role","menuitem"),U(t,"tabindex","0"),U(t,"aria-label",s=e[1].ariaLabel??e[1].label??e[1].value.toString()),z(t,"mobile",e[0])},m(n,a){k(n,t,a),c&&c.m(t,null),A(t,i),h[r].m(t,null),o=!0,l||(u=[V(t,"click",B(e[4])),V(t,"keydown",e[5])],l=!0)},p(e,[l]){e[1].selected?c?2&l&&be(c,1):(c=Lf(),c.c(),be(c,1),c.m(t,i)):c&&(ge(),ye(c,1,1,(()=>{c=null})),ve());let u=r;r=f(e),r===u?h[r].p(e,l):(ge(),ye(h[u],1,1,(()=>{h[u]=null})),ve(),n=h[r],n?n.p(e,l):(n=h[r]=p[r](e),n.c()),be(n,1),n.m(t,null)),(!o||2&l&&a!==(a=e[1].dataValue??e[1].value))&&U(t,"data-value",a),(!o||2&l&&s!==(s=e[1].ariaLabel??e[1].label??e[1].value.toString()))&&U(t,"aria-label",s),(!o||1&l)&&z(t,"mobile",e[0])},i(e){o||(be(c),be(n),o=!0)},o(e){ye(c),ye(n),o=!1},d(e){e&&L(t),c&&c.d(),h[r].d(),l=!1,d(u)}}}function Mf(e,t,i){let{isMobile:r=!1}=t,{item:n}=t,{selectItem:a}=t,s=(e,t)=>{Gi(e,(()=>a(t)))};return e.$$set=e=>{"isMobile"in e&&i(0,r=e.isMobile),"item"in e&&i(1,n=e.item),"selectItem"in e&&i(2,a=e.selectItem)},[r,n,a,s,()=>a(n.value),e=>s(e,n.value)]}var If=class extends Le{constructor(e){super(),Ce(this,e,Mf,Of,h,{isMobile:0,item:1,selectItem:2},kf)}};function Nf(e){let t,i,r,n,a,s,l,u=e[2].label+"";return{c(){t=P("li"),i=P("div"),r=M(u),U(i,"class","menu-item-value"),z(i,"submenu-value-mobile",e[1]),U(t,"class","item"),U(t,"role","menuitem"),U(t,"tabindex","0"),U(t,"aria-label",n=e[2].ariaLabel??e[2].label),U(t,"aria-haspopup","true"),U(t,"data-testid",a=e[2].id),z(t,"mobile",e[1])},m(n,a){k(n,t,a),A(t,i),A(i,r),e[6](t),s||(l=[V(t,"click",B((function(){p(e[3])&&e[3].apply(this,arguments)}))),V(t,"keydown",(function(){p(e[4])&&e[4].apply(this,arguments)}))],s=!0)},p(s,[o]){e=s,4&o&&u!==(u=e[2].label+"")&&j(r,u),2&o&&z(i,"submenu-value-mobile",e[1]),4&o&&n!==(n=e[2].ariaLabel??e[2].label)&&U(t,"aria-label",n),4&o&&a!==(a=e[2].id)&&U(t,"data-testid",a),2&o&&z(t,"mobile",e[1])},i:o,o,d(i){i&&L(t),e[6](null),s=!1,d(l)}}}function Vf(e,t,i){let r,n,{isMobile:a=!1}=t,{item:s}=t,{openSubMenuList:o}=t,{refMenuItems:l}=t;return e.$$set=e=>{"isMobile"in e&&i(1,a=e.isMobile),"item"in e&&i(2,s=e.item),"openSubMenuList"in e&&i(5,o=e.openSubMenuList),"refMenuItems"in e&&i(0,l=e.refMenuItems)},e.$$.update=()=>{36&e.$$.dirty&&i(3,r=()=>o(s.subMenuId)),12&e.$$.dirty&&i(4,n=e=>Wi(e,r,s.getSubItemForFocus))},[l,a,s,r,n,o,function(e){te[e?"unshift":"push"]((()=>{l[s.id]=e,i(0,l)}))}]}var Df=class extends Le{constructor(e){super(),Ce(this,e,Vf,Nf,h,{isMobile:1,item:2,openSubMenuList:5,refMenuItems:0})}},Bf=100,Uf=200,Ff=300,jf=400,Hf=500,zf=600,qf=700,Wf=800,Gf=900,Qf=1e3;function Yf(e){C(e,"svelte-1mrc4z3",'.sub-menu.svelte-1mrc4z3.svelte-1mrc4z3{line-height:32px;padding-bottom:0;padding-top:42px}.sub-menu.mobile.svelte-1mrc4z3.svelte-1mrc4z3{padding-top:58px}.sub-menu.svelte-1mrc4z3 .item{padding:0 12px}.sub-menu.svelte-1mrc4z3 .item.mobile{padding:0 14px}.sub-menu.svelte-1mrc4z3 .item.header.svelte-1mrc4z3{padding-top:6px;box-sizing:border-box;width:100%;justify-content:space-between;column-gap:12px;border-bottom:var(--divider-border);position:absolute;top:0}.sub-menu[data-testid="sub-menu-quality-settings"].svelte-1mrc4z3 .header.svelte-1mrc4z3{padding-right:34px}')}function Kf(e,t,i){let r=e.slice();return r[25]=t[i],r}function Xf(e){let t,i;return t=new Df({props:{isMobile:e[2],item:e[25],openSubMenuList:e[6],refMenuItems:e[9]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};4&i&&(r.isMobile=e[2]),128&i&&(r.item=e[25]),64&i&&(r.openSubMenuList=e[6]),512&i&&(r.refMenuItems=e[9]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Zf(e){let t,i;return t=new If({props:{item:e[25],isMobile:e[2],selectItem:e[25].selectItem}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};128&i&&(r.item=e[25]),4&i&&(r.isMobile=e[2]),128&i&&(r.selectItem=e[25].selectItem),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Jf(e){let t,i,r,n,a=[Zf,Xf],s=[];function o(e,t){return"SELECT_VALUE"===e[25].type?0:"OPEN_SUB_MENU"===e[25].type?1:-1}return~(t=o(e))&&(i=s[t]=a[t](e)),{c(){i&&i.c(),r=N()},m(e,i){~t&&s[t].m(e,i),k(e,r,i),n=!0},p(e,n){let l=t;t=o(e),t===l?~t&&s[t].p(e,n):(i&&(ge(),ye(s[l],1,1,(()=>{s[l]=null})),ve()),~t?(i=s[t],i?i.p(e,n):(i=s[t]=a[t](e),i.c()),be(i,1),i.m(r.parentNode,r)):i=null)},i(e){n||(be(i),n=!0)},o(e){ye(i),n=!1},d(e){e&&L(r),~t&&s[t].d(e)}}}function em(e){let t,i,r,n,a,s,o,l,u,c,h,f,m,g;n=new yh({props:{direction:"left"}});let v=Se(e[7]),b=[];for(let t=0;t<v.length;t+=1)b[t]=Jf(Kf(e,v,t));let y=e=>ye(b[e],1,1,(()=>{b[e]=null}));return{c(){t=P("div"),i=P("ul"),r=P("li"),Ee(n.$$.fragment),a=I(),s=P("div"),o=M(e[5]),l=I();for(let e=0;e<b.length;e+=1)b[e].c();U(r,"class","item header back svelte-1mrc4z3"),U(r,"role","menuitem"),U(r,"tabindex","0"),U(r,"data-testid","return-to-settings-menu"),U(r,"aria-label",e[4]),z(r,"mobile",e[2]),U(i,"class","items"),U(i,"role","menu"),U(i,"style",u=e[15](e[10]?.clientHeight)),z(i,"mobile",e[2]),U(t,"class","sub-menu menu svelte-1mrc4z3"),U(t,"data-testid",c=`sub-menu-${e[1]}`),U(t,"style",h=`min-width: ${e[8]}px`),z(t,"desktop",!e[2]),z(t,"mobile",e[2])},m(u,c){k(u,t,c),A(t,i),A(i,r),xe(n,r,null),A(r,a),A(r,s),A(s,o),e[20](r),A(i,l);for(let e=0;e<b.length;e+=1)b[e]&&b[e].m(i,null);e[21](i),f=!0,m||(g=[V(r,"click",B((function(){p(e[3])&&e[3].apply(this,arguments)}))),V(r,"keydown",e[14]),V(i,"keydown",e[13])],m=!0)},p(n,[a]){if(e=n,(!f||32&a)&&j(o,e[5]),(!f||16&a)&&U(r,"aria-label",e[4]),(!f||4&a)&&z(r,"mobile",e[2]),708&a){let t;for(v=Se(e[7]),t=0;t<v.length;t+=1){let r=Kf(e,v,t);b[t]?(b[t].p(r,a),be(b[t],1)):(b[t]=Jf(r),b[t].c(),be(b[t],1),b[t].m(i,null))}for(ge(),t=v.length;t<b.length;t+=1)y(t);ve()}(!f||1024&a&&u!==(u=e[15](e[10]?.clientHeight)))&&U(i,"style",u),(!f||4&a)&&z(i,"mobile",e[2]),(!f||2&a&&c!==(c=`sub-menu-${e[1]}`))&&U(t,"data-testid",c),(!f||256&a&&h!==(h=`min-width: ${e[8]}px`))&&U(t,"style",h),(!f||4&a)&&z(t,"desktop",!e[2]),(!f||4&a)&&z(t,"mobile",e[2])},i(e){if(!f){be(n.$$.fragment,e);for(let e=0;e<v.length;e+=1)be(b[e]);f=!0}},o(e){ye(n.$$.fragment,e),b=b.filter(Boolean);for(let e=0;e<b.length;e+=1)ye(b[e]);f=!1},d(i){i&&L(t),Ae(n),e[20](null),R(b,i),e[21](null),m=!1,d(g)}}}function tm(e,t,i){let r,n,{id:a}=t,{parentItemId:s}=t,{isMobile:o=!1}=t,{playerControlsHeight:l=0}=t,{returnFromSubMenu:u}=t,{ariaLabelReturnFromSubMenu:c=Pt("aria_label_submenu_back")}=t,{title:d}=t,{listRef:p}=t,{closeSettingsMenu:h}=t,{openSubMenuList:f}=t,{itemIdReturnCase:m}=t,{items:g}=t,{minWidth:b}=t,{refMenuItems:y}=t,S=et(),$=S.ui.isFullscreen;v(e,$,(e=>i(23,n=e)));let _=S.ui.playerSize;v(e,_,(e=>i(22,r=e)));let T;return e.$$set=e=>{"id"in e&&i(1,a=e.id),"parentItemId"in e&&i(16,s=e.parentItemId),"isMobile"in e&&i(2,o=e.isMobile),"playerControlsHeight"in e&&i(17,l=e.playerControlsHeight),"returnFromSubMenu"in e&&i(3,u=e.returnFromSubMenu),"ariaLabelReturnFromSubMenu"in e&&i(4,c=e.ariaLabelReturnFromSubMenu),"title"in e&&i(5,d=e.title),"listRef"in e&&i(0,p=e.listRef),"closeSettingsMenu"in e&&i(18,h=e.closeSettingsMenu),"openSubMenuList"in e&&i(6,f=e.openSubMenuList),"itemIdReturnCase"in e&&i(19,m=e.itemIdReturnCase),"items"in e&&i(7,g=e.items),"minWidth"in e&&i(8,b=e.minWidth),"refMenuItems"in e&&i(9,y=e.refMenuItems)},[p,a,o,u,c,d,f,g,b,y,T,$,_,e=>{(async(e,t,{itemIdReturnCase:i,id:r},n)=>{if(Fi(e),(e=>"ArrowLeft"===e.code)(e))return Di(e),t(),void i.set(r);Bi(e)&&(Di(e),n())})(e,u,{itemIdReturnCase:m,id:s},h)},e=>{Ui(e)&&(Di(e),u(),m.set(s))},(e=0)=>o&&n?`max-height: ${Math.round(.6*r.height)}px`:o?"":`max-height: ${r.height-32-e-l}px; overflow: auto;`,s,l,h,m,function(e){te[e?"unshift":"push"]((()=>{T=e,i(10,T)}))},function(e){te[e?"unshift":"push"]((()=>{p=e,i(0,p)}))}]}var im=class extends Le{constructor(e){super(),Ce(this,e,tm,em,h,{id:1,parentItemId:16,isMobile:2,playerControlsHeight:17,returnFromSubMenu:3,ariaLabelReturnFromSubMenu:4,title:5,listRef:0,closeSettingsMenu:18,openSubMenuList:6,itemIdReturnCase:19,items:7,minWidth:8,refMenuItems:9},Yf)}};function rm(e){C(e,"svelte-1ikfjte",".value.svelte-1ikfjte{position:relative;opacity:0.7;overflow:hidden;text-overflow:ellipsis}")}function nm(e){let t,i,r;var n=e[8];return n&&(t=q(n,{})),{c(){t&&Ee(t.$$.fragment),i=N()},m(e,n){t&&xe(t,e,n),k(e,i,n),r=!0},p(e,r){if(256&r&&n!==(n=e[8])){if(t){ge();let e=t;ye(e.$$.fragment,1,0,(()=>{Ae(e,1)})),ve()}n?(t=q(n,{}),Ee(t.$$.fragment),be(t.$$.fragment,1),xe(t,i.parentNode,i)):t=null}},i(e){r||(t&&be(t.$$.fragment,e),r=!0)},o(e){t&&ye(t.$$.fragment,e),r=!1},d(e){e&&L(i),t&&Ae(t,e)}}}function am(e){let t,i;return t=new Ac({props:{icon:e[8]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};256&i&&(r.icon=e[8]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function sm(e){let t,i;return{c(){t=P("div"),i=M(e[6]),U(t,"class","value svelte-1ikfjte")},m(e,r){k(e,t,r),A(t,i)},p(e,t){64&t&&j(i,e[6])},i:o,o,d(e){e&&L(t)}}}function om(e){let t,i,r;var n=e[7];return n&&(t=q(n,{})),{c(){t&&Ee(t.$$.fragment),i=N()},m(e,n){t&&xe(t,e,n),k(e,i,n),r=!0},p(e,r){if(128&r&&n!==(n=e[7])){if(t){ge();let e=t;ye(e.$$.fragment,1,0,(()=>{Ae(e,1)})),ve()}n?(t=q(n,{}),Ee(t.$$.fragment),be(t.$$.fragment,1),xe(t,i.parentNode,i)):t=null}},i(e){r||(t&&be(t.$$.fragment,e),r=!0)},o(e){t&&ye(t.$$.fragment,e),r=!1},d(e){e&&L(i),t&&Ae(t,e)}}}function lm(e){let t,i,r,n,a,s,o,l,u,c,h,f,m,g=[am,nm],v=[];function b(e,t){return"string"==typeof e[8]?0:1}r=b(e),n=v[r]=g[r](e);let y=[om,sm],S=[];function $(e,t){return e[7]?0:1}return u=$(e),c=S[u]=y[u](e),{c(){t=P("li"),i=P("div"),n.c(),a=I(),s=P("div"),o=M(e[4]),l=I(),c.c(),U(i,"class","icon-wrapper"),U(s,"class","label"),U(t,"class","item"),U(t,"role","menuitem"),U(t,"tabindex","0"),U(t,"aria-label",e[5]),U(t,"aria-haspopup","true"),U(t,"data-testid",e[1]),z(t,"mobile",e[2])},m(n,c){k(n,t,c),A(t,i),v[r].m(i,null),A(t,a),A(t,s),A(s,o),A(t,l),S[u].m(t,null),e[11](t),h=!0,f||(m=[V(t,"click",B((function(){p(e[3])&&e[3].apply(this,arguments)}))),V(t,"keydown",e[9])],f=!0)},p(a,[s]){let l=r;r=b(e=a),r===l?v[r].p(e,s):(ge(),ye(v[l],1,1,(()=>{v[l]=null})),ve(),n=v[r],n?n.p(e,s):(n=v[r]=g[r](e),n.c()),be(n,1),n.m(i,null)),(!h||16&s)&&j(o,e[4]);let d=u;u=$(e),u===d?S[u].p(e,s):(ge(),ye(S[d],1,1,(()=>{S[d]=null})),ve(),c=S[u],c?c.p(e,s):(c=S[u]=y[u](e),c.c()),be(c,1),c.m(t,null)),(!h||32&s)&&U(t,"aria-label",e[5]),(!h||2&s)&&U(t,"data-testid",e[1]),(!h||4&s)&&z(t,"mobile",e[2])},i(e){h||(be(n),be(c),h=!0)},o(e){ye(n),ye(c),h=!1},d(i){i&&L(t),v[r].d(),S[u].d(),e[11](null),f=!1,d(m)}}}function um(e,t,i){let{id:r}=t,{isMobile:n=!1}=t,{onClick:s=a.noop}=t,{getSubItemForFocus:o}=t,{label:l}=t,{ariaLabel:u}=t,{value:c}=t,{valueComponent:d}=t,{ref:p}=t,{icon:h}=t;return e.$$set=e=>{"id"in e&&i(1,r=e.id),"isMobile"in e&&i(2,n=e.isMobile),"onClick"in e&&i(3,s=e.onClick),"getSubItemForFocus"in e&&i(10,o=e.getSubItemForFocus),"label"in e&&i(4,l=e.label),"ariaLabel"in e&&i(5,u=e.ariaLabel),"value"in e&&i(6,c=e.value),"valueComponent"in e&&i(7,d=e.valueComponent),"ref"in e&&i(0,p=e.ref),"icon"in e&&i(8,h=e.icon)},[p,r,n,s,l,u,c,d,h,e=>Wi(e,s,o),o,function(e){te[e?"unshift":"push"]((()=>{p=e,i(0,p)}))}]}var cm=class extends Le{constructor(e){super(),Ce(this,e,um,lm,h,{id:1,isMobile:2,onClick:3,getSubItemForFocus:10,label:4,ariaLabel:5,value:6,valueComponent:7,ref:0,icon:8},rm)}};function dm(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"16"},{height:"19"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"download-icon"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"fill-rule","evenodd"),U(i,"d","M8 0a.9.9 0 0 1 .9.9v10.927l4.564-4.563a.9.9 0 0 1 1.272 1.272l-6.1 6.1a.9.9 0 0 1-1.272 0l-6.1-6.1a.9.9 0 1 1 1.272-1.272L7.1 11.827V.9A.9.9 0 0 1 8 0M0 18a.9.9 0 0 1 .9-.9h14.2a.9.9 0 1 1 0 1.8H.9A.9.9 0 0 1 0 18"),U(i,"clip-rule","evenodd"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"16"},{height:"19"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"download-icon"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function pm(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var hm=class extends Le{constructor(e){super(),Ce(this,e,pm,dm,h,{})}};function fm(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"18"},{height:"17"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"traffic-saving-icon"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"fill-rule","evenodd"),U(i,"d","M.1 6.5c0-2.24 0-3.36.436-4.216A4 4 0 0 1 2.284.536C3.139.1 4.259.1 6.5.1h5c2.24 0 3.36 0 4.216.436a4 4 0 0 1 1.748 1.748c.436.856.436 1.976.436 4.216s0 3.36-.436 4.216a4 4 0 0 1-1.748 1.748c-.836.426-1.925.436-4.064.436l.55 2.2H14.1a.9.9 0 0 1 0 1.8H3.9a.9.9 0 1 1 0-1.8h1.897l.55-2.2c-2.139 0-3.227-.01-4.063-.436a4 4 0 0 1-1.748-1.748C.1 9.86.1 8.74.1 6.5m11.4-4.6h-5c-1.15 0-1.904.002-2.481.049-.556.045-.786.124-.918.19a2.2 2.2 0 0 0-.962.962c-.067.132-.145.363-.19.918-.048.577-.05 1.331-.05 2.481s.002 1.904.05 2.48c.045.556.123.787.19.919a2.2 2.2 0 0 0 .962.961c.132.068.362.146.918.192.577.047 1.33.048 2.48.048h5c1.15 0 1.904-.001 2.481-.048.556-.046.787-.124.918-.192a2.2 2.2 0 0 0 .962-.961c.067-.132.146-.363.191-.918.047-.577.049-1.331.049-2.48s-.002-1.905-.049-2.482c-.045-.555-.124-.786-.191-.918a2.2 2.2 0 0 0-.962-.961c-.131-.067-.362-.146-.918-.191-.577-.048-1.33-.049-2.48-.049m-3.298 11-.55 2.2h2.695l-.55-2.2z"),U(i,"clip-rule","evenodd"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"18"},{height:"17"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"traffic-saving-icon"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function mm(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var gm=class extends Le{constructor(e){super(),Ce(this,e,mm,fm,h,{})}};function vm(e){let t,i,r,n,a,s=e[2].default,o=b(s,e,e[1],null),u=[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{"aria-hidden":"true"},{"data-testid":"play-speed-icon"},{role:"img"},e[0]],c={};for(let e=0;e<u.length;e+=1)c=l(c,u[e]);return{c(){t=O("svg"),o&&o.c(),i=O("g"),r=O("path"),n=O("path"),U(r,"d","M0 0h24v24H0z"),U(n,"fill","#fff"),U(n,"fill-rule","nonzero"),U(n,"d","M11 4.07V2.05c-2.01.2-3.84 1-5.32 2.21L7.1 5.69A7.94 7.94 0 0 1 11 4.07M5.69 7.1 4.26 5.68A9.95 9.95 0 0 0 2.05 11h2.02c.18-1.46.76-2.79 1.62-3.9M2.05 13c.2 2.01 1 3.84 2.21 5.32l1.43-1.43A7.87 7.87 0 0 1 4.07 13zM11 21.95v-2.02a7.94 7.94 0 0 1-3.9-1.62l-1.42 1.43A10 10 0 0 0 11 21.95M22 12c0 5.16-3.92 9.42-8.95 9.95v-2.02C16.97 19.41 20 16.05 20 12s-3.03-7.41-6.95-7.93V2.05C18.08 2.58 22 6.84 22 12M10.688 8.576l4.746 2.736a.792.792 0 0 1 0 1.372l-4.746 2.737a.792.792 0 0 1-1.188-.686V9.262a.792.792 0 0 1 1.188-.686"),U(i,"fill","none"),U(i,"fill-rule","evenodd"),F(t,c)},m(e,s){k(e,t,s),o&&o.m(t,null),A(t,i),A(i,r),A(i,n),a=!0},p(e,[i]){o&&o.p&&(!a||2&i)&&$(o,s,e,e[1],a?S(s,e[1],i,null):_(e[1]),null),F(t,c=_e(u,[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{"aria-hidden":"true"},{"data-testid":"play-speed-icon"},{role:"img"},1&i&&e[0]]))},i(e){a||(be(o,e),a=!0)},o(e){ye(o,e),a=!1},d(e){e&&L(t),o&&o.d(e)}}}function bm(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var ym=class extends Le{constructor(e){super(),Ce(this,e,bm,vm,h,{})}};function Sm(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"18"},{height:"15"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"audio-languages-icon"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"d","M8.295 14.247c1.87 1.896 5.505.02 5.505-3.548V5.645l2.399-.697A2.74 2.74 0 0 0 18 2.364l-.01-1.72a.75.75 0 0 0-.906-.623l-.267.061c-.941.215-1.886.431-2.807.721-1.332.45-2.03 1.614-2.01 3.077V9c-3.887.196-5.639 3.286-3.705 5.247M.9.1a.9.9 0 0 0 0 1.8h8.197a.9.9 0 0 0 0-1.8zM.9 5.1a.9.9 0 1 0 0 1.8h7.196a.9.9 0 0 0 0-1.8zM0 11a.9.9 0 0 1 .9-.9h4.183a.9.9 0 1 1 0 1.8H.9A.9.9 0 0 1 0 11"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"18"},{height:"15"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"audio-languages-icon"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function $m(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var _m=class extends Le{constructor(e){super(),Ce(this,e,$m,Sm,h,{})}};function Tm(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"copy-icon"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"fill-rule","evenodd"),U(i,"d","M4 12.3V12c0-1.47.005-2.547.075-3.403.074-.904.216-1.482.454-1.949a4.85 4.85 0 0 1 2.12-2.12c.466-.237 1.044-.379 1.948-.453C9.51 4.001 10.675 4 12.3 4h4.512a2 2 0 0 0-.174-.49 2.4 2.4 0 0 0-1.048-1.048 2.4 2.4 0 0 0-.931-.239 14 14 0 0 0-1.026-.023H12.26c-1.576 0-2.814 0-3.81.081-1.014.083-1.856.255-2.62.644A6.65 6.65 0 0 0 2.926 5.83c-.389.763-.56 1.605-.644 2.62-.081.995-.081 2.233-.081 3.809v1.373c0 .392 0 .738.023 1.025.025.306.081.623.239.931a2.4 2.4 0 0 0 1.048 1.05c.162.082.326.136.49.173V12.3zM10.08 6h-.035c-.52 0-.964 0-1.329.03-.383.03-.755.097-1.112.276a2.9 2.9 0 0 0-1.298 1.298c-.179.357-.246.73-.277 1.112C6 9.081 6 9.524 6 10.046v7.909c0 .52 0 .964.03 1.329.03.382.097.755.276 1.112a2.9 2.9 0 0 0 1.298 1.298c.357.179.73.246 1.112.277.365.029.808.029 1.329.029h6.91c.52 0 .964 0 1.329-.03.382-.03.755-.097 1.112-.276a2.9 2.9 0 0 0 1.298-1.298c.179-.357.246-.73.277-1.112.029-.365.029-.808.029-1.33v-7.909c0-.52 0-.964-.03-1.329-.03-.382-.097-.755-.276-1.112a2.9 2.9 0 0 0-1.298-1.298c-.357-.179-.73-.246-1.112-.277C17.919 6 17.476 6 16.954 6zM8.408 7.916c.065-.032.179-.07.452-.093a18 18 0 0 1 1.22-.023h6.84c.565 0 .936 0 1.22.023.273.022.387.06.452.093a1.1 1.1 0 0 1 .492.492c.032.065.07.179.093.452.022.284.023.655.023 1.22v7.84c0 .565 0 .936-.023 1.22-.023.273-.06.387-.093.452a1.1 1.1 0 0 1-.492.492c-.065.032-.18.07-.452.093a18 18 0 0 1-1.22.023h-6.84c-.565 0-.936 0-1.22-.023-.273-.023-.387-.06-.452-.093a1.1 1.1 0 0 1-.492-.492c-.032-.065-.07-.18-.093-.452a17 17 0 0 1-.023-1.22v-7.84c0-.565 0-.936.023-1.22.022-.273.06-.387.093-.452a1.1 1.1 0 0 1 .492-.492"),U(i,"clip-rule","evenodd"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"copy-icon"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function wm(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var Em=class extends Le{constructor(e){super(),Ce(this,e,wm,Tm,h,{})}};function xm(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"info-icon"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"d","M12 20.105a8.105 8.105 0 1 0 0-16.21 8.105 8.105 0 0 0 0 16.21M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10m0-12.372a1.316 1.316 0 1 1 0-2.632 1.316 1.316 0 0 1 0 2.632m-.947 2.822c0-.541.424-.98.947-.98s.947.439.947.98v3.83c0 .54-.424.98-.947.98s-.947-.44-.947-.98z"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"info-icon"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function Am(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var Cm=class extends Le{constructor(e){super(),Ce(this,e,Am,xm,h,{})}};function km(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"report-icon"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","#fff"),U(i,"fill-rule","evenodd"),U(i,"d","M8.863 2.1h6.274c.674-.002 1.2.211 1.683.697l4.383 4.383c.478.476.699.998.697 1.683v6.274c.002.685-.22 1.207-.697 1.683l-4.383 4.383c-.476.478-.998.699-1.683.697H8.863c-.685.002-1.207-.22-1.683-.697L2.797 16.82c-.478-.476-.699-.998-.697-1.683V8.863c-.002-.685.22-1.207.697-1.683L7.18 2.797c.484-.486 1.009-.699 1.683-.697m-.445 2.005L4.105 8.418c-.18.18-.205.242-.205.495v6.174c0 .25.025.316.205.495l4.313 4.313c.179.179.24.205.495.205h6.174c.253 0 .316-.026.495-.205l4.313-4.313c.18-.18.205-.245.205-.495V8.913c0-.254-.026-.316-.205-.495l-4.313-4.313c-.18-.18-.242-.205-.495-.205H8.913c-.254 0-.319.029-.495.205M13 16a1 1 0 1 1-2 0 1 1 0 0 1 2 0m-.1-8.1a.9.9 0 0 0-1.8 0v5.2a.9.9 0 1 0 1.8 0z"),U(i,"clip-rule","evenodd"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"24"},{height:"24"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"report-icon"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function Lm(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var Rm=class extends Le{constructor(e){super(),Ce(this,e,Lm,km,h,{})}};function Pm(e){C(e,"svelte-1a7qwh6",".menu-item-value.svelte-1a7qwh6.svelte-1a7qwh6{position:relative;padding-right:22px}.menu-item-value.svelte-1a7qwh6 span.svelte-1a7qwh6{opacity:0.7}.menu-item-value.sub.svelte-1a7qwh6 span.svelte-1a7qwh6{opacity:1}.quality-icon.svelte-1a7qwh6.svelte-1a7qwh6{position:absolute;top:-8px;right:2px;width:15px}.quality-icon.svelte-1a7qwh6 svg{color:var(--blue-light)}")}function Om(e){let t,i,r;var n=e[3];return n&&(i=q(n,{})),{c(){t=P("div"),i&&Ee(i.$$.fragment),U(t,"class","quality-icon svelte-1a7qwh6")},m(e,n){k(e,t,n),i&&xe(i,t,null),r=!0},p(e,r){if(8&r&&n!==(n=e[3])){if(i){ge();let e=i;ye(e.$$.fragment,1,0,(()=>{Ae(e,1)})),ve()}n?(i=q(n,{}),Ee(i.$$.fragment),be(i.$$.fragment,1),xe(i,t,null)):i=null}},i(e){r||(i&&be(i.$$.fragment,e),r=!0)},o(e){i&&ye(i.$$.fragment,e),r=!1},d(e){e&&L(t),i&&Ae(i)}}}function Mm(e){let t,i,r,n,a,s=e[3]&&!e[1]&&Om(e);return{c(){t=P("div"),i=P("span"),r=M(e[0]),n=I(),s&&s.c(),U(i,"class","svelte-1a7qwh6"),U(t,"class","menu-item-value svelte-1a7qwh6"),z(t,"sub",e[2])},m(e,o){k(e,t,o),A(t,i),A(i,r),A(t,n),s&&s.m(t,null),a=!0},p(e,[i]){(!a||1&i)&&j(r,e[0]),e[3]&&!e[1]?s?(s.p(e,i),10&i&&be(s,1)):(s=Om(e),s.c(),be(s,1),s.m(t,null)):s&&(ge(),ye(s,1,1,(()=>{s=null})),ve()),(!a||4&i)&&z(t,"sub",e[2])},i(e){a||(be(s),a=!0)},o(e){ye(s),a=!1},d(e){e&&L(t),s&&s.d()}}}function Im(e,t,i){let r,{quality:n}=t,{label:a}=t,{isMobile:s}=t,{isSubCase:o=!1}=t;return e.$$set=e=>{"quality"in e&&i(4,n=e.quality),"label"in e&&i(0,a=e.label),"isMobile"in e&&i(1,s=e.isMobile),"isSubCase"in e&&i(2,o=e.isSubCase)},e.$$.update=()=>{16&e.$$.dirty&&i(3,r=sa(n))},[a,s,o,r,n]}var Nm=class extends Le{constructor(e){super(),Ce(this,e,Im,Mm,h,{quality:4,label:0,isMobile:1,isSubCase:2},Pm)}},Vm=(e,t,i)=>{if(!e)return"...";let r=t.find((t=>t.value===e)),a=r?r.displayValue:e;return i?e===n.VideoQuality.INVARIANT?Pt("auto_quality_invariant"):Pt("auto_quality",{actual:a}):a};function Dm(e){C(e,"svelte-vk2gx4",".menu-item-value-wrapper.svelte-vk2gx4{right:-22px;position:relative}")}function Bm(e){let t,i,r;return i=new Nm({props:{quality:e[0],label:e[1],isMobile:e[2]}}),{c(){t=P("div"),Ee(i.$$.fragment),U(t,"class","menu-item-value-wrapper svelte-vk2gx4")},m(e,n){k(e,t,n),xe(i,t,null),r=!0},p(e,[t]){let r={};1&t&&(r.quality=e[0]),2&t&&(r.label=e[1]),4&t&&(r.isMobile=e[2]),i.$set(r)},i(e){r||(be(i.$$.fragment,e),r=!0)},o(e){ye(i.$$.fragment,e),r=!1},d(e){e&&L(t),Ae(i)}}}function Um(e,t,i){let r,n,a,s,o=et(),l=o.state.currentQuality$;v(e,l,(e=>i(0,a=e)));let u=o.state.availableQualities$;v(e,u,(e=>i(8,n=e)));let c=o.state.isAutoQualityEnabled$;v(e,c,(e=>i(7,r=e)));let d,p=o.ui.isMobile;return v(e,p,(e=>i(2,s=e))),e.$$.update=()=>{385&e.$$.dirty&&i(1,d=Vm(a,n,r))},[a,d,s,l,u,c,p,r,n]}var Fm=class extends Le{constructor(e){super(),Ce(this,e,Um,Bm,h,{},Dm)}};function jm(e){let t,i,r;var n=e[4];return n&&(t=q(n,{})),{c(){t&&Ee(t.$$.fragment),i=N()},m(e,n){t&&xe(t,e,n),k(e,i,n),r=!0},p(e,r){if(16&r&&n!==(n=e[4])){if(t){ge();let e=t;ye(e.$$.fragment,1,0,(()=>{Ae(e,1)})),ve()}n?(t=q(n,{}),Ee(t.$$.fragment),be(t.$$.fragment,1),xe(t,i.parentNode,i)):t=null}},i(e){r||(t&&be(t.$$.fragment,e),r=!0)},o(e){t&&ye(t.$$.fragment,e),r=!1},d(e){e&&L(i),t&&Ae(t,e)}}}function Hm(e){let t;function i(e,t){return e[5]?qm:zm}let r=i(e),n=r(e);return{c(){n.c(),t=N()},m(e,i){n.m(e,i),k(e,t,i)},p(e,a){r===(r=i(e))&&n?n.p(e,a):(n.d(1),n=r(e),n&&(n.c(),n.m(t.parentNode,t)))},i:o,o,d(e){e&&L(t),n.d(e)}}}function zm(e){let t,i,r,n;return{c(){t=P("img"),U(t,"class","icon"),f(t.src,i=e[4])||U(t,"src",i),U(t,"aria-hidden","true")},m(i,a){k(i,t,a),r||(n=V(t,"error",e[6]),r=!0)},p(e,r){16&r&&!f(t.src,i=e[4])&&U(t,"src",i)},d(e){e&&L(t),r=!1,n()}}}function qm(e){let t;return{c(){t=P("div"),t.innerHTML='<div class="inner"></div>',U(t,"class","icon icon-error-stub")},m(e,i){k(e,t,i)},p:o,d(e){e&&L(t)}}}function Wm(e){let t,i,r,n,a,s,o,l,u,c,p,h=[Hm,jm],f=[];function m(e,t){return"string"==typeof e[4]?0:1}return r=m(e),n=f[r]=h[r](e),{c(){t=P("li"),i=P("div"),n.c(),a=I(),s=P("div"),o=M(e[2]),U(i,"class","icon-wrapper"),U(s,"class","label"),U(t,"class","item"),U(t,"role","menuitem"),U(t,"tabindex","0"),U(t,"aria-label",l=e[3]??e[2]),U(t,"data-testid",e[0]),z(t,"mobile",e[1])},m(n,l){k(n,t,l),A(t,i),f[r].m(i,null),A(t,a),A(t,s),A(s,o),u=!0,c||(p=[V(t,"click",B(e[7])),V(t,"keydown",e[8])],c=!0)},p(e,[a]){let s=r;r=m(e),r===s?f[r].p(e,a):(ge(),ye(f[s],1,1,(()=>{f[s]=null})),ve(),n=f[r],n?n.p(e,a):(n=f[r]=h[r](e),n.c()),be(n,1),n.m(i,null)),(!u||4&a)&&j(o,e[2]),(!u||12&a&&l!==(l=e[3]??e[2]))&&U(t,"aria-label",l),(!u||1&a)&&U(t,"data-testid",e[0]),(!u||2&a)&&z(t,"mobile",e[1])},i(e){u||(be(n),u=!0)},o(e){ye(n),u=!1},d(e){e&&L(t),f[r].d(),c=!1,d(p)}}}function Gm(e,t,i){let r,{id:n}=t,{isMobile:s=!1}=t,{onClick:o=a.noop}=t,{closeSettings:l=a.noop}=t,{label:u}=t,{ariaLabel:c}=t,{icon:d}=t,p=()=>{o(),l()};return e.$$set=e=>{"id"in e&&i(0,n=e.id),"isMobile"in e&&i(1,s=e.isMobile),"onClick"in e&&i(9,o=e.onClick),"closeSettings"in e&&i(10,l=e.closeSettings),"label"in e&&i(2,u=e.label),"ariaLabel"in e&&i(3,c=e.ariaLabel),"icon"in e&&i(4,d=e.icon)},i(5,r=!1),[n,s,u,c,d,r,()=>{i(5,r=!0)},p,e=>{Gi(e,(()=>p()))},o,l]}var Qm=class extends Le{constructor(e){super(),Ce(this,e,Gm,Wm,h,{id:0,isMobile:1,onClick:9,closeSettings:10,label:2,ariaLabel:3,icon:4})}};function Ym(e){C(e,"svelte-17wbjko",'.toggle_wrap.svelte-17wbjko{min-height:15px;padding:0;font-size:12px;line-height:15px;cursor:pointer;user-select:none}.toggle.svelte-17wbjko{float:right;margin-top:3px;width:28px;height:9px;border-radius:45px;background-color:var(--toggle-color-separator);cursor:pointer}.toggle.svelte-17wbjko::after{content:"";float:left;position:relative;width:15px;height:15px;border-radius:50%;background-color:var(--toggle-color-off);top:-3px;left:0;transition:left .1s ease}.toggle.on.svelte-17wbjko::after{background-color:var(--toggle-color-on);left:13px}.toggle-label.svelte-17wbjko{overflow:hidden}')}function Km(e){let t,i,r,n;return{c(){t=P("div"),i=P("div"),r=I(),n=P("div"),U(i,"class","toggle svelte-17wbjko"),z(i,"on",e[0]),U(n,"class","toggle-label svelte-17wbjko"),U(t,"class","toggle_wrap svelte-17wbjko")},m(e,a){k(e,t,a),A(t,i),A(t,r),A(t,n)},p(e,[t]){1&t&&z(i,"on",e[0])},i:o,o,d(e){e&&L(t)}}}function Xm(e,t,i){let{enabled:r=!1}=t;return e.$$set=e=>{"enabled"in e&&i(0,r=e.enabled)},[r]}var Zm=class extends Le{constructor(e){super(),Ce(this,e,Xm,Km,h,{enabled:0},Ym)}};function Jm(e){let t,i,r;var n=e[4];return n&&(t=q(n,{})),{c(){t&&Ee(t.$$.fragment),i=N()},m(e,n){t&&xe(t,e,n),k(e,i,n),r=!0},p(e,r){if(16&r&&n!==(n=e[4])){if(t){ge();let e=t;ye(e.$$.fragment,1,0,(()=>{Ae(e,1)})),ve()}n?(t=q(n,{}),Ee(t.$$.fragment),be(t.$$.fragment,1),xe(t,i.parentNode,i)):t=null}},i(e){r||(t&&be(t.$$.fragment,e),r=!0)},o(e){t&&ye(t.$$.fragment,e),r=!1},d(e){e&&L(i),t&&Ae(t,e)}}}function eg(e){let t,i;return t=new Ac({props:{icon:e[4]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};16&i&&(r.icon=e[4]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function tg(e){let t,i,r,n,a,s,o,l,u,c,d=[eg,Jm],p=[];function h(e,t){return"string"==typeof e[4]?0:1}return r=h(e),n=p[r]=d[r](e),u=new Zm({props:{enabled:e[5]}}),{c(){t=P("div"),i=P("div"),n.c(),a=I(),s=P("div"),o=M(e[2]),l=I(),Ee(u.$$.fragment),U(i,"class","icon-wrapper"),U(s,"class","label"),U(t,"class","switch-wrapper"),z(t,"mobile",e[1])},m(e,n){k(e,t,n),A(t,i),p[r].m(i,null),A(t,a),A(t,s),A(s,o),A(t,l),xe(u,t,null),c=!0},p(e,a){let s=r;r=h(e),r===s?p[r].p(e,a):(ge(),ye(p[s],1,1,(()=>{p[s]=null})),ve(),n=p[r],n?n.p(e,a):(n=p[r]=d[r](e),n.c()),be(n,1),n.m(i,null)),(!c||4&a)&&j(o,e[2]);let l={};32&a&&(l.enabled=e[5]),u.$set(l),(!c||2&a)&&z(t,"mobile",e[1])},i(e){c||(be(n),be(u.$$.fragment,e),c=!0)},o(e){ye(n),ye(u.$$.fragment,e),c=!1},d(e){e&&L(t),p[r].d(),Ae(u)}}}function ig(e){let t,i,r,n,a,s;return i=new ts({props:{content:e[6],isMobile:e[1],placement:"left",translateX:10,isFullWidthWrapper:!0,maxTooltipWidth:e[7],$$slots:{default:[tg]},$$scope:{ctx:e}}}),{c(){t=P("li"),Ee(i.$$.fragment),U(t,"class","item switch-item"),U(t,"role","menuitem"),U(t,"tabindex","0"),U(t,"aria-label",r=e[3]??e[2]),U(t,"data-testid",e[0]),z(t,"mobile",e[1])},m(r,o){k(r,t,o),xe(i,t,null),n=!0,a||(s=[V(t,"click",B(e[9])),V(t,"keydown",e[8])],a=!0)},p(e,[a]){let s={};64&a&&(s.content=e[6]),2&a&&(s.isMobile=e[1]),128&a&&(s.maxTooltipWidth=e[7]),2102&a&&(s.$$scope={dirty:a,ctx:e}),i.$set(s),(!n||12&a&&r!==(r=e[3]??e[2]))&&U(t,"aria-label",r),(!n||1&a)&&U(t,"data-testid",e[0]),(!n||2&a)&&z(t,"mobile",e[1])},i(e){n||(be(i.$$.fragment,e),n=!0)},o(e){ye(i.$$.fragment,e),n=!1},d(e){e&&L(t),Ae(i),a=!1,d(s)}}}function rg(e,t,i){let{id:r}=t,{isMobile:n=!1}=t,{onClick:s=a.noop}=t,{label:o}=t,{ariaLabel:l}=t,{icon:u}=t,{enabled:c=!1}=t,{tooltipText:d}=t,{maxTooltipWidth:p}=t;return e.$$set=e=>{"id"in e&&i(0,r=e.id),"isMobile"in e&&i(1,n=e.isMobile),"onClick"in e&&i(10,s=e.onClick),"label"in e&&i(2,o=e.label),"ariaLabel"in e&&i(3,l=e.ariaLabel),"icon"in e&&i(4,u=e.icon),"enabled"in e&&i(5,c=e.enabled),"tooltipText"in e&&i(6,d=e.tooltipText),"maxTooltipWidth"in e&&i(7,p=e.maxTooltipWidth)},[r,n,o,l,u,c,d,p,e=>{((e,t,i)=>{if(Ui(e))Di(e),i(!t);else{let r=e.code;if("ArrowLeft"===r&&t)return i(!1),void Di(e);"ArrowRight"===r&&!t&&(i(!0),Di(e))}})(e,c,(e=>s(e)))},()=>s(!c),s]}var ng=class extends Le{constructor(e){super(),Ce(this,e,rg,ig,h,{id:0,isMobile:1,onClick:10,label:2,ariaLabel:3,icon:4,enabled:5,tooltipText:6,maxTooltipWidth:7})}};function ag(e){C(e,"svelte-1t2c6ej",".settings-menu-container.mobile.svelte-1t2c6ej.svelte-1t2c6ej{width:100%}.settings-menu-container.svelte-1t2c6ej ul{margin:0;padding:0;list-style-type:none}.settings-menu-container.svelte-1t2c6ej .menu{background-color:var(--settings-bg);border-radius:var(--settings-radius);transition:opacity 0.2s, visibility 0.2s;overflow:hidden}.settings-menu-container.svelte-1t2c6ej .menu .item:first-child:not(.mobile){padding-top:6px;border-top-right-radius:var(--settings-radius);border-top-left-radius:var(--settings-radius)}.settings-menu-container.svelte-1t2c6ej .menu .item:last-child{padding-bottom:6px;border-bottom-right-radius:var(--settings-radius);border-bottom-left-radius:var(--settings-radius)}.settings-menu-container.svelte-1t2c6ej .menu.desktop{position:absolute;right:0;bottom:0}.settings-menu.svelte-1t2c6ej.svelte-1t2c6ej{line-height:40px}.settings-menu.desktop.svelte-1t2c6ej.svelte-1t2c6ej{min-width:300px}.settings-menu-container.svelte-1t2c6ej .menu.mobile{width:100%;background:var(--mobile-settings-bg);font-size:15px;line-height:50px}.settings-menu-container.svelte-1t2c6ej .menu.mobile.hidden{display:none}.settings-menu-container.svelte-1t2c6ej .menu .item:not(.switch-item),.settings-menu-container.svelte-1t2c6ej .menu .switch-wrapper{align-items:center;color:var(--white);cursor:pointer;display:flex;justify-content:flex-end;white-space:nowrap;position:relative}.settings-menu-container.svelte-1t2c6ej .menu .item:hover{background-color:var(--settings-item-bg-hover)}.settings-menu-container.svelte-1t2c6ej .menu .item.mobile:hover{background:var(--mobile-settings-bg)}.settings-menu.svelte-1t2c6ej .item:not(.switch-item),.settings-menu.svelte-1t2c6ej .switch-wrapper{padding:0 32px 0 18px}.settings-menu.svelte-1t2c6ej .item.mobile:not(.switch-item),.settings-menu.svelte-1t2c6ej .switch-wrapper.mobile{padding:0 14px}.settings-menu.svelte-1t2c6ej .icon-wrapper{width:24px;min-width:24px;height:24px;display:flex;align-items:center;justify-content:center;margin-right:16px}.settings-menu.svelte-1t2c6ej .label{flex-grow:1;margin-right:24px;overflow:hidden;text-overflow:ellipsis}.settings-menu.svelte-1t2c6ej .item.header.svelte-1t2c6ej{color:var(--white);cursor:pointer;justify-content:space-between;column-gap:12px;display:flex;border-bottom:var(--divider-border);margin-bottom:4px}.settings-menu-container.svelte-1t2c6ej .items::-webkit-scrollbar{width:8px}.settings-menu-container.svelte-1t2c6ej .items::-webkit-scrollbar-track{box-shadow:none;background-color:#3a3a3a;border-radius:4px}.settings-menu-container.svelte-1t2c6ej .items::-webkit-scrollbar-thumb{min-height:40px;border-radius:5px;background-color:#666;border:1px solid transparent;background-clip:padding-box}.settings-menu-container.svelte-1t2c6ej .items::-webkit-scrollbar-thumb:hover{background-color:#777}.settings-menu-container.svelte-1t2c6ej .items.mobile{overflow-y:auto;overflow-x:hidden;max-height:160px;text-align:left}.close.svelte-1t2c6ej.svelte-1t2c6ej{position:relative;width:12px;height:12px;padding:12px;margin-right:-12px}.close.svelte-1t2c6ej.svelte-1t2c6ej:before,.close.svelte-1t2c6ej.svelte-1t2c6ej:after{position:absolute;left:18px;content:' ';height:12px;width:2px;background-color:var(--white)}.close.svelte-1t2c6ej.svelte-1t2c6ej:before{transform:rotate(45deg)}.close.svelte-1t2c6ej.svelte-1t2c6ej:after{transform:rotate(-45deg)}")}function sg(e,t,i){let r=e.slice();return r[95]=t[i],r[96]=t,r[97]=i,r}function og(e,t,i){let r=e.slice();return r[95]=t[i],r[98]=t,r[99]=i,r}function lg(e){let t,i,r,n,a,s,o,l=e[6]&&ug(e),u=Se(e[4]),c=[];for(let t=0;t<u.length;t+=1)c[t]=hg(og(e,u,t));let p=e=>ye(c[e],1,1,(()=>{c[e]=null}));return{c(){t=P("div"),l&&l.c(),i=I(),r=P("ul");for(let e=0;e<c.length;e+=1)c[e].c();U(r,"class","items"),U(r,"role","menu"),U(r,"style",n=e[35]()),z(r,"mobile",e[6]),U(t,"class","settings-menu menu svelte-1t2c6ej"),U(t,"data-testid","settings-menu"),z(t,"desktop",!e[6]),z(t,"mobile",e[6]),z(t,"hidden",!e[8])},m(n,u){k(n,t,u),l&&l.m(t,null),A(t,i),A(t,r);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(r,null);e[70](r),a=!0,s||(o=[V(t,"keydown",e[37]),V(t,"mouseenter",e[33]),V(t,"mouseleave",e[34])],s=!0)},p(e,n){if(e[6]?l?l.p(e,n):(l=ug(e),l.c(),l.m(t,i)):l&&(l.d(1),l=null),1073741908&n[0]|1&n[1]){let t;for(u=Se(e[4]),t=0;t<u.length;t+=1){let i=og(e,u,t);c[t]?(c[t].p(i,n),be(c[t],1)):(c[t]=hg(i),c[t].c(),be(c[t],1),c[t].m(r,null))}for(ge(),t=u.length;t<c.length;t+=1)p(t);ve()}(!a||64&n[0])&&z(r,"mobile",e[6]),(!a||64&n[0])&&z(t,"desktop",!e[6]),(!a||64&n[0])&&z(t,"mobile",e[6]),(!a||256&n[0])&&z(t,"hidden",!e[8])},i(e){if(!a){for(let e=0;e<u.length;e+=1)be(c[e]);a=!0}},o(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)ye(c[e]);a=!1},d(i){i&&L(t),l&&l.d(),R(c,i),e[70](null),s=!1,d(o)}}}function ug(e){let t,i,r,n,a,s;return{c(){t=P("div"),i=P("div"),i.textContent=`${Pt("submenu_settings")}`,r=I(),n=P("div"),U(n,"class","close svelte-1t2c6ej"),U(t,"class","item header svelte-1t2c6ej"),z(t,"mobile",e[6])},m(o,l){k(o,t,l),A(t,i),A(t,r),A(t,n),a||(s=V(n,"click",B(e[31])),a=!0)},p(e,i){64&i[0]&&z(t,"mobile",e[6])},d(e){e&&L(t),a=!1,s()}}}function cg(e){let t,i;return t=new ng({props:{isMobile:e[6],id:e[95].id,onClick:e[95].onClick,icon:e[95].icon,label:e[95].label,ariaLabel:e[95].ariaLabel,enabled:e[95].enabled,tooltipText:e[95].tooltipText,maxTooltipWidth:e[95].maxTooltipWidth}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};64&i[0]&&(r.isMobile=e[6]),16&i[0]&&(r.id=e[95].id),16&i[0]&&(r.onClick=e[95].onClick),16&i[0]&&(r.icon=e[95].icon),16&i[0]&&(r.label=e[95].label),16&i[0]&&(r.ariaLabel=e[95].ariaLabel),16&i[0]&&(r.enabled=e[95].enabled),16&i[0]&&(r.tooltipText=e[95].tooltipText),16&i[0]&&(r.maxTooltipWidth=e[95].maxTooltipWidth),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function dg(e){let t,i;return t=new Qm({props:{isMobile:e[6],id:e[95].id,onClick:e[95].onClick,icon:e[95].icon,label:e[95].label,ariaLabel:e[95].ariaLabel,closeSettings:e[31]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};64&i[0]&&(r.isMobile=e[6]),16&i[0]&&(r.id=e[95].id),16&i[0]&&(r.onClick=e[95].onClick),16&i[0]&&(r.icon=e[95].icon),16&i[0]&&(r.label=e[95].label),16&i[0]&&(r.ariaLabel=e[95].ariaLabel),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function pg(e){let t,i,r;function n(){return e[68](e[95])}function a(t){e[69](t,e[95])}let s={isMobile:e[6],id:e[95].id,icon:e[95].icon,label:e[95].label,ariaLabel:e[95].ariaLabel,value:e[95].value,valueComponent:e[95].valueComponent,onClick:n,getSubItemForFocus:e[95].getSubItemForFocus};return void 0!==e[2][e[95].id]&&(s.ref=e[2][e[95].id]),t=new cm({props:s}),te.push((()=>we(t,"ref",a))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(r,a){e=r;let s={};64&a[0]&&(s.isMobile=e[6]),16&a[0]&&(s.id=e[95].id),16&a[0]&&(s.icon=e[95].icon),16&a[0]&&(s.label=e[95].label),16&a[0]&&(s.ariaLabel=e[95].ariaLabel),16&a[0]&&(s.value=e[95].value),16&a[0]&&(s.valueComponent=e[95].valueComponent),16&a[0]&&(s.onClick=n),16&a[0]&&(s.getSubItemForFocus=e[95].getSubItemForFocus),!i&&20&a[0]&&(i=!0,s.ref=e[2][e[95].id],ue((()=>i=!1))),t.$set(s)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function hg(e){let t,i,r,n,a=[pg,dg,cg],s=[];function o(e,t){return"OPEN_SUB_MENU"===e[95].type?0:"CLICK"===e[95].type?1:"SWITCH"===e[95].type?2:-1}return~(t=o(e))&&(i=s[t]=a[t](e)),{c(){i&&i.c(),r=N()},m(e,i){~t&&s[t].m(e,i),k(e,r,i),n=!0},p(e,n){let l=t;t=o(e),t===l?~t&&s[t].p(e,n):(i&&(ge(),ye(s[l],1,1,(()=>{s[l]=null})),ve()),~t?(i=s[t],i?i.p(e,n):(i=s[t]=a[t](e),i.c()),be(i,1),i.m(r.parentNode,r)):i=null)},i(e){n||(be(i),n=!0)},o(e){ye(i),n=!1},d(e){e&&L(r),~t&&s[t].d(e)}}}function fg(e,t){let i,r,n,a;function s(e){t[71](e,t[95])}let o={isMobile:t[6],playerControlsHeight:t[1],itemIdReturnCase:t[36],returnFromSubMenu:t[95].returnFromSubMenu??t[32].bind(null,!1),id:t[95].id,parentItemId:t[95].parentItemId,title:t[95].title,closeSettingsMenu:t[95].closeSettingsMenu,openSubMenuList:t[30],items:t[95].items,minWidth:t[95].minWidth??137,refMenuItems:t[2]};return void 0!==t[3][t[95].id]&&(o.listRef=t[3][t[95].id]),r=new im({props:o}),te.push((()=>we(r,"listRef",s))),{key:e,first:null,c(){i=N(),Ee(r.$$.fragment),this.first=i},m(e,t){k(e,i,t),xe(r,e,t),a=!0},p(e,i){t=e;let a={};64&i[0]&&(a.isMobile=t[6]),2&i[0]&&(a.playerControlsHeight=t[1]),32&i[0]&&(a.returnFromSubMenu=t[95].returnFromSubMenu??t[32].bind(null,!1)),32&i[0]&&(a.id=t[95].id),32&i[0]&&(a.parentItemId=t[95].parentItemId),32&i[0]&&(a.title=t[95].title),32&i[0]&&(a.closeSettingsMenu=t[95].closeSettingsMenu),32&i[0]&&(a.items=t[95].items),32&i[0]&&(a.minWidth=t[95].minWidth??137),4&i[0]&&(a.refMenuItems=t[2]),!n&&40&i[0]&&(n=!0,a.listRef=t[3][t[95].id],ue((()=>n=!1))),r.$set(a)},i(e){a||(be(r.$$.fragment,e),a=!0)},o(e){ye(r.$$.fragment,e),a=!1},d(e){e&&L(i),Ae(r,e)}}}function mg(e){let t,i,r,n=[],a=new Map,s=e[7]&&lg(e),o=Se(e[5]),l=e=>e[95].id;for(let t=0;t<o.length;t+=1){let i=sg(e,o,t),r=l(i);a.set(r,n[t]=fg(r,i))}return{c(){t=P("div"),s&&s.c(),i=I();for(let e=0;e<n.length;e+=1)n[e].c();U(t,"class","settings-menu-container svelte-1t2c6ej"),z(t,"hidden",!e[7]),z(t,"mobile",e[6])},m(e,a){k(e,t,a),s&&s.m(t,null),A(t,i);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null);r=!0},p(e,u){e[7]?s?(s.p(e,u),128&u[0]&&be(s,1)):(s=lg(e),s.c(),be(s,1),s.m(t,i)):s&&(ge(),ye(s,1,1,(()=>{s=null})),ve()),1073741934&u[0]|34&u[1]&&(o=Se(e[5]),ge(),n=function(e,t,i,r,n,a,s,o,l,u,c,p){let h=e.length,f=a.length,m=h,g={};for(;m--;)g[e[m].key]=m;let v=[],b=new Map,y=new Map,S=[];for(m=f;m--;){let e=p(n,a,m),o=i(e),l=s.get(o);l?r&&S.push((()=>l.p(e,t))):(l=u(o,e),l.c()),b.set(o,v[m]=l),o in g&&y.set(o,Math.abs(m-g[o]))}let $=new Set,_=new Set;function T(e){be(e,1),e.m(o,c),s.set(e.key,e),c=e.first,f--}for(;h&&f;){let t=v[f-1],i=e[h-1],r=t.key,n=i.key;t===i?(c=t.first,h--,f--):b.has(n)?!s.has(r)||$.has(r)?T(t):_.has(n)?h--:y.get(r)>y.get(n)?(_.add(r),T(t)):($.add(n),h--):(l(i,s),h--)}for(;h--;){let t=e[h];b.has(t.key)||l(t,s)}for(;f;)T(v[f-1]);return d(S),v}(n,u,l,1,e,o,a,t,$e,fg,null,sg),ve()),(!r||128&u[0])&&z(t,"hidden",!e[7]),(!r||64&u[0])&&z(t,"mobile",e[6])},i(e){if(!r){be(s);for(let e=0;e<o.length;e+=1)be(n[e]);r=!0}},o(e){ye(s);for(let e=0;e<n.length;e+=1)ye(n[e]);r=!1},d(e){e&&L(t),s&&s.d();for(let e=0;e<n.length;e+=1)n[e].d()}}}function gg(e,t,i){let r,n,s,o,l,u,c,d,p,h,f,m,g,b,y,S,$,_,T,w,E,x,A,C,{ref:k}=t,{supportLink:L}=t,{playerControlsHeight:R=0}=t,{returnFocus:P}=t,O=et(),M=Oe(),I=O.state.audioStream$;v(e,I,(e=>i(54,p=e)));let N=O.state.availableAudioStreams$;v(e,N,(e=>i(53,d=e)));let V=O.state.currentQuality$;v(e,V,(e=>i(62,$=e)));let D=O.state.availableQualities$;v(e,D,(e=>i(55,h=e)));let B=O.state.autoQualityLimitingAvailable$;v(e,B,(e=>i(66,E=e)));let U=O.state.isAutoQualityEnabled$;v(e,U,(e=>i(63,_=e)));let F=O.state.currentPlaybackRate$;v(e,F,(e=>i(60,y=e)));let j=O.state.availablePlaybackRates$;v(e,j,(e=>i(52,c=e)));let H=O.state.currentSubtitle$;v(e,H,(e=>i(59,b=e)));let z=O.state.availableSubtitlesList$;v(e,z,(e=>i(50,l=e)));let q=O.state.canDownload,W=O.state.hasMpegSources$;v(e,W,(e=>i(67,x=e)));let G=O.ui.settingsMenu.visible$;v(e,G,(e=>i(7,C=e)));let Y=O.ui.settingsMenu.openedByBtnKeyboard$;v(e,Y,(e=>i(73,s=e)));let K=O.ui.settingsMenu.ref$,X=O.ui.isMobile;v(e,X,(e=>i(6,o=e)));let Z=O.ui.mobileNotReportControlHidden$;v(e,Z,(e=>i(64,T=e)));let J=O.state.canChangePlaybackSpeed$;v(e,J,(e=>i(65,w=e)));let ee=O.state.trafficSavingEnabled$;v(e,ee,(e=>i(58,g=e)));let ie=O.ui.playerSize;v(e,ie,(e=>i(74,A=e)));let re=O.ui.debugPanelVisible;v(e,re,(e=>i(57,m=e)));let ne=O.state.isInteractiveTime$,ae=O.ui.additionalSettingsMenuItems$;v(e,ae,(e=>i(56,f=e)));let se=O.actions.internal.downloadVideo,le=O.actions.internal.closeSettingsMenu,ue=O.actions.internal.openSettingsSubMenu,ce=O.actions.internal.closeSettingsSubMenu,de=!0,pe=Ge({});v(e,pe,(e=>i(51,u=e)));let he="",fe=!1;async function me(e){i(8,de=!1),i(40,he=e);let t=_e();t[e]=!0,pe.set(t),await oe(),ue(e,Be[e])}function ge(){s||P?.(),le(),Te(!0),fe=!1}function ve(e){O.actions.internal.setQuality(e),ge()}function be(e){O.actions.internal.setAudioStream(e),ge()}function ye(e){O.actions.internal.setTrafficSavingEnabled(e)}function Se(e){O.actions.internal.setPlaybackRate(e),ge()}function $e(e){O.actions.internal.setSubtitle(e),ge()}function _e(){let e=u;return Object.keys(e).forEach((t=>{e[t]=!1})),e}function Te(e=!1){i(8,de=!0);let t=_e();pe.set(t),ce(Be[he],e),i(40,he="")}function we(){se()}function Ee(){(0,a.isValidURL)(L)&&window.open(L,"_blank"),O.actions.internal.reportProblem(),O.actions.internal.pause()}function xe(){Vi(O.actions.internal.getDebugTextData())}let Ae=()=>{let e=O.actions.internal.getTraceTextData(),t=new Blob([...e],{type:"application/json"}),i=window.URL.createObjectURL(t);Xe(i,"vk_player_trace_info","json")};function Ce(){re.set(!m)}let ke,Le,Re,Pe,Me,Ie,Ne,Ve=Ge();v(e,Ve,(e=>i(61,S=e)));let De={},Be={},Ue=[],Fe=[];Q((()=>{let e=ne.subscribe((e=>{e&&!o&&!fe&&!s&&ge()}));return()=>{e()}}));return e.$$set=e=>{"ref"in e&&i(0,k=e.ref),"supportLink"in e&&i(38,L=e.supportLink),"playerControlsHeight"in e&&i(1,R=e.playerControlsHeight),"returnFocus"in e&&i(39,P=e.returnFocus)},e.$$.update=()=>{if(128&e.$$.dirty[0]|512&e.$$.dirty[1]&&!C&&he&&Te(),1&e.$$.dirty[0]&&k&&K.set(k),16777216&e.$$.dirty[1]|3&e.$$.dirty[2]&&i(48,r=Vm($,h,_)),36&e.$$.dirty[2]&&i(41,ke=q&&x&&!T),20&e.$$.dirty[2]&&i(42,Le=M.features.trafficSaving&&!T&&E),524288&e.$$.dirty[1]|4&e.$$.dirty[2]&&i(43,Re=l.length>0&&!T),12&e.$$.dirty[2]&&i(44,Pe=!!w&&!T),4194304&e.$$.dirty[1]|4&e.$$.dirty[2]&&i(45,Me=M.features.audioLanguages&&d.length>=2&&!T),4&e.$$.dirty[2]&&i(49,n=!T),3&e.$$.dirty[2]&&i(46,Ie=_?Pt("auto_quality_option"):$),538968064&e.$$.dirty[1]&&i(47,Ne=c.find((e=>e.value===y))?.displayValue),4&e.$$.dirty[0]|1073741824&e.$$.dirty[1]){S&&((async(e,t)=>{setTimeout((()=>{let i=e[t];i&&i.focus()}),100)})(De,S),Ve.set(void 0))}88&e.$$.dirty[0]|1072692224&e.$$.dirty[1]&&(i(4,Ue=[]),n&&Ue.push({id:"quality-settings",weight:Bf,type:"OPEN_SUB_MENU",subMenuId:"quality-sub",getSubItemForFocus:()=>{let e=h.findIndex((e=>e.selected));return Be["quality-sub"].children[e+1]},ariaLabel:Pt("aria_label_menu_quality",{actual:Ie}),icon:Sa,label:Pt("menu_quality"),value:r,valueComponent:Fm}),Me&&Ue.push({id:"audio-language-settings",weight:Uf,type:"OPEN_SUB_MENU",subMenuId:"audio-language-sub",getSubItemForFocus:()=>{let e=d.findIndex((e=>e.id===p?.id));return Be["audio-language-sub"].children[e+1]},ariaLabel:Pt("aria_label_menu_audio_languages",{actual:Ef(p,d)}),icon:_m,label:Pt("menu_audio_languages"),value:Ef(p,d)}),Pe&&Ue.push({id:"playback-rate-settings",weight:Ff,type:"OPEN_SUB_MENU",subMenuId:"playback-rate-sub",getSubItemForFocus:()=>{let e=c.findIndex((e=>e.selected));return Be["playback-rate-sub"].children[e+1]},ariaLabel:Pt("aria_label_menu_rate",{actual:Ne}),icon:ym,label:Pt("menu_playback_rate"),value:`${y}x`}),Re&&Ue.push({id:"subtitles-settings",weight:jf,type:"OPEN_SUB_MENU",subMenuId:"subtitles-sub",getSubItemForFocus:()=>{let e=l.findIndex((e=>e.selected));return Be["subtitles-sub"].children[e+1]},ariaLabel:Pt("aria_label_menu_subtitle",{actual:b.displayValue}),icon:Ra,label:Pt("subtitles_caption"),value:b.displayValue}),Le&&Ue.push({id:"traffic-saving-settings",weight:Hf,type:"SWITCH",onClick:ye,ariaLabel:g?Pt("aria_label_submenu_traffic_saving_off"):`${Pt("aria_label_submenu_traffic_saving_on")}. ${Pt("traffic_saving_helper_text")}`,icon:gm,label:Pt("menu_traffic_saving"),enabled:g,tooltipText:Pt("traffic_saving_helper_text"),maxTooltipWidth:175}),ke&&Ue.push({id:"download",weight:zf,type:"CLICK",onClick:we,label:Pt("download_video_caption"),ariaLabel:Pt("aria_label_menu_download"),icon:hm}),M.showSupport&&Ue.push({id:"report",weight:qf,type:"CLICK",onClick:Ee,label:Pt("menu_report"),ariaLabel:`${Pt("menu_report")}. ${Pt("aria_label_new_tab_alert")}`,icon:Rm,isHiddenFor:["desktop"]}),Ue.push({id:"copy-data",weight:Wf,type:"CLICK",onClick:xe,label:Pt("menu_copy_debug"),ariaLabel:Pt("menu_copy_debug"),icon:Em,isHiddenFor:["desktop"]}),M.features.saveTraceInfoToFile&&Ue.push({id:"save-trace-info",weight:Gf,type:"CLICK",onClick:Ae,label:Pt("menu_save_debug"),ariaLabel:Pt("menu_save_debug"),icon:Em,isHiddenFor:["desktop"]}),Ue.push({id:"debug-info",weight:Qf,type:"CLICK",onClick:Ce,label:Pt(m?"aria_label_menu_debug_overlay_disable":"aria_label_menu_debug_overlay_enable"),ariaLabel:Pt("menu_debug_overlay"),icon:Cm,isHiddenFor:["desktop"]}),i(4,Ue=[...Ue,...f.map((e=>({...e,isAdditional:!0})))].filter((e=>!e.isHiddenFor?.length||!e.isHiddenFor?.includes("desktop")&&!o||!e.isHiddenFor?.includes("mobile")&&o)).sort(ur))),96&e.$$.dirty[0]|33030144&e.$$.dirty[1]&&(i(5,Fe=[]),u["quality-sub"]&&Fe.push({id:"quality-sub",parentItemId:"quality-settings",title:Pt("submenu_quality"),closeSettingsMenu:le,items:[...h.map((e=>({type:"SELECT_VALUE",value:e.value,valueComponent:Nm,valueComponentParams:{quality:e.value,label:e.displayValue,isMobile:o,isSubCase:!0},selectItem:ve,selected:e.selected,label:e.displayValue})))]}),u["audio-language-sub"]&&Fe.push({id:"audio-language-sub",parentItemId:"audio-language-settings",title:Pt("submenu_audio_languages"),closeSettingsMenu:le,items:d.map((e=>({type:"SELECT_VALUE",value:e,dataValue:e.id,selectItem:be,selected:e.id===p?.id,label:Ef(e,d)})))}),u["playback-rate-sub"]&&Fe.push({id:"playback-rate-sub",parentItemId:"playback-rate-settings",title:Pt("submenu_playback_rate"),closeSettingsMenu:le,items:c.map((e=>({type:"SELECT_VALUE",value:e.value,selectItem:Se,selected:e.selected,label:e.displayValue})))}),u["subtitles-sub"]&&Fe.push({id:"subtitles-sub",parentItemId:"subtitles-settings",minWidth:164,title:Pt("subtitles_caption"),closeSettingsMenu:le,items:l.map((e=>({type:"SELECT_VALUE",value:e,selectItem:$e,selected:e.selected,label:e.displayValue})))}))},[k,R,De,Be,Ue,Fe,o,C,de,I,N,V,D,B,U,F,j,H,z,W,G,Y,X,Z,J,ee,ie,re,ae,pe,me,ge,Te,function(){fe=!0},function(){fe=!1},function(){return o?`max-height: ${Math.round(.6*A.height)}px`:`max-height: ${A.height-32-R}px; overflow: auto;`},Ve,e=>{qi(e,le)},L,P,he,ke,Le,Re,Pe,Me,Ie,Ne,r,n,l,u,c,d,p,h,f,m,g,b,y,S,$,_,T,w,E,x,e=>me(e.subMenuId),function(t,r){e.$$.not_equal(De[r.id],t)&&(De[r.id]=t,i(2,De))},function(e){te[e?"unshift":"push"]((()=>{k=e,i(0,k)}))},function(t,r){e.$$.not_equal(Be[r.id],t)&&(Be[r.id]=t,i(3,Be))}]}var vg=class extends Le{constructor(e){super(),Ce(this,e,gg,mg,h,{ref:0,supportLink:38,playerControlsHeight:1,returnFocus:39},ag,[-1,-1,-1,-1])}},{window:bg}=E;function yg(e){C(e,"svelte-13f9p53",".player-wrapper.svelte-13f9p53{position:absolute;width:100%;height:100%}.player-wrapper.svelte-13f9p53 .player-media{position:absolute;left:0;top:0;width:100%;height:100%;background:var(--black);transition:transform 0.2s ease-in-out}.spherical-video-icon.svelte-13f9p53{display:inline-block;position:absolute;top:calc(50% - 23px);left:calc(50% - 38px)}.video-wrapper.svelte-13f9p53,.video-container.svelte-13f9p53,.ads-container.svelte-13f9p53{position:absolute;width:100%;height:100%;left:0;top:0}.video-wrapper.svelte-13f9p53{z-index:var(--video-container-z-index);background:var(--black)}.video-container.svelte-13f9p53{z-index:var(--video-container-z-index);transition:var(--rotate-transition-duration) ease all}.video-container.fast-rotate.svelte-13f9p53{transition:none}.nocursor.svelte-13f9p53{cursor:none}.ads-container.svelte-13f9p53{z-index:var(--ads-container-z-index);background:var(--black)}.settings-menu.svelte-13f9p53{position:absolute;z-index:var(--settings-menu-z-index);bottom:57px;right:18px;transition:opacity 0.2s, visibility 0.2s}")}function Sg(e){let t,i;return t=new yf({props:{thumbUrl:e[4],startTime:e[5]?.startTime}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};16&i[0]&&(r.thumbUrl=e[4]),32&i[0]&&(r.startTime=e[5]?.startTime),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function $g(e){let t,i;return t=new Tf({props:{kind:"recover",thumbUrl:e[4]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};16&i[0]&&(r.thumbUrl=e[4]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function _g(e){let t,i;return t=new Tf({props:{kind:"record",thumbUrl:e[4]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};16&i[0]&&(r.thumbUrl=e[4]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Tg(e){let t,i,r;return i=new vi({props:{adsSlotId:e[9],adsParams:e[10],adsPreviewParam:e[11],duration:e[12]}}),{c(){t=P("div"),Ee(i.$$.fragment),U(t,"class","ads-container svelte-13f9p53"),z(t,"hidden","ads"!==e[37])},m(e,n){k(e,t,n),xe(i,t,null),r=!0},p(e,n){let a={};512&n[0]&&(a.adsSlotId=e[9]),1024&n[0]&&(a.adsParams=e[10]),2048&n[0]&&(a.adsPreviewParam=e[11]),4096&n[0]&&(a.duration=e[12]),i.$set(a),(!r||64&n[1])&&z(t,"hidden","ads"!==e[37])},i(e){r||(be(i.$$.fragment,e),r=!0)},o(e){ye(i.$$.fragment,e),r=!1},d(e){e&&L(t),Ae(i)}}}function wg(e){let t,i;return t=new Jr({props:{title:e[18],thumb:e[19],clickCloseIcon:e[159]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};262144&i[0]&&(r.title=e[18]),524288&i[0]&&(r.thumb=e[19]),536870912&i[0]&&(r.clickCloseIcon=e[159]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Eg(e){let t,i;return t=new tf({props:{title:e[3],isHidden:!e[35]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};8&i[0]&&(r.title=e[3]),16&i[1]&&(r.isHidden=!e[35]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function xg(e){let t,i;return t=new Th({props:{isShifted:"video"===e[37]&&e[35]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};80&i[1]&&(r.isShifted="video"===e[37]&&e[35]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Ag(e){let t,i,r;return i=new _t({props:{"aria-label":Pt("video360")}}),{c(){t=P("div"),Ee(i.$$.fragment),U(t,"class","spherical-video-icon svelte-13f9p53")},m(e,n){k(e,t,n),xe(i,t,null),r=!0},i(e){r||(be(i.$$.fragment,e),r=!0)},o(e){ye(i.$$.fragment,e),r=!1},d(e){e&&L(t),Ae(i)}}}function Cg(e){let t,i;return t=new Fh({props:{thumbUrl:e[4],chromecastDeviceName:e[53]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};16&i[0]&&(r.thumbUrl=e[4]),4194304&i[1]&&(r.chromecastDeviceName=e[53]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function kg(e){let t,i;return t=new Nh({props:{shifted:e[35],captions:e[55],position:e[56],playerSize:e[33]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};16&i[1]&&(r.shifted=e[35]),16777216&i[1]&&(r.captions=e[55]),33554432&i[1]&&(r.position=e[56]),4&i[1]&&(r.playerSize=e[33]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Lg(e){let t,i,r,n,a;return i=new Gh({}),{c(){t=P("div"),Ee(i.$$.fragment)},m(s,o){k(s,t,o),xe(i,t,null),r=!0,n||(a=[V(t,"contextmenu",D(e[108])),V(t,"click",B(e[119]))],n=!0)},p:o,i(e){r||(be(i.$$.fragment,e),r=!0)},o(e){ye(i.$$.fragment,e),r=!1},d(e){e&&L(t),Ae(i),n=!1,d(a)}}}function Rg(e){let t,i,r,n;function a(t){e[160](t)}function s(t){e[161](t)}let o={bottomHidden:"thumb"===e[37]||"LiveWaitingStart"===e[37]||"LiveWaitingRecover"===e[37]||"LiveWaitingRecord"===e[37],bottomNoSmooth:e[49],showControls:e[35],isAds:"ads"===e[37],canRewindLive:e[7]&&0!==e[57],logoClickable:e[13],logoHidden:e[14],logoTargetUrl:e[15],showNextPrevButtons:e[23],nextButtonActive:e[16],prevButtonActive:e[17],isOneVideoPlaylist:e[20],customFullscreenSupported:Bg,toggleFullscreen:e[106],seekToInteractive:e[24],playPrevChapter:e[25]};return void 0!==e[40]&&(o.playerControlsWrapperRef=e[40]),void 0!==e[41]&&(o.playerControlsRef=e[41]),t=new vp({props:o}),te.push((()=>we(t,"playerControlsWrapperRef",a))),te.push((()=>we(t,"playerControlsRef",s))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),n=!0},p(e,n){let a={};64&n[1]&&(a.bottomHidden="thumb"===e[37]||"LiveWaitingStart"===e[37]||"LiveWaitingRecover"===e[37]||"LiveWaitingRecord"===e[37]),262144&n[1]&&(a.bottomNoSmooth=e[49]),16&n[1]&&(a.showControls=e[35]),64&n[1]&&(a.isAds="ads"===e[37]),128&n[0]|67108864&n[1]&&(a.canRewindLive=e[7]&&0!==e[57]),8192&n[0]&&(a.logoClickable=e[13]),16384&n[0]&&(a.logoHidden=e[14]),32768&n[0]&&(a.logoTargetUrl=e[15]),8388608&n[0]&&(a.showNextPrevButtons=e[23]),65536&n[0]&&(a.nextButtonActive=e[16]),131072&n[0]&&(a.prevButtonActive=e[17]),1048576&n[0]&&(a.isOneVideoPlaylist=e[20]),16777216&n[0]&&(a.seekToInteractive=e[24]),33554432&n[0]&&(a.playPrevChapter=e[25]),!i&&512&n[1]&&(i=!0,a.playerControlsWrapperRef=e[40],ue((()=>i=!1))),!r&&1024&n[1]&&(r=!0,a.playerControlsRef=e[41],ue((()=>r=!1))),t.$set(a)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){ye(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Pg(e){let t,i,r,n;function a(t){e[163](t)}let s={supportLink:e[21],playerControlsHeight:e[41]?.clientHeight,returnFocus:e[162]};return void 0!==e[27]&&(s.ref=e[27]),i=new vg({props:s}),te.push((()=>we(i,"ref",a))),{c(){t=P("div"),Ee(i.$$.fragment),U(t,"class","settings-menu svelte-13f9p53")},m(e,r){k(e,t,r),xe(i,t,null),n=!0},p(e,t){let n={};2097152&t[0]&&(n.supportLink=e[21]),1024&t[1]&&(n.playerControlsHeight=e[41]?.clientHeight),2&t[0]&&(n.returnFocus=e[162]),!r&&134217728&t[0]&&(r=!0,n.ref=e[27],ue((()=>r=!1))),i.$set(n)},i(e){n||(be(i.$$.fragment,e),n=!0)},o(e){ye(i.$$.fragment,e),n=!1},d(e){e&&L(t),Ae(i)}}}function Og(e){let t,i;return t=new hn({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Mg(e){let t,i;return t=new Bn({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Ig(e){let t,i;return t=new Fr({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Ng(e){let t,i,r,n,a,s,o,l,u,c,d,p,h,f,m,g,v,b,y,S,$,_,T,w,E,x;t=new Xh({props:{hidden:"thumb"!==e[37]||e[36]||e[92]&&e[6],thumbUrl:e[4],startVideo:e[26]}});let A="LiveWaitingStart"===e[37]&&Sg(e),C="LiveWaitingRecover"===e[37]&&$g(e),R="LiveWaitingRecord"===e[37]&&_g(e),P=e[8]&&e[22]&&Tg(e),O=e[30]&&e[18]&&e[19]&&wg(e),M=e[44]&&Eg(e),V=e[48]&&xg(e),D=e[52]&&Ag(),B=e[38]&&Cg(e),U="off"!==e[54].value&&kg(e),F=e[36]&&Lg(e),j=e[22]&&Rg(e),H=!e[38]&&"ads"!==e[37]&&Pg(e);function z(t){e[165](t)}g=new Ni({props:{isLive:e[58],isHidden:!e[43],isPlaying:e[50],position:e[56],duration:e[59]}}),b=new lh({props:{data:e[103]}});let q={supportLink:e[21],returnFocus:e[164],visible:e[32],playerContainerRef:e[39],controlsContainerRef:e[40],position:e[60]};void 0!==e[31]&&(q.menuElementRef=e[31]),S=new gr({props:q}),te.push((()=>we(S,"menuElementRef",z)));let W=e[42]&&Og(),G=e[61]&&Mg(),Q=e[62]&&Ig();return{c(){Ee(t.$$.fragment),i=I(),A&&A.c(),r=I(),C&&C.c(),n=I(),R&&R.c(),a=I(),P&&P.c(),s=I(),O&&O.c(),o=I(),M&&M.c(),l=I(),V&&V.c(),u=I(),D&&D.c(),c=I(),B&&B.c(),d=I(),U&&U.c(),p=I(),F&&F.c(),h=I(),j&&j.c(),f=I(),H&&H.c(),m=I(),Ee(g.$$.fragment),v=I(),Ee(b.$$.fragment),y=I(),Ee(S.$$.fragment),_=I(),W&&W.c(),T=I(),G&&G.c(),w=I(),Q&&Q.c(),E=N()},m(e,$){xe(t,e,$),k(e,i,$),A&&A.m(e,$),k(e,r,$),C&&C.m(e,$),k(e,n,$),R&&R.m(e,$),k(e,a,$),P&&P.m(e,$),k(e,s,$),O&&O.m(e,$),k(e,o,$),M&&M.m(e,$),k(e,l,$),V&&V.m(e,$),k(e,u,$),D&&D.m(e,$),k(e,c,$),B&&B.m(e,$),k(e,d,$),U&&U.m(e,$),k(e,p,$),F&&F.m(e,$),k(e,h,$),j&&j.m(e,$),k(e,f,$),H&&H.m(e,$),k(e,m,$),xe(g,e,$),k(e,v,$),xe(b,e,$),k(e,y,$),xe(S,e,$),k(e,_,$),W&&W.m(e,$),k(e,T,$),G&&G.m(e,$),k(e,w,$),Q&&Q.m(e,$),k(e,E,$),x=!0},p(e,i){let v={};64&i[0]|96&i[1]&&(v.hidden="thumb"!==e[37]||e[36]||e[92]&&e[6]),16&i[0]&&(v.thumbUrl=e[4]),67108864&i[0]&&(v.startVideo=e[26]),t.$set(v),"LiveWaitingStart"===e[37]?A?(A.p(e,i),64&i[1]&&be(A,1)):(A=Sg(e),A.c(),be(A,1),A.m(r.parentNode,r)):A&&(ge(),ye(A,1,1,(()=>{A=null})),ve()),"LiveWaitingRecover"===e[37]?C?(C.p(e,i),64&i[1]&&be(C,1)):(C=$g(e),C.c(),be(C,1),C.m(n.parentNode,n)):C&&(ge(),ye(C,1,1,(()=>{C=null})),ve()),"LiveWaitingRecord"===e[37]?R?(R.p(e,i),64&i[1]&&be(R,1)):(R=_g(e),R.c(),be(R,1),R.m(a.parentNode,a)):R&&(ge(),ye(R,1,1,(()=>{R=null})),ve()),e[8]&&e[22]?P?(P.p(e,i),4194560&i[0]&&be(P,1)):(P=Tg(e),P.c(),be(P,1),P.m(s.parentNode,s)):P&&(ge(),ye(P,1,1,(()=>{P=null})),ve()),e[30]&&e[18]&&e[19]?O?(O.p(e,i),1074528256&i[0]&&be(O,1)):(O=wg(e),O.c(),be(O,1),O.m(o.parentNode,o)):O&&(ge(),ye(O,1,1,(()=>{O=null})),ve()),e[44]?M?(M.p(e,i),8192&i[1]&&be(M,1)):(M=Eg(e),M.c(),be(M,1),M.m(l.parentNode,l)):M&&(ge(),ye(M,1,1,(()=>{M=null})),ve()),e[48]?V?(V.p(e,i),131072&i[1]&&be(V,1)):(V=xg(e),V.c(),be(V,1),V.m(u.parentNode,u)):V&&(ge(),ye(V,1,1,(()=>{V=null})),ve()),e[52]?D?2097152&i[1]&&be(D,1):(D=Ag(),D.c(),be(D,1),D.m(c.parentNode,c)):D&&(ge(),ye(D,1,1,(()=>{D=null})),ve()),e[38]?B?(B.p(e,i),128&i[1]&&be(B,1)):(B=Cg(e),B.c(),be(B,1),B.m(d.parentNode,d)):B&&(ge(),ye(B,1,1,(()=>{B=null})),ve()),"off"!==e[54].value?U?(U.p(e,i),8388608&i[1]&&be(U,1)):(U=kg(e),U.c(),be(U,1),U.m(p.parentNode,p)):U&&(ge(),ye(U,1,1,(()=>{U=null})),ve()),e[36]?F?(F.p(e,i),32&i[1]&&be(F,1)):(F=Lg(e),F.c(),be(F,1),F.m(h.parentNode,h)):F&&(ge(),ye(F,1,1,(()=>{F=null})),ve()),e[22]?j?(j.p(e,i),4194304&i[0]&&be(j,1)):(j=Rg(e),j.c(),be(j,1),j.m(f.parentNode,f)):j&&(ge(),ye(j,1,1,(()=>{j=null})),ve()),e[38]||"ads"===e[37]?H&&(ge(),ye(H,1,1,(()=>{H=null})),ve()):H?(H.p(e,i),192&i[1]&&be(H,1)):(H=Pg(e),H.c(),be(H,1),H.m(m.parentNode,m));let b={};134217728&i[1]&&(b.isLive=e[58]),4096&i[1]&&(b.isHidden=!e[43]),524288&i[1]&&(b.isPlaying=e[50]),33554432&i[1]&&(b.position=e[56]),268435456&i[1]&&(b.duration=e[59]),g.$set(b);let y={};2097152&i[0]&&(y.supportLink=e[21]),2&i[0]&&(y.returnFocus=e[164]),2&i[1]&&(y.visible=e[32]),256&i[1]&&(y.playerContainerRef=e[39]),512&i[1]&&(y.controlsContainerRef=e[40]),536870912&i[1]&&(y.position=e[60]),!$&&1&i[1]&&($=!0,y.menuElementRef=e[31],ue((()=>$=!1))),S.$set(y),e[42]?W?2048&i[1]&&be(W,1):(W=Og(),W.c(),be(W,1),W.m(T.parentNode,T)):W&&(ge(),ye(W,1,1,(()=>{W=null})),ve()),e[61]?G?1073741824&i[1]&&be(G,1):(G=Mg(),G.c(),be(G,1),G.m(w.parentNode,w)):G&&(ge(),ye(G,1,1,(()=>{G=null})),ve()),e[62]?Q?1&i[2]&&be(Q,1):(Q=Ig(),Q.c(),be(Q,1),Q.m(E.parentNode,E)):Q&&(ge(),ye(Q,1,1,(()=>{Q=null})),ve())},i(e){x||(be(t.$$.fragment,e),be(A),be(C),be(R),be(P),be(O),be(M),be(V),be(D),be(B),be(U),be(F),be(j),be(H),be(g.$$.fragment,e),be(b.$$.fragment,e),be(S.$$.fragment,e),be(W),be(G),be(Q),x=!0)},o(e){ye(t.$$.fragment,e),ye(A),ye(C),ye(R),ye(P),ye(O),ye(M),ye(V),ye(D),ye(B),ye(U),ye(F),ye(j),ye(H),ye(g.$$.fragment,e),ye(b.$$.fragment,e),ye(S.$$.fragment,e),ye(W),ye(G),ye(Q),x=!1},d(e){e&&(L(i),L(r),L(n),L(a),L(s),L(o),L(l),L(u),L(c),L(d),L(p),L(h),L(f),L(m),L(v),L(y),L(_),L(T),L(w),L(E)),Ae(t,e),A&&A.d(e),C&&C.d(e),R&&R.d(e),P&&P.d(e),O&&O.d(e),M&&M.d(e),V&&V.d(e),D&&D.d(e),B&&B.d(e),U&&U.d(e),F&&F.d(e),j&&j.d(e),H&&H.d(e),Ae(g,e),Ae(b,e),Ae(S,e),W&&W.d(e),G&&G.d(e),Q&&Q.d(e)}}}function Vg(e){let t,i,r,n,a,s,l,u,c=e[51],p=Ng(e);return{c(){t=P("div"),i=P("div"),n=I(),p.c(),a=N(),U(i,"class","video-container svelte-13f9p53"),U(i,"style",r=`transform: rotate(${e[34]}deg) scale(${e[46]})`),U(i,"data-testid","video-container"),U(i,"data-is-playing",e[50]),z(i,"fast-rotate",!e[2].isSmoothVideoRotate),U(t,"class","video-wrapper svelte-13f9p53"),z(t,"hidden","video"!==e[37]),z(t,"nocursor",e[45])},m(r,o){k(r,t,o),A(t,i),e[158](i),k(r,n,o),p.m(r,o),k(r,a,o),s=!0,l||(u=[V(t,"contextmenu",D(e[108])),V(t,"mousedown",D(e[113])),V(t,"mouseup",D(e[114])),V(t,"click",D(e[116])),V(t,"dblclick",D(e[115]))],l=!0)},p(e,n){(!s||32776&n[1]&&r!==(r=`transform: rotate(${e[34]}deg) scale(${e[46]})`))&&U(i,"style",r),(!s||524288&n[1])&&U(i,"data-is-playing",e[50]),(!s||4&n[0])&&z(i,"fast-rotate",!e[2].isSmoothVideoRotate),(!s||64&n[1])&&z(t,"hidden","video"!==e[37]),(!s||16384&n[1])&&z(t,"nocursor",e[45]),1048576&n[1]&&h(c,c=e[51])?(ge(),ye(p,1,1,o),ve(),p=Ng(e),p.c(),be(p,1),p.m(a.parentNode,a)):p.p(e,n)},i(e){s||(be(p),s=!0)},o(e){ye(p),s=!1},d(i){i&&(L(t),L(n),L(a)),e[158](null),p.d(i),l=!1,d(u)}}}function Dg(e){let t,i,r,n,a,s,o,l={toggleFullscreen:e[106],hideContextMenu:e[107],showHotKeyHelpers:e[117],showKeyMap:e[118],isAds:"ads"===e[37],fakePlayButtonHandler:e[47]?e[105]:void 0,$$slots:{default:[Vg]},$$scope:{ctx:e}};return i=new un({props:l}),e[166](i),{c(){t=P("div"),Ee(i.$$.fragment),r=I(),n=P("div"),U(n,"class","overlay-container"),U(t,"class","player-wrapper svelte-13f9p53")},m(l,u){k(l,t,u),xe(i,t,null),A(t,r),A(t,n),e[167](n),e[168](t),a=!0,s||(o=[V(bg,"blur",e[107]),V(t,"mouseenter",e[109]),V(t,"mouseleave",e[111]),V(t,"mousemove",e[112]),V(t,"click",e[120],!0),V(t,"focusin",e[110],!0)],s=!0)},p(e,t){let r={};64&t[1]&&(r.isAds="ads"===e[37]),65536&t[1]&&(r.fakePlayButtonHandler=e[47]?e[105]:void 0),1879048191&t[0]|2147418111&t[1]|1&t[2]|512&t[6]&&(r.$$scope={dirty:t,ctx:e}),i.$set(r)},i(e){a||(be(i.$$.fragment,e),a=!0)},o(e){ye(i.$$.fragment,e),a=!1},d(r){r&&L(t),e[166](null),Ae(i),e[167](null),e[168](null),s=!1,d(o)}}}var Bg=!0;function Ug(e){return e?e.offsetTop+Ug(e.offsetParent):0}function Fg(e){return e?e.offsetLeft+Fg(e.offsetParent):0}function jg(e,t,i){let r,s,o,l,u,c,d,p,h,f,m,b,y,S,$,_,T,w,E,x,A,C,k,L,R,P,O,M,I,N,V,D,B,U,F,j,H,z,q,W,G,Y,K,X,{store:J}=t,{uiConfig:ee}=t,{title:ie}=t,{thumbUrl:re}=t,{videoContainer:ne}=t,{interactiveContainer:ae}=t,{live:se}=t,{autoplay:le}=t,{canRewindLive:ue}=t,{showAds:ce}=t,{adsSlotId:de}=t,{adsParams:pe}=t,{adsPreviewParam:he}=t,{duration:fe}=t,{logoClickable:me}=t,{logoHidden:ge}=t,{logoTargetUrl:ve=""}=t,{nextButtonActive:be=!1}=t,{prevButtonActive:ye=!1}=t,{endScreenVideoTitle:Se}=t,{endScreenVideoThumb:$e}=t,{isOneVideoPlaylist:_e=!1}=t,{supportLink:Te}=t,{shadowRootContainer:we}=t,{outerContainerRef:Ee}=t,{playerStarted:xe=!1}=t,{fullScreenTarget:Ae}=t,{showMiniTimer:Ce=!1}=t,{showEndScreen:ke}=t,{showNextPrevButtons:Le}=t,{keyboardControls:Re}=t,{seekToInteractive:Pe}=t,{playPrevChapter:Oe}=t,{firstStart:Me}=t,Ie=J.getLogger().createComponentLog("Root component"),Ne=J.interfaceLanguage$;v(e,Ne,(e=>i(51,B=e)));let Ve=J.state.playbackState$;v(e,Ve,(e=>i(155,I=e)));let De=J.ads.playbackState;v(e,De,(e=>i(156,N=e)));let Be=J.state.positionWithScrubbing$;v(e,Be,(e=>i(56,z=e)));let Ue=J.state.duration$;v(e,Ue,(e=>i(59,G=e)));let Fe=J.playerPhase;v(e,Fe,(e=>i(37,L=e)));let je=J.ui.isFullscreen;v(e,je,(e=>i(145,y=e)));let He=J.ui.controlsVisible;v(e,He,(e=>i(35,E=e)));let ze=J.ui.settingsMenu.visible$;v(e,ze,(e=>i(143,d=e)));let qe=J.ui.settingsMenu.openedByBtnKeyboard$;v(e,qe,(e=>i(142,c=e)));let We=J.ui.scrubbingInProgress;v(e,We,(e=>i(147,T=e)));let Qe=J.ui.contextMenu.visible$;v(e,Qe,(e=>i(32,r=e)));let Ye=J.ui.debugPanelVisible;v(e,Ye,(e=>i(62,X=e)));let Ke=J.state.isLoaderVisible;v(e,Ke,(e=>i(157,V=e)));let Xe=J.state.isEnded$;v(e,Xe,(e=>i(144,h=e)));let Ze=J.state.chromecastConnected$;v(e,Ze,(e=>i(38,O=e)));let Je=J.state.chromecastDeviceName$;v(e,Je,(e=>i(53,F=e)));let et=J.ads.postrollPassed;v(e,et,(e=>i(150,C=e)));let it=J.state.isLive$;v(e,it,(e=>i(58,W=e)));let rt=J.state.isPlaying$;v(e,rt,(e=>i(50,D=e)));let nt=J.state.crashed$;v(e,nt,(e=>i(36,A=e)));let at=J.webApi.annotationsApi,st=J.webApi.pictureInPictureApi,ot=J.state.currentSubtitle$;v(e,ot,(e=>i(54,j=e)));let lt=J.state.currentSubtitleCaptions$;v(e,lt,(e=>i(55,H=e)));let ut=J.state.duration$;v(e,ut,(e=>i(57,q=e)));let ct=J.state.graphIsOpened$;v(e,ct,(e=>i(151,k=e)));let dt=J.ui.playerSize;v(e,dt,(e=>i(33,m=e)));let pt=J.ui.is3DVideo;v(e,pt,(e=>i(48,f=e)));let ht=J.ui.icon3DVideoVisible;v(e,ht,(e=>i(52,U=e)));let ft=J.ui.rotateAlpha;v(e,ft,(e=>i(34,_=e)));let mt=J.state.isInteractive,gt=J.state.isInteractiveTime$;v(e,gt,(e=>i(148,w=e)));let vt=J.state.isInteractiveExpectation$;v(e,vt,(e=>i(154,M=e)));let bt=J.state.hasInteractiveBranches,yt=J.ui.touched;v(e,yt,(e=>i(152,R=e)));let St=J.ui.modals.hotKeyMap.data;v(e,St,(e=>i(175,p=e)));let $t=J.ui.modals.hotKeyMap.show;v(e,$t,(e=>i(61,K=e)));let _t=J.ui.overlayContainer$,Tt=J.ui.controls.interactiveTimeIndicator;v(e,Tt,(e=>i(176,b=e)));let wt=J.state.showInteractiveTimeIndicator,Et=J.ui.contextMenu.position$;v(e,Et,(e=>i(60,Y=e)));let xt,At,Ct,kt,Lt,Rt,Ot,Mt=J.actions.internal.closeSettingsMenu,{fakeIsPlaying$:It}=tt();v(e,It,(e=>i(146,$=e))),St.set({title:Pt("hotkey_map_modal_title"),closeBtnText:Pt("hotkey_map_modal_close_btn_text"),groups:[{title:Pt("hotkey_map_group_title_common"),items:[{description:Pt("hotkey_map_item_mute_description"),value:Pt("hotkey_map_item_mute_value")},{description:Pt("hotkey_map_item_volume_up_description"),value:Pt("hotkey_map_item_volume_up_value")},{description:Pt("hotkey_map_item_volume_down_description"),value:Pt("hotkey_map_item_volume_down_value")},{description:Pt("hotkey_map_item_pip_description"),value:Pt("hotkey_map_item_pip_value")},{description:Pt("hotkey_map_item_full_screen_description"),value:Pt("hotkey_map_item_full_screen_value")},{description:Pt("hotkey_map_item_show_context_menu_description"),value:Pt("hotkey_map_item_show_context_menu_value")},{description:Pt("hotkey_map_item_show_hotkey_map_description"),value:Pt("hotkey_map_item_show_hotkey_map_value")}]},{title:Pt("hotkey_map_group_title_playback"),items:[{description:Pt("hotkey_map_item_play_toggle_description"),value:Pt("hotkey_map_item_play_toggle_value")},{description:Pt("hotkey_map_item_seek_backward_description"),value:Pt("hotkey_map_item_seek_backward_value")},{description:Pt("hotkey_map_item_seek_forward_description"),value:Pt("hotkey_map_item_seek_forward_value")},{description:Pt("hotkey_map_item_fast_seek_backward_description"),value:Pt("hotkey_map_item_fast_seek_backward_value")},{description:Pt("hotkey_map_item_fast_seek_forward_description"),value:Pt("hotkey_map_item_fast_seek_forward_value")},{description:Pt("hotkey_map_item_rate_down_description"),value:Pt("hotkey_map_item_rate_down_value")},{description:Pt("hotkey_map_item_rate_up_description"),value:Pt("hotkey_map_item_rate_up_value")},{description:Pt("hotkey_map_item_prev_frame_description"),value:Pt("hotkey_map_item_prev_frame_value")},{description:Pt("hotkey_map_item_next_frame_description"),value:Pt("hotkey_map_item_next_frame_value")},{description:Pt("hotkey_map_item_jump_seek_description"),value:Pt("hotkey_map_item_jump_seek_value")}]},{title:Pt("hotkey_map_group_title_subtitles"),items:[{description:Pt("hotkey_map_item_subtitles_toggle_description"),value:Pt("hotkey_map_item_subtitles_toggle_value")}]},{title:Pt("hotkey_map_group_title_episodes"),items:[{description:Pt("hotkey_map_item_prev_episode_description"),value:a.clientChecker.isApple?Pt("hotkey_map_item_prev_episode_mac_value"):Pt("hotkey_map_item_prev_episode_pc_value")},{description:Pt("hotkey_map_item_next_episode_description"),value:a.clientChecker.isApple?Pt("hotkey_map_item_next_episode_mac_value"):Pt("hotkey_map_item_next_episode_pc_value")}]}]});let Nt,Vt,Dt=Ge(!1);v(e,Dt,(e=>i(49,S=e)));let Bt,Ut=Ge(!1);v(e,Ut,(e=>i(153,P=e)));let Ft=Ge(),jt=Ge(!1);v(e,jt,(e=>i(149,x=e)));let Ht,zt,Xt,Jt,ei,ti,ii=!1,ri=!1,ni=!1,ai=!(le&&!ee.controls.showOnStartupAtAutoplay),si=!1,oi=!1,li=!1,{toggle:ui}=It,ci=!1,di=null;st?.setContext(Z());J.setUiCallbacks({onStarted:()=>{le&&!mt&&ee.controls.showOnStartupAtAutoplay&&pi(ee.controls.hideTimeout)}});let pi=e=>{window.clearTimeout(Lt),Ut.set(!1),Ut.set(!0),Lt=window.setTimeout((()=>Ut.set(!1)),e);let t=e-100;Bt=window.setTimeout((()=>{S&&Dt.set(!1)}),t>0?t:e)},hi=(e,t)=>{window.clearTimeout(Rt),Ft.set(null),Ft.set(t),Rt=window.setTimeout((()=>Ft.set(null)),e)},fi=pt.subscribe((e=>{ht.set(e),e&&(window.clearTimeout(Ot),Ot=window.setTimeout((()=>ht.set(!1)),ee.controls.hide360IconTimeout))})),mi=async()=>{let e=Qt();if(e){let t=Gt();e=t===vi()||t===we}if(e){pi(ee.controls.hideTimeoutFullscreen);try{await(st?.remove())}catch(e){Ie({message:String(e)})}}je.set(e),J.getAdmanWrapper().setFullscreen(e),y?J.callbacks?.onFullscreenEnter?.():J.callbacks?.onFullscreenExit?.()},gi=e=>{let t=e;dt.set({width:t.target.width,height:t.target.height})};Q((()=>(Yt(mi),ee.features.annotationsInside&&at?.init(xt),Zt(st)&&(st?.assignPlayerContainer(xt),st?.registryExternalEventHandlers({resize:gi})),ae&&ne.parentElement?.insertBefore(ae,ne.nextSibling),()=>{window.clearTimeout(Lt),window.clearTimeout(Bt),window.clearTimeout(Rt),window.clearTimeout(Ot),fi(),st?.dispose(),Kt(mi)})));let vi=()=>{let e=ee.features.fullscreenInternalTargetPlayerContainer||!Ee?xt:Ee,t=e.getRootNode(),i=t instanceof ShadowRoot?t.host:t,r=Ae instanceof HTMLElement&&Ae.contains(i);return ee.allowChangingFullscreenTarget&&Ae&&r?Ae:e},bi=async()=>{Qt()?(await Wt(document),Ie({message:"exit fullscreen"})):(Ie({message:"request fullscreen"}),await qt(vi()))},yi=()=>{Mt(),Qe.set(!1)};function Si(e){if(b&&wt){let t=e.currentTarget,i=Ug(t),r=Fg(t),n=e.pageX-r,a=e.pageY-i,{left:s,bottom:o,right:l}=b,u=l-s;return n>=s-u&&a<=o+u}}let $i=J.ui.contextMenu.openedByBtnKeyboard$;v(e,$i,(e=>i(141,u=e)));let _i=J.ui.contextMenu.btnRef$;v(e,_i,(e=>i(140,l=e)));let Ti,wi=J.ui.contextMenu.openedByHotKey$;v(e,wi,(e=>i(139,o=e)));let Ei=J.ui.contextMenu.lastActiveElem$;v(e,Ei,(e=>i(138,s=e)));return e.$$set=e=>{"store"in e&&i(125,J=e.store),"uiConfig"in e&&i(2,ee=e.uiConfig),"title"in e&&i(3,ie=e.title),"thumbUrl"in e&&i(4,re=e.thumbUrl),"videoContainer"in e&&i(0,ne=e.videoContainer),"interactiveContainer"in e&&i(126,ae=e.interactiveContainer),"live"in e&&i(5,se=e.live),"autoplay"in e&&i(6,le=e.autoplay),"canRewindLive"in e&&i(7,ue=e.canRewindLive),"showAds"in e&&i(8,ce=e.showAds),"adsSlotId"in e&&i(9,de=e.adsSlotId),"adsParams"in e&&i(10,pe=e.adsParams),"adsPreviewParam"in e&&i(11,he=e.adsPreviewParam),"duration"in e&&i(12,fe=e.duration),"logoClickable"in e&&i(13,me=e.logoClickable),"logoHidden"in e&&i(14,ge=e.logoHidden),"logoTargetUrl"in e&&i(15,ve=e.logoTargetUrl),"nextButtonActive"in e&&i(16,be=e.nextButtonActive),"prevButtonActive"in e&&i(17,ye=e.prevButtonActive),"endScreenVideoTitle"in e&&i(18,Se=e.endScreenVideoTitle),"endScreenVideoThumb"in e&&i(19,$e=e.endScreenVideoThumb),"isOneVideoPlaylist"in e&&i(20,_e=e.isOneVideoPlaylist),"supportLink"in e&&i(21,Te=e.supportLink),"shadowRootContainer"in e&&i(127,we=e.shadowRootContainer),"outerContainerRef"in e&&i(128,Ee=e.outerContainerRef),"playerStarted"in e&&i(22,xe=e.playerStarted),"fullScreenTarget"in e&&i(129,Ae=e.fullScreenTarget),"showMiniTimer"in e&&i(130,Ce=e.showMiniTimer),"showEndScreen"in e&&i(131,ke=e.showEndScreen),"showNextPrevButtons"in e&&i(23,Le=e.showNextPrevButtons),"keyboardControls"in e&&i(1,Re=e.keyboardControls),"seekToInteractive"in e&&i(24,Pe=e.seekToInteractive),"playPrevChapter"in e&&i(25,Oe=e.playPrevChapter),"firstStart"in e&&i(26,Me=e.firstStart)},e.$$.update=()=>{if(96&e.$$.dirty[1]|6&e.$$.dirty[5]&&i(42,Nt=("video"===L&&V||"ads"===L&&"inactive"===N)&&!A),268435456&e.$$.dirty[0]&&_t.set(Vt),2048&e.$$.dirty[4]|1&e.$$.dirty[5]&&(i(134,ni=ai&&I!==n.PlaybackState.PLAYING),ai||i(135,ai=!0)),1091045120&e.$$.dirty[4]&&i(136,Ht=w&&!d&&!(ii||ri)&&!(ni&&!M)),224&e.$$.dirty[1]|545788928&e.$$.dirty[4]&&He.set((ni||d||T||O||P)&&!Ht&&("video"===L||"ads"===L)&&!A),4&e.$$.dirty[0]|112&e.$$.dirty[1]|268435520&e.$$.dirty[4]&&i(43,zt=ee.features.thumbTimer&&Ce&&"video"===L&&!E&&!A&&!mt&&(ee.hideThumbTimerAfterTouch&&!R||!ee.hideThumbTimerAfterTouch)),64&e.$$.dirty[1]|136314880&e.$$.dirty[4]&&i(44,Xt="video"===L&&!k&&y),536871168&e.$$.dirty[0]|32&e.$$.dirty[1]|68157568&e.$$.dirty[4]&&i(30,Jt=ke&&(ce&&C||!ce)&&h&&!A&&!si),1073741824&e.$$.dirty[0]|16&e.$$.dirty[1]|50331648&e.$$.dirty[4]&&i(45,ei=x&&!(E||Jt)&&!w),4&e.$$.dirty[0]|25174016&e.$$.dirty[4]&&(!T&&oi&&!w&&pi(ee.controls.hideTimeoutCursor),i(137,oi=T)),1&e.$$.dirty[0]|12&e.$$.dirty[1]&&i(46,ti=ne&&_%180?m.height/m.width:1),4194304&e.$$.dirty[4]&&i(47,li=null!==$),134217728&e.$$.dirty[0]|786432&e.$$.dirty[4]&&zi(kt,d,c),3&e.$$.dirty[1]|131072&e.$$.dirty[4]&&zi(Ti,r,u),2&e.$$.dirty[1]|65536&e.$$.dirty[4]){l&&Hi(l,r,$i)}if(3&e.$$.dirty[1]|32768&e.$$.dirty[4]&&zi(Ti,r,o),2&e.$$.dirty[1]|16384&e.$$.dirty[4]){s&&(async(e,t,i)=>{await oe(),e&&!t&&g(i)&&(i.set(!1),e.focus())})(s,r,wi)}},[ne,Re,ee,ie,re,se,le,ue,ce,de,pe,he,fe,me,ge,ve,be,ye,Se,$e,_e,Te,xe,Le,Pe,Oe,Me,kt,Vt,si,Jt,Ti,r,m,_,E,A,L,O,xt,At,Ct,Nt,zt,Xt,ei,ti,li,f,S,D,B,U,F,j,H,z,q,W,G,Y,K,X,Ne,Ve,De,Be,Ue,Fe,je,He,ze,qe,We,Qe,Ye,Ke,Xe,Ze,Je,et,it,rt,nt,ot,lt,ut,ct,dt,pt,ht,ft,mt,gt,vt,yt,St,$t,Tt,Et,It,Dt,Ut,Ft,jt,ui,bi,yi,e=>{Qe.set(!0),Et.set({left:e.clientX,top:e.clientY})},function(){jt.set(!0),mt||pi(ee.controls.hideTimeoutCursor)},function(){mt||(Dt.set(!0),pi(ee.controls.hideTimeoutCursor))},function(){jt.set(!1),i(133,ri=!1),i(132,ii=!1),ci=!1,J.actions.internal.releaseCamera()},function(e){(function(e){if(xt){let t=Ug(e.currentTarget),r=m.height,n=e.pageY-t;if(Si(e))return void i(133,ri=!1);n<40?i(133,ri=!0):n>r-40?i(132,ii=!0):(i(133,ri=!1),d||i(132,ii=!1))}})(e),Ht||pi(ee.controls.hideTimeoutCursor),f&&ci&&di&&J.actions.internal.moveCameraFocusPX(di.clientX-e.clientX,di.clientY-e.clientY,e.timeStamp-di.timeStamp),di=e},e=>{0===e.button&&(ci=!0,J.actions.internal.holdCamera()),pi(ee.controls.hideTimeoutCursor)},e=>{0===e.button&&(di=e,ci=!1,J.actions.internal.releaseCamera()),pi(ee.controls.hideTimeoutCursor)},()=>{Bg&&(Ie({message:"double click on video"}),bi(),pi(ee.controls.hideTimeoutCursor))},()=>{if(r||d)yi();else if(!h||bt){if(li)return ui();if(Re?.focus(),!xe)return Me(),void pi(ee.controls.hideTimeoutCursor);J.actions.internal.togglePlay(),pi(ee.controls.hideTimeoutCursor)}},e=>{yi(),yt.set(!0),pi(ee.controls.hideTimeout),e&&hi(ee.controls.hideHotKeyHelpers,e)},()=>{yi(),J.callbacks?.onOpenHotKeyMap?J.callbacks?.onOpenHotKeyMap(p):$t.update((e=>!e))},()=>{(r||d)&&yi()},()=>{yt.set(!0)},$i,_i,wi,Ei,J,ae,we,Ee,Ae,Ce,ke,ii,ri,ni,ai,Ht,oi,s,o,l,u,c,d,h,y,$,T,w,x,C,k,R,P,M,I,N,V,function(e){te[e?"unshift":"push"]((()=>{ne=e,i(0,ne)}))},()=>i(29,si=!0),function(e){At=e,i(40,At)},function(e){Ct=e,i(41,Ct)},()=>Re?.focus(),function(e){kt=e,i(27,kt)},()=>Re?.focus(),function(e){Ti=e,i(31,Ti)},function(e){te[e?"unshift":"push"]((()=>{Re=e,i(1,Re)}))},function(e){te[e?"unshift":"push"]((()=>{Vt=e,i(28,Vt)}))},function(e){te[e?"unshift":"push"]((()=>{xt=e,i(39,xt)}))}]}var Hg=class extends Le{constructor(e){super(),Ce(this,e,jg,Dg,h,{store:125,uiConfig:2,title:3,thumbUrl:4,videoContainer:0,interactiveContainer:126,live:5,autoplay:6,canRewindLive:7,showAds:8,adsSlotId:9,adsParams:10,adsPreviewParam:11,duration:12,logoClickable:13,logoHidden:14,logoTargetUrl:15,nextButtonActive:16,prevButtonActive:17,endScreenVideoTitle:18,endScreenVideoThumb:19,isOneVideoPlaylist:20,supportLink:21,shadowRootContainer:127,outerContainerRef:128,playerStarted:22,fullScreenTarget:129,showMiniTimer:130,showEndScreen:131,showNextPrevButtons:23,keyboardControls:1,seekToInteractive:24,playPrevChapter:25,firstStart:26},yg,[-1,-1,-1,-1,-1,-1,-1])}};function zg(e){C(e,"svelte-nhq2ld",".double-click-area.svelte-nhq2ld{position:absolute;top:0;height:100%;width:25%;overflow:hidden}.double-click-area.left.svelte-nhq2ld{left:0}.double-click-area.right.svelte-nhq2ld{right:0}.semicircle.svelte-nhq2ld{position:absolute;top:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.5)}.semicircle.left.svelte-nhq2ld{left:0;border-top-right-radius:50%;border-bottom-right-radius:50%}.semicircle.right.svelte-nhq2ld{right:0;border-top-left-radius:50%;border-bottom-left-radius:50%}.info.svelte-nhq2ld{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex;flex-direction:column;align-items:center;justify-content:center}.triangles-wrapper.svelte-nhq2ld{position:relative;display:flex;margin-bottom:10px;justify-content:center}.triangle.svelte-nhq2ld{width:0;height:0;border-top:6px solid transparent;border-bottom:6px solid transparent;animation:svelte-nhq2ld-blink 500ms infinite;opacity:0}.triangle.right.svelte-nhq2ld:nth-child(1),.triangle.left.svelte-nhq2ld:nth-child(3){animation-delay:0ms}.triangle.right.svelte-nhq2ld:nth-child(2),.triangle.left.svelte-nhq2ld:nth-child(2){animation-delay:100ms}.triangle.right.svelte-nhq2ld:nth-child(3),.triangle.left.svelte-nhq2ld:nth-child(1){animation-delay:200ms}@keyframes svelte-nhq2ld-blink{0%{opacity:0}50%{opacity:1}100%{opacity:0}}.triangle.left.svelte-nhq2ld{border-right:8px solid var(--white)}.triangle.right.svelte-nhq2ld{border-left:8px solid var(--white)}.triangle.svelte-nhq2ld:not(:last-child){margin-right:5px}.step-caption.svelte-nhq2ld{margin:0;text-align:center;font-size:12px;line-height:1;color:var(--white)}")}function qg(e){let t,i,r,n,a,s,o,l,u,c,d,p,h,f,m,g,v=Pt("doubletap_seek_step",{seconds:e[2].toFixed(0)})+"";return{c(){t=P("div"),r=I(),n=P("div"),a=P("div"),s=P("div"),l=I(),u=P("div"),d=I(),p=P("div"),f=I(),m=P("p"),g=M(v),U(t,"class",i="semicircle "+e[0]+" svelte-nhq2ld"),U(s,"class",o="triangle "+e[0]+" svelte-nhq2ld"),U(u,"class",c="triangle "+e[0]+" svelte-nhq2ld"),U(p,"class",h="triangle "+e[0]+" svelte-nhq2ld"),U(a,"class","triangles-wrapper svelte-nhq2ld"),U(m,"class","step-caption svelte-nhq2ld"),U(n,"class","info svelte-nhq2ld")},m(e,i){k(e,t,i),k(e,r,i),k(e,n,i),A(n,a),A(a,s),A(a,l),A(a,u),A(a,d),A(a,p),A(n,f),A(n,m),A(m,g)},p(e,r){1&r&&i!==(i="semicircle "+e[0]+" svelte-nhq2ld")&&U(t,"class",i),1&r&&o!==(o="triangle "+e[0]+" svelte-nhq2ld")&&U(s,"class",o),1&r&&c!==(c="triangle "+e[0]+" svelte-nhq2ld")&&U(u,"class",c),1&r&&h!==(h="triangle "+e[0]+" svelte-nhq2ld")&&U(p,"class",h),4&r&&v!==(v=Pt("doubletap_seek_step",{seconds:e[2].toFixed(0)})+"")&&j(g,v)},d(e){e&&(L(t),L(r),L(n))}}}function Wg(e){let t,i,r,n,a=e[1]&&qg(e);return{c(){t=P("div"),a&&a.c(),U(t,"class",i="double-click-area "+e[0]+" svelte-nhq2ld")},m(i,s){k(i,t,s),a&&a.m(t,null),r||(n=V(t,"click",B(e[3]())),r=!0)},p(e,[r]){e[1]?a?a.p(e,r):(a=qg(e),a.c(),a.m(t,null)):a&&(a.d(1),a=null),1&r&&i!==(i="double-click-area "+e[0]+" svelte-nhq2ld")&&U(t,"class",i)},i:o,o,d(e){e&&L(t),a&&a.d(),r=!1,n()}}}function Gg(e,t,i){let{side:r}=t,{seekStep:n=0}=t,{handleSingleFirstClick:a}=t,{handleSecondClick:s}=t,o=!1,l=0,u=0,c=n;return Y((()=>{window.clearTimeout(l)})),e.$$set=e=>{"side"in e&&i(0,r=e.side),"seekStep"in e&&i(4,n=e.seekStep),"handleSingleFirstClick"in e&&i(5,a=e.handleSingleFirstClick),"handleSecondClick"in e&&i(6,s=e.handleSecondClick)},[r,o,c,()=>()=>{u+=1,i(2,c=n*(u-1)),1===u?a():(i(1,o=!0),s()),window.clearTimeout(l),l=window.setTimeout((()=>{u=0,i(1,o=!1)}),300)},n,a,s]}var Qg=class extends Le{constructor(e){super(),Ce(this,e,Gg,Wg,h,{side:0,seekStep:4,handleSingleFirstClick:5,handleSecondClick:6},zg)}};function Yg(e){C(e,"svelte-sa4h7d",".overlay.svelte-sa4h7d{width:100%;height:100%;background:rgba(0, 0, 0, 0.72);position:absolute}.next-video.svelte-sa4h7d{position:absolute;top:50%;left:50%;z-index:var(--end-screen-mobile-z-index);transform:translate(-50%, -50%);display:flex;flex-direction:column;max-width:362px;min-width:320px;margin:0 auto;padding-bottom:16px}.top.svelte-sa4h7d{display:flex;justify-content:space-between}.caption.svelte-sa4h7d{font-size:11px;font-weight:bold;color:var(--white);text-transform:uppercase;opacity:0.8}.row.svelte-sa4h7d{height:102px;background:rgba(48, 48, 48, .8);cursor:pointer;margin-top:6px;display:flex;flex-direction:row;width:100%}.column.svelte-sa4h7d{display:flex;flex-direction:column;flex-basis:50%}.thumb.svelte-sa4h7d{width:100%;height:100%;background:no-repeat center;background-size:cover;display:flex;align-items:center;position:relative;justify-content:space-around}.thumb-overlay.svelte-sa4h7d{width:100%;height:100%;position:absolute}.thumb-overlay.withOpacity.svelte-sa4h7d{background:var(--black);opacity:0.3}.title.svelte-sa4h7d{padding:10px 16px;font-size:12px;font-weight:bold;color:var(--white);line-height:1.6;max-height:52px;overflow:hidden}")}function Kg(e){let t,i,r,n,a,s,o,l,u,c,d,p,h,f,m,g,v,b,y,S,$,_,T=(e[3]?Pt("end_screen_next_video"):Pt("end_screen_recommended_video"))+"";l=new qr({}),l.$on("click",e[9]);let w=e[3]&&Xg(e);return{c(){t=P("div"),i=I(),r=P("div"),n=P("div"),a=P("div"),s=M(T),o=I(),Ee(l.$$.fragment),u=I(),c=P("div"),d=P("div"),p=P("div"),h=P("div"),f=I(),w&&w.c(),g=I(),v=P("div"),b=P("div"),y=M(e[0]),U(t,"class","overlay svelte-sa4h7d"),U(a,"class","caption svelte-sa4h7d"),U(n,"class","top svelte-sa4h7d"),U(h,"class","thumb-overlay svelte-sa4h7d"),z(h,"withOpacity",e[3]),U(p,"class","thumb svelte-sa4h7d"),U(p,"style",m=`background-image: url('${e[1]}')`),U(d,"class","column svelte-sa4h7d"),U(b,"class","title svelte-sa4h7d"),U(v,"class","column svelte-sa4h7d"),U(c,"class","row svelte-sa4h7d"),U(r,"class","next-video svelte-sa4h7d")},m(m,T){k(m,t,T),k(m,i,T),k(m,r,T),A(r,n),A(n,a),A(a,s),A(n,o),xe(l,n,null),A(r,u),A(r,c),A(c,d),A(d,p),A(p,h),A(p,f),w&&w.m(p,null),A(c,g),A(c,v),A(v,b),A(b,y),S=!0,$||(_=V(c,"click",e[7]),$=!0)},p(e,t){(!S||8&t)&&T!==(T=(e[3]?Pt("end_screen_next_video"):Pt("end_screen_recommended_video"))+"")&&j(s,T),(!S||8&t)&&z(h,"withOpacity",e[3]),e[3]?w?(w.p(e,t),8&t&&be(w,1)):(w=Xg(e),w.c(),be(w,1),w.m(p,null)):w&&(ge(),ye(w,1,1,(()=>{w=null})),ve()),(!S||2&t&&m!==(m=`background-image: url('${e[1]}')`))&&U(p,"style",m),(!S||1&t)&&j(y,e[0])},i(e){S||(be(l.$$.fragment,e),be(w),S=!0)},o(e){ye(l.$$.fragment,e),ye(w),S=!1},d(e){e&&(L(t),L(i),L(r)),Ae(l),w&&w.d(),$=!1,_()}}}function Xg(e){let t,i;return t=new Yr({props:{isRunning:e[4],onTimerEnded:e[8]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};16&i&&(r.isRunning=e[4]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Zg(e){let t,i,r=!e[2]&&Kg(e);return{c(){r&&r.c(),t=N()},m(e,n){r&&r.m(e,n),k(e,t,n),i=!0},p(e,[i]){e[2]?r&&(ge(),ye(r,1,1,(()=>{r=null})),ve()):r?(r.p(e,i),4&i&&be(r,1)):(r=Kg(e),r.c(),be(r,1),r.m(t.parentNode,t))},i(e){i||(be(r),i=!0)},o(e){ye(r),i=!1},d(e){e&&L(t),r&&r.d(e)}}}function Jg(e,t,i){let r,n,{title:a}=t,{thumb:s}=t,{isHide:o}=t,{clickCloseIcon:l}=t,u=et(),c=u.ui.autoplayNextEnabled$;v(e,c,(e=>i(3,r=e)));let d=u.ui.timerNextVideoRunning$;v(e,d,(e=>i(4,n=e)));let p=u.actions.internal.nextVideoClick,h=u.actions.internal.nextVideoAnnouncementClick,f=u.actions.internal.nextVideoAnnouncementAuto,m=u.actions.internal.nextVideoAnnouncementCancel;return Q((()=>{o&&r&&(p(!1),f())})),e.$$set=e=>{"title"in e&&i(0,a=e.title),"thumb"in e&&i(1,s=e.thumb),"isHide"in e&&i(2,o=e.isHide),"clickCloseIcon"in e&&i(10,l=e.clickCloseIcon)},e.$$.update=()=>{8&e.$$.dirty&&(r||m())},[a,s,o,r,n,c,d,()=>{p(!1),h()},()=>{p(!1),f()},()=>{l(),m()},l]}var ev=class extends Le{constructor(e){super(),Ce(this,e,Jg,Zg,h,{title:0,thumb:1,isHide:2,clickCloseIcon:10},Yg)}},{window:tv}=E;function iv(e){C(e,"svelte-dtyj47",".player-wrapper.svelte-dtyj47{position:absolute;width:100%;height:100%}.player-wrapper.svelte-dtyj47 .player-media{position:absolute;left:0;top:0;width:100%;height:100%;background:var(--black);transition:transform 0.2s ease-in-out}.spherical-video-icon.svelte-dtyj47{display:inline-block;position:absolute;top:calc(50% - 23px);left:calc(50% - 38px)}.video-wrapper.svelte-dtyj47,.video-container.svelte-dtyj47,.ads-container.svelte-dtyj47{position:absolute;width:100%;height:100%;left:0;top:0}.video-wrapper.svelte-dtyj47{z-index:var(--video-container-z-index);background:var(--black)}.video-container.svelte-dtyj47{z-index:var(--video-container-z-index);transition:var(--rotate-transition-duration) ease all}.video-container.fast-rotate.svelte-dtyj47{transition:none}.ads-container.svelte-dtyj47{z-index:var(--ads-container-z-index);background:var(--black)}.settings-mobile.svelte-dtyj47{position:absolute;z-index:var(--settings-menu-z-index);top:50%;left:50%;transform:translate(-50%,-50%);transition:opacity var(--controls-transition-duration);display:flex;align-items:center;max-width:320px;width:90%}")}function rv(e){let t,i,r,n=e[48]&&nv(e),a=e[49]&&av(e);return{c(){n&&n.c(),t=I(),a&&a.c(),i=N()},m(e,s){n&&n.m(e,s),k(e,t,s),a&&a.m(e,s),k(e,i,s),r=!0},p(e,r){e[48]?n?(n.p(e,r),131072&r[1]&&be(n,1)):(n=nv(e),n.c(),be(n,1),n.m(t.parentNode,t)):n&&(ge(),ye(n,1,1,(()=>{n=null})),ve()),e[49]?a?(a.p(e,r),262144&r[1]&&be(a,1)):(a=av(e),a.c(),be(a,1),a.m(i.parentNode,i)):a&&(ge(),ye(a,1,1,(()=>{a=null})),ve())},i(e){r||(be(n),be(a),r=!0)},o(e){ye(n),ye(a),r=!1},d(e){e&&(L(t),L(i)),n&&n.d(e),a&&a.d(e)}}}function nv(e){let t,i;return t=new Qg({props:{side:"left",seekStep:e[1].controls.seekStepMobile/1e3,handleSingleFirstClick:e[105],handleSecondClick:e[137]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};2&i[0]&&(r.seekStep=e[1].controls.seekStepMobile/1e3),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function av(e){let t,i;return t=new Qg({props:{side:"right",seekStep:e[1].controls.seekStepMobile/1e3,handleSingleFirstClick:e[105],handleSecondClick:e[138]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};2&i[0]&&(r.seekStep=e[1].controls.seekStepMobile/1e3),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function sv(e){let t,i;return t=new yf({props:{thumbUrl:e[2],startTime:e[3]?.startTime}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};4&i[0]&&(r.thumbUrl=e[2]),8&i[0]&&(r.startTime=e[3]?.startTime),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function ov(e){let t,i;return t=new Tf({props:{kind:"recover",thumbUrl:e[2]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};4&i[0]&&(r.thumbUrl=e[2]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function lv(e){let t,i;return t=new Tf({props:{kind:"record",thumbUrl:e[2]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};4&i[0]&&(r.thumbUrl=e[2]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function uv(e){let t,i,r;return i=new vi({props:{adsSlotId:e[7],adsParams:e[8],adsPreviewParam:e[9],duration:e[10]}}),{c(){t=P("div"),Ee(i.$$.fragment),U(t,"class","ads-container svelte-dtyj47"),z(t,"hidden","ads"!==e[39])},m(e,n){k(e,t,n),xe(i,t,null),r=!0},p(e,n){let a={};128&n[0]&&(a.adsSlotId=e[7]),256&n[0]&&(a.adsParams=e[8]),512&n[0]&&(a.adsPreviewParam=e[9]),1024&n[0]&&(a.duration=e[10]),i.$set(a),(!r||256&n[1])&&z(t,"hidden","ads"!==e[39])},i(e){r||(be(i.$$.fragment,e),r=!0)},o(e){ye(i.$$.fragment,e),r=!1},d(e){e&&L(t),Ae(i)}}}function cv(e){let t,i;return t=new ev({props:{title:e[16],thumb:e[17],isHide:!e[21]&&e[22]&&e[38],clickCloseIcon:e[139]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};65536&i[0]&&(r.title=e[16]),131072&i[0]&&(r.thumb=e[17]),6291456&i[0]|128&i[1]&&(r.isHide=!e[21]&&e[22]&&e[38]),536870912&i[0]&&(r.clickCloseIcon=e[139]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function dv(e){let t,i;return t=new Th({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function pv(e){let t,i,r;return i=new _t({props:{"aria-label":Pt("video360")}}),{c(){t=P("div"),Ee(i.$$.fragment),U(t,"class","spherical-video-icon svelte-dtyj47")},m(e,n){k(e,t,n),xe(i,t,null),r=!0},i(e){r||(be(i.$$.fragment,e),r=!0)},o(e){ye(i.$$.fragment,e),r=!1},d(e){e&&L(t),Ae(i)}}}function hv(e){let t,i;return t=new Fh({props:{thumbUrl:e[2],chromecastDeviceName:e[56]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};4&i[0]&&(r.thumbUrl=e[2]),33554432&i[1]&&(r.chromecastDeviceName=e[56]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function fv(e){let t,i;return t=new Nh({props:{shifted:e[32],captions:e[58],position:e[34],playerSize:e[35],isMobile:!0}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};2&i[1]&&(r.shifted=e[32]),134217728&i[1]&&(r.captions=e[58]),8&i[1]&&(r.position=e[34]),16&i[1]&&(r.playerSize=e[35]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function mv(e){let t,i,r,n,a;return i=new Gh({}),{c(){t=P("div"),Ee(i.$$.fragment)},m(s,o){k(s,t,o),xe(i,t,null),r=!0,n||(a=V(t,"click",B(e[106])),n=!0)},p:o,i(e){r||(be(i.$$.fragment,e),r=!0)},o(e){ye(i.$$.fragment,e),r=!1},d(e){e&&L(t),Ae(i),n=!1,a()}}}function gv(e){let t,i,r,n;function a(t){e[140](t)}function s(t){e[141](t)}let o={bottomHidden:"thumb"===e[39]||"LiveWaitingStart"===e[39]||"LiveWaitingRecover"===e[39]||"LiveWaitingRecord"===e[39]||"ads"===e[39],showControls:e[32],bottomNoSmooth:e[50],isAds:"ads"===e[39],canRewindLive:e[5]&&0!==e[59],logoClickable:e[11],logoHidden:e[12],logoTargetUrl:e[13],showAutoplayNext:e[22],showNextPrevButtons:e[23],nextButtonActive:e[14],prevButtonActive:e[15],isOneVideoPlaylist:e[18],customFullscreenSupported:e[45],endScreenShown:e[30],toggleFullscreen:e[103],seekToInteractive:e[24],playPrevChapter:e[25],onDisabledPlayPrevChapterClick:e[109],onDisabledSeekToInteractiveClick:e[110]};return void 0!==e[42]&&(o.playerControlsWrapperRef=e[42]),void 0!==e[43]&&(o.playerControlsRef=e[43]),t=new vp({props:o}),te.push((()=>we(t,"playerControlsWrapperRef",a))),te.push((()=>we(t,"playerControlsRef",s))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),n=!0},p(e,n){let a={};256&n[1]&&(a.bottomHidden="thumb"===e[39]||"LiveWaitingStart"===e[39]||"LiveWaitingRecover"===e[39]||"LiveWaitingRecord"===e[39]||"ads"===e[39]),2&n[1]&&(a.showControls=e[32]),524288&n[1]&&(a.bottomNoSmooth=e[50]),256&n[1]&&(a.isAds="ads"===e[39]),32&n[0]|268435456&n[1]&&(a.canRewindLive=e[5]&&0!==e[59]),2048&n[0]&&(a.logoClickable=e[11]),4096&n[0]&&(a.logoHidden=e[12]),8192&n[0]&&(a.logoTargetUrl=e[13]),4194304&n[0]&&(a.showAutoplayNext=e[22]),8388608&n[0]&&(a.showNextPrevButtons=e[23]),16384&n[0]&&(a.nextButtonActive=e[14]),32768&n[0]&&(a.prevButtonActive=e[15]),262144&n[0]&&(a.isOneVideoPlaylist=e[18]),16384&n[1]&&(a.customFullscreenSupported=e[45]),1073741824&n[0]&&(a.endScreenShown=e[30]),16777216&n[0]&&(a.seekToInteractive=e[24]),33554432&n[0]&&(a.playPrevChapter=e[25]),!i&&2048&n[1]&&(i=!0,a.playerControlsWrapperRef=e[42],ue((()=>i=!1))),!r&&4096&n[1]&&(r=!0,a.playerControlsRef=e[43],ue((()=>r=!1))),t.$set(a)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){ye(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function vv(e){let t,i,r,n;function s(t){e[142](t)}let o={supportLink:e[19],returnFocus:a.noop};return void 0!==e[27]&&(o.ref=e[27]),i=new vg({props:o}),te.push((()=>we(i,"ref",s))),{c(){t=P("div"),Ee(i.$$.fragment),U(t,"class","settings-mobile svelte-dtyj47")},m(e,r){k(e,t,r),xe(i,t,null),n=!0},p(e,t){let n={};524288&t[0]&&(n.supportLink=e[19]),!r&&134217728&t[0]&&(r=!0,n.ref=e[27],ue((()=>r=!1))),i.$set(n)},i(e){n||(be(i.$$.fragment,e),n=!0)},o(e){ye(i.$$.fragment,e),n=!1},d(e){e&&L(t),Ae(i)}}}function bv(e){let t,i;return t=new hn({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function yv(e){let t,i;return t=new Fr({}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Sv(e){let t,i,r,n,a,s,o,l,u,c,d,p,h,f,m,g,v,b,y,S,$=e[5]&&e[83]&&!e[53].has("TIMELINE");t=new Xh({props:{hidden:"thumb"!==e[39]||e[37]||e[94]&&e[4],thumbUrl:e[2],startVideo:e[26]}});let _=$&&rv(e),T="LiveWaitingStart"===e[39]&&sv(e),w="LiveWaitingRecover"===e[39]&&ov(e),E="LiveWaitingRecord"===e[39]&&lv(e),x=e[6]&&e[20]&&uv(e),A=e[30]&&e[16]&&e[17]&&cv(e),C=e[54]&&dv(),R=e[55]&&pv(),P=e[40]&&hv(e),O="off"!==e[57].value&&fv(e),M=e[37]&&mv(e),V=e[20]&&gv(e),D=e[31]&&vv(e);g=new Ni({props:{isLive:e[60],isHidden:!e[46],isPlaying:e[51],position:e[34],duration:e[33]}});let B=e[44]&&bv(),U=e[61]&&yv();return{c(){Ee(t.$$.fragment),i=I(),_&&_.c(),r=I(),T&&T.c(),n=I(),w&&w.c(),a=I(),E&&E.c(),s=I(),x&&x.c(),o=I(),A&&A.c(),l=I(),C&&C.c(),u=I(),R&&R.c(),c=I(),P&&P.c(),d=I(),O&&O.c(),p=I(),M&&M.c(),h=I(),V&&V.c(),f=I(),D&&D.c(),m=I(),Ee(g.$$.fragment),v=I(),B&&B.c(),b=I(),U&&U.c(),y=N()},m(e,$){xe(t,e,$),k(e,i,$),_&&_.m(e,$),k(e,r,$),T&&T.m(e,$),k(e,n,$),w&&w.m(e,$),k(e,a,$),E&&E.m(e,$),k(e,s,$),x&&x.m(e,$),k(e,o,$),A&&A.m(e,$),k(e,l,$),C&&C.m(e,$),k(e,u,$),R&&R.m(e,$),k(e,c,$),P&&P.m(e,$),k(e,d,$),O&&O.m(e,$),k(e,p,$),M&&M.m(e,$),k(e,h,$),V&&V.m(e,$),k(e,f,$),D&&D.m(e,$),k(e,m,$),xe(g,e,$),k(e,v,$),B&&B.m(e,$),k(e,b,$),U&&U.m(e,$),k(e,y,$),S=!0},p(e,i){let v={};16&i[0]|320&i[1]&&(v.hidden="thumb"!==e[39]||e[37]||e[94]&&e[4]),4&i[0]&&(v.thumbUrl=e[2]),67108864&i[0]&&(v.startVideo=e[26]),t.$set(v),32&i[0]|4194304&i[1]&&($=e[5]&&e[83]&&!e[53].has("TIMELINE")),$?_?(_.p(e,i),32&i[0]|4194304&i[1]&&be(_,1)):(_=rv(e),_.c(),be(_,1),_.m(r.parentNode,r)):_&&(ge(),ye(_,1,1,(()=>{_=null})),ve()),"LiveWaitingStart"===e[39]?T?(T.p(e,i),256&i[1]&&be(T,1)):(T=sv(e),T.c(),be(T,1),T.m(n.parentNode,n)):T&&(ge(),ye(T,1,1,(()=>{T=null})),ve()),"LiveWaitingRecover"===e[39]?w?(w.p(e,i),256&i[1]&&be(w,1)):(w=ov(e),w.c(),be(w,1),w.m(a.parentNode,a)):w&&(ge(),ye(w,1,1,(()=>{w=null})),ve()),"LiveWaitingRecord"===e[39]?E?(E.p(e,i),256&i[1]&&be(E,1)):(E=lv(e),E.c(),be(E,1),E.m(s.parentNode,s)):E&&(ge(),ye(E,1,1,(()=>{E=null})),ve()),e[6]&&e[20]?x?(x.p(e,i),1048640&i[0]&&be(x,1)):(x=uv(e),x.c(),be(x,1),x.m(o.parentNode,o)):x&&(ge(),ye(x,1,1,(()=>{x=null})),ve()),e[30]&&e[16]&&e[17]?A?(A.p(e,i),1073938432&i[0]&&be(A,1)):(A=cv(e),A.c(),be(A,1),A.m(l.parentNode,l)):A&&(ge(),ye(A,1,1,(()=>{A=null})),ve()),e[54]?C?8388608&i[1]&&be(C,1):(C=dv(),C.c(),be(C,1),C.m(u.parentNode,u)):C&&(ge(),ye(C,1,1,(()=>{C=null})),ve()),e[55]?R?16777216&i[1]&&be(R,1):(R=pv(),R.c(),be(R,1),R.m(c.parentNode,c)):R&&(ge(),ye(R,1,1,(()=>{R=null})),ve()),e[40]?P?(P.p(e,i),512&i[1]&&be(P,1)):(P=hv(e),P.c(),be(P,1),P.m(d.parentNode,d)):P&&(ge(),ye(P,1,1,(()=>{P=null})),ve()),"off"!==e[57].value?O?(O.p(e,i),67108864&i[1]&&be(O,1)):(O=fv(e),O.c(),be(O,1),O.m(p.parentNode,p)):O&&(ge(),ye(O,1,1,(()=>{O=null})),ve()),e[37]?M?(M.p(e,i),64&i[1]&&be(M,1)):(M=mv(e),M.c(),be(M,1),M.m(h.parentNode,h)):M&&(ge(),ye(M,1,1,(()=>{M=null})),ve()),e[20]?V?(V.p(e,i),1048576&i[0]&&be(V,1)):(V=gv(e),V.c(),be(V,1),V.m(f.parentNode,f)):V&&(ge(),ye(V,1,1,(()=>{V=null})),ve()),e[31]?D?(D.p(e,i),1&i[1]&&be(D,1)):(D=vv(e),D.c(),be(D,1),D.m(m.parentNode,m)):D&&(ge(),ye(D,1,1,(()=>{D=null})),ve());let S={};536870912&i[1]&&(S.isLive=e[60]),32768&i[1]&&(S.isHidden=!e[46]),1048576&i[1]&&(S.isPlaying=e[51]),8&i[1]&&(S.position=e[34]),4&i[1]&&(S.duration=e[33]),g.$set(S),e[44]?B?8192&i[1]&&be(B,1):(B=bv(),B.c(),be(B,1),B.m(b.parentNode,b)):B&&(ge(),ye(B,1,1,(()=>{B=null})),ve()),e[61]?U?1073741824&i[1]&&be(U,1):(U=yv(),U.c(),be(U,1),U.m(y.parentNode,y)):U&&(ge(),ye(U,1,1,(()=>{U=null})),ve())},i(e){S||(be(t.$$.fragment,e),be(_),be(T),be(w),be(E),be(x),be(A),be(C),be(R),be(P),be(O),be(M),be(V),be(D),be(g.$$.fragment,e),be(B),be(U),S=!0)},o(e){ye(t.$$.fragment,e),ye(_),ye(T),ye(w),ye(E),ye(x),ye(A),ye(C),ye(R),ye(P),ye(O),ye(M),ye(V),ye(D),ye(g.$$.fragment,e),ye(B),ye(U),S=!1},d(e){e&&(L(i),L(r),L(n),L(a),L(s),L(o),L(l),L(u),L(c),L(d),L(p),L(h),L(f),L(m),L(v),L(b),L(y)),Ae(t,e),_&&_.d(e),T&&T.d(e),w&&w.d(e),E&&E.d(e),x&&x.d(e),A&&A.d(e),C&&C.d(e),R&&R.d(e),P&&P.d(e),O&&O.d(e),M&&M.d(e),V&&V.d(e),D&&D.d(e),Ae(g,e),B&&B.d(e),U&&U.d(e)}}}function $v(e){let t,i,r,n,a,s,l,u,c,p,f,m=e[52],g=Sv(e);return{c(){t=P("div"),i=P("div"),r=P("div"),a=I(),g.c(),s=I(),l=P("div"),U(r,"class","video-container svelte-dtyj47"),U(r,"style",n=`transform: rotate(${e[36]}deg) scale(${e[47]})`),U(r,"data-testid","video-container"),U(r,"data-is-playing",e[51]),z(r,"fast-rotate",!e[1].isSmoothVideoRotate),U(i,"class","video-wrapper svelte-dtyj47"),z(i,"hidden","video"!==e[39]),U(l,"class","overlay-container"),U(t,"class","player-wrapper svelte-dtyj47"),U(t,"role","region"),U(t,"aria-label",u=Pt("aria_label_video_player")),U(t,"tabindex","-1")},m(n,o){k(n,t,o),A(t,i),A(i,r),e[136](r),A(t,a),g.m(t,null),A(t,s),A(t,l),e[143](l),e[144](t),c=!0,p||(f=[V(tv,"blur",e[104]),V(i,"click",D(e[105])),V(t,"click",e[107],!0),V(t,"focusin",e[108],!0)],p=!0)},p(e,a){(!c||65568&a[1]&&n!==(n=`transform: rotate(${e[36]}deg) scale(${e[47]})`))&&U(r,"style",n),(!c||1048576&a[1])&&U(r,"data-is-playing",e[51]),(!c||2&a[0])&&z(r,"fast-rotate",!e[1].isSmoothVideoRotate),(!c||256&a[1])&&z(i,"hidden","video"!==e[39]),2097152&a[1]&&h(m,m=e[52])?(ge(),ye(g,1,1,o),ve(),g=Sv(e),g.c(),be(g,1),g.m(t,s)):g.p(e,a)},i(e){c||(be(g),c=!0)},o(e){ye(g),c=!1},d(i){i&&L(t),e[136](null),g.d(i),e[143](null),e[144](null),p=!1,d(f)}}}function _v(e,t,i){let r,s,o,l,u,c,d,p,h,f,m,g,b,y,S,$,_,T,w,E,x,A,C,k,L,R,P,O,M,I,N,V,D,B,U,F,j,H,{store:z}=t,{uiConfig:q}=t,{thumbUrl:W}=t,{videoContainer:G}=t,{interactiveContainer:Y}=t,{live:K}=t,{autoplay:X}=t,{canRewindLive:J}=t,{showAds:ee}=t,{adsSlotId:ie}=t,{adsParams:re}=t,{adsPreviewParam:ne}=t,{duration:ae}=t,{logoClickable:se}=t,{logoHidden:oe}=t,{logoTargetUrl:le=""}=t,{nextButtonActive:ue=!1}=t,{prevButtonActive:ce=!1}=t,{endScreenVideoTitle:de}=t,{endScreenVideoThumb:pe}=t,{isOneVideoPlaylist:he=!1}=t,{supportLink:fe}=t,{shadowRootContainer:me}=t,{outerContainerRef:ge}=t,{showMiniTimer:ve=!1}=t,{fullScreenTarget:be}=t,{playerStarted:ye=!1}=t,{showEndScreen:Se}=t,{showAutoplayNext:$e}=t,{showNextPrevButtons:_e}=t,{seekToInteractive:Te}=t,{playPrevChapter:we}=t,{firstStart:Ee}=t,{seekTime:xe}=t,Ae=z.getLogger().createComponentLog("Root component"),Ce=z.interfaceLanguage$;v(e,Ce,(e=>i(52,M=e)));let ke=z.state.playbackState$;v(e,ke,(e=>i(133,L=e)));let Le=z.ads.playbackState;v(e,Le,(e=>i(134,R=e)));let Re=z.state.positionWithScrubbing$;v(e,Re,(e=>i(34,c=e)));let Pe=z.state.duration$;v(e,Pe,(e=>i(33,u=e)));let Oe=z.playerPhase;v(e,Oe,(e=>i(39,x=e)));let Me=z.ui.isFullscreen;v(e,Me,(e=>i(150,p=e)));let Ie=z.ui.controlsVisible;v(e,Ie,(e=>i(32,o=e)));let Ne=z.ui.interactiveHideMobileControls;v(e,Ne,(e=>i(125,g=e)));let Ve=z.ui.settingsMenu.visible$;v(e,Ve,(e=>i(31,s=e)));let De=z.ui.settingsMenu.openedByBtnKeyboard$;v(e,De,(e=>i(123,r=e)));let Be=z.ui.scrubbingInProgress;v(e,Be,(e=>i(126,y=e)));let Ue=z.ui.debugPanelVisible;v(e,Ue,(e=>i(61,H=e)));let Fe=z.state.isLoaderVisible;v(e,Fe,(e=>i(135,P=e)));let je=z.state.isEnded$;v(e,je,(e=>i(128,_=e)));let He=z.state.chromecastConnected$;v(e,He,(e=>i(40,A=e)));let ze=z.state.chromecastDeviceName$;v(e,ze,(e=>i(56,D=e)));let qe=z.ads.postrollPassed;v(e,qe,(e=>i(129,T=e)));let We=z.ui.mobileUnmuteButtonExpanded,Qe=z.ui.mobileUnmuteButtonVisible,Ye=z.state.isLive$;v(e,Ye,(e=>i(60,j=e)));let Ke=z.state.isPlaying$;v(e,Ke,(e=>i(51,O=e)));let Xe=z.state.isActiveLive$;v(e,Xe,(e=>i(124,d=e)));let Ze=z.state.isRewindableLive$,Je=z.state.crashed$;v(e,Je,(e=>i(37,$=e)));let et=z.webApi.annotationsApi,tt=z.webApi.pictureInPictureApi,it=z.state.videoSize$;v(e,it,(e=>i(151,f=e)));let rt=z.state.currentSubtitle$;v(e,rt,(e=>i(57,B=e)));let nt=z.state.currentSubtitleCaptions$;v(e,nt,(e=>i(58,U=e)));let at=z.state.duration$;v(e,at,(e=>i(59,F=e)));let st=z.state.graphIsOpened$;v(e,st,(e=>i(132,k=e)));let ot=z.ui.playerSize;v(e,ot,(e=>i(35,h=e)));let lt=z.ui.is3DVideo;v(e,lt,(e=>i(54,N=e)));let ut=z.ui.icon3DVideoVisible;v(e,ut,(e=>i(55,V=e)));let ct=z.ui.rotateAlpha;v(e,ct,(e=>i(36,b=e)));let dt=z.state.isInteractive,pt=z.state.isInteractiveTime$;v(e,pt,(e=>i(127,S=e)));let ht=z.state.isInteractiveExpectation$;v(e,ht,(e=>i(131,C=e)));let ft=z.state.hasInteractiveBranches,mt=z.ui.controls.disabledControls$;v(e,mt,(e=>i(53,I=e)));let gt=z.ui.touched;v(e,gt,(e=>i(130,E=e)));let vt=z.ui.overlayContainer$,bt=z.ui.autoplayNextEnabled$;v(e,bt,(e=>i(38,w=e)));let yt=z.state.loadedMetadata$;v(e,yt,(e=>i(149,l=e)));let St,$t,_t,Tt,wt,Et,xt,At,Ct,kt=z.actions.internal.closeSettingsMenu,Lt=z.callbacks?.onDisabledPlayPrevChapterClick,Rt=z.callbacks?.onDisabledSeekToInteractiveClick,Pt=Ge(!1);v(e,Pt,(e=>i(50,m=e)));let Ot,Mt,It,Nt,Vt,Dt,Bt=!1,Ut=!1,Ft=!0,jt=!1,Ht=!1;tt?.setContext(Z());z.setUiCallbacks({onStarted:e=>{clearTimeout(Et),e&&(Qe.set(!0),We.set(!0),Et=window.setTimeout((()=>{We.set(!1)}),q.controls.collapseMobileUnmute),dt||Xt(q.controls.hideTimeoutMobile))}});let zt=()=>{window.clearTimeout(wt),i(118,Bt=!1),g&&Ne.set(!1)},Xt=e=>{zt(),i(118,Bt=!0),wt=window.setTimeout((()=>i(118,Bt=!1)),e);let t=e-100;Ot=window.setTimeout((()=>{m&&Pt.set(!1)}),t>0?t:e)},Jt=lt.subscribe((e=>{ut.set(e),e&&(window.clearTimeout(xt),xt=window.setTimeout((()=>ut.set(!1)),q.controls.hide360IconTimeout))})),ei=async()=>{let e=Qt();if(e){let t=Gt(),i=ai(),r=a.clientChecker.isSamsungBrowser&&t===me;e=t===i||r}if(e){Xt(q.controls.hideTimeoutFullscreen);try{await(tt?.remove())}catch(e){Ae({message:String(e)})}try{let e=f?.width&&f?.height?f:h;await(e=>{let t=window.screen;return(async e=>t.orientation?t.orientation.lock(e):t.mozLockOrientation?t.mozLockOrientation(e):t.msLockOrientation?t.msLockOrientation(e):Promise.reject())(((e={width:0,height:0})=>e.width<=e.height?"portrait":"landscape")(e))})(e)}catch(e){Ae({message:String(e)})}}Me.set(e),z.getAdmanWrapper().setFullscreen(e),p?z.callbacks?.onFullscreenEnter?.():z.callbacks?.onFullscreenExit?.()},ti=e=>{let t=e;ot.set({width:t.target.width,height:t.target.height})};Q((()=>(Yt(ei),q.features.annotationsInside&&et?.init(St),Zt(tt)&&(tt?.assignPlayerContainer(St),tt?.registryExternalEventHandlers({resize:ti})),i(45,Ft=!a.clientChecker.isIphoneOrOldIpad),Y&&G.parentElement?.insertBefore(Y,G.nextSibling),()=>{window.clearTimeout(wt),window.clearTimeout(Ot),window.clearTimeout(Et),window.clearTimeout(xt),Jt(),tt?.dispose(),Kt(ei)})));let ii=!0,ri=!0,ni=e=>{let t=c+("forward"===e?1:-1)*q.controls.seekStepMobile/1e3;t<0?(i(48,ii=!1),t=0):t>=u&&(i(49,ri=!1),t=u),i(120,Ut=!0),xe(t)},ai=()=>{let e=a.clientChecker.isIOS||q.features.fullscreenInternalTargetPlayerContainer||!ge?St:ge,t=e.getRootNode(),i=t instanceof ShadowRoot?t.host:t,r=be instanceof HTMLElement&&be.contains(i);return q.allowChangingFullscreenTarget&&be&&r?be:e},si=()=>{kt()};return e.$$set=e=>{"store"in e&&i(111,z=e.store),"uiConfig"in e&&i(1,q=e.uiConfig),"thumbUrl"in e&&i(2,W=e.thumbUrl),"videoContainer"in e&&i(0,G=e.videoContainer),"interactiveContainer"in e&&i(112,Y=e.interactiveContainer),"live"in e&&i(3,K=e.live),"autoplay"in e&&i(4,X=e.autoplay),"canRewindLive"in e&&i(5,J=e.canRewindLive),"showAds"in e&&i(6,ee=e.showAds),"adsSlotId"in e&&i(7,ie=e.adsSlotId),"adsParams"in e&&i(8,re=e.adsParams),"adsPreviewParam"in e&&i(9,ne=e.adsPreviewParam),"duration"in e&&i(10,ae=e.duration),"logoClickable"in e&&i(11,se=e.logoClickable),"logoHidden"in e&&i(12,oe=e.logoHidden),"logoTargetUrl"in e&&i(13,le=e.logoTargetUrl),"nextButtonActive"in e&&i(14,ue=e.nextButtonActive),"prevButtonActive"in e&&i(15,ce=e.prevButtonActive),"endScreenVideoTitle"in e&&i(16,de=e.endScreenVideoTitle),"endScreenVideoThumb"in e&&i(17,pe=e.endScreenVideoThumb),"isOneVideoPlaylist"in e&&i(18,he=e.isOneVideoPlaylist),"supportLink"in e&&i(19,fe=e.supportLink),"shadowRootContainer"in e&&i(113,me=e.shadowRootContainer),"outerContainerRef"in e&&i(114,ge=e.outerContainerRef),"showMiniTimer"in e&&i(115,ve=e.showMiniTimer),"fullScreenTarget"in e&&i(116,be=e.fullScreenTarget),"playerStarted"in e&&i(20,ye=e.playerStarted),"showEndScreen"in e&&i(21,Se=e.showEndScreen),"showAutoplayNext"in e&&i(22,$e=e.showAutoplayNext),"showNextPrevButtons"in e&&i(23,_e=e.showNextPrevButtons),"seekToInteractive"in e&&i(24,Te=e.seekToInteractive),"playPrevChapter"in e&&i(25,we=e.playPrevChapter),"firstStart"in e&&i(26,Ee=e.firstStart),"seekTime"in e&&i(117,xe=e.seekTime)},e.$$.update=()=>{320&e.$$.dirty[1]|3072&e.$$.dirty[4]&&i(44,At=("video"===x&&P||"ads"===x&&"inactive"===R)&&!$),268435456&e.$$.dirty[0]&&vt.set(Ct),512&e.$$.dirty[4]&&i(119,Mt=L!==n.PlaybackState.PLAYING),100663296&e.$$.dirty[3]|402&e.$$.dirty[4]&&i(121,It=k||g||!Bt&&(_&&!!ft||Mt&&C)),543359040&e.$$.dirty[0]|192&e.$$.dirty[1]|48&e.$$.dirty[4]&&i(30,Vt=(Se||$e&&w)&&!!de&&!!pe&&(ee&&T||!ee)&&_&&!$&&!jt),1073741824&e.$$.dirty[0]|833&e.$$.dirty[1]|503316480&e.$$.dirty[3]|20&e.$$.dirty[4]&&Ie.set((Mt||s||y||A||!Vt&&(_||Bt&&!Ut))&&!It&&"video"===x&&!$),2&e.$$.dirty[0]|322&e.$$.dirty[1]|4194304&e.$$.dirty[3]|64&e.$$.dirty[4]&&i(46,Nt=q.features.thumbTimer&&ve&&"video"===x&&!o&&!$&&!dt&&(q.hideThumbTimerAfterTouch&&!E||!q.hideThumbTimerAfterTouch)),2&e.$$.dirty[0]|536870912&e.$$.dirty[3]|12&e.$$.dirty[4]&&(!y&&Ht&&!S&&Xt(q.controls.hideTimeoutMobile),i(122,Ht=y)),1&e.$$.dirty[0]|48&e.$$.dirty[1]&&i(47,Dt=G&&b%180?h.height/h.width:1),12&e.$$.dirty[1]|1&e.$$.dirty[4]&&(i(48,ii=c>0),i(49,ri=!d&&c<u)),134217728&e.$$.dirty[0]|1&e.$$.dirty[1]|1073741824&e.$$.dirty[3]&&zi(Tt,s,r)},[G,q,W,K,X,J,ee,ie,re,ne,ae,se,oe,le,ue,ce,de,pe,he,fe,ye,Se,$e,_e,Te,we,Ee,Tt,Ct,jt,Vt,s,o,u,c,h,b,$,w,x,A,St,$t,_t,At,Ft,Nt,Dt,ii,ri,m,O,M,I,N,V,D,B,U,F,j,H,Ce,ke,Le,Re,Pe,Oe,Me,Ie,Ne,Ve,De,Be,Ue,Fe,je,He,ze,qe,Ye,Ke,Xe,Ze,Je,it,rt,nt,at,st,ot,lt,ut,ct,dt,pt,ht,mt,gt,bt,yt,Pt,ni,async()=>{if(Qt())await Wt(document),Ae({message:"exit fullscreen"});else{if(Ae({message:"request fullscreen"}),a.clientChecker.isIOS&&!l)return;await qt(ai())}},si,()=>{if(!s)return ye?(i(120,Ut=!1),void(o?zt():Xt(q.controls.hideTimeoutMobile))):(Ee(),void Xt(q.controls.hideTimeoutCursor));si()},()=>{s&&si()},()=>{gt.set(!0)},()=>{dt||(Pt.set(!0),Xt(q.controls.hideTimeoutCursor))},e=>{Lt&&(Lt(e),Xt(q.controls.hideTimeoutMobile))},e=>{Rt&&(Rt(e),Xt(q.controls.hideTimeoutMobile))},z,Y,me,ge,ve,be,xe,Bt,Mt,Ut,It,Ht,r,d,g,y,S,_,T,E,C,k,L,R,P,function(e){te[e?"unshift":"push"]((()=>{G=e,i(0,G)}))},()=>ni("backward"),()=>ni("forward"),()=>i(29,jt=!0),function(e){$t=e,i(42,$t)},function(e){_t=e,i(43,_t)},function(e){Tt=e,i(27,Tt)},function(e){te[e?"unshift":"push"]((()=>{Ct=e,i(28,Ct)}))},function(e){te[e?"unshift":"push"]((()=>{St=e,i(41,St)}))}]}var Tv=class extends Le{constructor(e){super(),Ce(this,e,_v,$v,h,{store:111,uiConfig:1,thumbUrl:2,videoContainer:0,interactiveContainer:112,live:3,autoplay:4,canRewindLive:5,showAds:6,adsSlotId:7,adsParams:8,adsPreviewParam:9,duration:10,logoClickable:11,logoHidden:12,logoTargetUrl:13,nextButtonActive:14,prevButtonActive:15,endScreenVideoTitle:16,endScreenVideoThumb:17,isOneVideoPlaylist:18,supportLink:19,shadowRootContainer:113,outerContainerRef:114,showMiniTimer:115,fullScreenTarget:116,playerStarted:20,showEndScreen:21,showAutoplayNext:22,showNextPrevButtons:23,seekToInteractive:24,playPrevChapter:25,firstStart:26,seekTime:117},iv,[-1,-1,-1,-1,-1,-1])}};function wv(e){C(e,"svelte-zbipwr",".root.svelte-zbipwr{--white:#fff;--black:#000;--red:#ff3347;--blue-light:#70c1ff;--black-alpha-40:rgba(0, 0, 0, 0.40);--white-alpha-24:rgba(255, 255, 255, 0.24);--white-alpha-72:rgba(255, 255, 255, 0.72);--devider-gray:#dce1e6;--text-gray:#626d7a;--controls-height:40px;--controls-gradient-height:100px;--controls-transition-duration:0.25s;--controls-transition-fn:cubic-bezier(0.455, 0.03, 0.515, 0.955);--controls-desktop-item-margin-left:4px;--focused:var(--white);--focused-element-shadow:inset 0 0 0 2px var(--focused);--focused-slider-shadow:0 0 0 2px var(--focused);--big-play-size:96px;--big-play-radius:50%;--big-play-bg-color:rgba(0, 0, 0, 0.5);--big-play-hover-bg-color:rgba(0, 0, 0, 0.6);--big-play-icon-width:38px;--big-play-icon-height:33px;--interactive-episode-complete:rgba(92, 156, 230, 1);--slider-height:5px;--slider-video-episode-gap:1.5px;--slider-radius:calc(var(--slider-height) / 2);--slider-handle-size:13px;--slider-bg:rgba(255, 255, 255, 0.4);--slider-loaded-bg:rgba(255, 255, 255, 0.4);--slider-filled-bg:var(--white);--slider-filled-active-live-bg:var(--red);--slider-filled-ads:rgba(103, 165, 235, 1);--slider-disabled-color:rgba(248, 248, 248, 0.31);--controls-gradient:linear-gradient(\n      180deg,\n      rgba(0, 0, 0, 0.00) 0%,\n      rgba(0, 0, 0, 0.01) 6.67%,\n      rgba(0, 0, 0, 0.04) 13.33%,\n      rgba(0, 0, 0, 0.08) 20%,\n      rgba(0, 0, 0, 0.15) 26.67%,\n      rgba(0, 0, 0, 0.23) 33.33%,\n      rgba(0, 0, 0, 0.33) 40%,\n      rgba(0, 0, 0, 0.44) 46.67%,\n      rgba(0, 0, 0, 0.56) 53.33%,\n      rgba(0, 0, 0, 0.67) 60%,\n      rgba(0, 0, 0, 0.77) 66.67%,\n      rgba(0, 0, 0, 0.85) 73.33%,\n      rgba(0, 0, 0, 0.92) 80%,\n      rgba(0, 0, 0, 0.96) 86.67%,\n      rgba(0, 0, 0, 0.99) 93.33%,\n      #000 100%\n    );--timeline-preview-shadow:rgba(0, 0, 0, 0.08);--timeline-preview-bg:rgba(34, 34, 34, 1);--settings-bg:rgba(0, 0, 0, 0.72);--settings-item-bg-hover:rgba(255, 255, 255, 0.08);--settings-radius:8px;--mobile-settings-bg:#2C2D2E;--divider-border:1px solid var(--white-alpha-24);--toggle-color-separator:#363738;--toggle-color-off:#656565;--toggle-color-on:#71aaeb;--button-hover-transition:opacity 0.2s;--video-container-z-index:0;--controls-container-z-index:1;--ads-container-z-index:1;--end-screen-mobile-z-index:1;--thumb-timer-z-index:2;--debug-panel-z-index:2;--settings-menu-z-index:2;--context-menu-z-index:3;--hot-key-helpers-container-z-index:3;--overlay-container-z-index:4;--rotate-transition-duration:0.25s;position:relative;width:100%;height:100%;color:var(--white);font-size:12px;line-height:normal;overflow:hidden;outline:0;user-select:none;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;background:var(--black)}*{-webkit-tap-highlight-color:transparent}button{border:none;margin:0;padding:0;width:auto;overflow:visible;background:transparent;color:inherit;font:inherit;line-height:normal;-webkit-font-smoothing:inherit;-moz-osx-font-smoothing:inherit;-webkit-appearance:none;cursor:pointer}svg:not(.interactiveContainer svg){pointer-events:none}*:focus, *:focus-visible{outline:none}*:focus-visible{box-shadow:var(--focused-element-shadow)}.hidden{visibility:hidden;opacity:0}.overlay-container{pointer-events:none;top:0;left:0;height:100%;width:100%;position:fixed;z-index:var(--overlay-container-z-index)}.out-of-view{position:absolute !important;left:-1000vh !important}.icon.icon-error-stub{display:flex;justify-content:center;align-items:center}")}function Ev(e){let t,i,r,n;function a(t){e[61](t)}function s(t){e[62](t)}let o={store:e[1],uiConfig:e[34],title:e[2],thumbUrl:e[3],interactiveContainer:e[4],live:e[5],autoplay:e[6],canRewindLive:e[7],showAds:e[8],adsSlotId:e[9],adsParams:e[10],adsPreviewParam:e[11],duration:e[12],logoClickable:e[13],logoHidden:e[14],logoTargetUrl:e[35],nextButtonActive:e[16],prevButtonActive:e[17],endScreenVideoTitle:e[18],endScreenVideoThumb:e[19],isOneVideoPlaylist:e[20],supportLink:e[21],shadowRootContainer:e[22],outerContainerRef:e[23],fullScreenTarget:e[24],showMiniTimer:e[25],playerStarted:e[33],seekToInteractive:e[26],playPrevChapter:e[27],firstStart:e[37],showEndScreen:e[28],showNextPrevButtons:e[30]};return void 0!==e[32]&&(o.videoContainer=e[32]),void 0!==e[0]&&(o.keyboardControls=e[0]),t=new Hg({props:o}),te.push((()=>we(t,"videoContainer",a))),te.push((()=>we(t,"keyboardControls",s))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),n=!0},p(e,n){let a={};2&n[0]&&(a.store=e[1]),4&n[0]&&(a.title=e[2]),8&n[0]&&(a.thumbUrl=e[3]),16&n[0]&&(a.interactiveContainer=e[4]),32&n[0]&&(a.live=e[5]),64&n[0]&&(a.autoplay=e[6]),128&n[0]&&(a.canRewindLive=e[7]),256&n[0]&&(a.showAds=e[8]),512&n[0]&&(a.adsSlotId=e[9]),1024&n[0]&&(a.adsParams=e[10]),2048&n[0]&&(a.adsPreviewParam=e[11]),4096&n[0]&&(a.duration=e[12]),8192&n[0]&&(a.logoClickable=e[13]),16384&n[0]&&(a.logoHidden=e[14]),65536&n[0]&&(a.nextButtonActive=e[16]),131072&n[0]&&(a.prevButtonActive=e[17]),262144&n[0]&&(a.endScreenVideoTitle=e[18]),524288&n[0]&&(a.endScreenVideoThumb=e[19]),1048576&n[0]&&(a.isOneVideoPlaylist=e[20]),2097152&n[0]&&(a.supportLink=e[21]),4194304&n[0]&&(a.shadowRootContainer=e[22]),8388608&n[0]&&(a.outerContainerRef=e[23]),16777216&n[0]&&(a.fullScreenTarget=e[24]),33554432&n[0]&&(a.showMiniTimer=e[25]),4&n[1]&&(a.playerStarted=e[33]),67108864&n[0]&&(a.seekToInteractive=e[26]),134217728&n[0]&&(a.playPrevChapter=e[27]),268435456&n[0]&&(a.showEndScreen=e[28]),1073741824&n[0]&&(a.showNextPrevButtons=e[30]),!i&&2&n[1]&&(i=!0,a.videoContainer=e[32],ue((()=>i=!1))),!r&&1&n[0]&&(r=!0,a.keyboardControls=e[0],ue((()=>r=!1))),t.$set(a)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){ye(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function xv(e){let t,i,r;function n(t){e[60](t)}let a={store:e[1],uiConfig:e[34],thumbUrl:e[3],interactiveContainer:e[4],live:e[5],autoplay:e[6],canRewindLive:e[7],showAds:e[8],adsSlotId:e[9],adsParams:e[10],adsPreviewParam:e[11],duration:e[12],logoClickable:e[13],logoHidden:e[14],logoTargetUrl:e[35],nextButtonActive:e[16],prevButtonActive:e[17],endScreenVideoTitle:e[18],endScreenVideoThumb:e[19],isOneVideoPlaylist:e[20],supportLink:e[21],shadowRootContainer:e[22],outerContainerRef:e[23],fullScreenTarget:e[24],showMiniTimer:e[25],playerStarted:e[33],seekToInteractive:e[26],playPrevChapter:e[27],firstStart:e[37],seekTime:e[31],showEndScreen:e[28],showAutoplayNext:e[29],showNextPrevButtons:e[30]};return void 0!==e[32]&&(a.videoContainer=e[32]),t=new Tv({props:a}),te.push((()=>we(t,"videoContainer",n))),{c(){Ee(t.$$.fragment)},m(e,i){xe(t,e,i),r=!0},p(e,r){let n={};2&r[0]&&(n.store=e[1]),8&r[0]&&(n.thumbUrl=e[3]),16&r[0]&&(n.interactiveContainer=e[4]),32&r[0]&&(n.live=e[5]),64&r[0]&&(n.autoplay=e[6]),128&r[0]&&(n.canRewindLive=e[7]),256&r[0]&&(n.showAds=e[8]),512&r[0]&&(n.adsSlotId=e[9]),1024&r[0]&&(n.adsParams=e[10]),2048&r[0]&&(n.adsPreviewParam=e[11]),4096&r[0]&&(n.duration=e[12]),8192&r[0]&&(n.logoClickable=e[13]),16384&r[0]&&(n.logoHidden=e[14]),65536&r[0]&&(n.nextButtonActive=e[16]),131072&r[0]&&(n.prevButtonActive=e[17]),262144&r[0]&&(n.endScreenVideoTitle=e[18]),524288&r[0]&&(n.endScreenVideoThumb=e[19]),1048576&r[0]&&(n.isOneVideoPlaylist=e[20]),2097152&r[0]&&(n.supportLink=e[21]),4194304&r[0]&&(n.shadowRootContainer=e[22]),8388608&r[0]&&(n.outerContainerRef=e[23]),16777216&r[0]&&(n.fullScreenTarget=e[24]),33554432&r[0]&&(n.showMiniTimer=e[25]),4&r[1]&&(n.playerStarted=e[33]),67108864&r[0]&&(n.seekToInteractive=e[26]),134217728&r[0]&&(n.playPrevChapter=e[27]),268435456&r[0]&&(n.showEndScreen=e[28]),536870912&r[0]&&(n.showAutoplayNext=e[29]),1073741824&r[0]&&(n.showNextPrevButtons=e[30]),!i&&2&r[1]&&(i=!0,n.videoContainer=e[32],ue((()=>i=!1))),t.$set(n)},i(e){r||(be(t.$$.fragment,e),r=!0)},o(e){ye(t.$$.fragment,e),r=!1},d(e){Ae(t,e)}}}function Av(e){let t,i,r,n,a=[xv,Ev],s=[];function o(e,t){return e[15]?0:1}return i=o(e),r=s[i]=a[i](e),{c(){t=P("div"),r.c(),U(t,"class","root svelte-zbipwr")},m(e,r){k(e,t,r),s[i].m(t,null),n=!0},p(e,n){let l=i;i=o(e),i===l?s[i].p(e,n):(ge(),ye(s[l],1,1,(()=>{s[l]=null})),ve(),r=s[i],r?r.p(e,n):(r=s[i]=a[i](e),r.c()),be(r,1),r.m(t,null))},i(e){n||(be(r),n=!0)},o(e){ye(r),n=!1},d(e){e&&L(t),s[i].d()}}}function Cv(e,t,i){let r,{sources:n}=t,{store:o}=t,{microStoresRoot:l}=t,{videoConfig:u}=t,{uiConfig:c}=t,{title:d}=t,{thumbUrl:p}=t,{interactiveContainer:h}=t,{interactiveController:f}=t,{subtitles:m}=t,{live:g}=t,{preload:b}=t,{autoplay:y}=t,{volume:S}=t,{muted:$}=t,{fromTime:_}=t,{canRewindLive:T}=t,{showAds:w}=t,{adsSlotId:E}=t,{adsParams:x}=t,{adsPreviewParam:A}=t,{duration:C}=t,{logoClickable:k}=t,{logoHidden:L}=t,{isMobile:R}=t,{nextButtonActive:P=!1}=t,{prevButtonActive:O=!1}=t,{endScreenVideoTitle:M}=t,{endScreenVideoThumb:I}=t,{isOneVideoPlaylist:N=!1}=t,{supportLink:V}=t,{shadowRootContainer:D}=t,{outerContainerRef:B}=t,{fullScreenTarget:U}=t,{failoverHosts:F}=t,{showMiniTimer:j=!1}=t,{saveRate:H}=t,{seekToInteractive:z=a.noop}=t,{playPrevChapter:q=a.noop}=t,{volumeMultiplier:W}=t,{showEndScreen:G}=t,{showAutoplayNext:Y}=t,{showNextPrevButtons:X}=t,{keyboardControls:Z}=t,{subscribers:J,stores:ee}=l;(e=>{K("ui-config",e)})(c);let te=Oe(),ie=c.logoLink,re=o.ui.debugPanelVisible,ne=o.ui.playerSize,ae=o.state.isLive$;v(e,ae,(e=>i(64,r=e)));let se,oe=o.state.isInteractive&&a.clientChecker.isAndroid,le=null,ue=!1;o.getAdmanWrapper().init({switchFromAdsToVideo:o.actions.internal.switchFromAdsToVideo,switchFromVideoToAds:o.actions.internal.switchFromVideoToAds,setMuted:o.actions.external.setMuted},o.ads,{isMobile:o.ui.isMobile,mobileUnmuteButtonVisible:o.ui.mobileUnmuteButtonVisible,vsid:o.vsid}),((e,t)=>{K(Ze,e),K(Je,t)})(o,ee);let ce=(e=!1)=>{i(33,ue=!0),e?o.actions.external.firstStart(w):o.actions.internal.firstStart(w)};function de(e){let t=n||e;t&&o.initVideo({container:se,sources:t,failoverHosts:F,subtitles:m,volumeMultiplier:W});let i="true"===a.safeStorage.get(Me);re.set(i),_>0&&o.actions.external.seekTime(_);let s=R?te.volumeDefault:S??ft()??te.volumeDefault,l=$??vt(ot);if(o.actions.external.setVolume(s),o.actions.external.setMuted(l),o.getAdmanWrapper().setInitialVolume(l?0:s),te.features.trafficSaving){let e=vt(at);e&&o.actions.internal.setTrafficSavingEnabled(e)}if(te.features.saveRate&&H){let e=(()=>{let e=a.safeStorage.get(ct);if((0,a.isNullable)(e))return;let{rate:t}=JSON.parse(e);return t})();e&&!r&&o.actions.internal.setPlaybackRate(e)}if(Y){let e=vt(dt);e&&o.actions.internal.setAutoplayNextEnabled(e)}let u=(e=>{let t=a.safeStorage.get(lt);if((0,a.isNullable)(t))return;let{videoId:i,value:r}=JSON.parse(t);if(e===i)return r;mt()})(o.videoId);u&&o.actions.internal.setQuality(u),o.ui.isAutoplay.set(y),y?ce():b&&te.features.preload&&o.actions.internal.preload()}let pe=()=>{document.hidden&&o.actions.external.stop()};return Q((()=>{oe&&document.addEventListener("visibilitychange",pe),(e=>{if(window.ResizeObserver){let t,i;le=new ResizeObserver((0,a.throttleFn)((e=>{let r=e[0];if(r){if(r.contentBoxSize){let e=Array.isArray(r.contentBoxSize)?r.contentBoxSize[0]:r.contentBoxSize;t=e.inlineSize,i=e.blockSize}else r.contentRect&&(t=r.contentRect.width,i=r.contentRect.height);ne.set({width:t,height:i})}}),300)),le.observe(e)}ne.set({width:e.clientWidth,height:e.clientHeight})})(se);let e=J.map((e=>e.init({store:o,microStores:ee,config:u,interactiveController:f})));if("upcoming"!==g?.status)if("waiting"!==g?.status){if("finished"!==g?.status&&"postlive"!==g?.status||Object.keys(n||[]).length)return de(),()=>{oe&&document.removeEventListener("visibilitychange",pe),le?.disconnect(),e.forEach((e=>e.unsubscribe())),o.destroy()};o.actions.internal.setLiveWaitingRecord(!0)}else o.actions.internal.setLiveWaitingRecover(!0);else o.actions.internal.setLiveWaitingStart(!0)})),e.$$set=e=>{"sources"in e&&i(38,n=e.sources),"store"in e&&i(1,o=e.store),"microStoresRoot"in e&&i(39,l=e.microStoresRoot),"videoConfig"in e&&i(40,u=e.videoConfig),"uiConfig"in e&&i(41,c=e.uiConfig),"title"in e&&i(2,d=e.title),"thumbUrl"in e&&i(3,p=e.thumbUrl),"interactiveContainer"in e&&i(4,h=e.interactiveContainer),"interactiveController"in e&&i(42,f=e.interactiveController),"subtitles"in e&&i(43,m=e.subtitles),"live"in e&&i(5,g=e.live),"preload"in e&&i(44,b=e.preload),"autoplay"in e&&i(6,y=e.autoplay),"volume"in e&&i(45,S=e.volume),"muted"in e&&i(46,$=e.muted),"fromTime"in e&&i(47,_=e.fromTime),"canRewindLive"in e&&i(7,T=e.canRewindLive),"showAds"in e&&i(8,w=e.showAds),"adsSlotId"in e&&i(9,E=e.adsSlotId),"adsParams"in e&&i(10,x=e.adsParams),"adsPreviewParam"in e&&i(11,A=e.adsPreviewParam),"duration"in e&&i(12,C=e.duration),"logoClickable"in e&&i(13,k=e.logoClickable),"logoHidden"in e&&i(14,L=e.logoHidden),"isMobile"in e&&i(15,R=e.isMobile),"nextButtonActive"in e&&i(16,P=e.nextButtonActive),"prevButtonActive"in e&&i(17,O=e.prevButtonActive),"endScreenVideoTitle"in e&&i(18,M=e.endScreenVideoTitle),"endScreenVideoThumb"in e&&i(19,I=e.endScreenVideoThumb),"isOneVideoPlaylist"in e&&i(20,N=e.isOneVideoPlaylist),"supportLink"in e&&i(21,V=e.supportLink),"shadowRootContainer"in e&&i(22,D=e.shadowRootContainer),"outerContainerRef"in e&&i(23,B=e.outerContainerRef),"fullScreenTarget"in e&&i(24,U=e.fullScreenTarget),"failoverHosts"in e&&i(48,F=e.failoverHosts),"showMiniTimer"in e&&i(25,j=e.showMiniTimer),"saveRate"in e&&i(49,H=e.saveRate),"seekToInteractive"in e&&i(26,z=e.seekToInteractive),"playPrevChapter"in e&&i(27,q=e.playPrevChapter),"volumeMultiplier"in e&&i(50,W=e.volumeMultiplier),"showEndScreen"in e&&i(28,G=e.showEndScreen),"showAutoplayNext"in e&&i(29,Y=e.showAutoplayNext),"showNextPrevButtons"in e&&i(30,X=e.showNextPrevButtons),"keyboardControls"in e&&i(0,Z=e.keyboardControls)},e.$$.update=()=>{32770&e.$$.dirty[0]&&o.ui.isMobile.set(R)},[Z,o,d,p,h,g,y,T,w,E,x,A,C,k,L,R,P,O,M,I,N,V,D,B,U,j,z,q,G,Y,X,function(e){o.actions.internal.seekTime(e,s.SeekAction.UNKNOWN)},se,ue,te,ie,ae,ce,n,l,u,c,f,m,b,S,$,_,F,H,W,de,function(){ue?o.actions.external.play():ce(!0)},function(){o.actions.external.pause()},function(e){R||o.actions.external.setMuted(e)},function(e){R||e>=0&&e<=1&&o.actions.external.setVolume(e)},function(e){o.actions.external.seekEpisodeStartTime(e)},function(){o.actions.external.returnFocusToEpisodes()},function(e){o.actions.external.setPlaybackRate(e)},function(e){o.actions.external.setAutoQualityLimits(e)},function(e){se=e,i(32,se)},function(e){se=e,i(32,se)},function(e){Z=e,i(0,Z)}]}var kv=class extends Le{get sources(){return this.$$.ctx[38]}set sources(e){this.$$set({sources:e}),pe()}get store(){return this.$$.ctx[1]}set store(e){this.$$set({store:e}),pe()}get microStoresRoot(){return this.$$.ctx[39]}set microStoresRoot(e){this.$$set({microStoresRoot:e}),pe()}get videoConfig(){return this.$$.ctx[40]}set videoConfig(e){this.$$set({videoConfig:e}),pe()}get uiConfig(){return this.$$.ctx[41]}set uiConfig(e){this.$$set({uiConfig:e}),pe()}get title(){return this.$$.ctx[2]}set title(e){this.$$set({title:e}),pe()}get thumbUrl(){return this.$$.ctx[3]}set thumbUrl(e){this.$$set({thumbUrl:e}),pe()}get interactiveContainer(){return this.$$.ctx[4]}set interactiveContainer(e){this.$$set({interactiveContainer:e}),pe()}get interactiveController(){return this.$$.ctx[42]}set interactiveController(e){this.$$set({interactiveController:e}),pe()}get subtitles(){return this.$$.ctx[43]}set subtitles(e){this.$$set({subtitles:e}),pe()}get live(){return this.$$.ctx[5]}set live(e){this.$$set({live:e}),pe()}get preload(){return this.$$.ctx[44]}set preload(e){this.$$set({preload:e}),pe()}get autoplay(){return this.$$.ctx[6]}set autoplay(e){this.$$set({autoplay:e}),pe()}get volume(){return this.$$.ctx[45]}set volume(e){this.$$set({volume:e}),pe()}get muted(){return this.$$.ctx[46]}set muted(e){this.$$set({muted:e}),pe()}get fromTime(){return this.$$.ctx[47]}set fromTime(e){this.$$set({fromTime:e}),pe()}get canRewindLive(){return this.$$.ctx[7]}set canRewindLive(e){this.$$set({canRewindLive:e}),pe()}get showAds(){return this.$$.ctx[8]}set showAds(e){this.$$set({showAds:e}),pe()}get adsSlotId(){return this.$$.ctx[9]}set adsSlotId(e){this.$$set({adsSlotId:e}),pe()}get adsParams(){return this.$$.ctx[10]}set adsParams(e){this.$$set({adsParams:e}),pe()}get adsPreviewParam(){return this.$$.ctx[11]}set adsPreviewParam(e){this.$$set({adsPreviewParam:e}),pe()}get duration(){return this.$$.ctx[12]}set duration(e){this.$$set({duration:e}),pe()}get logoClickable(){return this.$$.ctx[13]}set logoClickable(e){this.$$set({logoClickable:e}),pe()}get logoHidden(){return this.$$.ctx[14]}set logoHidden(e){this.$$set({logoHidden:e}),pe()}get isMobile(){return this.$$.ctx[15]}set isMobile(e){this.$$set({isMobile:e}),pe()}get nextButtonActive(){return this.$$.ctx[16]}set nextButtonActive(e){this.$$set({nextButtonActive:e}),pe()}get prevButtonActive(){return this.$$.ctx[17]}set prevButtonActive(e){this.$$set({prevButtonActive:e}),pe()}get endScreenVideoTitle(){return this.$$.ctx[18]}set endScreenVideoTitle(e){this.$$set({endScreenVideoTitle:e}),pe()}get endScreenVideoThumb(){return this.$$.ctx[19]}set endScreenVideoThumb(e){this.$$set({endScreenVideoThumb:e}),pe()}get isOneVideoPlaylist(){return this.$$.ctx[20]}set isOneVideoPlaylist(e){this.$$set({isOneVideoPlaylist:e}),pe()}get supportLink(){return this.$$.ctx[21]}set supportLink(e){this.$$set({supportLink:e}),pe()}get shadowRootContainer(){return this.$$.ctx[22]}set shadowRootContainer(e){this.$$set({shadowRootContainer:e}),pe()}get outerContainerRef(){return this.$$.ctx[23]}set outerContainerRef(e){this.$$set({outerContainerRef:e}),pe()}get fullScreenTarget(){return this.$$.ctx[24]}set fullScreenTarget(e){this.$$set({fullScreenTarget:e}),pe()}get failoverHosts(){return this.$$.ctx[48]}set failoverHosts(e){this.$$set({failoverHosts:e}),pe()}get showMiniTimer(){return this.$$.ctx[25]}set showMiniTimer(e){this.$$set({showMiniTimer:e}),pe()}get saveRate(){return this.$$.ctx[49]}set saveRate(e){this.$$set({saveRate:e}),pe()}get seekToInteractive(){return this.$$.ctx[26]}set seekToInteractive(e){this.$$set({seekToInteractive:e}),pe()}get playPrevChapter(){return this.$$.ctx[27]}set playPrevChapter(e){this.$$set({playPrevChapter:e}),pe()}get volumeMultiplier(){return this.$$.ctx[50]}set volumeMultiplier(e){this.$$set({volumeMultiplier:e}),pe()}get showEndScreen(){return this.$$.ctx[28]}set showEndScreen(e){this.$$set({showEndScreen:e}),pe()}get showAutoplayNext(){return this.$$.ctx[29]}set showAutoplayNext(e){this.$$set({showAutoplayNext:e}),pe()}get showNextPrevButtons(){return this.$$.ctx[30]}set showNextPrevButtons(e){this.$$set({showNextPrevButtons:e}),pe()}get keyboardControls(){return this.$$.ctx[0]}set keyboardControls(e){this.$$set({keyboardControls:e}),pe()}get initVideo(){return this.$$.ctx[51]}get play(){return this.$$.ctx[52]}get pause(){return this.$$.ctx[53]}get setMuted(){return this.$$.ctx[54]}get setVolume(){return this.$$.ctx[55]}get seekTime(){return this.$$.ctx[31]}get seekEpisodeStartTime(){return this.$$.ctx[56]}get returnFocusToEpisodes(){return this.$$.ctx[57]}get setPlaybackRate(){return this.$$.ctx[58]}get setAutoQualityLimits(){return this.$$.ctx[59]}constructor(e){super(),Ce(this,e,Cv,Av,h,{sources:38,store:1,microStoresRoot:39,videoConfig:40,uiConfig:41,title:2,thumbUrl:3,interactiveContainer:4,interactiveController:42,subtitles:43,live:5,preload:44,autoplay:6,volume:45,muted:46,fromTime:47,canRewindLive:7,showAds:8,adsSlotId:9,adsParams:10,adsPreviewParam:11,duration:12,logoClickable:13,logoHidden:14,isMobile:15,nextButtonActive:16,prevButtonActive:17,endScreenVideoTitle:18,endScreenVideoThumb:19,isOneVideoPlaylist:20,supportLink:21,shadowRootContainer:22,outerContainerRef:23,fullScreenTarget:24,failoverHosts:48,showMiniTimer:25,saveRate:49,seekToInteractive:26,playPrevChapter:27,volumeMultiplier:50,showEndScreen:28,showAutoplayNext:29,showNextPrevButtons:30,keyboardControls:0,initVideo:51,play:52,pause:53,setMuted:54,setVolume:55,seekTime:31,seekEpisodeStartTime:56,returnFocusToEpisodes:57,setPlaybackRate:58,setAutoQualityLimits:59},wv,[-1,-1,-1])}};function Lv(e){let t,i,r,n=e[2].default,a=b(n,e,e[1],null),s=[{xmlns:"http://www.w3.org/2000/svg"},{width:"57"},{height:"60"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"stub-icon"},{role:"img"},e[0]],o={};for(let e=0;e<s.length;e+=1)o=l(o,s[e]);return{c(){t=O("svg"),a&&a.c(),i=O("path"),U(i,"fill","currentColor"),U(i,"d","M38.245 6c3.566 0 4.859.371 6.162 1.069a7.27 7.27 0 0 1 3.025 3.024c.697 1.303 1.068 2.597 1.068 6.163v23.489c0 3.566-.371 4.859-1.069 6.162a7.27 7.27 0 0 1-3.024 3.025C43.104 49.629 41.811 50 38.245 50h-19.49c-3.565 0-4.859-.371-6.162-1.069a7.27 7.27 0 0 1-3.024-3.024C8.87 44.604 8.5 43.311 8.5 39.745v-23.49c0-3.565.371-4.859 1.069-6.162a7.27 7.27 0 0 1 3.024-3.024C13.896 6.37 15.19 6 18.756 6zm.314 3H18.756c-2.799 0-3.761.186-4.749.714a4.27 4.27 0 0 0-1.793 1.793c-.508.95-.7 1.876-.713 4.434L11.5 39.744c0 2.799.186 3.761.714 4.749a4.27 4.27 0 0 0 1.793 1.793c.988.528 1.95.714 4.749.714h19.489c2.798 0 3.76-.186 4.748-.714a4.27 4.27 0 0 0 1.793-1.793c.528-.988.714-1.95.714-4.748v-23.49c0-2.798-.186-3.76-.714-4.748a4.27 4.27 0 0 0-1.793-1.793c-.95-.508-1.876-.7-4.434-.713zM19.22 38c.445 0 .607.046.77.134a.9.9 0 0 1 .377.378c.088.163.134.324.134.77v1.436c0 .446-.046.607-.134.77a.9.9 0 0 1-.378.378c-.162.088-.324.134-.77.134h-1.436c-.446 0-.608-.046-.77-.134a.9.9 0 0 1-.378-.378c-.088-.163-.134-.324-.134-.77v-1.436c0-.446.046-.607.134-.77a.9.9 0 0 1 .378-.378c.162-.088.324-.134.77-.134h1.436zm20 0c.445 0 .606.046.77.134a.9.9 0 0 1 .377.378c.088.163.134.324.134.77v1.436c0 .446-.046.607-.134.77a.9.9 0 0 1-.378.378c-.163.088-.324.134-.77.134h-1.436c-.446 0-.607-.046-.77-.134a.9.9 0 0 1-.378-.378c-.088-.163-.134-.324-.134-.77v-1.436c0-.446.046-.607.134-.77a.9.9 0 0 1 .378-.378c.163-.088.324-.134.77-.134zm-20-8c.445 0 .607.046.77.134a.9.9 0 0 1 .377.378c.088.162.134.324.134.77v1.436c0 .446-.046.607-.134.77a.9.9 0 0 1-.378.378c-.162.088-.324.134-.77.134h-1.436c-.446 0-.608-.046-.77-.134a.9.9 0 0 1-.378-.378c-.088-.163-.134-.324-.134-.77v-1.436c0-.446.046-.608.134-.77a.9.9 0 0 1 .378-.378c.162-.088.324-.134.77-.134h1.436zm20 0c.445 0 .606.046.77.134a.9.9 0 0 1 .377.378c.088.162.134.324.134.77v1.436c0 .446-.046.607-.134.77a.9.9 0 0 1-.378.378c-.163.088-.324.134-.77.134h-1.436c-.446 0-.607-.046-.77-.134a.9.9 0 0 1-.378-.378c-.088-.163-.134-.324-.134-.77v-1.436c0-.446.046-.608.134-.77a.9.9 0 0 1 .378-.378c.163-.088.324-.134.77-.134zm-20-8c.445 0 .607.046.77.134a.9.9 0 0 1 .377.378c.088.162.134.324.134.77v1.436c0 .446-.046.608-.134.77a.9.9 0 0 1-.378.378c-.162.088-.324.134-.77.134h-1.436c-.446 0-.608-.046-.77-.134a.9.9 0 0 1-.378-.378c-.088-.162-.134-.324-.134-.77v-1.436c0-.446.046-.608.134-.77a.9.9 0 0 1 .378-.378c.162-.088.324-.134.77-.134h1.436zm20 0c.445 0 .606.046.77.134a.9.9 0 0 1 .377.378c.088.162.134.324.134.77v1.436c0 .446-.046.608-.134.77a.9.9 0 0 1-.378.378c-.163.088-.324.134-.77.134h-1.436c-.446 0-.607-.046-.77-.134a.9.9 0 0 1-.378-.378c-.088-.162-.134-.324-.134-.77v-1.436c0-.446.046-.608.134-.77a.9.9 0 0 1 .378-.378c.163-.088.324-.134.77-.134zm-20-8c.445 0 .607.046.77.134a.9.9 0 0 1 .377.378c.088.162.134.324.134.77v1.436c0 .446-.046.608-.134.77a.9.9 0 0 1-.378.378c-.162.088-.324.134-.77.134h-1.436c-.446 0-.608-.046-.77-.134a.9.9 0 0 1-.378-.378c-.088-.162-.134-.324-.134-.77v-1.436c0-.446.046-.607.134-.77a.9.9 0 0 1 .378-.378c.162-.088.324-.134.77-.134h1.436zm20 0c.445 0 .606.046.77.134a.9.9 0 0 1 .377.378c.088.162.134.324.134.77v1.436c0 .446-.046.608-.134.77a.9.9 0 0 1-.378.378c-.163.088-.324.134-.77.134h-1.436c-.446 0-.607-.046-.77-.134a.9.9 0 0 1-.378-.378c-.088-.162-.134-.324-.134-.77v-1.436c0-.446.046-.607.134-.77a.9.9 0 0 1 .378-.378c.163-.088.324-.134.77-.134z"),F(t,o)},m(e,n){k(e,t,n),a&&a.m(t,null),A(t,i),r=!0},p(e,[i]){a&&a.p&&(!r||2&i)&&$(a,n,e,e[1],r?S(n,e[1],i,null):_(e[1]),null),F(t,o=_e(s,[{xmlns:"http://www.w3.org/2000/svg"},{width:"57"},{height:"60"},{fill:"none"},{"aria-hidden":"true"},{"data-testid":"stub-icon"},{role:"img"},1&i&&e[0]]))},i(e){r||(be(a,e),r=!0)},o(e){ye(a,e),r=!1},d(e){e&&L(t),a&&a.d(e)}}}function Rv(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var Pv=class extends Le{constructor(e){super(),Ce(this,e,Rv,Lv,h,{})}};function Ov(e){let t,i;return t=new Pv({props:{style:e[0]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,[i]){let r={};1&i&&(r.style=e[0]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Mv(e,t,i){let r,{isWhite:n=!1}=t;return e.$$set=e=>{"isWhite"in e&&i(1,n=e.isWhite)},e.$$.update=()=>{2&e.$$.dirty&&i(0,r=n?"color: #fff;":"color: #909499;")},[r,n]}var Iv=class extends Le{constructor(e){super(),Ce(this,e,Mv,Ov,h,{isWhite:1})}};function Nv(e){C(e,"svelte-1y9fytq",".playerStub.svelte-1y9fytq{width:100%;height:100%;background-color:#222;display:flex;justify-content:center;align-items:center;position:relative;background-position:center;background-size:cover;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif}.title.svelte-1y9fytq{position:absolute;left:0;top:0;width:100%;font-size:15px;color:#fff;box-sizing:border-box;padding:18px 20px 10px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}")}function Vv(e){let t,i;return{c(){t=P("div"),i=M(e[0]),U(t,"class","title svelte-1y9fytq")},m(e,r){k(e,t,r),A(t,i)},p(e,t){1&t&&j(i,e[0])},d(e){e&&L(t)}}}function Dv(e){let t,i;return t=new Iv({props:{isWhite:!!e[1]}}),{c(){Ee(t.$$.fragment)},m(e,r){xe(t,e,r),i=!0},p(e,i){let r={};2&i&&(r.isWhite=!!e[1]),t.$set(r)},i(e){i||(be(t.$$.fragment,e),i=!0)},o(e){ye(t.$$.fragment,e),i=!1},d(e){Ae(t,e)}}}function Bv(e){let t,i,r,n,a=e[0]&&Vv(e),s=(!e[0]||!e[1])&&Dv(e);return{c(){t=P("div"),a&&a.c(),i=I(),s&&s.c(),U(t,"class","playerStub svelte-1y9fytq"),U(t,"style",r=e[1]?`background-image: url('${e[1]}')`:"")},m(e,r){k(e,t,r),a&&a.m(t,null),A(t,i),s&&s.m(t,null),n=!0},p(e,[o]){e[0]?a?a.p(e,o):(a=Vv(e),a.c(),a.m(t,i)):a&&(a.d(1),a=null),e[0]&&e[1]?s&&(ge(),ye(s,1,1,(()=>{s=null})),ve()):s?(s.p(e,o),3&o&&be(s,1)):(s=Dv(e),s.c(),be(s,1),s.m(t,null)),(!n||2&o&&r!==(r=e[1]?`background-image: url('${e[1]}')`:""))&&U(t,"style",r)},i(e){n||(be(s),n=!0)},o(e){ye(s),n=!1},d(e){e&&L(t),a&&a.d(),s&&s.d()}}}function Uv(e,t,i){let{title:r}=t,{thumbUrl:n}=t;return e.$$set=e=>{"title"in e&&i(0,r=e.title),"thumbUrl"in e&&i(1,n=e.thumbUrl)},[r,n]}var Fv=class extends Le{constructor(e){super(),Ce(this,e,Uv,Bv,h,{title:0,thumbUrl:1},Nv)}},jv=class{isSupported(){return"mediaSession"in navigator}setMetaData({title:e,artist:t="",thumbUrl:i=""}){this.isSupported()&&(navigator.mediaSession.metadata=new MediaMetadata({title:e,artist:t,artwork:[{src:i,sizes:"96x96",type:"image/png"},{src:i,sizes:"128x128",type:"image/png"},{src:i,sizes:"192x192",type:"image/png"},{src:i,sizes:"256x256",type:"image/png"},{src:i,sizes:"384x384",type:"image/png"},{src:i,sizes:"512x512",type:"image/png"}]}))}updateActionHandlers(e){this.resetActionHandlers(),this.setActionHandlers(e)}resetActionHandlers(){this.setActionHandlers([["play",null],["pause",null],["stop",null],["nexttrack",null],["previoustrack",null],["seekto",e=>null],["seekbackward",e=>null],["seekforward",e=>null]])}setActionHandlers(e){if(this.isSupported())for(let[t,i]of e)try{navigator.mediaSession.setActionHandler?.(t,i)}catch{throw new Error(`The media session action "${t}" is not supported yet.`)}}attachToStore(e){!this.isSupported()||!e||this.subscription.add(e.state.positionExact$.subscribe((t=>{let i=g(e.state.currentPlaybackRate$),r=g(e.state.duration$);if(isFinite(t)&&isFinite(r))try{navigator.mediaSession.setPositionState?.({position:t,playbackRate:i,duration:r})}catch{this.log({message:`MediaSession setPositionState can't call with position: ${t} and duration: ${r}`})}})))}clearSubscriptions(){this.subscription.unsubscribe()}destroy(){this.resetActionHandlers(),this.clearSubscriptions()}constructor(){this.subscription=new a.Subscription,this.logger=new a.Logger,this.log=this.logger.createComponentLog("MediaSessionApi")}};function Hv(e){let t,i,r,n,a,s=e[2].default,o=b(s,e,e[1],null),u=[{xmlns:"http://www.w3.org/2000/svg"},{width:"57"},{height:"56"},{fill:"none"},{"aria-label":"dummy-image"},{"data-testid":"pip-dummy-icon"},{role:"img"},e[0]],c={};for(let e=0;e<u.length;e+=1)c=l(c,u[e]);return{c(){t=O("svg"),o&&o.c(),i=O("g"),r=O("path"),n=O("path"),U(r,"d","m30.744 4 .744.005c2.981.046 4.526.385 6.127 1.24a8.77 8.77 0 0 1 3.475 3.347l.174.312.15.292c.772 1.553 1.066 3.18 1.085 6.251v9.045a1.5 1.5 0 0 1-3 .016l-.008-9.651c-.04-2.032-.228-3.12-.627-4.035l-.126-.27-.13-.252A5.77 5.77 0 0 0 36.2 7.891c-1.187-.635-2.339-.873-5.115-.89L22.255 7c-2.737 0-4.003.2-5.071.698l-.133.064-.251.13a5.77 5.77 0 0 0-2.409 2.408c-.635 1.187-.873 2.339-.89 5.114l-.001 20.83c0 2.738.2 4.004.698 5.072l.064.133.13.251a5.77 5.77 0 0 0 2.408 2.409c1.1.588 2.134.825 4.438.88l.323.006 3.695.005H26a1.5 1.5 0 0 1 0 3h-.756l-3.718-.005c-2.989-.047-4.526-.377-6.14-1.24a8.77 8.77 0 0 1-3.476-3.347l-.174-.312-.15-.292c-.731-1.472-1.036-3.016-1.08-5.803l-.006-.756v-20.49l.005-.743c.046-2.981.385-4.526 1.24-6.127a8.77 8.77 0 0 1 3.347-3.475l.312-.174.292-.15c1.472-.731 3.016-1.036 5.803-1.08L22.256 4z"),U(n,"d","M30.5 33.8c0-1.68 0-2.52.327-3.162a3 3 0 0 1 1.311-1.311C32.78 29 33.62 29 35.3 29h6.4c1.68 0 2.52 0 3.162.327a3 3 0 0 1 1.311 1.311c.327.642.327 1.482.327 3.162v13.4c0 1.68 0 2.52-.327 3.162a3 3 0 0 1-1.311 1.311C44.22 52 43.38 52 41.7 52h-6.4c-1.68 0-2.52 0-3.162-.327a3 3 0 0 1-1.311-1.311C30.5 49.72 30.5 48.88 30.5 47.2z"),U(i,"fill","#fff"),F(t,c)},m(e,s){k(e,t,s),o&&o.m(t,null),A(t,i),A(i,r),A(i,n),a=!0},p(e,[i]){o&&o.p&&(!a||2&i)&&$(o,s,e,e[1],a?S(s,e[1],i,null):_(e[1]),null),F(t,c=_e(u,[{xmlns:"http://www.w3.org/2000/svg"},{width:"57"},{height:"56"},{fill:"none"},{"aria-label":"dummy-image"},{"data-testid":"pip-dummy-icon"},{role:"img"},1&i&&e[0]]))},i(e){a||(be(o,e),a=!0)},o(e){ye(o,e),a=!1},d(e){e&&L(t),o&&o.d(e)}}}function zv(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{i(0,t=l(l({},t),T(e))),"$$scope"in e&&i(1,n=e.$$scope)},[t=T(t),n,r]}var qv=class extends Le{constructor(e){super(),Ce(this,e,zv,Hv,h,{})}};function Wv(e){C(e,"svelte-1pbsod4",".player-pip-dummy.svelte-1pbsod4{width:100%;height:100%;background-color:#19191A;display:flex;flex-direction:column;justify-content:center;align-items:center;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif}.player-pip-dummy.is-pip-api.svelte-1pbsod4{position:relative}.dummy-image.svelte-1pbsod4 svg{transform:scale(1.07143)}.dummy-image.desktop.svelte-1pbsod4{transform:scale(1.07143) rotate(-90deg) rotateY(180deg)}.title.svelte-1pbsod4{font-size:16px;color:#fff;padding:18px 20px 10px;text-align:center}")}function Gv(e){let t,i,r,n,a,s,o;return r=new qv({}),{c(){t=P("div"),i=P("div"),Ee(r.$$.fragment),n=I(),a=P("span"),s=M(e[0]),U(i,"class","dummy-image svelte-1pbsod4"),z(i,"desktop",!e[1]),U(a,"class","title svelte-1pbsod4"),U(t,"class","player-pip-dummy svelte-1pbsod4"),z(t,"is-pip-api",e[2])},m(e,l){k(e,t,l),A(t,i),xe(r,i,null),A(t,n),A(t,a),A(a,s),o=!0},p(e,[t]){(!o||2&t)&&z(i,"desktop",!e[1]),(!o||1&t)&&j(s,e[0])},i(e){o||(be(r.$$.fragment,e),o=!0)},o(e){ye(r.$$.fragment,e),o=!1},d(e){e&&L(t),Ae(r)}}}function Qv(e,t,i){let r,n,a=et(),s=!!a.webApi.pictureInPictureApi,o=a.interfaceLanguage$;v(e,o,(e=>i(5,r=e)));let l,u=a.ui.isMobile;return v(e,u,(e=>i(1,n=e))),e.$$.update=()=>{32&e.$$.dirty&&i(0,l=r&&Pt("pip_dummy_title"))},[l,n,s,o,u,r]}var Yv=class extends Le{constructor(e){super(),Ce(this,e,Qv,Gv,h,{},Wv)}},Kv=class{isSupported(){let{isEmbed:e}=(0,a.detectEmbed)();return"documentPictureInPicture"in window&&!a.clientChecker.isYandex&&!e}isActive(){return this.isSupported()&&!!documentPictureInPicture.window}setPlayerDomElement(e,t){this.playerDomElement=e,this.playerParentShadowRoot=t}setContext(e){this.svelteContext=e}async request(){if(!this.isSupported()||!this.playerDomElement||!this.playerParentShadowRoot)return;this.pipWindow=await documentPictureInPicture.requestWindow({width:460,height:280,copyStyleSheets:!0}),this.pipWindow.document.body.style.margin="0";let e=[...this.playerParentShadowRoot.styleSheets].map((e=>[...e.cssRules].map((e=>e.cssText)).join(" "))).filter(Boolean).join("\n"),t=document.createElement("style");t.textContent=e;let i=this.createStretchedContainer(),r=i.attachShadow({mode:"open"});r.append(t),r.append(this.playerDomElement),this.playerDummyElement=new Yv({target:this.playerParentShadowRoot,context:this.svelteContext}),this.pipWindow?.document.body.append(i),this.info.isActive$.next(!0),this.pipWindow?.addEventListener("unload",(e=>{!this.playerDomElement||!this.playerParentShadowRoot||!this.playerDummyElement||(this.playerDummyElement.$destroy(),this.playerParentShadowRoot.append(this.playerDomElement),this.info.isActive$.next(!1))}))}async remove(){return new Promise((e=>{documentPictureInPicture.window?.close(),e()}))}async dispose(){await this.remove()}createStretchedContainer(){let e=document.createElement("div");return e.style.width="100%",e.style.height="100%",e}constructor(){this.info={isActive$:new a.ValueSubject(!1),type:1}}};var Xv=class{static getLatestSupportedVersion(){let e=new Xt,t=new Kv;return t.isSupported()?t:e.isSupported()?e:void 0}};function Zv(e,t){let i=new Set([...Object.keys(e),...Object.keys(t)]),r={};for(let n of i)r[n]=t[n]??e[n]??void 0;return r}var Jv=class extends Error{constructor(e){super(e),this.name="AnnotationError"}},eb=class{init(e){this.rootAnnotationsContainer=e;let t=(0,a.throttleFn)((()=>{for(let e of this.annotations.values())this.isElementExceedsBoundaries(e,this.playerSize.width,this.playerSize.height)?e.style.visibility="hidden":e.style.visibility="visible"}),100);this.subscriptions.add((0,a.observeElementSize)(this.rootAnnotationsContainer).subscribe((({width:e,height:i})=>{this.playerSize={width:e,height:i},t()}))),this.mutationObserver=new MutationObserver(t),this.mutationObserver.observe(this.rootAnnotationsContainer,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}add(e,t){if(!this.rootAnnotationsContainer)throw new Jv("Inner error. Unexpectedly root annotation container null reference exception");if(this.annotations.has(e))throw new Jv("Annotation with such name already exists");t.style.zIndex=t.style.zIndex??"1",t.style.position="absolute",this.rootAnnotationsContainer.append(t),this.annotations.set(e,t)}get(e){let t=this.annotations.get(e);if(!t)throw new Jv("Annotation with such name does not exist");return t}remove(e){let t=this.get(e);this.annotations.delete(e)&&t.remove()}clear(){for(let e in this.annotations.keys())this.remove(e)}destroy(){this.annotations.clear(),this.subscriptions.unsubscribe(),this.mutationObserver.disconnect(),this.rootAnnotationsContainer=null}isElementExceedsBoundaries(e,t,i){let r=e.offsetTop,n=e.offsetLeft,a=e.offsetWidth,s=e.offsetHeight;return r<0||n<0||n+a>t||r+s>i}registryRootContainer(e){}addLayer(e){return document.createElement("div")}getLayer(e){}removeLayer(e){}clearLayer(e){}detach(){}reattach(){}constructor(){this.annotations=new Map,this.subscriptions=new a.Subscription}},tb=class{init({store:e,microStores:t,interactiveController:i,config:r}){return(0,a.assertNonNullable)(e),(0,a.assertNonNullable)(t),(0,a.assertNonNullable)(r),r.interactiveData&&(0,a.assertNonNullable)(i),this.subscription=new a.Subscription,this.subscription}},ib=class extends tb{init(e){let t=super.init(e),{isInteractiveExpectation$:i}=e.store.state;return t.add(i.subscribe((e=>{this.state$.set(!!e||null)}))),t}constructor(){super(...arguments),this.stateName="fakeIsPlaying$",this.state$={...Ge(null),toggle:()=>this.state$.update((e=>!e))}}},rb=class extends tb{init(e){let t=super.init(e),{microStores:i,store:r}=e,{fakeIsPlaying$:n}=i,{isInteractiveExpectation$:a,isPlaying$:s}=r.state,{controlsVisible:o,isMobile:l}=r.ui,u=g(l),c=()=>u&&g(o);return t.add(o.subscribe((e=>{if(!u)return;let t=g(n);g(s)?this.state$.set(e):null!==t&&this.state$.set(!t||e)}))),t.add(s.subscribe((e=>{this.state$.set(!e||c())}))),t.add(n.subscribe((e=>{if(null===e)return;let t=g(a);c()?this.state$.set(!0):t&&this.state$.set(!e)}))),t}constructor(){super(...arguments),this.stateName="interactiveControlsOpacity$",this.state$={...Ge(null),toggle:()=>this.state$.update((e=>!e))}}},nb=class extends tb{init(e){let t=super.init(e),{store:i}=e;return t.add(i.state.interactiveEpisodes$.subscribe((e=>{e.length&&(e.every((e=>e.completed))?this.state$.set("tooltip_interactive_of_chapter_completed"):this.state$.set("tooltip_disabled_when_interactive"))}))),t}constructor(){super(...arguments),this.stateName="seekToInteractiveDisabledTooltip$",this.state$=Ge("tooltip_chapter_without_interactive")}},ab=Ge(!1),sb=null,ob=class extends tb{init(e){let t=super.init(e),{store:i,config:r}=e,{isInteractiveTime$:n,isPlaying$:s}=i.state,o=i.ui.controlsVisible,{interactiveTimeIndicator:l}=i.ui.controls;t.add(o.subscribe((e=>{g(n)&&e&&this.state$.set(!1)})));let u=r?.interactiveData||{tooltipHelpHintActive:!1};return t.add((0,a.combine)({isPlaying$:s,isInteractiveTime$:n,interactiveTimeIndicator:l}).subscribe((({isPlaying$:e,isInteractiveTime$:t,interactiveTimeIndicator:r})=>{if(e&&r?.isDisplayed){if(!t)return this.state$.set(!1);u.tooltipHelpHintActive&&null===sb&&(sb=!0,u.tooltipHelpHintActive=!1,this.state$.set(!0),i.callbacks?.onInteractiveTimeIndicatorHintDeactivated?.())}}))),t}clearTimeout(){window.clearTimeout(this.timeout)}constructor(){super(...arguments),this.stateName="showInteractiveTimeIndicatorTooltip$",this.state$={...ab,set:(e,t=!1)=>{e!==g(ab)&&(this.clearTimeout(),ab.set(e),!e&&sb&&(sb=!1),e&&t&&(this.timeout=setTimeout((()=>{this.state$.set(!1)}),3e3)))},clearTimeout:()=>this.clearTimeout()}}},lb=class extends tb{init(e){let t=super.init(e),{store:i,interactiveController:r}=e,n=i.ui.currentGridType$;return this.state$.toggle=()=>{if(this.checkIfShouldHide(g(n)))return;let e=g(this.state$),{isEnded$:t,playbackState$:a}=i.state,{disabledControls$:s}=i.ui.controls,o=g(t),l=g(a);e?(this.state$.set(!1),r?.toggleGraphView(!1),s.remove(Fe),!o&&this.graphMadePause&&i.actions.internal.play()):(this.graphMadePause="playing"===l,this.state$.set(!0),r?.toggleGraphView(!0),s.add(Fe),!o&&this.graphMadePause&&i.actions.internal.pause())},t.add((0,a.combine)({graphIsOpened:this.state$,currentGridType:n}).subscribe((({graphIsOpened:e,currentGridType:t})=>{this.checkIfShouldHide(t)&&e&&(r?.toggleGraphView(!1),this.state$.set(!1))}))),t}constructor(){super(...arguments),this.stateName="graphIsOpened$",this.graphMadePause=!1,this.state$={...Ge(null),toggle:a.noop},this.checkIfShouldHide=e=>Ms(e,"s")}},ub={preload:!0,autoplay:!1,repeat:!1,fromTime:0,canRewindLive:!0,showAds:!1,interfaceLanguage:a.InterfaceLanguage.RU,isCyrillicRelatedInterface:!0,logoClickable:!1,logoHidden:!1,isMobile:(0,a.isMobile)(),isMediaSessionEnabled:!0,isPictureInPictureEnabled:!0,isAudioDisabled:!1,callbacks:{uiInfo:{}},tuningConfig:{configName:[]},saveRate:!0,volumeMultiplier:1,showEndScreen:!0,showAutoplayNext:!0,showNextPrevButtons:!0},cb=class extends HTMLElement{connectedCallback(){if(this.isInited)return;this.initPlayerRootContainers();let e=this.getAttribute("stub-title")??void 0,t=this.getAttribute("stub-thumb-url")??void 0;this.svelteStubComponent=new Fv({target:this.playerContainer,props:{title:e,thumbUrl:t}})}disconnectedCallback(){this.annotationsApi?.destroy(),this.mediaSessionApi?.destroy(),this.svelteRootComponent?.$destroy(),this.svelteStubComponent?.$destroy(),this.subscription.unsubscribe(),this.unsubscribePlayerPhaseSubscription?.(),this.interactiveController?.destroy()}initPlayerRootContainers(){this.rootContainer=document.createElement("div"),this.rootContainer.style.position="relative",this.rootContainer.className="root-container",this.rootContainer.style.width="100%",this.rootContainer.style.height="100%",this.shadowRootContainer=document.createElement("div"),this.shadowRootContainer.style.position="absolute",this.shadowRootContainer.className="shadow-root-container",this.shadowRootContainer.style.width="100%",this.shadowRootContainer.style.height="100%",this._shadowRoot=this.shadowRootContainer.attachShadow({mode:"open"}),this.playerContainer=document.createElement("div"),this.playerContainer.style.all="initial",this.playerContainer.style.display="block",this.playerContainer.style.contain="strict",this.playerContainer.style.width="100%",this.playerContainer.style.height="100%",this._shadowRoot.append(this.playerContainer),this.rootContainer.append(this.shadowRootContainer),this.append(this.rootContainer)}needToShowNextPrevButtons(){return!!this.videoConfig&&(this.videoConfig.videos.length>1&&this.videoConfig.showNextPrevButtons)}isNextButtonActive(){return!!this.videoConfig&&(this.needToShowNextPrevButtons()&&(this.currentPlayingVideoIndex<this.videoConfig.videos.length-1||this.needToRepeatPlaylist))}isPrevButtonActive(){return!!this.videoConfig&&(this.needToShowNextPrevButtons()&&(this.currentPlayingVideoIndex>0||this.needToRepeatPlaylist))}isControlDisabled(e){return this.store?.ui.controls.disabledControls$?.includes(e)||!1}getNextVideoInfo(){if(!this.videoConfig)return{nextVideoTitle:void 0,nextVideoThumb:void 0};let e=this.videoConfig.videos[this.currentPlayingVideoIndex+1]||{};return{nextVideoTitle:e.title,nextVideoThumb:e.thumbUrl}}createPlayer(e,t={},i){if(!this.videoConfig)return;let{albumId:r,statPlace:n,statAuthToken:s,preload:o,autoplay:l,volume:u,muted:c,fromTime:d,canRewindLive:p,supportLink:h,showAds:f,adsSlotId:m,adsParams:g={},adsPreviewParam:v,interfaceLanguage:b,isCyrillicRelatedInterface:y,logoClickable:S,logoHidden:$,isMobile:_,isAudioDisabled:T,isLiveCatchUpMode:w,fullScreenTarget:E,failoverHosts:x,canDownload:A,callbacks:C,interactiveData:k,showThumbTimer:L,additionalButtons:R=[],additionalSettingsMenuItems:P=[],additionalContextMenuItems:O=[],repeat:M,saveRate:I,volumeMultiplier:N,showEndScreen:V,showAutoplayNext:D}=Zv(this.videoConfig,t),{sources:B,title:U,thumbUrl:F,unitedVideoId:j,isClip:H=!1,duration:z,adsParams:q={},videoEpisodes:W,previewThumbsData:G,subtitles:Q,live:Y}=e,K={...g,...q},X=this.getNextVideoInfo(),Z={sources:B,title:U,thumbUrl:F,subtitles:Q,unitedVideoId:j,isClip:H,live:Y,albumId:r,statPlace:n,autoplay:l,muted:c,volume:u,fromTime:d,canRewindLive:p,showAds:f,adsSlotId:m,adsParams:K,adsPreviewParam:v,duration:z,logoClickable:S,logoHidden:$,isMobile:_,repeat:M,showNextPrevButtons:this.needToShowNextPrevButtons(),nextButtonActive:this.isNextButtonActive(),prevButtonActive:this.isPrevButtonActive(),endScreenVideoTitle:X.nextVideoTitle,endScreenVideoThumb:X.nextVideoThumb,isOneVideoPlaylist:this.isOneVideoPlaylist()},J={pictureInPictureApi:this.pictureInPictureApi,annotationsApi:this.annotationsApi};this.log({message:`create player, props: ${JSON.stringify(Z)}`});let ee=this.interactiveController?.state.statistics$.getValue(),te=ee?.oneStat||this.createOneStat(e,t);te&&(this.statistics=new Vl(te,ee?.statSubscription)),this.uiConfig.features.sentry&&this.uiConfig.sentry.dsn&&new zt(this.uiConfig.sentry,{version:Ke,env:Ye},{movieId:j,albumId:r,place:n,autoplay:(l&&!this.interactiveController)??!1,mobile:_,clip:H}),this.interactiveController&&(this.prevIsid??(this.prevIsid=this.statistics?.oneStat.isid$.getValue())),this.sentry={...this.sentry,...zt.getInstance()};let ie=!!k,re=[],ne="tooltip_interactive_go_back_disabled_first";if(ie&&this.interactiveController){let e=this.interactiveController.state.isInitialChapter$.getValue(),t=this.interactiveController.getHistoryState();e&&re.push("REPLAY_BUTTON"),this.interactiveController.getIsSeekable().getValue()||re.push("SEEK_TO_INTERACTIVE_BUTTON"),t.hasPrevChapter$.getValue()||(re.push("PLAY_PREV_CHAPTER_BUTTON"),e||(ne=t.isGoBackLimited$.getValue()?"tooltip_interactive_go_back_disabled_limit":"tooltip_interactive_go_back_disabled"))}this.store=jl({player:i,interfaceLanguage:b,isCyrillicRelatedInterface:y,videoId:j,isClip:H,isLiveCatchUpMode:w,isAudioDisabled:T,statAuthToken:s,callbacks:C,webApi:J,videoEpisodes:W,previewThumbsData:G,canDownload:A,uiConfig:this.uiConfig,coreConfig:this.coreConfig,disabledControls:re,isInteractive:ie,saveRate:I,interactiveRanges$:this.interactiveController?.state.interactiveRanges$,isInteractiveTime$:this.interactiveController?.state.isInteractiveTime$,stopPlayer:()=>this.stop(),replayInteractive:()=>{this.isInited=!1,this.prevIsid=void 0;let e=i?.info.isEnded$.getValue()&&this.interactiveController?.state.isEndChapter$.getValue();C.onReplayInteractiveVideo&&!e?C.onReplayInteractiveVideo():this.replayInteractiveVideo()},playPrevChapterDisabledTooltip:ne,hasInteractiveBranches:!!this.interactiveController?.getChapterBranches()?.length,additionalButtons:this.uiConfig.features.additionalButtons?R:[],additionalSettingsMenuItems:P??[],additionalContextMenuItems:O??[],playPrevVideo:()=>this.playPrevVideo(),playNextVideo:()=>this.playNextVideo(),looped:M&&1===this.videoConfig.videos.length,statistics:this.statistics});let{stores:ae}=this.microStoresRoot=[ib,rb,nb,ob,lb].reduce((({subscribers:e,stores:t},i)=>{let r=new i;return{subscribers:[...e,r],stores:{...t,[r.stateName]:r.state$}}}),{subscribers:[],stores:{}});this.subscription.add(this.store.state.currentFormat$.subscribe((e=>C?.onCurrentFormatChanged?.(e)))),this.subscription.add(ae.interactiveControlsOpacity$.subscribe((e=>{null!==e&&this?.interactiveController?.setDisabledControls(e)}))),this.subscription.add(this.store.state.throughputEstimation$.subscribe((e=>C?.onThroughputEstimationChanged?.(e)))),this.subscription.add(this.store.state.trafficSavingEnabled$.subscribe((e=>C?.onTrafficSavingEnabledChanged?.(e))));let se=!0;this.subscription.add(this.store.state.currentPlaybackRate$.subscribe((e=>{se?se=!1:C?.onCurrentPlaybackRateChanged?.(e)}))),this.subscription.add(this.store.state.volume$.subscribe((e=>C?.onVolumeChange?.(e)))),this.subscription.add(this.store.state.muted$.subscribe((e=>e?C?.onMute?.():C?.onUnmute?.()))),this.subscription.add(this.store.state.videoBitrate$.subscribe((e=>C?.onVideoBitrateChanged?.(e)))),this.subscription.add(this.store.state.isInteractiveTime$.subscribe((e=>{let t=this.store?.ui.controls.disabledControls$;t&&(e&&!t.includes(Ue)&&t.add(Ue),e||t.remove(Ue))}))),this.subscription.add(this.store.ui.isFullscreen.subscribe((async e=>{a.clientChecker.isSamsungBrowser&&e&&this.interactiveController&&document.fullscreenElement===this.shadowRootContainer&&await this.replayInteractiveChapter(this.videoConfig?.callbacks.onExternalFullscreenExit)}))),this.statistics&&this.subscription.add(this.statistics.oneStat.vsid$.subscribe((e=>C?.onVSIDChanged?.(e)))),this.initMediaSession(),this.svelteRootComponent=new kv({target:this.playerContainer,props:{interactiveController:this.interactiveController,interactiveContainer:this.interactiveContainer,sources:B,store:this.store,microStoresRoot:this.microStoresRoot,videoConfig:this.videoConfig,uiConfig:this.uiConfig,title:U,thumbUrl:F,subtitles:Q,live:Y,preload:o,autoplay:l,muted:c,volume:u,fromTime:d,canRewindLive:p,supportLink:h,showAds:f,adsSlotId:m,adsParams:K,adsPreviewParam:v,duration:z,logoClickable:S,logoHidden:$,isMobile:_,failoverHosts:x,fullScreenTarget:E,saveRate:I,shadowRootContainer:this.shadowRootContainer,showMiniTimer:L,outerContainerRef:this.rootContainer,showNextPrevButtons:this.needToShowNextPrevButtons(),nextButtonActive:this.isNextButtonActive(),prevButtonActive:this.isPrevButtonActive(),endScreenVideoTitle:X.nextVideoTitle,endScreenVideoThumb:X.nextVideoThumb,isOneVideoPlaylist:this.isOneVideoPlaylist(),playPrevChapter:()=>this.playPrevChapter(),seekToInteractive:()=>this.seekToInteractive(),volumeMultiplier:N,showEndScreen:V,showAutoplayNext:D}}),this.addPlayerInfoSubscriptions(),this.isInited||(this.isInited=!0,this.videoConfig?.callbacks?.onInited?.())}addPlayerInfoSubscriptions(){let e=this.store;if(!e)return;let t=this.videoConfig?.callbacks;t&&this.subscription.add(e.playerPhase.subscribe((e=>t.onPlayerPhaseChanged?.(e)))).add(e.state.playbackState$.subscribe((e=>t.onPlaybackStateChanged?.(e)))).add(e.state.isLive$.subscribe((e=>t.onIsLiveChanged?.(e)))).add(e.state.isActiveLive$.subscribe((e=>t.onIsActiveLiveChanged?.(e)))).add(e.state.isAudioAvailable$.subscribe((e=>t.onIsAudioAvailableChanged?.(e)))).add(e.state.currentQuality$.subscribe((e=>t.onCurrentQualityChanged?.(e)))).add(e.state.availableQualities$.subscribe((e=>t.onAvailableQualitiesChanged?.(e.map((({value:e})=>e)).filter((e=>"auto"!==e)))))).add(e.state.availableAudioStreams$.subscribe((e=>{e.length>1&&t.onAudioLanguagesAvailable&&t.onAudioLanguagesAvailable()}))).add(e.ui.isPictureInPictureActive$.subscribe((e=>e?t.onPiPEnter?.():t.onPiPExit?.())));let i=t?.uiInfo;i&&this.subscription.add(e.ui.controlsVisible.subscribe((e=>i.onControlsVisibleChanged?.(e)))).add(e.ui.isMobile.subscribe((e=>i.onIsMobileChanged?.(e)))).add(e.ui.playerSize.subscribe((e=>i.onPlayerSizeChanged?.(e)))).add(e.ui.controls.prevButton.subscribe((e=>i.onPrevButtonChanged?.(e)))).add(e.ui.controls.playButton.subscribe((e=>i.onPlayButtonChanged?.(e)))).add(e.ui.controls.replayButton.subscribe((e=>i.onReplayButtonChanged?.(e)))).add(e.ui.controls.nextButton.subscribe((e=>i.onNextButtonChanged?.(e)))).add(e.ui.controls.playPrevChapterButton.subscribe((e=>i.onPlayPrevChapterChanged?.(e)))).add(e.ui.controls.seekToInteractiveButton.subscribe((e=>i.onSeekToInteractiveButtonChanged?.(e)))).add(e.ui.controls.interactiveGraphButton.subscribe((e=>i.onGraphButtonChanged?.(e)))).add(e.ui.controls.liveButton.subscribe((e=>i.onLiveButtonChanged?.(e)))).add(e.ui.controls.time.subscribe((e=>i.onTimeUpdateChanged?.(e)))).add(e.ui.controls.episodes.subscribe((e=>i.onEpisodesChanged?.(e)))).add(e.ui.controls.subtitles.subscribe((e=>i.onSubtitlesChanged?.(e)))).add(e.ui.controls.settings.subscribe((e=>i.onSettingsChanged?.(e)))).add(e.ui.controls.fullscreen.subscribe((e=>i.onFullscreenChanged?.(e)))).add(e.ui.controls.chromecast.subscribe((e=>i.onChromecastChanged?.(e)))).add(e.ui.controls.pip.subscribe((e=>i.onPipChanged?.(e)))).add(e.ui.controls.vkLogo.subscribe((e=>i.onVkLogoChanged?.(e)))).add(e.ui.controls.interactiveTimeIndicator.subscribe((e=>i.onInteractiveTimeIndicatorChanged?.(e)))).add(e.ui.controls.timeline.subscribe((e=>i.onTimelineChanged?.(e))))}playNextVideo(){this.videoConfig&&(this.currentPlayingVideoIndex++,this.currentPlayingVideoIndex>=this.videoConfig.videos.length&&(this.currentPlayingVideoIndex=0),this.log({message:`play next video, index: ${this.currentPlayingVideoIndex}`}),this.createPlayerWithCurrentVideo())}playPrevVideo(){this.videoConfig&&(this.currentPlayingVideoIndex--,this.currentPlayingVideoIndex<0&&(this.currentPlayingVideoIndex=this.videoConfig.videos.length-1),this.log({message:`play prev video, index: ${this.currentPlayingVideoIndex}`}),this.createPlayerWithCurrentVideo())}createPlayerWithCurrentVideo(e,t=!0){if(!this.videoConfig)return;let i=this.videoConfig.videos[this.currentPlayingVideoIndex];i?(this.isInited&&(0,a.isNonNullable)(i.unitedVideoId)&&this.store.actions.internal.nextMovie(i.unitedVideoId),this.svelteRootComponent?.$destroy(),this.createPlayer(i,{autoplay:t,fromTime:0},e)):this.log({message:"no next video"})}playPrevChapter(){this.interactiveController?.playPrevChapter()}seekToInteractive(){let e=this.interactiveController?.getNextInteractiveStartTime();"number"==typeof e&&this.seekTime(e/1e3)}async initInteractives(){if(this.videoConfig?.interactiveData)try{let{Interactives:e,EVENT_NAMES:t,CustomError:r}=await Promise.resolve().then(i.bind(i,34414));this.interactiveContainer=document.createElement("div"),this.interactiveContainer.classList.add("interactiveContainer");let n=this.store?.interfaceLanguage$,a=n?g(n):this.videoConfig.interfaceLanguage,{projectInfo:s,initChapterId:o,historyApi:l,videoLoader:u}=this.videoConfig.interactiveData;this.interactiveController=new e({parentElement:this.interactiveContainer,fullscreenTargetElement:this.playerContainer,lang:a,graph:this.uiConfig.features.interactiveGraph,projectInfo:s,initChapterId:o,historyApi:l,vkVideoLoader:u,lastFrame:this.uiConfig.features.interactiveLastFrame,permanentTextControls:this.uiConfig.features.interactiveTextPermanent,initSeamless:!0,config:this.uiConfig.interactive,coreConfig:this.coreConfig,createOneStat:this.createOneStat});let{isInteractiveExpectation$:c,isSeekable$:d}=this.interactiveController.state;this.uiConfig.features.seekToInteractive&&this.subscription.add(d.subscribe((e=>{if(!this.isInited)return;let t=this.store;e?t.ui.controls.disabledControls$.remove("SEEK_TO_INTERACTIVE_BUTTON"):t.ui.controls.disabledControls$.add("SEEK_TO_INTERACTIVE_BUTTON")}))),this.subscription.add(c.subscribe((e=>{this.store&&this.store.state.isInteractiveExpectation$.set(e)})));let p=!0;if(this.subscription.add(this.interactiveController.events.playerChanged$.subscribe((e=>{if(!this.videoConfig)return;this.videoConfig.videos[this.currentPlayingVideoIndex]={...e.config,title:s?.title||e.config.title};let t=!p||this.videoConfig.autoplay;this.createPlayerWithCurrentVideo(e.player,t),p&&(p=!1)}))),this.interactiveController.on(t.interactives,(({type:e,actionType:t})=>{if(!this.store)return;let i=c.getValue();if("action-choice"===e&&"setRandomBranch"===t&&(this.store.state.graphIsOpened$.set(!1),this.store.ui.controls.disabledControls$.remove(je)),"action-choice-canceled"===e){let e=g(this.store.state.isPlaying$)||i;if(this.videoConfig?.isMobile&&e)return void this.store.ui.interactiveHideMobileControls.set(!0);this.videoConfig?.callbacks.onDisabledInteractiveClick?.()}})),await this.interactiveController.setManifest(this.videoConfig.interactiveData.manifest),this.videoConfig?.callbacks?.onInteractiveHistoryChanged){let e=this.interactiveController.getHistoryState();this.subscription.add(e.history$.subscribe((e=>{e.length&&this.videoConfig?.callbacks?.onInteractiveHistoryChanged?.(e)})))}this.uiConfig.features.interactiveTimeIndicator&&this.subscription.add(this.interactiveController.events.noInteraction$.subscribe((()=>{this.microStoresRoot?.stores.showInteractiveTimeIndicatorTooltip$.set(!0,!0),this.videoConfig?.callbacks.onInteractiveTimeIndicatorClick?.()}))),this.interactiveController.on(t.errors,(e=>{this.log({message:e.toString()})}))}catch(e){this.log({message:e.message})}}initPlayer(e,t={}){var i,r;if(!Array.isArray(e.videos)||0===e.videos.length&&!e.interactiveData)throw new Error("empty videos");this.videoConfig=Zv(ub,(0,a.cloneDeepWith)(e,(e=>e instanceof HTMLElement?e:void 0))),this.uiConfig=(e=>(0,a.fillWithDefault)(e,Pe))(t.ui??{}),this.coreConfig=t.core??{configName:[]},this.statisticsConfig=t.statistics??{},this.sentry={config:this.uiConfig.sentry??{}},(0,a.isNonNullable)(this.videoConfig.isMediaSessionEnabled)&&(this.uiConfig.features.mediaSession=this.uiConfig.features.mediaSession??this.videoConfig.isMediaSessionEnabled??!0),(0,a.isNonNullable)(this.videoConfig.isPictureInPictureEnabled)&&(this.uiConfig.features.pip=this.uiConfig.features.pip??this.videoConfig.isPictureInPictureEnabled??!0,this.uiConfig.features.dpip=this.uiConfig.features.dpip??this.videoConfig.isPictureInPictureEnabled??!0),this.videoConfig.isMobile=this.uiConfig.isMobile??this.videoConfig.isMobile,(i=this.videoConfig).autoplay&&(i.autoplay=this.uiConfig.features.autoplay),this.videoConfig.showAds=this.uiConfig.ads.enable??this.videoConfig.showAds,this.videoConfig.adsSlotId=this.uiConfig.ads.slot??this.videoConfig.adsSlotId,this.videoConfig.adsPreviewParam=this.uiConfig.ads.preview??this.videoConfig.adsPreviewParam,this.videoConfig.logoHidden=!(this.uiConfig.showLogo??!this.videoConfig.logoHidden),(r=this.videoConfig).canRewindLive&&(r.canRewindLive=this.uiConfig.features.liveRewind),this.videoConfig.supportLink=this.videoConfig.supportLink??this.uiConfig.supportLink,this.videoConfig.showEndScreen=this.uiConfig.features.endScreen??this.videoConfig.showEndScreen,this.videoConfig.showAutoplayNext=this.uiConfig.features.autoplayNext??this.videoConfig.showAutoplayNext,this.videoConfig.showNextPrevButtons=this.uiConfig.features.nextPrevButtons??this.videoConfig.showNextPrevButtons,this.currentPlayingVideoIndex=this.videoConfig.videoIndex&&this.videoConfig.videos?.[this.videoConfig.videoIndex]?this.videoConfig.videoIndex:0,this.needToRepeatPlaylist=this.videoConfig.repeat,this.uiConfig.features.pip&&(this.uiConfig.features.dpip?this.pictureInPictureApi=Xv.getLatestSupportedVersion():this.pictureInPictureApi=new Xt),this.mediaSessionApi=this.uiConfig.features.mediaSession?new jv:void 0,this.annotationsApi=this.uiConfig.features.annotations?new eb:void 0,this.annotationsApi&&!this.uiConfig.features.annotationsInside&&this.annotationsApi.init(this.rootContainer),this.svelteStubComponent?.$destroy(),this.svelteRootComponent?.$destroy(),this.isInited=!1,this.prevIsid=void 0,this.interactiveController&&(this.interactiveController.destroy(),this.interactiveController=void 0),e.interactiveData?this.initInteractives():this.createPlayer(e.videos[this.currentPlayingVideoIndex]),function(e){return e instanceof Kv}(this.pictureInPictureApi)&&this.pictureInPictureApi.setPlayerDomElement(this.playerContainer,this._shadowRoot)}isOneVideoPlaylist(){return!!this.videoConfig&&1===this.videoConfig.videos.length}updateNextVideos(e){if(!this.videoConfig)return;this.log({message:`update next videos, videos: ${JSON.stringify(e)}`}),this.videoConfig.videos.splice(this.currentPlayingVideoIndex+1),this.videoConfig.videos.push(...e);let t=this.getNextVideoInfo();this.svelteRootComponent?.$set({showNextPrevButtons:this.needToShowNextPrevButtons(),nextButtonActive:this.isNextButtonActive(),prevButtonActive:this.isPrevButtonActive(),endScreenVideoTitle:t.nextVideoTitle,endScreenVideoThumb:t.nextVideoThumb,isOneVideoPlaylist:this.isOneVideoPlaylist()})}initMediaSession(){this.mediaSessionApi&&(this.unsubscribePlayerPhaseSubscription?.(),this.mediaSessionApi.clearSubscriptions(),this.unsubscribePlayerPhaseSubscription=this.store?.playerPhase.subscribe((e=>{"video"===e?this.setupMediaSessionForVideo():"ads"===e&&this.setupMediaSessionForAds()})))}setupMediaSessionForVideo(){if(this.videoConfig&&this.mediaSessionApi)try{let{title:e,thumbUrl:t}={...this.videoConfig.videos[this.currentPlayingVideoIndex]},i=[["play",()=>this.play()],["pause",()=>this.pause()],["seekto",e=>this.seekTime(e.seekTime)]];this.videoConfig.videos.length>1&&(this.currentPlayingVideoIndex<this.videoConfig.videos.length-1&&i.push(["nexttrack",()=>this.playNextVideo()]),this.currentPlayingVideoIndex>0&&i.push(["previoustrack",()=>this.playPrevVideo()])),this.mediaSessionApi.setMetaData({title:e,thumbUrl:t}),this.mediaSessionApi.updateActionHandlers(i),this.mediaSessionApi.attachToStore(this.store)}catch(e){this.log({message:e.message})}}setupMediaSessionForAds(){if(this.videoConfig&&this.mediaSessionApi)try{let e="Реклама",t=[["play",()=>this.play()],["pause",()=>this.pause()]];this.mediaSessionApi.setMetaData({title:e}),this.mediaSessionApi.updateActionHandlers(t),this.mediaSessionApi.attachToStore(this.store)}catch(e){this.log({message:e.message})}}play(){this.isControlDisabled("PLAY_BUTTON")||this.store?.playerPhase.is("LiveWaitingStart")||this.store?.playerPhase.is("LiveWaitingRecover")||this.store?.playerPhase.is("LiveWaitingRecord")||(this.log({message:"play"}),this.svelteRootComponent?.play())}pause(){this.log({message:"pause"}),this.svelteRootComponent?.pause()}stop(){if(!this.videoConfig)return;this.log({message:"stop"});let e=!!this.interactiveController;e&&(this.interactiveController.destroy(),this.interactiveController=void 0,this.interactiveContainer=void 0),this.svelteStubComponent?.$destroy(),this.mediaSessionApi?.destroy();let t=this.videoConfig.videos[0];t&&(this.svelteRootComponent?.$destroy(),e?(this.videoConfig.autoplay=!1,this.initInteractives()):this.createPlayer(t))}setMuted(e){this.log({message:`set muted, muted: ${e}`}),this.svelteRootComponent?.setMuted(e)}setVolume(e){this.log({message:`set volume, volume: ${e}`}),this.svelteRootComponent?.setVolume(e)}setRepeat(e){this.log({message:`set repeat, repeat: ${e}`}),this.needToRepeatPlaylist=e,this.svelteRootComponent?.$set({needToRepeatPlaylist:this.needToRepeatPlaylist,showNextPrevButtons:this.needToShowNextPrevButtons(),nextButtonActive:this.isNextButtonActive(),prevButtonActive:this.isPrevButtonActive()})}seekTime(e){this.isControlDisabled("TIMELINE")||(this.log({message:`seek time, time: ${e}`}),this.svelteRootComponent?.seekTime(e))}seekEpisodeStartTime(e){this.log({message:`seek episode start time, time: ${e}`}),this.svelteRootComponent?.seekEpisodeStartTime(e)}returnFocusToEpisodes(){this.log({message:"return focus to episodes button"}),this.svelteRootComponent?.returnFocusToEpisodes()}setPlaybackRate(e){this.log({message:`set playback rate to: ${e}`}),this.svelteRootComponent?.setPlaybackRate(e)}setAutoQualityLimits(e){this.log({message:`set auto quality limitation. Max: ${e.max??"none"}. Min: ${e.min??"none"}`}),this.svelteRootComponent?.setAutoQualityLimits(e)}addLanguage(e){this.store?.actions.internal.addLanguage(e)}async setLanguage(e){await(this.store?.actions.internal.setLanguage(e))}setLiveStart(e){this.log({message:"live started"}),this.store?.actions.internal.setLiveWaitingRecover(!1),this.store?.actions.internal.setLiveWaitingStart(!1),this.svelteRootComponent?.$destroy(),this.createPlayer(e,{autoplay:!0})}setLiveWaitingRecover(){this.log({message:"live waiting"}),this.store?.actions.internal.setLiveWaitingRecover(!0),this.store?.destroy()}setLiveWaitingRecord(){this.log({message:"post live"}),this.store?.actions.internal.setLiveWaitingRecord(!0),this.store?.destroy()}setLiveEnd(e){this.log({message:"live ended"}),this.store?.actions.internal.setLiveWaitingRecover(!1),this.store?.actions.internal.setLiveWaitingRecord(!1),this.svelteRootComponent?.$destroy(),this.createPlayer(e,{autoplay:!1})}setLiveLowLatency(e){this.log({message:"live switch to low latency "+e}),this.store?.actions.external.setLiveLowLatency(e)}getDeviceId(){return this.statistics?.oneStat.getDeviceId()??void 0}replayInteractiveVideo(){this.interactiveController&&this.interactiveController.setChapter()}async replayInteractiveChapter(e){if(this.interactiveController&&this.store?.state.positionExact$){let t=g(this.store.state.positionExact$),i=g(this.store.state.interactiveEpisodes$).find((e=>!e.completed));this.interactiveController.events.playerChanged$.pipe((0,a.once)()).subscribe((()=>{i&&t>=i.time?this.seekTime(i.time):this.seekTime(t),e?.()}));let r=this.interactiveController.getCurrentChapter();await this.interactiveController.setChapter({chapterId:r.chapter.id,pushToHistory:!1})}}showInteractiveIndicatorTooltip(e,t=!1){this.microStoresRoot?.stores.showInteractiveTimeIndicatorTooltip$.set(e,t)}switchToActiveLive(){this.store?.actions.internal.switchToActiveLive()}updateAdditionalSettingsItem(e,t){this.store?.actions.external.updateAdditionalSettingsItem(e,t)}addAdditionalSettingsItem(e){this.store?.actions.external.addAdditionalSettingsItem(e)}removeAdditionalSettingsItem(e){this.store?.actions.external.removeAdditionalSettingsItem(e)}updateAdditionalContextItem(e,t){this.store?.actions.external.updateAdditionalContextItem(e,t)}addAdditionalContextItem(e){this.store?.actions.external.addAdditionalContextItem(e)}removeAdditionalContextItem(e){this.store?.actions.external.removeAdditionalContextItem(e)}updateAdditionalButton(e,t){this.store?.actions.external.updateAdditionalButton(e,t)}addAdditionalButton(e){this.store?.actions.external.addAdditionalButton(e)}removeAdditionalButton(e){this.store?.actions.external.removeAdditionalButton(e)}updateStatContext(e){this.statistics&&this.statistics.oneStat.updateContext(e)}handleTimerNextVideo(e){this.store?.actions.internal.setTimerNextVideoRunning(e)}focus(){this.svelteRootComponent?.keyboardControls?.focus?.()}constructor(){super(),this.currentPlayingVideoIndex=0,this.needToRepeatPlaylist=!1,this.videoConfig=void 0,this.pictureInPictureApi=void 0,this.mediaSessionApi=void 0,this.unsubscribePlayerPhaseSubscription=void 0,this.annotationsApi=void 0,this.prevIsid=void 0,this.isInited=!1,this.createOneStat=(e,t={})=>{let{albumId:i,statPlace:r,statUserSalt:n,statTrackCode:a,refreshStatAuthToken:o,autoplay:l,isMobile:u,refDomain:c,deviceId:d,interactiveData:p}=Zv(this.videoConfig,t),h=p?.projectInfo?.pid,f=this.interactiveController?.state.isReplay$.getValue()??!1;f&&(this.prevIsid=void 0);let{unitedVideoId:m,isClip:g=!1}=e;if(this.uiConfig.features.statistics&&m)return new s.OneStat({movieId:m,albumId:i,place:r,trackCode:a,autoplay:(l&&!this.interactiveController)??!1,mobile:u,clip:g,refDomain:c,deviceId:d,...h&&(!this.isInited||f)&&{projectId:Number(h)}},{refreshAuthToken:o,userSalt:n,config:this.statisticsConfig,...this.interactiveController&&{useIsid:!0,isid:this.prevIsid}})},this.logger=new a.Logger,this.log=this.logger.createComponentLog("VKVideoPlayer"),this.subscription=new a.Subscription,this.graphMadePause=!1,window?.videoPlayerConfig?.debugLogs&&this.subscription.add(this.logger.log$.subscribe((e=>{console.log("%c player web component ","background:#77dd77;",`${e.component}`,e.message)})))}},db=()=>{window.customElements.define("vk-video-player",cb)}}}]);try{stManager?.done("dist/web/chunks/1de96034.a76dd01e.js")}catch(e){}
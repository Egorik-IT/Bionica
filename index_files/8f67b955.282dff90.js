"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[80793],{51921:(e,t,r)=>{r.d(t,{connectTrackTmrGroupsJoin:()=>d,groupsJoinAction:()=>c,trackTmrGroupsJoin:()=>s});var i=r(251703),o=r(957994),n=r(32489);const s=()=>(0,i.tmrSendTimespentEvent)(i.MY_TRACKER_COUNT_EVENT_IDS.COMMUNITY_SUBSCRIBE),a=(0,n.createEffect)({name:"fx/track_group_join",handler:s}),d=e=>(0,n.sample)({clock:e.done,target:a}),c=(e,t,r)=>(0,o.api)("groups.join",e,t,r).then((e=>(s(),e)))},869071:(e,t,r)=>{r.d(t,{connectTrackTmrGroupsJoin:()=>i.connectTrackTmrGroupsJoin,groupsJoinAction:()=>i.groupsJoinAction,trackTmrGroupsJoin:()=>i.trackTmrGroupsJoin});var i=r(51921)},256252:(e,t,r)=>{r.d(t,{hydrateComponent:()=>s});var i=r(474848),o=r(440961),n=r(384483);function s({component:e,descriptor:t}){const{data:r,target:s}=t.payload,{selector:a}=t;s&&s instanceof HTMLElement&&((0,n.registerReactApplication)(a,(t=>{o.render((0,i.jsx)(e,{...t}),s)})),window.initReactApplication(a,r))}},835426:(e,t,r)=>{r.d(t,{getPlayFromByDuration:()=>i});const i=e=>{let t="";const r=Math.floor(e/3600);r&&(t+=`${r}h`);const i=Math.floor(e%3600/60);i&&(t+=`${i}m`);const o=e%60;return o&&(t+=`${o}s`),t}},615494:(e,t,r)=>{r.d(t,{VIDEO_AUTHORS_LANDING_URL:()=>n,VIDEO_SHOWCASE_SCROLL_TO_TOP_BUTTON_CHANGE_ACTIVITY_EVENT:()=>i,VIDEO_SHOWCASE_WATCH_LATER_TOOLTIP_VIEWED_EVENT:()=>o});const i="video showcase scroll to top button change activity",o="video showcase watch later tooltip viewed event",n="https://vk.com/video_faq"},72053:(e,t,r)=>{r.d(t,{addPlaylistVideo:()=>n});var i=r(450927),o=r(826619);const n=async(e,{owner_id:t,id:r})=>{window.VideoUpload||await(0,i.getVideoUploadModule)(),(0,o.uploadVideoPopup)(t,`${r}`,"1")}},243885:(e,t,r)=>{r.d(t,{copyPlaylistUrl:()=>o});var i=r(29593);const o=(e,{owner_id:t,id:r})=>(0,i.copyPlaylistUrl)({owner_id:t,id:r})},564756:(e,t,r)=>{r.d(t,{createClipFromVideo:()=>n});var i=r(450927),o=r(56550);const n=async(e,t)=>{const{id:r,owner_id:n}=t;r&&n&&(window.VideoUpload||await(0,i.getVideoUploadModule)(),window.VideoUpload.showVideoToClip(null,o.EEntryPointName.VideoToClip,{ownerId:n,videoId:r}))}},761986:(e,t,r)=>{r.d(t,{downloadVideo:()=>d});var i=r(538522),o=r(317216),n=r(636576),s=r(761520),a=r(29593);const d=(e,{id:t,owner_id:r,title:d,type:c,track_code:l})=>{d&&c&&(s.ajax.post("al_video.php?act=get_download_url",{video_raw_id:(0,i.joinRawId)({ownerId:r,itemId:t})},{onDone:e=>{(({url:e,title:t,type:r})=>{if(!e)return!1;const i=document.createElement("a");i.href=e,i.download=`${t}.mp4`,document.body.appendChild(i),i.click(),document.body.removeChild(i),(0,n.statlogsValueEvent)("video_downloads","",r)})({title:d,type:c,url:e})}}),(0,a.logDownloadClick)(o.EventItemType.VIDEO,l))}},952671:(e,t,r)=>{r.d(t,{editPlaylistById:()=>o});var i=r(134551);const o=(e,t,r)=>{i.Video.editAlbum(t,e,r,!0)}},817182:(e,t,r)=>{r.d(t,{editVideo:()=>s});var i=r(538522),o=r(270959),n=r(768797);const s=(e,{owner_id:t,id:r,type:s},a)=>{(0,o.showBox)("al_video.php?act=edit_box",{vid:r,oid:t,is_short_video:"short_video"===s?1:0},{containerClass:"video_edit",params:{onHide:()=>{n.entitiesVideoService.videoGetByIdFx({id:(0,i.joinRawId)({ownerId:t,itemId:r}),extended:1,group_id:a?.groupId})}}})}},950885:(e,t,r)=>{r.d(t,{addPlaylistVideo:()=>i.addPlaylistVideo,copyPlaylistUrl:()=>o.copyPlaylistUrl,createClipFromVideo:()=>n.createClipFromVideo,downloadVideo:()=>s.downloadVideo,editPlaylistById:()=>a.editPlaylistById,editVideo:()=>d.editVideo,openPlaylist:()=>c.openPlaylist,openPlaylistFactory:()=>c.openPlaylistFactory,openPlaylistPage:()=>f.openPlaylistPage,openVideo:()=>l.openVideo,openVideoExtended:()=>l.openVideoExtended,sendReport:()=>u.sendReport,sendReportExtended:()=>u.sendReportExtended,sendReportWithCallback:()=>u.sendReportWithCallback,shareVideo:()=>v.shareVideo,shareVideoExtended:()=>v.shareVideoExtended,toggleDelete:()=>p.toggleDelete,toggleFav:()=>m.toggleFav,toggleHideAuthor:()=>g.toggleHideAuthor,togglePlaylistSubscribe:()=>_.togglePlaylistSubscribe});var i=r(72053),o=r(243885),n=r(564756),s=r(761986),a=r(952671),d=r(817182),c=r(336695),l=r(494106),u=r(374181),v=r(812695),p=r(548998),m=r(657168),g=r(210358),f=r(90796),_=r(593407)},336695:(e,t,r)=>{r.d(t,{openPlaylist:()=>a,openPlaylistFactory:()=>s});var i=r(361121),o=r(538522),n=r(494106);const s=e=>(t,r)=>{if(!r.first_video_id)return;const{itemId:s,ownerId:a}=(0,i.splitRawId)(r.first_video_id),d=(0,o.joinRawId)({ownerId:r.owner_id,itemId:r.id});(0,n.openVideoExtended)(t,{id:s,owner_id:a},{playlistId:d,module:e})},a=s()},90796:(e,t,r)=>{r.d(t,{openPlaylistPage:()=>o});var i=r(856289);const o=(e,{owner_id:t,id:r})=>{const o=(0,i.getPlaylistURL)(t,r);e.ctrlKey||e.metaKey?window.open(o,"_blank"):window.nav.go(o)}},494106:(e,t,r)=>{r.d(t,{openVideo:()=>v,openVideoExtended:()=>u});var i=r(538522),o=r(835426),n=r(317216),s=r(856289),a=r(437266),d=r(540462),c=r(134551),l=r(29593);const u=(e,{id:t,owner_id:r,track_code:u,viewed_duration:v,type:p,live_status:m},{playlistId:g="",module:f,searchTrackCode:_}={})=>{if(!r||!t||c.Video.checkClickEvent(e))return;(0,l.logTapClick)(n.EventItemType.VIDEO,u,_),e.preventDefault(),e.stopPropagation();const E=v?(0,o.getPlayFromByDuration)(v):"",S=!(0,s.isVideoStandalone)(),y=!((0,d.partConfigEnabled)("video_new_video_page")&&(0,s.isVideoSection)()),b="music_video"===p&&S,I="live"===p&&m&&["started","waiting"].includes(m),h="short_video"===p;if(S&&y||b||I||h)return void c.Video.show(e,(0,i.joinRawId)({ownerId:r,itemId:t}),{autoplay:1,forceAllVideos:Boolean(g),queue:0,playlistId:g,playFrom:E,addParams:{track_code:u},module:f,shortVideo:h},e.target);const V=window.cur.currentModule?window.cur.currentModule():window.cur.module;if(window.VideoShowcase?.setVideoPageOpts({module:f??V,trackCode:u,context:window.cur.ref_context}),g&&(0,d.partConfigEnabled)("video_new_video_page")){const e=(0,a.getVideoPageUrl)({playlistId:g,ownerId:r,videoId:t},!0);(0,a.logVideoClick)({},{playlistId:g}),window.nav.go(e)}else window.nav.go(`/video${(0,i.joinRawId)({ownerId:r,itemId:t})}`)},v=(e,t)=>u(e,t)},374181:(e,t,r)=>{r.d(t,{sendReport:()=>n,sendReportExtended:()=>o,sendReportWithCallback:()=>s});var i=r(866467);const o=(e,{id:t,owner_id:r},{cardFeedback:o,withoutCardFeedback:n=!1}={})=>{window.stManager.add([window.jsc("web/videoview.js")],(()=>{window.Videoview.showReportVideoForm(r,t,(()=>{n||window.stManager.add([window.jsc("web/video_showcase.js")],(()=>{window.VideoShowcase?.showCardFeedback(String(r),String(t),(0,i.getLang)("global_report_spam")),o?.(e)}))}))}))},n=(e,t)=>o(e,t),s=(e,t,r)=>o(e,t,{cardFeedback:r})},812695:(e,t,r)=>{r.d(t,{shareVideo:()=>n,shareVideoExtended:()=>o});var i=r(538522);const o=(e,t,r)=>{window.stManager.add([window.jsc("web/likes.js")],(()=>{window.Likes.share(`video${(0,i.joinRawId)({ownerId:e,itemId:t})}`,{list:r})}))},n=(e,t)=>{o(t.owner_id,t.id)}},548998:(e,t,r)=>{r.d(t,{toggleDelete:()=>o});var i=r(768797);const o=(e,{owner_id:t,id:r},{groupId:o}={})=>{const n={id:r,ownerId:t},s=o?-Math.abs(o):void 0;t!==s&&(n.targetId=s),i.videoDeletingService.toggleDeleteVideoEvent(n)}},657168:(e,t,r)=>{r.d(t,{toggleFav:()=>s});var i=r(317216),o=r(768797),n=r(29593);const s=(e,{id:t,owner_id:r,is_favorite:s,track_code:a},d)=>{o.faveService.toggleFaveVideoEvent({id:t,ownerId:r,ref:a,source:d?.source}),(0,n.logFaveClick)(!!s,i.EventItemType.VIDEO,a,d?.searchTrackCode)}},210358:(e,t,r)=>{r.d(t,{toggleHideAuthor:()=>n});var i=r(768797),o=r(29593);const n=(e,t,r,n)=>{i.hideAuthorService?.toggleHideAuthorEvent({id:t.owner_id}),(0,o.logHideAuthorClick)(!!n?.is_video_subscription_hidden,{video_id:t.id,video_owner_id:t.owner_id},t.track_code)}},593407:(e,t,r)=>{r.d(t,{togglePlaylistSubscribe:()=>o});var i=r(174269);const o=(e,{is_subscribed:t,owner_id:r,id:o})=>{t?i.appCatalogService.playlistService.unsubscribeFromPlaylist({owner_id:r,album_id:o}):i.appCatalogService.playlistService.subscribeOnPlaylist({owner_id:r,album_id:o})}},909784:(e,t,r)=>{r.d(t,{CatalogServiceAdapter:()=>s});var i=r(331635),o=r(254328),n=r(664317);class s{constructor(e){this.currentSection=(0,o.store)(e.$currentSection),this.currentSectionId=(0,o.store)(e.$currentSectionId),this.isFirstSection=(0,o.store)(e.$isFirstSection),this.refetchCurrentSection=(0,o.event)(e.refetchCurrentSectionEvent),this.setCatalogGetSections=(0,o.event)(e.setCatalogGetSectionsEvent)}}s=(0,i.__decorate)([(0,n.adapter)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",["undefined"==typeof InstanceCatalogService?Object:InstanceCatalogService])],s)},743635:(e,t,r)=>{r.d(t,{OwnerServiceAdapter:()=>s});var i=r(331635),o=r(254328),n=r(664317);class s{constructor(e){this.owner=(0,o.store)(e.$ownerData),this.error=(0,o.store)(e.$ownerError),this.isLoading=(0,o.store)(e.$ownerLoading),this.fetch=(0,o.event)(e.getOwnerEvent),this.dispose=(0,o.event)(e.resetOwnerEvent)}}s=(0,i.__decorate)([(0,n.adapter)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",["undefined"==typeof InstanceOwnerService?Object:InstanceOwnerService])],s)},424932:(e,t,r)=>{r.d(t,{VideoDeletingServiceAdapter:()=>s});var i=r(331635),o=r(254328),n=r(664317);class s{constructor(e){this.removedVideosIds=(0,o.store)(e.$removedVideosIds),this.toggleDeleted=(0,o.event)(e.toggleDeleteVideoEvent)}}s=(0,i.__decorate)([(0,n.adapter)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",["undefined"==typeof InstanceVideoDeletingService?Object:InstanceVideoDeletingService])],s)},830019:(e,t,r)=>{r.d(t,{createAbortControllersService:()=>n});var i=r(32489);const o=e=>Array.isArray(e)?e:[e],n=e=>{const t=e.createStore({}),r=e.createEvent(),n=e.createEvent(),s=e.createEvent();return(0,i.sample)({clock:n,source:t,fn:(e,t)=>o(t).reduce(((e,t)=>(e[t]=null,e)),{...e}),target:t}),(0,i.sample)({clock:r,source:t,fn:(e,t)=>(o(t).forEach((t=>e[t]?.abort())),t),target:n}),(0,i.sample)({clock:s,fn:e=>Object.keys(e),target:r}),(0,i.sample)({clock:s,source:t,fn:(e,t)=>({...e,...t}),target:t}),{$controllers:t,abortRequestEvent:r,clearControllerEvent:n,setControllerEvent:s}}},884022:(e,t,r)=>{r.d(t,{createAuthorUserService:()=>s});var i=r(32489),o=r(831144),n=r(386595);const s=({domain:e,entitiesUsersService:t})=>{const[r,s]=(0,o.createAbortControllerField)(e),a=e.createEvent(),d=e.createStore(""),c=(0,n.combineEntitiesId)(t.$entitiesUsers,d),l=(0,n.combineEntitiesId)(t.$entitiesUsersErrors,d),u=(0,n.combineEntitiesId)(t.$entitiesUsersLoading,d);return(0,i.sample)({clock:a,fn:e=>String(e),target:d}),(0,i.sample)({clock:a,source:r,fn:e=>(e?.abort(),new AbortController),target:r}),(0,i.sample)({clock:a,source:r,fn:(e,t)=>({controller:e,query:{fields:"screen_name,photo_50,photo_100,photo_200",user_ids:String(t)}}),target:t.getUsersFx}),{$userData:c,$userError:l,$userLoading:u,getUserEvent:a,abortUserRequestEvent:s}}},596791:(e,t,r)=>{r.d(t,{createCatalogService:()=>c});var i=r(32489),o=r(980578),n=r(831144),s=r(903274),a=r(963626),d=r(386595);const c=({domain:e,entitiesCatalogSectionsService:t,entitiesGroupsService:r,entitiesUsersService:c,entitiesVideoAlbumsService:l,entitiesVideoService:u,entitiesPlaceholdersService:v})=>{const{$entitiesCatalogVideo:p,$entitiesCatalogVideoErrors:m,$entitiesCatalogVideoLoading:g,catalogGetVideoFx:f,updateSectionEvent:_}=(0,o.createEntitiesCatalogVideoService)({domain:e,entitiesCatalogSectionsService:t,entitiesGroupsService:r,entitiesUsersService:c,entitiesVideoAlbumsService:l,entitiesVideoService:u,entitiesPlaceholdersService:v}),E=(0,s.createCurrentSectionService)({domain:e,entitiesCatalogSectionsService:t}),{$replaceBlocksError:S,$loadingBlockId:y,abortReplacementRequestEvent:b,replaceBlocksEvent:I}=(0,a.createBlocksReplacementService)({domain:e,currentSectionService:E,entitiesCatalogSectionsService:t,updateSectionEvent:_}),{$currentSection:h,$currentSectionId:V,$currentSectionError:w,$currentSectionPending:A,abortSectionRequestEvent:k,changeCurrentSectionIdEvent:C,refetchCurrentSectionEvent:F,setCurrentSectionIdEvent:P}=E,x=e.createEvent(),L=e.createEvent(),O=e.createEvent(),R=(0,i.restore)(O,{url:""}),$=e.createEvent(),[T,U]=(0,n.createAbortControllerField)(e);(0,i.sample)({clock:$,target:[U,k,b]});const B=(0,i.sample)({clock:O,source:{loading:g,query:R},filter:({loading:e,query:t},{url:r,noRefetchOnSameLoading:i})=>t.url!==r||!i||!e[r],fn:(e,t)=>({controller:t.url?new AbortController:null,query:t})});(0,i.sample)({clock:B,fn:({query:e})=>e,target:R}),(0,i.sample)({clock:B,fn:({controller:e})=>e,target:U}),(0,i.sample)({clock:B,fn:()=>null,target:[k,b]}),(0,i.sample)({clock:B,filter:({controller:e,query:t})=>Boolean(t.url&&e),fn:({controller:e,query:{url:t,trackCode:r}})=>({controller:e,query:{need_blocks:1,owner_id:0,url:t,...r&&{from_trackcode:r}}}),target:f}),(0,i.sample)({clock:[f.done,f.fail],fn:()=>null,target:T}),(0,i.sample)({clock:f.done,fn:e=>e.result.catalog?.default_section||"",target:P});const G=(0,i.combine)({currentSectionId:V,entities:p,query:R},(({currentSectionId:e,entities:t,query:r})=>{const i=null!==r.url&&t[r.url];return i?{...i,default_section:e,sections:[]}:null})),D=(0,i.combine)({entities:p,query:R},(({entities:e,query:t})=>e[t.url]??null)),M=(0,i.combine)({catalogEntities:g,currentSectionPending:A,query:R},(({catalogEntities:e,currentSectionPending:t,query:r})=>t||e[r.url]||null)),q=(0,i.combine)({catalogEntities:g,query:R},(({catalogEntities:e,query:t})=>e[t.url]||!1)),N=(0,i.combine)({catalogEntities:m,currentSectionError:w,replaceBlocksError:S,query:R},(({catalogEntities:e,currentSectionError:t,replaceBlocksError:r,query:i})=>!(0,d.isAbortApiError)(r)&&r||!(0,d.isAbortApiError)(t)&&t||!(0,d.isAbortApiError)(e[i.url])&&e[i.url]||null)),j=(0,i.combine)({section:h,deletedAlbums:l.$entitiesVideoDeletedAlbums},(({section:e,deletedAlbums:t})=>{if(!e)return[];const r=e.blocks?.map((e=>({...e,albums_ids:e.albums_ids?.filter((e=>!t[e]))})));return[{...e,blocks:r}]})),K=(0,i.combine)({catalog:G,sections:t.$entitiesCatalogSections},(({sections:e,catalog:t})=>{const r=t?.buttons?.[0];return r?.section_id&&e[r.section_id]||null})),H=(0,i.combine)(D,V,((e,t)=>e?.sections[0]?.id===t));(0,i.sample)({clock:x,source:(0,i.combine)([D,R]),filter:([e])=>Boolean(e?.sections),fn:([e,t],r)=>({id:e?.sections?.find((e=>e.url===r))?.id??"",trackCode:t.trackCode??""}),target:C}),(0,i.sample)({clock:L,source:(0,i.combine)([K,R]),filter:([e])=>Boolean(e?.subsections?.length),fn:([e,t],r)=>({id:e?.subsections?.find((e=>e.url===r))?.id??"",trackCode:t.trackCode??""}),target:C});const{setCatalogGetSectionsEvent:W}=t;return{$catalog:D,$catalogGetVideoPending:q,$currentSection:h,$currentSectionId:V,$currentSectionError:w,$currentSectionPending:A,$isFirstSection:H,$pageStructureSection:K,$data:G,$error:N,$loadingBlockId:y,$pending:M,$sections:j,abortRequestEvent:$,changeCurrentSectionIdEvent:C,changeCurrentSectionUrlEvent:x,changeCurrentSubsectionUrlEvent:L,changeUrlEvent:O,refetchCurrentSectionEvent:F,replaceBlocksEvent:I,setCatalogGetSectionsEvent:W,updateSectionEvent:_}}},903274:(e,t,r)=>{r.d(t,{createCurrentSectionService:()=>s});var i=r(32489),o=r(831144),n=r(386595);const s=({domain:e,entitiesCatalogSectionsService:t})=>{const r=e.createEvent(),s=e.createEvent(),a=e.createEvent(),d=e.createEvent(),c=e.createStore(""),l=e.createStore(!1),[u,v]=(0,o.createAbortControllerField)(e),{$entitiesCatalogSections:p,$entitiesSectionsErrors:m,$entitiesSectionsLoading:g,catalogGetSectionFx:f,setCatalogGetSectionsEvent:_}=t,E=(0,i.attach)({effect:f,mapParams:({silent:e,...t})=>t}),S=(0,i.combine)({entities:p,currentSectionId:c},(({entities:e,currentSectionId:t})=>e[t]??null)),y=(0,i.combine)({entities:g,currentSectionId:c,silentPending:l},(({entities:e,currentSectionId:t,silentPending:r})=>Boolean(!r&&e[t]))),b=(0,i.combine)({entities:m,currentSectionId:c},(({entities:e,currentSectionId:t})=>e[t]??null));return(0,i.sample)({clock:s,source:c,filter:(e,{id:t})=>e!==t,fn:(e,{id:t,trackCode:r})=>({controller:t?new AbortController:null,id:t,trackCode:r}),target:d}),(0,i.sample)({clock:a,target:c}),(0,i.sample)({clock:r,source:{currentSectionId:c,currentSection:S},filter:({currentSectionId:e,currentSection:t},{filter:r}={})=>!!e&&(!t||!r||r(t)),fn:({currentSectionId:e},{silent:t}={})=>({controller:new AbortController,id:e,silent:t}),target:d}),(0,i.sample)({clock:d,fn:({id:e})=>e,target:a}),(0,i.sample)({clock:d,fn:({controller:e})=>e,target:v}),(0,i.sample)({clock:d,source:p,filter:(e,{id:t,silent:r})=>Boolean(!r&&e[t]?.blocks),fn:(e,{id:t})=>{const{id:r,title:i,url:o}=e[t];return[{id:r,title:i,url:o}]},target:_}),(0,i.sample)({clock:d,source:p,filter:(e,{controller:t,id:r,silent:i})=>Boolean((i||!e[r]?.blocks)&&t),fn:(e,{controller:t,id:r,silent:i,trackCode:o})=>({controller:t,query:o?{section_id:r,from_track_code:o}:{section_id:r},silent:i}),target:E}),(0,i.sample)({clock:E.done.filterMap((({params:e,result:t})=>e.silent&&t.section?[t.section]:void 0)),target:_}),(0,i.sample)({clock:E,filter:({silent:e})=>Boolean(e),fn:()=>!0,target:l}),(0,i.sample)({clock:E.finally,filter:({params:e})=>Boolean(e.silent),fn:()=>!1,target:l}),(0,i.sample)({clock:[E.done,E.fail],filter:e=>!(0,n.isAbortError)(e),fn:()=>null,target:u}),{$currentSection:S,$currentSectionId:c,$currentSectionError:b,$currentSectionPending:y,abortSectionRequestEvent:v,changeCurrentSectionIdEvent:s,refetchCurrentSectionEvent:r,setCurrentSectionIdEvent:a}}},802369:(e,t,r)=>{r.d(t,{createEntitiesVideoSyncService:()=>o});var i=r(32489);const o=e=>{const t=new Map;return(0,i.sample)({clock:e.setVideosEvent,fn:e=>{t.forEach((t=>{t(e)}))}}),{subscribe:e=>{t.set(e,e)},unsubscribe:e=>{t.delete(e)}}}},988765:(e,t,r)=>{r.d(t,{createExtendedService:()=>n});var i=r(32489);const o=e=>Object.values(e).filter((e=>Boolean(e))),n=({entitiesGroupsService:e,entitiesUsersService:t,entitiesVideoAlbumsService:r,entitiesVideoService:n,entitiesPlaceholdersService:s,entitiesCatalogLiveChannelsService:a,entitiesCatalogLiveCategoriesService:d})=>{const{$entitiesGroups:c}=e,{$entitiesUsers:l}=t,{$entitiesVideo:u}=n,{$entitiesVideoAlbums:v}=r,{$entitiesPlaceholders:p}=s,{$entitiesCatalogLiveChannels:m}=a,{$entitiesCatalogLiveCategories:g}=d;return{$data:(0,i.combine)({albums:v,groups:c,placeholders:p,profiles:l,videos:u,liveChannels:m,liveCategories:g},(({albums:e,groups:t,placeholders:r,profiles:i,videos:n,liveChannels:s,liveCategories:a})=>({albums:o(e),groups:o(t),placeholders:o(r),profiles:o(i),videos:o(n),vklive_channels:o(s),vklive_categories:o(a)})))}}},122974:(e,t,r)=>{r.d(t,{createFaveService:()=>c});var i=r(32489),o=r(188386),n=r(538522),s=r(314309),a=r(317216),d=r(231450);const c=({domain:e,entitiesVideoService:t,onAddFave:r,onRemoveFave:c})=>{const{$entitiesVideo:l,patchVideosEvent:u}=t,{faveAddVideoFx:v,faveRemoveVideoFx:p}=(0,o.createEntitiesFaveVideoService)({domain:e}),m=e.createStore({}),g=e.createEvent(),f=e.createEffect((({controller:e,currentFav:t,query:r,trackCode:i})=>{const o={controller:e,query:r};return(0,d.getFromType)("search")&&s.searchStatsCollector.logEvent({track_code:i,action:t?a.SearchClickActionMap.UNFAVE_OUT:a.SearchClickActionMap.FAVE_OUT,type:a.EventItemType.VIDEO}),t?p(o):v(o)}));return(0,i.sample)({clock:g,source:l,fn:(e,{id:t,ownerId:r,ref:i,source:o})=>{const s=(0,n.joinRawId)({ownerId:r,itemId:t}),a=Boolean(e[s]?.is_favorite),d=e[s]?.track_code;return{controller:new AbortController,currentFav:a,fullId:s,query:{id:t,owner_id:r,ref:i,source:o},trackCode:d}},target:f}),(0,i.sample)({clock:f,source:m,fn:(e,{controller:t,fullId:r})=>(e[r]?.abort(),{...e,[r]:t}),target:m}),(0,i.sample)({clock:f,fn:({currentFav:e,query:t})=>[{id:t.id,owner_id:t.owner_id,is_favorite:!e}],target:u}),(0,i.sample)({clock:[f.done,f.fail],filter:e=>"error"in e||!e.result,fn:({params:e})=>[{id:e.query.id,owner_id:e.query.owner_id,is_favorite:e.currentFav}],target:u}),(0,i.sample)({clock:[f.done,f.fail],source:m,fn:(e,{params:t})=>{const r={...e};return delete r[t.fullId],r},target:m}),(0,i.sample)({clock:v.done,target:r}),(0,i.sample)({clock:p.done,fn:e=>({rollbackCallback:t=>{const{query:r}=e.params;g({id:r.id,ownerId:r.owner_id,ref:r.ref,source:t??r.source})}}),target:c}),{toggleFaveVideoEvent:g}}},906784:(e,t,r)=>{r.d(t,{createGroupOwnerService:()=>s});var i=r(32489),o=r(162951),n=r(8520);const s=({domain:e})=>{const t=(0,o.createUtilsResolveScreenNameFx)({domain:e}),r=e.createStore(null),s=e.createStore(null),a=e.createEvent(),d=e.createEvent();return(0,i.sample)({clock:a,source:s,fn:(e,t)=>{e?.abort();return{controller:new AbortController,query:{screen_name:t}}},target:t}),(0,i.sample)({clock:t,fn:({controller:e})=>e||null,target:s}),(0,i.sample)({clock:d,source:s,fn:e=>(e?.abort(),null),target:r}),(0,i.sample)({clock:[t.doneData],filter:e=>(0,n.isNumber)(e?.object_id),fn:({object_id:e})=>e,target:r}),(0,i.sample)({clock:[t.done,t.fail],fn:()=>null,target:s}),{resolveGroupOwnerByScreenNameEvent:a,resetGroupOwnerStore:d,$groupOwnerId:r}}},214587:(e,t,r)=>{r.d(t,{createHideAuthorService:()=>s});var i=r(32489),o=r(468073),n=r(733920);const s=({domain:e,entitiesGroupsService:t})=>{const{$entitiesGroups:r,patchGroupsEvent:s}=t,{hideAuthorVideoFx:a,chooseAuthorVideoFx:d,resetHideAuthorVideoByIdEvent:c}=(0,n.createEntitiesSubscribeToggleHideAuthorService)({domain:e}),l=e.createStore({}),u=e.createEvent(),v=e.createEffect((({controller:e,currentHide:t,query:r})=>{const i={controller:e,query:r};return t?d(i):a(i)}));return(0,i.sample)({clock:u,source:r,fn:(e,{id:t})=>{const r=o.Ranges.convertOwnerIdToGroupId(t),i=Boolean(e[r]?.is_video_subscription_hidden);return{controller:new AbortController,currentHide:i,fullId:r,query:{author_ids:String(t)}}},target:v}),(0,i.sample)({clock:v,source:l,fn:(e,{controller:t,fullId:r})=>(e[r]?.abort(),{...e,[r]:t}),target:l}),(0,i.sample)({clock:v,fn:({currentHide:e,fullId:t})=>[{id:t,is_video_subscription_hidden:!e}],target:s}),(0,i.sample)({clock:[v.done,v.fail],filter:e=>"error"in e||!e.result,fn:({params:e})=>[{id:e.fullId,is_video_subscription_hidden:e.currentHide}],target:s}),(0,i.sample)({clock:[v.done,v.fail],source:l,fn:(e,{params:t})=>{const{[t.fullId]:r,...i}=e;return i},target:l}),{toggleHideAuthorEvent:u,resetHideAuthorVideoByIdEvent:c}}},44975:(e,t,r)=>{r.d(t,{createOwnerService:()=>s});var i=r(32489),o=r(468073),n=r(386595);const s=({domain:e,entitiesGroupsService:t,entitiesUsersService:r})=>{const s=e.createEvent(),a=e.createEvent(),d=e.createStore(null).reset(s);return(0,i.sample)({clock:a,fn:({ownerId:e})=>e,target:d}),(0,i.sample)({clock:a,filter:({ownerId:e})=>o.Ranges.isGroupId(e),fn:({controller:e,ownerId:t})=>({controller:e,query:{groupIds:[o.Ranges.convertOwnerIdToGroupId(t)]}}),target:t.groupsGetByIdFx}),(0,i.sample)({clock:a,filter:({ownerId:e})=>o.Ranges.isUserId(e),fn:({controller:e,ownerId:t})=>({controller:e,query:{fields:"screen_name,photo_50",user_ids:String(t)}}),target:r.getUsersFx}),{$ownerData:(0,n.$selectUserOrGroupStoreById)(r.$entitiesUsers,t.$entitiesGroups,d),$ownerError:(0,n.$selectUserOrGroupStoreById)(r.$entitiesUsersErrors,t.$entitiesGroupsErrors,d),$ownerLoading:(0,n.$selectUserOrGroupStoreById)(r.$entitiesUsersLoading,t.$entitiesGroupsLoading,d),getOwnerEvent:a,resetOwnerEvent:s}}},497663:(e,t,r)=>{r.d(t,{createPinService:()=>d});var i=r(32489),o=r(264874),n=r(986125),s=r(361121),a=r(29593);const d=({domain:e,catalogService:t,entitiesVideoService:r,groupOwnerService:d,onPin:c,onUnpin:l})=>{const{$entitiesVideo:u,patchVideosEvent:v}=r,p=(0,n.createVideoPinVideoFx)({domain:e}),m=(0,n.createVideoUnpinVideoFx)({domain:e}),g=e.createStore({}),f=e.createStore(null),{$catalog:_,$currentSection:E,refetchCurrentSectionEvent:S}=t,y=e.createEvent(),b=e.createEffect((({controller:e,isPinned:t,query:r})=>{const i={controller:e,query:r};return t?m(i):p(i)}));(0,i.sample)({clock:(0,o.once)(y),source:u,fn:e=>{const t=Object.values(e).findIndex((e=>e?.is_pinned)),r=Object.values(e)[t];if(!r)return null;const{id:i,owner_id:o}=r;return i&&o?(0,a.getVideoCardKey)(o,i):null},target:f}),(0,i.sample)({clock:y,source:{videos:u,groupOwnerId:d.$groupOwnerId},fn:({videos:e,groupOwnerId:t},{videoId:r,ownerId:i})=>{const o=(0,a.getVideoCardKey)(i,r),n=Boolean(e[o]?.is_pinned);return{controller:new AbortController,isPinned:n,fullId:o,query:{video_id:r,owner_id:i,group_id:t}}},target:b}),(0,i.sample)({clock:b,source:g,fn:(e,{controller:t,fullId:r})=>(e[r]?.abort(),{...e,[r]:t}),target:g}),(0,i.sample)({clock:b,fn:({isPinned:e,query:{video_id:t,owner_id:r}})=>[{owner_id:r,id:t,is_pinned:!e}],target:v}),(0,i.sample)({clock:b.done,filter:e=>!("error"in e),fn:({params:{isPinned:e,query:{video_id:t,owner_id:r}}})=>e?null:(0,a.getVideoCardKey)(r,t),target:f}),(0,i.sample)({clock:b,source:f,filter:(e,{isPinned:t,query:{video_id:r,owner_id:i}})=>Boolean(e)&&!t&&(0,a.getVideoCardKey)(i,r)!==e,fn:e=>{const{ownerId:t,itemId:r}=(0,s.splitRawId)(e);return[{owner_id:t,id:r,is_pinned:!1}]},target:v}),(0,i.sample)({clock:p.done,fn:c}),(0,i.sample)({clock:m.done,fn:l}),(0,i.sample)({clock:[p.done,m.done],source:{$catalog:_,$currentSection:E},filter:({$catalog:e,$currentSection:t})=>e?.sections[0]?.id===t?.id,fn:()=>({silent:!0}),target:S});return{togglePin:(e,{id:t,owner_id:r})=>{y({videoId:t,ownerId:r})},toggleVideoPinEvent:y}}},963626:(e,t,r)=>{r.d(t,{createBlocksReplacementService:()=>d});var i=r(32489),o=r(876761),n=r(831144),s=r(782399),a=r(386595);const d=({domain:e,entitiesCatalogSectionsService:t,currentSectionService:r,updateSectionEvent:d})=>{const c=e.createStore(null).reset(t.initCatalog),l=e.createStore(!1),u=e.createStore(null),v=e.createStore(null),p=e.createEvent(),m=(0,o.createCatalogReplaceBlocksFx)({domain:e}),[g,f]=(0,n.createAbortControllerField)(e),{$currentSection:_,changeCurrentSectionIdEvent:E}=r;(0,i.sample)({clock:E,fn:()=>null,target:f});const S=(0,i.sample)({clock:p,fn:e=>({controller:e?new AbortController:null,id:e})});(0,i.sample)({clock:S,fn:({controller:e})=>e,target:f}),(0,i.sample)({clock:S,fn:()=>null,target:v}),(0,i.sample)({clock:S,source:u,filter:(e,{id:t})=>e!==t,fn:(e,{controller:t,id:r})=>({controller:t,query:{replacement_ids:r}}),target:m}),(0,i.sample)({clock:S,fn:({id:e})=>e,target:u}),(0,i.sample)({clock:m,fn:()=>!0,target:l}),(0,i.sample)({clock:[m,E],fn:()=>null,target:c}),(0,i.sample)({clock:m.fail,filter:({error:e})=>!(0,s.isNetworkError)(e)||"AbortError"!==e.error.name,fn:({error:e})=>e,target:c});const y=(0,i.sample)({clock:m.doneData,source:_,filter:(e,{replacements:t})=>Boolean(e&&t),fn:(e,{replacements:t,...r})=>{const i={...e,next_from:t.new_next_from},o={...r,section:i};return i.blocks?.length?(i.blocks=t.replacements.reduce(((e,{from_block_ids:t,to_blocks:r})=>(t?.forEach(((t,o)=>{const n=r?.[o];if(!n)return;const s=i.blocks?.findIndex((({id:e})=>e===t));void 0!==s&&(e[s]=n)})),e)),[...i.blocks]),o):o}});return(0,i.sample)({clock:y,fn:({section:e})=>{const{id:t,title:r,url:i}=e;return[{id:t,title:r,url:i}]},target:t.setCatalogGetSectionsEvent}),(0,i.sample)({clock:y,target:d}),(0,i.sample)({clock:[m.fail,y],fn:()=>!1,target:l}),(0,i.sample)({clock:[m.fail,m.done],filter:e=>!(0,a.isAbortError)(e),fn:()=>null,target:g}),(0,i.sample)({clock:m,fn:({query:e})=>e?.replacement_ids?.split("/")[0]||null,target:v}),(0,i.sample)({clock:[m.fail,m.done],filter:e=>!(0,a.isAbortError)(e),fn:()=>null,target:v}),{$currentReplacementId:u,$replaceBlocksError:c,$replaceBlocksPending:l,$loadingBlockId:v,abortReplacementRequestEvent:f,replaceBlocksEvent:p}}},704555:(e,t,r)=>{r.d(t,{createVideoDeletingService:()=>a});var i=r(32489),o=r(538522),n=r(361121),s=r(386595);const a=({domain:e,entitiesVideoService:t})=>{const{$entitiesVideo:r,patchVideosEvent:a,videoAddFx:d,videoDeleteFx:c,videoRestoreFx:l}=t,u=e.createStore({}),v=e.createEvent(),p=e.createEvent(),m=(0,i.restore)(p,{}),g=(e,t)=>({...e,[t]:!e[t]}),f=e.createEffect((({controller:e,deleted:t,query:r})=>{const i={controller:e,query:{video_id:r.id,owner_id:r.owner_id,target_id:r.target_id}};return t?r.target_id&&r.owner_id!==r.target_id?d(i):l(i):c(i)}));(0,i.sample)({clock:v,source:r,fn:(e,{id:t,ownerId:r,targetId:i})=>{const n=(0,o.joinRawId)({ownerId:r,itemId:t}),s=Boolean(e[n]?.localDeleted);return{controller:new AbortController,deleted:s,fullId:n,query:{id:t,owner_id:r,target_id:i}}},target:f}),(0,i.sample)({clock:f,source:u,fn:(e,{controller:t,fullId:r})=>(e[r]?.abort(),{...e,[r]:t}),target:u}),(0,i.sample)({clock:f,fn:({deleted:e,query:{target_id:t,...r}})=>[{...r,localDeleted:!e}],target:a}),(0,i.sample)({clock:f,source:m,fn:(e,{fullId:t})=>g(e,t),target:p}),(0,i.sample)({clock:[f.done,f.fail],filter:e=>"error"in e||!e.result,fn:({params:{deleted:e,query:{target_id:t,...r}}})=>[{...r,localDeleted:e}],target:a}),(0,i.sample)({clock:[f.done,f.fail],source:m,filter:(e,t)=>"error"in t||!t.result,fn:(e,{params:{fullId:t}})=>g(e,t),target:p}),(0,i.sample)({clock:[f.done,f.fail],source:u,fn:(e,{params:t})=>{const r={...e};return delete r[t.fullId],r},target:u}),(0,i.sample)({clock:f.done,filter:({params:e,result:t})=>Boolean(!e.deleted&&t),fn:({params:e})=>(0,s.showVideoDeletedSnackbar)((()=>{const{ownerId:t,itemId:r}=(0,n.splitRawId)(e.fullId),{target_id:i}=e.query;v({ownerId:t,id:r,targetId:i})}))});return{$removedVideosIds:m,$removedVideosCount:(0,i.sample)({clock:m,fn:e=>Object.values(e).filter(Boolean).length}),toggleDeleteVideoEvent:v}}},996713:(e,t,r)=>{r.d(t,{createVideoPlaylistsModalService:()=>p});var i=r(474848),o=r(178317),n=r(530040),s=r(986125),a=r(468073),d=r(866467),c=r(32489),l=r(432465),u=r(818515),v=r(856289);const p=e=>{const t=e.createEvent(),r=(0,c.restore)(t,null),p=e.createEvent(),m=(0,c.restore)(p,null),g=e.createEvent(),f=(0,c.restore)(g,null),_=e.createEvent(),E=(0,c.restore)(_,null),S=e.createStore(!1),y=e.createEvent(),b=(0,o.createEntitiesVideoAlbumService)({domain:e}),I=(0,n.createListsVideosAlbumsService)({domain:e,entitiesVideoAlbumService:b}),{$listIds:h,$loading:V,$fullyLoaded:w}=I.selectStores(r.map((e=>e||""))),A=(0,s.createVideoGetAlbumsByVideoFx)({domain:e}),k=(0,s.createVideoAddToAlbumFx)({domain:e}),C=(0,s.createVideoRemoveFromAlbumFx)({domain:e}),F=e.createEvent(),P=e.createEvent(),x=e.createEvent(),L=e.createEvent(),{$entitiesVideoBinding:O,addBindingsEvent:R,toggleBindingEvent:$,resetBindingsEvent:T}=(0,v.createVideoBindingsService)(e);return(0,c.sample)({clock:y,fn:({videoId:e})=>e,target:g}),(0,c.sample)({clock:y,fn:({ownerId:e})=>e,target:t}),(0,c.sample)({clock:y,fn:({isGroupOwner:e})=>e,target:p}),(0,c.sample)({clock:y,fn:({videoOwnerId:e})=>e,target:_}),(0,c.sample)({clock:y,fn:()=>!1,target:S}),(0,c.sample)({clock:$,fn:()=>!0,target:S}),(0,c.sample)({clock:y,fn:({ownerId:e,isGroupOwner:t})=>{const r={query:{count:50,extended:1},controller:new AbortController,entityKey:e};return t?r.query.group_id=e:r.query.owner_id=e,r},target:I.fetchVideosAlbumsFx}),(0,c.sample)({clock:y,fn:({ownerId:e,videoId:t,videoOwnerId:r,isGroupOwner:i})=>({query:{video_id:t,owner_id:r,target_id:i&&e?a.Ranges.convertGroupIdToOwnerId(e):e},controller:new AbortController}),target:A}),(0,c.sample)({clock:A.done,fn:({params:e,result:t})=>({video_id:e.query.video_id,album_ids:t}),target:R}),(0,c.sample)({clock:F,source:{bindings:O,videoId:f},filter:({videoId:e})=>Boolean(e),fn:({bindings:e,videoId:t})=>{const r=[],i=[],o=t??0;return Object.keys(e[o]).forEach((t=>{const n=Number(t);if(isNaN(n)||!(n in e[o]))return;e[o][n]?r.push(n):i.push(n)})),{toAdd:r.join(","),toRemove:i.join(",")}},target:P}),(0,c.sample)({clock:[F,L],fn:()=>{(0,l.showSnackbar)({text:(0,d.getLang)("video_changes_saved"),before:{content:(0,i.jsx)(u.Icon28ListCheckOutline,{})},timeout:v.SNACKBAR_TIMEOUT}).catch()}}),(0,c.sample)({clock:P,source:{videoId:f,videoOwnerId:E,targetId:r,isGroupOwner:m},filter:(e,{toAdd:t})=>Boolean(t),fn:({videoId:e,videoOwnerId:t,targetId:r,isGroupOwner:i},{toAdd:o})=>({query:{target_id:(r=i&&r?a.Ranges.convertGroupIdToOwnerId(r):r)??0,owner_id:t??0,video_id:e??0,album_ids:o},controller:new AbortController}),target:k}),(0,c.sample)({clock:L,source:{videoId:f,videoOwnerId:E,targetId:r,isGroupOwner:m},fn:({videoId:e,videoOwnerId:t,targetId:r,isGroupOwner:i},{id:o})=>({query:{target_id:(r=i&&r?a.Ranges.convertGroupIdToOwnerId(r):r)??0,owner_id:t??0,video_id:e??0,album_ids:o.toString()},controller:new AbortController}),target:k}),(0,c.sample)({clock:P,source:{videoId:f,videoOwnerId:E,targetId:r,isGroupOwner:m},filter:(e,{toRemove:t})=>Boolean(t),fn:({videoId:e,videoOwnerId:t,targetId:r,isGroupOwner:i},{toRemove:o})=>({query:{target_id:(r=i&&r?a.Ranges.convertGroupIdToOwnerId(r):r)??0,owner_id:t??0,video_id:e??0,album_ids:o},controller:new AbortController}),target:C}),(0,c.sample)({clock:x,source:r,filter:e=>Boolean(e),fn:e=>({entityKey:e??0,count:50}),target:I.fetchMoreVideosAlbumsEvent}),{$entitiesVideoBinding:O,$videosAlbumsIds:h,$entitiesPlaylists:b.$entitiesVideoAlbums,$videosAlbumsLoading:V,$videoAlbumsFullyLoaded:w,toggleBindingEvent:$,resetBindingsEvent:T,initModalEvent:y,saveChangesEvent:F,fetchMorePlaylists:x,removeFromAlbumDoneEvent:C.done,$wasToggled:S,createPlaylistEvent:L}}},733920:(e,t,r)=>{r.d(t,{createEntitiesSubscribeToggleHideAuthorService:()=>c});var i=r(32489),o=r(986125),n=r(401464),s=r(564479);const a=({query:e})=>e.author_ids,d=(e,{query:t},r)=>({...e,[t.author_ids]:r}),c=({domain:e})=>{const t=(0,o.createVideoSubscribeHideAuthor)({domain:e}),r=(0,o.createVideoSubscribeUnhideAuthor)({domain:e}),c=(0,n.errors)({effect:t,getKey:a,store:e.createStore({})}),l=(0,s.pendings)({effect:t,getKey:a,store:e.createStore({})}),u=(0,n.errors)({effect:r,getKey:a,store:e.createStore({})}),v=(0,s.pendings)({effect:r,getKey:a,store:e.createStore({})}),p=e.createStore({}),m=e.createEvent(),g=e.createEvent();return p.on(m,(()=>({}))),p.on(g,((e,{id:t,value:r})=>({...e,[t]:r}))),(0,i.sample)({clock:t.done,source:p,filter:(e,{result:t})=>Boolean(t),fn:(e,{params:t})=>d(e,t,!0),target:p}),(0,i.sample)({clock:r.done,source:p,filter:(e,{result:t})=>Boolean(t),fn:(e,{params:t})=>d(e,t,!1),target:p}),{$entitiesHideAuthorVideoErrors:c,$entitiesHideAuthorVideoLoading:l,$entitiesChooseAuthorVideoLoading:v,$entitiesChooseAuthorVideoFxVideoErrors:u,$entitiesHideAuthorVideo:p,chooseAuthorVideoFx:r,hideAuthorVideoFx:t,setHideAuthorVideoByIdEvent:g,resetHideAuthorVideoByIdEvent:m}}},89783:(e,t,r)=>{r.d(t,{registerPlaylistUpdateEventListener:()=>i.registerPlaylistUpdateEventListener});var i=r(367133)},367133:(e,t,r)=>{r.d(t,{registerPlaylistUpdateEventListener:()=>o});var i=r(826619);const o=e=>{const t=({detail:t})=>{e.patchVideoAlbumsEvent([{id:t.id,owner_id:t.ownerId,title:t.title}]),e.getVideoAlbumByIdFx({query:{owner_id:t.ownerId,album_id:t.id}})};return window.addEventListener(i.PlaylistFormEvents.UPDATE,t),()=>window.removeEventListener(i.PlaylistFormEvents.UPDATE,t)}},768797:(e,t,r)=>{r.d(t,{CatalogServiceAdapter:()=>P.CatalogServiceAdapter,OwnerServiceAdapter:()=>x.OwnerServiceAdapter,PlaylistServiceAdapter:()=>A.PlaylistServiceAdapter,PlaylistVideoRemovingServiceAdapter:()=>A.PlaylistVideoRemovingServiceAdapter,VideoDeletingServiceAdapter:()=>L.VideoDeletingServiceAdapter,authorUserService:()=>U,createPageCatalogService:()=>$,createPagePinService:()=>T,entitiesGroupsService:()=>B,entitiesUsersService:()=>D,entitiesVideoAlbumsService:()=>M,entitiesVideoService:()=>q,entitiesVideoSyncService:()=>N,extendedService:()=>j,faveService:()=>K,groupOwnerService:()=>W,hideAuthorService:()=>H,ownerService:()=>Y,playlistDeletingService:()=>z,playlistService:()=>X,playlistSubscriptionService:()=>Z,playlistVideoRemovingService:()=>Q,playlistVideoReorderService:()=>ee,videoDeletingService:()=>te,videoPlaylistsModalService:()=>re});var i=r(32489),o=r(12563),n=r(669557),s=r(178317),a=r(906085),d=r(583855),c=r(296627),l=r(87029),u=r(750988),v=r(424424),p=r(558137),m=r(996713),g=r(869071),f=r(884022),_=r(596791),E=r(802369),S=r(988765),y=r(122974),b=r(44975),I=r(704555),h=r(497663),V=r(906784),w=r(214587),A=r(947360),k=r(89783),C=r(386595),F=r(540462),P=r(909784),x=r(743635),L=r(424932);const O=e=>{const t=(0,o.createEntitiesGroupsService)({domain:e}),r=(0,n.createEntitiesUsersService)({domain:e}),i=(0,s.createEntitiesVideoAlbumService)({domain:e}),v=(0,a.createEntitiesPlaceholdersService)({domain:e}),p=(0,d.createEntitiesCatalogLiveChannelsService)({domain:e}),_=(0,c.createEntitiesCatalogLiveCategoriesService)({domain:e}),h=(0,l.createEntitiesVideoService)({domain:e,entitiesGroupsService:t,entitiesUsersService:r}),P=(0,S.createExtendedService)({entitiesGroupsService:t,entitiesUsersService:r,entitiesVideoAlbumsService:i,entitiesVideoService:h,entitiesPlaceholdersService:v,entitiesCatalogLiveChannelsService:p,entitiesCatalogLiveCategoriesService:_}),x=(0,y.createFaveService)({domain:e,entitiesVideoService:h,onAddFave:C.showAddedFaveSnackbarFx,onRemoveFave:C.showRemovedFaveSnackbarFx}),L=(0,F.partConfigEnabled)("video_subscribes_menu_hide_author")?(0,w.createHideAuthorService)({domain:e,entitiesGroupsService:t}):void 0,O=(0,I.createVideoDeletingService)({domain:e,entitiesVideoService:h}),R=(0,u.createListsVideosService)({domain:e,entitiesVideoService:h}),$=(0,b.createOwnerService)({domain:e,entitiesGroupsService:t,entitiesUsersService:r}),T=(0,A.createPlaylistService)({domain:e,entitiesVideoAlbumsService:i,listsVideosService:R,ownerService:$}),U=(0,A.createPlaylistSubscriptionService)({domain:e,entitiesVideoAlbumsService:i,playlistService:T,onSubscribe:C.showPlaylistSubscribeSnackbar,onUnsubscribe:C.showPlaylistUnsubscribeSnackbar}),B=(0,A.createPlaylistDeletingService)({entitiesVideoAlbumsService:i,onDeleted:e=>{(0,C.sendPlaylistDeletedEvents)(),(0,C.showPlaylistDeletedSnackbar)(e)}}),G=(0,m.createVideoPlaylistsModalService)(e),D=(0,A.createPlaylistVideoRemovingService)({domain:e,entitiesVideoAlbumsService:i,entitiesVideoService:h,playlistService:T,videoPlaylistsModalService:G,onVideoRemove:C.showPlaylistVideoRemoveSnackbar}),M=(0,f.createAuthorUserService)({domain:e,entitiesUsersService:r}),q=(0,A.createPlaylistVideoReorderService)({domain:e,playlistService:T}),N=(0,V.createGroupOwnerService)({domain:e}),j=(0,E.createEntitiesVideoSyncService)(h);return(0,k.registerPlaylistUpdateEventListener)(i),(0,g.connectTrackTmrGroupsJoin)(t.groupsJoinFx),{entitiesGroupsService:t,entitiesUsersService:r,entitiesVideoAlbumsService:i,entitiesPlaceholdersService:v,entitiesVideoService:h,entitiesVideoSyncService:j,extendedService:P,faveService:x,listsVideosService:R,ownerService:$,playlistService:T,groupOwnerService:N,playlistSubscriptionService:U,playlistDeletingService:B,videoPlaylistsModalService:G,videoDeletingService:O,playlistVideoRemovingService:D,authorUserService:M,playlistVideoReorderService:q,hideAuthorService:L,entitiesCatalogLiveChannelsService:p,entitiesCatalogLiveCategoriesService:_}},R=(0,p.makeSharedState)("static/js/modules/web/VideoShowcase/store/index.ts",(()=>{const e=(0,i.createDomain)("VideoShowcase/VideoCatalog");return{domain:e,...O(e)}}),{version:1}),$=e=>{const{entitiesGroupsService:t,entitiesUsersService:r,entitiesVideoAlbumsService:i,entitiesVideoService:o,entitiesPlaceholdersService:n}=R(),s=(0,v.createEntitiesCatalogSectionsService)({domain:e});return(0,_.createCatalogService)({domain:e,entitiesCatalogSectionsService:s,entitiesGroupsService:t,entitiesUsersService:r,entitiesVideoAlbumsService:i,entitiesVideoService:o,entitiesPlaceholdersService:n})},T=(e,t)=>{const{entitiesVideoService:r,groupOwnerService:i}=R();return(0,h.createPinService)({domain:e,catalogService:t,entitiesVideoService:r,groupOwnerService:i,onPin:C.showVideoPinnedSnackbar,onUnpin:C.showVideoUnpinnedSnackbar})},{authorUserService:U,entitiesGroupsService:B,entitiesPlaceholdersService:G,entitiesUsersService:D,entitiesVideoAlbumsService:M,entitiesVideoService:q,entitiesVideoSyncService:N,extendedService:j,faveService:K,hideAuthorService:H,groupOwnerService:W,listsVideosService:J,ownerService:Y,playlistDeletingService:z,playlistService:X,playlistSubscriptionService:Z,playlistVideoRemovingService:Q,playlistVideoReorderService:ee,videoDeletingService:te,videoPlaylistsModalService:re}=R()},284994:(e,t,r)=>{r.d(t,{PlaylistServiceAdapter:()=>s});var i=r(331635),o=r(254328),n=r(664317);class s{constructor(e){this.playlistData=(0,o.store)(e.$playlistData),this.fetch=(0,o.event)(e.processPlaylistEvent)}}s=(0,i.__decorate)([(0,n.adapter)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",["undefined"==typeof PlaylistServiceInstance?Object:PlaylistServiceInstance])],s)},445416:(e,t,r)=>{r.d(t,{PlaylistVideoRemovingServiceAdapter:()=>s});var i=r(331635),o=r(254328),n=r(664317);class s{constructor(e){this.removedVideosCount=(0,o.store)(e.$removedVideosCount),this.removedVideosIds=(0,o.store)(e.$removedVideosIds),this.removeVideoForUser=(0,o.event)(e.removeVideoForUserEvent),this.toggleVideoRemoved=(0,o.event)(e.toggleVideoRemovedEvent)}}s=(0,i.__decorate)([(0,n.adapter)(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",["undefined"==typeof PlaylistVideoRemovingServiceInstance?Object:PlaylistVideoRemovingServiceInstance])],s)},667229:(e,t,r)=>{r.d(t,{createPlaylistDeletingService:()=>o});var i=r(32489);const o=({entitiesVideoAlbumsService:e,onDeleted:t})=>{const{$entitiesVideoDeletedAlbums:r,$entitiesVideoDeletedAlbumsErrors:o,$entitiesVideoDeletedAlbumsPending:n,deleteVideoAlbumByIdFx:s}=e;return(0,i.sample)({clock:s.done,source:e.$entitiesVideoAlbums,fn:(e,{params:r})=>{const i=e[r.id];i&&t(i)}}),{$entitiesVideoDeletedAlbums:r,$entitiesVideoDeletedAlbumsErrors:o,$entitiesVideoDeletedAlbumsPending:n,deleteVideoAlbumByIdFx:s}}},404965:(e,t,r)=>{r.d(t,{createPlaylistService:()=>c});var i=r(32489),o=r(831144),n=r(361121),s=r(538522),a=r(386595),d=r(231450);const c=({domain:e,entitiesVideoAlbumsService:t,listsVideosService:r,ownerService:c})=>{const[l,u]=(0,o.createAbortControllerField)(e),v=e.createEvent(),p=e.createEvent(),m=e.createEvent(),g=e.createEvent(),f=e.createStore("").reset(v),_=e.createStore("").reset(v),E=(0,a.combineEntitiesId)(t.$entitiesVideoAlbums,_),S=(0,a.combineEntitiesId)(t.$entitiesVideoAlbumsErrors,_),y=(0,a.combineEntitiesId)(t.$entitiesVideoAlbumsLoading,_),{getOwnerEvent:b,...I}=c;(0,i.sample)({clock:p,source:{playlistId:_,playlistLoading:y},filter:({playlistId:e,playlistLoading:t})=>Boolean(e&&!t),fn:({playlistId:e})=>{const{itemId:t,ownerId:r}=(0,n.splitRawId)(e);return{ownerId:r,playlistId:t}},target:m}),(0,i.sample)({clock:m,source:l,fn:e=>(e?.abort(),new AbortController),target:l}),(0,i.sample)({clock:m,source:l,fn:(e,{ownerId:t})=>({controller:e,ownerId:t}),target:b}),(0,i.sample)({clock:m,fn:()=>{},target:r.resetVideosEvent}),(0,i.sample)({clock:m,fn:({ownerId:e,playlistId:t})=>(0,s.joinRawId)({itemId:t,ownerId:e}),target:_}),(0,i.sample)({clock:m,fn:({ownerId:e})=>String(e),target:f}),(0,i.sample)({clock:m,source:l,fn:(e,{ownerId:t,playlistId:r})=>({controller:e,query:{album_id:r,owner_id:t}}),target:t.getVideoAlbumByIdFx}),(0,i.sample)({clock:m,source:l,fn:(e,{ownerId:t,playlistId:r})=>({controller:e,entityKey:(0,s.joinRawId)({itemId:r,ownerId:t}),query:{album_id:r,count:25,extended:1,owner_id:t,fields:"verified,photo_50,is_esia_verified,is_sber_verified,is_tinkoff_verified",track_code:(0,d.getTrackCode)("search_track_code")||""}}),target:r.fetchVideosFx}),(0,i.sample)({clock:g,source:_,fn:e=>({entityKey:e}),target:r.fetchMoreVideosEvent});const h=r.selectStores(_.map(String));return{...I,$playlistId:_,$playlistData:E,$playlistError:S,$playlistLoading:y,$videosCount:h.$count,$videosError:h.$error,$videosFullyLoaded:h.$fullyLoaded,$videosIds:h.$listIds,$videosLoading:h.$loading,abortRequestEvent:u,resetPlaylistEvent:v,processPlaylistEvent:m,fetchMoreVideosEvent:g,refetchPlaylistEvent:p}}},669662:(e,t,r)=>{r.d(t,{createPlaylistSubscriptionService:()=>s});var i=r(32489),o=r(830019),n=r(386595);const s=({domain:e,entitiesVideoAlbumsService:t,playlistService:r,onSubscribe:s,onUnsubscribe:a})=>{const{$playlistId:d}=r,c=(0,o.createAbortControllersService)(e),l=(0,n.createPlaylistSubscriptionEffect)({$playlistId:d,abortControllersService:c,targetFx:(0,n.createCorrectingPlaylistEffect)({correction:1,effectFx:t.subscribeToVideoAlbumFx,entitiesVideoAlbumsService:t}),onDone:s}),u=(0,n.createPlaylistSubscriptionEffect)({$playlistId:d,abortControllersService:c,targetFx:(0,n.createCorrectingPlaylistEffect)({correction:-1,effectFx:t.unsubscribeFromVideoAlbumFx,entitiesVideoAlbumsService:t}),onDone:a}),v=e.createEvent(),p=(0,i.sample)({source:{controllers:c.$controllers,playlistId:d},fn:({controllers:e,playlistId:t})=>e[t]??null});return(0,i.sample)({clock:v,source:d,fn:e=>e,target:c.abortRequestEvent}),{$abortController:p,abortRequestEvent:v,subscribeFx:l,unsubscribeFx:u}}},810779:(e,t,r)=>{r.d(t,{createPlaylistVideoRemovingService:()=>n});var i=r(32489),o=r(538522);const n=({domain:e,entitiesVideoAlbumsService:t,entitiesVideoService:r,playlistService:n,videoPlaylistsModalService:s,onVideoRemove:a})=>{const{$playlistData:d,$playlistId:c,processPlaylistEvent:l,refetchPlaylistEvent:u}=n,v=e.createEvent(),p=(0,i.restore)(v,{}),m=e.createStore({}),g=e.createEvent();(0,i.sample)({clock:g,source:{playlistData:d,removedVideosIds:p},filter:({playlistData:e},{vkId:t})=>void 0!==t&&t===e?.owner_id,fn:({removedVideosIds:e},{videoId:t})=>({...e,[t]:!0}),target:p}),(0,i.sample)({clock:g,source:d,filter:(e,{vkId:t})=>void 0!==t&&t!==e?.owner_id,fn:(e,{videoId:t})=>({id:t}),target:r.videoGetByIdFx});const f=e.createEvent(),_=t.addVideoToAlbumFx,E=t.removeVideoFromAlbumFx,S=e.createEffect((({controller:e,currentIsRemoved:t,query:r})=>{const i={controller:e,query:r.params};return t?E(i):_(i)})),y=(e,t)=>({...e,[t]:!e[t]});(0,i.sample)({clock:[l,u],fn:()=>({}),target:p}),(0,i.sample)({clock:f,source:p,fn:(e,{params:t})=>{const r=(0,o.joinRawId)({ownerId:t.owner_id,itemId:t.video_id});return y(e,r)},target:p}),(0,i.sample)({clock:f,source:p,fn:(e,t)=>{const r=(0,o.joinRawId)({ownerId:t.params.owner_id,itemId:t.params.video_id});return{controller:new AbortController,currentIsRemoved:!!e[r],query:t}},target:S}),(0,i.sample)({clock:S,source:m,fn:(e,{controller:t,query:r})=>{const i=r.params.video_id;return e[i]?.abort(),{...e,[i]:t}},target:m}),(0,i.sample)({clock:[S.done,S.fail],source:p,filter:(e,t)=>("error"in t||!t.result)&&!t.params?.controller?.signal?.aborted,fn:(e,{params:t})=>{const r=t.query.params,i=(0,o.joinRawId)({ownerId:r.owner_id,itemId:r.video_id});return y(e,i)},target:v}),(0,i.sample)({clock:[S.done,S.fail],source:m,fn:(e,{params:t})=>{if(t?.controller?.signal?.aborted)return e;const r=t.query.params.video_id,i={...e};return delete i[r],i},target:m}),(0,i.sample)({clock:E.done,source:d,fn:(e,{params:t})=>{e&&a(e,(()=>{f({params:t.query})}))}}),(0,i.sample)({clock:s.removeFromAlbumDoneEvent,source:{playlistId:c,removedVideosIds:p},filter:({playlistId:e,removedVideosIds:t},{params:r})=>{if(t[(0,o.joinRawId)({itemId:r.query.video_id,ownerId:r.query.owner_id})])return!1;const{album_id:i,album_ids:n="",target_id:s}=r.query;if(void 0===s)return!1;const a=n.split(",");return i&&a.push(i),a.some((t=>(0,o.joinRawId)({itemId:Number(t),ownerId:s})===e))},fn:({removedVideosIds:e},{params:t})=>({...e,[(0,o.joinRawId)({itemId:t.query.video_id,ownerId:t.query.owner_id})]:!0}),target:v});return{$removedVideosCount:(0,i.sample)({clock:p,fn:e=>Object.values(e).filter(Boolean).length}),$removedVideosIds:p,removeVideoForUserEvent:g,toggleVideoRemovedEvent:f}}},90923:(e,t,r)=>{r.d(t,{createPlaylistVideoReorderService:()=>s});var i=r(32489),o=r(986125),n=r(361121);const s=({domain:e,playlistService:t})=>{const r=(0,o.createVideoReorderVideosFx)({domain:e}),s=e.createEvent();return(0,i.sample)({clock:s,source:t.$playlistId,fn:(e,t)=>{const{ownerId:r,videoId:i,beforeVideoId:o,beforeOwnerId:s,afterVideoId:a,afterOwnerId:d}=t,{ownerId:c,itemId:l}=(0,n.splitRawId)(e),u={target_id:c,album_id:l,owner_id:r,video_id:i};return void 0!==o&&(u.before_video_id=o,u.before_owner_id=s),void 0!==a&&(u.after_video_id=a,u.after_owner_id=d),{query:u}},target:r}),{reorderVideosEvent:s}}},947360:(e,t,r)=>{r.d(t,{PlaylistServiceAdapter:()=>d.PlaylistServiceAdapter,PlaylistVideoRemovingServiceAdapter:()=>c.PlaylistVideoRemovingServiceAdapter,createPlaylistDeletingService:()=>o.createPlaylistDeletingService,createPlaylistService:()=>i.createPlaylistService,createPlaylistSubscriptionService:()=>n.createPlaylistSubscriptionService,createPlaylistVideoRemovingService:()=>s.createPlaylistVideoRemovingService,createPlaylistVideoReorderService:()=>a.createPlaylistVideoReorderService});var i=r(404965),o=r(667229),n=r(669662),s=r(810779),a=r(90923),d=r(284994),c=r(445416)},30332:(e,t,r)=>{r.d(t,{combineEntitiesId:()=>o});var i=r(32489);function o(e,t,r){return(0,i.combine)({entities:e,id:t},(({entities:e,id:t})=>t&&e[t]||r||null))}},65426:(e,t,r)=>{r.d(t,{createCorrectingPlaylistEffect:()=>n});var i=r(32489),o=r(538522);const n=({correction:e,effectFx:t,entitiesVideoAlbumsService:r})=>{const n=(0,i.attach)({effect:t});return(0,i.sample)({clock:n.done,source:r.$entitiesVideoAlbums,filter:(e,{params:t})=>"number"==typeof t.query.album_id,fn:(t,{params:r})=>{const i=(0,o.joinRawId)({itemId:r.query.album_id,ownerId:r.query.owner_id}),n=t[i]?.followers_count??0;return[{id:r.query.album_id,owner_id:r.query.owner_id,followers_count:Math.max(0,n+e)}]},target:r.patchVideoAlbumsEvent}),n}},301085:(e,t,r)=>{r.d(t,{createPlaylistSubscriptionEffect:()=>s});var i=r(32489),o=r(361121),n=r(204643);const s=({$playlistId:e,abortControllersService:t,targetFx:r,onDone:s,onEventFired:a})=>{const{clearControllerEvent:d,setControllerEvent:c}=t,l=(0,i.attach)({effect:r,source:e,mapParams:(e,t)=>{const{itemId:r,ownerId:i}=(0,o.splitRawId)(t);return{controller:e,query:{owner_id:i,album_id:r}}}});return(0,i.sample)({clock:l,source:e,fn:(e,t)=>(a?.(),{[e]:t}),target:c}),(0,i.sample)({clock:[l.done,l.fail],source:e,filter:(e,t)=>!(0,n.isAbortError)(t),fn:e=>e,target:d}),(0,i.sample)({clock:l.done,fn:()=>{s?.()}}),(0,i.attach)({effect:l,mapParams:()=>new AbortController})}},386595:(e,t,r)=>{r.d(t,{$selectUserOrGroupStoreById:()=>a.$selectUserOrGroupStoreById,combineEntitiesId:()=>i.combineEntitiesId,createCorrectingPlaylistEffect:()=>o.createCorrectingPlaylistEffect,createPlaylistSubscriptionEffect:()=>n.createPlaylistSubscriptionEffect,isAbortApiError:()=>s.isAbortApiError,isAbortError:()=>s.isAbortError,sendPlaylistDeletedEvents:()=>d.sendPlaylistDeletedEvents,showAddedFaveSnackbarFx:()=>c.showAddedFaveSnackbarFx,showPlaylistDeletedSnackbar:()=>l.showPlaylistDeletedSnackbar,showPlaylistSubscribeSnackbar:()=>u.showPlaylistSubscribeSnackbar,showPlaylistUnsubscribeSnackbar:()=>v.showPlaylistUnsubscribeSnackbar,showPlaylistVideoRemoveSnackbar:()=>p.showPlaylistVideoRemoveSnackbar,showRemovedFaveSnackbarFx:()=>c.showRemovedFaveSnackbarFx,showVideoDeletedSnackbar:()=>m.showVideoDeletedSnackbar,showVideoPinnedSnackbar:()=>g.showVideoPinnedSnackbar,showVideoUnpinnedSnackbar:()=>f.showVideoUnpinnedSnackbar});var i=r(30332),o=r(65426),n=r(301085),s=r(204643),a=r(521045),d=r(260167),c=r(544283),l=r(313124),u=r(533835),v=r(57536),p=r(434442),m=r(933789),g=r(204918),f=r(948159)},204643:(e,t,r)=>{r.d(t,{isAbortApiError:()=>n,isAbortError:()=>s});var i=r(664331),o=r(782399);const n=e=>e&&(0,o.isNetworkError)(e)&&(0,i.isRequestAbortError)(e.error),s=e=>"error"in e&&n(e.error)},831064:(e,t,r)=>{r.d(t,{selectEntityById:()=>o});var i=r(468073);const o=(e,t,r)=>{if(null===r)return null;const o=Number(r);return isNaN(o)?null:i.Ranges.isUserId(o)?e[r]??null:i.Ranges.isGroupId(o)?t[i.Ranges.convertOwnerIdToGroupId(o)]??null:null}},521045:(e,t,r)=>{r.d(t,{$selectUserOrGroupStoreById:()=>n});var i=r(32489),o=r(831064);const n=(e,t,r)=>(0,i.combine)(e,t,r,o.selectEntityById)},260167:(e,t,r)=>{r.d(t,{sendPlaylistDeletedEvents:()=>o});var i=r(826619);const o=()=>{window.dispatchEvent(new CustomEvent(i.PlaylistFormEvents.DELETE))}},544283:(e,t,r)=>{r.d(t,{showAddedFaveSnackbarFx:()=>m,showRemovedFaveSnackbarFx:()=>g});var i=r(474848),o=r(866467),n=r(432465),s=r(32489),a=r(540462),d=r(373080),c=r(13966),l=r(644746),u=r(85775),v=r(856289),p=r(373594);const m=(0,s.createEffect)((()=>{const e=(0,a.partConfigEnabled)("video_bookmarks_renaming_to_watch_later")?{text:(0,o.getLang)("video_added_to_watch_later"),before:{content:(0,i.jsx)(c.Icon24ClockOutline,{})},action:window.location.href.includes(v.BOOKMARKS_URL)?void 0:{label:(0,o.getLang)("global_open_section"),onClick:()=>window.location.href=v.BOOKMARKS_URL}}:{text:(0,i.jsx)(d.InnerHTML,{children:(0,o.langLink)(v.BOOKMARKS_URL,(0,o.getLang)("fave_video_added"))}),before:{content:(0,i.jsx)(l.Icon24FavoriteOutline,{})}};(0,n.showSnackbar)(e)})),g=(0,s.createEffect)((e=>{const t=(0,a.partConfigEnabled)("video_bookmarks_renaming_to_watch_later")?{text:(0,o.getLang)("video_deleted_from_my_watch_later"),before:{content:(0,i.jsx)(c.Icon24ClockOutline,{})},action:e.rollbackCallback?{label:(0,o.getLang)("global_cancel"),onClick:(t,r)=>{e.rollbackCallback?.(p.FAVORITE_SOURCES.SNACKBAR),(0,n.hideSnackbar)(r)}}:void 0}:{text:(0,o.getLang)("video_deleted_from_my_bookmarks"),before:{content:(0,i.jsx)(u.Icon24UnfavoriteOutline,{})}};(0,n.showSnackbar)(t)}))},313124:(e,t,r)=>{r.d(t,{showPlaylistDeletedSnackbar:()=>n});var i=r(866467),o=r(432465);const n=e=>{const t=e?`«${e.title}»`:"",r=(0,i.langReplace)((0,i.getLang)("video_playlist_name_deleted"),{name:t});(0,o.showSnackbar)({text:r})}},533835:(e,t,r)=>{r.d(t,{showPlaylistSubscribeSnackbar:()=>a});var i=r(474848),o=r(432465),n=r(866467),s=r(629775);const a=()=>(0,o.showSnackbar)({text:(0,n.getLang)("video_you_subscribed_to_playlist"),before:{content:(0,i.jsx)(s.Icon20CheckAlt,{})}})},57536:(e,t,r)=>{r.d(t,{showPlaylistUnsubscribeSnackbar:()=>a});var i=r(474848),o=r(432465),n=r(866467),s=r(629775);const a=()=>(0,o.showSnackbar)({text:(0,n.getLang)("video_you_unsubscribed_from_playlist"),before:{content:(0,i.jsx)(s.Icon20CheckAlt,{})}})},434442:(e,t,r)=>{r.d(t,{showPlaylistVideoRemoveSnackbar:()=>a});var i=r(474848),o=r(866467),n=r(432465),s=r(818515);const a=(e,t)=>{const r=e?.title?` «${e.title}»`:"",a=`${(0,o.getLang)("video_deleted_from_playlist")}${r}`,d=(0,n.showSnackbar)({text:a,before:{content:(0,i.jsx)(s.Icon28ListCheckOutline,{})},action:{label:(0,o.getLang)("global_cancel"),onClick:async()=>{t(),(0,n.hideSnackbar)(await d)}}})}},933789:(e,t,r)=>{r.d(t,{showVideoDeletedSnackbar:()=>n});var i=r(866467),o=r(432465);const n=e=>{(0,o.showSnackbar)({text:(0,i.getLang)("video_video_deleted_snackbar_text"),action:{label:(0,i.getLang)("global_cancel"),onClick:async(t,r)=>{e(),(0,o.hideSnackbar)(r)}}})}},204918:(e,t,r)=>{r.d(t,{showVideoPinnedSnackbar:()=>n});var i=r(432465),o=r(866467);const n=()=>(0,i.showSnackbar)({text:(0,o.getLang)("video_pin_video_snackbar"),type:"ok"})},948159:(e,t,r)=>{r.d(t,{showVideoUnpinnedSnackbar:()=>n});var i=r(432465),o=r(866467);const n=()=>(0,i.showSnackbar)({text:(0,o.getLang)("video_unpin_video_snackbar"),type:"ok"})},244299:(e,t,r)=>{r.d(t,{cleanUrlForRequest:()=>i});const i=e=>(e=>e.endsWith("/")?e.slice(0,-1):e)((e=>e.split("?")[0])(e))},431725:(e,t,r)=>{r.d(t,{ensureEventPropagationStopping:()=>i});const i=(e,t)=>(e.stopPropagation(),t(e))},245238:(e,t,r)=>{r.d(t,{getOwnerPlaylistsUrl:()=>o});var i=r(172479);const o=(e,t)=>{const r=(0,i.getOwnerUrl)(e,t);return e?.id?[r,"playlists"].join("/"):r}},789636:(e,t,r)=>{r.d(t,{getShowcaseUrl:()=>i});const i=()=>"/video"},608802:(e,t,r)=>{r.d(t,{getVerifiedBadge:()=>l});var i=r(474848),o=r(699032),n=r(468073),s=r(33305),a=r(541521),d=r(568775),c=r(540462);const l=e=>{if(!e)return;const t=(e=>{const t=(0,s.isOwnerUser)(e);return t&&(e?.is_esia_verified||e?.is_sber_verified||e?.is_tinkoff_verified)?{icon:"esia",ownerId:e.id,verificationType:"esia"}:e?.verified?{icon:"default",ownerId:t?e.id:n.Ranges.convertGroupIdToOwnerId(e.id),verificationType:"default"}:null})(e);return(0,c.partConfigEnabled)("video_verified_badge_fix")?t?(0,i.jsx)(a.VerifiedBadgeWidget,{...t}):void 0:t?(0,i.jsx)(o.VerifiedLabel,{iconHref:"/verify",onMouseOver:e=>(0,d.pageVerifiedTip)(e.currentTarget,{oid:t.ownerId,forceNewTab:!0}),icon:t.icon}):void 0}},380277:(e,t,r)=>{r.d(t,{getVideoCardKey:()=>o});var i=r(538522);const o=(e,t)=>(0,i.joinRawId)({ownerId:e,itemId:t})},29593:(e,t,r)=>{r.d(t,{VideoCardLoggerFactory:()=>o.VideoCardLoggerFactory,canDeletePlaylistVideo:()=>f.canDeletePlaylistVideo,canDeletePlaylistVideoFromPlaylist:()=>f.canDeletePlaylistVideoFromPlaylist,cleanUrlForRequest:()=>E.cleanUrlForRequest,copyPlaylistUrl:()=>g.copyPlaylistUrl,ensureEventPropagationStopping:()=>i.ensureEventPropagationStopping,getFullAlbumId:()=>g.getFullAlbumId,getOwnerPlaylistsUrl:()=>n.getOwnerPlaylistsUrl,getShowcaseUrl:()=>s.getShowcaseUrl,getVerifiedBadge:()=>a.getVerifiedBadge,getVideoCardKey:()=>d.getVideoCardKey,initDestroyablePage:()=>c.initDestroyablePage,isAccessDenied:()=>l.isAccessDenied,isIdInvalid:()=>u.isIdInvalid,isMyVideoAlbum:()=>g.isMyVideoAlbum,isServiceAlbumId:()=>g.isServiceAlbumId,isSystemPlaylist:()=>v.isSystemPlaylist,isVideosEnabled:()=>p.isVideosEnabled,logAddToMeClick:()=>m.logAddToMeClick,logAuthorClick:()=>m.logAuthorClick,logDownloadClick:()=>m.logDownloadClick,logFaveClick:()=>m.logFaveClick,logHideAuthorClick:()=>m.logHideAuthorClick,logShareClick:()=>m.logShareClick,logSubscribeClick:()=>m.logSubscribeClick,logTapClick:()=>m.logTapClick,mapAlbumsWithInclusionsToPlaylists:()=>g.mapAlbumsWithInclusionsToPlaylists,navToAuthorLanding:()=>S.navToAuthorLanding,processLivesCatalogCardsGrid:()=>_.processLivesCatalogCardsGrid,showPlaylistActionSnackbar:()=>g.showPlaylistActionSnackbar});var i=r(431725),o=r(163068),n=r(245238),s=r(789636),a=r(608802),d=r(380277),c=r(205914),l=r(858084),u=r(574669),v=r(748874),p=r(142396),m=r(642119),g=r(305081),f=r(489211),_=r(595071),E=r(244299),S=r(866979)},205914:(e,t,r)=>{r.d(t,{initDestroyablePage:()=>n});var i=r(440961),o=r(256252);function n({descriptor:e,component:t}){var r,n,s;const a=()=>{(0,o.hydrateComponent)({descriptor:e,component:t})};a(),(r=window.cur)._back??(r._back={}),(n=window.cur._back).hide??(n.hide=[]),window.cur._back.hide.push((()=>{const{target:t}=e.payload;t&&i.unmountComponentAtNode(t)})),(s=window.cur._back).show??(s.show=[]),window.cur._back.show.push(a)}},858084:(e,t,r)=>{r.d(t,{isAccessDenied:()=>i});const i=e=>"api_error"===e?.type&&204===Number(e.error?.error_code)},574669:(e,t,r)=>{r.d(t,{isIdInvalid:()=>i});const i=e=>"api_error"===e?.type&&100===Number(e.error?.error_code)},748874:(e,t,r)=>{r.d(t,{isSystemPlaylist:()=>i});const i=e=>1===e?.is_system},142396:(e,t,r)=>{r.d(t,{isVideosEnabled:()=>i});const i=e=>"api_error"===e?.type&&15===Number(e.error?.error_code)},642119:(e,t,r)=>{r.d(t,{logAddToMeClick:()=>p,logAuthorClick:()=>u,logDownloadClick:()=>g,logFaveClick:()=>v,logHideAuthorClick:()=>a,logShareClick:()=>m,logSubscribeClick:()=>c,logTapClick:()=>l});r(174269);var i=r(314309),o=r(317216),n=r(231450);const s=()=>(0,n.getTrackCode)("search_track_code"),a=(e,t,r,n)=>{i.videoSubscribesHideAuthorStatsCollector.logEvent({event_type:e?o.VideoSubscribesHideAuthorEventTypes.UNDO_HIDE_CREATOR_FROM_SUBSCRIPTIONS:o.VideoSubscribesHideAuthorEventTypes.HIDE_CREATOR_FROM_SUBSCRIPTIONS,...t},n,r)},d=(e,t,r,o)=>{(o=s()||o)&&i.searchStatsCollector.logEvent({action:e,type:t,track_code:r||o})},c=(e,t,r)=>{d(e?o.SearchClickActionMap.UNSUBSCRIBE_OUT:o.SearchClickActionMap.SUBSCRIBE_OUT,t,r)},l=(e,t,r)=>{d(o.SearchClickActionMap.TAP,e,t,r)},u=(e,t,r)=>{d(o.SearchClickActionMap.OPEN_OWNER_OUT,e,t,r)},v=(e,t,r,i)=>{d(e?o.SearchClickActionMap.UNFAVE_OUT:o.SearchClickActionMap.FAVE_OUT,t,r,i)},p=(e,t,r,i)=>{d(e?o.SearchClickActionMap.REMOVE_FROM_ME_OUT:o.SearchClickActionMap.ADD_TO_ME_OUT,t,r,i)},m=(e,t)=>{d(o.SearchClickActionMap.SHARE_OUT,e,t)},g=(e,t)=>{d(o.SearchClickActionMap.DOWNLOAD_OUT,e,t)}},866979:(e,t,r)=>{r.d(t,{navToAuthorLanding:()=>o});var i=r(615494);const o=()=>{window.nav.go(i.VIDEO_AUTHORS_LANDING_URL)}},489211:(e,t,r)=>{r.d(t,{canDeletePlaylistVideo:()=>o,canDeletePlaylistVideoFromPlaylist:()=>i});const i=e=>Boolean(e.can_remove_videos),o=(e,t)=>Boolean(e.can_delete&&t.is_system)},305081:(e,t,r)=>{r.d(t,{copyPlaylistUrl:()=>b,getFullAlbumId:()=>_,isMyVideoAlbum:()=>g,isServiceAlbumId:()=>f,mapAlbumsWithInclusionsToPlaylists:()=>S,showPlaylistActionSnackbar:()=>y});var i=r(474848),o=r(538522),n=r(856289),s=r(866467),a=r(432465),d=r(540462),c=r(818515),l=r(629775),u=r(8520),v=r(105330),p=r(450927),m=r(451549);const g=e=>e===n.MY_VIDEO_ALBUM_ID,f=e=>e&&e<=0,_=({albumId:e,ownerId:t})=>e&&t?(0,o.joinRawId)({ownerId:t,itemId:e}):"",E=(e,t=!1)=>({id:e.id,title:e.title,isPrivate:"all"!==e?.privacy?.category||!!e?.privacy?.owners?.excluded?.length,containsVideo:t}),S=({albumsByVideo:e,albums:t,ownerId:r})=>{return e.reduce(((e,i)=>{const o=_({albumId:i,ownerId:r}),n=t[o];return n&&(e[o]=E(n,!0)),e}),{...(i=t,Object.keys(i).reduce(((e,t)=>{const r=i[t];return r&&(e[t]=E(r)),e}),{}))});var i},y=async({playlistId:e,ownerId:t,playlistTitle:r,added:o})=>{const l=g(e);if(!r&&!l)return;const v=l?await(async()=>(window.Video||await(0,p.getVideoModule)(),window.Video._getMyAddedVideosPath()))():(0,n.getPlaylistURL)(t,e);let m;m=o?(0,d.partConfigEnabled)("video_add_to_playlist_modal_mobx_move")?(0,s.getLang)("video_changes_saved"):l?(0,s.getLang)("video_added_to_section"):(0,s.getLang)("video_added_to_playlist"):(0,d.partConfigEnabled)("video_add_to_playlist_modal_mobx_move")?(0,s.getLang)("video_changes_saved"):l?(0,s.getLang)("video_deleted_from_section"):(0,s.getLang)("video_deleted_from_playlist");const f=l?(0,s.getLang)("video_catalog_showcase_section_my_video_added_title"):(0,u.decodeHTMLEntities)(r||"");(0,a.showSnackbar)({text:m,before:{content:(0,i.jsx)(c.Icon28ListCheckOutline,{})},action:(0,d.partConfigEnabled)("video_add_to_playlist_modal_mobx_move")?void 0:{label:f,onClick:()=>window.location.href=v},timeout:n.SNACKBAR_TIMEOUT}).catch()},b=({owner_id:e,id:t})=>{(0,u.copyTextToClipboard)(`https://${(0,v.getHostName)()}${(0,n.getPlaylistURL)(e,t)}`);(0,m.isVKUserAnonymous)()||(0,a.showSnackbar)({text:(0,s.getLang)("video_playlist_url_copied"),before:{content:(0,i.jsx)(l.Icon20CheckAlt,{})}})}},595071:(e,t,r)=>{r.d(t,{processLivesCatalogCardsGrid:()=>i});const i=(e,t=!1)=>{t?e.classList.add("VideoGrid--verticalThumbs"):e.classList.remove("VideoGrid--verticalThumbs")}},794822:(e,t,r)=>{r.d(t,{VerifiedBadgeWidget:()=>n});var i=r(221279),o=r(348754);const n=(0,r(132028).createWidget)(i.VerifiedBadgeModelProvider,o.VerifiedBadge)},725971:(e,t,r)=>{r.d(t,{VerifiedBadge:()=>m});var i=r(474848),o=r(279734),n=r(303800),s=r(373080),a=r(753457),d=r(699032),c=r(221279),l=r(456921),u=r(8520);const v=e=>{e.stopPropagation()},p=({header:e,text:t,headerLink:r},d)=>d?{header:(0,i.jsx)(o.Link,{target:"_blank",href:r,children:e}),text:(0,i.jsx)(n.Div,{mode:"vertical",spacing:0,paddingBottom:0,children:(0,i.jsx)(s.InnerHTML,{Component:a.Footnote,children:t})}),maxWidth:270}:{},m=(0,l.observer)((function({children:e}){const t=(0,c.useVerifiedBadgeModel)();return(0,i.jsx)("span",{onClick:v,children:(0,i.jsx)(d.VerifiedLabel,{iconHref:t.badgeLink,iconTarget:"_blank",tooltip:p(t.tooltipProps,t.isShowTooltip),icon:"esia"===t.verificationType?"esia":"default",onMouseOver:()=>{t.prepareModel()},onClick:u.noop,children:e})})}))},348754:(e,t,r)=>{r.d(t,{VerifiedBadge:()=>i.VerifiedBadge});var i=r(725971)},451081:(e,t,r)=>{r.d(t,{VerifiedBadgeWidget:()=>i.VerifiedBadgeWidget});var i=r(794822)},677151:(e,t,r)=>{r.d(t,{VerifiedBadgeModelProvider:()=>v,useVerifiedBadgeModel:()=>p});var i=r(331635),o=r(327813),n=r(132028),s=r(349773),a=r(639147),d=r(468073),c=r(866467),l=r(859674);class u{get isLoading(){return this._isLoading}get user(){if(this.initId)return this.videoUsersStore?.getById(this.initId)?.data}get badgeLink(){return"esia"===this.verificationType?"/faq20572":"/verify"}get verificationType(){return this._verificationType}get tooltipProps(){return this.initId===l.ID_GROUP_PUBLIC_GAMES_WINNER?{header:(0,c.getLang)("groups_public_games_tt_header"),text:(0,c.langLink)("/publicgames",(0,c.getLang)("groups_public_games_tt_body")),headerLink:this.badgeLink}:this.isGroup?{header:(0,c.getLang)("groups_verified_header"),text:(0,c.getLang)("groups_verified_text"),headerLink:this.badgeLink}:(this.isCurrentUser||this.isUser)&&"default"===this.verificationType?{header:(0,c.getLang)("profile_verified_header"),text:this.user?.deactivated?"":(0,c.langReplace)((0,c.getLang)("profile_verified_text"),{user:this.user?.first_name_gen||""}),headerLink:this.badgeLink}:this.isCurrentUser&&"esia"===this.verificationType?{header:(0,c.getLang)("profile_esia_verified_header"),text:(0,c.getLang)("profile_new_esia_verified_status_owner_tooltip"),headerLink:this.badgeLink}:this.isUser&&"esia"===this.verificationType?{header:(0,c.getLang)("profile_esia_verified_header"),text:this.user?.deactivated?"":(0,c.langReplace)((0,c.getLang)("profile_esia_verified_tooltip"),{user:this.user?.first_name_gen||""}),headerLink:this.badgeLink}:{header:"",text:"",headerLink:this.badgeLink}}get isShowTooltip(){return Boolean(!this.isUser||!this.isLoading||this.user)}get isUser(){return!!this.initId&&d.Ranges.isUserId(this.initId)}get isGroup(){return!!this.initId&&d.Ranges.isGroupId(this.initId)}get isCurrentUser(){return this.initId===window.vk.id}setInitId(e){this.initId=e}setVerificationType(e){this._verificationType=e}setLoading(e){this._isLoading=e}[n.init]({ownerId:e,verificationType:t}){this.setInitId(e),this.setVerificationType(t)}async prepareModel(){if(this.initId&&!this.isGroup&&!this.isLoading&&!this.isCurrentUser&&this.user?.id!==this.initId){this.setLoading(!0);try{this.user||await this.usersFetchProvider.fetch({fields:u.getExtendedFields(),userIds:[this.initId]})}finally{this.setLoading(!1)}}}static getExtendedFields(){return["deactivated","first_name_gen"]}constructor(e,t){this.usersStoreFactory=e,this.usersFetchProvider=t,this.initId=void 0,this._verificationType=void 0,this._isLoading=!1,this.videoUsersStore=void 0,this.videoUsersStore=this.usersStoreFactory.ensureByFields(u.getExtendedFields()),(0,o.makeAutoObservable)(this,{})}}u=(0,i.__decorate)([n.scope.transient(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===s.VideoUsersStoreFactory?Object:s.VideoUsersStoreFactory,void 0===a.VideoUsersFetchService?Object:a.VideoUsersFetchService])],u);const{Provider:v,useModel:p}=(0,n.createProvider)(u)},859674:(e,t,r)=>{r.d(t,{ID_GROUP_PUBLIC_GAMES_WINNER:()=>i});const i=-29246653},221279:(e,t,r)=>{r.d(t,{VerifiedBadgeModelProvider:()=>i.VerifiedBadgeModelProvider,useVerifiedBadgeModel:()=>i.useVerifiedBadgeModel});var i=r(677151)},541521:(e,t,r)=>{r.d(t,{VerifiedBadgeWidget:()=>i.VerifiedBadgeWidget});var i=r(451081)},967028:(e,t,r)=>{r.d(t,{VideoCommentsEvents:()=>a,VideoEditEvents:()=>s,VideoEvents:()=>d,VideoForYouEvents:()=>o,VideoKidsShowcaseEvents:()=>c,VideoPlayerSyncEvents:()=>i,VideoPlaylistEvents:()=>n});const i={TOGGLE_FAVORITE:"VideoPlayerSyncEvents/TOGGLE_FAVORITE",TOGGLE_ADDING_TO_MY_VIDEOS:"VideoPlayerSyncEvents/TOGGLE_ADDING_TO_MY_VIDEOS"},o={VIEW_BLOCK:"VideoForYouEvents/VIEW_BLOCK"},n={SUBSCRIPTION_STATE_CHANGE:"VideoPlaylistEvents/SUBSCRIPTION_STATE_CHANGE"},s={CHANGE_VIDEO_INFO:"VideoEditEvents/CHANGE_VIDEO_INFO"},a={SHOW_MORE_COMMENTS:"VideoCommentsEvents/SHOW_MORE_COMMENTS",SEND_COMMENT:"VideoCommentsEvents/SEND_COMMENT",COMMENT_ACTION:"VideoCommentsEvents/COMMENT_ACTION",COMMENT_CLICK:"VideoCommentsEvents/COMMENT_CLICK"},d={OPEN_EPISODE_LIST:"VideoEvents/OPEN_EPISODE_LIST",UPDATE_ACTIVE_EPISODE:"VideoEvents/UPDATE_ACTIVE_EPISODE"},c={RESET_FILTER:"VideoKidsShowcaseEvents/RESET_FILTER"}},977780:(e,t,r)=>{r.d(t,{VideoCommentsEvents:()=>i.VideoCommentsEvents,VideoEditEvents:()=>i.VideoEditEvents,VideoEvents:()=>i.VideoEvents,VideoForYouEvents:()=>i.VideoForYouEvents,VideoKidsShowcaseEvents:()=>i.VideoKidsShowcaseEvents,VideoPlayerSyncEvents:()=>i.VideoPlayerSyncEvents,VideoPlaylistEvents:()=>i.VideoPlaylistEvents});var i=r(967028)},708040:(e,t,r)=>{r.d(t,{CANVAS_THUMBNAILS_ID:()=>u,DEFAULT_PREVIEW_SELECTED_FRAGMENT:()=>V,EEntryPointName:()=>b,EditorMode:()=>A,FRAGMENT_BORDER_RADIUS:()=>_,FRAGMENT_BORDER_WIDTH:()=>f,FRAGMENT_DURATION_MIN:()=>y,FRAGMENT_EPSILON:()=>S,FRAGMENT_SPLIT_INC:()=>E,FRAGMENT_WIDTH_MIN:()=>g,FragmentDraggingType:()=>k,MAX_PREVIEW_SELECTED_FRAGMENT:()=>h,MIN_PREVIEW_SELECTED_FRAGMENT:()=>I,SCROLL_MINIMAL_WIDTH:()=>p,SEGMENTS_TIMELINE_COUNT:()=>m,SNACKBAR_TIMEOUT:()=>w,TIMELINE_CANVAS_PADDING:()=>a,TIMELINE_CANVAS_WIDTH_FULLSCREEN:()=>n,TIMELINE_CANVAS_WIDTH_WINDOWED:()=>s,TIMELINE_MAX_ZOOM_LEVEL:()=>c,TIMELINE_MIN_ZOOM_LEVEL:()=>d,TIMELINE_SCROLL_USER_INTERACTION_TIMEOUT:()=>l,TIME_MARKER_POINTS_COUNT:()=>v,VIDEO_EDITOR_MODAL_HEIGHT_WINDOWED:()=>o});var i=r(481703);const o=650,n=window.innerWidth,s=724,a=12,d=1,c=5,l=10*i.millisecondsInSecond,u="canvasThumbnails",v=4,p=50,m=5,g=40,f=2,_=8,E=1e-8,S=1e-4,y=.1-E;var b;!function(e){e.VideoUpload="video_upload",e.VideoEdit="video_edit",e.VideoToClip="video_to_clip"}(b||(b={}));const I=1,h=179,V=60,w=1e4;var A,k;!function(e){e.Preview="preview",e.Edit="edit"}(A||(A={})),function(e){e.Right="right",e.Left="left",e.Middle="middle"}(k||(k={}))},56550:(e,t,r)=>{r.d(t,{EEntryPointName:()=>i.EEntryPointName,getVideoEditorModalModule:()=>o});var i=r(708040);function o(){return Promise.all([r.e(91498),r.e(89631),r.e(17356),r.e(79131),r.e(99370),r.e("langs/web/VideoEditorModal")]).then(r.bind(r,636671))}},896412:(e,t,r)=>{function i(e){e.preventDefault(),e.stopPropagation()}r.d(t,{cancelEvent:()=>i})},639147:(e,t,r)=>{r.d(t,{VideoUsersFetchService:()=>d});var i=r(331635),o=r(327813),n=r(132028),s=r(488709),a=r(349773);class d{async fetch(e,t){const r=this.getPending(e);if(r)return r;const i=this.userApi.get(d.getApiParams(e),t),n=d.getKey(e);this.pendingMap.set(n,i);try{const t=await i;return this.userStoreFactory.ensureByFields(e.fields??[]).createFromApi(t),t}finally{(0,o.runInAction)((()=>{this.pendingMap.delete(n)}))}}isPending(e){return Boolean(this.getPending(e))}getPending(e){return this.pendingMap.get(d.getKey(e))}static getApiParams(e){const t={access_keys:e.accessKeys?.sort().join(","),domains:e.domains?.sort().join(","),fields:e.fields?.sort().join(","),from_group_id:e.fromGroupId,name_case:e.nameCase,user_ids:e.userIds?.sort().join(",")};return Object.fromEntries(Object.entries(t).filter((([,e])=>void 0!==e)))}static getKey(e){return JSON.stringify(Object.entries(d.getApiParams(e)).sort((([e],[t])=>e<t?-1:1)))}constructor(e,t){this.userApi=e,this.userStoreFactory=t,this.pendingMap=new Map,(0,o.makeAutoObservable)(this)}}d=(0,i.__decorate)([n.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===s.UsersApi?Object:s.UsersApi,void 0===a.VideoUsersStoreFactory?Object:a.VideoUsersStoreFactory])],d)},828787:(e,t,r)=>{r.d(t,{VideoUsersStore:()=>n});var i=r(805373),o=r(327813);class n{createFromApi(e){const t=e=>{const t=new i.VideoUser(e);return this.usersMap.set(e.id,t),t};return Array.isArray(e)?e.map(t):t(e)}getById(e){return this.usersMap.get(e)}constructor(){this.usersMap=new Map,(0,o.makeAutoObservable)(this)}}},349773:(e,t,r)=>{r.d(t,{VideoUsersStoreFactory:()=>d});var i=r(331635),o=r(327813),n=r(132028),s=r(828787),a=r(377860);class d{static filterFields(e){const t=a.VIDEO_USER_OPTIONAL_FIELDS;return e.filter((e=>t.includes(e)))}ensureByFields(e){const t=d.getKey(e);return this.stores.get(t)??this.create(t)}create(e){const t=new s.VideoUsersStore;return this.stores.set(e,t),t}static getKey(e){return[...new Set(e)].sort().join(",")}constructor(){this.stores=new Map,(0,o.makeAutoObservable)(this)}}d=(0,i.__decorate)([n.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[])],d)},377860:(e,t,r)=>{r.d(t,{VIDEO_USER_OPTIONAL_FIELDS:()=>i});const i=["about","activities","bdate","blacklisted","blacklisted_by_me","books","can_post","can_see_all_posts","can_see_audio","can_send_friend_request","can_write_private_message","career","city","common_count","connections","contacts","counters","country","crop_photo","deactivated","domain","education","exports","first_name_nom","first_name_gen","first_name_dat","first_name_acc","first_name_ins","first_name_abl","followers_count","friend_status","games","has_mobile","has_photo","home_town","interests","is_favorite","is_friend","is_hidden_from_feed","is_no_index","is_verified","last_name_nom","last_name_gen","last_name_dat","last_name_acc","last_name_ins","last_name_abl","last_seen","lists","maiden_name","military","movies","music","nickname","occupation","online","personal","photo_50","photo_100","photo_200_orig","photo_200","photo_400_orig","photo_id","photo_max","photo_max_orig","quotes","relatives","relation","schools","screen_name","sex","site","status","timezone","trending","tv","universities","verified","is_esia_verified","is_sber_verified","is_tinkoff_verified","wall_default"]},528847:(e,t,r)=>{r.d(t,{storeFieldProperty:()=>i});const i=Symbol.for("_isEffectorStore")},664317:(e,t,r)=>{r.d(t,{adapter:()=>o});var i=r(528847);const o=()=>e=>new Proxy(e,{construct:(e,t)=>new Proxy(new e(...t),{get(e,t){if(t in e){const r=e[t];return r[i.storeFieldProperty]?r():r}},set(e,t,r){if(t in e&&e[t][i.storeFieldProperty])throw new Error("The effector store is readonly!");return e[t]=r,!0}})})},254328:(e,t,r)=>{r.d(t,{effect:()=>s,event:()=>n,store:()=>o});var i=r(593449);const o=e=>(0,i.wrapEvent)(e.updates,e.getState()),n=e=>t=>{e(t)},s=e=>t=>e(t)},593449:(e,t,r)=>{r.d(t,{wrapEvent:()=>s});var i=r(327813),o=r(528847);const n=()=>{},s=(e,t)=>{let r=t,s=n;const a=(0,i.createAtom)("effector-store",(()=>{s=e.watch((e=>{r!==e&&(r=e,a.reportChanged())}))}),(()=>{s(),s=n})),d=()=>(a.reportObserved(),r);return Object.defineProperty(d,o.storeFieldProperty,{get:()=>!0}),d}},50790:(e,t,r)=>{r.d(t,{useIsMounted:()=>o});var i=r(296540);const o=()=>{const e=(0,i.useRef)(!1);return(0,i.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),(0,i.useCallback)((()=>e.current),[])}},755812:(e,t,r)=>{r.d(t,{createGroupsEditFx:()=>a,createGroupsGetByIdFx:()=>o,createGroupsGetMembersFx:()=>u,createGroupsInviteFx:()=>c,createGroupsIsMemberFx:()=>d,createGroupsJoinFx:()=>n,createGroupsLeaveFx:()=>s,createGroupsRecallInvitationFx:()=>l});var i=r(412554);const o=e=>(0,i.createApiEffect)("groups.getById",e),n=e=>(0,i.createApiEffect)("groups.join",e),s=e=>(0,i.createApiEffect)("groups.leave",e),a=e=>(0,i.createApiEffect)("groups.edit",e),d=e=>(0,i.createApiEffect)("groups.isMember",e),c=e=>(0,i.createApiEffect)("groups.invite",e),l=e=>(0,i.createApiEffect)("groups.recallInvitation",e),u=e=>(0,i.createApiEffect)("groups.getMembers",e)},111594:(e,t,r)=>{r.d(t,{createUsersGetFx:()=>o,createUsersSearchFx:()=>n});var i=r(412554);const o=e=>(0,i.createApiEffect)("users.get",e),n=e=>(0,i.createApiEffect)("users.search",e)},162951:(e,t,r)=>{r.d(t,{createUtilsResolveScreenNameFx:()=>o});var i=r(412554);const o=e=>(0,i.createApiEffect)("utils.resolveScreenName",e)},986125:(e,t,r)=>{r.d(t,{createVideoAddAlbumFx:()=>A,createVideoAddFx:()=>o,createVideoAddToAlbumFx:()=>m,createVideoCreateCommentFx:()=>b,createVideoDeleteAlbumFx:()=>_,createVideoDeleteCommentFx:()=>I,createVideoDeleteFx:()=>C,createVideoEditAlbumFx:()=>w,createVideoEditCommentFx:()=>V,createVideoFeedVideosForYouBlockItemsFx:()=>v,createVideoGetAlbumByIdFx:()=>s,createVideoGetAlbumsByVideoFx:()=>f,createVideoGetAlbumsExtendedFx:()=>p,createVideoGetBlockItemsFx:()=>a,createVideoGetCommentsExtendedFx:()=>y,createVideoGetFx:()=>n,createVideoGetGroupsForStreamingFx:()=>E,createVideoGetVideoDiscoverFx:()=>S,createVideoPinVideoFx:()=>P,createVideoRemoveFromAlbumFx:()=>g,createVideoReorderVideosFx:()=>k,createVideoRestoreCommentFx:()=>h,createVideoRestoreFx:()=>F,createVideoSubscribeHideAuthor:()=>l,createVideoSubscribeToAlbum:()=>d,createVideoSubscribeUnhideAuthor:()=>u,createVideoUnpinVideoFx:()=>x,createVideoUnsubscribeFromAlbum:()=>c});var i=r(412554);const o=e=>(0,i.createApiEffect)("video.add",e),n=e=>(0,i.createApiEffect)("video.get",e),s=e=>(0,i.createApiEffect)("video.getAlbumById",e),a=e=>(0,i.createApiEffect)("video.getCatalogBlockItems",e),d=e=>(0,i.createApiEffect)("video.subscribeToAlbum",e),c=e=>(0,i.createApiEffect)("video.unsubscribeFromAlbum",e),l=e=>(0,i.createApiEffect)("video.subscribeHideAuthors",e),u=e=>(0,i.createApiEffect)("video.subscribeUnhideAuthors",e),v=e=>(0,i.createApiEffect)("video.feedVideosForYouBlockItems",e),p=e=>(0,i.createApiEffect)("video.getAlbums",e),m=e=>(0,i.createApiEffect)("video.addToAlbum",e),g=e=>(0,i.createApiEffect)("video.removeFromAlbum",e),f=e=>(0,i.createApiEffect)("video.getAlbumsByVideo",e),_=e=>(0,i.createApiEffect)("video.deleteAlbum",e),E=e=>(0,i.createApiEffect)("video.getGroupsForStreaming",e),S=e=>(0,i.createApiEffect)("video.getVideoDiscover",e),y=e=>(0,i.createApiEffect)("video.getComments",e),b=e=>(0,i.createApiEffect)("video.createComment",e),I=e=>(0,i.createApiEffect)("video.deleteComment",e),h=e=>(0,i.createApiEffect)("video.restoreComment",e),V=e=>(0,i.createApiEffect)("video.editComment",e),w=e=>(0,i.createApiEffect)("video.editAlbum",e),A=e=>(0,i.createApiEffect)("video.addAlbum",e),k=e=>(0,i.createApiEffect)("video.reorderVideos",e),C=e=>(0,i.createApiEffect)("video.delete",e),F=e=>(0,i.createApiEffect)("video.restore",e),P=e=>(0,i.createApiEffect)("video.pinVideo",e),x=e=>(0,i.createApiEffect)("video.unpinVideo",e)},98961:(e,t,r)=>{r.d(t,{listActions:()=>o});var i=r(32489);const o=({domain:e,$entitiesListIds:t,$entitiesCount:r})=>{const o=(0,i.createEvent)({domain:e}),n=(0,i.createEvent)({domain:e}),s=(0,i.createEvent)({domain:e}),a=e=>({entitiesCount:t,entitiesListIds:r},{entityKey:i,itemKeys:o})=>[].concat(i??Object.keys(r)).reduce(((i,n)=>{const s=t[n],a=r[n];if("number"!=typeof s||!a)return i;const d=1===e,c=o.reduce(((t,r)=>{const i=a.includes(r);return d?i?t:t+e:i?t+e:t}),0);return t[n]!==s||(i[n]=s+c),i}),{...t}),d=e=>(t,{entityKey:r,itemKeys:i})=>[].concat(r??Object.keys(t)).reduce(((r,o)=>{const n=t[o];if(!n)return r;const s=i.filter((e=>!n.includes(e)));return s.length?(r[o]="push"===e?[...n,...s]:[...s,...n],r):r}),{...t});return(0,i.sample)({clock:[s],source:{entitiesCount:r,entitiesListIds:t},fn:a(-1),target:r}),(0,i.sample)({clock:[o,n],source:{entitiesCount:r,entitiesListIds:t},fn:a(1),target:r}),(0,i.sample)({clock:[o],source:t,fn:d("push"),target:t}),(0,i.sample)({clock:[n],source:t,fn:d("unshift"),target:t}),(0,i.sample)({clock:[s],source:t,fn:function(e,{entityKey:t,itemKeys:r}){return[].concat(t??Object.keys(e)).reduce(((t,i)=>{const o=e[i];if(!o)return t;const n=o.filter((e=>!r.includes(e)));return n.length===o.length||(t[i]=n),t}),{...e})},target:t}),{pushItemsEvent:o,unshiftItemsEvent:n,deleteItemsEvent:s}}},510015:(e,t,r)=>{r.d(t,{createFactoryLists:()=>c});var i=r(32489),o=r(8520),n=r(914231),s=r(858716),a=r(224191),d=r(98961);const c=({domain:e,fetchFx:t,$entitiesItems:r,getListKey:c,getList:l,getListCount:u,getListNextFrom:v,getItemKey:p,getEntityKey:m,getOffset:g=(e=>Number(e.query.offset)||0),getCount:f=(e=>Number(e.query.count)||0),mapNextListQuery:_=(({count:e,offset:t,start_from:r})=>({count:e,offset:t,start_from:r}))})=>{const E=e.createEvent(),S=e.createEvent(),y=e.createStore({}),b=e.createStore({}),I=e.createStore({}),h=e.createStore({}),V=e.createStore({}),w=e.createStore({}),A=e.createStore({}),k=e.createStore({}),{pushItemsEvent:C,unshiftItemsEvent:F,deleteItemsEvent:P}=(0,d.listActions)({domain:e,$entitiesCount:h,$entitiesListIds:w});return[y,b,I,h,V,w,A].forEach((e=>{e.on(E,n.resetEntities)})),y.on(t.done,((e,{params:t})=>(0,s.setEntity)(e,c(t),t))),b.on(t,((e,t)=>t.query.offset?e:(0,s.setEntity)(e,c(t),!1))).on(t.done,((e,{params:t,result:r})=>{const i=c(t),o=u(r),n=g(t)+f(t),a=v?.(r);return(0,s.setEntity)(e,i,n>=o&&!a)})),I.on(t,((e,t)=>(0,s.setEntity)(e,c(t),!0))).on(t.finally,((e,t)=>t.params.controller?.signal.aborted?e:(0,s.setEntity)(e,c(t.params),!1))),k.on(E,((e,t)=>(t?e[t]?.abort():Object.keys(e).forEach((t=>{e[t]?.abort()})),(0,n.resetEntities)(e,t)))).on(t,((e,t)=>{const r=c(t);return e[r]?.abort(),t.controller?(0,s.setEntity)(e,r,t.controller):e})),h.on(t,((e,t)=>t.query.offset?e:(0,n.resetEntities)(e,c(t)))).on(t.done,((e,t)=>(0,s.setEntity)(e,c(t.params),u(t.result)))),"function"==typeof v&&V.on(t,((e,t)=>t.query.start_from?e:(0,n.resetEntities)(e,c(t)))).on(t.done,((e,t)=>(0,s.setEntity)(e,c(t.params),v(t.result)))),w.on(t,((e,t)=>t.query.offset?e:(0,n.resetEntities)(e,c(t)))).on(t.done,((e,t)=>{const r=c(t.params),i=l(t.result),n=(0,o.uniqueArray)([...e[r]||[],...i.map(p)]);return(0,s.setEntity)(e,r,n)})),A.on(t,((e,t)=>t.query.offset?e:(0,n.resetEntities)(e,c(t)))).on(t.fail,((e,t)=>t.params.controller?.signal.aborted?e:(0,s.setEntity)(e,c(t.params),t.error))),(0,i.sample)({clock:t.done,source:r,fn:(e,t)=>(0,a.mapToEntity)(e,l(t.result),m),target:r}),(0,i.sample)({clock:S,source:{entitiesFullyLoaded:b,entitiesLoading:I,entitiesParams:y,nextFrom:V},filter:(e,{entityKey:t})=>!e.entitiesLoading[t]&&!e.entitiesFullyLoaded[t]&&!!e.entitiesParams[t],fn:(e,{count:t,entityKey:r})=>{const i=e.entitiesParams[r];if(!i)throw new Error("FactoryLists: Empty request params");const o=t||f(i),n=e.nextFrom[r]||"";return{...i,query:{...i.query,..._({count:o,offset:g(i)+o,start_from:n})},controller:new AbortController}},target:t}),{resetEvent:E,fetchMoreEvent:S,pushItemsEvent:C,unshiftItemsEvent:F,deleteItemsEvent:P,fetchFx:t,$entitiesFullyLoaded:b,$entitiesLoading:I,$entitiesListIds:w,$entitiesCount:h,$entitiesError:A,selectStores:e=>{const t=(e,t)=>t[e]??null;return{$count:(0,i.combine)(e,h,t),$listIds:(0,i.combine)(e,w,t),$error:(0,i.combine)(e,A,t),$loading:(0,i.combine)(e,I,t),$fullyLoaded:(0,i.combine)(e,b,t)}}}}},296627:(e,t,r)=>{r.d(t,{createEntitiesCatalogLiveCategoriesService:()=>n});var i=r(32489),o=r(224191);const n=({domain:e})=>{const t=e.createStore({}),r=e.createEvent();return(0,i.sample)({clock:r,source:t,fn:(e,t)=>(0,o.mapToEntity)({},t),target:t}),{$entitiesCatalogLiveCategories:t,setCatalogLiveCategoriesEvent:r}}},583855:(e,t,r)=>{r.d(t,{createEntitiesCatalogLiveChannelsService:()=>n});var i=r(32489),o=r(224191);const n=({domain:e})=>{const t=e.createStore({}),r=e.createEvent();return(0,i.sample)({clock:r,source:t,fn:(e,t)=>(0,o.mapToEntity)(e,t,"stream_id"),target:t}),{$entitiesCatalogLiveChannels:t,setCatalogLiveChannelsEvent:r}}},424424:(e,t,r)=>{r.d(t,{createEntitiesCatalogSectionsService:()=>a});var i=r(32489),o=r(679005),n=r(876761),s=r(224191);const a=({domain:e})=>{const t=(0,n.createCatalogGetSectionFx)({domain:e}),r=e.createEvent(),a=e.createEvent(),d=e.createStore({}),c=e.createStore([]).reset(r),l=e.createStore({}),u=e.createStore({}).reset(r);return(0,i.sample)({clock:a,source:d,fn:(e,t)=>(0,s.mapToEntity)(e,t),target:d}),(0,i.sample)({clock:r,source:d,fn:(e,t)=>(0,s.mapToEntity)(e,t.catalog?.sections??[]),target:d}),(0,i.sample)({clock:r,source:c,fn:(e,t)=>[...e,...t.catalog?.sections.map((({id:e})=>e))??[]],target:c}),l.on(t,((e,t)=>{const r=t.query.section_id;return r?{...e,[r]:!0}:e})),l.on(t.finally,((e,t)=>{const r=t.params.query.section_id;return r?{...e,[r]:!1}:e})),u.on(t,((e,t)=>(0,o.produce)(e,(e=>{const r=t.query.section_id;r&&(e[r]=null)})))),u.on(t.fail,((e,t)=>{const r=t.params.query.section_id;return r?{...e,[r]:t.error}:e})),{initCatalog:r,$entitiesCatalogSections:d,$entitiesCatalogSectionIds:c,$entitiesSectionsErrors:u,$entitiesSectionsLoading:l,catalogGetSectionFx:t,setCatalogGetSectionsEvent:a}}},980578:(e,t,r)=>{r.d(t,{createEntitiesCatalogVideoService:()=>c});var i=r(32489),o=r(876761),n=r(401464),s=r(564479),a=r(254461);const d=({query:e})=>e.url??e.owner_id??"",c=({domain:e,entitiesCatalogSectionsService:t,entitiesGroupsService:r,entitiesUsersService:c,entitiesVideoAlbumsService:l,entitiesVideoService:u,entitiesPlaceholdersService:v})=>{const p=(0,o.createCatalogGetVideoFx)({domain:e}),m=(0,n.errors)({effect:p,getKey:d,store:e.createStore({})}),g=(0,s.pendings)({effect:p,getKey:d,store:e.createStore({})}),f=e.createEvent(),_=e.createStore({}),{$entitiesCatalogSections:E,catalogGetSectionFx:S,initCatalog:y,setCatalogGetSectionsEvent:b}=t;(0,i.sample)({clock:p.doneData,target:y}),(0,i.sample)({clock:p.done,source:_,fn:(e,{params:t,result:r})=>({...e,[d(t)]:r.catalog}),target:_}),(0,i.sample)({clock:[S.doneData,f],source:E,filter:(e,{section:t})=>Boolean(t?.id),fn:(e,{section:t})=>{if(!t)return[];const r=e[t.id];if(!r)return[t];return[{...t,actions:r.actions&&t.actions?[...r.actions,...t.actions]:t.actions,blocks:(0,a.mergeCatalogVideoSectionBlocks)(r.blocks,t.blocks)}]},target:b});const I=(0,i.sample)({clock:[p.doneData,S.doneData,f]});return(0,i.sample)({clock:I,filter:({albums:e})=>Boolean(e?.length),fn:({albums:e=[]})=>e,target:l.setVideoAlbumsEvent}),(0,i.sample)({clock:I,filter:({groups:e})=>Boolean(e?.length),fn:({groups:e=[]})=>e,target:r.setGroupsEvent}),(0,i.sample)({clock:I,filter:({profiles:e})=>Boolean(e?.length),fn:({profiles:e=[]})=>e,target:c.setUsersEvent}),(0,i.sample)({clock:I,filter:({videos:e})=>Boolean(e?.length),fn:({videos:e=[]})=>e,target:u.setVideosEvent}),(0,i.sample)({clock:I,filter:({placeholders:e})=>Boolean(e?.length),fn:({placeholders:e=[]})=>e,target:v.setPlaceholdersEvent}),{$entitiesCatalogVideo:_,$entitiesCatalogVideoErrors:m,$entitiesCatalogVideoLoading:g,catalogGetVideoFx:p,updateSectionEvent:f}}},906085:(e,t,r)=>{r.d(t,{createEntitiesPlaceholdersService:()=>n});var i=r(32489),o=r(224191);const n=({domain:e})=>{const t=e.createStore({}),r=e.createEvent();return(0,i.sample)({clock:r,source:t,fn:(e,t)=>(0,o.mapToEntity)(e,t),target:t}),{$entitiesPlaceholders:t,setPlaceholdersEvent:r}}},254461:(e,t,r)=>{r.d(t,{mergeCatalogVideoSectionBlocks:()=>o});const i=["videos_ids","albums_ids","item_badges","search_author_items","vklive_channels_ids"],o=(e,t)=>t?e?t.reduce(((e,t)=>{const r=e.findIndex((({id:e})=>e===t.id));return e[r]?(i.forEach((i=>{if(!t[i])return;const o=e[r][i]??[],n=t[i]??[];e[r]={...e[r],[i]:[...o,...n]}})),e):(e.push(t),e)}),[...e]):t??[]:e??[]},188386:(e,t,r)=>{r.d(t,{createEntitiesFaveVideoService:()=>l});var i=r(32489),o=r(538522),n=r(278116),s=r(401464),a=r(564479);const d=({query:e})=>(0,o.joinRawId)({ownerId:e.owner_id,itemId:e.id}),c=(e,{query:t},r)=>({...e,[(0,o.joinRawId)({ownerId:t.owner_id,itemId:t.id})]:r}),l=({domain:e})=>{const t=(0,n.createFaveAddVideoFx)({domain:e}),r=(0,n.createFaveRemoveVideoFx)({domain:e}),o=(0,s.errors)({effect:t,getKey:d,store:e.createStore({})}),l=(0,a.pendings)({effect:t,getKey:d,store:e.createStore({})}),u=(0,s.errors)({effect:r,getKey:d,store:e.createStore({})}),v=(0,a.pendings)({effect:r,getKey:d,store:e.createStore({})}),p=e.createStore({}),m=e.createEvent();return p.on(m,((e,{id:t,value:r})=>({...e,[t]:r}))),(0,i.sample)({clock:t.done,source:p,filter:(e,{result:t})=>Boolean(t),fn:(e,{params:t})=>c(e,t,!0),target:p}),(0,i.sample)({clock:r.done,source:p,filter:(e,{result:t})=>Boolean(t),fn:(e,{params:t})=>c(e,t,!1),target:p}),{$entitiesFaveAddVideoErrors:o,$entitiesFaveAddVideoLoading:l,$entitiesFaveRemoveVideoErrors:u,$entitiesFaveRemoveVideoLoading:v,$entitiesFaveVideo:p,faveAddVideoFx:t,faveRemoveVideoFx:r,setFaveVideoByIdEvent:m}}},12563:(e,t,r)=>{r.d(t,{createEntitiesGroupsService:()=>u});var i=r(32489),o=r(755812),n=r(986125),s=r(224191),a=r(738371),d=r(401464),c=r(564479),l=r(468073);const u=({domain:e})=>{const t=(0,o.createGroupsGetByIdFx)({domain:e}),r=(0,o.createGroupsGetMembersFx)({domain:e}),u=(0,o.createGroupsJoinFx)({domain:e}),v=(0,o.createGroupsLeaveFx)({domain:e}),p=(0,o.createGroupsEditFx)({domain:e}),m=(0,i.createEffect)({handler:e=>{const{groupIds:r,...i}=e.query;return t({...e,query:{...i,group_ids:r.join(",")}})},domain:e}),g=(0,i.createEffect)({handler:e=>r(e),domain:e}),f=(0,n.createVideoGetGroupsForStreamingFx)({domain:e}),_=(0,i.createStore)({},{domain:e}),E=(0,i.createStore)({},{domain:e}),S=(0,i.createStore)({},{domain:e}),y=(0,i.createEvent)({domain:e}),b=e.createEvent(),I=e.createEvent();return(0,d.errors)({effect:m,getKey:e=>e.query.groupIds,store:E}),(0,c.pendings)({effect:m,getKey:e=>e.query.groupIds,store:S}),(0,i.sample)({clock:m.done,fn:e=>e.result.groups||[],target:y}),(0,i.sample)({clock:f.done,fn:e=>e.result||[],target:y}),(0,i.sample)({clock:I,source:_,fn:(e,t)=>t.map((t=>{const r=l.Ranges.convertOwnerIdToGroupId(t.id);return{...e[r],...t}})),target:y}),(0,i.sample)({clock:y,source:_,fn:(e,t)=>(0,s.mapToEntity)(e,t),target:_}),(0,a.sampleEntityUpdater)({store:_,fx:u,key:e=>String(e.params.query.group_id),fn:e=>e?{...e,is_member:1}:null}),(0,a.sampleEntityUpdater)({store:_,fx:v,key:e=>String(e.params.query.group_id),fn:e=>e?{...e,is_member:0}:null}),(0,i.sample)({clock:b,fn:()=>({}),target:_}),{$entitiesGroups:_,$entitiesGroupsLoading:S,$entitiesGroupsErrors:E,groupsGetByIdFx:m,getGroupsForStreamingFx:f,setGroupsEvent:y,groupsJoinFx:u,groupsLeaveFx:v,groupsEditFx:p,clearGroupsEvent:b,groupsGetMembersFx:g,patchGroupsEvent:I}}},669557:(e,t,r)=>{r.d(t,{createEntitiesUsersService:()=>a});var i=r(32489),o=r(310232),n=r(224191),s=r(111594);const a=e=>{const t=(0,s.createUsersGetFx)(e),{domain:r}=e,a=r.createStore({}),d=r.createStore({}),c=r.createStore({}),l=r.createEvent(),u=r.createEvent();return c.on(t,((e,{query:t})=>(0,o.updateEntitiesBy)(e,t.user_ids,!0))),c.on(t.finally,((e,{params:t})=>(0,o.updateEntitiesBy)(e,t.query.user_ids,!1))),d.on(t,((e,{query:t})=>(0,o.updateEntitiesBy)(e,t.user_ids,null))),d.on(t.fail,((e,{error:t,params:r})=>(0,o.updateEntitiesBy)(e,r.query.user_ids,t))),(0,i.sample)({clock:t.done,filter:({result:e})=>Boolean(e),fn:({result:e})=>e,target:l}),(0,i.sample)({clock:l,source:a,fn:(e,t)=>(0,n.mapToEntity)(e,t),target:a}),(0,i.sample)({clock:u,fn:()=>({}),target:a}),{$entitiesUsers:a,$entitiesUsersErrors:d,$entitiesUsersLoading:c,getUsersFx:t,setUsersEvent:l,clearUsersEvent:u}}},178317:(e,t,r)=>{r.d(t,{createEntitiesVideoAlbumService:()=>g});var i=r(32489),o=r(538522),n=r(361121),s=r(93348),a=r(986125),d=r(859139),c=r(310232),l=r(831144),u=r(237656),v=r(649392),p=r(468073);const m=({album_id:e,owner_id:t=0})=>(0,o.joinRawId)({ownerId:t,itemId:e}),g=e=>{const t=(0,a.createVideoDeleteAlbumFx)(e),r=(0,a.createVideoEditAlbumFx)(e),g=(0,a.createVideoAddAlbumFx)(e),f=(0,a.createVideoGetAlbumByIdFx)(e),_=(0,a.createVideoGetAlbumsExtendedFx)(e),E=(0,a.createVideoAddToAlbumFx)(e),S=(0,a.createVideoRemoveFromAlbumFx)(e),{domain:y}=e,b=y.createStore({}),I=y.createStore({}),h=y.createStore({}),V=y.createStore({}),w=y.createStore({}),A=y.createStore({}),k=y.createStore({}),C=y.createStore({}),F=y.createEvent(),P=y.createEvent(),[x,L]=(0,l.createAbortControllerField)(y),[O,R]=(0,l.createAbortControllerField)(y),$=(0,i.attach)({effect:t,mapParams:({id:e,...t})=>{const{itemId:r,ownerId:i}=(0,n.splitRawId)(e);return{...t,query:p.Ranges.isGroupId(i)?{album_id:r,group_id:p.Ranges.convertOwnerIdToGroupId(i)}:{album_id:r,owner_id:i}}}}),T=(0,i.attach)({effect:r,source:x,mapParams:({ownerId:e,itemId:t,title:r,privacy:i,photoId:o,photoHash:n,verticalPhotoTag:s,verticalPhotoHash:a,...c},l)=>{const u={album_id:t,title:r};return void 0!==o&&(u.photo_id=o,u.photo_hash=n),void 0!==s&&(u.vertical_photo_tag=s,u.vertical_photo_hash=a),i&&(u.privacy=(0,d.stringifyBasePrivacy)(i)),p.Ranges.isGroupId(e)&&(u.group_id=p.Ranges.convertOwnerIdToGroupId(e)),{...c,query:u,controller:l??void 0}}});(0,i.sample)({clock:T,source:x,fn:e=>(e?.abort(),new AbortController),target:x});const U=(0,i.attach)({effect:g,source:O,mapParams:({ownerId:e,title:t,privacy:r,photoId:i,photoHash:o,verticalPhotoTag:n,verticalPhotoHash:s,...a},c)=>{const l={title:t};return void 0!==i&&(l.photo_id=i,l.photo_hash=o),void 0!==n&&(l.vertical_photo_tag=n,l.vertical_photo_hash=s),r&&(l.privacy=(0,d.stringifyBasePrivacy)(r)),p.Ranges.isGroupId(e)&&(l.group_id=p.Ranges.convertOwnerIdToGroupId(e)),{...a,query:l,controller:c??void 0}}});(0,i.sample)({clock:U,source:O,fn:e=>(e?.abort(),new AbortController),target:O});const B=U.pending,G=(0,u.createVideoAlbumSubscriptionEffect)((0,a.createVideoSubscribeToAlbum)(e),F,!0),D=(0,u.createVideoAlbumSubscriptionEffect)((0,a.createVideoUnsubscribeFromAlbum)(e),F,!1);return(0,v.registerEntitiesSetSample)(P,b),h.on(f,((e,{query:t})=>(0,c.updateEntitiesBy)(e,m(t),!0))),h.on(f.finally,((e,{params:t})=>(0,c.updateEntitiesBy)(e,m(t.query),!1))),I.on(f,((e,{query:t})=>(0,c.updateEntitiesBy)(e,m(t),null))),I.on(f.fail,((e,{error:t,params:r})=>(0,c.updateEntitiesBy)(e,m(r.query),t))),b.on(f.done,((e,{params:t,result:r})=>(0,c.updateEntitiesBy)(e,m(t.query),r))),A.on($,((e,{id:t})=>(0,c.updateEntitiesBy)(e,t,!0))),A.on($.finally,((e,{params:t})=>(0,c.updateEntitiesBy)(e,t.id,!1))),w.on($,((e,{id:t})=>(0,c.updateEntitiesBy)(e,t,null))),w.on($.fail,((e,{error:t,params:r})=>(0,c.updateEntitiesBy)(e,r.id,t))),V.on($.done,((e,{params:t,result:r})=>r?(0,c.updateEntitiesBy)(e,t.id,!0):e)),C.on(T,((e,{ownerId:t,itemId:r})=>(0,c.updateEntitiesBy)(e,(0,o.joinRawId)({itemId:r,ownerId:t}),!0))),C.on(T.finally,((e,{params:t})=>(0,c.updateEntitiesBy)(e,(0,o.joinRawId)({itemId:t.itemId,ownerId:t.ownerId}),!1))),k.on(T,((e,{ownerId:t,itemId:r})=>(0,c.updateEntitiesBy)(e,(0,o.joinRawId)({itemId:r,ownerId:t}),null))),k.on(T.fail,((e,{error:t,params:r})=>(0,c.updateEntitiesBy)(e,(0,o.joinRawId)({itemId:r.itemId,ownerId:r.ownerId}),t))),(0,i.sample)({clock:[_.done],filter:({result:e})=>Boolean(e.items),fn:({result:e})=>e.items,target:P}),(0,i.sample)({clock:T.done,fn:({params:e})=>[{owner_id:e.ownerId,id:e.itemId,title:e.title,privacy:e.privacy}],target:F}),(0,i.sample)({clock:F,source:b,fn:(e,t)=>t.reduce(((t,r)=>{const i=(0,o.joinRawId)({ownerId:r.owner_id,itemId:r.id}),n={...e[i],...r};return(0,s.isVideoVideoAlbumFull)(n)&&t.push(n),t}),[]),target:P}),{$entitiesVideoAlbums:b,$entitiesVideoAlbumsErrors:I,$entitiesVideoAlbumsLoading:h,$entitiesVideoDeletedAlbums:V,$entitiesVideoDeletedAlbumsErrors:w,$entitiesVideoDeletedAlbumsPending:A,$entitiesVideoEditedAlbumsErrors:k,$entitiesVideoEditedAlbumsPending:C,patchVideoAlbumsEvent:F,setVideoAlbumsEvent:P,editVideoAlbumByIdFx:T,abortEditRequestEvent:L,createVideoAlbumFx:U,abortCreateRequestEvent:R,$createVideoAlbumPending:B,deleteVideoAlbumByIdFx:$,getVideoAlbumByIdFx:f,subscribeToVideoAlbumFx:G,unsubscribeFromVideoAlbumFx:D,getVideoAlbumsFx:_,addVideoToAlbumFx:E,removeVideoFromAlbumFx:S}}},87029:(e,t,r)=>{r.d(t,{createEntitiesVideoService:()=>d});var i=r(32489),o=r(538522),n=r(986125),s=r(310232),a=r(649392);const d=({domain:e,entitiesGroupsService:t,entitiesUsersService:r})=>{const d=(0,n.createVideoGetFx)({domain:e}),c=(0,n.createVideoGetVideoDiscoverFx)({domain:e}),l=(0,n.createVideoFeedVideosForYouBlockItemsFx)({domain:e}),u=(0,n.createVideoAddFx)({domain:e}),v=(0,n.createVideoDeleteFx)({domain:e}),p=(0,n.createVideoRestoreFx)({domain:e}),m=e.createStore({}),g=e.createStore({}),f=e.createStore({}),_=e.createEvent(),E=e.createEvent(),S=e.createEvent();f.on(d,((e,{query:t})=>(0,s.updateEntitiesBy)(e,t.videos,!0))),f.on(d.finally,((e,{params:t})=>(0,s.updateEntitiesBy)(e,t.query.videos,!1))),g.on(d,((e,{query:t})=>(0,s.updateEntitiesBy)(e,t.videos,void 0))),g.on(d.fail,((e,{error:t,params:r})=>(0,s.updateEntitiesBy)(e,r.query.videos,t)));const y=(0,i.attach)({effect:d,mapParams:({id:e,extended:t,group_id:r,...i})=>({...i,query:{count:1,videos:e,extended:t,group_id:r}})});return(0,i.sample)({clock:[d.done,c.done,l.done],filter:({result:e})=>Boolean(e.items),fn:({result:e})=>e.items,target:_}),t?.setGroupsEvent&&(0,i.sample)({clock:[d.done,c.done,l.done],filter:({result:e})=>Boolean(e.groups?.length),fn:({result:e})=>e.groups??[],target:t?.setGroupsEvent}),r?.setUsersEvent&&(0,i.sample)({clock:[d.done,c.done,l.done],filter:({result:e})=>Boolean(e.profiles?.length),fn:({result:e})=>e.profiles??[],target:r.setUsersEvent}),(0,i.sample)({clock:S,source:m,fn:(e,t)=>t.map((t=>{const r=(0,o.joinRawId)({ownerId:t.owner_id,itemId:t.id});return{...e[r],...t}})),target:_}),(0,a.registerEntitiesSetSample)(_,m),(0,i.sample)({clock:E,fn:()=>({}),target:m}),{$entitiesVideo:m,$entitiesVideoLoading:f,$entitiesVideoErrors:g,patchVideosEvent:S,setVideosEvent:_,clearVideosEvent:E,videoAddFx:u,videoGetFx:d,videoGetByIdFx:y,videoGetVideoDiscoverFx:c,videoDeleteFx:v,videoRestoreFx:p,videoFeedVideosForYouBlockItemsFx:l}}},530040:(e,t,r)=>{r.d(t,{createListsVideosAlbumsService:()=>a});var i=r(538522),o=r(986125),n=r(510015);const s=({id:e,owner_id:t})=>void 0===e||void 0===t?"":(0,i.joinRawId)({itemId:e,ownerId:t}),a=({domain:e,entitiesVideoAlbumService:t})=>{const r=(0,o.createVideoGetAlbumsExtendedFx)({domain:e}),i=e.createEffect(r),a=(0,n.createFactoryLists)({$entitiesItems:t.$entitiesVideoAlbums,domain:e,fetchFx:i,getItemKey:s,getList:({items:e})=>e,getListCount:({count:e})=>e,getListKey:({entityKey:e})=>e,getEntityKey:s});return{resetVideosAlbumsEvent:a.resetEvent,fetchMoreVideosAlbumsEvent:a.fetchMoreEvent,fetchVideosAlbumsFx:a.fetchFx,$videosAlbumsFullyLoaded:a.$entitiesFullyLoaded,$videosAlbumsLoading:a.$entitiesLoading,$videosAlbumsIds:a.$entitiesListIds,$videosAlbumsCount:a.$entitiesCount,$videosAlbumsError:a.$entitiesError,selectStores:a.selectStores}}},750988:(e,t,r)=>{r.d(t,{createListsVideosService:()=>s});var i=r(538522),o=r(510015);const n=({id:e,owner_id:t})=>void 0===e||void 0===t?"":(0,i.joinRawId)({itemId:e,ownerId:t}),s=({domain:e,entitiesVideoService:t})=>{const r=e.createEffect(t.videoGetFx),i=(0,o.createFactoryLists)({$entitiesItems:t.$entitiesVideo,domain:e,fetchFx:r,getItemKey:n,getList:({items:e})=>e,getListCount:({count:e})=>e,getListKey:({entityKey:e})=>e,getEntityKey:n});return{resetVideosEvent:i.resetEvent,fetchMoreVideosEvent:i.fetchMoreEvent,fetchVideosFx:i.fetchFx,$videosFullyLoaded:i.$entitiesFullyLoaded,$videosLoading:i.$entitiesLoading,$videosIds:i.$entitiesListIds,$videosCount:i.$entitiesCount,$videosError:i.$entitiesError,selectStores:i.selectStores}}},831144:(e,t,r)=>{r.d(t,{createAbortControllerField:()=>o});var i=r(32489);const o=e=>{const t=e.createStore(null),r=e.createEvent();return(0,i.sample)({clock:r,source:t,fn:e=>!1===e?.signal.aborted?(e.abort(),null):e,target:t}),[t,r]}},237656:(e,t,r)=>{r.d(t,{createVideoAlbumSubscriptionEffect:()=>o});var i=r(32489);const o=(e,t,r)=>{const o=(0,i.createEffect)((({optimistic:t,...r})=>e(r)));return(0,i.sample)({clock:o,filter:({optimistic:e=!1,query:t})=>e&&void 0!==t.album_id,fn:({query:e})=>[{owner_id:e.owner_id,id:Number(e.album_id),is_subscribed:r}],target:t}),(0,i.sample)({clock:o.fail,filter:({params:e})=>Boolean(e.optimistic)&&void 0!==e.query.album_id,fn:({params:e})=>[{owner_id:e.query.owner_id,id:Number(e.query.album_id),is_subscribed:!r}],target:t}),(0,i.sample)({clock:o.done,filter:({params:e})=>!e.optimistic&&void 0!==e.query.album_id,fn:({params:e})=>[{owner_id:e.query.owner_id,id:Number(e.query.album_id),is_subscribed:r}],target:t}),o}},649392:(e,t,r)=>{r.d(t,{registerEntitiesSetSample:()=>s});var i=r(32489),o=r(538522),n=r(224191);const s=(e,t)=>{(0,i.sample)({clock:e,source:t,fn:(e,t)=>{const r=t.filter((e=>void 0!==e.owner_id&&void 0!==e.id));return r.length?(0,n.mapToEntity)(e,r,(e=>(0,o.joinRawId)({ownerId:e.owner_id,itemId:e.id}))):e},target:t})}},738371:(e,t,r)=>{r.d(t,{sampleEntityUpdater:()=>i});const i=e=>{const{fx:t,key:r,store:i,fn:o}=e;return i.on(t.done,((e,t)=>{const i="function"==typeof r?r(t):t.params.query[r],n=e[i];return{...e,[i]:o(n,t)}})),i}},401464:(e,t,r)=>{r.d(t,{errors:()=>o});var i=r(679005);function o({effect:e,getKey:t,store:r}){return r.on(e,((e,r)=>(0,i.produce)(e,(e=>{const i=t(r);Array.isArray(i)?i.forEach((t=>e[t]=null)):i&&(e[i]=null)})))),r.on(e.fail,((e,{error:r,params:o})=>(0,i.produce)(e,(e=>{const i=t(o);Array.isArray(i)?i.forEach((t=>e[t]=r)):i&&(e[i]=r)})))),r}},224191:(e,t,r)=>{r.d(t,{mapToEntity:()=>i});const i=(e,t,r="id")=>{const i={...e};return t.reduce(((e,t)=>(e["function"==typeof r?r(t):t[r]]=t,e)),i)}},564479:(e,t,r)=>{r.d(t,{pendings:()=>o});var i=r(679005);function o({effect:e,getKey:t,store:r}){return r.on(e,((e,r)=>(0,i.produce)(e,(e=>{const i=t(r);Array.isArray(i)?i.forEach((t=>e[t]=!0)):i&&(e[i]=!0)})))),r.on(e.finally,((e,{params:r})=>(0,i.produce)(e,(e=>{const i=t(r);Array.isArray(i)?i.forEach((t=>e[t]=!1)):i&&(e[i]=!1)})))),r}},914231:(e,t,r)=>{r.d(t,{resetEntities:()=>o});var i=r(679005);const o=(e,t)=>t?(0,i.produce)(e,(e=>{e[t]=null})):{}},858716:(e,t,r)=>{r.d(t,{setEntity:()=>i});const i=(e,t,r)=>t?{...e,[t]:r}:e},859139:(e,t,r)=>{function i(e){const t=e.lists?.allowed?.map((e=>`list${e}`)).join(","),r=e.lists?.excluded?.map((e=>`-list${e}`)).join(","),i=e.owners?.allowed?.join(","),o=e.owners?.excluded?.map((e=>-e)).join(",");return[e.category,t,r,i,o].filter(Boolean).join(",")}r.d(t,{stringifyBasePrivacy:()=>i})},310232:(e,t,r)=>{r.d(t,{updateEntitiesBy:()=>i});const i=(e,t,r)=>{const i=Array.isArray(t)?t:t?.split(",");if(!i?.length)return e;if(void 0!==r){const t=Object.fromEntries(new Map(i.map((e=>[e,r]))));return{...e,...t}}return i.reduce(((e,t)=>(delete e[t],e)),{...e})}},93348:(e,t,r)=>{r.d(t,{isVideoVideoAlbumFull:()=>i});const i=e=>"object"==typeof e&&null!==e&&"id"in e&&"owner_id"in e&&"title"in e&&"count"in e},644746:(e,t,r)=>{r.d(t,{Icon24FavoriteOutline:()=>i});var i=(0,r(844990).makeIcon)("Icon24FavoriteOutline","favorite_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="favorite_outline_24"><path fill-rule="evenodd" d="M12.554 4.694a.6.6 0 0 0-1.108 0l-1.614 3.9a.9.9 0 0 1-.774.554l-4.125.266a.6.6 0 0 0-.357 1.05l3.267 2.859a.9.9 0 0 1 .282.888l-.93 3.852a.6.6 0 0 0 .883.66l3.472-2.003a.9.9 0 0 1 .9 0l3.472 2.004a.6.6 0 0 0 .883-.661l-.93-3.852a.9.9 0 0 1 .282-.888l3.267-2.858a.6.6 0 0 0-.357-1.05l-4.125-.267a.9.9 0 0 1-.774-.554zm-2.772-.689c.818-1.976 3.618-1.976 4.436 0l1.4 3.383 3.565.23c2.136.138 3.037 2.792 1.426 4.201l-2.856 2.5.802 3.322c.494 2.05-1.706 3.696-3.533 2.642L12 18.539l-3.022 1.744C7.15 21.337 4.95 19.69 5.445 17.64l.802-3.322-2.856-2.5c-1.611-1.41-.71-4.063 1.426-4.201l3.566-.23z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},85775:(e,t,r)=>{r.d(t,{Icon24UnfavoriteOutline:()=>i});var i=(0,r(844990).makeIcon)("Icon24UnfavoriteOutline","unfavorite_outline_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="unfavorite_outline_24"><path fill-rule="evenodd" d="M9.782 4.005c.818-1.976 3.618-1.976 4.436 0l1.4 3.383 3.565.23c2.136.138 3.037 2.792 1.426 4.201l-1.477 1.292a.9.9 0 0 1-1.185-1.354l1.477-1.292a.6.6 0 0 0-.357-1.05l-4.125-.267a.9.9 0 0 1-.774-.554l-1.614-3.9a.6.6 0 0 0-1.108 0c-.204.492-.68.835-1.227.609-.545-.226-.64-.805-.437-1.298M12 18.539l3.022 1.744c1.456.84 3.149-.035 3.526-1.462l1.416 1.415a.9.9 0 1 0 1.272-1.272l-15.2-15.2a.9.9 0 0 0-1.272 1.272l2.428 2.429-2.375.153C2.68 7.756 1.78 10.41 3.39 11.819l2.856 2.5-.802 3.322c-.495 2.05 1.706 3.696 3.533 2.642zM4.933 9.414a.6.6 0 0 0-.357 1.05l3.267 2.859a.9.9 0 0 1 .282.888l-.93 3.852a.6.6 0 0 0 .883.66l3.472-2.003a.9.9 0 0 1 .9 0l3.472 2.004a.6.6 0 0 0 .883-.661l-.284-1.176a1 1 0 0 1-.02-.113L8.886 9.159z" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},481703:(e,t)=>{t.millisecondsInSecond=void 0;var r=365.2425;var i=24*Math.pow(10,8)*60*60*1e3;t.millisecondsInSecond=1e3;var o=86400;var n=31556952;var s=2629746}}]);try{stManager?.done("dist/web/chunks/8f67b955.282dff90.js")}catch(e){}
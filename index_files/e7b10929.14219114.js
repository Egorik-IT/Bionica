"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[33818],{199313:(e,t,s)=>{s.d(t,{FriendsAddResponseEnumNames:()=>i});const i={SEND:1,APPROVED:2,RESEND:4}},957831:(e,t,s)=>{s.d(t,{VideoViewSegmentsResponseEnumNames:()=>i});const i={NOT_LOGGED:0,LOGGED:1,MODEL_UPDATED:2}},891281:(e,t,s)=>{s.d(t,{FriendsFriendStatusStatusEnumNames:()=>i});const i={NOT_A_FRIEND:0,OUTCOMING_REQUEST:1,INCOMING_REQUEST:2,IS_FRIEND:3}},642347:(e,t,s)=>{s.d(t,{GroupsGroupAdminLevelEnumNames:()=>i});const i={MODERATOR:1,EDITOR:2,ADMINISTRATOR:3}},780345:(e,t,s)=>{s.d(t,{GroupsGroupFullMemberStatusEnumNames:()=>i});const i={NOT_A_MEMBER:0,MEMBER:1,NOT_SURE:2,DECLINED:3,HAS_SENT_A_REQUEST:4,INVITED:5}},454236:(e,t,s)=>{s.d(t,{GroupsGroupIsClosedEnumNames:()=>i});const i={OPEN:0,CLOSED:1,PRIVATE:2}},897976:(e,t,s)=>{s.d(t,{constructConfig:()=>c,constructSources:()=>d,constructVideoData:()=>h});var i=s(317929),r=s(1100),o=s(807978),a=s(540462);const n={"144p":"mp4_144","240p":"mp4_240","360p":"mp4_360","480p":"mp4_480","720p":"mp4_720","1080p":"mp4_1080","1440p":"mp4_1440","2160p":"mp4_2160"};function d({files:e,live_settings:t}){const s={};let r=t?.playback_duration??t?.max_rewind_duration;r&&(r*=o.SECOND);const d=(0,a.partConfigEnabled)("video_player_support_new_live_links")&&Boolean(t),h=(0,a.partConfigEnabled)("video_player_support_new_live_links")&&!r;if(!e)return s;const c={};for(const[t,s]of Object.entries(n))s in e&&(c[t]=e[s]);return Object.keys(c).length>0?s.MPEG=c:e.src&&(s.MPEG={"Invariant quality":e.src}),e.dash_sep&&(s[i.VideoFormat.DASH_SEP]={type:"url",url:e.dash_sep}),e.dash_webm&&(s[i.VideoFormat.DASH_WEBM]={type:"url",url:e.dash_webm}),e.dash_webm_av1&&(s[i.VideoFormat.DASH_WEBM_AV1]={type:"url",url:e.dash_webm_av1}),e.dash_streams&&(s[i.VideoFormat.DASH_STREAMS]={type:"url",url:e.dash_streams}),e.cmaf&&(s[i.VideoFormat.DASH_LIVE_CMAF]={type:"url",url:e.cmaf}),e.hls&&!d&&(s[i.VideoFormat.HLS]={type:"url",url:e.hls}),e.dash_live&&h&&(s[i.VideoFormat.DASH_LIVE]={type:"url",url:e.dash_live}),!e.dash_live_playback||h&&e.dash_live||(s[i.VideoFormat.DASH_LIVE]={type:"url",url:e.dash_live_playback}),e.hls_live&&h&&(s[i.VideoFormat.HLS_LIVE]={type:"url",url:e.hls_live}),!e.hls_live_playback||h&&e.hls_live||(s[i.VideoFormat.HLS_LIVE]={type:"url",url:e.hls_live_playback,maxSeekBackTime:r}),e.dash_ondemand&&(s[i.VideoFormat.DASH_ONDEMAND]={type:"url",url:e.dash_ondemand}),e.hls_ondemand&&(s[i.VideoFormat.HLS_ONDEMAND]={type:"url",url:e.hls_ondemand}),e.hls_live_ondemand&&(s[i.VideoFormat.HLS_LIVE_CMAF]={type:"url",url:e.hls_live_ondemand,maxSeekBackTime:r}),e.ws&&(s[i.VideoFormat.WEB_RTC_LIVE]={type:"url",url:e.ws}),s}function h(e){const t=d(e),s={status:e.live_status,startTime:e.live_start_time},i=e.image?.sort(((e,t)=>e.height-t.height))??[],r=i.find((({height:e})=>e>500))??i.at(-1),o=e.restriction?{restriction:e.restriction}:{};return{...Object.keys(t).length>0?{sources:t}:{live:s},title:e.title??"",thumbUrl:r?.url,unitedVideoId:parseInt(e.ov_id??"0",10),duration:e.duration??0,videoEpisodes:e.episodes?.map((({time:e,text:t})=>({time:e??0,text:t??""}))),previewThumbsData:e.timeline_thumbs?{countPerImage:e.timeline_thumbs.count_per_image??1,countPerRow:e.timeline_thumbs.count_per_row??1,countTotal:e.timeline_thumbs.count_total??1,frameHeight:e.timeline_thumbs.frame_height??0,frameWidth:e.timeline_thumbs.frame_width??0,frequency:e.timeline_thumbs.frequency??1,isUV:e.timeline_thumbs.is_uv??!1,links:e.timeline_thumbs.links??[]}:void 0,subtitles:e.subtitles?.filter((e=>Boolean(e.url))).map((({is_auto:e,title:t,lang:s,manifest_name:i,url:r,storage_index:o})=>({isAuto:e,id:[t,s,o].filter(Boolean).join("_"),language:s,label:i,url:r}))),...o}}function c(e,t){const s=e.map((e=>h(e))),i=e[0],o={videos:s??[]};return t&&(o.interactiveData={...t,videoLoader:async(e,s)=>{const i=t?.accessKeysMap||{};return c((await(0,r.fetchVideo)(parseInt(e,10),parseInt(s,10),i[s]||"")).items)}}),i?.album_id&&(o.albumId=i.album_id.toString(10)),i?.uv_stats_place&&(o.statPlace=i.uv_stats_place),i?.track_code&&(o.statTrackCode=i.track_code),2===i?.can_download&&(o.canDownload=!0),i?.files?.failover_host&&(o.failoverHosts=[i?.files?.failover_host]),i?.restriction?.mute_info_link&&(o.isAudioDisabled=Boolean(i?.restriction?.mute_info_link)),i?.volume_multiplier&&(o.volumeMultiplier=i?.volume_multiplier),o}},1100:(e,t,s)=>{s.d(t,{fetchVideo:()=>o});var i=s(538522),r=s(805658);const o=async(e,t,s,o={})=>(0,r.apiWithPrefetch)("video.get",{owner_id:e,videos:(0,i.joinRawId)({ownerId:e,itemId:t,externalId:s}),extended:1,...o})},940733:(e,t,s)=>{s.d(t,{constructSources:()=>i.constructSources});var i=s(897976)},982540:(e,t,s)=>{s.d(t,{ClipsPlayer:()=>p});var i=s(474848),r=s(296540),o=s(689900),a=s(132028),n=s(456921),d=s(773439),h=s(940733),c=s(779137);const u=new(s(51015).ObjectPool)((()=>{const e=document.createElement("video");return e.muted=!0,e.playsInline=!0,e.disablePictureInPicture=!0,e})),l=(0,n.observer)((function(){const e=(0,c.useClipPlayerModel)(),{loop:t=!0,muted:s,volume:a,playing:n,mode:l,video:p,onLooped:m,onPlayingChanged:g,onPositionChanged:v,onStalledChanged:b,onStarted:_,onVideoCurQualityChanged:S,onVideoEndedChanged:y,onVideoVolumeChanged:f,newCurrentTime:w,onDurationChanged:M,onVideoFormatChanged:V,onVideoBitrateChanged:k,onEnded:P,onFirstBytes:C,onFirstFrame:A}=e.props.current,{setVkPlayer:I,isPlayerHidden:E,vkPlayer:F,unsubscribe:O,subscribe:T,userEnv:R,initOneStat:j,oneStat:L,authorizeOneStat:G,sendViewSegments:N,subscribeViewSegments:D,addPoint:B}=e,[x,U]=(0,r.useState)(null);(0,r.useEffect)((()=>{if(F&&(j(),L))return L.pause(),G(),L.attachTo(F),()=>{L.destroy()}}),[F,p?.ovId]),(0,r.useEffect)((()=>{if(N)return D(),()=>{B(!1),O()}}),[F,B,N]),(0,r.useEffect)((()=>{let t=null,s=null;if(p&&x&&!e.playerConfigData?.loadingConfig){t=new d.Player(e.playerConfigData?.config?.core),s=u.allocate(),x.innerHTML="",x.appendChild(s);const i=(0,h.constructSources)(p);if(R.partConfigEnabled("video_clips_mvk_hls_min_quality_from_backend")){const e=i[d.VideoFormat.HLS];e&&(e.url+="&lq=480")}t.setMuted(!0).setLooped(!0).setAutoQualityLimits({min:d.VideoQuality.Q_480P}).initVideo({container:x,sources:i,failoverHosts:p.files?.failover_host?[p.files.failover_host]:void 0,meta:{videoId:p.ovId}}).prepare()}return I(t),()=>{t?.destroy(),x&&(x.innerHTML=""),s&&u.free(s)}}),[p,x,e.playerConfigData]),(0,r.useEffect)((()=>(T(),()=>{O()})),[F,y,g,b,f,_,m,v,S,M,P,C,A,V,k]);const H=(0,r.useCallback)((()=>{F?.play()}),[F]),$=(0,r.useCallback)((()=>{F?.pause()}),[F]),Q=(0,r.useCallback)((e=>{F?.setMuted(e)}),[F]),W=(0,r.useCallback)((e=>{e&&F?.setVolume(e)}),[F]),q=(0,r.useCallback)((e=>{F?.setLooped(e)}),[F]),z=(0,r.useCallback)((e=>{F?.seekTime(e)}),[F]);return(0,r.useEffect)((()=>{n?H():$()}),[n,H,$]),(0,r.useEffect)((()=>{W(a??0)}),[a,W]),(0,r.useEffect)((()=>{Q(s)}),[s,Q]),(0,r.useEffect)((()=>{q(t)}),[t,q]),(0,r.useEffect)((()=>{"number"==typeof w&&z(w)}),[w,z]),(0,i.jsx)(o.ClipPlayerContainer,{mode:l,setContainer:U,hidden:E})})),p=(0,a.createWidget)(c.ClipsPlayerProvider,l)},686106:(e,t,s)=>{s.d(t,{ClipPlayerViewModel:()=>r.ClipPlayerViewModel,ClipsPlayer:()=>i.ClipsPlayer});var i=s(982540),r=s(779137)},141518:(e,t,s)=>{s.d(t,{ClipsPlayerProvider:()=>v,useClipPlayerModel:()=>g});var i=s(331635),r=s(852487),o=s(979549),a=s(291566),n=s(327813),d=s(132028),h=s(24516),c=s(951652),u=s(809424),l=s(773439),p=s(89923);class m{async[d.init](){this.getConfig()}get isPlayerHidden(){return this._isPlayerHidden}async getConfig(){const e=this.props.current.module??"clips",t=await this.videoPlayerConfigProvider.ensure({module:e});(0,n.runInAction)((()=>{this.playerConfigData={config:t,loadingConfig:!1}}))}get vkPlayer(){return this._vkPlayer}get oneStat(){return this._oneStat}constructor(e,t,s,i,r,o,a){this.props=e,this.videoPlayerConfigProvider=t,this.userEnv=s,this.videoViewSegmentsService=i,this.stats=r,this.authService=o,this.metaData=a,this.playerConfigData={config:null,loadingConfig:!0},this._vkPlayer=null,this._isPlayerHidden=!0,this.segment=[],this.setPlayerVisible=()=>{this._isPlayerHidden=!1},this.sendViewSegments=e=>{const{id:t,ownerId:s,trackCode:i=""}=this.props.current.video;t&&s&&this.videoViewSegmentsService.send({video_id:t,owner_id:s,ranges:e,ref:"clips",muted:this.props.current.muted?1:0,track_code:i})},this.refreshAuthToken=async()=>{if(this.authService.isAuthorized)try{return await this.stats.getToken({refresh:!0})}catch{await this.stats.trackOneStatError("video.getStatsToken")}},this.authorizeToken=async()=>{try{return await this.stats.getToken({refresh:!0})}catch{await this.stats.trackOneStatError("video.getStatsToken")}},this.subscribe=()=>{this.subs=new l.Subscription,this.vkPlayer&&(this.props.current.onStalledChanged&&this.subs.add(this.vkPlayer.info.isStalled$.subscribe(this.props.current.onStalledChanged)),this.props.current.onVideoEndedChanged&&this.subs.add(this.vkPlayer.info.isEnded$.subscribe(this.props.current.onVideoEndedChanged)),this.props.current.onLooped&&this.subs.add(this.vkPlayer.events.looped$.subscribe(this.props.current.onLooped)),this.props.current.onVideoVolumeChanged&&this.subs.add(this.vkPlayer.info.volume$.subscribe(this.props.current.onVideoVolumeChanged)),this.subs.add(this.vkPlayer.info.currentQuality$.subscribe((e=>e!==l.VideoQuality.INVARIANT&&this.props.current.onVideoCurQualityChanged&&this.props.current.onVideoCurQualityChanged(e)))),this.props.current.onDurationChanged&&this.subs.add(this.vkPlayer.info.duration$.subscribe(this.props.current.onDurationChanged)),this.props.current.onPositionChanged&&this.subs.add(this.vkPlayer.info.position$.subscribe(this.props.current.onPositionChanged)),this.props.current.onPlayingChanged&&(this.subs.add(this.vkPlayer.events.playing$.subscribe((()=>this.props.current.onPlayingChanged&&this.props.current.onPlayingChanged(!0)))),this.subs.add(this.vkPlayer.events.paused$.subscribe((()=>this.props.current.onPlayingChanged&&this.props.current.onPlayingChanged(!1))))),this.props.current.onStarted&&this.subs.add(this.vkPlayer.events.started$.subscribe(this.props.current.onStarted)),this.props.current.onFirstBytes&&this.subs.add(this.vkPlayer.events.firstBytes$.subscribe(this.props.current.onFirstBytes)),this.subs.add(this.vkPlayer.events.firstFrame$.subscribe((e=>{this.setPlayerVisible(),this.props.current.onFirstFrame&&this.props.current.onFirstFrame(e)}))),this.props.current.onVideoFormatChanged&&this.subs.add(this.vkPlayer.info.currentFormat$.subscribe(this.props.current.onVideoFormatChanged)),this.props.current.onVideoBitrateChanged&&this.subs.add(this.vkPlayer.info.videoBitrate$.subscribe(this.props.current.onVideoBitrateChanged)),this.props.current.onEnded&&(this.subs.add(this.vkPlayer.events.ended$.subscribe(this.props.current.onEnded)),this.subs.add(this.vkPlayer.events.looped$.subscribe(this.props.current.onEnded))),this.props.current.onCurrentTimeChanged&&(this.subs.add(this.vkPlayer.events.started$.subscribe((()=>{this.props.current.onCurrentTimeChanged&&this.props.current.onCurrentTimeChanged(0)}))),this.subs.add(this.vkPlayer.info.position$.subscribe((e=>{e&&this.props.current.onCurrentTimeChanged&&this.props.current.onCurrentTimeChanged(e)})))))},this.unsubscribe=()=>{this.subs&&this.subs.unsubscribe()},this.setVkPlayer=e=>{this._vkPlayer=e},this.play=()=>{this._vkPlayer?.play()},this.pause=()=>{this._vkPlayer?.pause()},this.setMuted=e=>{this._vkPlayer?.setMuted(e)},this.setVolume=e=>{e&&this._vkPlayer?.setVolume(e)},this.setLooped=e=>{this._vkPlayer?.setLooped(e)},this.setCurrentTime=e=>{this._vkPlayer?.seekTime(e)},this.initOneStat=()=>{this._oneStat=new p.OneStat({movieId:Number(this.props.current.video?.ovId),place:this.metaData.get().module??"",mobile:"mvk"===this.props.current.platform,autoplay:!0},{apiEnv:p.ApiEnv.PROD,refreshAuthToken:this.refreshAuthToken,config:{apiEnv:p.ApiEnv.PROD,requestRetryCount:1}})},this.authorizeOneStat=async()=>{const e=await this.authorizeToken();this.authService.isAuthorized&&e?(this._oneStat.authorize(e),this._oneStat.resume()):(this._oneStat.authorize(),this._oneStat.resume())},this.addPoint=e=>{if(this.vkPlayer){if(e)this.segment=[];else if(!this.segment.length)return;this.segment.push(Math.trunc(this.vkPlayer.info.position$.getValue())),2===this.segment.length&&(this.sendViewSegments(this.segment.join("-")),this.segment=[])}},this.subscribeViewSegments=()=>{this.subs||(this.subs=new l.Subscription),this.vkPlayer&&(this.subs.add(this.vkPlayer.events.playing$.subscribe((()=>this.addPoint(!0)))),this.subs.add(this.vkPlayer.events.paused$.subscribe((()=>this.addPoint(!1)))),this.subs.add(this.vkPlayer.events.willSeek$.subscribe((()=>this.addPoint(!1)))),this.subs.add(this.vkPlayer.events.ended$.subscribe((()=>this.addPoint(!1)))),this.subs.add(this.vkPlayer.events.looped$.subscribe((()=>this.addPoint(!1)))))},(0,n.makeAutoObservable)(this)}}m=(0,i.__decorate)([d.scope.transient(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===d.Props?Object:d.Props,void 0===r.VideoPlayerConfigProvider?Object:r.VideoPlayerConfigProvider,void 0===h.UserEnv?Object:h.UserEnv,void 0===o.VideoViewSegmentsService?Object:o.VideoViewSegmentsService,void 0===a.ShortVideoStatsTokenService?Object:a.ShortVideoStatsTokenService,void 0===c.AuthService?Object:c.AuthService,void 0===u.MetaData?Object:u.MetaData])],m);const{useModel:g,Provider:v}=(0,d.createProvider)(m)},383346:(e,t,s)=>{s.d(t,{ClipsPlayerProvider:()=>i.ClipsPlayerProvider,useClipPlayerModel:()=>i.useClipPlayerModel});var i=s(141518)},219178:(e,t,s)=>{s.d(t,{ClipPlayerViewModel:()=>r});var i=s(327813);class r{get activeVolume(){return this._activeVolume}get cacheVolume(){return this._cacheVolume}get videoIsEnded(){return this._videoIsEnded}get videoIsMuted(){return this._videoIsMuted}get currentTime(){return this._currentTime}constructor(e,t){this.props=e,this.userEnv=t,this._activeVolume=0,this._cacheVolume=0,this._currentTime=0,this._videoIsEnded=!1,this._videoIsMuted=!1,this.setActiveVolume=e=>{this._activeVolume=e},this.setCacheVolume=e=>{this._cacheVolume=e},this.setVideoIsEnded=e=>{this._videoIsEnded=e},this.setVideoMuted=e=>{this._videoIsMuted=e},this.muteButtonClick=()=>{if(0===this.activeVolume||this.videoIsMuted)return 0===this.cacheVolume?(this.setCacheVolume(this.props.current.volume??1),void this.setActiveVolume(this.props.current.volume??1)):(this.setActiveVolume(this.cacheVolume),void this.setVideoMuted(!1));this.setCacheVolume(this.activeVolume),this.setActiveVolume(0),this.setVideoMuted(!0)},this.volumeChange=e=>{this.setActiveVolume(e),this.setVideoMuted(0===e)},this.setCurrentTime=e=>{this._currentTime=e},(0,i.makeAutoObservable)(this),this._activeVolume=this.props.current.volume??1,this._cacheVolume=this.activeVolume,this._videoIsMuted=this.props.current.muted??!1}}},353129:(e,t,s)=>{s.d(t,{ClipPlayerViewModel:()=>i.ClipPlayerViewModel});var i=s(219178)},779137:(e,t,s)=>{s.d(t,{ClipPlayerViewModel:()=>i.ClipPlayerViewModel,ClipsPlayerProvider:()=>r.ClipsPlayerProvider,useClipPlayerModel:()=>r.useClipPlayerModel});var i=s(353129),r=s(383346)},51015:(e,t,s)=>{s.d(t,{ObjectPool:()=>i});class i{allocate(){const e=[...this.pool.entries()].find((([,e])=>e)),[t]=e||[this.makeItem()];return this.pool.set(t,!1),t}free(e){this.pool.has(e)&&this.pool.set(e,!0)}size(){return this.pool.size}constructor(e){this.makeItem=e,this.pool=new Map}}},687242:(e,t,s)=>{s.d(t,{ClipsFeedModel:()=>p});var i=s(331635),r=s(914492),o=s(632520),a=s(509739),n=s(876922),d=s(338454),h=s(474436),c=s(327813),u=s(132028),l=s(204361);class p{initFeed(e,t){const s=(0,l.getFeedObjectKey)(e);switch(this.feedFirstClip.delete(s),"top"!==e.feed&&"subscriptions"!==e.feed||!t||(this.feedFirstClip.set(s,t),this.shortVideoVideosProvider.fetchAllFields(t)),e.feed){case"compilation":case"effect":case"music":case"hashtag":case"place":case"top":this.feedsMap.get(s)?.reset();const t=this.topVideosProvider.createList((0,l.getFeedObjectRequestParams)(e));return this.feedsMap.set(s,t),t.fetch();case"ownerFeed":case"postponed":case"playlist":this.feedsMap.get(s)?.reset();const i=this.ownerVideosProvider.createList((0,l.getFeedObjectRequestParams)(e));return this.feedsMap.set(s,i),i.fetch();case"subscriptions":this.feedsMap.get(s)?.reset();const r=this.newsVideosProvider.createList((0,l.getFeedObjectRequestParams)(e));return this.feedsMap.set(s,r),r.fetch();default:throw new Error(`${e.feed} does not support in ShortVideoPage`)}}getFeedData(e){const t=this.feedsMap.get((0,l.getFeedObjectKey)(e));if(!t)return;const{ids:s,isLoading:i,count:r,fullyLoaded:o,error:a}=t;return{ids:this.processFeedItems(e,s),isLoading:i,count:r,fullyLoaded:o,error:a}}fetchNext(e){return this.feedsMap.get((0,l.getFeedObjectKey)(e))?.fetch()}setFeedFirstClip(e,t){this.feedFirstClip.set((0,l.getFeedObjectKey)(e),t)}processFeedItems(e,t){if(!t.length)return t;const s=this.feedFirstClip.get((0,l.getFeedObjectKey)(e));let i=[...t];return s&&(i=[s,...i.filter((e=>e!==s))]),"top"!==e.feed&&"subscriptions"!==e.feed||(i=i.filter((e=>!this.shortVideoDeleteService.isDeleted(e)))),"subscriptions"===e.feed&&(i=i.filter((e=>this.shortVideoOwnersProvider.get(this.shortVideoVideosProvider.get(e)?.data.owner_id??0)?.isSubscribed))),i}constructor(e,t,s,i,r,o){this.shortVideoOwnersProvider=e,this.shortVideoVideosProvider=t,this.shortVideoDeleteService=s,this.topVideosProvider=i,this.ownerVideosProvider=r,this.newsVideosProvider=o,this.feedsMap=new Map,this.feedFirstClip=new Map,(0,c.makeAutoObservable)(this)}}p=(0,i.__decorate)([u.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===r.ShortVideoOwnersProvider?Object:r.ShortVideoOwnersProvider,void 0===o.ShortVideoVideosProvider?Object:o.ShortVideoVideosProvider,void 0===a.ShortVideoDeleteService?Object:a.ShortVideoDeleteService,void 0===n.ShortVideoFeedTopVideosProvider?Object:n.ShortVideoFeedTopVideosProvider,void 0===d.ShortVideoFeedOwnerVideosProvider?Object:d.ShortVideoFeedOwnerVideosProvider,void 0===h.ShortVideoFeedNewsVideosProvider?Object:h.ShortVideoFeedNewsVideosProvider])],p)},323129:(e,t,s)=>{s.d(t,{FETCH_QUERY:()=>i});const i={fields:["friend_status","is_subscribed","is_member","photo_50","photo_100","photo_200","photo_400","is_nft","about","description","followers_count","members_count","verified"].join(","),count:10}},535452:(e,t,s)=>{s.d(t,{ClipsFeedModel:()=>i.ClipsFeedModel});s(323129);var i=s(687242)},204361:(e,t,s)=>{s.d(t,{getFeedObjectKey:()=>r,getFeedObjectRequestParams:()=>o});var i=s(323129);function r(e){switch(e.feed){case"compilation":return`${e.feed}-${e.compilationId}`;case"effect":return`${e.feed}-${e.effectId}`;case"music":return`${e.feed}-${e.musicId}`;case"hashtag":return`${e.feed}-${e.hashtag}`;case"place":return`${e.feed}-${e.placeId}`;case"ownerFeed":case"postponed":return`${e.feed}-${e.ownerId}`;case"playlist":return`${e.feed}-${e.ownerId}-${e.playlistId}`;case"subscriptions":case"top":return`${e.feed}`;default:throw new Error(`${e.feed} does not support in getFeedObjectKey`)}}function o(e){switch(e.feed){case"compilation":return{filters:JSON.stringify({compilationId:e.compilationId}),...i.FETCH_QUERY};case"effect":return{filters:JSON.stringify({maskId:e.effectId}),...i.FETCH_QUERY};case"music":return{filters:JSON.stringify({audioId:e.musicId}),ref:"clip_grid",...i.FETCH_QUERY};case"hashtag":return{filters:JSON.stringify({tag:`#${e.hashtag}`}),...i.FETCH_QUERY};case"place":return{filters:JSON.stringify({placeId:e.placeId}),...i.FETCH_QUERY};case"top":return{ref:"clips",...i.FETCH_QUERY};case"ownerFeed":return{owner_id:e.ownerId??0,...i.FETCH_QUERY,...e.trackCode?{track_code:e.trackCode}:{}};case"postponed":return{owner_id:e.ownerId??0,playlist:"scheduled",...i.FETCH_QUERY};case"subscriptions":return{filters:"clip",source_ids:"friends,groups,following",...i.FETCH_QUERY};case"playlist":return{owner_id:e.ownerId??0,playlist_id:e.playlistId??0,...i.FETCH_QUERY};default:throw new Error(`${e.feed} does not support in getFeedObjectRequestParams`)}}},270383:(e,t,s)=>{s.d(t,{ClipRestrictionModel:()=>r.ClipRestrictionModel,ClipsFeedModel:()=>i.ClipsFeedModel,ClipsPlayerStatusModel:()=>o.ClipsPlayerStatusModel});var i=s(535452),r=s(670638),o=(s(895892),s(118313))},921794:(e,t,s)=>{var i=s(331635),r=s(327813),o=s(132028);class a{getValue(e){return this.ordMap.get(e)}setValue(e,t){this.ordMap.set(e,t)}clearValue(e){this.ordMap.delete(e)}constructor(){this.ordMap=new Map,(0,r.makeAutoObservable)(this)}}a=(0,i.__decorate)([o.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[])],a)},895892:(e,t,s)=>{s(921794)},371512:(e,t,s)=>{s.d(t,{ClipsPlayerStatusModel:()=>a});var i=s(331635),r=s(327813),o=s(132028);class a{constructor(){this.isPlaying=!0,this.isMuted=!0,this.setPlaying=e=>{this.isPlaying=e},this.togglePlay=()=>{this.isPlaying=!this.isPlaying},this.setMuted=e=>{this.isMuted=e},this.toggleMute=()=>{this.isMuted=!this.isMuted},(0,r.makeAutoObservable)(this)}}a=(0,i.__decorate)([o.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[])],a)},118313:(e,t,s)=>{s.d(t,{ClipsPlayerStatusModel:()=>i.ClipsPlayerStatusModel});var i=s(371512)},910401:(e,t,s)=>{s.d(t,{ClipRestrictionModel:()=>n});var i=s(331635),r=s(24516),o=s(327813),a=s(132028);class n{get restrictionEnabled(){return this.userEnv.partConfigEnabled("clips_web_blur_restriction")}constructor(e){this.userEnv=e,this.removedRestrictionMap=new Map,this.setRemovedRestriction=e=>{this.removedRestrictionMap.set(e,!0)},this.getRemovedRestriction=e=>Boolean(this.removedRestrictionMap.get(e)),(0,o.makeAutoObservable)(this)}}n=(0,i.__decorate)([a.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===r.UserEnv?Object:r.UserEnv])],n)},670638:(e,t,s)=>{s.d(t,{ClipRestrictionModel:()=>i.ClipRestrictionModel});var i=s(910401)},26655:(e,t,s)=>{s.d(t,{ClipPlayerWidget:()=>w});var i=s(474848),r=s(296540),o=s(822062),a=s(988418),n=s(783856),d=s(723723),h=s(194528),c=s(285056),u=s(344356),l=s(454154),p=s(456921),m=s(132028),g=s(26027),v=s(98967),b=s(149333),_=s(686106),S=s(491761),y=s(18620);const f=(0,p.observer)((function(){const e=(0,y.useClipPlayerWebModel)(),{title:t,video:s,cover:p,mode:m="contain",width:f,ratio:w,playing:M=!1,loop:V=!1,onVideoCurQualityChanged:k,onDurationChanged:P,onStalledChanged:C,onPositionChanged:A,onPlayingChanged:I,onStarted:E,onLooped:F,onEnded:O,onVideoVolumeChanged:T,isControls:R,isDeleted:j,isRestricted:L,hrefMore:G,onClick:N,togglePlay:D,onMuteChanged:B,module:x="clips",videoRawId:U,restrictionData:H,borderRadius:$}=e.props.current,{activeVolume:Q,videoIsEnded:W,videoIsMuted:q,currentTime:z,setVideoIsEnded:Y,muteButtonClick:K,volumeChange:J,setCurrentTime:X}=e.clipPlayer,{setRemovedRestriction:Z,getRemovedRestriction:ee,restrictionEnabled:te}=e.restriction,se=(0,b.useLangs)();(0,r.useEffect)((()=>{B?.(q)}),[q]);const ie=(0,r.useCallback)((e=>{Y(e),e&&M&&D()}),[W]),re=()=>{U&&(Z(U),!M&&D())},oe=(0,r.useCallback)((e=>{A?.(e),X(e)}),[A]);return te&&U&&H?.blur&&!ee(U)?(0,i.jsx)(o.ClipCard,{width:f,ratio:w,mode:m,cover:p,blurred:!0,borderRadius:$,children:(0,i.jsx)(a.ClipControlsLayout,{onClick:()=>N?.(z),noControls:!0,centerComponent:U&&H?.blur&&!ee(U)&&(0,i.jsx)(S.ClipPlayerRestrictionForBlurPlaceholder,{title:H.title,text:H?.text,buttonText:H?.button?.title,onClick:re})})}):(0,i.jsxs)(o.ClipCard,{width:f,ratio:w,mode:m,cover:p,borderRadius:$,children:[(0,i.jsx)(n.Overlay,{centered:!0,children:s&&(0,i.jsx)(_.ClipsPlayer,{loop:V,muted:q,volume:Q,onVideoCurQualityChanged:k,onLooped:F,onStarted:E,onPlayingChanged:I,onPositionChanged:oe,onStalledChanged:C,onVideoEndedChanged:ie,onDurationChanged:P,onEnded:O,onVideoVolumeChanged:T,playing:M,video:s,mode:m,module:x,platform:"web"})}),(0,i.jsx)(a.ClipControlsLayout,{onClick:()=>N?.(z),noControls:!R||W,title:t,playing:M,onMuteButtonClick:K,onVolumeChange:J,volume:q?0:Q,togglePlay:D,hasGradient:W,unavailable:j||L,centerComponent:(j||L||W)&&(0,i.jsxs)(i.Fragment,{children:[j&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.Icon56DeleteOutline,{className:(0,d.getColorClass)("color_icon_secondary")}),(0,i.jsx)(h.Spacing,{size:8}),(0,i.jsx)(c.Title,{level:"3",weight:"3",className:(0,d.getColorClass)("color_text_secondary"),children:(0,i.jsx)(u.Interpolate,{children:se.getLang("video_feed_player_clip_deleted")})})]}),L&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.Icon56LockOutline,{className:(0,d.getColorClass)("color_icon_secondary")}),(0,i.jsx)(h.Spacing,{size:8}),(0,i.jsx)(c.Title,{level:"3",weight:"3",className:(0,d.getColorClass)("color_text_secondary"),children:(0,i.jsx)(u.Interpolate,{children:se.getLang("video_clip_restriction_user_access")})})]}),W&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.Button,{mode:"secondary",appearance:"overlay",size:"l",href:G,children:se.getLang("video_feed_player_clip_more")}),(0,i.jsx)(h.Spacing,{size:20}),(0,i.jsx)(l.Button,{mode:"link",appearance:"overlay",size:"l",onClick:()=>!M&&D(),children:se.getLang("video_feed_player_clip_repeat")})]})]})})]})})),w=(0,m.createWidget)(y.ClipPlayerWebModelProvider,f)},350238:(e,t,s)=>{s.d(t,{ClipPlayerRestrictionForBlurPlaceholder:()=>c});var i=s(474848),r=s(753457),o=s(720836),a=s(723723),n=s(285056),d=s(454154),h=s(983754);const c=({title:e,text:t,buttonText:s,onClick:c})=>(0,i.jsx)(r.AppearanceProvider,{value:"dark",children:(0,i.jsx)(o.Placeholder,{icon:(0,i.jsx)(h.Icon56HideOutline,{className:(0,a.getColorClass)("color_icon_contrast")}),header:(0,i.jsx)(n.Title,{level:"2",weight:"2",className:(0,a.getColorClass)("color_text_contrast"),children:e}),action:s?(0,i.jsx)(d.Button,{size:"m",onClick:c,mode:"outline",appearance:"overlay","data-testid":"clips-carousel-placeholder-blur-button",children:s}):void 0,children:t&&e!==t&&(0,i.jsx)(r.Text,{className:(0,a.getColorClass)("color_text_contrast"),children:t})})})},580994:(e,t,s)=>{s.d(t,{ClipPlayerRestrictionForBlurPlaceholder:()=>i.ClipPlayerRestrictionForBlurPlaceholder});var i=s(350238)},491761:(e,t,s)=>{s.d(t,{ClipPlayerRestrictionForBlurPlaceholder:()=>i.ClipPlayerRestrictionForBlurPlaceholder});var i=s(580994)},745572:(e,t,s)=>{s.d(t,{ClipPlayerRestrictionForBlurPlaceholder:()=>r.ClipPlayerRestrictionForBlurPlaceholder,ClipPlayerWidget:()=>i.ClipPlayerWidget});var i=s(26655),r=s(491761)},18620:(e,t,s)=>{s.d(t,{ClipPlayerWebModelProvider:()=>u,useClipPlayerWebModel:()=>c});var i=s(331635),r=s(327813),o=s(132028),a=s(24516),n=s(686106),d=s(270383);class h{[o.update](){this.clipPlayer.setVideoMuted(Boolean(this.props.current.muted))}constructor(e,t){this.props=e,this.userEnv=t,this.clipPlayer=new n.ClipPlayerViewModel(this.props,this.userEnv),this.restriction=new d.ClipRestrictionModel(this.userEnv),(0,r.makeAutoObservable)(this)}}h=(0,i.__decorate)([o.scope.transient(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===o.Props?Object:o.Props,void 0===a.UserEnv?Object:a.UserEnv])],h);const{useModel:c,Provider:u}=(0,o.createProvider)(h)},446314:(e,t,s)=>{s.d(t,{ClipPlayerRestrictionForBlurPlaceholder:()=>i.ClipPlayerRestrictionForBlurPlaceholder,ClipPlayerWidget:()=>i.ClipPlayerWidget});var i=s(745572)},823274:(e,t,s)=>{s.d(t,{GroupsBaseFieldService:()=>r});var i=s(327813);class r{getIsLoading(e){return!!this.loadings.get(e)}setValue(e,t){this.data.set(e,t)}getValue(e){return this.data.get(e)}async edit(e,t){if(this.loadings.get(e))return this.loadings.get(e);try{this.loadings.set(e,t()),await this.loadings.get(e)}catch(e){this.errorBoundary(e)}finally{(0,i.runInAction)((()=>{this.loadings.set(e,null)}))}}constructor(e=(e=>console.error(e))){this.data=new Map,this.loadings=new Map,this.errorBoundary=e,(0,i.makeAutoObservable)(this)}}},504715:(e,t,s)=>{s.d(t,{GroupsFavoriteService:()=>d});var i=s(331635),r=s(327813),o=s(972573),a=s(132028),n=s(823274);class d{getIsFavorite(e){return this.baseFieldService.getValue(e)}setIsFavorite(e,t){return this.baseFieldService.setValue(e,t)}add(e){return this.baseFieldService.edit(e,(async()=>{await this.faveApi.addPage({group_id:e}),this.setIsFavorite(e,!0)}))}remove(e){return this.baseFieldService.edit(e,(async()=>{await this.faveApi.removePage({group_id:e}),this.setIsFavorite(e,!1)}))}toggle(e){const t=this.getIsFavorite(e);if(void 0!==t)return t?this.remove(e):this.add(e)}getIsLoading(e){return this.baseFieldService.getIsLoading(e)}constructor(e){this.faveApi=e,this.baseFieldService=new n.GroupsBaseFieldService,(0,r.makeAutoObservable)(this)}}d=(0,i.__decorate)([a.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===o.FaveApi?Object:o.FaveApi])],d)},276289:(e,t,s)=>{s.d(t,{GroupsSubscribeService:()=>l});var i=s(331635),r=s(571355),o=s(962005),a=s(261491),n=s(454236),d=s(780345),h=s(132028),c=s(823274),u=s(327813);class l{getIsMember(e){return!!this.memberFieldService.getValue(e)}async join(e){const t=e.group_id,s=this.groupsAccessMap.get(t);if(s!==n.GroupsGroupIsClosedEnumNames.PRIVATE)return this.memberFieldService.edit(t,(async()=>{await this.api.join(e),this.leftGroupsData.set(t,!1),this.myTracker.sendTimespentEvent(r.MyTrackerActivityId.CommunitySubscribe),s!==n.GroupsGroupIsClosedEnumNames.CLOSED?this.memberFieldService.setValue(t,!0):this.groupsMemberStatusMap.set(t,d.GroupsGroupFullMemberStatusEnumNames.HAS_SENT_A_REQUEST)}));console.error("Trying to subscribe to a private group")}async leave(e){const t=e.group_id;return this.memberFieldService.edit(t,(async()=>{await this.api.leave(e),this.memberFieldService.setValue(t,!1),this.leftGroupsData.set(t,!0),this.getMemberStatus(t)===d.GroupsGroupFullMemberStatusEnumNames.HAS_SENT_A_REQUEST&&this.groupsMemberStatusMap.set(t,d.GroupsGroupFullMemberStatusEnumNames.NOT_A_MEMBER)}))}async toggle(e){const t=this.getIsMember(e),s=this.groupsAccessMap.get(e);if(void 0===t)return;const i={group_id:e};return s&&!t&&this.getMemberStatus(e)===d.GroupsGroupFullMemberStatusEnumNames.HAS_SENT_A_REQUEST||t?this.leave(i):this.join(i)}getIsLeftGroup(e){return!!this.leftGroupsData.get(e)}getIsJoinedGroup(e){return!1===this.leftGroupsData.get(e)}setMemberInfo(e,{isMember:t,isClosed:s,memberStatus:i}){this.memberFieldService.setValue(e,t),void 0!==s&&this.groupsAccessMap.set(e,s),void 0!==i&&this.groupsMemberStatusMap.set(e,i)}getIsLoading(e){return this.memberFieldService.getIsLoading(e)}getMemberStatus(e){return this.groupsMemberStatusMap.get(e)}constructor(e,t){this.api=e,this.myTracker=t,this.memberFieldService=new c.GroupsBaseFieldService,this.leftGroupsData=new Map,this.groupsMemberStatusMap=new Map,this.groupsAccessMap=new Map,(0,u.makeAutoObservable)(this)}}l=(0,i.__decorate)([h.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===o.GroupsApi?Object:o.GroupsApi,void 0===a.MyTrackerLegacy?Object:a.MyTrackerLegacy])],l)},734773:(e,t,s)=>{s.d(t,{GroupsWallSubscribeService:()=>h});var i=s(331635),r=s(327813),o=s(229745),a=s(132028),n=s(468073),d=s(823274);class h{getIsSubscribed(e){return this.baseFieldService.getValue(e)}setIsSubscribed(e,t){return this.baseFieldService.setValue(e,t)}async subscribe(e){return this.baseFieldService.edit(e,(async()=>{await this.wallApi.subscribe({owner_id:n.Ranges.convertGroupIdToOwnerId(e)}),this.setIsSubscribed(e,!0)}))}async unsubscribe(e){return this.baseFieldService.edit(e,(async()=>{await this.wallApi.unsubscribe({owner_id:n.Ranges.convertGroupIdToOwnerId(e)}),this.setIsSubscribed(e,!1)}))}toggle(e){const t=this.getIsSubscribed(e);if(void 0!==t)return t?this.unsubscribe(e):this.subscribe(e)}getIsLoading(e){return this.baseFieldService.getIsLoading(e)}constructor(e){this.wallApi=e,this.baseFieldService=new d.GroupsBaseFieldService,(0,r.makeAutoObservable)(this)}}h=(0,i.__decorate)([a.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===o.WallApi?Object:o.WallApi])],h)},903723:(e,t,s)=>{s.d(t,{GroupsProvider:()=>l});var i=s(331635),r=s(327813),o=s(962005),a=s(132028),n=s(468073),d=s(276289),h=s(504715),c=s(734773),u=s(46605);class l{getGroup(e){return this.data.groupsMap.get("number"==typeof e?e:this.screenNameToIdMap[e])}createGroupFromApi({apiGroup:e,fields:t}){const{subscribeService:s,favoriteService:i,wallSubscribeService:o,storiesService:a}=this,{is_member:d,id:h,is_favorite:c,is_subscribed:u,has_unseen_stories:l,member_status:p,...m}=e;this.subscribeService.setMemberInfo(e.id,{isMember:!!d,memberStatus:p,isClosed:m.is_closed}),void 0!==c&&this.favoriteService.setIsFavorite(e.id,Boolean(c)),void 0!==u&&this.wallSubscribeService.setIsSubscribed(e.id,Boolean(u)),void 0!==l&&a.setHasUnseenStories(n.Ranges.convertGroupIdToOwnerId(h),l),"string"==typeof e.screen_name&&(this.screenNameToIdMap[e.screen_name]=h);const g=(0,r.makeAutoObservable)(Object.assign({id:h,fields:t,get is_member(){return s.getIsMember(this.id)},get is_favorite(){return i.getIsFavorite(this.id)},get is_subscribed(){return o.getIsSubscribed(this.id)},get has_unseen_stories(){return a.getHasUnseenStories(n.Ranges.convertGroupIdToOwnerId(this.id))},get member_status(){return s.getMemberStatus(this.id)}},m));return this.data.groupsMap.set(g.id,g),g}async createGroup(e){const t=await this.groupsApi.create(e);return this.createGroupFromApi({apiGroup:t,fields:""})}async fetchGroupsByIds(e,t){const{groupIds:s,fields:i=[],...r}=e,o=this.fetchGroupsRequiredFields.concat(i).join(",");return((await this.groupsApi.getById({...r,group_ids:s.join(","),fields:o},t)).groups||[]).map((e=>this.createGroupFromApi({apiGroup:e,fields:o})))}async fetchGroupsExtended(e,{controller:t}={}){const s=await this.groupsApi.get({...e,extended:1},{signal:t?.signal}),i=s.items.map((t=>this.createGroupFromApi({apiGroup:t,fields:e.fields??""})));return{...s,items:i}}async groupEdit(e,{controller:t}={}){const s=e.group_id,i=this.getGroup(s);if(!i)return null;await this.groupsApi.edit(e,{signal:t?.signal});const[r]=await this.fetchGroupsByIds({groupIds:[s],fields:i.fields.split(",")});return r}constructor(e,t,s,i,o){this.groupsApi=e,this.subscribeService=t,this.favoriteService=s,this.wallSubscribeService=i,this.storiesService=o,this.fetchGroupsRequiredFields=["is_member","member_status","is_closed"],this.screenNameToIdMap={},this.data={groupsMap:new Map},(0,r.makeAutoObservable)(this)}}l=(0,i.__decorate)([a.scope.transient(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===o.GroupsApi?Object:o.GroupsApi,void 0===d.GroupsSubscribeService?Object:d.GroupsSubscribeService,void 0===h.GroupsFavoriteService?Object:h.GroupsFavoriteService,void 0===c.GroupsWallSubscribeService?Object:c.GroupsWallSubscribeService,void 0===u.GroupsStoriesService?Object:u.GroupsStoriesService])],l)},46605:(e,t,s)=>{s.d(t,{GroupsStoriesService:()=>d});var i=s(331635),r=s(132028),o=s(327813),a=s(988010),n=s(746310);class d{seenAllStories(e){this.hasUnseenStories.set(e,!1)}dispose(){this.unsubscribeToAllStoriesSeen()}setHasUnseenStories(e,t){this.hasUnseenStories.set(e,t)}getHasUnseenStories(e){return this.hasUnseenStories.get(e)}async restore(e){const{items:t}=await this.storiesApi.get({owner_id:Math.abs(e)});this.hasUnseenStories.set(e,t.some((e=>Boolean(e.has_unseen))))}constructor(e,t){this.externalEvents=e,this.storiesApi=t,this.hasUnseenStories=new Map,this.unsubscribeToAllStoriesSeen=this.externalEvents.subscribeToAllStoriesSeen((e=>this.seenAllStories(e))),(0,o.makeAutoObservable)(this)}}d=(0,i.__decorate)([r.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===a.ExternalEvents?Object:a.ExternalEvents,void 0===n.StoriesApi?Object:n.StoriesApi])],d)},110343:(e,t,s)=>{s.d(t,{GET_CHALLENGE_COUNTERS_MAX_RETRIES:()=>i,GET_SHORT_VIDEOS_LIST_MAX_RETRIES:()=>r,SHORT_VIDEO_ALL_FETCH_FIELDS:()=>o,SHORT_VIDEO_ALL_FIELDS:()=>a});const i=2,r=3,o=["friend_status","is_subscribed","is_member","photo_50","photo_100","photo_200","photo_400","is_nft","about","description","followers_count","members_count","verified"],a=o.join(",")},474436:(e,t,s)=>{s.d(t,{ShortVideoFeedNewsVideosProvider:()=>l});var i=s(331635),r=s(882044),o=s(765905),a=s(327813),n=s(132028),d=s(632520),h=s(914492),c=s(845758),u=s(340514);class l{async fetch(e){const{items:t,groups:s,profiles:i,next_from:r}=await this.feedApi.getNewsFeed(e),o=t.flatMap((e=>e?.clip?.items)).filter(Boolean);let n=[];if(o.length){const t=(await this.videoApi.get({videos:o.map(u.getRawIdFromVideo).join(","),fields:e.fields})).items.reduce(((e,t)=>Object.assign(e,{[(0,u.getRawIdFromVideo)(t)]:t})),{});n=o.map((e=>({...e,...t[(0,u.getRawIdFromVideo)(e)]})))}return(0,a.runInAction)((()=>{n.forEach((e=>this.shortVideoVideosProvider.addVideoFromApi(e))),s?.forEach((e=>this.shortVideoOwnersProvider.addGroupFromApi(e))),i?.forEach((e=>this.shortVideoOwnersProvider.addOwnerFromApi(e)))})),{items:n,next_from:r,count:0}}createList(e){return new c.ShortVideoFeed(e,{request:this.fetch.bind(this)})}constructor(e,t,s,i){this.videoApi=e,this.feedApi=t,this.shortVideoOwnersProvider=s,this.shortVideoVideosProvider=i,(0,a.makeAutoObservable)(this)}}l=(0,i.__decorate)([n.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===r.VideoApi?Object:r.VideoApi,void 0===o.FeedApi?Object:o.FeedApi,void 0===h.ShortVideoOwnersProvider?Object:h.ShortVideoOwnersProvider,void 0===d.ShortVideoVideosProvider?Object:d.ShortVideoVideosProvider])],l)},338454:(e,t,s)=>{s.d(t,{ShortVideoFeedOwnerVideosProvider:()=>c});var i=s(331635),r=s(413206),o=s(132028),a=s(327813),n=s(632520),d=s(914492),h=s(845758);class c{async fetch(e){const t=await this.shortVideosApi.getOwnerVideos(e);return(0,a.runInAction)((()=>{t.items.forEach((e=>this.shortVideoVideosProvider.addVideoFromApi(e))),t.groups?.forEach((e=>this.shortVideoOwnersProvider.addGroupFromApi(e))),t.profiles?.forEach((e=>this.shortVideoOwnersProvider.addOwnerFromApi(e)))})),t}createList(e){return new h.ShortVideoFeed(e,{request:this.fetch.bind(this)})}constructor(e,t,s){this.shortVideosApi=e,this.shortVideoOwnersProvider=t,this.shortVideoVideosProvider=s,(0,a.makeAutoObservable)(this)}}c=(0,i.__decorate)([o.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===r.ShortVideoApi?Object:r.ShortVideoApi,void 0===d.ShortVideoOwnersProvider?Object:d.ShortVideoOwnersProvider,void 0===n.ShortVideoVideosProvider?Object:n.ShortVideoVideosProvider])],c)},876922:(e,t,s)=>{s.d(t,{ShortVideoFeedTopVideosProvider:()=>c});var i=s(331635),r=s(413206),o=s(327813),a=s(132028),n=s(632520),d=s(914492),h=s(845758);class c{async fetch(e){const t=await this.shortVideosApi.getTopVideos(e);return(0,o.runInAction)((()=>{t.items.forEach((e=>this.shortVideoVideosProvider.addVideoFromApi(e))),t.groups?.forEach((e=>this.shortVideoOwnersProvider.addGroupFromApi(e))),t.profiles?.forEach((e=>this.shortVideoOwnersProvider.addOwnerFromApi(e)))})),t}createList(e){return new h.ShortVideoFeed(e,{request:this.fetch.bind(this)})}constructor(e,t,s){this.shortVideosApi=e,this.shortVideoOwnersProvider=t,this.shortVideoVideosProvider=s,(0,o.makeAutoObservable)(this)}}c=(0,i.__decorate)([a.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===r.ShortVideoApi?Object:r.ShortVideoApi,void 0===d.ShortVideoOwnersProvider?Object:d.ShortVideoOwnersProvider,void 0===n.ShortVideoVideosProvider?Object:n.ShortVideoVideosProvider])],c)},845758:(e,t,s)=>{s.d(t,{ShortVideoFeed:()=>a});var i=s(327813),r=s(110343),o=s(340514);class a{reset(){this.abortController?.abort(),this.resetState()}resetState(){this.ids=[],this.isLoading=!1,this.fullyLoaded=!1,this.nextFrom="",this.abortController=null}async request(e){this.isLoading=!0,this.abortController=new AbortController;try{const t=await this.provider.request({...e,...this.nextFrom?{start_from:this.nextFrom}:{}},{signal:this.abortController.signal});return(0,i.runInAction)((()=>{this.isLoading=!1,this.abortController=null,this.nextFrom=t.next_from??"",this.count=t.count,this.fullyLoaded=!Boolean(t.next_from),this.ids.push(...t.items.map(o.getRawIdFromVideo))})),this.retryIfNeeded(t)}catch(e){throw(0,i.runInAction)((()=>{this.isLoading=!1,this.abortController=null,this.error=e})),e}}async fetch(){if(!this.isLoading&&!this.fullyLoaded)return this.request(this.requestParams)}async retryIfNeeded(e){if(!e.items.length&&this.retryCount<r.GET_SHORT_VIDEOS_LIST_MAX_RETRIES)return(0,i.runInAction)((()=>{this.retryCount=e.next_from?1:this.retryCount+1})),await this.fetch();(0,i.runInAction)((()=>{this.retryCount=0}))}constructor(e,t){this.requestParams=e,this.provider=t,this.abortController=null,this.nextFrom="",this.retryCount=0,this.ids=[],this.count=0,this.isLoading=!1,this.fullyLoaded=!1,this.error=null,(0,i.makeAutoObservable)(this)}}},340514:(e,t,s)=>{s.d(t,{getRawIdFromVideo:()=>r});var i=s(873900);const r=e=>(0,i.getIdentityRawId)({id:e.id??0,ownerId:e.owner_id??0})},914492:(e,t,s)=>{s.d(t,{ShortVideoOwnersProvider:()=>_});var i=s(331635),r=s(327813),o=s(695368),a=s(132028),n=s(603025),d=s(468073),h=s(488709),c=s(962005),u=s(951652),l=s(903723),p=s(276289),m=s(368014),g=s(317245),v=s(89933);const b=["photo_50","photo_100","photo_200","photo_400","friend_status","is_subscribed","is_member","can_comment","screen_name","verified"].join(",");class _{addOwnerFromApi(e){const t=e.id,s=new g.ShortVideoUserOwner(t,e,this.usersSubscribeService,this.authService);this.ownersMap.set(t,s),e.screen_name&&this.ownersByScreenNameMap.set(e.screen_name,s),this.usersSubscribeService.setMemberStatus(e)}addGroupFromApi(e){const t=d.Ranges.convertGroupIdToOwnerIdStrict(e.id),s=new v.ShortVideoGroupOwner(t,e,this.groupsSubscribeService);this.groupsProvider.createGroupFromApi({apiGroup:e,fields:""}),this.ownersMap.set(t,s),e.screen_name&&this.ownersByScreenNameMap.set(e.screen_name,s)}async ensure(e){const t=this.get(e);return t||this.isError(e)?t:this.fetch(e)}async fetch(e){try{this.pendingSet.add(e),this.errorMap.delete(e),"number"==typeof e?d.Ranges.isGroupId(e)?await this.fetchGroup(e):await this.fetchUser(e):await Promise.all([this.fetchUser(e),this.fetchGroup(e)]),(0,r.runInAction)((()=>{this.pendingSet.delete(e)}))}catch(t){throw(0,r.runInAction)((()=>{this.pendingSet.delete(e),this.errorMap.set(e,t)})),new Error("Error fetch owner",{cause:t})}}get(e){return"string"==typeof e?this.ownersByScreenNameMap.get(e):this.ownersMap.get(e)}isPending(e){return Boolean(this.pendingSet.has(e))}isError(e){return Boolean(this.errorMap.get(e))}async fetchUser(e){const t=await this.usersApi.get({user_ids:`${e}`,fields:b});(0,r.runInAction)((()=>{t.forEach((e=>this.addOwnerFromApi(e)))}))}async fetchGroup(e){try{const t=await this.groupsApi.getById({group_ids:"number"==typeof e?`${d.Ranges.convertOwnerIdToGroupId(e)}`:e,fields:b});(0,r.runInAction)((()=>{t.groups?.forEach((e=>this.addGroupFromApi(e)))}))}catch(t){if(!("string"==typeof e&&t instanceof Error&&(0,n.isApiError)(t)&&t.error.error_code===o.API_ERROR_PARAM))throw new Error("Error fetch group",{cause:t})}}constructor(e,t,s,i,o,a){this.groupsProvider=e,this.groupsSubscribeService=t,this.usersSubscribeService=s,this.usersApi=i,this.groupsApi=o,this.authService=a,this.ownersMap=new Map,this.ownersByScreenNameMap=new Map,this.pendingSet=new Set,this.errorMap=new Map,(0,r.makeAutoObservable)(this)}}_=(0,i.__decorate)([a.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===l.GroupsProvider?Object:l.GroupsProvider,void 0===p.GroupsSubscribeService?Object:p.GroupsSubscribeService,void 0===m.ShortVideoUsersSubscribeService?Object:m.ShortVideoUsersSubscribeService,void 0===h.UsersApi?Object:h.UsersApi,void 0===c.GroupsApi?Object:c.GroupsApi,void 0===u.AuthService?Object:u.AuthService])],_)},368014:(e,t,s)=>{s.d(t,{ShortVideoUsersSubscribeService:()=>c});var i=s(331635),r=s(891281),o=s(199313),a=s(208214),n=s(261491),d=s(327813),h=s(132028);class c{getIsMember(e){const t=this.usersMemberStatusMap.get(e);return"number"==typeof t&&(t===r.FriendsFriendStatusStatusEnumNames.OUTCOMING_REQUEST||t===r.FriendsFriendStatusStatusEnumNames.IS_FRIEND)}async subscribe(e){const t=e.user_id;try{this.usersSubscribeStatusPending.set(t,!0);const s=await this.api.add(e);return(0,d.runInAction)((()=>{this.usersMemberStatusMap.set(t,s===o.FriendsAddResponseEnumNames.APPROVED?r.FriendsFriendStatusStatusEnumNames.IS_FRIEND:r.FriendsFriendStatusStatusEnumNames.OUTCOMING_REQUEST)})),!0}finally{(0,d.runInAction)((()=>{this.usersSubscribeStatusPending.delete(t)}))}}async unsubscribe(e){const t=e.user_id;try{this.usersSubscribeStatusPending.set(t,!0);return!!(await this.api.delete(e)).success&&(this.usersMemberStatusMap.set(t,r.FriendsFriendStatusStatusEnumNames.NOT_A_FRIEND),!0)}finally{this.usersSubscribeStatusPending.delete(t)}}getIsLoading(e){return Boolean(this.usersSubscribeStatusPending.get(e))}setMemberStatus(e){e.friend_status&&this.usersMemberStatusMap.set(e.id,e.friend_status)}getMemberStatus(e){return this.usersMemberStatusMap.get(e)}constructor(e,t){this.api=e,this.myTracker=t,this.usersMemberStatusMap=new Map,this.usersSubscribeStatusPending=new Map,(0,d.makeAutoObservable)(this)}}c=(0,i.__decorate)([h.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===a.FriendsApi?Object:a.FriendsApi,void 0===n.MyTrackerLegacy?Object:n.MyTrackerLegacy])],c)},89933:(e,t,s)=>{s.d(t,{ShortVideoGroupOwner:()=>o});var i=s(327813),r=s(642347);class o{get isSubscribed(){return this.groupsSubscribeService.getIsMember(this.data.id)}get isPendingSubscription(){return this.groupsSubscribeService.getIsLoading(this.data.id)}async subscribe(){return await this.groupsSubscribeService.join({group_id:this.data.id}),!0}async unsubscribe(){return await this.groupsSubscribeService.leave({group_id:this.data.id}),!0}get name(){return this.data.name??""}get screenName(){return this.data.screen_name||`club${this.data.id}`}get isAdmin(){return this.data.admin_level===r.GroupsGroupAdminLevelEnumNames.ADMINISTRATOR}get followersCount(){return this.data.members_count??0}constructor(e,t,s){this.ownerId=e,this.data=t,this.groupsSubscribeService=s,(0,i.makeAutoObservable)(this)}}},317245:(e,t,s)=>{s.d(t,{ShortVideoUserOwner:()=>r});var i=s(327813);class r{get isSubscribed(){return this.usersSubscribeService.getIsMember(this.data.id)}get isPendingSubscription(){return this.usersSubscribeService.getIsLoading(this.data.id)}subscribe(){return this.usersSubscribeService.subscribe({user_id:this.data.id})}unsubscribe(){return this.usersSubscribeService.unsubscribe({user_id:this.data.id})}get name(){return[this.data.first_name,this.data.last_name].filter(Boolean).join(" ").trim()}get screenName(){return this.data.screen_name||`id${this.data.id}`}get isAdmin(){return this.data.id===this.authService.userId}get followersCount(){return this.data.followers_count??0}constructor(e,t,s,r){this.ownerId=e,this.data=t,this.usersSubscribeService=s,this.authService=r,(0,i.makeAutoObservable)(this)}}},291566:(e,t,s)=>{s.d(t,{ShortVideoStatsTokenService:()=>c});var i=s(331635),r=s(132028),o=s(882044),a=s(510454),n=s(627876),d=s(327813);const h="short_video_auth_token";class c{saveToStorage(e){this.localStorage.setItem(h,e)}getFromStorage(){return this.localStorage.getItem(h)}async getFromApi({refresh:e=!1}={}){const t={force_refresh:e?1:0},s=await this.videoApi.getStatsToken(t);if(s)return this.saveToStorage(s.token),s.token}async getToken(e={}){return e.refresh?await this.getFromApi(e):this.getFromStorage()??await this.getFromApi(e)}async trackOneStatError(e){const t=e instanceof Error?e.name:String(e);this.statlog.send({name:"video_player_insignificant_network_error",value:"onestat",keys:[t]})}constructor(e,t,s){this.videoApi=e,this.localStorage=t,this.statlog=s,(0,d.makeAutoObservable)(this)}}c=(0,i.__decorate)([r.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===o.VideoApi?Object:o.VideoApi,void 0===a.LocalStorage?Object:a.LocalStorage,void 0===n.Statlog?Object:n.Statlog])],c)},509739:(e,t,s)=>{s.d(t,{ShortVideoDeleteService:()=>d});var i=s(331635),r=s(327813),o=s(132028),a=s(882044),n=s(768035);class d{isPending(e){return this.pendingSet.has(e)}isDeleted(e){return this.deletedSet.has(e)}getDeletedClips(){return Array.from(this.deletedSet.values())}async delete(e){if(this.isPending(e))return!1;try{const{id:t,ownerId:s}=(0,n.parseRawId)(e);this.pendingSet.add(e);const i=Boolean(await this.videoApi.delete({video_id:t,owner_id:s}));return(0,r.runInAction)((()=>{i&&this.deletedSet.add(e),this.pendingSet.delete(e)})),i}catch(t){throw(0,r.runInAction)((()=>{this.pendingSet.delete(e)})),new Error("Cannot delete video",{cause:t})}}async restore(e){if(this.isPending(e))return!1;try{const{id:t,ownerId:s}=(0,n.parseRawId)(e);this.pendingSet.add(e);const i=Boolean(await this.videoApi.restore({video_id:t,owner_id:s}));return(0,r.runInAction)((()=>{i&&this.deletedSet.delete(e),this.pendingSet.delete(e)})),i}catch(t){throw(0,r.runInAction)((()=>{this.pendingSet.delete(e)})),new Error("Cannot restore video",{cause:t})}}constructor(e){this.videoApi=e,this.deletedSet=new Set,this.pendingSet=new Set,(0,r.makeAutoObservable)(this)}}d=(0,i.__decorate)([o.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===a.VideoApi?Object:a.VideoApi])],d)},905683:(e,t,s)=>{s.d(t,{ShortVideoLikeService:()=>h});var i=s(331635),r=s(132028),o=s(768035),a=s(327813),n=s(413206),d=s(591301);class h{setLikeStatus(e){this.likesMap.set(e.rawId,{count:e.data.likes?.count??0,userLikes:Boolean(e.data.likes?.user_likes)})}isPending(e){return this.pendingSet.has(e)}getLikes(e){return this.likesMap.get(e)}isNotInterested(e){return this.notInterestedSet.has(e)}async setLike(e){if(!this.isPending(e))try{const{id:t,ownerId:s}=(0,o.parseRawId)(e);this.pendingSet.add(e);const i=await this.likesApi.add({type:"video",owner_id:s,item_id:t});(0,a.runInAction)((()=>{this.likesMap.set(e,{count:i.likes,userLikes:!0}),this.pendingSet.delete(e)})),this.isNotInterested(e)&&await this.resetNotInterested(e)}catch(t){throw(0,a.runInAction)((()=>{this.pendingSet.delete(e)})),new Error("Cannot like clip",{cause:t})}}async setDislike(e){if(!this.isPending(e))try{const{id:t,ownerId:s}=(0,o.parseRawId)(e);this.pendingSet.add(e);const i=await this.likesApi.delete({type:"video",owner_id:s,item_id:t});(0,a.runInAction)((()=>{this.likesMap.set(e,{count:i.likes,userLikes:!1}),this.pendingSet.delete(e)}))}catch(t){throw(0,a.runInAction)((()=>{this.pendingSet.delete(e)})),new Error("Cannot dislike clip",{cause:t})}}toggleLike(e){return this.getLikes(e)?.userLikes?this.setDislike(e):this.setLike(e)}async setNotInterested(e){if(this.isPending(e)||this.notInterestedSet.has(e))return!1;try{const{id:t,ownerId:s}=(0,o.parseRawId)(e);this.pendingSet.add(e);const i=await this.shortVideoApi.notInterested({video_id:t,owner_id:s});return(0,a.runInAction)((()=>{this.pendingSet.delete(e),this.notInterestedSet.add(e)})),this.likesMap.get(e)?.userLikes&&await this.setDislike(e),Boolean(i)}catch(t){throw(0,a.runInAction)((()=>{this.pendingSet.delete(e)})),new Error("Cannot mark clip as not interested",{cause:t})}}async resetNotInterested(e){if(this.isPending(e)||!this.notInterestedSet.has(e))return!1;try{const{id:t,ownerId:s}=(0,o.parseRawId)(e);this.pendingSet.add(e);const i=await this.shortVideoApi.notInterested({video_id:t,owner_id:s,unset:1});return(0,a.runInAction)((()=>{this.pendingSet.delete(e),this.notInterestedSet.delete(e)})),Boolean(i)}catch(t){throw(0,a.runInAction)((()=>{this.pendingSet.delete(e)})),new Error("Cannot unmark clip as not interested",{cause:t})}}toggleNotInterested(e){return this.isNotInterested(e)?this.resetNotInterested(e):this.setNotInterested(e)}constructor(e,t){this.shortVideoApi=e,this.likesApi=t,this.pendingSet=new Set,this.likesMap=new Map,this.notInterestedSet=new Set,(0,a.makeAutoObservable)(this)}}h=(0,i.__decorate)([r.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===n.ShortVideoApi?Object:n.ShortVideoApi,void 0===d.LikesApi?Object:d.LikesApi])],h)},632520:(e,t,s)=>{s.d(t,{ShortVideoVideosProvider:()=>m});var i=s(331635),r=s(132028),o=s(327813),a=s(873900),n=s(882044),d=s(413206),h=s(692464),c=s(914492),u=s(509739),l=s(905683),p=s(110343);class m{addVideoFromApi(e){const t=new h.ShortVideoVideo(e,this.shortVideoOwnersProvider,this.shortVideoDeleteService);this.videoMap.set(t.rawId,t),this.shortVideoLikeService.setLikeStatus(t)}isPending(e){return this.pendingSet.has(e)}isError(e){return this.errorMap.has(e)}get(e){return this.videoMap.get(e)}async fetch(e,t){const s=e.videos?.split(",")??[];try{s.forEach((e=>this.pendingSet.add(e)));const i=await this.videoApi.get(e,t);return(0,o.runInAction)((()=>{i.items.map((e=>this.addVideoFromApi(e))),i.profiles?.map((e=>this.shortVideoOwnersProvider.addOwnerFromApi(e))),i.groups?.map((e=>this.shortVideoOwnersProvider.addGroupFromApi(e)))})),i}catch(e){throw(0,o.runInAction)((()=>{s.forEach((t=>this.errorMap.set(t,e)))})),new Error("Fetch video failed",{cause:e})}finally{(0,o.runInAction)((()=>{s.forEach((e=>this.pendingSet.delete(e)))}))}}async fetchAllFields(e){return this.fetch({videos:`${e}`,fields:p.SHORT_VIDEO_ALL_FIELDS,extended:1})}async update(e,t){const s=(0,a.getIdentityRawId)({id:e.video_id,ownerId:e.owner_id});try{this.pendingSet.add(s),await this.shortVideoApi.edit(e,t)}finally{this.pendingSet.delete(s)}}constructor(e,t,s,i,r){this.shortVideoOwnersProvider=e,this.videoApi=t,this.shortVideoApi=s,this.shortVideoDeleteService=i,this.shortVideoLikeService=r,this.videoMap=new Map,this.pendingSet=new Set,this.errorMap=new Map,(0,o.makeAutoObservable)(this)}}m=(0,i.__decorate)([r.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===c.ShortVideoOwnersProvider?Object:c.ShortVideoOwnersProvider,void 0===n.VideoApi?Object:n.VideoApi,void 0===d.ShortVideoApi?Object:d.ShortVideoApi,void 0===u.ShortVideoDeleteService?Object:u.ShortVideoDeleteService,void 0===l.ShortVideoLikeService?Object:l.ShortVideoLikeService])],m)},692464:(e,t,s)=>{s.d(t,{ShortVideoVideo:()=>o});var i=s(327813),r=s(873900);class o{get rawId(){const{id:e=0,owner_id:t=0}=this.data;return(0,r.getIdentityRawId)({id:e,ownerId:t})}get isDeleted(){return this.shortVideoDeleteService.isDeleted(this.rawId)}get isPendingDelete(){return this.shortVideoDeleteService.isPending(this.rawId)}get owner(){return this.data.owner_id?this.shortVideoOwnersProvider.get(this.data.owner_id):void 0}constructor(e,t,s){this.data=e,this.shortVideoOwnersProvider=t,this.shortVideoDeleteService=s,(0,i.makeAutoObservable)(this)}}},979549:(e,t,s)=>{s.d(t,{VideoViewSegmentsService:()=>l});var i=s(331635),r=s(327813),o=s(951652),a=s(882044),n=s(957831),d=s(695368),h=s(132028),c=s(603025),u=s(236737);class l{async send(e){if(this.authService.userId)try{return await this.videoApi.viewSegments(e)}catch(e){if(this.isVideoDeletedError(e))return n.VideoViewSegmentsResponseEnumNames.NOT_LOGGED;throw e}}isVideoDeletedError(e){return(0,c.isApiError)(e)&&e.error.error_code===d.API_ERROR_REQUEST&&e.error.error_msg.includes(u.VIDEO_NOT_FOUND)}constructor(e,t){this.authService=e,this.videoApi=t,(0,r.makeAutoObservable)(this)}}l=(0,i.__decorate)([h.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===o.AuthService?Object:o.AuthService,void 0===a.VideoApi?Object:a.VideoApi])],l)},236737:(e,t,s)=>{s.d(t,{VIDEO_NOT_FOUND:()=>i});const i="video not found"},261491:(e,t,s)=>{s.d(t,{MyTrackerLegacy:()=>a});var i=s(331635),r=s(951652),o=s(132028);class a{tmrPushRawEvent(e){"undefined"!=typeof window&&this.authService.userId&&!window.__dev&&(window._tmr=window._tmr||[],window._tmr.push(e))}constructor(e){this.authService=e,this.counterId="2579437",this.sendTimespentEvent=e=>this.tmrPushRawEvent({id:this.counterId,type:"incrementEventTimespent",activity:e,userId:this.authService.userId})}}a=(0,i.__decorate)([o.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===r.AuthService?Object:r.AuthService])],a)},765905:(e,t,s)=>{s.d(t,{FeedApi:()=>a});var i=s(331635),r=s(641569),o=s(132028);class a extends r.ApiNamespace{get namespace(){return"newsfeed"}constructor(...e){super(...e),this.getNewsFeed=this.makeMethod("get"),this.ignoreItem=this.makeMethod("ignoreItem"),this.getBanned=this.makeMethod("getBanned"),this.deleteBan=this.makeMethod("deleteBan"),this.setFeedType=this.makeMethod("setFeedType"),this.unignoreItem=this.makeMethod("unignoreItem"),this.unsubscribe=this.makeMethod("unsubscribe")}}a=(0,i.__decorate)([o.scope.global()],a)},208214:(e,t,s)=>{s.d(t,{FriendsApi:()=>a});var i=s(331635),r=s(132028),o=s(641569);class a extends o.ApiNamespace{get namespace(){return"friends"}constructor(...e){super(...e),this.get=this.makeMethod("get"),this.getIds=this.makeMethod("get"),this.getUsers=(e,t)=>this.makeMethod("get")(e.fields?e:{...e,fields:"first_name"},t),this.search=this.makeMethod("search"),this.getLists=this.makeMethod("getLists"),this.add=this.makeMethod("add"),this.delete=this.makeMethod("delete")}}a=(0,i.__decorate)([r.scope.global()],a)},962005:(e,t,s)=>{s.d(t,{GroupsApi:()=>a});var i=s(331635),r=s(641569),o=s(132028);class a extends r.ApiNamespace{get namespace(){return"groups"}constructor(...e){super(...e),this.getById=this.makeMethod("getById",!0),this.getSettings=this.makeMethod("getSettings"),this.getMembers=this.makeMethod("getMembers"),this.getEditSettings=this.makeMethod("getEditSettings"),this.join=this.makeMethod("join"),this.leave=this.makeMethod("leave"),this.changeSubscriptionsVisibility=this.makeMethod("changeSubscriptionsVisibility"),this.get=this.makeMethod("get"),this.edit=this.makeMethod("edit"),this.getWebCatalogMenu=this.makeMethod("getWebCatalogMenu",!0),this.removeRecents=this.makeMethod("removeRecents"),this.getRecommendedTipsList=this.makeMethod("getRecommendedTipsList"),this.getSuggestions=this.makeMethod("getSuggestions"),this.getGroupSettingsMenu=this.makeMethod("getGroupSettingsMenu"),this.getCategories=this.makeMethod("getCategories"),this.addAddress=this.makeMethod("addAddress"),this.create=this.makeMethod("create"),this.editAddress=this.makeMethod("editAddress"),this.invite=this.makeMethod("invite"),this.removeUser=this.makeMethod("removeUser"),this.setOnboardingState=this.makeMethod("setOnboardingState"),this.validateCreation=this.makeMethod("validateCreation"),this.getMonetizationRules=this.makeMethod("getMonetizationRules"),this.registerAdblogger=this.makeMethod("registerAdblogger"),this.sendGptRequest=this.makeMethod("sendGptRequest"),this.getGptResult=this.makeMethod("getGptResult"),this.addChat=this.makeMethod("addChat"),this.getAddresses=this.makeMethod("getAddresses"),this.getGroupSettings=this.makeMethod("getGroupSettings"),this.getBidOrganizationList=this.makeMethod("getBidOrganizationList"),this.setBidLink=this.makeMethod("setBidLink"),this.getBusinessProfile=this.makeMethod("getBusinessProfile"),this.setGroupSettings=this.makeMethod("setGroupSettings")}}a=(0,i.__decorate)([o.scope.global()],a)},591301:(e,t,s)=>{s.d(t,{LikesApi:()=>a});var i=s(331635),r=s(132028),o=s(641569);class a extends o.ApiNamespace{get namespace(){return"likes"}constructor(...e){super(...e),this.add=this.makeMethod("add"),this.delete=this.makeMethod("delete"),this.getList=this.makeMethod("getList")}}a=(0,i.__decorate)([r.scope.global()],a)},413206:(e,t,s)=>{s.d(t,{ShortVideoApi:()=>a});var i=s(331635),r=s(132028),o=s(641569);class a extends o.ApiNamespace{get namespace(){return"shortVideo"}constructor(...e){super(...e),this.getOwnerVideos=this.makeMethod("getOwnerVideos"),this.getChallenge=this.makeMethod("getChallenge"),this.getClipCounters=this.makeMethod("getClipCounters"),this.create=this.makeMethod("create"),this.edit=this.makeMethod("edit"),this.publish=this.makeMethod("publish"),this.getTopVideos=this.makeMethod("getTopVideos"),this.sendPush=this.makeMethod("sendPush"),this.getGroupsForUploading=this.makeMethod("getGroupsForUploading"),this.notInterested=this.makeMethod("notInterested"),this.getPlaylists=this.makeMethod("getPlaylists"),this.addToPlaylist=this.makeMethod("addToPlaylist"),this.removeFromPlaylist=this.makeMethod("removeFromPlaylist"),this.getDownloadUrl=this.makeMethod("getDownloadUrl"),this.getTopTags=this.makeMethod("getTopTags")}}a=(0,i.__decorate)([r.scope.global()],a)},746310:(e,t,s)=>{s.d(t,{StoriesApi:()=>a});var i=s(331635),r=s(641569),o=s(132028);class a extends r.ApiNamespace{get namespace(){return"stories"}constructor(...e){super(...e),this.getWithPrefetch=this.makeMethod("get",!0),this.get=this.makeMethod("get"),this.getById=this.makeMethod("getById"),this.search=this.makeMethod("search"),this.getDiscover=this.makeMethod("getDiscover"),this.getPhotoUploadServer=this.makeMethod("getPhotoUploadServer"),this.getVideoUploadServer=this.makeMethod("getVideoUploadServer"),this.getBackgrounds=this.makeMethod("getBackgrounds"),this.getWebConfig=this.makeMethod("getWebConfig"),this.save=this.makeMethod("save"),this.delete=this.makeMethod("delete")}}a=(0,i.__decorate)([o.scope.global()],a)},488709:(e,t,s)=>{s.d(t,{UsersApi:()=>a});var i=s(331635),r=s(641569),o=s(132028);class a extends r.ApiNamespace{get namespace(){return"users"}constructor(...e){super(...e),this.getWithPrefetch=this.makeMethod("get",!0),this.get=this.makeMethod("get"),this.getFollowers=this.makeMethod("getFollowers"),this.search=this.makeMethod("search")}}a=(0,i.__decorate)([o.scope.global()],a)},229745:(e,t,s)=>{s.d(t,{WallApi:()=>a});var i=s(331635),r=s(641569),o=s(132028);class a extends r.ApiNamespace{get namespace(){return"wall"}constructor(...e){super(...e),this.get=this.makeMethod("get"),this.getPostById=this.makeMethod("getById"),this.acceptCoOwnership=this.makeMethod("acceptCoOwnership"),this.rejectCoOwnership=this.makeMethod("rejectCoOwnership"),this.parseAttachedLink=this.makeMethod("parseAttachedLink"),this.post=this.makeMethod("post"),this.subscribe=this.makeMethod("subscribe"),this.unsubscribe=this.makeMethod("unsubscribe"),this.getSubscriptions=this.makeMethod("getSubscriptions"),this.edit=this.makeMethod("edit"),this.getPostingSettings=this.makeMethod("getPostingSettings"),this.getCommentsExtended=this.makeMethod("getComments"),this.getCommentExtended=this.makeMethod("getComment"),this.reportPost=this.makeMethod("reportPost"),this.pin=this.makeMethod("pin"),this.unpin=this.makeMethod("unpin"),this.closeComments=this.makeMethod("closeComments"),this.openComments=this.makeMethod("openComments"),this.archive=this.makeMethod("archive"),this.reveal=this.makeMethod("reveal"),this.delete=this.makeMethod("delete"),this.restore=this.makeMethod("restore"),this.deleteComment=this.makeMethod("deleteComment"),this.restoreComment=this.makeMethod("restoreComment"),this.createComment=this.makeMethod("createComment"),this.editComment=this.makeMethod("editComment"),this.getCommentOrder=this.makeMethod("getCommentOrder")}}a=(0,i.__decorate)([o.scope.global()],a)}}]);try{stManager?.done("dist/web/chunks/e7b10929.14219114.js")}catch(e){}